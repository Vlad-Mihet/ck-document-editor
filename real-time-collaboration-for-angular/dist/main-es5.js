function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _get3(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get3 = Reflect.get; } else { _get3 = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get3(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e505) { throw _e505; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e506) { didErr = true; err = _e506; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (typeof call === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }

function _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"], {
  /***/
  "./node_modules/raw-loader/index.js!./src/app/app.component.html": function node_modulesRawLoaderIndexJsSrcAppAppComponentHtml(module, exports) {
    module.exports = "<div *ngIf=\"!configurationSet\">\n\t<div id=\"overlay\" [class.warning]=\"isWarning\">\n\t\t<form class=\"body\" #form=\"ngForm\" (ngSubmit)=\"handleSubmit()\">\n\t\t\t<h2>Connect CKEditor Cloud Services</h2>\n\t\t\t<p>\n\t\t\t\tIf you do not have Cloud Services URLs yet,&nbsp;\n\t\t\t\t<a href=\"https://ckeditor.com/docs/cs/latest/guides/collaboration/quick-start.html\" target=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\">\n\t\t\t\t\tsee the documentation\n\t\t\t\t</a>.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<label for=\"upload-url\">Upload URL</label>\n\t\t\t\t<input id=\"upload-url\" name=\"upload-url\" [(ngModel)]=\"config.uploadUrl\" />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<label for=\"web-socket-url\">WebSocket URL</label>\n\t\t\t\t<input id=\"web-socket-url\" name=\"web-socket-url\" [(ngModel)]=\"config.webSocketUrl\" />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<label for=\"token-url\">Token URL</label>\n\t\t\t\t<input id=\"token-url\" name=\"token-url\" [(ngModel)]=\"config.tokenUrl\" (input)=\"handleTokenUrlChange()\" required />\n\t\t\t</div>\n\n\t\t\t<div id=\"additional\" [class.visible]=\"isCloudServicesTokenEndpoint()\">\n\t\t\t\t<p>Use one of the following users to define the user data.</p>\n\t\t\t\t<div id=\"user-container\">\n\t\t\t\t\t<div *ngFor=\"let data of users\" (click)=\"selectUser( data )\" class=\"{{ selectedUser == data.id ? 'active' : '' }}\">\n\t\t\t\t\t\t<img src=\"{{ data.avatar }}\" *ngIf=\"data.avatar\" />\n\t\t\t\t\t\t<span class=\"pseudo-avatar\"\n\t\t\t\t\t\t\t*ngIf=\"!data.avatar && data.name\">{{ getUserInitials( data.name ) }}</span>\n\t\t\t\t\t\t<span class=\"pseudo-avatar anonymous\" *ngIf=\"!data.avatar && !data.name\"></span>\n\t\t\t\t\t\t<span>{{ data.name || '(anonymous)' }}</span>\n\t\t\t\t\t\t<span class=\"role\">{{ data.role }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<label for=\"channel-id\">Channel ID</label>\n\t\t\t\t<input id=\"channel-id\" name=\"channel-id\" [(ngModel)]=\"channelId\" required />\n\t\t\t</div>\n\n\t\t\t<button id=\"start\" [disabled]=\"!form.valid\">Start</button>\n\t\t</form>\n\t</div>\n</div>\n\n<app-editor *ngIf=\"configurationSet\" [configuration]=\"config\" [channelId]=\"channelId\" (ready)=\"onEditorReady($event)\"></app-editor>\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/index.js!./src/app/editor/editor.component.html": function node_modulesRawLoaderIndexJsSrcAppEditorEditorComponentHtml(module, exports) {
    module.exports = "<header>\n\t<div class=\"centered\">\n\t\t<h1>\n\t\t\t<a href=\"https://ckeditor.com/ckeditor-5/\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t<img src=\"https://c.cksource.com/a/1/logos/ckeditor5.svg\" alt=\"CKEditor 5 logo\" /> CKEditor 5\n\t\t\t</a>\n\t\t</h1>\n\n\t\t<nav>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"https://ckeditor.com/collaboration/\" target=\"_blank\" rel=\"noopener noreferrer\">Website</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"https://ckeditor.com/docs/ckeditor5/latest/features/collaboration/real-time-collaboration/real-time-collaboration.html\"\n\t\t\t\t\t\ttarget=\"_blank\" rel=\"noopener noreferrer\">Documentation</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t</div>\n</header>\n\n<main>\n\t<div class=\"message\">\n\t\t<div class=\"centered\">\n\t\t\t<h1>CKEditor5 real-time collaboration sample for Angular</h1>\n\t\t\t<p>\n\t\t\t\tOpen this sample in another browser tab to start real-time collaborative editing.\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t<div class=\"centered\">\n\t\t<div class=\"row row-presence\">\n\t\t\t<div #presenceList class='presence'></div>\n\t\t</div>\n\t\t<div class='row row-editor'>\n\t\t\t<ckeditor [editor]=\"Editor\" (ready)=\"onReady($event)\" [config]=\"editorConfig\" [data]=\"data\"></ckeditor>\n\t\t\t<div #sidebar class='sidebar'></div>\n\t\t</div>\n\t</div>\n</main>\n\n<footer>\n\t<div class=\"centered\">\n\t\t<p>\n\t\t\t<a href=\"https://ckeditor.com/ckeditor-5/\" target=\"_blank\" rel=\"noopener noreferrer\">CKEditor 5</a> – Rich text editor of tomorrow, available today\n\t\t</p>\n\t\t<p>\n\t\t\tCopyright © 2003-2019, <a href=\"https://cksource.com/\" target=\"_blank\" rel=\"noopener noreferrer\">CKSource</a> – Frederico Knabben. All rights reserved.\n\t\t</p>\n\t</div>\n</footer>\n";
    /***/
  },

  /***/
  "./node_modules/tslib/tslib.es6.js": function node_modulesTslibTslibEs6Js(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__extends", function () {
      return __extends;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__assign", function () {
      return _assign;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__rest", function () {
      return __rest;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__decorate", function () {
      return __decorate;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__param", function () {
      return __param;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__metadata", function () {
      return __metadata;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__awaiter", function () {
      return __awaiter;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__generator", function () {
      return __generator;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__createBinding", function () {
      return __createBinding;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__exportStar", function () {
      return __exportStar;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__values", function () {
      return __values;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__read", function () {
      return __read;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__spread", function () {
      return __spread;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__spreadArrays", function () {
      return __spreadArrays;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__await", function () {
      return __await;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function () {
      return __asyncGenerator;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function () {
      return __asyncDelegator;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__asyncValues", function () {
      return __asyncValues;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function () {
      return __makeTemplateObject;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__importStar", function () {
      return __importStar;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__importDefault", function () {
      return __importDefault;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__classPrivateFieldGet", function () {
      return __classPrivateFieldGet;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__classPrivateFieldSet", function () {
      return __classPrivateFieldSet;
    });
    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */

    /* global Reflect, Promise */


    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) {
          if (b.hasOwnProperty(p)) d[p] = b[p];
        }
      };

      return _extendStatics(d, b);
    };

    function __extends(d, b) {
      _extendStatics(d, b);

      function __() {
        this.constructor = d;
      }

      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var _assign = function __assign() {
      _assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];

          for (var p in s) {
            if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
          }
        }

        return t;
      };

      return _assign.apply(this, arguments);
    };

    function __rest(s, e) {
      var t = {};

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
      }

      if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
      }
      return t;
    }

    function __decorate(decorators, target, key, desc) {
      var c = arguments.length,
          r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
          d;
      if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
      }
      return c > 3 && r && Object.defineProperty(target, key, r), r;
    }

    function __param(paramIndex, decorator) {
      return function (target, key) {
        decorator(target, key, paramIndex);
      };
    }

    function __metadata(metadataKey, metadataValue) {
      if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
    }

    function __awaiter(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function (resolve) {
          resolve(value);
        });
      }

      return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }

        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }

        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }

        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    }

    function __generator(thisArg, body) {
      var _ = {
        label: 0,
        sent: function sent() {
          if (t[0] & 1) throw t[1];
          return t[1];
        },
        trys: [],
        ops: []
      },
          f,
          y,
          t,
          g;
      return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
      }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
        return this;
      }), g;

      function verb(n) {
        return function (v) {
          return step([n, v]);
        };
      }

      function step(op) {
        if (f) throw new TypeError("Generator is already executing.");

        while (_) {
          try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];

            switch (op[0]) {
              case 0:
              case 1:
                t = op;
                break;

              case 4:
                _.label++;
                return {
                  value: op[1],
                  done: false
                };

              case 5:
                _.label++;
                y = op[1];
                op = [0];
                continue;

              case 7:
                op = _.ops.pop();

                _.trys.pop();

                continue;

              default:
                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                  _ = 0;
                  continue;
                }

                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                  _.label = op[1];
                  break;
                }

                if (op[0] === 6 && _.label < t[1]) {
                  _.label = t[1];
                  t = op;
                  break;
                }

                if (t && _.label < t[2]) {
                  _.label = t[2];

                  _.ops.push(op);

                  break;
                }

                if (t[2]) _.ops.pop();

                _.trys.pop();

                continue;
            }

            op = body.call(thisArg, _);
          } catch (e) {
            op = [6, e];
            y = 0;
          } finally {
            f = t = 0;
          }
        }

        if (op[0] & 5) throw op[1];
        return {
          value: op[0] ? op[1] : void 0,
          done: true
        };
      }
    }

    function __createBinding(o, m, k, k2) {
      if (k2 === undefined) k2 = k;
      o[k2] = m[k];
    }

    function __exportStar(m, exports) {
      for (var p in m) {
        if (p !== "default" && !exports.hasOwnProperty(p)) exports[p] = m[p];
      }
    }

    function __values(o) {
      var s = typeof Symbol === "function" && Symbol.iterator,
          m = s && o[s],
          i = 0;
      if (m) return m.call(o);
      if (o && typeof o.length === "number") return {
        next: function next() {
          if (o && i >= o.length) o = void 0;
          return {
            value: o && o[i++],
            done: !o
          };
        }
      };
      throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
    }

    function __read(o, n) {
      var m = typeof Symbol === "function" && o[Symbol.iterator];
      if (!m) return o;
      var i = m.call(o),
          r,
          ar = [],
          e;

      try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {
          ar.push(r.value);
        }
      } catch (error) {
        e = {
          error: error
        };
      } finally {
        try {
          if (r && !r.done && (m = i["return"])) m.call(i);
        } finally {
          if (e) throw e.error;
        }
      }

      return ar;
    }

    function __spread() {
      for (var ar = [], i = 0; i < arguments.length; i++) {
        ar = ar.concat(__read(arguments[i]));
      }

      return ar;
    }

    function __spreadArrays() {
      for (var s = 0, i = 0, il = arguments.length; i < il; i++) {
        s += arguments[i].length;
      }

      for (var r = Array(s), k = 0, i = 0; i < il; i++) {
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {
          r[k] = a[j];
        }
      }

      return r;
    }

    ;

    function __await(v) {
      return this instanceof __await ? (this.v = v, this) : new __await(v);
    }

    function __asyncGenerator(thisArg, _arguments, generator) {
      if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
      var g = generator.apply(thisArg, _arguments || []),
          i,
          q = [];
      return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () {
        return this;
      }, i;

      function verb(n) {
        if (g[n]) i[n] = function (v) {
          return new Promise(function (a, b) {
            q.push([n, v, a, b]) > 1 || resume(n, v);
          });
        };
      }

      function resume(n, v) {
        try {
          step(g[n](v));
        } catch (e) {
          settle(q[0][3], e);
        }
      }

      function step(r) {
        r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);
      }

      function fulfill(value) {
        resume("next", value);
      }

      function reject(value) {
        resume("throw", value);
      }

      function settle(f, v) {
        if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);
      }
    }

    function __asyncDelegator(o) {
      var i, p;
      return i = {}, verb("next"), verb("throw", function (e) {
        throw e;
      }), verb("return"), i[Symbol.iterator] = function () {
        return this;
      }, i;

      function verb(n, f) {
        i[n] = o[n] ? function (v) {
          return (p = !p) ? {
            value: __await(o[n](v)),
            done: n === "return"
          } : f ? f(v) : v;
        } : f;
      }
    }

    function __asyncValues(o) {
      if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
      var m = o[Symbol.asyncIterator],
          i;
      return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () {
        return this;
      }, i);

      function verb(n) {
        i[n] = o[n] && function (v) {
          return new Promise(function (resolve, reject) {
            v = o[n](v), settle(resolve, reject, v.done, v.value);
          });
        };
      }

      function settle(resolve, reject, d, v) {
        Promise.resolve(v).then(function (v) {
          resolve({
            value: v,
            done: d
          });
        }, reject);
      }
    }

    function __makeTemplateObject(cooked, raw) {
      if (Object.defineProperty) {
        Object.defineProperty(cooked, "raw", {
          value: raw
        });
      } else {
        cooked.raw = raw;
      }

      return cooked;
    }

    ;

    function __importStar(mod) {
      if (mod && mod.__esModule) return mod;
      var result = {};
      if (mod != null) for (var k in mod) {
        if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
      }
      result["default"] = mod;
      return result;
    }

    function __importDefault(mod) {
      return mod && mod.__esModule ? mod : {
        "default": mod
      };
    }

    function __classPrivateFieldGet(receiver, privateMap) {
      if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to get private field on non-instance");
      }

      return privateMap.get(receiver);
    }

    function __classPrivateFieldSet(receiver, privateMap, value) {
      if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to set private field on non-instance");
      }

      privateMap.set(receiver, value);
      return value;
    }
    /***/

  },

  /***/
  "./src/$$_lazy_route_resource lazy recursive": function src$$_lazy_route_resourceLazyRecursive(module, exports) {
    function webpackEmptyAsyncContext(req) {
      // Here Promise.resolve().then() is used instead of new Promise() to prevent
      // uncaught exception popping up in devtools
      return Promise.resolve().then(function () {
        var e = new Error("Cannot find module '" + req + "'");
        e.code = 'MODULE_NOT_FOUND';
        throw e;
      });
    }

    webpackEmptyAsyncContext.keys = function () {
      return [];
    };

    webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
    module.exports = webpackEmptyAsyncContext;
    webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";
    /***/
  },

  /***/
  "./src/app/app.component.css": function srcAppAppComponentCss(module, exports) {
    module.exports = "/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * This file is licensed under the terms of the MIT License (see LICENSE.md).\n */\n\n* {\n\tbox-sizing: border-box;\n}\n\nbody, html {\n\tmargin: 0;\n}\n\n#overlay {\n\tfont-family: Helvetica;\n\twidth: 100%;\n\theight: 100%;\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tbackground: #333;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 4vh 4vw;\n\toverflow: auto;\n}\n\n#overlay.hidden {\n\tdisplay: none;\n}\n\n#overlay .body {\n\tfont-size: 14px;\n\twidth: 100%;\n\tmax-width: 800px;\n\tbackground: white;\n\tpadding: 40px;\n\tborder-radius: 3px;\n\tbox-shadow: 0 0 15px 5px #000\n}\n\n#overlay h2 {\n\tmargin-top: 0;\n\ttext-align: center;\n}\n\n#overlay p {\n\ttext-align: center;\n\tmargin-bottom: 1.5em;\n\twidth: 100%;\n}\n\n#overlay a {\n\tcolor: hsl(219, 100%, 50%);\n\ttext-decoration: none;\n}\n\n#overlay a:hover {\n\ttext-decoration: underline;\n}\n\n#overlay .body>div {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin: 15px 0;\n}\n\n#overlay .body>div label {\n\twidth: 180px;\n\tfont-weight: bold;\n}\n\n#overlay .body>div input {\n\twidth: 100%;\n\tpadding: 8px;\n\tfont-size: 1em;\n\tborder: 1px solid gray;\n\ttransition: border 0.2s\n}\n\n#overlay .body>div input.ng-invalid.ng-touched {\n\tborder: 1px solid #ff0000;\n\toutline-color: #ff0000;\n}\n\nbutton#start {\n\tdisplay: block;\n\twidth: 100%;\n\tmax-width: 300px;\n\tmargin: 20px auto 0;\n\tpadding: 15px;\n\tbackground: hsl(104, 44%, 48%);\n\tcolor: white;\n\tfont-weight: bold;\n\tborder: 0;\n\tborder-radius: 3px;\n\tfont-size: 1em;\n\tcursor: pointer;\n\ttransition: 250ms ease background;\n}\n\nbutton#start:hover {\n\tbackground: hsl(104, 44%, 41%);\n}\n\nbutton#start:disabled {\n\tbackground: lightgray;\n\tcursor: auto;\n}\n\n#overlay #additional {\n\tdisplay: none;\n\tflex-wrap: wrap;\n}\n\n#overlay #additional.visible {\n\tdisplay: flex;\n}\n\n#overlay.warning #additional > p {\n\tcolor: red;\n}\n\n#overlay.warning #user-container {\n\tborder-color: red;\n}\n\n#overlay #user-container {\n\twidth: 100%;\n\tborder: 1px solid hsl(0, 0%, 85%);\n}\n\n#overlay #user-container div {\n\tdisplay: flex;\n\tcursor: pointer;\n\talign-items: center;\n\theight: 48px;\n\tpadding: 10px;\n\tbackground: hsl(0, 0%, 97%);\n\ttransition: 250ms ease background;\n}\n\n#overlay #user-container div:nth-child(odd) {\n\tbackground: #fff;\n}\n\n#overlay #user-container div:hover {\n\tbackground: hsl(0, 0%, 92%);\n}\n\n#overlay #user-container div.active {\n\tbackground: hsl(133, 50%, 84%);\n}\n\n#overlay #user-container img, #overlay #user-container .pseudo-avatar {\n\twidth: 32px;\n\theight: 32px;\n\tborder-radius: 50%;\n\tborder: 2px solid var(--ck-user-avatar-background);\n\tmargin-right: 10px;\n\tbackground: var(--ck-user-avatar-color);\n}\n\n#overlay #user-container .pseudo-avatar {\n\tfont-size: 0.9em;\n\ttext-align: center;\n\tline-height: 30px;\n\tbackground: var(--ck-user-avatar-background);\n\tcolor: var(--ck-user-avatar-color);\n}\n\n#overlay #user-container .pseudo-avatar.anonymous {\n\tbackground-image: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2020%22%3E%0A%20%20%3Cpath%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M9.8%2020H2c0-5.7%205-5.7%206-7l.2-.8c-1.6-.8-2.7-2.7-2.7-5%200-2.8%202-5.2%204.3-5.2S14%204.4%2014%207.3c0%202.2-1%204-2.6%205l.2.6c1.2%201.3%206%201.4%206%207H9.8z%22%2F%3E%0A%3C%2Fsvg%3E)\n}\n\n.role {\n\tfont-size: 11px;\n\tborder: 1px solid #3570aa;\n\tborder-radius: 4px;\n\tcolor: #3570aa;\n\tpadding: 2px 5px;\n\tmargin-left: 10px;\n\tfont-weight: bold;\n\tmargin-top: 2px;\n}\n";
    /***/
  },

  /***/
  "./src/app/app.component.ts": function srcAppAppComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AppComponent", function () {
      return AppComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/forms */
    "./node_modules/@angular/forms/fesm2015/forms.js");

    var LOCAL_STORAGE_KEY = 'CKEDITOR_CS_CONFIG';

    var AppComponent = /*#__PURE__*/function () {
      function AppComponent() {
        _classCallCheck(this, AppComponent);

        this.configurationSet = false;
        this.users = getUsers();
        this.channelId = handleChannelIdInUrl();
        this.config = getStoredConfig();
        this.isWarning = false;
      }

      _createClass(AppComponent, [{
        key: "handleSubmit",
        value: function handleSubmit() {
          if (!this.form || !this.form.valid) {
            return;
          }

          if (this.isCloudServicesTokenEndpoint() && !this.config.tokenUrl.includes('?')) {
            this.isWarning = true;
            return;
          }

          storeConfig({
            tokenUrl: getRawTokenUrl(this.config.tokenUrl),
            uploadUrl: this.config.uploadUrl,
            webSocketUrl: this.config.webSocketUrl
          });
          updateChannelIdInUrl(this.channelId);
          this.configurationSet = true;
        }
      }, {
        key: "handleTokenUrlChange",
        value: function handleTokenUrlChange() {
          this.isWarning = false;
          this.selectedUser = undefined;
        }
      }, {
        key: "selectUser",
        value: function selectUser(user) {
          this.selectedUser = user.id;
          this.isWarning = false;
          var keys = Object.keys(user);
          this.config.tokenUrl = "".concat(getRawTokenUrl(this.config.tokenUrl), "?") + keys.filter(function (key) {
            return user[key];
          }).map(function (key) {
            if (key === 'role') {
              return "".concat(key, "=").concat(user[key]);
            }

            return "user.".concat(key, "=").concat(user[key]);
          }).join('&');
        }
      }, {
        key: "isCloudServicesTokenEndpoint",
        value: function isCloudServicesTokenEndpoint() {
          return _isCloudServicesTokenEndpoint(this.config.tokenUrl);
        }
      }, {
        key: "getUserInitials",
        value: function getUserInitials(name) {
          return name.split(' ', 2).map(function (part) {
            return part.charAt(0);
          }).join('').toUpperCase();
        }
      }, {
        key: "onEditorReady",
        value: function onEditorReady(editor) {
          console.log('Editor is ready to use!', editor);
        }
      }]);

      return AppComponent;
    }();

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('form', {
      "static": false
    }), tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgForm"])], AppComponent.prototype, "form", void 0);
    AppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-root',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./app.component.html */
      "./node_modules/raw-loader/index.js!./src/app/app.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./app.component.css */
      "./src/app/app.component.css"))["default"]]
    })], AppComponent);

    function getUsers() {
      return [{
        id: 'e1',
        name: 'Tom Rowling',
        avatar: 'https://randomuser.me/api/portraits/men/30.jpg',
        role: 'writer'
      }, {
        id: 'e2',
        name: 'Wei Hong',
        avatar: 'https://randomuser.me/api/portraits/women/51.jpg',
        role: 'writer'
      }, {
        id: 'e3',
        name: 'Rani Patel',
        role: 'writer'
      }, {
        id: 'e4',
        name: 'Henrik Jensen',
        role: 'commentator'
      }, {
        id: randomString(),
        role: 'writer'
      }, {
        id: randomString(),
        role: 'reader'
      }];
    }

    function handleChannelIdInUrl() {
      var id = getChannelIdFromUrl();

      if (!id) {
        id = randomString();
        updateChannelIdInUrl(id);
      }

      return id;
    }

    function getChannelIdFromUrl() {
      var channelIdMatch = location.search.match(/channelId=(.+)$/);
      return channelIdMatch ? decodeURIComponent(channelIdMatch[1]) : null;
    }

    function randomString() {
      return Math.floor(Math.random() * Math.pow(2, 52)).toString(32);
    }

    function storeConfig(csConfig) {
      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(csConfig));
    }

    function updateChannelIdInUrl(id) {
      window.history.replaceState({}, document.title, generateUrlWithChannelId(id));
    }

    function generateUrlWithChannelId(id) {
      return "".concat(window.location.href.split('?')[0], "?channelId=").concat(id);
    }

    function getRawTokenUrl(url) {
      if (_isCloudServicesTokenEndpoint(url)) {
        return url.split('?')[0];
      }

      return url;
    }

    function _isCloudServicesTokenEndpoint(tokenUrl) {
      return /cke-cs[\w-]*\.com\/token\/dev/.test(tokenUrl);
    }

    function getStoredConfig() {
      var config = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY) || '{}');
      return {
        tokenUrl: config.tokenUrl || '',
        uploadUrl: config.uploadUrl || '',
        webSocketUrl: config.webSocketUrl || ''
      };
    }
    /***/

  },

  /***/
  "./src/app/app.module.ts": function srcAppAppModuleTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AppModule", function () {
      return AppModule;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/platform-browser */
    "./node_modules/@angular/platform-browser/fesm2015/platform-browser.js");
    /* harmony import */


    var _editor_editor_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./editor/editor.module */
    "./src/app/editor/editor.module.ts");
    /* harmony import */


    var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @angular/forms */
    "./node_modules/@angular/forms/fesm2015/forms.js");
    /* harmony import */


    var _app_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ./app.component */
    "./src/app/app.component.ts");

    var AppModule = function AppModule() {
      _classCallCheck(this, AppModule);
    };

    AppModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
      declarations: [_app_component__WEBPACK_IMPORTED_MODULE_5__["AppComponent"]],
      imports: [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["BrowserModule"], _editor_editor_module__WEBPACK_IMPORTED_MODULE_3__["EditorModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["FormsModule"]],
      providers: [],
      bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_5__["AppComponent"]]
    })], AppModule);
    /***/
  },

  /***/
  "./src/app/editor/editor.component.css": function srcAppEditorEditorComponentCss(module, exports) {
    module.exports = "";
    /***/
  },

  /***/
  "./src/app/editor/editor.component.ts": function srcAppEditorEditorComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "EditorComponent", function () {
      return EditorComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _vendor_ckeditor5_build_classic_editor_with_real_time_collaboration_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../vendor/ckeditor5/build/classic-editor-with-real-time-collaboration.js */
    "./vendor/ckeditor5/build/classic-editor-with-real-time-collaboration.js");
    /* harmony import */


    var _vendor_ckeditor5_build_classic_editor_with_real_time_collaboration_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_vendor_ckeditor5_build_classic_editor_with_real_time_collaboration_js__WEBPACK_IMPORTED_MODULE_2__);

    var EditorComponent = /*#__PURE__*/function () {
      function EditorComponent() {
        _classCallCheck(this, EditorComponent);

        this.ready = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.Editor = _vendor_ckeditor5_build_classic_editor_with_real_time_collaboration_js__WEBPACK_IMPORTED_MODULE_2__;
        this.data = this.getInitialData(); // Note that Angular refs can be used once the view is initialized so we need to create
        // these containers and use in the above editor configuration to workaround this problem.

        this.sidebar = document.createElement('div');
        this.presenceList = document.createElement('div');
        this.boundRefreshDisplayMode = this.refreshDisplayMode.bind(this);
        this.boundCheckPendingActions = this.checkPendingActions.bind(this);
      }

      _createClass(EditorComponent, [{
        key: "editorConfig",
        get: function get() {
          return {
            cloudServices: Object.assign({}, this.configuration),
            collaboration: {
              channelId: this.channelId
            },
            sidebar: {
              container: this.sidebar
            },
            presenceList: {
              container: this.presenceList
            }
          };
        }
      }, {
        key: "ngAfterViewInit",
        value: function ngAfterViewInit() {
          if (!this.sidebarContainer || !this.presenceListContainer) {
            throw new Error('Div containers for sidebar or presence list were not found');
          }

          this.sidebarContainer.nativeElement.appendChild(this.sidebar);
          this.presenceListContainer.nativeElement.appendChild(this.presenceList);
        }
      }, {
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          window.removeEventListener('resize', this.boundRefreshDisplayMode);
          window.removeEventListener('beforeunload', this.boundCheckPendingActions);
        }
      }, {
        key: "onReady",
        value: function onReady(editor) {
          this.editor = editor;
          this.ready.emit(editor); // Prevent closing the tab when any action is pending.

          window.addEventListener('beforeunload', this.boundCheckPendingActions); // Switch between inline and sidebar annotations according to the window size.

          window.addEventListener('resize', this.boundRefreshDisplayMode);
          this.refreshDisplayMode();
        }
      }, {
        key: "checkPendingActions",
        value: function checkPendingActions(domEvt) {
          if (this.editor.plugins.get('PendingActions').hasAny) {
            domEvt.preventDefault();
            domEvt.returnValue = true;
          }
        }
      }, {
        key: "refreshDisplayMode",
        value: function refreshDisplayMode() {
          var annotationsUIs = this.editor.plugins.get('AnnotationsUIs');
          var sidebarElement = this.sidebarContainer.nativeElement;

          if (window.innerWidth < 1070) {
            sidebarElement.classList.remove('narrow');
            sidebarElement.classList.add('hidden');
            annotationsUIs.switchTo('inline');
          } else if (window.innerWidth < 1300) {
            sidebarElement.classList.remove('hidden');
            sidebarElement.classList.add('narrow');
            annotationsUIs.switchTo('narrowSidebar');
          } else {
            sidebarElement.classList.remove('hidden', 'narrow');
            annotationsUIs.switchTo('wideSidebar');
          }
        }
      }, {
        key: "getInitialData",
        value: function getInitialData() {
          return "\n\t<h2>Bilingual Personality Disorder</h2>\n\n\t<figure class=\"image image-style-side\">\n\t\t<img src=\"https://c.cksource.com/a/1/img/docs/sample-image-bilingual-personality-disorder.jpg\" srcset=\"https://c.cksource.com/a/1/img/docs/sample-image-bilingual-personality-disorder.jpg, https://c.cksource.com/a/1/img/docs/sample-image-bilingual-personality-disorder_2x.jpg 2x\">\n\t\t<figcaption>\n\t\t\tOne language, one person.\n\t\t</figcaption>\n\t</figure>\n\n\t<p>\n\t\tThis may be the first time you hear about this made-up disorder but it actually isn\u2019t so far from the truth. Even the studies\n\t\tthat were conducted almost half a century show that <strong>the language you speak has more effects on you than you realize</strong>.\n\t</p>\n\t<p>\n\t\tOne of the very first experiments conducted on this topic dates back to 1964.\n\t\t<a href=\"https://www.researchgate.net/publication/9440038_Language_and_TAT_content_in_bilinguals\">In the experiment</a>\n\t\tdesigned by linguist Ervin-Tripp who is an expert in psycholinguistic and sociolinguistic studies, adults who are bilingual\n\t\tin English in French were showed series of pictures and were asked to create 3-minute stories. In the end participants emphasized\n\t\tdrastically different dynamics for stories in English and French.\n\t</p>\n\t<p>\n\t\tAnother ground-breaking experiment which included bilingual Japanese women married to American men in San Francisco were asked\n\t\tto complete sentences. The goal of the experiment was to investigate whether or not human feelings and thoughts are expressed\n\t\tdifferently in <strong>different language mindsets</strong>.\n\t</p>\n\t<p>Here is a sample from the the experiment:</p>\n\n\t<table>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th></th>\n\t\t\t\t<th>English</th>\n\t\t\t\t<th>Japanese</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td>Real friends should</td>\n\t\t\t\t<td>Be very frank</td>\n\t\t\t\t<td>Help each other</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>I will probably become</td>\n\t\t\t\t<td>A teacher</td>\n\t\t\t\t<td>A housewife</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>When there is a conflict with family</td>\n\t\t\t\t<td>I do what I want</td>\n\t\t\t\t<td>It's a time of great unhappiness</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\n\t<p>\n\t\tMore recent <a href=\"https://books.google.pl/books?id=1LMhWGHGkRUC\">studies</a> show, the language a person speaks affects\n\t\ttheir cognition, behavior, emotions and hence <strong>their personality</strong>. This shouldn\u2019t come as a surprise\n\t\t<a href=\"https://en.wikipedia.org/wiki/Lateralization_of_brain_function\">since wealready know</a> that different regions\n\t\tof the brain become more active depending on the person\u2019s activity at hand. The structure, information and especially\n\t\t<strong>the culture</strong> of languages varies substantially and the language a person speaks is an essential element of daily life.\n\t</p>\n";
        }
      }]);

      return EditorComponent;
    }();

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(), tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)], EditorComponent.prototype, "configuration", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(), tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", String)], EditorComponent.prototype, "channelId", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(), tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)], EditorComponent.prototype, "ready", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('sidebar', {
      "static": true
    }), tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"])], EditorComponent.prototype, "sidebarContainer", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('presenceList', {
      "static": true
    }), tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"])], EditorComponent.prototype, "presenceListContainer", void 0);
    EditorComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-editor',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./editor.component.html */
      "./node_modules/raw-loader/index.js!./src/app/editor/editor.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./editor.component.css */
      "./src/app/editor/editor.component.css"))["default"]]
    })], EditorComponent);
    /***/
  },

  /***/
  "./src/app/editor/editor.module.ts": function srcAppEditorEditorModuleTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "EditorModule", function () {
      return EditorModule;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ckeditor_ckeditor5_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ckeditor/ckeditor5-angular */
    "./node_modules/@ckeditor/ckeditor5-angular/fesm2015/ckeditor-ckeditor5-angular.js");
    /* harmony import */


    var _editor_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./editor.component */
    "./src/app/editor/editor.component.ts");

    var EditorModule = function EditorModule() {
      _classCallCheck(this, EditorModule);
    };

    EditorModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
      declarations: [_editor_component__WEBPACK_IMPORTED_MODULE_3__["EditorComponent"]],
      imports: [_ckeditor_ckeditor5_angular__WEBPACK_IMPORTED_MODULE_2__["CKEditorModule"]],
      providers: [],
      bootstrap: [_editor_component__WEBPACK_IMPORTED_MODULE_3__["EditorComponent"]],
      exports: [_editor_component__WEBPACK_IMPORTED_MODULE_3__["EditorComponent"]]
    })], EditorModule);
    /***/
  },

  /***/
  "./src/environments/environment.ts": function srcEnvironmentsEnvironmentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "environment", function () {
      return environment;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js"); // This file can be replaced during build by using the `fileReplacements` array.
    // `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
    // The list of file replacements can be found in `angular.json`.


    var environment = {
      production: false
    };
    /*
     * For easier debugging in development mode, you can import the following file
     * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
     *
     * This import should be commented out in production mode because it will have a negative impact
     * on performance if an error is thrown.
     */
    // import 'zone.js/dist/zone-error';  // Included with Angular CLI.

    /***/
  },

  /***/
  "./src/main.ts": function srcMainTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/platform-browser-dynamic */
    "./node_modules/@angular/platform-browser-dynamic/fesm2015/platform-browser-dynamic.js");
    /* harmony import */


    var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./app/app.module */
    "./src/app/app.module.ts");
    /* harmony import */


    var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ./environments/environment */
    "./src/environments/environment.ts");

    if (_environments_environment__WEBPACK_IMPORTED_MODULE_4__["environment"].production) {
      Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["enableProdMode"])();
    }

    Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__["AppModule"])["catch"](function (err) {
      return console.error(err);
    });
    /***/
  },

  /***/
  "./vendor/ckeditor5/build/classic-editor-with-real-time-collaboration.js": function vendorCkeditor5BuildClassicEditorWithRealTimeCollaborationJs(module, exports, __webpack_require__) {
    /*!
     * CKEditor 5 with collaboration features is licensed only under a commercial license and is protected by copyright law.
     * For more details about available licensing options please contact us at https://ckeditor.com/contact/.
     */
    !function (t) {
      var e = t.en = t.en || {};
      e.dictionary = Object.assign(e.dictionary || {}, {
        "*Change to:* %0": "*Change to:* %0",
        "*Check item*": "*Check item*",
        "*Format:* %0": "*Format:* %0",
        "*Indent:* %0": "*Indent:* %0",
        "*Insert:* %0": "*Insert:* %0",
        "*Merge cells*": "*Merge cells*",
        "*Merge:* %0": "*Merge:* %0",
        "*Outdent:* %0": "*Outdent:* %0",
        "*Remove all formatting*": "*Remove all formatting*",
        "*Remove format:* %0": "*Remove format:* %0",
        "*Remove image text alternative*": "*Remove image text alternative*",
        "*Remove link*": "*Remove link*",
        "*Remove:* %0": "*Remove:* %0",
        "*Replace table cells*": "*Replace table cells*",
        "*Reset font background color*": "*Reset font background color*",
        "*Reset font color*": "*Reset font color*",
        "*Reset font family*": "*Reset font family*",
        "*Reset font size*": "*Reset font size*",
        "*Reset image width*": "*Reset image width*",
        "*Set font background color:* %0": "*Set font background color:* %0",
        "*Set font color:* %0": "*Set font color:* %0",
        "*Set font family:* %0": "*Set font family:* %0",
        "*Set font size:* %0": "*Set font size:* %0",
        "*Set image text alternative:* %0": "*Set image text alternative:* %0",
        "*Set image width:* %0": "*Set image width:* %0",
        "*Set link:* %0": "*Set link:* %0",
        "*Split cell:* horizontally": "*Split cell:* horizontally",
        "*Split cell:* vertically": "*Split cell:* vertically",
        "*Split:* %0": "*Split:* %0",
        "*Uncheck item*": "*Uncheck item*",
        "%0 of %1": "%0 of %1",
        "Accept all selected suggestions": "Accept all selected suggestions",
        "Accept all suggestions": "Accept all suggestions",
        "Accept suggestion": "Accept suggestion",
        "Align center": "Align center",
        "Align left": "Align left",
        "Align right": "Align right",
        Anonymous: "Anonymous",
        Aquamarine: "Aquamarine",
        "Are you sure?": "Are you sure?",
        Big: "Big",
        Black: "Black",
        "Block quote": "Block quote",
        Blue: "Blue",
        "Blue marker": "Blue marker",
        Bold: "Bold",
        "Break text": "Break text",
        "Bulleted List": "Bulleted List",
        Cancel: "Cancel",
        "Cannot upload file:": "Cannot upload file:",
        "Centered image": "Centered image",
        "Change image text alternative": "Change image text alternative",
        "Choose heading": "Choose heading",
        Column: "Column",
        Comment: "Comment",
        "Comment editor": "Comment editor",
        CONNECTED_USERS: ["1 connected user (me)", "%0 connected users"],
        "Could not insert image at the current position.": "Could not insert image at the current position.",
        "Could not obtain resized image URL.": "Could not obtain resized image URL.",
        Default: "Default",
        "Delete column": "Delete column",
        "Delete comment thread?": "Delete comment thread?",
        "Delete comment?": "Delete comment?",
        "Delete row": "Delete row",
        "Dim grey": "Dim grey",
        "Discard all selected suggestions": "Discard all selected suggestions",
        "Discard all suggestions": "Discard all suggestions",
        "Discard suggestion": "Discard suggestion",
        Downloadable: "Downloadable",
        "Dropdown toolbar": "Dropdown toolbar",
        Edit: "Edit",
        "Edit block": "Edit block",
        "Edit link": "Edit link",
        "Editor toolbar": "Editor toolbar",
        ELEMENT_BLOCK_QUOTE: "block quote",
        ELEMENT_BULLETED_LIST: "bulleted list",
        ELEMENT_CAPTION: "caption",
        ELEMENT_CODE_BLOCK: ["code block", "%0 code blocks"],
        ELEMENT_HEADING: ["heading (level %1)", "%0 headings (level %1)"],
        ELEMENT_HEADING_CUSTOM: ["heading (%1)", "%0 headings (%1)"],
        ELEMENT_HORIZONTAL_LINE: ["horizontal line", "%0 horizontal lines"],
        ELEMENT_IMAGE: ["image", "%0 images"],
        ELEMENT_INLINE_IMAGE: ["image", "%0 images"],
        ELEMENT_LINE_BREAK: ["line break", "%0 line breaks"],
        ELEMENT_LIST_ITEM: ["list item", "%0 list items"],
        ELEMENT_MEDIA: ["media item", "%0 media items"],
        ELEMENT_NUMBERED_LIST: "numbered list",
        ELEMENT_PAGE_BREAK: ["page break", "%0 page breaks"],
        ELEMENT_PARAGRAPH: ["paragraph", "%0 paragraphs"],
        ELEMENT_SPACE: ["space", "%0 spaces"],
        ELEMENT_TABLE: ["table", "%0 tables"],
        ELEMENT_TABLE_COLUMN: ["table column", "%0 table columns"],
        ELEMENT_TABLE_COLUMN_WITH_TEXT: ["table column *with text* %1", "%0 table columns *with text* %1"],
        ELEMENT_TABLE_ROW: ["table row", "%0 table rows"],
        ELEMENT_TABLE_ROW_WITH_TEXT: ["table row *with text* %1", "%0 table rows *with text* %1"],
        ELEMENT_TABLE_WITH_TEXT: "table *with text* %0",
        ELEMENT_TITLE: "title",
        ELEMENT_TODO_LIST: "to-do list",
        "Enter image caption": "Enter image caption",
        "Font Family": "Font Family",
        "Font Size": "Font Size",
        FORMAT_ALIGN_TO_CENTER: "align to center",
        FORMAT_ALIGN_TO_LEFT: "align to left",
        FORMAT_ALIGN_TO_RIGHT: "align to right",
        FORMAT_BOLD: "bold",
        FORMAT_CODE: "code",
        FORMAT_CUSTOM_HIGHLIGHT: "%0 highlight",
        FORMAT_HEADER_COLUMN: "header column",
        FORMAT_HEADER_ROW: "header row",
        FORMAT_HIGHLIGHT: "highlight",
        FORMAT_ITALIC: "italic",
        FORMAT_JUSTIFY_TEXT: "justify",
        FORMAT_REGULAR_COLUMN: "regular column",
        FORMAT_REGULAR_ROW: "regular row",
        FORMAT_RESTRICTED_DISABLED: "*Disable in restricted editing mode*",
        FORMAT_RESTRICTED_ENABLED: "*Enable in restricted editing mode*",
        FORMAT_SIDE_IMAGE: "side image",
        FORMAT_STRIKETHROUGH: "strikethrough",
        FORMAT_SUBSCRIPT: "subscript",
        FORMAT_SUPERSCRIPT: "superscript",
        FORMAT_UNDERLINE: "underline",
        "Full size image": "Full size image",
        Green: "Green",
        "Green marker": "Green marker",
        "Green pen": "Green pen",
        Grey: "Grey",
        "Header column": "Header column",
        "Header row": "Header row",
        Heading: "Heading",
        "Heading 1": "Heading 1",
        "Heading 2": "Heading 2",
        "Heading 3": "Heading 3",
        "Heading 4": "Heading 4",
        "Heading 5": "Heading 5",
        "Heading 6": "Heading 6",
        Highlight: "Highlight",
        Huge: "Huge",
        "Image resize list": "Image resize list",
        "Image toolbar": "Image toolbar",
        "image widget": "image widget",
        "In line": "In line",
        "Insert column left": "Insert column left",
        "Insert column right": "Insert column right",
        "Insert image": "Insert image",
        "Insert image or file": "Insert image or file",
        "Insert media": "Insert media",
        "Insert paragraph after block": "Insert paragraph after block",
        "Insert paragraph before block": "Insert paragraph before block",
        "Insert row above": "Insert row above",
        "Insert row below": "Insert row below",
        "Insert table": "Insert table",
        "Inserting image failed": "Inserting image failed",
        Italic: "Italic",
        Justify: "Justify",
        "Left aligned image": "Left aligned image",
        "Light blue": "Light blue",
        "Light green": "Light green",
        "Light grey": "Light grey",
        Link: "Link",
        "Link URL": "Link URL",
        "Media URL": "Media URL",
        "media widget": "media widget",
        "Merge cell down": "Merge cell down",
        "Merge cell left": "Merge cell left",
        "Merge cell right": "Merge cell right",
        "Merge cell up": "Merge cell up",
        "Merge cells": "Merge cells",
        Next: "Next",
        No: "No",
        NUMBER_OF_COMMENTS: ["%0 Comment", "%0 Comments"],
        "Numbered List": "Numbered List",
        "Open in a new tab": "Open in a new tab",
        "Open link in new tab": "Open link in new tab",
        Orange: "Orange",
        Original: "Original",
        Paragraph: "Paragraph",
        "Paste the media URL in the input.": "Paste the media URL in the input.",
        PENDING_ACTION_COMMENT_THREAD: "Unsaved change in comment thread.",
        PENDING_ACTION_SENDING_DATA: "Sending data to the server.",
        PENDING_ACTION_SUGGESTION: "Unsaved change in suggestion.",
        "Pink marker": "Pink marker",
        Previous: "Previous",
        Purple: "Purple",
        Red: "Red",
        "Red pen": "Red pen",
        Redo: "Redo",
        Remove: "Remove",
        "Remove Format": "Remove Format",
        "Remove highlight": "Remove highlight",
        REPLACE_TEXT: "*Replace:* %0 *with* %1",
        "Reply...": "Reply...",
        "Resize image": "Resize image",
        "Resize image to %0": "Resize image to %0",
        "Resize image to the original size": "Resize image to the original size",
        "Rich Text Editor": "Rich Text Editor",
        "Rich Text Editor, %0": "Rich Text Editor, %0",
        "Right aligned image": "Right aligned image",
        Row: "Row",
        Save: "Save",
        "Select all": "Select all",
        "Select column": "Select column",
        "Select row": "Select row",
        "Selecting resized image failed": "Selecting resized image failed",
        "Show more items": "Show more items",
        "Side image": "Side image",
        Small: "Small",
        "Split cell horizontally": "Split cell horizontally",
        "Split cell vertically": "Split cell vertically",
        Strikethrough: "Strikethrough",
        Submit: "Submit",
        "Table toolbar": "Table toolbar",
        "Text alignment": "Text alignment",
        "Text alignment toolbar": "Text alignment toolbar",
        "Text alternative": "Text alternative",
        "Text highlight toolbar": "Text highlight toolbar",
        "The URL must not be empty.": "The URL must not be empty.",
        "This link has no URL": "This link has no URL",
        "This media URL is not supported.": "This media URL is not supported.",
        Tiny: "Tiny",
        "Tip: Paste the URL into the content to embed faster.": "Tip: Paste the URL into the content to embed faster.",
        "Toggle caption off": "Toggle caption off",
        "Toggle caption on": "Toggle caption on",
        TOO_LONG_COMMENT_ALERT: "Comment content is too long. Your comment has %0 characters but the limit is %1 characters.",
        "Track changes": "Track changes",
        Turquoise: "Turquoise",
        Underline: "Underline",
        Undo: "Undo",
        Unlink: "Unlink",
        "Upload failed": "Upload failed",
        "Upload in progress": "Upload in progress",
        White: "White",
        "Widget toolbar": "Widget toolbar",
        "Wrap text": "Wrap text",
        "Write a comment...": "Write a comment...",
        Yellow: "Yellow",
        "Yellow marker": "Yellow marker",
        Yes: "Yes"
      });
    }(window.CKEDITOR_TRANSLATIONS || (window.CKEDITOR_TRANSLATIONS = {})), function (t, e) {
      true ? module.exports = e() : undefined;
    }(window, function () {
      return function (t) {
        var e = {};

        function n(i) {
          if (e[i]) return e[i].exports;
          var o = e[i] = {
            i: i,
            l: !1,
            exports: {}
          };
          return t[i].call(o.exports, o, o.exports, n), o.l = !0, o.exports;
        }

        return n.m = t, n.c = e, n.d = function (t, e, i) {
          n.o(t, e) || Object.defineProperty(t, e, {
            enumerable: !0,
            get: i
          });
        }, n.r = function (t) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
            value: "Module"
          }), Object.defineProperty(t, "__esModule", {
            value: !0
          });
        }, n.t = function (t, e) {
          if (1 & e && (t = n(t)), 8 & e) return t;
          if (4 & e && "object" == typeof t && t && t.__esModule) return t;
          var i = Object.create(null);
          if (n.r(i), Object.defineProperty(i, "default", {
            enumerable: !0,
            value: t
          }), 2 & e && "string" != typeof t) for (var o in t) {
            n.d(i, o, function (e) {
              return t[e];
            }.bind(null, o));
          }
          return i;
        }, n.n = function (t) {
          var e = t && t.__esModule ? function () {
            return t["default"];
          } : function () {
            return t;
          };
          return n.d(e, "a", e), e;
        }, n.o = function (t, e) {
          return Object.prototype.hasOwnProperty.call(t, e);
        }, n.p = "", n(n.s = 419);
      }([function (t, e, n) {
        "use strict";

        n.r(e), n.d(e, "DOCUMENTATION_URL", function () {
          return i;
        }), n.d(e, "default", function () {
          return o;
        }), n.d(e, "logWarning", function () {
          return r;
        }), n.d(e, "logError", function () {
          return s;
        });
        var i = "https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html";

        var o = /*#__PURE__*/function (_Error) {
          _inherits(o, _Error);

          var _super = _createSuper(o);

          function o(t, e, n) {
            var _this;

            _classCallCheck(this, o);

            _this = _super.call(this, "".concat(t).concat(n ? " ".concat(JSON.stringify(n)) : "").concat(a(t))), _this.name = "CKEditorError", _this.context = e, _this.data = n;
            return _this;
          }

          _createClass(o, [{
            key: "is",
            value: function is(t) {
              return "CKEditorError" === t;
            }
          }], [{
            key: "rethrowUnexpectedError",
            value: function rethrowUnexpectedError(t, e) {
              if (t.is && t.is("CKEditorError")) throw t;
              var n = new o(t.message, e);
              throw n.stack = t.stack, n;
            }
          }]);

          return o;
        }( /*#__PURE__*/_wrapNativeSuper(Error));

        function r(t, e) {
          var _console;

          (_console = console).warn.apply(_console, _toConsumableArray(c(t, e)));
        }

        function s(t, e) {
          var _console2;

          (_console2 = console).error.apply(_console2, _toConsumableArray(c(t, e)));
        }

        function a(t) {
          return "\nRead more: ".concat(i, "#error-").concat(t);
        }

        function c(t, e) {
          var n = a(t);
          return e ? [t, e, n] : [t, n];
        }
      }, function (t, e, n) {
        "use strict";

        function i(t) {
          for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            e[_key - 1] = arguments[_key];
          }

          e.forEach(function (e) {
            Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function (n) {
              if (n in t.prototype) return;
              var i = Object.getOwnPropertyDescriptor(e, n);
              i.enumerable = !1, Object.defineProperty(t.prototype, n, i);
            });
          });
        }

        n.r(e), n.d(e, "default", function () {
          return i;
        });
      }, function (t, e, n) {
        "use strict";

        var i = function () {
          var t;
          return function () {
            return void 0 === t && (t = Boolean(window && document && document.all && !window.atob)), t;
          };
        }(),
            o = function () {
          var t = {};
          return function (e) {
            if (void 0 === t[e]) {
              var n = document.querySelector(e);
              if (window.HTMLIFrameElement && n instanceof window.HTMLIFrameElement) try {
                n = n.contentDocument.head;
              } catch (t) {
                n = null;
              }
              t[e] = n;
            }

            return t[e];
          };
        }(),
            r = [];

        function s(t) {
          for (var e = -1, n = 0; n < r.length; n++) {
            if (r[n].identifier === t) {
              e = n;
              break;
            }
          }

          return e;
        }

        function a(t, e) {
          for (var n = {}, i = [], o = 0; o < t.length; o++) {
            var a = t[o],
                c = e.base ? a[0] + e.base : a[0],
                l = n[c] || 0,
                d = "".concat(c, " ").concat(l);
            n[c] = l + 1;
            var u = s(d),
                h = {
              css: a[1],
              media: a[2],
              sourceMap: a[3]
            };
            -1 !== u ? (r[u].references++, r[u].updater(h)) : r.push({
              identifier: d,
              updater: f(h, e),
              references: 1
            }), i.push(d);
          }

          return i;
        }

        function c(t) {
          var e = document.createElement("style"),
              i = t.attributes || {};

          if (void 0 === i.nonce) {
            var r = n.nc;
            r && (i.nonce = r);
          }

          if (Object.keys(i).forEach(function (t) {
            e.setAttribute(t, i[t]);
          }), "function" == typeof t.insert) t.insert(e);else {
            var s = o(t.insert || "head");
            if (!s) throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
            s.appendChild(e);
          }
          return e;
        }

        var l = function () {
          var t = [];
          return function (e, n) {
            return t[e] = n, t.filter(Boolean).join("\n");
          };
        }();

        function d(t, e, n, i) {
          var o = n ? "" : i.media ? "@media ".concat(i.media, " {").concat(i.css, "}") : i.css;
          if (t.styleSheet) t.styleSheet.cssText = l(e, o);else {
            var r = document.createTextNode(o),
                s = t.childNodes;
            s[e] && t.removeChild(s[e]), s.length ? t.insertBefore(r, s[e]) : t.appendChild(r);
          }
        }

        var u = null,
            h = 0;

        function f(t, e) {
          var n, i, o;

          if (e.singleton) {
            var r = h++;
            n = u || (u = c(e)), i = d.bind(null, n, r, !1), o = d.bind(null, n, r, !0);
          } else n = c(e), i = function (t, e, n) {
            var i = n.css,
                o = n.media,
                r = n.sourceMap;
            if (o ? t.setAttribute("media", o) : t.removeAttribute("media"), r && "undefined" != typeof btoa && (i += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))), " */")), t.styleSheet) t.styleSheet.cssText = i;else {
              for (; t.firstChild;) {
                t.removeChild(t.firstChild);
              }

              t.appendChild(document.createTextNode(i));
            }
          }.bind(null, n, e), o = function o() {
            !function (t) {
              if (null === t.parentNode) return !1;
              t.parentNode.removeChild(t);
            }(n);
          };

          return i(t), function (e) {
            if (e) {
              if (e.css === t.css && e.media === t.media && e.sourceMap === t.sourceMap) return;
              i(t = e);
            } else o();
          };
        }

        t.exports = function (t, e) {
          (e = e || {}).singleton || "boolean" == typeof e.singleton || (e.singleton = i());
          var n = a(t = t || [], e);
          return function (t) {
            if (t = t || [], "[object Array]" === Object.prototype.toString.call(t)) {
              for (var i = 0; i < n.length; i++) {
                var o = s(n[i]);
                r[o].references--;
              }

              for (var c = a(t, e), l = 0; l < n.length; l++) {
                var d = s(n[l]);
                0 === r[d].references && (r[d].updater(), r.splice(d, 1));
              }

              n = c;
            }
          };
        };
      }, function (t, e, n) {
        "use strict";

        n.r(e), n.d(e, "_getEmitterListenedTo", function () {
          return d;
        }), n.d(e, "_setEmitterId", function () {
          return u;
        }), n.d(e, "_getEmitterId", function () {
          return h;
        });
        var i = n(19),
            o = n(11),
            r = n(27),
            s = (n(34), n(0));
        var a = Symbol("listeningTo"),
            c = Symbol("emitterId"),
            l = {
          on: function on(t, e) {
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
            this.listenTo(this, t, e, n);
          },
          once: function once(t, e, n) {
            var i = !1;
            this.listenTo(this, t, function (t) {
              for (var _len2 = arguments.length, n = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                n[_key2 - 1] = arguments[_key2];
              }

              i || (i = !0, t.off(), e.call.apply(e, [this, t].concat(n)));
            }, n);
          },
          off: function off(t, e) {
            this.stopListening(this, t, e);
          },
          listenTo: function listenTo(t, e, n) {
            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
            var o, r;
            this[a] || (this[a] = {});
            var s = this[a];
            h(t) || u(t);
            var c = h(t);
            (o = s[c]) || (o = s[c] = {
              emitter: t,
              callbacks: {}
            }), (r = o.callbacks[e]) || (r = o.callbacks[e] = []), r.push(n), function (t, e, n, i, o) {
              e._addEventListener ? e._addEventListener(n, i, o) : t._addEventListener.call(e, n, i, o);
            }(this, t, e, n, i);
          },
          stopListening: function stopListening(t, e, n) {
            var i = this[a];
            var o = t && h(t);
            var r = i && o && i[o],
                s = r && e && r.callbacks[e];
            if (!(!i || t && !r || e && !s)) if (n) {
              p(this, t, e, n), -1 !== s.indexOf(n) && (1 === s.length ? delete r.callbacks[e] : p(this, t, e, n));
            } else if (s) {
              for (; n = s.pop();) {
                p(this, t, e, n);
              }

              delete r.callbacks[e];
            } else if (r) {
              for (e in r.callbacks) {
                this.stopListening(t, e);
              }

              delete i[o];
            } else {
              for (o in i) {
                this.stopListening(i[o].emitter);
              }

              delete this[a];
            }
          },
          fire: function fire(t) {
            try {
              var _n2 = t instanceof i.a ? t : new i.a(this, t),
                  _o2 = _n2.name;

              var _r2 = function t(e, n) {
                var i;
                if (!e._events || !(i = e._events[n]) || !i.callbacks.length) return n.indexOf(":") > -1 ? t(e, n.substr(0, n.lastIndexOf(":"))) : null;
                return i.callbacks;
              }(this, _o2);

              for (var _len3 = arguments.length, e = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
                e[_key3 - 1] = arguments[_key3];
              }

              if (_n2.path.push(this), _r2) {
                var _t2 = [_n2].concat(e);

                _r2 = Array.from(_r2);

                for (var _e2 = 0; _e2 < _r2.length && (_r2[_e2].callback.apply(this, _t2), _n2.off.called && (delete _n2.off.called, this._removeEventListener(_o2, _r2[_e2].callback)), !_n2.stop.called); _e2++) {
                  ;
                }
              }

              if (this._delegations) {
                var _t3 = this._delegations.get(_o2),
                    _i2 = this._delegations.get("*");

                _t3 && m(_t3, _n2, e), _i2 && m(_i2, _n2, e);
              }

              return _n2["return"];
            } catch (t) {
              s["default"].rethrowUnexpectedError(t, this);
            }
          },
          delegate: function delegate() {
            var _this2 = this;

            for (var _len4 = arguments.length, t = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
              t[_key4] = arguments[_key4];
            }

            return {
              to: function to(e, n) {
                _this2._delegations || (_this2._delegations = new Map()), t.forEach(function (t) {
                  var i = _this2._delegations.get(t);

                  i ? i.set(e, n) : _this2._delegations.set(t, new Map([[e, n]]));
                });
              }
            };
          },
          stopDelegating: function stopDelegating(t, e) {
            if (this._delegations) if (t) {
              if (e) {
                var _n3 = this._delegations.get(t);

                _n3 && _n3["delete"](e);
              } else this._delegations["delete"](t);
            } else this._delegations.clear();
          },
          _addEventListener: function _addEventListener(t, e, n) {
            !function (t, e) {
              var n = f(t);
              if (n[e]) return;
              var i = e,
                  o = null;
              var r = [];

              for (; "" !== i && !n[i];) {
                n[i] = {
                  callbacks: [],
                  childEvents: []
                }, r.push(n[i]), o && n[i].childEvents.push(o), o = i, i = i.substr(0, i.lastIndexOf(":"));
              }

              if ("" !== i) {
                var _iterator = _createForOfIteratorHelper(r),
                    _step;

                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    var _t4 = _step.value;
                    _t4.callbacks = n[i].callbacks.slice();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                n[i].childEvents.push(o);
              }
            }(this, t);
            var i = g(this, t),
                o = r["default"].get(n.priority),
                s = {
              callback: e,
              priority: o
            };

            var _iterator2 = _createForOfIteratorHelper(i),
                _step2;

            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var _t5 = _step2.value;

                var _e3 = !1;

                for (var _n4 = 0; _n4 < _t5.length; _n4++) {
                  if (_t5[_n4].priority < o) {
                    _t5.splice(_n4, 0, s), _e3 = !0;
                    break;
                  }
                }

                _e3 || _t5.push(s);
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          },
          _removeEventListener: function _removeEventListener(t, e) {
            var n = g(this, t);

            var _iterator3 = _createForOfIteratorHelper(n),
                _step3;

            try {
              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                var _t6 = _step3.value;

                for (var _n5 = 0; _n5 < _t6.length; _n5++) {
                  _t6[_n5].callback == e && (_t6.splice(_n5, 1), _n5--);
                }
              }
            } catch (err) {
              _iterator3.e(err);
            } finally {
              _iterator3.f();
            }
          }
        };

        function d(t, e) {
          return t[a] && t[a][e] ? t[a][e].emitter : null;
        }

        function u(t, e) {
          t[c] || (t[c] = e || Object(o.a)());
        }

        function h(t) {
          return t[c];
        }

        function f(t) {
          return t._events || Object.defineProperty(t, "_events", {
            value: {}
          }), t._events;
        }

        function g(t, e) {
          var n = f(t)[e];
          if (!n) return [];
          var i = [n.callbacks];

          for (var _e4 = 0; _e4 < n.childEvents.length; _e4++) {
            var _o3 = g(t, n.childEvents[_e4]);

            i = i.concat(_o3);
          }

          return i;
        }

        function m(t, e, n) {
          var _iterator4 = _createForOfIteratorHelper(t),
              _step4;

          try {
            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
              var _step4$value = _slicedToArray(_step4.value, 2),
                  _o4 = _step4$value[0],
                  _r3 = _step4$value[1];

              _r3 ? "function" == typeof _r3 && (_r3 = _r3(e.name)) : _r3 = e.name;

              var _t7 = new i.a(e.source, _r3);

              _t7.path = _toConsumableArray(e.path), _o4.fire.apply(_o4, [_t7].concat(_toConsumableArray(n)));
            }
          } catch (err) {
            _iterator4.e(err);
          } finally {
            _iterator4.f();
          }
        }

        function p(t, e, n, i) {
          e._removeEventListener ? e._removeEventListener(n, i) : t._removeEventListener.call(e, n, i);
        }

        e["default"] = l;
      }, function (t, e, n) {
        "use strict";

        n.r(e);
        var i = n(3),
            o = n(0),
            r = n(7),
            s = n(421);
        var a = Symbol("observableProperties"),
            c = Symbol("boundObservables"),
            l = Symbol("boundProperties"),
            d = Symbol("decoratedMethods"),
            u = Symbol("decoratedOriginal"),
            h = {
          set: function set(t, e) {
            var _this3 = this;

            if (Object(r.a)(t)) return void Object.keys(t).forEach(function (e) {
              _this3.set(e, t[e]);
            }, this);
            f(this);
            var n = this[a];
            if (t in this && !n.has(t)) throw new o["default"]("observable-set-cannot-override", this);
            Object.defineProperty(this, t, {
              enumerable: !0,
              configurable: !0,
              get: function get() {
                return n.get(t);
              },
              set: function set(e) {
                var i = n.get(t);
                var o = this.fire("set:" + t, t, e, i);
                void 0 === o && (o = e), i === o && n.has(t) || (n.set(t, o), this.fire("change:" + t, t, o, i));
              }
            }), this[t] = e;
          },
          bind: function bind() {
            var _this4 = this;

            for (var _len5 = arguments.length, t = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
              t[_key5] = arguments[_key5];
            }

            if (!t.length || !p(t)) throw new o["default"]("observable-bind-wrong-properties", this);
            if (new Set(t).size !== t.length) throw new o["default"]("observable-bind-duplicate-properties", this);
            f(this);
            var e = this[l];
            t.forEach(function (t) {
              if (e.has(t)) throw new o["default"]("observable-bind-rebind", _this4);
            });
            var n = new Map();
            return t.forEach(function (t) {
              var i = {
                property: t,
                to: []
              };
              e.set(t, i), n.set(t, i);
            }), {
              to: g,
              toMany: m,
              _observable: this,
              _bindProperties: t,
              _to: [],
              _bindings: n
            };
          },
          unbind: function unbind() {
            var _this5 = this;

            if (!this[a]) return;
            var e = this[l],
                n = this[c];

            for (var _len6 = arguments.length, t = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
              t[_key6] = arguments[_key6];
            }

            if (t.length) {
              if (!p(t)) throw new o["default"]("observable-unbind-wrong-properties", this);
              t.forEach(function (t) {
                var i = e.get(t);
                if (!i) return;
                var o, r, s, a;
                i.to.forEach(function (t) {
                  o = t[0], r = t[1], s = n.get(o), (a = s[r])["delete"](i), a.size || delete s[r], Object.keys(s).length || (n["delete"](o), _this5.stopListening(o, "change"));
                }), e["delete"](t);
              });
            } else n.forEach(function (t, e) {
              _this5.stopListening(e, "change");
            }), n.clear(), e.clear();
          },
          decorate: function decorate(t) {
            var _this6 = this;

            var e = this[t];
            if (!e) throw new o["default"]("observablemixin-cannot-decorate-undefined", this, {
              object: this,
              methodName: t
            });
            this.on(t, function (t, n) {
              t["return"] = e.apply(_this6, n);
            }), this[t] = function () {
              for (var _len7 = arguments.length, e = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
                e[_key7] = arguments[_key7];
              }

              return this.fire(t, e);
            }, this[t][u] = e, this[d] || (this[d] = []), this[d].push(t);
          }
        };

        function f(t) {
          t[a] || (Object.defineProperty(t, a, {
            value: new Map()
          }), Object.defineProperty(t, c, {
            value: new Map()
          }), Object.defineProperty(t, l, {
            value: new Map()
          }));
        }

        function g() {
          var _this7 = this;

          var e = function () {
            for (var _len8 = arguments.length, t = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
              t[_key8] = arguments[_key8];
            }

            if (!t.length) throw new o["default"]("observable-bind-to-parse-error", null);
            var e = {
              to: []
            };
            var n;
            "function" == typeof t[t.length - 1] && (e.callback = t.pop());
            return t.forEach(function (t) {
              if ("string" == typeof t) n.properties.push(t);else {
                if ("object" != typeof t) throw new o["default"]("observable-bind-to-parse-error", null);
                n = {
                  observable: t,
                  properties: []
                }, e.to.push(n);
              }
            }), e;
          }.apply(void 0, arguments),
              n = Array.from(this._bindings.keys()),
              i = n.length;

          if (!e.callback && e.to.length > 1) throw new o["default"]("observable-bind-to-no-callback", this);
          if (i > 1 && e.callback) throw new o["default"]("observable-bind-to-extra-callback", this);
          e.to.forEach(function (t) {
            if (t.properties.length && t.properties.length !== i) throw new o["default"]("observable-bind-to-properties-length", _this7);
            t.properties.length || (t.properties = _this7._bindProperties);
          }), this._to = e.to, e.callback && (this._bindings.get(n[0]).callback = e.callback), function (t, e) {
            e.forEach(function (e) {
              var n = t[c];
              var i;
              n.get(e.observable) || t.listenTo(e.observable, "change", function (o, r) {
                (i = n.get(e.observable)[r]) && i.forEach(function (e) {
                  b(t, e.property);
                });
              });
            });
          }(this._observable, this._to), function (t) {
            var e;

            t._bindings.forEach(function (n, i) {
              t._to.forEach(function (o) {
                e = o.properties[n.callback ? 0 : t._bindProperties.indexOf(i)], n.to.push([o.observable, e]), function (t, e, n, i) {
                  var o = t[c],
                      r = o.get(n),
                      s = r || {};
                  s[i] || (s[i] = new Set());
                  s[i].add(e), r || o.set(n, s);
                }(t._observable, n, o.observable, e);
              });
            });
          }(this), this._bindProperties.forEach(function (t) {
            b(_this7._observable, t);
          });
        }

        function m(t, e, n) {
          if (this._bindings.size > 1) throw new o["default"]("observable-bind-to-many-not-one-binding", this);
          this.to.apply(this, _toConsumableArray(function (t, e) {
            var n = t.map(function (t) {
              return [t, e];
            });
            return Array.prototype.concat.apply([], n);
          }(t, e)).concat([n]));
        }

        function p(t) {
          return t.every(function (t) {
            return "string" == typeof t;
          });
        }

        function b(t, e) {
          var n = t[l].get(e);
          var i;
          i = n.callback ? n.callback.apply(t, n.to.map(function (t) {
            return t[0][t[1]];
          })) : (i = n.to[0])[0][i[1]], Object.prototype.hasOwnProperty.call(t, e) ? t[e] = i : t.set(e, i);
        }

        Object(s.a)(h, i["default"]), h.stopListening = function (t, e, n) {
          if (!t && this[d]) {
            var _iterator5 = _createForOfIteratorHelper(this[d]),
                _step5;

            try {
              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
                var _t8 = _step5.value;
                this[_t8] = this[_t8][u];
              }
            } catch (err) {
              _iterator5.e(err);
            } finally {
              _iterator5.f();
            }

            delete this[d];
          }

          i["default"].stopListening.call(this, t, e, n);
        }, e["default"] = h;
      },, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31));

        var r = /*#__PURE__*/function (_o$default) {
          _inherits(r, _o$default);

          var _super2 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super2.call(this);
          }

          _createClass(r, null, [{
            key: "fromJSON",
            value: function fromJSON(t) {
              throw new TypeError("Must be implemented in a child class!");
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "1000";
      }, function (t, e, n) {
        "use strict";

        e.a = function (t) {
          var e = typeof t;
          return null != t && ("object" == e || "function" == e);
        };
      }, function (t, e, n) {
        "use strict";

        e.a = function (t) {
          return null != t && "object" == typeof t;
        };
      }, function (t, e, n) {
        "use strict";

        function i(t) {
          return !(!t || !t[Symbol.iterator]);
        }

        n.d(e, "a", function () {
          return i;
        });
      }, function (t, e, n) {
        "use strict";

        var i = n(60),
            o = "object" == typeof self && self && self.Object === Object && self,
            r = i.a || o || Function("return this")();
        e.a = r;
      }, function (t, e, n) {
        "use strict";

        n.d(e, "a", function () {
          return o;
        });
        var i = new Array(256).fill().map(function (t, e) {
          return ("0" + e.toString(16)).slice(-2);
        });

        function o() {
          var t = 4294967296 * Math.random() >>> 0,
              e = 4294967296 * Math.random() >>> 0,
              n = 4294967296 * Math.random() >>> 0,
              o = 4294967296 * Math.random() >>> 0;
          return "e" + i[t >> 0 & 255] + i[t >> 8 & 255] + i[t >> 16 & 255] + i[t >> 24 & 255] + i[e >> 0 & 255] + i[e >> 8 & 255] + i[e >> 16 & 255] + i[e >> 24 & 255] + i[n >> 0 & 255] + i[n >> 8 & 255] + i[n >> 16 & 255] + i[n >> 24 & 255] + i[o >> 0 & 255] + i[o >> 8 & 255] + i[o >> 16 & 255] + i[o >> 24 & 255];
        }
      }, function (t, e, n) {
        "use strict";

        var i = Array.isArray;
        e.a = i;
      }, function (t, e, n) {
        "use strict";

        n.r(e), n.d(e, "default", function () {
          return c;
        });
        var i = n(3),
            o = n(0),
            r = n(11),
            s = n(9),
            a = n(1);

        var c = /*#__PURE__*/function (_Symbol$iterator) {
          function c() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            _classCallCheck(this, c);

            var n = Object(s.a)(t);

            if (n || (e = t), this._items = [], this._itemMap = new Map(), this._idProperty = e.idProperty || "id", this._bindToExternalToInternalMap = new WeakMap(), this._bindToInternalToExternalMap = new WeakMap(), this._skippedIndexesFromExternal = [], n) {
              var _iterator6 = _createForOfIteratorHelper(t),
                  _step6;

              try {
                for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
                  var _e5 = _step6.value;
                  this._items.push(_e5), this._itemMap.set(this._getItemIdBeforeAdding(_e5), _e5);
                }
              } catch (err) {
                _iterator6.e(err);
              } finally {
                _iterator6.f();
              }
            }
          }

          _createClass(c, [{
            key: "length",
            get: function get() {
              return this._items.length;
            }
          }, {
            key: "first",
            get: function get() {
              return this._items[0] || null;
            }
          }, {
            key: "last",
            get: function get() {
              return this._items[this.length - 1] || null;
            }
          }, {
            key: "add",
            value: function add(t, e) {
              return this.addMany([t], e);
            }
          }, {
            key: "addMany",
            value: function addMany(t, e) {
              if (void 0 === e) e = this._items.length;else if (e > this._items.length || e < 0) throw new o["default"]("collection-add-item-invalid-index", this);

              for (var _n6 = 0; _n6 < t.length; _n6++) {
                var _i3 = t[_n6],
                    _o5 = this._getItemIdBeforeAdding(_i3),
                    _r4 = e + _n6;

                this._items.splice(_r4, 0, _i3), this._itemMap.set(_o5, _i3), this.fire("add", _i3, _r4);
              }

              return this.fire("change", {
                added: t,
                removed: [],
                index: e
              }), this;
            }
          }, {
            key: "get",
            value: function get(t) {
              var e;
              if ("string" == typeof t) e = this._itemMap.get(t);else {
                if ("number" != typeof t) throw new o["default"]("collection-get-invalid-arg", this);
                e = this._items[t];
              }
              return e || null;
            }
          }, {
            key: "has",
            value: function has(t) {
              if ("string" == typeof t) return this._itemMap.has(t);
              {
                var _e6 = t[this._idProperty];
                return this._itemMap.has(_e6);
              }
            }
          }, {
            key: "getIndex",
            value: function getIndex(t) {
              var e;
              return e = "string" == typeof t ? this._itemMap.get(t) : t, this._items.indexOf(e);
            }
          }, {
            key: "remove",
            value: function remove(t) {
              var _this$_remove = this._remove(t),
                  _this$_remove2 = _slicedToArray(_this$_remove, 2),
                  e = _this$_remove2[0],
                  n = _this$_remove2[1];

              return this.fire("change", {
                added: [],
                removed: [e],
                index: n
              }), e;
            }
          }, {
            key: "map",
            value: function map(t, e) {
              return this._items.map(t, e);
            }
          }, {
            key: "find",
            value: function find(t, e) {
              return this._items.find(t, e);
            }
          }, {
            key: "filter",
            value: function filter(t, e) {
              return this._items.filter(t, e);
            }
          }, {
            key: "clear",
            value: function clear() {
              this._bindToCollection && (this.stopListening(this._bindToCollection), this._bindToCollection = null);
              var t = Array.from(this._items);

              for (; this.length;) {
                this._remove(0);
              }

              this.fire("change", {
                added: [],
                removed: t,
                index: 0
              });
            }
          }, {
            key: "bindTo",
            value: function bindTo(t) {
              var _this8 = this;

              if (this._bindToCollection) throw new o["default"]("collection-bind-to-rebind", this);
              return this._bindToCollection = t, {
                as: function as(t) {
                  _this8._setUpBindToBinding(function (e) {
                    return new t(e);
                  });
                },
                using: function using(t) {
                  "function" == typeof t ? _this8._setUpBindToBinding(function (e) {
                    return t(e);
                  }) : _this8._setUpBindToBinding(function (e) {
                    return e[t];
                  });
                }
              };
            }
          }, {
            key: "_setUpBindToBinding",
            value: function _setUpBindToBinding(t) {
              var _this9 = this;

              var e = this._bindToCollection,
                  n = function n(_n8, i, o) {
                var r = e._bindToCollection == _this9,
                    s = e._bindToInternalToExternalMap.get(i);

                if (r && s) _this9._bindToExternalToInternalMap.set(i, s), _this9._bindToInternalToExternalMap.set(s, i);else {
                  var _n7 = t(i);

                  if (!_n7) return void _this9._skippedIndexesFromExternal.push(o);
                  var _r5 = o;

                  var _iterator7 = _createForOfIteratorHelper(_this9._skippedIndexesFromExternal),
                      _step7;

                  try {
                    for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
                      var _t10 = _step7.value;
                      o > _t10 && _r5--;
                    }
                  } catch (err) {
                    _iterator7.e(err);
                  } finally {
                    _iterator7.f();
                  }

                  var _iterator8 = _createForOfIteratorHelper(e._skippedIndexesFromExternal),
                      _step8;

                  try {
                    for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
                      var _t11 = _step8.value;
                      _r5 >= _t11 && _r5++;
                    }
                  } catch (err) {
                    _iterator8.e(err);
                  } finally {
                    _iterator8.f();
                  }

                  _this9._bindToExternalToInternalMap.set(i, _n7), _this9._bindToInternalToExternalMap.set(_n7, i), _this9.add(_n7, _r5);

                  for (var _t9 = 0; _t9 < e._skippedIndexesFromExternal.length; _t9++) {
                    _r5 <= e._skippedIndexesFromExternal[_t9] && e._skippedIndexesFromExternal[_t9]++;
                  }
                }
              };

              var _iterator9 = _createForOfIteratorHelper(e),
                  _step9;

              try {
                for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
                  var _t12 = _step9.value;
                  n(0, _t12, e.getIndex(_t12));
                }
              } catch (err) {
                _iterator9.e(err);
              } finally {
                _iterator9.f();
              }

              this.listenTo(e, "add", n), this.listenTo(e, "remove", function (t, e, n) {
                var i = _this9._bindToExternalToInternalMap.get(e);

                i && _this9.remove(i), _this9._skippedIndexesFromExternal = _this9._skippedIndexesFromExternal.reduce(function (t, e) {
                  return n < e && t.push(e - 1), n > e && t.push(e), t;
                }, []);
              });
            }
          }, {
            key: "_getItemIdBeforeAdding",
            value: function _getItemIdBeforeAdding(t) {
              var e = this._idProperty;
              var n;

              if (e in t) {
                if ("string" != typeof (n = t[e])) throw new o["default"]("collection-add-invalid-id", this);
                if (this.get(n)) throw new o["default"]("collection-add-item-already-exists", this);
              } else t[e] = n = Object(r.a)();

              return n;
            }
          }, {
            key: "_remove",
            value: function _remove(t) {
              var e,
                  n,
                  i,
                  r = !1;
              var s = this._idProperty;
              if ("string" == typeof t ? (n = t, r = !(i = this._itemMap.get(n)), i && (e = this._items.indexOf(i))) : "number" == typeof t ? (e = t, r = !(i = this._items[e]), i && (n = i[s])) : (n = (i = t)[s], r = -1 == (e = this._items.indexOf(i)) || !this._itemMap.get(n)), r) throw new o["default"]("collection-remove-404", this);
              this._items.splice(e, 1), this._itemMap["delete"](n);

              var a = this._bindToInternalToExternalMap.get(i);

              return this._bindToInternalToExternalMap["delete"](i), this._bindToExternalToInternalMap["delete"](a), this.fire("remove", i, e), [i, e];
            }
          }, {
            key: _Symbol$iterator,
            value: function value() {
              return this._items[Symbol.iterator]();
            }
          }]);

          return c;
        }(Symbol.iterator);

        Object(a["default"])(c, i["default"]);
      }, function (t, e, n) {
        "use strict";

        var i,
            o,
            r = t.exports = n(25),
            s = n(103);
        r.codegen = n(320), r.fetch = n(321), r.path = n(322), r.fs = r.inquire("fs"), r.toArray = function (t) {
          if (t) {
            for (var e = Object.keys(t), n = new Array(e.length), i = 0; i < e.length;) {
              n[i] = t[e[i++]];
            }

            return n;
          }

          return [];
        }, r.toObject = function (t) {
          for (var e = {}, n = 0; n < t.length;) {
            var i = t[n++],
                o = t[n++];
            void 0 !== o && (e[i] = o);
          }

          return e;
        };
        var a = /\\/g,
            c = /"/g;
        r.isReserved = function (t) {
          return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t);
        }, r.safeProp = function (t) {
          return !/^[$\w_]+$/.test(t) || r.isReserved(t) ? '["' + t.replace(a, "\\\\").replace(c, '\\"') + '"]' : "." + t;
        }, r.ucFirst = function (t) {
          return t.charAt(0).toUpperCase() + t.substring(1);
        };
        var l = /_([a-z])/g;
        r.camelCase = function (t) {
          return t.substring(0, 1) + t.substring(1).replace(l, function (t, e) {
            return e.toUpperCase();
          });
        }, r.compareFieldsById = function (t, e) {
          return t.id - e.id;
        }, r.decorateType = function (t, e) {
          if (t.$type) return e && t.$type.name !== e && (r.decorateRoot.remove(t.$type), t.$type.name = e, r.decorateRoot.add(t.$type)), t.$type;
          i || (i = n(105));
          var o = new i(e || t.name);
          return r.decorateRoot.add(o), o.ctor = t, Object.defineProperty(t, "$type", {
            value: o,
            enumerable: !1
          }), Object.defineProperty(t.prototype, "$type", {
            value: o,
            enumerable: !1
          }), o;
        };
        var d = 0;
        r.decorateEnum = function (t) {
          if (t.$type) return t.$type;
          o || (o = n(26));
          var e = new o("Enum" + d++, t);
          return r.decorateRoot.add(e), Object.defineProperty(t, "$type", {
            value: e,
            enumerable: !1
          }), e;
        }, r.setProperty = function (t, e, n) {
          if ("object" != typeof t) throw TypeError("dst must be an object");
          if (!e) throw TypeError("path must be specified");
          return function t(e, n, i) {
            var o = n.shift();
            if (n.length > 0) e[o] = t(e[o] || {}, n, i);else {
              var r = e[o];
              r && (i = [].concat(r).concat(i)), e[o] = i;
            }
            return e;
          }(t, e = e.split("."), n);
        }, Object.defineProperty(r, "decorateRoot", {
          get: function get() {
            return s.decorated || (s.decorated = new (n(113))());
          }
        });
      }, function (t, e, n) {
        "use strict";

        var i = n(16),
            o = Object.prototype,
            r = o.hasOwnProperty,
            s = o.toString,
            a = i.a ? i.a.toStringTag : void 0;

        var c = function c(t) {
          var e = r.call(t, a),
              n = t[a];

          try {
            t[a] = void 0;
            var i = !0;
          } catch (t) {}

          var o = s.call(t);
          return i && (e ? t[a] = n : delete t[a]), o;
        },
            l = Object.prototype.toString;

        var d = function d(t) {
          return l.call(t);
        },
            u = "[object Null]",
            h = "[object Undefined]",
            f = i.a ? i.a.toStringTag : void 0;

        e.a = function (t) {
          return null == t ? void 0 === t ? h : u : f && f in Object(t) ? c(t) : d(t);
        };
      }, function (t, e, n) {
        "use strict";

        var i = n(10).a.Symbol;
        e.a = i;
      }, function (t, e, n) {
        "use strict";

        var i = n(41),
            o = n(10).a["__core-js_shared__"],
            r = function () {
          var t = /[^.]+$/.exec(o && o.keys && o.keys.IE_PROTO || "");
          return t ? "Symbol(src)_1." + t : "";
        }();

        var s = function s(t) {
          return !!r && r in t;
        },
            a = n(7),
            c = n(30),
            l = /^\[object .+?Constructor\]$/,
            d = Function.prototype,
            u = Object.prototype,
            h = d.toString,
            f = u.hasOwnProperty,
            g = RegExp("^" + h.call(f).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");

        var m = function m(t) {
          return !(!Object(a.a)(t) || s(t)) && (Object(i.a)(t) ? g : l).test(Object(c.a)(t));
        };

        var p = function p(t, e) {
          return null == t ? void 0 : t[e];
        };

        e.a = function (t, e) {
          var n = p(t, e);
          return m(n) ? n : void 0;
        };
      }, function (t, e, n) {
        "use strict";

        (function (t, n) {
          Object.defineProperty(e, "__esModule", {
            value: !0
          });
          var i = !(void 0 === t || !t.versions || !t.versions.node);
          var o;
          !function (t) {
            t[t.BUFFER = 1] = "BUFFER", t[t.STRING = 2] = "STRING", t[t.NUMBER = 3] = "NUMBER", t[t.OBJECT = 4] = "OBJECT";
          }(o = e.MessageDataTypes || (e.MessageDataTypes = {}));

          var r = /*#__PURE__*/function () {
            function r() {
              _classCallCheck(this, r);
            }

            _createClass(r, null, [{
              key: "getPacketType",
              value: function getPacketType() {
                var e = 0;

                for (var _n9 = 0; _n9 < arguments.length; _n9++) {
                  e += (_n9 < 0 || arguments.length <= _n9 ? undefined : arguments[_n9]) * Math.pow(10, arguments.length - _n9 - 1);
                }

                return e;
              }
            }, {
              key: "getType",
              value: function getType(t) {
                if (r.isBuffer(t)) return o.BUFFER;
                var e = typeof t;
                return "string" === e ? o.STRING : "number" === e ? o.NUMBER : o.OBJECT;
              }
            }, {
              key: "isBuffer",
              value: function isBuffer(t) {
                return i && n.isBuffer(t) || t instanceof ArrayBuffer || t instanceof Uint8Array || this._isBufferView(t);
              }
            }, {
              key: "_isBufferView",
              value: function _isBufferView(t) {
                return "function" == typeof ArrayBuffer.isView ? ArrayBuffer.isView(t) : t.buffer instanceof ArrayBuffer;
              }
            }]);

            return r;
          }();

          e["default"] = r;
        }).call(this, n(71), n(51).Buffer);
      }, function (t, e, n) {
        "use strict";

        n.d(e, "a", function () {
          return o;
        });

        var i = function i() {
          return function t() {
            t.called = !0;
          };
        };

        var o = function o(t, e) {
          _classCallCheck(this, o);

          this.source = t, this.name = e, this.path = [], this.stop = i(), this.off = i();
        };
      }, function (t, e, n) {
        "use strict";

        var i = n(44),
            o = n(43);

        e.a = function (t, e, n, r) {
          var s = !n;
          n || (n = {});

          for (var a = -1, c = e.length; ++a < c;) {
            var l = e[a],
                d = r ? r(n[l], t[l], l, n, t) : void 0;
            void 0 === d && (d = t[l]), s ? Object(o.a)(n, l, d) : Object(i.a)(n, l, d);
          }

          return n;
        };
      }, function (t, e, n) {
        "use strict";

        var i = n(68),
            o = n(7),
            r = n(46);

        var s = function s(t) {
          var e = [];
          if (null != t) for (var n in Object(t)) {
            e.push(n);
          }
          return e;
        },
            a = Object.prototype.hasOwnProperty;

        var c = function c(t) {
          if (!Object(o.a)(t)) return s(t);
          var e = Object(r.a)(t),
              n = [];

          for (var i in t) {
            ("constructor" != i || !e && a.call(t, i)) && n.push(i);
          }

          return n;
        },
            l = n(33);

        e.a = function (t) {
          return Object(l.a)(t) ? Object(i.a)(t, !0) : c(t);
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default2) {
          _inherits(r, _o$default2);

          var _super3 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super3.apply(this, arguments);
          }

          _createClass(r, null, [{
            key: "create",
            value: function create(t, e) {
              throw new TypeError("Must be implemented in a child class!");
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, t.exports = r;
      }, function (t, e, n) {
        "use strict";

        e.a = function (t, e) {
          return t === e || t != t && e != e;
        };
      }, function (t, e, n) {
        (function (i) {
          function o() {
            var t;

            try {
              t = e.storage.debug;
            } catch (t) {}

            return !t && void 0 !== i && "env" in i && (t = i.env.DEBUG), t;
          }

          (e = t.exports = n(283)).log = function () {
            return "object" == typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments);
          }, e.formatArgs = function (t) {
            var n = this.useColors;
            if (t[0] = (n ? "%c" : "") + this.namespace + (n ? " %c" : " ") + t[0] + (n ? "%c " : " ") + "+" + e.humanize(this.diff), !n) return;
            var i = "color: " + this.color;
            t.splice(1, 0, i, "color: inherit");
            var o = 0,
                r = 0;
            t[0].replace(/%[a-zA-Z%]/g, function (t) {
              "%%" !== t && "%c" === t && (r = ++o);
            }), t.splice(r, 0, i);
          }, e.save = function (t) {
            try {
              null == t ? e.storage.removeItem("debug") : e.storage.debug = t;
            } catch (t) {}
          }, e.load = o, e.useColors = function () {
            if ("undefined" != typeof window && window.process && "renderer" === window.process.type) return !0;
            if ("undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) return !1;
            return "undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
          }, e.storage = "undefined" != typeof chrome && void 0 !== chrome.storage ? chrome.storage.local : function () {
            try {
              return window.localStorage;
            } catch (t) {}
          }(), e.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"], e.formatters.j = function (t) {
            try {
              return JSON.stringify(t);
            } catch (t) {
              return "[UnexpectedJSONParseError]: " + t.message;
            }
          }, e.enable(o());
        }).call(this, n(71));
      }, function (t, e, n) {
        "use strict";

        (function (t) {
          var i = e;

          function o(t, e, n) {
            for (var i = Object.keys(e), o = 0; o < i.length; ++o) {
              void 0 !== t[i[o]] && n || (t[i[o]] = e[i[o]]);
            }

            return t;
          }

          function r(t) {
            function e(t, n) {
              if (!(this instanceof e)) return new e(t, n);
              Object.defineProperty(this, "message", {
                get: function get() {
                  return t;
                }
              }), Error.captureStackTrace ? Error.captureStackTrace(this, e) : Object.defineProperty(this, "stack", {
                value: new Error().stack || ""
              }), n && o(this, n);
            }

            return (e.prototype = Object.create(Error.prototype)).constructor = e, Object.defineProperty(e.prototype, "name", {
              get: function get() {
                return t;
              }
            }), e.prototype.toString = function () {
              return this.name + ": " + this.message;
            }, e;
          }

          i.asPromise = n(100), i.base64 = n(311), i.EventEmitter = n(312), i["float"] = n(313), i.inquire = n(101), i.utf8 = n(314), i.pool = n(315), i.LongBits = n(316), i.isNode = Boolean(void 0 !== t && t && t.process && t.process.versions && t.process.versions.node), i.global = i.isNode && t || "undefined" != typeof window && window || "undefined" != typeof self && self || this, i.emptyArray = Object.freeze ? Object.freeze([]) : [], i.emptyObject = Object.freeze ? Object.freeze({}) : {}, i.isInteger = Number.isInteger || function (t) {
            return "number" == typeof t && isFinite(t) && Math.floor(t) === t;
          }, i.isString = function (t) {
            return "string" == typeof t || t instanceof String;
          }, i.isObject = function (t) {
            return t && "object" == typeof t;
          }, i.isset = i.isSet = function (t, e) {
            var n = t[e];
            return !(null == n || !t.hasOwnProperty(e)) && ("object" != typeof n || (Array.isArray(n) ? n.length : Object.keys(n).length) > 0);
          }, i.Buffer = function () {
            try {
              var t = i.inquire("buffer").Buffer;
              return t.prototype.utf8Write ? t : null;
            } catch (t) {
              return null;
            }
          }(), i._Buffer_from = null, i._Buffer_allocUnsafe = null, i.newBuffer = function (t) {
            return "number" == typeof t ? i.Buffer ? i._Buffer_allocUnsafe(t) : new i.Array(t) : i.Buffer ? i._Buffer_from(t) : "undefined" == typeof Uint8Array ? t : new Uint8Array(t);
          }, i.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, i.Long = i.global.dcodeIO && i.global.dcodeIO.Long || i.global.Long || i.inquire("long"), i.key2Re = /^true|false|0|1$/, i.key32Re = /^-?(?:0|[1-9][0-9]*)$/, i.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, i.longToHash = function (t) {
            return t ? i.LongBits.from(t).toHash() : i.LongBits.zeroHash;
          }, i.longFromHash = function (t, e) {
            var n = i.LongBits.fromHash(t);
            return i.Long ? i.Long.fromBits(n.lo, n.hi, e) : n.toNumber(Boolean(e));
          }, i.merge = o, i.lcFirst = function (t) {
            return t.charAt(0).toLowerCase() + t.substring(1);
          }, i.newError = r, i.ProtocolError = r("ProtocolError"), i.oneOfGetter = function (t) {
            for (var e = {}, n = 0; n < t.length; ++n) {
              e[t[n]] = 1;
            }

            return function () {
              for (var t = Object.keys(this), n = t.length - 1; n > -1; --n) {
                if (1 === e[t[n]] && void 0 !== this[t[n]] && null !== this[t[n]]) return t[n];
              }
            };
          }, i.oneOfSetter = function (t) {
            return function (e) {
              for (var n = 0; n < t.length; ++n) {
                t[n] !== e && delete this[t[n]];
              }
            };
          }, i.toJSONOptions = {
            longs: String,
            enums: String,
            bytes: String,
            json: !0
          }, i._configure = function () {
            var t = i.Buffer;
            t ? (i._Buffer_from = t.from !== Uint8Array.from && t.from || function (e, n) {
              return new t(e, n);
            }, i._Buffer_allocUnsafe = t.allocUnsafe || function (e) {
              return new t(e);
            }) : i._Buffer_from = i._Buffer_allocUnsafe = null;
          };
        }).call(this, n(49));
      }, function (t, e, n) {
        "use strict";

        t.exports = s;
        var i = n(37);
        ((s.prototype = Object.create(i.prototype)).constructor = s).className = "Enum";
        var o = n(52),
            r = n(14);

        function s(t, e, n, o, r) {
          if (i.call(this, t, n), e && "object" != typeof e) throw TypeError("values must be an object");
          if (this.valuesById = {}, this.values = Object.create(this.valuesById), this.comment = o, this.comments = r || {}, this.reserved = void 0, e) for (var s = Object.keys(e), a = 0; a < s.length; ++a) {
            "number" == typeof e[s[a]] && (this.valuesById[this.values[s[a]] = e[s[a]]] = s[a]);
          }
        }

        s.fromJSON = function (t, e) {
          var n = new s(t, e.values, e.options, e.comment, e.comments);
          return n.reserved = e.reserved, n;
        }, s.prototype.toJSON = function (t) {
          var e = !!t && Boolean(t.keepComments);
          return r.toObject(["options", this.options, "values", this.values, "reserved", this.reserved && this.reserved.length ? this.reserved : void 0, "comment", e ? this.comment : void 0, "comments", e ? this.comments : void 0]);
        }, s.prototype.add = function (t, e, n) {
          if (!r.isString(t)) throw TypeError("name must be a string");
          if (!r.isInteger(e)) throw TypeError("id must be an integer");
          if (void 0 !== this.values[t]) throw Error("duplicate name '" + t + "' in " + this);
          if (this.isReservedId(e)) throw Error("id " + e + " is reserved in " + this);
          if (this.isReservedName(t)) throw Error("name '" + t + "' is reserved in " + this);

          if (void 0 !== this.valuesById[e]) {
            if (!this.options || !this.options.allow_alias) throw Error("duplicate id " + e + " in " + this);
            this.values[t] = e;
          } else this.valuesById[this.values[t] = e] = t;

          return this.comments[t] = n || null, this;
        }, s.prototype.remove = function (t) {
          if (!r.isString(t)) throw TypeError("name must be a string");
          var e = this.values[t];
          if (null == e) throw Error("name '" + t + "' does not exist in " + this);
          return delete this.valuesById[e], delete this.values[t], delete this.comments[t], this;
        }, s.prototype.isReservedId = function (t) {
          return o.isReservedId(this.reserved, t);
        }, s.prototype.isReservedName = function (t) {
          return o.isReservedName(this.reserved, t);
        };
      }, function (t, e, n) {
        "use strict";

        n.r(e);
        var i = {
          get: function get(t) {
            return "number" != typeof t ? this[t] || this.normal : t;
          },
          highest: 1e5,
          high: 1e3,
          normal: 0,
          low: -1e3,
          lowest: -1e5
        };
        e["default"] = i;
      }, function (t, e, n) {
        "use strict";

        (function (t) {
          var i = n(10),
              o = n(117),
              r = true && exports && !exports.nodeType && exports,
              s = r && "object" == typeof t && t && !t.nodeType && t,
              a = s && s.exports === r ? i.a.Buffer : void 0,
              c = (a ? a.isBuffer : void 0) || o.a;
          e.a = c;
        }).call(this, n(69)(t));
      }, function (t, e, n) {
        "use strict";

        (function (t) {
          var i = n(60),
              o = true && exports && !exports.nodeType && exports,
              r = o && "object" == typeof t && t && !t.nodeType && t,
              s = r && r.exports === o && i.a.process,
              a = function () {
            try {
              var t = r && r.require && r.require("util").types;

              return t || s && s.binding && s.binding("util");
            } catch (t) {}
          }();

          e.a = a;
        }).call(this, n(69)(t));
      }, function (t, e, n) {
        "use strict";

        var i = Function.prototype.toString;

        e.a = function (t) {
          if (null != t) {
            try {
              return i.call(t);
            } catch (t) {}

            try {
              return t + "";
            } catch (t) {}
          }

          return "";
        };
      }, function (t, e, n) {
        "use strict";

        Object.defineProperty(e, "__esModule", {
          value: !0
        }), e["default"] = /*#__PURE__*/function () {
          function _class() {
            _classCallCheck(this, _class);
          }

          return _class;
        }();
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        },
            o = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(85)),
            s = o(n(323)),
            a = o(n(324)),
            c = o(n(325)),
            l = o(n(326)),
            d = o(n(79)),
            u = o(n(80)),
            h = o(n(81)),
            f = [c["default"], s["default"], a["default"], l["default"], d["default"], u["default"], h["default"]],
            g = r.Root.fromJSON({
          nested: f.reduce(function (t, e) {
            return t[e.DESCRIPTOR_NAME] = e.DESCRIPTOR, t;
          }, {})
        });

        function m(t) {
          return function (t) {
            g.lookup(t.DESCRIPTOR_NAME) || g.addJSON(_defineProperty({}, t.DESCRIPTOR_NAME, t.DESCRIPTOR));
          }(t), g.lookupType(t.DESCRIPTOR_NAME);
        }

        e["default"] = /*#__PURE__*/function () {
          function _class2() {
            _classCallCheck(this, _class2);
          }

          _createClass(_class2, null, [{
            key: "decode",
            value: function decode(t, e) {
              var n = m(e).decode("undefined" == typeof window ? t : new Uint8Array(t));
              return e.fromJSON(Object.assign({}, n));
            }
          }, {
            key: "encode",
            value: function encode(t) {
              var e = m(t.constructor),
                  n = t.toJSON(),
                  i = e.verify(n);
              if (i) throw Error(i);
              return e.encode(e.create(n)).finish();
            }
          }]);

          return _class2;
        }();
      }, function (t, e, n) {
        "use strict";

        var i = n(41),
            o = n(62);

        e.a = function (t) {
          return null != t && Object(o.a)(t.length) && !Object(i.a)(t);
        };
      }, function (t, e, n) {
        "use strict";

        (function (t) {
          var i = n(0);
          e.a = "30.0.0";
          var o = "object" == typeof window ? window : t;
          if (o.CKEDITOR_VERSION) throw new i["default"]("ckeditor-duplicated-modules", null);
          o.CKEDITOR_VERSION = "30.0.0";
        }).call(this, n(49));
      }, function (t, e, n) {
        function i(t) {
          if (t) return function (t) {
            for (var e in i.prototype) {
              t[e] = i.prototype[e];
            }

            return t;
          }(t);
        }

        t.exports = i, i.prototype.on = i.prototype.addEventListener = function (t, e) {
          return this._callbacks = this._callbacks || {}, (this._callbacks["$" + t] = this._callbacks["$" + t] || []).push(e), this;
        }, i.prototype.once = function (t, e) {
          function n() {
            this.off(t, n), e.apply(this, arguments);
          }

          return n.fn = e, this.on(t, n), this;
        }, i.prototype.off = i.prototype.removeListener = i.prototype.removeAllListeners = i.prototype.removeEventListener = function (t, e) {
          if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this;
          var n,
              i = this._callbacks["$" + t];
          if (!i) return this;
          if (1 == arguments.length) return delete this._callbacks["$" + t], this;

          for (var o = 0; o < i.length; o++) {
            if ((n = i[o]) === e || n.fn === e) {
              i.splice(o, 1);
              break;
            }
          }

          return 0 === i.length && delete this._callbacks["$" + t], this;
        }, i.prototype.emit = function (t) {
          this._callbacks = this._callbacks || {};

          for (var e = new Array(arguments.length - 1), n = this._callbacks["$" + t], i = 1; i < arguments.length; i++) {
            e[i - 1] = arguments[i];
          }

          if (n) {
            i = 0;

            for (var o = (n = n.slice(0)).length; i < o; ++i) {
              n[i].apply(this, e);
            }
          }

          return this;
        }, i.prototype.listeners = function (t) {
          return this._callbacks = this._callbacks || {}, this._callbacks["$" + t] || [];
        }, i.prototype.hasListeners = function (t) {
          return !!this.listeners(t).length;
        };
      }, function (t, e, n) {
        var i,
            o = n(293),
            r = n(94),
            s = n(294),
            a = n(295),
            c = n(296);
        "undefined" != typeof ArrayBuffer && (i = n(297));
        var l = "undefined" != typeof navigator && /Android/i.test(navigator.userAgent),
            d = "undefined" != typeof navigator && /PhantomJS/i.test(navigator.userAgent),
            u = l || d;
        e.protocol = 3;
        var h = e.packets = {
          open: 0,
          close: 1,
          ping: 2,
          pong: 3,
          message: 4,
          upgrade: 5,
          noop: 6
        },
            f = o(h),
            g = {
          type: "error",
          data: "parser error"
        },
            m = n(298);

        function p(t, e, n) {
          for (var i = new Array(t.length), o = a(t.length, n), r = function r(t, n, o) {
            e(n, function (e, n) {
              i[t] = n, o(e, i);
            });
          }, s = 0; s < t.length; s++) {
            r(s, t[s], o);
          }
        }

        e.encodePacket = function (t, n, i, o) {
          "function" == typeof n && (o = n, n = !1), "function" == typeof i && (o = i, i = null);
          var r = void 0 === t.data ? void 0 : t.data.buffer || t.data;
          if ("undefined" != typeof ArrayBuffer && r instanceof ArrayBuffer) return function (t, n, i) {
            if (!n) return e.encodeBase64Packet(t, i);
            var o = t.data,
                r = new Uint8Array(o),
                s = new Uint8Array(1 + o.byteLength);
            s[0] = h[t.type];

            for (var a = 0; a < r.length; a++) {
              s[a + 1] = r[a];
            }

            return i(s.buffer);
          }(t, n, o);
          if (void 0 !== m && r instanceof m) return function (t, n, i) {
            if (!n) return e.encodeBase64Packet(t, i);
            if (u) return function (t, n, i) {
              if (!n) return e.encodeBase64Packet(t, i);
              var o = new FileReader();
              return o.onload = function () {
                e.encodePacket({
                  type: t.type,
                  data: o.result
                }, n, !0, i);
              }, o.readAsArrayBuffer(t.data);
            }(t, n, i);
            var o = new Uint8Array(1);
            o[0] = h[t.type];
            var r = new m([o.buffer, t.data]);
            return i(r);
          }(t, n, o);
          if (r && r.base64) return function (t, n) {
            var i = "b" + e.packets[t.type] + t.data.data;
            return n(i);
          }(t, o);
          var s = h[t.type];
          return void 0 !== t.data && (s += i ? c.encode(String(t.data), {
            strict: !1
          }) : String(t.data)), o("" + s);
        }, e.encodeBase64Packet = function (t, n) {
          var i,
              o = "b" + e.packets[t.type];

          if (void 0 !== m && t.data instanceof m) {
            var r = new FileReader();
            return r.onload = function () {
              var t = r.result.split(",")[1];
              n(o + t);
            }, r.readAsDataURL(t.data);
          }

          try {
            i = String.fromCharCode.apply(null, new Uint8Array(t.data));
          } catch (e) {
            for (var s = new Uint8Array(t.data), a = new Array(s.length), c = 0; c < s.length; c++) {
              a[c] = s[c];
            }

            i = String.fromCharCode.apply(null, a);
          }

          return o += btoa(i), n(o);
        }, e.decodePacket = function (t, n, i) {
          if (void 0 === t) return g;

          if ("string" == typeof t) {
            if ("b" === t.charAt(0)) return e.decodeBase64Packet(t.substr(1), n);
            if (i && !1 === (t = function (t) {
              try {
                t = c.decode(t, {
                  strict: !1
                });
              } catch (t) {
                return !1;
              }

              return t;
            }(t))) return g;
            var o = t.charAt(0);
            return Number(o) == o && f[o] ? t.length > 1 ? {
              type: f[o],
              data: t.substring(1)
            } : {
              type: f[o]
            } : g;
          }

          o = new Uint8Array(t)[0];
          var r = s(t, 1);
          return m && "blob" === n && (r = new m([r])), {
            type: f[o],
            data: r
          };
        }, e.decodeBase64Packet = function (t, e) {
          var n = f[t.charAt(0)];
          if (!i) return {
            type: n,
            data: {
              base64: !0,
              data: t.substr(1)
            }
          };
          var o = i.decode(t.substr(1));
          return "blob" === e && m && (o = new m([o])), {
            type: n,
            data: o
          };
        }, e.encodePayload = function (t, n, i) {
          "function" == typeof n && (i = n, n = null);
          var o = r(t);
          if (n && o) return m && !u ? e.encodePayloadAsBlob(t, i) : e.encodePayloadAsArrayBuffer(t, i);
          if (!t.length) return i("0:");
          p(t, function (t, i) {
            e.encodePacket(t, !!o && n, !1, function (t) {
              i(null, function (t) {
                return t.length + ":" + t;
              }(t));
            });
          }, function (t, e) {
            return i(e.join(""));
          });
        }, e.decodePayload = function (t, n, i) {
          if ("string" != typeof t) return e.decodePayloadAsBinary(t, n, i);
          var o;
          if ("function" == typeof n && (i = n, n = null), "" === t) return i(g, 0, 1);

          for (var r, s, a = "", c = 0, l = t.length; c < l; c++) {
            var d = t.charAt(c);

            if (":" === d) {
              if ("" === a || a != (r = Number(a))) return i(g, 0, 1);
              if (a != (s = t.substr(c + 1, r)).length) return i(g, 0, 1);

              if (s.length) {
                if (o = e.decodePacket(s, n, !1), g.type === o.type && g.data === o.data) return i(g, 0, 1);
                if (!1 === i(o, c + r, l)) return;
              }

              c += r, a = "";
            } else a += d;
          }

          return "" !== a ? i(g, 0, 1) : void 0;
        }, e.encodePayloadAsArrayBuffer = function (t, n) {
          if (!t.length) return n(new ArrayBuffer(0));
          p(t, function (t, n) {
            e.encodePacket(t, !0, !0, function (t) {
              return n(null, t);
            });
          }, function (t, e) {
            var i = e.reduce(function (t, e) {
              var n;
              return t + (n = "string" == typeof e ? e.length : e.byteLength).toString().length + n + 2;
            }, 0),
                o = new Uint8Array(i),
                r = 0;
            return e.forEach(function (t) {
              var e = "string" == typeof t,
                  n = t;

              if (e) {
                for (var i = new Uint8Array(t.length), s = 0; s < t.length; s++) {
                  i[s] = t.charCodeAt(s);
                }

                n = i.buffer;
              }

              o[r++] = e ? 0 : 1;
              var a = n.byteLength.toString();

              for (s = 0; s < a.length; s++) {
                o[r++] = parseInt(a[s]);
              }

              o[r++] = 255;

              for (i = new Uint8Array(n), s = 0; s < i.length; s++) {
                o[r++] = i[s];
              }
            }), n(o.buffer);
          });
        }, e.encodePayloadAsBlob = function (t, n) {
          p(t, function (t, n) {
            e.encodePacket(t, !0, !0, function (t) {
              var e = new Uint8Array(1);

              if (e[0] = 1, "string" == typeof t) {
                for (var i = new Uint8Array(t.length), o = 0; o < t.length; o++) {
                  i[o] = t.charCodeAt(o);
                }

                t = i.buffer, e[0] = 0;
              }

              var r = (t instanceof ArrayBuffer ? t.byteLength : t.size).toString(),
                  s = new Uint8Array(r.length + 1);

              for (o = 0; o < r.length; o++) {
                s[o] = parseInt(r[o]);
              }

              if (s[r.length] = 255, m) {
                var a = new m([e.buffer, s.buffer, t]);
                n(null, a);
              }
            });
          }, function (t, e) {
            return n(new m(e));
          });
        }, e.decodePayloadAsBinary = function (t, n, i) {
          "function" == typeof n && (i = n, n = null);

          for (var o = t, r = []; o.byteLength > 0;) {
            for (var a = new Uint8Array(o), c = 0 === a[0], l = "", d = 1; 255 !== a[d]; d++) {
              if (l.length > 310) return i(g, 0, 1);
              l += a[d];
            }

            o = s(o, 2 + l.length), l = parseInt(l);
            var u = s(o, 0, l);
            if (c) try {
              u = String.fromCharCode.apply(null, new Uint8Array(u));
            } catch (t) {
              var h = new Uint8Array(u);
              u = "";

              for (d = 0; d < h.length; d++) {
                u += String.fromCharCode(h[d]);
              }
            }
            r.push(u), o = s(o, l);
          }

          var f = r.length;
          r.forEach(function (t, o) {
            i(e.decodePacket(t, n, !0), o, f);
          });
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = r, r.className = "ReflectionObject";
        var i,
            o = n(14);

        function r(t, e) {
          if (!o.isString(t)) throw TypeError("name must be a string");
          if (e && !o.isObject(e)) throw TypeError("options must be an object");
          this.options = e, this.parsedOptions = null, this.name = t, this.parent = null, this.resolved = !1, this.comment = null, this.filename = null;
        }

        Object.defineProperties(r.prototype, {
          root: {
            get: function get() {
              for (var t = this; null !== t.parent;) {
                t = t.parent;
              }

              return t;
            }
          },
          fullName: {
            get: function get() {
              for (var t = [this.name], e = this.parent; e;) {
                t.unshift(e.name), e = e.parent;
              }

              return t.join(".");
            }
          }
        }), r.prototype.toJSON = function () {
          throw Error();
        }, r.prototype.onAdd = function (t) {
          this.parent && this.parent !== t && this.parent.remove(this), this.parent = t, this.resolved = !1;
          var e = t.root;
          e instanceof i && e._handleAdd(this);
        }, r.prototype.onRemove = function (t) {
          var e = t.root;
          e instanceof i && e._handleRemove(this), this.parent = null, this.resolved = !1;
        }, r.prototype.resolve = function () {
          return this.resolved ? this : (this.root instanceof i && (this.resolved = !0), this);
        }, r.prototype.getOption = function (t) {
          if (this.options) return this.options[t];
        }, r.prototype.setOption = function (t, e, n) {
          return n && this.options && void 0 !== this.options[t] || ((this.options || (this.options = {}))[t] = e), this;
        }, r.prototype.setParsedOption = function (t, e, n) {
          this.parsedOptions || (this.parsedOptions = []);
          var i = this.parsedOptions;

          if (n) {
            var r = i.find(function (e) {
              return Object.prototype.hasOwnProperty.call(e, t);
            });

            if (r) {
              var s = r[t];
              o.setProperty(s, n, e);
            } else (r = {})[t] = o.setProperty({}, n, e), i.push(r);
          } else {
            var a = {};
            a[t] = e, i.push(a);
          }

          return this;
        }, r.prototype.setOptions = function (t, e) {
          if (t) for (var n = Object.keys(t), i = 0; i < n.length; ++i) {
            this.setOption(n[i], t[n[i]], e);
          }
          return this;
        }, r.prototype.toString = function () {
          var t = this.constructor.className,
              e = this.fullName;
          return e.length ? t + " " + e : t;
        }, r._configure = function (t) {
          i = t;
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = l;
        var i = n(37);
        ((l.prototype = Object.create(i.prototype)).constructor = l).className = "Field";
        var o,
            r = n(26),
            s = n(53),
            a = n(14),
            c = /^required|optional|repeated$/;

        function l(t, e, n, o, r, l, d) {
          if (a.isObject(o) ? (d = r, l = o, o = r = void 0) : a.isObject(r) && (d = l, l = r, r = void 0), i.call(this, t, l), !a.isInteger(e) || e < 0) throw TypeError("id must be a non-negative integer");
          if (!a.isString(n)) throw TypeError("type must be a string");
          if (void 0 !== o && !c.test(o = o.toString().toLowerCase())) throw TypeError("rule must be a string rule");
          if (void 0 !== r && !a.isString(r)) throw TypeError("extend must be a string");
          "proto3_optional" === o && (o = "optional"), this.rule = o && "optional" !== o ? o : void 0, this.type = n, this.id = e, this.extend = r || void 0, this.required = "required" === o, this.optional = !this.required, this.repeated = "repeated" === o, this.map = !1, this.message = null, this.partOf = null, this.typeDefault = null, this.defaultValue = null, this["long"] = !!a.Long && void 0 !== s["long"][n], this.bytes = "bytes" === n, this.resolvedType = null, this.extensionField = null, this.declaringField = null, this._packed = null, this.comment = d;
        }

        l.fromJSON = function (t, e) {
          return new l(t, e.id, e.type, e.rule, e.extend, e.options, e.comment);
        }, Object.defineProperty(l.prototype, "packed", {
          get: function get() {
            return null === this._packed && (this._packed = !1 !== this.getOption("packed")), this._packed;
          }
        }), l.prototype.setOption = function (t, e, n) {
          return "packed" === t && (this._packed = null), i.prototype.setOption.call(this, t, e, n);
        }, l.prototype.toJSON = function (t) {
          var e = !!t && Boolean(t.keepComments);
          return a.toObject(["rule", "optional" !== this.rule && this.rule || void 0, "type", this.type, "id", this.id, "extend", this.extend, "options", this.options, "comment", e ? this.comment : void 0]);
        }, l.prototype.resolve = function () {
          if (this.resolved) return this;
          if (void 0 === (this.typeDefault = s.defaults[this.type]) && (this.resolvedType = (this.declaringField ? this.declaringField.parent : this.parent).lookupTypeOrEnum(this.type), this.resolvedType instanceof o ? this.typeDefault = null : this.typeDefault = this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]), this.options && null != this.options["default"] && (this.typeDefault = this.options["default"], this.resolvedType instanceof r && "string" == typeof this.typeDefault && (this.typeDefault = this.resolvedType.values[this.typeDefault])), this.options && (!0 !== this.options.packed && (void 0 === this.options.packed || !this.resolvedType || this.resolvedType instanceof r) || delete this.options.packed, Object.keys(this.options).length || (this.options = void 0)), this["long"]) this.typeDefault = a.Long.fromNumber(this.typeDefault, "u" === this.type.charAt(0)), Object.freeze && Object.freeze(this.typeDefault);else if (this.bytes && "string" == typeof this.typeDefault) {
            var t;
            a.base64.test(this.typeDefault) ? a.base64.decode(this.typeDefault, t = a.newBuffer(a.base64.length(this.typeDefault)), 0) : a.utf8.write(this.typeDefault, t = a.newBuffer(a.utf8.length(this.typeDefault)), 0), this.typeDefault = t;
          }
          return this.map ? this.defaultValue = a.emptyObject : this.repeated ? this.defaultValue = a.emptyArray : this.defaultValue = this.typeDefault, this.parent instanceof o && (this.parent.ctor.prototype[this.name] = this.defaultValue), i.prototype.resolve.call(this);
        }, l.d = function (t, e, n, i) {
          return "function" == typeof e ? e = a.decorateType(e).name : e && "object" == typeof e && (e = a.decorateEnum(e).name), function (o, r) {
            a.decorateType(o.constructor).add(new l(r, t, e, n, {
              "default": i
            }));
          };
        }, l._configure = function (t) {
          o = t;
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(281)),
            r = i(n(304)),
            s = i(n(1)),
            a = i(n(27)),
            c = i(n(4)),
            l = i(n(307)),
            d = i(n(40)),
            u = i(n(331)),
            h = i(n(54)),
            f = n(332);
        var g;
        !function (t) {
          t.DISCONNECTED = "disconnected", t.CONNECTING = "connecting", t.CONNECTED = "connected";
        }(g = e.WEB_SOCKET_GATEWAY_STATES || (e.WEB_SOCKET_GATEWAY_STATES = {}));

        var m = /*#__PURE__*/function () {
          function m(t, e) {
            var _this10 = this;

            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : o["default"];
            var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : d["default"].get;

            _classCallCheck(this, m);

            if (this._token = e, this._options = n, this._connectionProvider = i, this._userFactory = s, this._channels = new Map(), this._connectionAttempt = 0, !t) throw new TypeError("Api address must be provided.");
            if (!this._token) throw new TypeError("Token must be provided.");
            this._url = r["default"](t.replace(/^(?!(?:\w+:)?\/\/)/, "https://")), this.set("state", "disconnected"), this.set("sessionId", void 0), this.set("me", void 0), this.on("change:state", /*#__PURE__*/function () {
              var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(t, e, n) {
                var i, o;
                return regeneratorRuntime.wrap(function _callee$(_context) {
                  while (1) {
                    switch (_context.prev = _context.next) {
                      case 0:
                        if (!(n === m.STATE_CONNECTED)) {
                          _context.next = 9;
                          break;
                        }

                        _context.prev = 1;
                        _context.next = 4;
                        return _this10._userFactory.call(d["default"], _this10, null === (o = null === (i = _this10._socket) || void 0 === i ? void 0 : i.auth) || void 0 === o ? void 0 : o.userId);

                      case 4:
                        _this10.me = _context.sent;
                        _context.next = 9;
                        break;

                      case 7:
                        _context.prev = 7;
                        _context.t0 = _context["catch"](1);

                      case 9:
                      case "end":
                        return _context.stop();
                    }
                  }
                }, _callee, null, [[1, 7]]);
              }));

              return function (_x2, _x3, _x4) {
                return _ref.apply(this, arguments);
              };
            }(), {
              priority: m._CHANGE_STATE_EVENT_PRIORITY
            }), this.on("error", function (t, e) {
              _this10._options.onError ? _this10._options.onError(e) : console.log(e);
            });
          }

          _createClass(m, [{
            key: "disconnect",
            value: function disconnect() {
              var t;
              this.state !== g.DISCONNECTED && (null === (t = this._socket) || void 0 === t || t.disconnect(), this._socket = void 0, this.state = g.DISCONNECTED);
            }
          }, {
            key: "reconnect",
            value: function () {
              var _reconnect = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
                return regeneratorRuntime.wrap(function _callee2$(_context2) {
                  while (1) {
                    switch (_context2.prev = _context2.next) {
                      case 0:
                        _context2.t0 = this._socket || this.state !== g.DISCONNECTED;

                        if (_context2.t0) {
                          _context2.next = 6;
                          break;
                        }

                        _context2.next = 4;
                        return this._token.refreshToken();

                      case 4:
                        _context2.next = 6;
                        return this._connect();

                      case 6:
                      case "end":
                        return _context2.stop();
                    }
                  }
                }, _callee2, this);
              }));

              function reconnect() {
                return _reconnect.apply(this, arguments);
              }

              return reconnect;
            }()
          }, {
            key: "_sendRequest",
            value: function _sendRequest(t, e, n) {
              if (!t) throw new h["default"]("`serviceName` must be provided.", this);
              if (this.state !== m.STATE_CONNECTED) throw new h["default"]("Not connected.", this);
              if (!this._socket || !this._socket.isAuthenticated) throw new h["default"]("Not authenticated.", this);
              var i = new ArrayBuffer(n.length + 2),
                  o = new Uint8Array(i);
              return o[0] = t, o[1] = parseInt(e), o.set(n, 2), this._emit(1, o);
            }
          }, {
            key: "_getChannel",
            value: function _getChannel(t, e) {
              var n = "" + t + e;
              return !this._channels.has(n) && this._socket && this._channels.set(n, new l["default"](n, this, this._socket)), this._channels.get(n);
            }
          }, {
            key: "_connect",
            value: function _connect() {
              var _this11 = this;

              return new Promise(function (t, e) {
                var n = _this11._setupSocket();

                !_this11.sessionId && n.on("reconnect_error", function () {
                  _this11._reconnectionAttemptError(e);
                }), n.once("connect", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
                  return regeneratorRuntime.wrap(function _callee3$(_context3) {
                    while (1) {
                      switch (_context3.prev = _context3.next) {
                        case 0:
                          _context3.prev = 0;
                          _context3.next = 3;
                          return _this11._onConnect();

                        case 3:
                          t();
                          _context3.next = 9;
                          break;

                        case 6:
                          _context3.prev = 6;
                          _context3.t0 = _context3["catch"](0);
                          e(_context3.t0);

                        case 9:
                        case "end":
                          return _context3.stop();
                      }
                    }
                  }, _callee3, null, [[0, 6]]);
                }))), n.connect();
              });
            }
          }, {
            key: "_setupSocket",
            value: function _setupSocket() {
              var _this12 = this;

              var t;
              if (this._socket) return this._socket;

              var e = this._url.port || ("http:" === this._url.protocol ? 80 : 443),
                  n = (this._url.protocol || "https:") + "//" + this._url.hostname + ":" + e,
                  i = this._connectionProvider(n, {
                parser: {
                  Encoder: f.Encoder,
                  Decoder: f.Decoder
                },
                path: "/ws-v2/ws",
                transports: ["websocket"],
                timeout: void 0 !== this._options.timeout ? this._options.timeout : 5e3,
                reconnection: void 0 === this._options.autoReconnect || this._options.autoReconnect,
                reconnectionDelay: 1e3,
                reconnectionDelayMax: 5e3,
                rejectUnauthorized: void 0 === this._options.rejectUnauthorized || this._options.rejectUnauthorized,
                query: {
                  version: u["default"]
                },
                agent: null !== (t = this._options.agent) && void 0 !== t && t
              });

              return this.state = g.CONNECTING, i.on("connect", function () {
                _this12.sessionId = i.id;
              }), i.on("reconnecting", function (t) {
                _this12.state = g.CONNECTING, _this12._connectionAttempt = t;
              }), i.on("reconnect", this._onReconnect.bind(this)), i.on("disconnect", this._onDisconnect.bind(this)), i.on("error", this._onError.bind(this)), i.on("unauthorized", this._onUnauthorized.bind(this)), this._socket = i, i;
            }
          }, {
            key: "_emit",
            value: function _emit(t, e) {
              var _this13 = this;

              var n = this._socket;
              return new Promise(function (i, o) {
                n.binary(!1).emit(t, e, function (t, e) {
                  t && o(h["default"].fromPublicError(t, _this13)), i(e);
                });
              });
            }
          }, {
            key: "_addAuthData",
            value: function _addAuthData(t, e) {
              this._socket.auth = {
                environmentId: t,
                userId: e
              }, this._socket.isAuthenticated = !0;
            }
          }, {
            key: "_removeAuthData",
            value: function _removeAuthData() {
              this._socket.isAuthenticated = !1, delete this._socket.auth;
            }
          }, {
            key: "_onConnect",
            value: function () {
              var _onConnect2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
                var _this14 = this;

                var t;
                return regeneratorRuntime.wrap(function _callee5$(_context5) {
                  while (1) {
                    switch (_context5.prev = _context5.next) {
                      case 0:
                        _context5.next = 2;
                        return this._authenticate(this._token.value);

                      case 2:
                        this.state = g.CONNECTED;

                        t = /*#__PURE__*/function () {
                          var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(_t13, e, n) {
                            return regeneratorRuntime.wrap(function _callee4$(_context4) {
                              while (1) {
                                switch (_context4.prev = _context4.next) {
                                  case 0:
                                    _context4.prev = 0;
                                    _context4.next = 3;
                                    return _this14._authenticate(n);

                                  case 3:
                                    _context4.next = 7;
                                    break;

                                  case 5:
                                    _context4.prev = 5;
                                    _context4.t0 = _context4["catch"](0);

                                  case 7:
                                  case "end":
                                    return _context4.stop();
                                }
                              }
                            }, _callee4, null, [[0, 5]]);
                          }));

                          return function t(_x5, _x6, _x7) {
                            return _ref3.apply(this, arguments);
                          };
                        }();

                        this._token.on("change:value", t), this._socket.off("reconnect_error"), this.on("disconnect", function () {
                          _this14._token.off("change:value", t);
                        });

                      case 5:
                      case "end":
                        return _context5.stop();
                    }
                  }
                }, _callee5, this);
              }));

              function _onConnect() {
                return _onConnect2.apply(this, arguments);
              }

              return _onConnect;
            }()
          }, {
            key: "_onReconnect",
            value: function () {
              var _onReconnect2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
                return regeneratorRuntime.wrap(function _callee6$(_context6) {
                  while (1) {
                    switch (_context6.prev = _context6.next) {
                      case 0:
                        _context6.next = 2;
                        return this._token.refreshToken();

                      case 2:
                        _context6.next = 4;
                        return this._onConnect();

                      case 4:
                      case "end":
                        return _context6.stop();
                    }
                  }
                }, _callee6, this);
              }));

              function _onReconnect() {
                return _onReconnect2.apply(this, arguments);
              }

              return _onReconnect;
            }()
          }, {
            key: "_onDisconnect",
            value: function _onDisconnect() {
              this.state = g.DISCONNECTED, this._connectionAttempt = 0, this.fire("disconnect");

              var _iterator10 = _createForOfIteratorHelper(this._channels.values()),
                  _step10;

              try {
                for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
                  var _t14 = _step10.value;

                  _t14.remove();
                }
              } catch (err) {
                _iterator10.e(err);
              } finally {
                _iterator10.f();
              }

              this._channels.clear(), void 0 === this._options.autoReconnect || this._options.autoReconnect || (this._socket = void 0);
            }
          }, {
            key: "_onError",
            value: function _onError(t) {
              this.fire("error", new h["default"](t.message, this, t.code));
            }
          }, {
            key: "_reconnectionAttemptError",
            value: function _reconnectionAttemptError(t) {
              this._connectionAttempt >= 2 && (this.disconnect(), t(new h["default"]("The number of initial connection attempts exceeded.")));
            }
          }, {
            key: "_onUnauthorized",
            value: function _onUnauthorized(_ref4) {
              var t = _ref4.error;
              this._removeAuthData(), this.fire("error", h["default"].fromPublicError(t, this));
            }
          }, {
            key: "_authenticate",
            value: function () {
              var _authenticate2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(t) {
                var _e7;

                return regeneratorRuntime.wrap(function _callee7$(_context7) {
                  while (1) {
                    switch (_context7.prev = _context7.next) {
                      case 0:
                        _context7.prev = 0;
                        _context7.next = 3;
                        return this._emit(2, {
                          token: t
                        });

                      case 3:
                        _e7 = _context7.sent;

                        this._addAuthData(_e7.environmentId, _e7.userId);

                        _context7.next = 10;
                        break;

                      case 7:
                        _context7.prev = 7;
                        _context7.t0 = _context7["catch"](0);
                        throw this._removeAuthData(), _context7.t0;

                      case 10:
                      case "end":
                        return _context7.stop();
                    }
                  }
                }, _callee7, this, [[0, 7]]);
              }));

              function _authenticate(_x8) {
                return _authenticate2.apply(this, arguments);
              }

              return _authenticate;
            }()
          }], [{
            key: "connect",
            value: function () {
              var _connect2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(t) {
                var e,
                    n,
                    i,
                    r,
                    s,
                    _args8 = arguments;
                return regeneratorRuntime.wrap(function _callee8$(_context8) {
                  while (1) {
                    switch (_context8.prev = _context8.next) {
                      case 0:
                        e = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : "local.cs.dev:443/ws-v2";
                        n = _args8.length > 2 && _args8[2] !== undefined ? _args8[2] : {};
                        i = _args8.length > 3 && _args8[3] !== undefined ? _args8[3] : o["default"];
                        r = _args8.length > 4 && _args8[4] !== undefined ? _args8[4] : d["default"].get;
                        s = new m(e, t, n, i, r);
                        _context8.next = 7;
                        return s._connect();

                      case 7:
                        return _context8.abrupt("return", s);

                      case 8:
                      case "end":
                        return _context8.stop();
                    }
                  }
                }, _callee8);
              }));

              function connect(_x9) {
                return _connect2.apply(this, arguments);
              }

              return connect;
            }()
          }]);

          return m;
        }();

        m.STATE_DISCONNECTED = g.DISCONNECTED, m.STATE_CONNECTING = g.CONNECTING, m.STATE_CONNECTED = g.CONNECTED, m._CHANGE_STATE_EVENT_PRIORITY = a["default"].get("highest") + 999999, s["default"](m, c["default"]), e["default"] = m;
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(327)),
            r = i(n(328)),
            s = i(n(32)),
            a = i(n(329)),
            c = i(n(330));

        var l = /*#__PURE__*/function () {
          function l() {
            var _this15 = this;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            _classCallCheck(this, l);

            this._attributes = new Map();

            var _loop = function _loop() {
              var e = _Object$keys[_i4];
              "id" !== e ? (_this15._attributes.set(e, t[e]), Object.defineProperty(_this15, e, {
                enumerable: !0,
                configurable: !1,
                get: function get() {
                  return _this15._attributes.get(e);
                }
              })) : _this15.id = t.id;
            };

            for (var _i4 = 0, _Object$keys = Object.keys(t); _i4 < _Object$keys.length; _i4++) {
              _loop();
            }
          }

          _createClass(l, null, [{
            key: "fromData",
            value: function fromData(t) {
              return new l(t);
            }
          }, {
            key: "get",
            value: function () {
              var _get = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(t, e) {
                var n, _i5, _a2;

                return regeneratorRuntime.wrap(function _callee9$(_context9) {
                  while (1) {
                    switch (_context9.prev = _context9.next) {
                      case 0:
                        n = new o["default"](e);
                        _context9.prev = 1;
                        _context9.next = 4;
                        return t._sendRequest(l._SERVICE, o["default"].TYPE, s["default"].encode(n));

                      case 4:
                        _i5 = _context9.sent;
                        _a2 = s["default"].decode(_i5, r["default"]);
                        return _context9.abrupt("return", new l(_a2.attributes));

                      case 9:
                        _context9.prev = 9;
                        _context9.t0 = _context9["catch"](1);
                        return _context9.abrupt("return", new l({
                          id: e
                        }));

                      case 12:
                      case "end":
                        return _context9.stop();
                    }
                  }
                }, _callee9, null, [[1, 9]]);
              }));

              function get(_x10, _x11) {
                return _get.apply(this, arguments);
              }

              return get;
            }()
          }, {
            key: "getMany",
            value: function () {
              var _getMany = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(t, e) {
                var n, _i6;

                return regeneratorRuntime.wrap(function _callee10$(_context10) {
                  while (1) {
                    switch (_context10.prev = _context10.next) {
                      case 0:
                        n = new a["default"](e);
                        _context10.prev = 1;
                        _context10.next = 4;
                        return t._sendRequest(l._SERVICE, a["default"].TYPE, s["default"].encode(n));

                      case 4:
                        _i6 = _context10.sent;
                        return _context10.abrupt("return", s["default"].decode(_i6, c["default"]).users.map(function (t) {
                          return new l(t);
                        }));

                      case 8:
                        _context10.prev = 8;
                        _context10.t0 = _context10["catch"](1);
                        return _context10.abrupt("return", e.map(function (t) {
                          return new l({
                            id: t
                          });
                        }));

                      case 11:
                      case "end":
                        return _context10.stop();
                    }
                  }
                }, _callee10, null, [[1, 8]]);
              }));

              function getMany(_x12, _x13) {
                return _getMany.apply(this, arguments);
              }

              return getMany;
            }()
          }]);

          return l;
        }();

        l._SERVICE = 2, e["default"] = l;
      }, function (t, e, n) {
        "use strict";

        var i = n(15),
            o = n(7),
            r = "[object AsyncFunction]",
            s = "[object Function]",
            a = "[object GeneratorFunction]",
            c = "[object Proxy]";

        e.a = function (t) {
          if (!Object(o.a)(t)) return !1;
          var e = Object(i.a)(t);
          return e == s || e == a || e == r || e == c;
        };
      }, function (t, e, n) {
        "use strict";

        var i = 9007199254740991,
            o = /^(?:0|[1-9]\d*)$/;

        e.a = function (t, e) {
          var n = typeof t;
          return !!(e = null == e ? i : e) && ("number" == n || "symbol" != n && o.test(t)) && t > -1 && t % 1 == 0 && t < e;
        };
      }, function (t, e, n) {
        "use strict";

        var i = n(48);

        e.a = function (t, e, n) {
          "__proto__" == e && i.a ? Object(i.a)(t, e, {
            configurable: !0,
            enumerable: !0,
            value: n,
            writable: !0
          }) : t[e] = n;
        };
      }, function (t, e, n) {
        "use strict";

        var i = n(43),
            o = n(23),
            r = Object.prototype.hasOwnProperty;

        e.a = function (t, e, n) {
          var s = t[e];
          r.call(t, e) && Object(o.a)(s, n) && (void 0 !== n || e in t) || Object(i.a)(t, e, n);
        };
      }, function (t, e, n) {
        "use strict";

        e.a = function (t) {
          return function (e) {
            return t(e);
          };
        };
      }, function (t, e, n) {
        "use strict";

        var i = Object.prototype;

        e.a = function (t) {
          var e = t && t.constructor;
          return t === ("function" == typeof e && e.prototype || i);
        };
      }, function (t, e, n) {
        "use strict";

        var i = n(15),
            o = n(62),
            r = n(8),
            s = {};
        s["[object Float32Array]"] = s["[object Float64Array]"] = s["[object Int8Array]"] = s["[object Int16Array]"] = s["[object Int32Array]"] = s["[object Uint8Array]"] = s["[object Uint8ClampedArray]"] = s["[object Uint16Array]"] = s["[object Uint32Array]"] = !0, s["[object Arguments]"] = s["[object Array]"] = s["[object ArrayBuffer]"] = s["[object Boolean]"] = s["[object DataView]"] = s["[object Date]"] = s["[object Error]"] = s["[object Function]"] = s["[object Map]"] = s["[object Number]"] = s["[object Object]"] = s["[object RegExp]"] = s["[object Set]"] = s["[object String]"] = s["[object WeakMap]"] = !1;

        var a = function a(t) {
          return Object(r.a)(t) && Object(o.a)(t.length) && !!s[Object(i.a)(t)];
        },
            c = n(45),
            l = n(29),
            d = l.a && l.a.isTypedArray,
            u = d ? Object(c.a)(d) : a;

        e.a = u;
      }, function (t, e, n) {
        "use strict";

        var i = n(17),
            o = function () {
          try {
            var t = Object(i.a)(Object, "defineProperty");
            return t({}, "", {}), t;
          } catch (t) {}
        }();

        e.a = o;
      }, function (t, e) {
        var n;

        n = function () {
          return this;
        }();

        try {
          n = n || new Function("return this")();
        } catch (t) {
          "object" == typeof window && (n = window);
        }

        t.exports = n;
      }, function (t, e) {
        var n = {}.toString;

        t.exports = Array.isArray || function (t) {
          return "[object Array]" == n.call(t);
        };
      }, function (t, e, n) {
        "use strict";

        (function (t) {
          /*!
           * The buffer module from node.js, for the browser.
           *
           * @author   Feross Aboukhadijeh <http://feross.org>
           * @license  MIT
           */
          var i = n(286),
              o = n(287),
              r = n(288);

          function s() {
            return c.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
          }

          function a(t, e) {
            if (s() < e) throw new RangeError("Invalid typed array length");
            return c.TYPED_ARRAY_SUPPORT ? (t = new Uint8Array(e)).__proto__ = c.prototype : (null === t && (t = new c(e)), t.length = e), t;
          }

          function c(t, e, n) {
            if (!(c.TYPED_ARRAY_SUPPORT || this instanceof c)) return new c(t, e, n);

            if ("number" == typeof t) {
              if ("string" == typeof e) throw new Error("If encoding is specified then the first argument must be a string");
              return u(this, t);
            }

            return l(this, t, e, n);
          }

          function l(t, e, n, i) {
            if ("number" == typeof e) throw new TypeError('"value" argument must not be a number');
            return "undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer ? function (t, e, n, i) {
              if (e.byteLength, n < 0 || e.byteLength < n) throw new RangeError("'offset' is out of bounds");
              if (e.byteLength < n + (i || 0)) throw new RangeError("'length' is out of bounds");
              e = void 0 === n && void 0 === i ? new Uint8Array(e) : void 0 === i ? new Uint8Array(e, n) : new Uint8Array(e, n, i);
              c.TYPED_ARRAY_SUPPORT ? (t = e).__proto__ = c.prototype : t = h(t, e);
              return t;
            }(t, e, n, i) : "string" == typeof e ? function (t, e, n) {
              "string" == typeof n && "" !== n || (n = "utf8");
              if (!c.isEncoding(n)) throw new TypeError('"encoding" must be a valid string encoding');
              var i = 0 | g(e, n),
                  o = (t = a(t, i)).write(e, n);
              o !== i && (t = t.slice(0, o));
              return t;
            }(t, e, n) : function (t, e) {
              if (c.isBuffer(e)) {
                var n = 0 | f(e.length);
                return 0 === (t = a(t, n)).length ? t : (e.copy(t, 0, 0, n), t);
              }

              if (e) {
                if ("undefined" != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer || "length" in e) return "number" != typeof e.length || function (t) {
                  return t != t;
                }(e.length) ? a(t, 0) : h(t, e);
                if ("Buffer" === e.type && r(e.data)) return h(t, e.data);
              }

              throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
            }(t, e);
          }

          function d(t) {
            if ("number" != typeof t) throw new TypeError('"size" argument must be a number');
            if (t < 0) throw new RangeError('"size" argument must not be negative');
          }

          function u(t, e) {
            if (d(e), t = a(t, e < 0 ? 0 : 0 | f(e)), !c.TYPED_ARRAY_SUPPORT) for (var n = 0; n < e; ++n) {
              t[n] = 0;
            }
            return t;
          }

          function h(t, e) {
            var n = e.length < 0 ? 0 : 0 | f(e.length);
            t = a(t, n);

            for (var i = 0; i < n; i += 1) {
              t[i] = 255 & e[i];
            }

            return t;
          }

          function f(t) {
            if (t >= s()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + s().toString(16) + " bytes");
            return 0 | t;
          }

          function g(t, e) {
            if (c.isBuffer(t)) return t.length;
            if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)) return t.byteLength;
            "string" != typeof t && (t = "" + t);
            var n = t.length;
            if (0 === n) return 0;

            for (var i = !1;;) {
              switch (e) {
                case "ascii":
                case "latin1":
                case "binary":
                  return n;

                case "utf8":
                case "utf-8":
                case void 0:
                  return F(t).length;

                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return 2 * n;

                case "hex":
                  return n >>> 1;

                case "base64":
                  return V(t).length;

                default:
                  if (i) return F(t).length;
                  e = ("" + e).toLowerCase(), i = !0;
              }
            }
          }

          function m(t, e, n) {
            var i = t[e];
            t[e] = t[n], t[n] = i;
          }

          function p(t, e, n, i, o) {
            if (0 === t.length) return -1;

            if ("string" == typeof n ? (i = n, n = 0) : n > 2147483647 ? n = 2147483647 : n < -2147483648 && (n = -2147483648), n = +n, isNaN(n) && (n = o ? 0 : t.length - 1), n < 0 && (n = t.length + n), n >= t.length) {
              if (o) return -1;
              n = t.length - 1;
            } else if (n < 0) {
              if (!o) return -1;
              n = 0;
            }

            if ("string" == typeof e && (e = c.from(e, i)), c.isBuffer(e)) return 0 === e.length ? -1 : b(t, e, n, i, o);
            if ("number" == typeof e) return e &= 255, c.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? o ? Uint8Array.prototype.indexOf.call(t, e, n) : Uint8Array.prototype.lastIndexOf.call(t, e, n) : b(t, [e], n, i, o);
            throw new TypeError("val must be string, number or Buffer");
          }

          function b(t, e, n, i, o) {
            var r,
                s = 1,
                a = t.length,
                c = e.length;

            if (void 0 !== i && ("ucs2" === (i = String(i).toLowerCase()) || "ucs-2" === i || "utf16le" === i || "utf-16le" === i)) {
              if (t.length < 2 || e.length < 2) return -1;
              s = 2, a /= 2, c /= 2, n /= 2;
            }

            function l(t, e) {
              return 1 === s ? t[e] : t.readUInt16BE(e * s);
            }

            if (o) {
              var d = -1;

              for (r = n; r < a; r++) {
                if (l(t, r) === l(e, -1 === d ? 0 : r - d)) {
                  if (-1 === d && (d = r), r - d + 1 === c) return d * s;
                } else -1 !== d && (r -= r - d), d = -1;
              }
            } else for (n + c > a && (n = a - c), r = n; r >= 0; r--) {
              for (var u = !0, h = 0; h < c; h++) {
                if (l(t, r + h) !== l(e, h)) {
                  u = !1;
                  break;
                }
              }

              if (u) return r;
            }

            return -1;
          }

          function k(t, e, n, i) {
            n = Number(n) || 0;
            var o = t.length - n;
            i ? (i = Number(i)) > o && (i = o) : i = o;
            var r = e.length;
            if (r % 2 != 0) throw new TypeError("Invalid hex string");
            i > r / 2 && (i = r / 2);

            for (var s = 0; s < i; ++s) {
              var a = parseInt(e.substr(2 * s, 2), 16);
              if (isNaN(a)) return s;
              t[n + s] = a;
            }

            return s;
          }

          function _(t, e, n, i) {
            return U(F(e, t.length - n), t, n, i);
          }

          function w(t, e, n, i) {
            return U(function (t) {
              for (var e = [], n = 0; n < t.length; ++n) {
                e.push(255 & t.charCodeAt(n));
              }

              return e;
            }(e), t, n, i);
          }

          function v(t, e, n, i) {
            return w(t, e, n, i);
          }

          function y(t, e, n, i) {
            return U(V(e), t, n, i);
          }

          function x(t, e, n, i) {
            return U(function (t, e) {
              for (var n, i, o, r = [], s = 0; s < t.length && !((e -= 2) < 0); ++s) {
                n = t.charCodeAt(s), i = n >> 8, o = n % 256, r.push(o), r.push(i);
              }

              return r;
            }(e, t.length - n), t, n, i);
          }

          function C(t, e, n) {
            return 0 === e && n === t.length ? i.fromByteArray(t) : i.fromByteArray(t.slice(e, n));
          }

          function T(t, e, n) {
            n = Math.min(t.length, n);

            for (var i = [], o = e; o < n;) {
              var r,
                  s,
                  a,
                  c,
                  l = t[o],
                  d = null,
                  u = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;
              if (o + u <= n) switch (u) {
                case 1:
                  l < 128 && (d = l);
                  break;

                case 2:
                  128 == (192 & (r = t[o + 1])) && (c = (31 & l) << 6 | 63 & r) > 127 && (d = c);
                  break;

                case 3:
                  r = t[o + 1], s = t[o + 2], 128 == (192 & r) && 128 == (192 & s) && (c = (15 & l) << 12 | (63 & r) << 6 | 63 & s) > 2047 && (c < 55296 || c > 57343) && (d = c);
                  break;

                case 4:
                  r = t[o + 1], s = t[o + 2], a = t[o + 3], 128 == (192 & r) && 128 == (192 & s) && 128 == (192 & a) && (c = (15 & l) << 18 | (63 & r) << 12 | (63 & s) << 6 | 63 & a) > 65535 && c < 1114112 && (d = c);
              }
              null === d ? (d = 65533, u = 1) : d > 65535 && (d -= 65536, i.push(d >>> 10 & 1023 | 55296), d = 56320 | 1023 & d), i.push(d), o += u;
            }

            return function (t) {
              var e = t.length;
              if (e <= A) return String.fromCharCode.apply(String, t);
              var n = "",
                  i = 0;

              for (; i < e;) {
                n += String.fromCharCode.apply(String, t.slice(i, i += A));
              }

              return n;
            }(i);
          }

          e.Buffer = c, e.SlowBuffer = function (t) {
            +t != t && (t = 0);
            return c.alloc(+t);
          }, e.INSPECT_MAX_BYTES = 50, c.TYPED_ARRAY_SUPPORT = void 0 !== t.TYPED_ARRAY_SUPPORT ? t.TYPED_ARRAY_SUPPORT : function () {
            try {
              var t = new Uint8Array(1);
              return t.__proto__ = {
                __proto__: Uint8Array.prototype,
                foo: function foo() {
                  return 42;
                }
              }, 42 === t.foo() && "function" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength;
            } catch (t) {
              return !1;
            }
          }(), e.kMaxLength = s(), c.poolSize = 8192, c._augment = function (t) {
            return t.__proto__ = c.prototype, t;
          }, c.from = function (t, e, n) {
            return l(null, t, e, n);
          }, c.TYPED_ARRAY_SUPPORT && (c.prototype.__proto__ = Uint8Array.prototype, c.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && c[Symbol.species] === c && Object.defineProperty(c, Symbol.species, {
            value: null,
            configurable: !0
          })), c.alloc = function (t, e, n) {
            return function (t, e, n, i) {
              return d(e), e <= 0 ? a(t, e) : void 0 !== n ? "string" == typeof i ? a(t, e).fill(n, i) : a(t, e).fill(n) : a(t, e);
            }(null, t, e, n);
          }, c.allocUnsafe = function (t) {
            return u(null, t);
          }, c.allocUnsafeSlow = function (t) {
            return u(null, t);
          }, c.isBuffer = function (t) {
            return !(null == t || !t._isBuffer);
          }, c.compare = function (t, e) {
            if (!c.isBuffer(t) || !c.isBuffer(e)) throw new TypeError("Arguments must be Buffers");
            if (t === e) return 0;

            for (var n = t.length, i = e.length, o = 0, r = Math.min(n, i); o < r; ++o) {
              if (t[o] !== e[o]) {
                n = t[o], i = e[o];
                break;
              }
            }

            return n < i ? -1 : i < n ? 1 : 0;
          }, c.isEncoding = function (t) {
            switch (String(t).toLowerCase()) {
              case "hex":
              case "utf8":
              case "utf-8":
              case "ascii":
              case "latin1":
              case "binary":
              case "base64":
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return !0;

              default:
                return !1;
            }
          }, c.concat = function (t, e) {
            if (!r(t)) throw new TypeError('"list" argument must be an Array of Buffers');
            if (0 === t.length) return c.alloc(0);
            var n;
            if (void 0 === e) for (e = 0, n = 0; n < t.length; ++n) {
              e += t[n].length;
            }
            var i = c.allocUnsafe(e),
                o = 0;

            for (n = 0; n < t.length; ++n) {
              var s = t[n];
              if (!c.isBuffer(s)) throw new TypeError('"list" argument must be an Array of Buffers');
              s.copy(i, o), o += s.length;
            }

            return i;
          }, c.byteLength = g, c.prototype._isBuffer = !0, c.prototype.swap16 = function () {
            var t = this.length;
            if (t % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");

            for (var e = 0; e < t; e += 2) {
              m(this, e, e + 1);
            }

            return this;
          }, c.prototype.swap32 = function () {
            var t = this.length;
            if (t % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");

            for (var e = 0; e < t; e += 4) {
              m(this, e, e + 3), m(this, e + 1, e + 2);
            }

            return this;
          }, c.prototype.swap64 = function () {
            var t = this.length;
            if (t % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");

            for (var e = 0; e < t; e += 8) {
              m(this, e, e + 7), m(this, e + 1, e + 6), m(this, e + 2, e + 5), m(this, e + 3, e + 4);
            }

            return this;
          }, c.prototype.toString = function () {
            var t = 0 | this.length;
            return 0 === t ? "" : 0 === arguments.length ? T(this, 0, t) : function (t, e, n) {
              var i = !1;
              if ((void 0 === e || e < 0) && (e = 0), e > this.length) return "";
              if ((void 0 === n || n > this.length) && (n = this.length), n <= 0) return "";
              if ((n >>>= 0) <= (e >>>= 0)) return "";

              for (t || (t = "utf8");;) {
                switch (t) {
                  case "hex":
                    return I(this, e, n);

                  case "utf8":
                  case "utf-8":
                    return T(this, e, n);

                  case "ascii":
                    return E(this, e, n);

                  case "latin1":
                  case "binary":
                    return S(this, e, n);

                  case "base64":
                    return C(this, e, n);

                  case "ucs2":
                  case "ucs-2":
                  case "utf16le":
                  case "utf-16le":
                    return O(this, e, n);

                  default:
                    if (i) throw new TypeError("Unknown encoding: " + t);
                    t = (t + "").toLowerCase(), i = !0;
                }
              }
            }.apply(this, arguments);
          }, c.prototype.equals = function (t) {
            if (!c.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
            return this === t || 0 === c.compare(this, t);
          }, c.prototype.inspect = function () {
            var t = "",
                n = e.INSPECT_MAX_BYTES;
            return this.length > 0 && (t = this.toString("hex", 0, n).match(/.{2}/g).join(" "), this.length > n && (t += " ... ")), "<Buffer " + t + ">";
          }, c.prototype.compare = function (t, e, n, i, o) {
            if (!c.isBuffer(t)) throw new TypeError("Argument must be a Buffer");
            if (void 0 === e && (e = 0), void 0 === n && (n = t ? t.length : 0), void 0 === i && (i = 0), void 0 === o && (o = this.length), e < 0 || n > t.length || i < 0 || o > this.length) throw new RangeError("out of range index");
            if (i >= o && e >= n) return 0;
            if (i >= o) return -1;
            if (e >= n) return 1;
            if (e >>>= 0, n >>>= 0, i >>>= 0, o >>>= 0, this === t) return 0;

            for (var r = o - i, s = n - e, a = Math.min(r, s), l = this.slice(i, o), d = t.slice(e, n), u = 0; u < a; ++u) {
              if (l[u] !== d[u]) {
                r = l[u], s = d[u];
                break;
              }
            }

            return r < s ? -1 : s < r ? 1 : 0;
          }, c.prototype.includes = function (t, e, n) {
            return -1 !== this.indexOf(t, e, n);
          }, c.prototype.indexOf = function (t, e, n) {
            return p(this, t, e, n, !0);
          }, c.prototype.lastIndexOf = function (t, e, n) {
            return p(this, t, e, n, !1);
          }, c.prototype.write = function (t, e, n, i) {
            if (void 0 === e) i = "utf8", n = this.length, e = 0;else if (void 0 === n && "string" == typeof e) i = e, n = this.length, e = 0;else {
              if (!isFinite(e)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
              e |= 0, isFinite(n) ? (n |= 0, void 0 === i && (i = "utf8")) : (i = n, n = void 0);
            }
            var o = this.length - e;
            if ((void 0 === n || n > o) && (n = o), t.length > 0 && (n < 0 || e < 0) || e > this.length) throw new RangeError("Attempt to write outside buffer bounds");
            i || (i = "utf8");

            for (var r = !1;;) {
              switch (i) {
                case "hex":
                  return k(this, t, e, n);

                case "utf8":
                case "utf-8":
                  return _(this, t, e, n);

                case "ascii":
                  return w(this, t, e, n);

                case "latin1":
                case "binary":
                  return v(this, t, e, n);

                case "base64":
                  return y(this, t, e, n);

                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return x(this, t, e, n);

                default:
                  if (r) throw new TypeError("Unknown encoding: " + i);
                  i = ("" + i).toLowerCase(), r = !0;
              }
            }
          }, c.prototype.toJSON = function () {
            return {
              type: "Buffer",
              data: Array.prototype.slice.call(this._arr || this, 0)
            };
          };
          var A = 4096;

          function E(t, e, n) {
            var i = "";
            n = Math.min(t.length, n);

            for (var o = e; o < n; ++o) {
              i += String.fromCharCode(127 & t[o]);
            }

            return i;
          }

          function S(t, e, n) {
            var i = "";
            n = Math.min(t.length, n);

            for (var o = e; o < n; ++o) {
              i += String.fromCharCode(t[o]);
            }

            return i;
          }

          function I(t, e, n) {
            var i = t.length;
            (!e || e < 0) && (e = 0), (!n || n < 0 || n > i) && (n = i);

            for (var o = "", r = e; r < n; ++r) {
              o += z(t[r]);
            }

            return o;
          }

          function O(t, e, n) {
            for (var i = t.slice(e, n), o = "", r = 0; r < i.length; r += 2) {
              o += String.fromCharCode(i[r] + 256 * i[r + 1]);
            }

            return o;
          }

          function R(t, e, n) {
            if (t % 1 != 0 || t < 0) throw new RangeError("offset is not uint");
            if (t + e > n) throw new RangeError("Trying to access beyond buffer length");
          }

          function M(t, e, n, i, o, r) {
            if (!c.isBuffer(t)) throw new TypeError('"buffer" argument must be a Buffer instance');
            if (e > o || e < r) throw new RangeError('"value" argument is out of bounds');
            if (n + i > t.length) throw new RangeError("Index out of range");
          }

          function P(t, e, n, i) {
            e < 0 && (e = 65535 + e + 1);

            for (var o = 0, r = Math.min(t.length - n, 2); o < r; ++o) {
              t[n + o] = (e & 255 << 8 * (i ? o : 1 - o)) >>> 8 * (i ? o : 1 - o);
            }
          }

          function N(t, e, n, i) {
            e < 0 && (e = 4294967295 + e + 1);

            for (var o = 0, r = Math.min(t.length - n, 4); o < r; ++o) {
              t[n + o] = e >>> 8 * (i ? o : 3 - o) & 255;
            }
          }

          function D(t, e, n, i, o, r) {
            if (n + i > t.length) throw new RangeError("Index out of range");
            if (n < 0) throw new RangeError("Index out of range");
          }

          function j(t, e, n, i, r) {
            return r || D(t, 0, n, 4), o.write(t, e, n, i, 23, 4), n + 4;
          }

          function B(t, e, n, i, r) {
            return r || D(t, 0, n, 8), o.write(t, e, n, i, 52, 8), n + 8;
          }

          c.prototype.slice = function (t, e) {
            var n,
                i = this.length;
            if (t = ~~t, e = void 0 === e ? i : ~~e, t < 0 ? (t += i) < 0 && (t = 0) : t > i && (t = i), e < 0 ? (e += i) < 0 && (e = 0) : e > i && (e = i), e < t && (e = t), c.TYPED_ARRAY_SUPPORT) (n = this.subarray(t, e)).__proto__ = c.prototype;else {
              var o = e - t;
              n = new c(o, void 0);

              for (var r = 0; r < o; ++r) {
                n[r] = this[r + t];
              }
            }
            return n;
          }, c.prototype.readUIntLE = function (t, e, n) {
            t |= 0, e |= 0, n || R(t, e, this.length);

            for (var i = this[t], o = 1, r = 0; ++r < e && (o *= 256);) {
              i += this[t + r] * o;
            }

            return i;
          }, c.prototype.readUIntBE = function (t, e, n) {
            t |= 0, e |= 0, n || R(t, e, this.length);

            for (var i = this[t + --e], o = 1; e > 0 && (o *= 256);) {
              i += this[t + --e] * o;
            }

            return i;
          }, c.prototype.readUInt8 = function (t, e) {
            return e || R(t, 1, this.length), this[t];
          }, c.prototype.readUInt16LE = function (t, e) {
            return e || R(t, 2, this.length), this[t] | this[t + 1] << 8;
          }, c.prototype.readUInt16BE = function (t, e) {
            return e || R(t, 2, this.length), this[t] << 8 | this[t + 1];
          }, c.prototype.readUInt32LE = function (t, e) {
            return e || R(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3];
          }, c.prototype.readUInt32BE = function (t, e) {
            return e || R(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]);
          }, c.prototype.readIntLE = function (t, e, n) {
            t |= 0, e |= 0, n || R(t, e, this.length);

            for (var i = this[t], o = 1, r = 0; ++r < e && (o *= 256);) {
              i += this[t + r] * o;
            }

            return i >= (o *= 128) && (i -= Math.pow(2, 8 * e)), i;
          }, c.prototype.readIntBE = function (t, e, n) {
            t |= 0, e |= 0, n || R(t, e, this.length);

            for (var i = e, o = 1, r = this[t + --i]; i > 0 && (o *= 256);) {
              r += this[t + --i] * o;
            }

            return r >= (o *= 128) && (r -= Math.pow(2, 8 * e)), r;
          }, c.prototype.readInt8 = function (t, e) {
            return e || R(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t];
          }, c.prototype.readInt16LE = function (t, e) {
            e || R(t, 2, this.length);
            var n = this[t] | this[t + 1] << 8;
            return 32768 & n ? 4294901760 | n : n;
          }, c.prototype.readInt16BE = function (t, e) {
            e || R(t, 2, this.length);
            var n = this[t + 1] | this[t] << 8;
            return 32768 & n ? 4294901760 | n : n;
          }, c.prototype.readInt32LE = function (t, e) {
            return e || R(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24;
          }, c.prototype.readInt32BE = function (t, e) {
            return e || R(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3];
          }, c.prototype.readFloatLE = function (t, e) {
            return e || R(t, 4, this.length), o.read(this, t, !0, 23, 4);
          }, c.prototype.readFloatBE = function (t, e) {
            return e || R(t, 4, this.length), o.read(this, t, !1, 23, 4);
          }, c.prototype.readDoubleLE = function (t, e) {
            return e || R(t, 8, this.length), o.read(this, t, !0, 52, 8);
          }, c.prototype.readDoubleBE = function (t, e) {
            return e || R(t, 8, this.length), o.read(this, t, !1, 52, 8);
          }, c.prototype.writeUIntLE = function (t, e, n, i) {
            (t = +t, e |= 0, n |= 0, i) || M(this, t, e, n, Math.pow(2, 8 * n) - 1, 0);
            var o = 1,
                r = 0;

            for (this[e] = 255 & t; ++r < n && (o *= 256);) {
              this[e + r] = t / o & 255;
            }

            return e + n;
          }, c.prototype.writeUIntBE = function (t, e, n, i) {
            (t = +t, e |= 0, n |= 0, i) || M(this, t, e, n, Math.pow(2, 8 * n) - 1, 0);
            var o = n - 1,
                r = 1;

            for (this[e + o] = 255 & t; --o >= 0 && (r *= 256);) {
              this[e + o] = t / r & 255;
            }

            return e + n;
          }, c.prototype.writeUInt8 = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 1, 255, 0), c.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), this[e] = 255 & t, e + 1;
          }, c.prototype.writeUInt16LE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 65535, 0), c.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : P(this, t, e, !0), e + 2;
          }, c.prototype.writeUInt16BE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 65535, 0), c.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : P(this, t, e, !1), e + 2;
          }, c.prototype.writeUInt32LE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 4294967295, 0), c.TYPED_ARRAY_SUPPORT ? (this[e + 3] = t >>> 24, this[e + 2] = t >>> 16, this[e + 1] = t >>> 8, this[e] = 255 & t) : N(this, t, e, !0), e + 4;
          }, c.prototype.writeUInt32BE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 4294967295, 0), c.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : N(this, t, e, !1), e + 4;
          }, c.prototype.writeIntLE = function (t, e, n, i) {
            if (t = +t, e |= 0, !i) {
              var o = Math.pow(2, 8 * n - 1);
              M(this, t, e, n, o - 1, -o);
            }

            var r = 0,
                s = 1,
                a = 0;

            for (this[e] = 255 & t; ++r < n && (s *= 256);) {
              t < 0 && 0 === a && 0 !== this[e + r - 1] && (a = 1), this[e + r] = (t / s >> 0) - a & 255;
            }

            return e + n;
          }, c.prototype.writeIntBE = function (t, e, n, i) {
            if (t = +t, e |= 0, !i) {
              var o = Math.pow(2, 8 * n - 1);
              M(this, t, e, n, o - 1, -o);
            }

            var r = n - 1,
                s = 1,
                a = 0;

            for (this[e + r] = 255 & t; --r >= 0 && (s *= 256);) {
              t < 0 && 0 === a && 0 !== this[e + r + 1] && (a = 1), this[e + r] = (t / s >> 0) - a & 255;
            }

            return e + n;
          }, c.prototype.writeInt8 = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 1, 127, -128), c.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)), t < 0 && (t = 255 + t + 1), this[e] = 255 & t, e + 1;
          }, c.prototype.writeInt16LE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 32767, -32768), c.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8) : P(this, t, e, !0), e + 2;
          }, c.prototype.writeInt16BE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 2, 32767, -32768), c.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 8, this[e + 1] = 255 & t) : P(this, t, e, !1), e + 2;
          }, c.prototype.writeInt32LE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 2147483647, -2147483648), c.TYPED_ARRAY_SUPPORT ? (this[e] = 255 & t, this[e + 1] = t >>> 8, this[e + 2] = t >>> 16, this[e + 3] = t >>> 24) : N(this, t, e, !0), e + 4;
          }, c.prototype.writeInt32BE = function (t, e, n) {
            return t = +t, e |= 0, n || M(this, t, e, 4, 2147483647, -2147483648), t < 0 && (t = 4294967295 + t + 1), c.TYPED_ARRAY_SUPPORT ? (this[e] = t >>> 24, this[e + 1] = t >>> 16, this[e + 2] = t >>> 8, this[e + 3] = 255 & t) : N(this, t, e, !1), e + 4;
          }, c.prototype.writeFloatLE = function (t, e, n) {
            return j(this, t, e, !0, n);
          }, c.prototype.writeFloatBE = function (t, e, n) {
            return j(this, t, e, !1, n);
          }, c.prototype.writeDoubleLE = function (t, e, n) {
            return B(this, t, e, !0, n);
          }, c.prototype.writeDoubleBE = function (t, e, n) {
            return B(this, t, e, !1, n);
          }, c.prototype.copy = function (t, e, n, i) {
            if (n || (n = 0), i || 0 === i || (i = this.length), e >= t.length && (e = t.length), e || (e = 0), i > 0 && i < n && (i = n), i === n) return 0;
            if (0 === t.length || 0 === this.length) return 0;
            if (e < 0) throw new RangeError("targetStart out of bounds");
            if (n < 0 || n >= this.length) throw new RangeError("sourceStart out of bounds");
            if (i < 0) throw new RangeError("sourceEnd out of bounds");
            i > this.length && (i = this.length), t.length - e < i - n && (i = t.length - e + n);
            var o,
                r = i - n;
            if (this === t && n < e && e < i) for (o = r - 1; o >= 0; --o) {
              t[o + e] = this[o + n];
            } else if (r < 1e3 || !c.TYPED_ARRAY_SUPPORT) for (o = 0; o < r; ++o) {
              t[o + e] = this[o + n];
            } else Uint8Array.prototype.set.call(t, this.subarray(n, n + r), e);
            return r;
          }, c.prototype.fill = function (t, e, n, i) {
            if ("string" == typeof t) {
              if ("string" == typeof e ? (i = e, e = 0, n = this.length) : "string" == typeof n && (i = n, n = this.length), 1 === t.length) {
                var o = t.charCodeAt(0);
                o < 256 && (t = o);
              }

              if (void 0 !== i && "string" != typeof i) throw new TypeError("encoding must be a string");
              if ("string" == typeof i && !c.isEncoding(i)) throw new TypeError("Unknown encoding: " + i);
            } else "number" == typeof t && (t &= 255);

            if (e < 0 || this.length < e || this.length < n) throw new RangeError("Out of range index");
            if (n <= e) return this;
            var r;
            if (e >>>= 0, n = void 0 === n ? this.length : n >>> 0, t || (t = 0), "number" == typeof t) for (r = e; r < n; ++r) {
              this[r] = t;
            } else {
              var s = c.isBuffer(t) ? t : F(new c(t, i).toString()),
                  a = s.length;

              for (r = 0; r < n - e; ++r) {
                this[r + e] = s[r % a];
              }
            }
            return this;
          };
          var L = /[^+\/0-9A-Za-z-_]/g;

          function z(t) {
            return t < 16 ? "0" + t.toString(16) : t.toString(16);
          }

          function F(t, e) {
            var n;
            e = e || 1 / 0;

            for (var i = t.length, o = null, r = [], s = 0; s < i; ++s) {
              if ((n = t.charCodeAt(s)) > 55295 && n < 57344) {
                if (!o) {
                  if (n > 56319) {
                    (e -= 3) > -1 && r.push(239, 191, 189);
                    continue;
                  }

                  if (s + 1 === i) {
                    (e -= 3) > -1 && r.push(239, 191, 189);
                    continue;
                  }

                  o = n;
                  continue;
                }

                if (n < 56320) {
                  (e -= 3) > -1 && r.push(239, 191, 189), o = n;
                  continue;
                }

                n = 65536 + (o - 55296 << 10 | n - 56320);
              } else o && (e -= 3) > -1 && r.push(239, 191, 189);

              if (o = null, n < 128) {
                if ((e -= 1) < 0) break;
                r.push(n);
              } else if (n < 2048) {
                if ((e -= 2) < 0) break;
                r.push(n >> 6 | 192, 63 & n | 128);
              } else if (n < 65536) {
                if ((e -= 3) < 0) break;
                r.push(n >> 12 | 224, n >> 6 & 63 | 128, 63 & n | 128);
              } else {
                if (!(n < 1114112)) throw new Error("Invalid code point");
                if ((e -= 4) < 0) break;
                r.push(n >> 18 | 240, n >> 12 & 63 | 128, n >> 6 & 63 | 128, 63 & n | 128);
              }
            }

            return r;
          }

          function V(t) {
            return i.toByteArray(function (t) {
              if ((t = function (t) {
                return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "");
              }(t).replace(L, "")).length < 2) return "";

              for (; t.length % 4 != 0;) {
                t += "=";
              }

              return t;
            }(t));
          }

          function U(t, e, n, i) {
            for (var o = 0; o < i && !(o + n >= e.length || o >= t.length); ++o) {
              e[o + n] = t[o];
            }

            return o;
          }
        }).call(this, n(49));
      }, function (t, e, n) {
        "use strict";

        t.exports = u;
        var i = n(37);
        ((u.prototype = Object.create(i.prototype)).constructor = u).className = "Namespace";
        var o,
            r,
            s,
            a = n(38),
            c = n(59),
            l = n(14);

        function d(t, e) {
          if (t && t.length) {
            for (var n = {}, i = 0; i < t.length; ++i) {
              n[t[i].name] = t[i].toJSON(e);
            }

            return n;
          }
        }

        function u(t, e) {
          i.call(this, t, e), this.nested = void 0, this._nestedArray = null;
        }

        function h(t) {
          return t._nestedArray = null, t;
        }

        u.fromJSON = function (t, e) {
          return new u(t, e.options).addJSON(e.nested);
        }, u.arrayToJSON = d, u.isReservedId = function (t, e) {
          if (t) for (var n = 0; n < t.length; ++n) {
            if ("string" != typeof t[n] && t[n][0] <= e && t[n][1] > e) return !0;
          }
          return !1;
        }, u.isReservedName = function (t, e) {
          if (t) for (var n = 0; n < t.length; ++n) {
            if (t[n] === e) return !0;
          }
          return !1;
        }, Object.defineProperty(u.prototype, "nestedArray", {
          get: function get() {
            return this._nestedArray || (this._nestedArray = l.toArray(this.nested));
          }
        }), u.prototype.toJSON = function (t) {
          return l.toObject(["options", this.options, "nested", d(this.nestedArray, t)]);
        }, u.prototype.addJSON = function (t) {
          if (t) for (var e, n = Object.keys(t), i = 0; i < n.length; ++i) {
            e = t[n[i]], this.add((void 0 !== e.fields ? o.fromJSON : void 0 !== e.values ? s.fromJSON : void 0 !== e.methods ? r.fromJSON : void 0 !== e.id ? a.fromJSON : u.fromJSON)(n[i], e));
          }
          return this;
        }, u.prototype.get = function (t) {
          return this.nested && this.nested[t] || null;
        }, u.prototype.getEnum = function (t) {
          if (this.nested && this.nested[t] instanceof s) return this.nested[t].values;
          throw Error("no such enum: " + t);
        }, u.prototype.add = function (t) {
          if (!(t instanceof a && void 0 !== t.extend || t instanceof o || t instanceof s || t instanceof r || t instanceof u || t instanceof c)) throw TypeError("object must be a valid nested object");

          if (this.nested) {
            var e = this.get(t.name);

            if (e) {
              if (!(e instanceof u && t instanceof u) || e instanceof o || e instanceof r) throw Error("duplicate name '" + t.name + "' in " + this);

              for (var n = e.nestedArray, i = 0; i < n.length; ++i) {
                t.add(n[i]);
              }

              this.remove(e), this.nested || (this.nested = {}), t.setOptions(e.options, !0);
            }
          } else this.nested = {};

          return this.nested[t.name] = t, t.onAdd(this), h(this);
        }, u.prototype.remove = function (t) {
          if (!(t instanceof i)) throw TypeError("object must be a ReflectionObject");
          if (t.parent !== this) throw Error(t + " is not a member of " + this);
          return delete this.nested[t.name], Object.keys(this.nested).length || (this.nested = void 0), t.onRemove(this), h(this);
        }, u.prototype.define = function (t, e) {
          if (l.isString(t)) t = t.split(".");else if (!Array.isArray(t)) throw TypeError("illegal path");
          if (t && t.length && "" === t[0]) throw Error("path must be relative");

          for (var n = this; t.length > 0;) {
            var i = t.shift();

            if (n.nested && n.nested[i]) {
              if (!((n = n.nested[i]) instanceof u)) throw Error("path conflicts with non-namespace objects");
            } else n.add(n = new u(i));
          }

          return e && n.addJSON(e), n;
        }, u.prototype.resolveAll = function () {
          for (var t = this.nestedArray, e = 0; e < t.length;) {
            t[e] instanceof u ? t[e++].resolveAll() : t[e++].resolve();
          }

          return this.resolve();
        }, u.prototype.lookup = function (t, e, n) {
          if ("boolean" == typeof e ? (n = e, e = void 0) : e && !Array.isArray(e) && (e = [e]), l.isString(t) && t.length) {
            if ("." === t) return this.root;
            t = t.split(".");
          } else if (!t.length) return this;

          if ("" === t[0]) return this.root.lookup(t.slice(1), e);
          var i = this.get(t[0]);

          if (i) {
            if (1 === t.length) {
              if (!e || e.indexOf(i.constructor) > -1) return i;
            } else if (i instanceof u && (i = i.lookup(t.slice(1), e, !0))) return i;
          } else for (var o = 0; o < this.nestedArray.length; ++o) {
            if (this._nestedArray[o] instanceof u && (i = this._nestedArray[o].lookup(t, e, !0))) return i;
          }

          return null === this.parent || n ? null : this.parent.lookup(t, e);
        }, u.prototype.lookupType = function (t) {
          var e = this.lookup(t, [o]);
          if (!e) throw Error("no such type: " + t);
          return e;
        }, u.prototype.lookupEnum = function (t) {
          var e = this.lookup(t, [s]);
          if (!e) throw Error("no such Enum '" + t + "' in " + this);
          return e;
        }, u.prototype.lookupTypeOrEnum = function (t) {
          var e = this.lookup(t, [o, s]);
          if (!e) throw Error("no such Type or Enum '" + t + "' in " + this);
          return e;
        }, u.prototype.lookupService = function (t) {
          var e = this.lookup(t, [r]);
          if (!e) throw Error("no such Service '" + t + "' in " + this);
          return e;
        }, u._configure = function (t, e, n) {
          o = t, r = e, s = n;
        };
      }, function (t, e, n) {
        "use strict";

        var i = e,
            o = n(14),
            r = ["double", "float", "int32", "uint32", "sint32", "fixed32", "sfixed32", "int64", "uint64", "sint64", "fixed64", "sfixed64", "bool", "string", "bytes"];

        function s(t, e) {
          var n = 0,
              i = {};

          for (e |= 0; n < t.length;) {
            i[r[n + e]] = t[n++];
          }

          return i;
        }

        i.basic = s([1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2, 2]), i.defaults = s([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, !1, "", o.emptyArray, null]), i["long"] = s([0, 0, 0, 1, 1], 7), i.mapKey = s([0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2], 2), i.packed = s([1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0]);
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(0));

        var r = /*#__PURE__*/function (_o$default3) {
          _inherits(r, _o$default3);

          var _super4 = _createSuper(r);

          function r(t, e) {
            var _this16;

            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

            _classCallCheck(this, r);

            _this16 = _super4.call(this, "cloud-services-internal-error: " + t, e, i), _this16.code = n;
            return _this16;
          }

          _createClass(r, null, [{
            key: "fromPublicError",
            value: function fromPublicError(t, e) {
              var n = t.message,
                  _t$traceId = t.traceId,
                  i = _t$traceId === void 0 ? "" : _t$traceId,
                  _t$data = t.data,
                  o = _t$data === void 0 ? {} : _t$data,
                  _t$code = t.code,
                  s = _t$code === void 0 ? null : _t$code;
              return new r(n + " " + (i ? "Error Trace id: " + i + "." : ""), e, s, o);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r;
      }, function (t, e, n) {
        "use strict";

        var i = n(15),
            o = n(8),
            r = "[object Arguments]";

        var s = function s(t) {
          return Object(o.a)(t) && Object(i.a)(t) == r;
        },
            a = Object.prototype,
            c = a.hasOwnProperty,
            l = a.propertyIsEnumerable,
            d = s(function () {
          return arguments;
        }()) ? s : function (t) {
          return Object(o.a)(t) && c.call(t, "callee") && !l.call(t, "callee");
        };

        e.a = d;
      }, function (t, e, n) {
        var i = n(2),
            o = n(241);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        e.encode = function (t) {
          var e = "";

          for (var n in t) {
            t.hasOwnProperty(n) && (e.length && (e += "&"), e += encodeURIComponent(n) + "=" + encodeURIComponent(t[n]));
          }

          return e;
        }, e.decode = function (t) {
          for (var e = {}, n = t.split("&"), i = 0, o = n.length; i < o; i++) {
            var r = n[i].split("=");
            e[decodeURIComponent(r[0])] = decodeURIComponent(r[1]);
          }

          return e;
        };
      }, function (t, e) {
        t.exports = function (t, e) {
          var n = function n() {};

          n.prototype = e.prototype, t.prototype = new n(), t.prototype.constructor = t;
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = s;
        var i = n(37);
        ((s.prototype = Object.create(i.prototype)).constructor = s).className = "OneOf";
        var o = n(38),
            r = n(14);

        function s(t, e, n, o) {
          if (Array.isArray(e) || (n = e, e = void 0), i.call(this, t, n), void 0 !== e && !Array.isArray(e)) throw TypeError("fieldNames must be an Array");
          this.oneof = e || [], this.fieldsArray = [], this.comment = o;
        }

        function a(t) {
          if (t.parent) for (var e = 0; e < t.fieldsArray.length; ++e) {
            t.fieldsArray[e].parent || t.parent.add(t.fieldsArray[e]);
          }
        }

        s.fromJSON = function (t, e) {
          return new s(t, e.oneof, e.options, e.comment);
        }, s.prototype.toJSON = function (t) {
          var e = !!t && Boolean(t.keepComments);
          return r.toObject(["options", this.options, "oneof", this.oneof, "comment", e ? this.comment : void 0]);
        }, s.prototype.add = function (t) {
          if (!(t instanceof o)) throw TypeError("field must be a Field");
          return t.parent && t.parent !== this.parent && t.parent.remove(t), this.oneof.push(t.name), this.fieldsArray.push(t), t.partOf = this, a(this), this;
        }, s.prototype.remove = function (t) {
          if (!(t instanceof o)) throw TypeError("field must be a Field");
          var e = this.fieldsArray.indexOf(t);
          if (e < 0) throw Error(t + " is not a member of " + this);
          return this.fieldsArray.splice(e, 1), (e = this.oneof.indexOf(t.name)) > -1 && this.oneof.splice(e, 1), t.partOf = null, this;
        }, s.prototype.onAdd = function (t) {
          i.prototype.onAdd.call(this, t);

          for (var e = 0; e < this.oneof.length; ++e) {
            var n = t.get(this.oneof[e]);
            n && !n.partOf && (n.partOf = this, this.fieldsArray.push(n));
          }

          a(this);
        }, s.prototype.onRemove = function (t) {
          for (var e, n = 0; n < this.fieldsArray.length; ++n) {
            (e = this.fieldsArray[n]).parent && e.parent.remove(e);
          }

          i.prototype.onRemove.call(this, t);
        }, s.d = function () {
          for (var t = new Array(arguments.length), e = 0; e < arguments.length;) {
            t[e] = arguments[e++];
          }

          return function (e, n) {
            r.decorateType(e.constructor).add(new s(n, t)), Object.defineProperty(e, n, {
              get: r.oneOfGetter(t),
              set: r.oneOfSetter(t)
            });
          };
        };
      }, function (t, e, n) {
        "use strict";

        (function (t) {
          var n = "object" == typeof t && t && t.Object === Object && t;
          e.a = n;
        }).call(this, n(49));
      }, function (t, e, n) {
        "use strict";

        e.a = function (t) {
          return t;
        };
      }, function (t, e, n) {
        "use strict";

        var i = 9007199254740991;

        e.a = function (t) {
          return "number" == typeof t && t > -1 && t % 1 == 0 && t <= i;
        };
      }, function (t, e, n) {
        "use strict";

        (function (t) {
          var i = n(10),
              o = true && exports && !exports.nodeType && exports,
              r = o && "object" == typeof t && t && !t.nodeType && t,
              s = r && r.exports === o ? i.a.Buffer : void 0,
              a = s ? s.allocUnsafe : void 0;

          e.a = function (t, e) {
            if (e) return t.slice();
            var n = t.length,
                i = a ? a(n) : new t.constructor(n);
            return t.copy(i), i;
          };
        }).call(this, n(69)(t));
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';
      }, function (t, e, n) {
        "use strict";

        var i = n(61);

        var o = function o(t, e, n) {
          switch (n.length) {
            case 0:
              return t.call(e);

            case 1:
              return t.call(e, n[0]);

            case 2:
              return t.call(e, n[0], n[1]);

            case 3:
              return t.call(e, n[0], n[1], n[2]);
          }

          return t.apply(e, n);
        },
            r = Math.max;

        var s = function s(t, e, n) {
          return e = r(void 0 === e ? t.length - 1 : e, 0), function () {
            for (var i = arguments, s = -1, a = r(i.length - e, 0), c = Array(a); ++s < a;) {
              c[s] = i[e + s];
            }

            s = -1;

            for (var l = Array(e + 1); ++s < e;) {
              l[s] = i[s];
            }

            return l[e] = n(c), o(t, this, l);
          };
        };

        var a = function a(t) {
          return function () {
            return t;
          };
        },
            c = n(48),
            l = c.a ? function (t, e) {
          return Object(c.a)(t, "toString", {
            configurable: !0,
            enumerable: !1,
            value: a(e),
            writable: !0
          });
        } : i.a,
            d = 800,
            u = 16,
            h = Date.now;

        var f = function (t) {
          var e = 0,
              n = 0;
          return function () {
            var i = h(),
                o = u - (i - n);

            if (n = i, o > 0) {
              if (++e >= d) return arguments[0];
            } else e = 0;

            return t.apply(void 0, arguments);
          };
        }(l);

        var g = function g(t, e) {
          return f(s(t, e, i.a), t + "");
        },
            m = n(23),
            p = n(33),
            b = n(42),
            k = n(7);

        var _ = function _(t, e, n) {
          if (!Object(k.a)(n)) return !1;
          var i = typeof e;
          return !!("number" == i ? Object(p.a)(n) && Object(b.a)(e, n.length) : "string" == i && e in n) && Object(m.a)(n[e], t);
        };

        e.a = function (t) {
          return g(function (e, n) {
            var i = -1,
                o = n.length,
                r = o > 1 ? n[o - 1] : void 0,
                s = o > 2 ? n[2] : void 0;

            for (r = t.length > 3 && "function" == typeof r ? (o--, r) : void 0, s && _(n[0], n[1], s) && (r = o < 3 ? void 0 : r, o = 1), e = Object(e); ++i < o;) {
              var a = n[i];
              a && t(e, a, i, r);
            }

            return e;
          });
        };
      }, function (t, e, n) {
        "use strict";

        var i = function i(t, e) {
          for (var n = -1, i = Array(t); ++n < t;) {
            i[n] = e(n);
          }

          return i;
        },
            o = n(55),
            r = n(12),
            s = n(28),
            a = n(42),
            c = n(47),
            l = Object.prototype.hasOwnProperty;

        e.a = function (t, e) {
          var n = Object(r.a)(t),
              d = !n && Object(o.a)(t),
              u = !n && !d && Object(s.a)(t),
              h = !n && !d && !u && Object(c.a)(t),
              f = n || d || u || h,
              g = f ? i(t.length, String) : [],
              m = g.length;

          for (var p in t) {
            !e && !l.call(t, p) || f && ("length" == p || u && ("offset" == p || "parent" == p) || h && ("buffer" == p || "byteLength" == p || "byteOffset" == p) || Object(a.a)(p, m)) || g.push(p);
          }

          return g;
        };
      }, function (t, e) {
        t.exports = function (t) {
          if (!t.webpackPolyfill) {
            var e = Object.create(t);
            e.children || (e.children = []), Object.defineProperty(e, "loaded", {
              enumerable: !0,
              get: function get() {
                return e.l;
              }
            }), Object.defineProperty(e, "id", {
              enumerable: !0,
              get: function get() {
                return e.i;
              }
            }), Object.defineProperty(e, "exports", {
              enumerable: !0
            }), e.webpackPolyfill = 1;
          }

          return e;
        };
      }, function (t, e, n) {
        var i = n(2),
            o = n(242);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        var n,
            i,
            o = t.exports = {};

        function r() {
          throw new Error("setTimeout has not been defined");
        }

        function s() {
          throw new Error("clearTimeout has not been defined");
        }

        function a(t) {
          if (n === setTimeout) return setTimeout(t, 0);
          if ((n === r || !n) && setTimeout) return n = setTimeout, setTimeout(t, 0);

          try {
            return n(t, 0);
          } catch (e) {
            try {
              return n.call(null, t, 0);
            } catch (e) {
              return n.call(this, t, 0);
            }
          }
        }

        !function () {
          try {
            n = "function" == typeof setTimeout ? setTimeout : r;
          } catch (t) {
            n = r;
          }

          try {
            i = "function" == typeof clearTimeout ? clearTimeout : s;
          } catch (t) {
            i = s;
          }
        }();
        var c,
            l = [],
            d = !1,
            u = -1;

        function h() {
          d && c && (d = !1, c.length ? l = c.concat(l) : u = -1, l.length && f());
        }

        function f() {
          if (!d) {
            var t = a(h);
            d = !0;

            for (var e = l.length; e;) {
              for (c = l, l = []; ++u < e;) {
                c && c[u].run();
              }

              u = -1, e = l.length;
            }

            c = null, d = !1, function (t) {
              if (i === clearTimeout) return clearTimeout(t);
              if ((i === s || !i) && clearTimeout) return i = clearTimeout, clearTimeout(t);

              try {
                i(t);
              } catch (e) {
                try {
                  return i.call(null, t);
                } catch (e) {
                  return i.call(this, t);
                }
              }
            }(t);
          }
        }

        function g(t, e) {
          this.fun = t, this.array = e;
        }

        function m() {}

        o.nextTick = function (t) {
          var e = new Array(arguments.length - 1);
          if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) {
            e[n - 1] = arguments[n];
          }
          l.push(new g(t, e)), 1 !== l.length || d || a(f);
        }, g.prototype.run = function () {
          this.fun.apply(null, this.array);
        }, o.title = "browser", o.browser = !0, o.env = {}, o.argv = [], o.version = "", o.versions = {}, o.on = m, o.addListener = m, o.once = m, o.off = m, o.removeListener = m, o.removeAllListeners = m, o.emit = m, o.prependListener = m, o.prependOnceListener = m, o.listeners = function (t) {
          return [];
        }, o.binding = function (t) {
          throw new Error("process.binding is not supported");
        }, o.cwd = function () {
          return "/";
        }, o.chdir = function (t) {
          throw new Error("process.chdir is not supported");
        }, o.umask = function () {
          return 0;
        };
      }, function (t, e, n) {
        var i = n(24)("socket.io-parser"),
            o = n(35),
            r = n(285),
            s = n(50),
            a = n(90);

        function c() {}

        e.protocol = 4, e.types = ["CONNECT", "DISCONNECT", "EVENT", "ACK", "ERROR", "BINARY_EVENT", "BINARY_ACK"], e.CONNECT = 0, e.DISCONNECT = 1, e.EVENT = 2, e.ACK = 3, e.ERROR = 4, e.BINARY_EVENT = 5, e.BINARY_ACK = 6, e.Encoder = c, e.Decoder = u;
        var l = e.ERROR + '"encode error"';

        function d(t) {
          var n = "" + t.type;

          if (e.BINARY_EVENT !== t.type && e.BINARY_ACK !== t.type || (n += t.attachments + "-"), t.nsp && "/" !== t.nsp && (n += t.nsp + ","), null != t.id && (n += t.id), null != t.data) {
            var o = function (t) {
              try {
                return JSON.stringify(t);
              } catch (t) {
                return !1;
              }
            }(t.data);

            if (!1 === o) return l;
            n += o;
          }

          return i("encoded %j as %s", t, n), n;
        }

        function u() {
          this.reconstructor = null;
        }

        function h(t) {
          this.reconPack = t, this.buffers = [];
        }

        function f(t) {
          return {
            type: e.ERROR,
            data: "parser error: " + t
          };
        }

        c.prototype.encode = function (t, n) {
          (i("encoding packet %j", t), e.BINARY_EVENT === t.type || e.BINARY_ACK === t.type) ? function (t, e) {
            r.removeBlobs(t, function (t) {
              var n = r.deconstructPacket(t),
                  i = d(n.packet),
                  o = n.buffers;
              o.unshift(i), e(o);
            });
          }(t, n) : n([d(t)]);
        }, o(u.prototype), u.prototype.add = function (t) {
          var n;
          if ("string" == typeof t) n = function (t) {
            var n = 0,
                o = {
              type: Number(t.charAt(0))
            };
            if (null == e.types[o.type]) return f("unknown packet type " + o.type);

            if (e.BINARY_EVENT === o.type || e.BINARY_ACK === o.type) {
              for (var r = n + 1; "-" !== t.charAt(++n) && n != t.length;) {
                ;
              }

              var a = t.substring(r, n);
              if (a != Number(a) || "-" !== t.charAt(n)) throw new Error("Illegal attachments");
              o.attachments = Number(a);
            }

            if ("/" === t.charAt(n + 1)) {
              for (var r = n + 1; ++n;) {
                var c = t.charAt(n);
                if ("," === c) break;
                if (n === t.length) break;
              }

              o.nsp = t.substring(r, n);
            } else o.nsp = "/";

            var l = t.charAt(n + 1);

            if ("" !== l && Number(l) == l) {
              for (var r = n + 1; ++n;) {
                var c = t.charAt(n);

                if (null == c || Number(c) != c) {
                  --n;
                  break;
                }

                if (n === t.length) break;
              }

              o.id = Number(t.substring(r, n + 1));
            }

            if (t.charAt(++n)) {
              var d = function (t) {
                try {
                  return JSON.parse(t);
                } catch (t) {
                  return !1;
                }
              }(t.substr(n)),
                  u = !1 !== d && (o.type === e.ERROR || s(d));

              if (!u) return f("invalid payload");
              o.data = d;
            }

            return i("decoded %s as %j", t, o), o;
          }(t), e.BINARY_EVENT === n.type || e.BINARY_ACK === n.type ? (this.reconstructor = new h(n), 0 === this.reconstructor.reconPack.attachments && this.emit("decoded", n)) : this.emit("decoded", n);else {
            if (!a(t) && !t.base64) throw new Error("Unknown type: " + t);
            if (!this.reconstructor) throw new Error("got binary data when not reconstructing a packet");
            (n = this.reconstructor.takeBinaryData(t)) && (this.reconstructor = null, this.emit("decoded", n));
          }
        }, u.prototype.destroy = function () {
          this.reconstructor && this.reconstructor.finishedReconstruction();
        }, h.prototype.takeBinaryData = function (t) {
          if (this.buffers.push(t), this.buffers.length === this.reconPack.attachments) {
            var e = r.reconstructPacket(this.reconPack, this.buffers);
            return this.finishedReconstruction(), e;
          }

          return null;
        }, h.prototype.finishedReconstruction = function () {
          this.reconPack = null, this.buffers = [];
        };
      }, function (t, e, n) {
        var i = n(291),
            o = n(74);

        t.exports = function (t) {
          var e = t.xdomain,
              n = t.xscheme,
              r = t.enablesXDR;

          try {
            if ("undefined" != typeof XMLHttpRequest && (!e || i)) return new XMLHttpRequest();
          } catch (t) {}

          try {
            if ("undefined" != typeof XDomainRequest && !n && r) return new XDomainRequest();
          } catch (t) {}

          if (!e) try {
            return new o[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
          } catch (t) {}
        };
      }, function (t, e) {
        t.exports = "undefined" != typeof self ? self : "undefined" != typeof window ? window : Function("return this")();
      }, function (t, e, n) {
        var i = n(36),
            o = n(35);

        function r(t) {
          this.path = t.path, this.hostname = t.hostname, this.port = t.port, this.secure = t.secure, this.query = t.query, this.timestampParam = t.timestampParam, this.timestampRequests = t.timestampRequests, this.readyState = "", this.agent = t.agent || !1, this.socket = t.socket, this.enablesXDR = t.enablesXDR, this.withCredentials = t.withCredentials, this.pfx = t.pfx, this.key = t.key, this.passphrase = t.passphrase, this.cert = t.cert, this.ca = t.ca, this.ciphers = t.ciphers, this.rejectUnauthorized = t.rejectUnauthorized, this.forceNode = t.forceNode, this.isReactNative = t.isReactNative, this.extraHeaders = t.extraHeaders, this.localAddress = t.localAddress;
        }

        t.exports = r, o(r.prototype), r.prototype.onError = function (t, e) {
          var n = new Error(t);
          return n.type = "TransportError", n.description = e, this.emit("error", n), this;
        }, r.prototype.open = function () {
          return "closed" !== this.readyState && "" !== this.readyState || (this.readyState = "opening", this.doOpen()), this;
        }, r.prototype.close = function () {
          return "opening" !== this.readyState && "open" !== this.readyState || (this.doClose(), this.onClose()), this;
        }, r.prototype.send = function (t) {
          if ("open" !== this.readyState) throw new Error("Transport not open");
          this.write(t);
        }, r.prototype.onOpen = function () {
          this.readyState = "open", this.writable = !0, this.emit("open");
        }, r.prototype.onData = function (t) {
          var e = i.decodePacket(t, this.socket.binaryType);
          this.onPacket(e);
        }, r.prototype.onPacket = function (t) {
          this.emit("packet", t);
        }, r.prototype.onClose = function () {
          this.readyState = "closed", this.emit("close");
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = d;
        var i,
            o = n(25),
            r = o.LongBits,
            s = o.base64,
            a = o.utf8;

        function c(t, e, n) {
          this.fn = t, this.len = e, this.next = void 0, this.val = n;
        }

        function l() {}

        function d() {
          this.len = 0, this.head = new c(l, 0, 0), this.tail = this.head, this.states = null;
        }

        var u = function u() {
          return o.Buffer ? function () {
            return (d.create = function () {
              return new i();
            })();
          } : function () {
            return new d();
          };
        };

        function h(t, e, n) {
          e[n] = 255 & t;
        }

        function f(t, e) {
          this.len = t, this.next = void 0, this.val = e;
        }

        function g(t, e, n) {
          for (; t.hi;) {
            e[n++] = 127 & t.lo | 128, t.lo = (t.lo >>> 7 | t.hi << 25) >>> 0, t.hi >>>= 7;
          }

          for (; t.lo > 127;) {
            e[n++] = 127 & t.lo | 128, t.lo = t.lo >>> 7;
          }

          e[n++] = t.lo;
        }

        function m(t, e, n) {
          e[n] = 255 & t, e[n + 1] = t >>> 8 & 255, e[n + 2] = t >>> 16 & 255, e[n + 3] = t >>> 24;
        }

        d.create = u(), d.alloc = function (t) {
          return new o.Array(t);
        }, o.Array !== Array && (d.alloc = o.pool(d.alloc, o.Array.prototype.subarray)), d.prototype._push = function (t, e, n) {
          return this.tail = this.tail.next = new c(t, e, n), this.len += e, this;
        }, f.prototype = Object.create(c.prototype), f.prototype.fn = function (t, e, n) {
          for (; t > 127;) {
            e[n++] = 127 & t | 128, t >>>= 7;
          }

          e[n] = t;
        }, d.prototype.uint32 = function (t) {
          return this.len += (this.tail = this.tail.next = new f((t >>>= 0) < 128 ? 1 : t < 16384 ? 2 : t < 2097152 ? 3 : t < 268435456 ? 4 : 5, t)).len, this;
        }, d.prototype.int32 = function (t) {
          return t < 0 ? this._push(g, 10, r.fromNumber(t)) : this.uint32(t);
        }, d.prototype.sint32 = function (t) {
          return this.uint32((t << 1 ^ t >> 31) >>> 0);
        }, d.prototype.uint64 = function (t) {
          var e = r.from(t);
          return this._push(g, e.length(), e);
        }, d.prototype.int64 = d.prototype.uint64, d.prototype.sint64 = function (t) {
          var e = r.from(t).zzEncode();
          return this._push(g, e.length(), e);
        }, d.prototype.bool = function (t) {
          return this._push(h, 1, t ? 1 : 0);
        }, d.prototype.fixed32 = function (t) {
          return this._push(m, 4, t >>> 0);
        }, d.prototype.sfixed32 = d.prototype.fixed32, d.prototype.fixed64 = function (t) {
          var e = r.from(t);
          return this._push(m, 4, e.lo)._push(m, 4, e.hi);
        }, d.prototype.sfixed64 = d.prototype.fixed64, d.prototype["float"] = function (t) {
          return this._push(o["float"].writeFloatLE, 4, t);
        }, d.prototype["double"] = function (t) {
          return this._push(o["float"].writeDoubleLE, 8, t);
        };
        var p = o.Array.prototype.set ? function (t, e, n) {
          e.set(t, n);
        } : function (t, e, n) {
          for (var i = 0; i < t.length; ++i) {
            e[n + i] = t[i];
          }
        };
        d.prototype.bytes = function (t) {
          var e = t.length >>> 0;
          if (!e) return this._push(h, 1, 0);

          if (o.isString(t)) {
            var n = d.alloc(e = s.length(t));
            s.decode(t, n, 0), t = n;
          }

          return this.uint32(e)._push(p, e, t);
        }, d.prototype.string = function (t) {
          var e = a.length(t);
          return e ? this.uint32(e)._push(a.write, e, t) : this._push(h, 1, 0);
        }, d.prototype.fork = function () {
          return this.states = new function (t) {
            this.head = t.head, this.tail = t.tail, this.len = t.len, this.next = t.states;
          }(this), this.head = this.tail = new c(l, 0, 0), this.len = 0, this;
        }, d.prototype.reset = function () {
          return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new c(l, 0, 0), this.len = 0), this;
        }, d.prototype.ldelim = function () {
          var t = this.head,
              e = this.tail,
              n = this.len;
          return this.reset().uint32(n), n && (this.tail.next = t.next, this.tail = e, this.len += n), this;
        }, d.prototype.finish = function () {
          for (var t = this.head.next, e = this.constructor.alloc(this.len), n = 0; t;) {
            t.fn(t.val, e, n), n += t.len, t = t.next;
          }

          return e;
        }, d._configure = function (t) {
          i = t, d.create = u(), i._configure();
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = c;
        var i,
            o = n(25),
            r = o.LongBits,
            s = o.utf8;

        function a(t, e) {
          return RangeError("index out of range: " + t.pos + " + " + (e || 1) + " > " + t.len);
        }

        function c(t) {
          this.buf = t, this.pos = 0, this.len = t.length;
        }

        var l = "undefined" != typeof Uint8Array ? function (t) {
          if (t instanceof Uint8Array || Array.isArray(t)) return new c(t);
          throw Error("illegal buffer");
        } : function (t) {
          if (Array.isArray(t)) return new c(t);
          throw Error("illegal buffer");
        },
            d = function d() {
          return o.Buffer ? function (t) {
            return (c.create = function (t) {
              return o.Buffer.isBuffer(t) ? new i(t) : l(t);
            })(t);
          } : l;
        };

        function u() {
          var t = new r(0, 0),
              e = 0;

          if (!(this.len - this.pos > 4)) {
            for (; e < 3; ++e) {
              if (this.pos >= this.len) throw a(this);
              if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 7 * e) >>> 0, this.buf[this.pos++] < 128) return t;
            }

            return t.lo = (t.lo | (127 & this.buf[this.pos++]) << 7 * e) >>> 0, t;
          }

          for (; e < 4; ++e) {
            if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 7 * e) >>> 0, this.buf[this.pos++] < 128) return t;
          }

          if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 28) >>> 0, t.hi = (t.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128) return t;

          if (e = 0, this.len - this.pos > 4) {
            for (; e < 5; ++e) {
              if (t.hi = (t.hi | (127 & this.buf[this.pos]) << 7 * e + 3) >>> 0, this.buf[this.pos++] < 128) return t;
            }
          } else for (; e < 5; ++e) {
            if (this.pos >= this.len) throw a(this);
            if (t.hi = (t.hi | (127 & this.buf[this.pos]) << 7 * e + 3) >>> 0, this.buf[this.pos++] < 128) return t;
          }

          throw Error("invalid varint encoding");
        }

        function h(t, e) {
          return (t[e - 4] | t[e - 3] << 8 | t[e - 2] << 16 | t[e - 1] << 24) >>> 0;
        }

        function f() {
          if (this.pos + 8 > this.len) throw a(this, 8);
          return new r(h(this.buf, this.pos += 4), h(this.buf, this.pos += 4));
        }

        c.create = d(), c.prototype._slice = o.Array.prototype.subarray || o.Array.prototype.slice, c.prototype.uint32 = function () {
          var t = 4294967295;
          return function () {
            if (t = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return t;
            if (t = (t | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return t;
            if (t = (t | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return t;
            if (t = (t | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return t;
            if (t = (t | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return t;
            if ((this.pos += 5) > this.len) throw this.pos = this.len, a(this, 10);
            return t;
          };
        }(), c.prototype.int32 = function () {
          return 0 | this.uint32();
        }, c.prototype.sint32 = function () {
          var t = this.uint32();
          return t >>> 1 ^ -(1 & t) | 0;
        }, c.prototype.bool = function () {
          return 0 !== this.uint32();
        }, c.prototype.fixed32 = function () {
          if (this.pos + 4 > this.len) throw a(this, 4);
          return h(this.buf, this.pos += 4);
        }, c.prototype.sfixed32 = function () {
          if (this.pos + 4 > this.len) throw a(this, 4);
          return 0 | h(this.buf, this.pos += 4);
        }, c.prototype["float"] = function () {
          if (this.pos + 4 > this.len) throw a(this, 4);
          var t = o["float"].readFloatLE(this.buf, this.pos);
          return this.pos += 4, t;
        }, c.prototype["double"] = function () {
          if (this.pos + 8 > this.len) throw a(this, 4);
          var t = o["float"].readDoubleLE(this.buf, this.pos);
          return this.pos += 8, t;
        }, c.prototype.bytes = function () {
          var t = this.uint32(),
              e = this.pos,
              n = this.pos + t;
          if (n > this.len) throw a(this, t);
          return this.pos += t, Array.isArray(this.buf) ? this.buf.slice(e, n) : e === n ? new this.buf.constructor(0) : this._slice.call(this.buf, e, n);
        }, c.prototype.string = function () {
          var t = this.bytes();
          return s.read(t, 0, t.length);
        }, c.prototype.skip = function (t) {
          if ("number" == typeof t) {
            if (this.pos + t > this.len) throw a(this, t);
            this.pos += t;
          } else do {
            if (this.pos >= this.len) throw a(this);
          } while (128 & this.buf[this.pos++]);

          return this;
        }, c.prototype.skipType = function (t) {
          switch (t) {
            case 0:
              this.skip();
              break;

            case 1:
              this.skip(8);
              break;

            case 2:
              this.skip(this.uint32());
              break;

            case 3:
              for (; 4 != (t = 7 & this.uint32());) {
                this.skipType(t);
              }

              break;

            case 5:
              this.skip(4);
              break;

            default:
              throw Error("invalid wire type " + t + " at offset " + this.pos);
          }

          return this;
        }, c._configure = function (t) {
          i = t, c.create = d(), i._configure();
          var e = o.Long ? "toLong" : "toNumber";
          o.merge(c.prototype, {
            int64: function int64() {
              return u.call(this)[e](!1);
            },
            uint64: function uint64() {
              return u.call(this)[e](!0);
            },
            sint64: function sint64() {
              return u.call(this).zzDecode()[e](!1);
            },
            fixed64: function fixed64() {
              return f.call(this)[e](!0);
            },
            sfixed64: function sfixed64() {
              return f.call(this)[e](!1);
            }
          });
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = o;
        var i = n(25);

        function o(t) {
          if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) {
            this[e[n]] = t[e[n]];
          }
        }

        o.create = function (t) {
          return this.$type.create(t);
        }, o.encode = function (t, e) {
          return this.$type.encode(t, e);
        }, o.encodeDelimited = function (t, e) {
          return this.$type.encodeDelimited(t, e);
        }, o.decode = function (t) {
          return this.$type.decode(t);
        }, o.decodeDelimited = function (t) {
          return this.$type.decodeDelimited(t);
        }, o.verify = function (t) {
          return this.$type.verify(t);
        }, o.fromObject = function (t) {
          return this.$type.fromObject(t);
        }, o.toObject = function (t, e) {
          return this.$type.toObject(t, e);
        }, o.prototype.toJSON = function () {
          return this.$type.toObject(this, i.toJSONOptions);
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31));

        var r = /*#__PURE__*/function (_o$default4) {
          _inherits(r, _o$default4);

          var _super5 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super5.apply(this, arguments);
          }

          _createClass(r, null, [{
            key: "toJSON",
            value: function toJSON(t) {
              var e;
              return Object.assign(Object.assign({}, t), {
                createdAt: null === (e = t.createdAt) || void 0 === e ? void 0 : e.toISOString(),
                attributes: t.attributes ? JSON.stringify(t.attributes) : null
              });
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t) {
              return Object.assign(Object.assign({}, t), {
                createdAt: new Date(t.createdAt),
                attributes: t.attributes ? JSON.parse(t.attributes) : null
              });
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "CommentDescriptor", r.DESCRIPTOR = {
          fields: {
            commentId: {
              id: 1,
              type: "string"
            },
            commentThreadId: {
              id: 2,
              type: "string"
            },
            userId: {
              id: 3,
              type: "string"
            },
            content: {
              id: 4,
              type: "string"
            },
            documentId: {
              id: 5,
              type: "string"
            },
            createdAt: {
              id: 6,
              type: "string"
            },
            attributes: {
              id: 7,
              type: "string"
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31)),
            r = i(n(79));

        var s = /*#__PURE__*/function (_o$default5) {
          _inherits(s, _o$default5);

          var _super6 = _createSuper(s);

          function s() {
            _classCallCheck(this, s);

            return _super6.apply(this, arguments);
          }

          _createClass(s, null, [{
            key: "toJSON",
            value: function toJSON(t) {
              var e;
              return Object.assign(Object.assign({}, t), {
                comments: null === (e = t.comments) || void 0 === e ? void 0 : e.map(r["default"].toJSON)
              });
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t) {
              var e;
              return Object.assign(Object.assign({}, t), {
                comments: null === (e = t.comments) || void 0 === e ? void 0 : e.map(r["default"].fromJSON)
              });
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.DESCRIPTOR_NAME = "CommentsThreadDescriptor", s.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            comments: {
              type: "CommentDescriptor",
              rule: "repeated",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31));

        var r = /*#__PURE__*/function (_o$default6) {
          _inherits(r, _o$default6);

          var _super7 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super7.apply(this, arguments);
          }

          _createClass(r, null, [{
            key: "toJSON",
            value: function toJSON(t) {
              var e;
              return Object.assign(Object.assign({}, t), {
                data: t.data ? JSON.stringify(t.data) : t.data,
                attributes: t.attributes ? JSON.stringify(t.attributes) : t.attributes,
                createdAt: null === (e = t.createdAt) || void 0 === e ? void 0 : e.toISOString()
              });
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t) {
              return Object.assign(Object.assign({}, t), {
                data: t.data ? JSON.parse(t.data) : t.data,
                attributes: t.attributes ? JSON.parse(t.attributes) : t.attributes,
                createdAt: t.createdAt ? new Date(t.createdAt) : void 0
              });
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "SuggestionDescriptor", r.DESCRIPTOR = {
          fields: {
            id: {
              id: 1,
              type: "string"
            },
            authorId: {
              id: 2,
              type: "string"
            },
            type: {
              id: 3,
              type: "string"
            },
            createdAt: {
              id: 4,
              type: "string"
            },
            data: {
              id: 5,
              type: "string"
            },
            hasComments: {
              id: 6,
              type: "bool"
            },
            state: {
              id: 7,
              type: "string"
            },
            attributes: {
              id: 8,
              type: "string"
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(357));
        e._SERVICE = 3, e["default"] = /*#__PURE__*/function () {
          function _class3() {
            _classCallCheck(this, _class3);
          }

          _createClass(_class3, null, [{
            key: "getConnectedSessions",
            value: function () {
              var _getConnectedSessions = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(t, e, n) {
                var i;
                return regeneratorRuntime.wrap(function _callee11$(_context11) {
                  while (1) {
                    switch (_context11.prev = _context11.next) {
                      case 0:
                        i = new o["default"](e, n);
                        _context11.next = 3;
                        return i.connect(t);

                      case 3:
                        return _context11.abrupt("return", i);

                      case 4:
                      case "end":
                        return _context11.stop();
                    }
                  }
                }, _callee11);
              }));

              function getConnectedSessions(_x14, _x15, _x16) {
                return _getConnectedSessions.apply(this, arguments);
              }

              return getConnectedSessions;
            }()
          }]);

          return _class3;
        }();
      }, function (t, e, n) {
        "use strict";

        Object.defineProperty(e, "__esModule", {
          value: !0
        }), e["default"] = /*#__PURE__*/function () {
          function _class4() {
            _classCallCheck(this, _class4);
          }

          _createClass(_class4, null, [{
            key: "prepareMetadataForOperations",
            value: function prepareMetadataForOperations(t, e) {
              if (!(t && t.length && e && e.length)) return [];
              var n = [];
              var i = 0;

              var _iterator11 = _createForOfIteratorHelper(t),
                  _step11;

              try {
                for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
                  var _o6 = _step11.value;

                  if (0 !== _o6) {
                    if (!e[i]) throw new Error("Missing metadata for a operation");
                    n.push(e[i]), i++;
                  } else n.push(n[n.length - 1]);
                }
              } catch (err) {
                _iterator11.e(err);
              } finally {
                _iterator11.f();
              }

              return n;
            }
          }, {
            key: "removeUnnecessaryMetadata",
            value: function removeUnnecessaryMetadata(t, e) {
              if (!(t && t.length && e && e.length)) return [];
              var n = [];

              for (var i = 0; i < t.length; i++) {
                if (0 !== t[i]) {
                  if (!e[i]) throw new Error("Missing metadata for a operation");
                  n.push(e[i]);
                }
              }

              return n;
            }
          }]);

          return _class4;
        }();
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(54));

        e["default"] = /*#__PURE__*/function (_o$default7) {
          _inherits(_class5, _o$default7);

          var _super8 = _createSuper(_class5);

          function _class5(t, e) {
            _classCallCheck(this, _class5);

            return _super8.call(this, t + " Service is not connected.", e);
          }

          return _class5;
        }(o["default"]);
      }, function (t, e, n) {
        "use strict";

        t.exports = n(309);
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';
      }, function (t, e, n) {
        var i = n(2),
            o = n(236);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        var n = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
            i = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];

        t.exports = function (t) {
          var e = t,
              o = t.indexOf("["),
              r = t.indexOf("]");
          -1 != o && -1 != r && (t = t.substring(0, o) + t.substring(o, r).replace(/:/g, ";") + t.substring(r, t.length));

          for (var s = n.exec(t || ""), a = {}, c = 14; c--;) {
            a[i[c]] = s[c] || "";
          }

          return -1 != o && -1 != r && (a.source = e, a.host = a.host.substring(1, a.host.length - 1).replace(/;/g, ":"), a.authority = a.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), a.ipv6uri = !0), a.pathNames = function (t, e) {
            var n = e.replace(/\/{2,9}/g, "/").split("/");
            "/" != e.substr(0, 1) && 0 !== e.length || n.splice(0, 1);
            "/" == e.substr(e.length - 1, 1) && n.splice(n.length - 1, 1);
            return n;
          }(0, a.path), a.queryKey = function (t, e) {
            var n = {};
            return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function (t, e, i) {
              e && (n[e] = i);
            }), n;
          }(0, a.query), a;
        };
      }, function (t, e, n) {
        (function (e) {
          t.exports = function (t) {
            return n && e.isBuffer(t) || i && (t instanceof ArrayBuffer || o(t));
          };

          var n = "function" == typeof e && "function" == typeof e.isBuffer,
              i = "function" == typeof ArrayBuffer,
              o = function o(t) {
            return "function" == typeof ArrayBuffer.isView ? ArrayBuffer.isView(t) : t.buffer instanceof ArrayBuffer;
          };
        }).call(this, n(51).Buffer);
      }, function (t, e, n) {
        var i = n(289),
            o = n(97),
            r = n(35),
            s = n(72),
            a = n(98),
            c = n(99),
            l = n(24)("socket.io-client:manager"),
            d = n(96),
            u = n(303),
            h = Object.prototype.hasOwnProperty;

        function f(t, e) {
          if (!(this instanceof f)) return new f(t, e);
          t && "object" == typeof t && (e = t, t = void 0), (e = e || {}).path = e.path || "/socket.io", this.nsps = {}, this.subs = [], this.opts = e, this.reconnection(!1 !== e.reconnection), this.reconnectionAttempts(e.reconnectionAttempts || 1 / 0), this.reconnectionDelay(e.reconnectionDelay || 1e3), this.reconnectionDelayMax(e.reconnectionDelayMax || 5e3), this.randomizationFactor(e.randomizationFactor || .5), this.backoff = new u({
            min: this.reconnectionDelay(),
            max: this.reconnectionDelayMax(),
            jitter: this.randomizationFactor()
          }), this.timeout(null == e.timeout ? 2e4 : e.timeout), this.readyState = "closed", this.uri = t, this.connecting = [], this.lastPing = null, this.encoding = !1, this.packetBuffer = [];
          var n = e.parser || s;
          this.encoder = new n.Encoder(), this.decoder = new n.Decoder(), this.autoConnect = !1 !== e.autoConnect, this.autoConnect && this.open();
        }

        t.exports = f, f.prototype.emitAll = function () {
          for (var t in this.emit.apply(this, arguments), this.nsps) {
            h.call(this.nsps, t) && this.nsps[t].emit.apply(this.nsps[t], arguments);
          }
        }, f.prototype.updateSocketIds = function () {
          for (var t in this.nsps) {
            h.call(this.nsps, t) && (this.nsps[t].id = this.generateId(t));
          }
        }, f.prototype.generateId = function (t) {
          return ("/" === t ? "" : t + "#") + this.engine.id;
        }, r(f.prototype), f.prototype.reconnection = function (t) {
          return arguments.length ? (this._reconnection = !!t, this) : this._reconnection;
        }, f.prototype.reconnectionAttempts = function (t) {
          return arguments.length ? (this._reconnectionAttempts = t, this) : this._reconnectionAttempts;
        }, f.prototype.reconnectionDelay = function (t) {
          return arguments.length ? (this._reconnectionDelay = t, this.backoff && this.backoff.setMin(t), this) : this._reconnectionDelay;
        }, f.prototype.randomizationFactor = function (t) {
          return arguments.length ? (this._randomizationFactor = t, this.backoff && this.backoff.setJitter(t), this) : this._randomizationFactor;
        }, f.prototype.reconnectionDelayMax = function (t) {
          return arguments.length ? (this._reconnectionDelayMax = t, this.backoff && this.backoff.setMax(t), this) : this._reconnectionDelayMax;
        }, f.prototype.timeout = function (t) {
          return arguments.length ? (this._timeout = t, this) : this._timeout;
        }, f.prototype.maybeReconnectOnOpen = function () {
          !this.reconnecting && this._reconnection && 0 === this.backoff.attempts && this.reconnect();
        }, f.prototype.open = f.prototype.connect = function (t, e) {
          if (l("readyState %s", this.readyState), ~this.readyState.indexOf("open")) return this;
          l("opening %s", this.uri), this.engine = i(this.uri, this.opts);
          var n = this.engine,
              o = this;
          this.readyState = "opening", this.skipReconnect = !1;
          var r = a(n, "open", function () {
            o.onopen(), t && t();
          }),
              s = a(n, "error", function (e) {
            if (l("connect_error"), o.cleanup(), o.readyState = "closed", o.emitAll("connect_error", e), t) {
              var n = new Error("Connection error");
              n.data = e, t(n);
            } else o.maybeReconnectOnOpen();
          });

          if (!1 !== this._timeout) {
            var c = this._timeout;
            l("connect attempt will timeout after %d", c), 0 === c && r.destroy();
            var d = setTimeout(function () {
              l("connect attempt timed out after %d", c), r.destroy(), n.close(), n.emit("error", "timeout"), o.emitAll("connect_timeout", c);
            }, c);
            this.subs.push({
              destroy: function destroy() {
                clearTimeout(d);
              }
            });
          }

          return this.subs.push(r), this.subs.push(s), this;
        }, f.prototype.onopen = function () {
          l("open"), this.cleanup(), this.readyState = "open", this.emit("open");
          var t = this.engine;
          this.subs.push(a(t, "data", c(this, "ondata"))), this.subs.push(a(t, "ping", c(this, "onping"))), this.subs.push(a(t, "pong", c(this, "onpong"))), this.subs.push(a(t, "error", c(this, "onerror"))), this.subs.push(a(t, "close", c(this, "onclose"))), this.subs.push(a(this.decoder, "decoded", c(this, "ondecoded")));
        }, f.prototype.onping = function () {
          this.lastPing = new Date(), this.emitAll("ping");
        }, f.prototype.onpong = function () {
          this.emitAll("pong", new Date() - this.lastPing);
        }, f.prototype.ondata = function (t) {
          this.decoder.add(t);
        }, f.prototype.ondecoded = function (t) {
          this.emit("packet", t);
        }, f.prototype.onerror = function (t) {
          l("error", t), this.emitAll("error", t);
        }, f.prototype.socket = function (t, e) {
          var n = this.nsps[t];

          if (!n) {
            n = new o(this, t, e), this.nsps[t] = n;
            var i = this;
            n.on("connecting", r), n.on("connect", function () {
              n.id = i.generateId(t);
            }), this.autoConnect && r();
          }

          function r() {
            ~d(i.connecting, n) || i.connecting.push(n);
          }

          return n;
        }, f.prototype.destroy = function (t) {
          var e = d(this.connecting, t);
          ~e && this.connecting.splice(e, 1), this.connecting.length || this.close();
        }, f.prototype.packet = function (t) {
          l("writing packet %j", t);
          var e = this;
          t.query && 0 === t.type && (t.nsp += "?" + t.query), e.encoding ? e.packetBuffer.push(t) : (e.encoding = !0, this.encoder.encode(t, function (n) {
            for (var i = 0; i < n.length; i++) {
              e.engine.write(n[i], t.options);
            }

            e.encoding = !1, e.processPacketQueue();
          }));
        }, f.prototype.processPacketQueue = function () {
          if (this.packetBuffer.length > 0 && !this.encoding) {
            var t = this.packetBuffer.shift();
            this.packet(t);
          }
        }, f.prototype.cleanup = function () {
          l("cleanup");

          for (var t = this.subs.length, e = 0; e < t; e++) {
            this.subs.shift().destroy();
          }

          this.packetBuffer = [], this.encoding = !1, this.lastPing = null, this.decoder.destroy();
        }, f.prototype.close = f.prototype.disconnect = function () {
          l("disconnect"), this.skipReconnect = !0, this.reconnecting = !1, "opening" === this.readyState && this.cleanup(), this.backoff.reset(), this.readyState = "closed", this.engine && this.engine.close();
        }, f.prototype.onclose = function (t) {
          l("onclose"), this.cleanup(), this.backoff.reset(), this.readyState = "closed", this.emit("close", t), this._reconnection && !this.skipReconnect && this.reconnect();
        }, f.prototype.reconnect = function () {
          if (this.reconnecting || this.skipReconnect) return this;
          var t = this;
          if (this.backoff.attempts >= this._reconnectionAttempts) l("reconnect failed"), this.backoff.reset(), this.emitAll("reconnect_failed"), this.reconnecting = !1;else {
            var e = this.backoff.duration();
            l("will wait %dms before reconnect attempt", e), this.reconnecting = !0;
            var n = setTimeout(function () {
              t.skipReconnect || (l("attempting reconnect"), t.emitAll("reconnect_attempt", t.backoff.attempts), t.emitAll("reconnecting", t.backoff.attempts), t.skipReconnect || t.open(function (e) {
                e ? (l("reconnect attempt error"), t.reconnecting = !1, t.reconnect(), t.emitAll("reconnect_error", e.data)) : (l("reconnect success"), t.onreconnect());
              }));
            }, e);
            this.subs.push({
              destroy: function destroy() {
                clearTimeout(n);
              }
            });
          }
        }, f.prototype.onreconnect = function () {
          var t = this.backoff.attempts;
          this.reconnecting = !1, this.backoff.reset(), this.updateSocketIds(), this.emitAll("reconnect", t);
        };
      }, function (t, e, n) {
        var i = n(73),
            o = n(292),
            r = n(299),
            s = n(300);
        e.polling = function (t) {
          var e = !1,
              n = !1,
              s = !1 !== t.jsonp;

          if ("undefined" != typeof location) {
            var a = "https:" === location.protocol,
                c = location.port;
            c || (c = a ? 443 : 80), e = t.hostname !== location.hostname || c !== t.port, n = t.secure !== a;
          }

          if (t.xdomain = e, t.xscheme = n, "open" in new i(t) && !t.forceJSONP) return new o(t);
          if (!s) throw new Error("JSONP disabled");
          return new r(t);
        }, e.websocket = s;
      }, function (t, e, n) {
        var i = n(75),
            o = n(57),
            r = n(36),
            s = n(58),
            a = n(95),
            c = n(24)("engine.io-client:polling");
        t.exports = d;
        var l = null != new (n(73))({
          xdomain: !1
        }).responseType;

        function d(t) {
          var e = t && t.forceBase64;
          l && !e || (this.supportsBinary = !1), i.call(this, t);
        }

        s(d, i), d.prototype.name = "polling", d.prototype.doOpen = function () {
          this.poll();
        }, d.prototype.pause = function (t) {
          var e = this;

          function n() {
            c("paused"), e.readyState = "paused", t();
          }

          if (this.readyState = "pausing", this.polling || !this.writable) {
            var i = 0;
            this.polling && (c("we are currently polling - waiting to pause"), i++, this.once("pollComplete", function () {
              c("pre-pause polling complete"), --i || n();
            })), this.writable || (c("we are currently writing - waiting to pause"), i++, this.once("drain", function () {
              c("pre-pause writing complete"), --i || n();
            }));
          } else n();
        }, d.prototype.poll = function () {
          c("polling"), this.polling = !0, this.doPoll(), this.emit("poll");
        }, d.prototype.onData = function (t) {
          var e = this;
          c("polling got data %s", t);
          r.decodePayload(t, this.socket.binaryType, function (t, n, i) {
            if ("opening" === e.readyState && "open" === t.type && e.onOpen(), "close" === t.type) return e.onClose(), !1;
            e.onPacket(t);
          }), "closed" !== this.readyState && (this.polling = !1, this.emit("pollComplete"), "open" === this.readyState ? this.poll() : c('ignoring poll - transport state "%s"', this.readyState));
        }, d.prototype.doClose = function () {
          var t = this;

          function e() {
            c("writing close packet"), t.write([{
              type: "close"
            }]);
          }

          "open" === this.readyState ? (c("transport open - closing"), e()) : (c("transport not open - deferring close"), this.once("open", e));
        }, d.prototype.write = function (t) {
          var e = this;
          this.writable = !1;

          var n = function n() {
            e.writable = !0, e.emit("drain");
          };

          r.encodePayload(t, this.supportsBinary, function (t) {
            e.doWrite(t, n);
          });
        }, d.prototype.uri = function () {
          var t = this.query || {},
              e = this.secure ? "https" : "http",
              n = "";
          return !1 !== this.timestampRequests && (t[this.timestampParam] = a()), this.supportsBinary || t.sid || (t.b64 = 1), t = o.encode(t), this.port && ("https" === e && 443 !== Number(this.port) || "http" === e && 80 !== Number(this.port)) && (n = ":" + this.port), t.length && (t = "?" + t), e + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + t;
        };
      }, function (t, e, n) {
        (function (e) {
          var i = n(50),
              o = Object.prototype.toString,
              r = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === o.call(Blob),
              s = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === o.call(File);

          t.exports = function t(n) {
            if (!n || "object" != typeof n) return !1;

            if (i(n)) {
              for (var o = 0, a = n.length; o < a; o++) {
                if (t(n[o])) return !0;
              }

              return !1;
            }

            if ("function" == typeof e && e.isBuffer && e.isBuffer(n) || "function" == typeof ArrayBuffer && n instanceof ArrayBuffer || r && n instanceof Blob || s && n instanceof File) return !0;
            if (n.toJSON && "function" == typeof n.toJSON && 1 === arguments.length) return t(n.toJSON(), !0);

            for (var c in n) {
              if (Object.prototype.hasOwnProperty.call(n, c) && t(n[c])) return !0;
            }

            return !1;
          };
        }).call(this, n(51).Buffer);
      }, function (t, e, n) {
        "use strict";

        var i,
            o = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),
            r = 64,
            s = {},
            a = 0,
            c = 0;

        function l(t) {
          var e = "";

          do {
            e = o[t % r] + e, t = Math.floor(t / r);
          } while (t > 0);

          return e;
        }

        function d() {
          var t = l(+new Date());
          return t !== i ? (a = 0, i = t) : t + "." + l(a++);
        }

        for (; c < r; c++) {
          s[o[c]] = c;
        }

        d.encode = l, d.decode = function (t) {
          var e = 0;

          for (c = 0; c < t.length; c++) {
            e = e * r + s[t.charAt(c)];
          }

          return e;
        }, t.exports = d;
      }, function (t, e) {
        var n = [].indexOf;

        t.exports = function (t, e) {
          if (n) return t.indexOf(e);

          for (var i = 0; i < t.length; ++i) {
            if (t[i] === e) return i;
          }

          return -1;
        };
      }, function (t, e, n) {
        var i = n(72),
            o = n(35),
            r = n(302),
            s = n(98),
            a = n(99),
            c = n(24)("socket.io-client:socket"),
            l = n(57),
            d = n(94);
        t.exports = f;
        var u = {
          connect: 1,
          connect_error: 1,
          connect_timeout: 1,
          connecting: 1,
          disconnect: 1,
          error: 1,
          reconnect: 1,
          reconnect_attempt: 1,
          reconnect_failed: 1,
          reconnect_error: 1,
          reconnecting: 1,
          ping: 1,
          pong: 1
        },
            h = o.prototype.emit;

        function f(t, e, n) {
          this.io = t, this.nsp = e, this.json = this, this.ids = 0, this.acks = {}, this.receiveBuffer = [], this.sendBuffer = [], this.connected = !1, this.disconnected = !0, this.flags = {}, n && n.query && (this.query = n.query), this.io.autoConnect && this.open();
        }

        o(f.prototype), f.prototype.subEvents = function () {
          if (!this.subs) {
            var t = this.io;
            this.subs = [s(t, "open", a(this, "onopen")), s(t, "packet", a(this, "onpacket")), s(t, "close", a(this, "onclose"))];
          }
        }, f.prototype.open = f.prototype.connect = function () {
          return this.connected ? this : (this.subEvents(), this.io.reconnecting || this.io.open(), "open" === this.io.readyState && this.onopen(), this.emit("connecting"), this);
        }, f.prototype.send = function () {
          var t = r(arguments);
          return t.unshift("message"), this.emit.apply(this, t), this;
        }, f.prototype.emit = function (t) {
          if (u.hasOwnProperty(t)) return h.apply(this, arguments), this;
          var e = r(arguments),
              n = {
            type: (void 0 !== this.flags.binary ? this.flags.binary : d(e)) ? i.BINARY_EVENT : i.EVENT,
            data: e,
            options: {}
          };
          return n.options.compress = !this.flags || !1 !== this.flags.compress, "function" == typeof e[e.length - 1] && (c("emitting packet with ack id %d", this.ids), this.acks[this.ids] = e.pop(), n.id = this.ids++), this.connected ? this.packet(n) : this.sendBuffer.push(n), this.flags = {}, this;
        }, f.prototype.packet = function (t) {
          t.nsp = this.nsp, this.io.packet(t);
        }, f.prototype.onopen = function () {
          if (c("transport is open - connecting"), "/" !== this.nsp) if (this.query) {
            var t = "object" == typeof this.query ? l.encode(this.query) : this.query;
            c("sending connect packet with query %s", t), this.packet({
              type: i.CONNECT,
              query: t
            });
          } else this.packet({
            type: i.CONNECT
          });
        }, f.prototype.onclose = function (t) {
          c("close (%s)", t), this.connected = !1, this.disconnected = !0, delete this.id, this.emit("disconnect", t);
        }, f.prototype.onpacket = function (t) {
          var e = t.nsp === this.nsp,
              n = t.type === i.ERROR && "/" === t.nsp;
          if (e || n) switch (t.type) {
            case i.CONNECT:
              this.onconnect();
              break;

            case i.EVENT:
            case i.BINARY_EVENT:
              this.onevent(t);
              break;

            case i.ACK:
            case i.BINARY_ACK:
              this.onack(t);
              break;

            case i.DISCONNECT:
              this.ondisconnect();
              break;

            case i.ERROR:
              this.emit("error", t.data);
          }
        }, f.prototype.onevent = function (t) {
          var e = t.data || [];
          c("emitting event %j", e), null != t.id && (c("attaching ack callback to event"), e.push(this.ack(t.id))), this.connected ? h.apply(this, e) : this.receiveBuffer.push(e);
        }, f.prototype.ack = function (t) {
          var e = this,
              n = !1;
          return function () {
            if (!n) {
              n = !0;
              var o = r(arguments);
              c("sending ack %j", o), e.packet({
                type: d(o) ? i.BINARY_ACK : i.ACK,
                id: t,
                data: o
              });
            }
          };
        }, f.prototype.onack = function (t) {
          var e = this.acks[t.id];
          "function" == typeof e ? (c("calling ack %s with %j", t.id, t.data), e.apply(this, t.data), delete this.acks[t.id]) : c("bad ack %s", t.id);
        }, f.prototype.onconnect = function () {
          this.connected = !0, this.disconnected = !1, this.emit("connect"), this.emitBuffered();
        }, f.prototype.emitBuffered = function () {
          var t;

          for (t = 0; t < this.receiveBuffer.length; t++) {
            h.apply(this, this.receiveBuffer[t]);
          }

          for (this.receiveBuffer = [], t = 0; t < this.sendBuffer.length; t++) {
            this.packet(this.sendBuffer[t]);
          }

          this.sendBuffer = [];
        }, f.prototype.ondisconnect = function () {
          c("server disconnect (%s)", this.nsp), this.destroy(), this.onclose("io server disconnect");
        }, f.prototype.destroy = function () {
          if (this.subs) {
            for (var t = 0; t < this.subs.length; t++) {
              this.subs[t].destroy();
            }

            this.subs = null;
          }

          this.io.destroy(this);
        }, f.prototype.close = f.prototype.disconnect = function () {
          return this.connected && (c("performing disconnect (%s)", this.nsp), this.packet({
            type: i.DISCONNECT
          })), this.destroy(), this.connected && this.onclose("io client disconnect"), this;
        }, f.prototype.compress = function (t) {
          return this.flags.compress = t, this;
        }, f.prototype.binary = function (t) {
          return this.flags.binary = t, this;
        };
      }, function (t, e) {
        t.exports = function (t, e, n) {
          return t.on(e, n), {
            destroy: function destroy() {
              t.removeListener(e, n);
            }
          };
        };
      }, function (t, e) {
        var n = [].slice;

        t.exports = function (t, e) {
          if ("string" == typeof e && (e = t[e]), "function" != typeof e) throw new Error("bind() requires a function");
          var i = n.call(arguments, 2);
          return function () {
            return e.apply(t, i.concat(n.call(arguments)));
          };
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = function (t, e) {
          var n = new Array(arguments.length - 1),
              i = 0,
              o = 2,
              r = !0;

          for (; o < arguments.length;) {
            n[i++] = arguments[o++];
          }

          return new Promise(function (o, s) {
            n[i] = function (t) {
              if (r) if (r = !1, t) s(t);else {
                for (var e = new Array(arguments.length - 1), n = 0; n < e.length;) {
                  e[n++] = arguments[n];
                }

                o.apply(null, e);
              }
            };

            try {
              t.apply(e || null, n);
            } catch (t) {
              r && (r = !1, s(t));
            }
          });
        };
      }, function (module, exports, __webpack_require__) {
        "use strict";

        function inquire(moduleName) {
          try {
            var mod = eval("quire".replace(/^/, "re"))(moduleName);
            if (mod && (mod.length || Object.keys(mod).length)) return mod;
          } catch (t) {}

          return null;
        }

        module.exports = inquire;
      }, function (t, e, n) {
        "use strict";

        e.Service = n(319);
      }, function (t, e, n) {
        "use strict";

        t.exports = {};
      }, function (t, e, n) {
        "use strict";

        t.exports = function (t) {
          for (var e, n = r.codegen(["m", "w"], t.name + "$encode")("if(!w)")("w=Writer.create()"), a = t.fieldsArray.slice().sort(r.compareFieldsById), c = 0; c < a.length; ++c) {
            var l = a[c].resolve(),
                d = t._fieldsArray.indexOf(l),
                u = l.resolvedType instanceof i ? "int32" : l.type,
                h = o.basic[u];

            e = "m" + r.safeProp(l.name), l.map ? (n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){", e, l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){", e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])", (l.id << 3 | 2) >>> 0, 8 | o.mapKey[l.keyType], l.keyType), void 0 === h ? n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()", d, e) : n(".uint32(%i).%s(%s[ks[i]]).ldelim()", 16 | h, u, e), n("}")("}")) : l.repeated ? (n("if(%s!=null&&%s.length){", e, e), l.packed && void 0 !== o.packed[u] ? n("w.uint32(%i).fork()", (l.id << 3 | 2) >>> 0)("for(var i=0;i<%s.length;++i)", e)("w.%s(%s[i])", u, e)("w.ldelim()") : (n("for(var i=0;i<%s.length;++i)", e), void 0 === h ? s(n, l, d, e + "[i]") : n("w.uint32(%i).%s(%s[i])", (l.id << 3 | h) >>> 0, u, e)), n("}")) : (l.optional && n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))", e, l.name), void 0 === h ? s(n, l, d, e) : n("w.uint32(%i).%s(%s)", (l.id << 3 | h) >>> 0, u, e));
          }

          return n("return w");
        };

        var i = n(26),
            o = n(53),
            r = n(14);

        function s(t, e, n, i) {
          return e.resolvedType.group ? t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)", n, i, (e.id << 3 | 3) >>> 0, (e.id << 3 | 4) >>> 0) : t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()", n, i, (e.id << 3 | 2) >>> 0);
        }
      }, function (t, e, n) {
        "use strict";

        t.exports = k;
        var i = n(52);
        ((k.prototype = Object.create(i.prototype)).constructor = k).className = "Type";
        var o = n(26),
            r = n(59),
            s = n(38),
            a = n(106),
            c = n(107),
            l = n(78),
            d = n(77),
            u = n(76),
            h = n(14),
            f = n(104),
            g = n(109),
            m = n(110),
            p = n(111),
            b = n(112);

        function k(t, e) {
          i.call(this, t, e), this.fields = {}, this.oneofs = void 0, this.extensions = void 0, this.reserved = void 0, this.group = void 0, this._fieldsById = null, this._fieldsArray = null, this._oneofsArray = null, this._ctor = null;
        }

        function _(t) {
          return t._fieldsById = t._fieldsArray = t._oneofsArray = null, delete t.encode, delete t.decode, delete t.verify, t;
        }

        Object.defineProperties(k.prototype, {
          fieldsById: {
            get: function get() {
              if (this._fieldsById) return this._fieldsById;
              this._fieldsById = {};

              for (var t = Object.keys(this.fields), e = 0; e < t.length; ++e) {
                var n = this.fields[t[e]],
                    i = n.id;
                if (this._fieldsById[i]) throw Error("duplicate id " + i + " in " + this);
                this._fieldsById[i] = n;
              }

              return this._fieldsById;
            }
          },
          fieldsArray: {
            get: function get() {
              return this._fieldsArray || (this._fieldsArray = h.toArray(this.fields));
            }
          },
          oneofsArray: {
            get: function get() {
              return this._oneofsArray || (this._oneofsArray = h.toArray(this.oneofs));
            }
          },
          ctor: {
            get: function get() {
              return this._ctor || (this.ctor = k.generateConstructor(this)());
            },
            set: function set(t) {
              var e = t.prototype;
              e instanceof l || ((t.prototype = new l()).constructor = t, h.merge(t.prototype, e)), t.$type = t.prototype.$type = this, h.merge(t, l, !0), this._ctor = t;

              for (var n = 0; n < this.fieldsArray.length; ++n) {
                this._fieldsArray[n].resolve();
              }

              var i = {};

              for (n = 0; n < this.oneofsArray.length; ++n) {
                i[this._oneofsArray[n].resolve().name] = {
                  get: h.oneOfGetter(this._oneofsArray[n].oneof),
                  set: h.oneOfSetter(this._oneofsArray[n].oneof)
                };
              }

              n && Object.defineProperties(t.prototype, i);
            }
          }
        }), k.generateConstructor = function (t) {
          for (var e, n = h.codegen(["p"], t.name), i = 0; i < t.fieldsArray.length; ++i) {
            (e = t._fieldsArray[i]).map ? n("this%s={}", h.safeProp(e.name)) : e.repeated && n("this%s=[]", h.safeProp(e.name));
          }

          return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]");
        }, k.fromJSON = function (t, e) {
          var n = new k(t, e.options);
          n.extensions = e.extensions, n.reserved = e.reserved;

          for (var l = Object.keys(e.fields), d = 0; d < l.length; ++d) {
            n.add((void 0 !== e.fields[l[d]].keyType ? a.fromJSON : s.fromJSON)(l[d], e.fields[l[d]]));
          }

          if (e.oneofs) for (l = Object.keys(e.oneofs), d = 0; d < l.length; ++d) {
            n.add(r.fromJSON(l[d], e.oneofs[l[d]]));
          }
          if (e.nested) for (l = Object.keys(e.nested), d = 0; d < l.length; ++d) {
            var u = e.nested[l[d]];
            n.add((void 0 !== u.id ? s.fromJSON : void 0 !== u.fields ? k.fromJSON : void 0 !== u.values ? o.fromJSON : void 0 !== u.methods ? c.fromJSON : i.fromJSON)(l[d], u));
          }
          return e.extensions && e.extensions.length && (n.extensions = e.extensions), e.reserved && e.reserved.length && (n.reserved = e.reserved), e.group && (n.group = !0), e.comment && (n.comment = e.comment), n;
        }, k.prototype.toJSON = function (t) {
          var e = i.prototype.toJSON.call(this, t),
              n = !!t && Boolean(t.keepComments);
          return h.toObject(["options", e && e.options || void 0, "oneofs", i.arrayToJSON(this.oneofsArray, t), "fields", i.arrayToJSON(this.fieldsArray.filter(function (t) {
            return !t.declaringField;
          }), t) || {}, "extensions", this.extensions && this.extensions.length ? this.extensions : void 0, "reserved", this.reserved && this.reserved.length ? this.reserved : void 0, "group", this.group || void 0, "nested", e && e.nested || void 0, "comment", n ? this.comment : void 0]);
        }, k.prototype.resolveAll = function () {
          for (var t = this.fieldsArray, e = 0; e < t.length;) {
            t[e++].resolve();
          }

          var n = this.oneofsArray;

          for (e = 0; e < n.length;) {
            n[e++].resolve();
          }

          return i.prototype.resolveAll.call(this);
        }, k.prototype.get = function (t) {
          return this.fields[t] || this.oneofs && this.oneofs[t] || this.nested && this.nested[t] || null;
        }, k.prototype.add = function (t) {
          if (this.get(t.name)) throw Error("duplicate name '" + t.name + "' in " + this);

          if (t instanceof s && void 0 === t.extend) {
            if (this._fieldsById ? this._fieldsById[t.id] : this.fieldsById[t.id]) throw Error("duplicate id " + t.id + " in " + this);
            if (this.isReservedId(t.id)) throw Error("id " + t.id + " is reserved in " + this);
            if (this.isReservedName(t.name)) throw Error("name '" + t.name + "' is reserved in " + this);
            return t.parent && t.parent.remove(t), this.fields[t.name] = t, t.message = this, t.onAdd(this), _(this);
          }

          return t instanceof r ? (this.oneofs || (this.oneofs = {}), this.oneofs[t.name] = t, t.onAdd(this), _(this)) : i.prototype.add.call(this, t);
        }, k.prototype.remove = function (t) {
          if (t instanceof s && void 0 === t.extend) {
            if (!this.fields || this.fields[t.name] !== t) throw Error(t + " is not a member of " + this);
            return delete this.fields[t.name], t.parent = null, t.onRemove(this), _(this);
          }

          if (t instanceof r) {
            if (!this.oneofs || this.oneofs[t.name] !== t) throw Error(t + " is not a member of " + this);
            return delete this.oneofs[t.name], t.parent = null, t.onRemove(this), _(this);
          }

          return i.prototype.remove.call(this, t);
        }, k.prototype.isReservedId = function (t) {
          return i.isReservedId(this.reserved, t);
        }, k.prototype.isReservedName = function (t) {
          return i.isReservedName(this.reserved, t);
        }, k.prototype.create = function (t) {
          return new this.ctor(t);
        }, k.prototype.setup = function () {
          for (var t = this.fullName, e = [], n = 0; n < this.fieldsArray.length; ++n) {
            e.push(this._fieldsArray[n].resolve().resolvedType);
          }

          this.encode = f(this)({
            Writer: u,
            types: e,
            util: h
          }), this.decode = g(this)({
            Reader: d,
            types: e,
            util: h
          }), this.verify = m(this)({
            types: e,
            util: h
          }), this.fromObject = p.fromObject(this)({
            types: e,
            util: h
          }), this.toObject = p.toObject(this)({
            types: e,
            util: h
          });
          var i = b[t];

          if (i) {
            var o = Object.create(this);
            o.fromObject = this.fromObject, this.fromObject = i.fromObject.bind(o), o.toObject = this.toObject, this.toObject = i.toObject.bind(o);
          }

          return this;
        }, k.prototype.encode = function (t, e) {
          return this.setup().encode(t, e);
        }, k.prototype.encodeDelimited = function (t, e) {
          return this.encode(t, e && e.len ? e.fork() : e).ldelim();
        }, k.prototype.decode = function (t, e) {
          return this.setup().decode(t, e);
        }, k.prototype.decodeDelimited = function (t) {
          return t instanceof d || (t = d.create(t)), this.decode(t, t.uint32());
        }, k.prototype.verify = function (t) {
          return this.setup().verify(t);
        }, k.prototype.fromObject = function (t) {
          return this.setup().fromObject(t);
        }, k.prototype.toObject = function (t, e) {
          return this.setup().toObject(t, e);
        }, k.d = function (t) {
          return function (e) {
            h.decorateType(e, t);
          };
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = s;
        var i = n(38);
        ((s.prototype = Object.create(i.prototype)).constructor = s).className = "MapField";
        var o = n(53),
            r = n(14);

        function s(t, e, n, o, s, a) {
          if (i.call(this, t, e, o, void 0, void 0, s, a), !r.isString(n)) throw TypeError("keyType must be a string");
          this.keyType = n, this.resolvedKeyType = null, this.map = !0;
        }

        s.fromJSON = function (t, e) {
          return new s(t, e.id, e.keyType, e.type, e.options, e.comment);
        }, s.prototype.toJSON = function (t) {
          var e = !!t && Boolean(t.keepComments);
          return r.toObject(["keyType", this.keyType, "type", this.type, "id", this.id, "extend", this.extend, "options", this.options, "comment", e ? this.comment : void 0]);
        }, s.prototype.resolve = function () {
          if (this.resolved) return this;
          if (void 0 === o.mapKey[this.keyType]) throw Error("invalid key type: " + this.keyType);
          return i.prototype.resolve.call(this);
        }, s.d = function (t, e, n) {
          return "function" == typeof n ? n = r.decorateType(n).name : n && "object" == typeof n && (n = r.decorateEnum(n).name), function (i, o) {
            r.decorateType(i.constructor).add(new s(o, t, e, n));
          };
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = a;
        var i = n(52);
        ((a.prototype = Object.create(i.prototype)).constructor = a).className = "Service";
        var o = n(108),
            r = n(14),
            s = n(102);

        function a(t, e) {
          i.call(this, t, e), this.methods = {}, this._methodsArray = null;
        }

        function c(t) {
          return t._methodsArray = null, t;
        }

        a.fromJSON = function (t, e) {
          var n = new a(t, e.options);
          if (e.methods) for (var i = Object.keys(e.methods), r = 0; r < i.length; ++r) {
            n.add(o.fromJSON(i[r], e.methods[i[r]]));
          }
          return e.nested && n.addJSON(e.nested), n.comment = e.comment, n;
        }, a.prototype.toJSON = function (t) {
          var e = i.prototype.toJSON.call(this, t),
              n = !!t && Boolean(t.keepComments);
          return r.toObject(["options", e && e.options || void 0, "methods", i.arrayToJSON(this.methodsArray, t) || {}, "nested", e && e.nested || void 0, "comment", n ? this.comment : void 0]);
        }, Object.defineProperty(a.prototype, "methodsArray", {
          get: function get() {
            return this._methodsArray || (this._methodsArray = r.toArray(this.methods));
          }
        }), a.prototype.get = function (t) {
          return this.methods[t] || i.prototype.get.call(this, t);
        }, a.prototype.resolveAll = function () {
          for (var t = this.methodsArray, e = 0; e < t.length; ++e) {
            t[e].resolve();
          }

          return i.prototype.resolve.call(this);
        }, a.prototype.add = function (t) {
          if (this.get(t.name)) throw Error("duplicate name '" + t.name + "' in " + this);
          return t instanceof o ? (this.methods[t.name] = t, t.parent = this, c(this)) : i.prototype.add.call(this, t);
        }, a.prototype.remove = function (t) {
          if (t instanceof o) {
            if (this.methods[t.name] !== t) throw Error(t + " is not a member of " + this);
            return delete this.methods[t.name], t.parent = null, c(this);
          }

          return i.prototype.remove.call(this, t);
        }, a.prototype.create = function (t, e, n) {
          for (var i, o = new s.Service(t, e, n), a = 0; a < this.methodsArray.length; ++a) {
            var c = r.lcFirst((i = this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g, "");
            o[c] = r.codegen(["r", "c"], r.isReserved(c) ? c + "_" : c)("return this.rpcCall(m,q,s,r,c)")({
              m: i,
              q: i.resolvedRequestType.ctor,
              s: i.resolvedResponseType.ctor
            });
          }

          return o;
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = r;
        var i = n(37);
        ((r.prototype = Object.create(i.prototype)).constructor = r).className = "Method";
        var o = n(14);

        function r(t, e, n, r, s, a, c, l, d) {
          if (o.isObject(s) ? (c = s, s = a = void 0) : o.isObject(a) && (c = a, a = void 0), void 0 !== e && !o.isString(e)) throw TypeError("type must be a string");
          if (!o.isString(n)) throw TypeError("requestType must be a string");
          if (!o.isString(r)) throw TypeError("responseType must be a string");
          i.call(this, t, c), this.type = e || "rpc", this.requestType = n, this.requestStream = !!s || void 0, this.responseType = r, this.responseStream = !!a || void 0, this.resolvedRequestType = null, this.resolvedResponseType = null, this.comment = l, this.parsedOptions = d;
        }

        r.fromJSON = function (t, e) {
          return new r(t, e.type, e.requestType, e.responseType, e.requestStream, e.responseStream, e.options, e.comment, e.parsedOptions);
        }, r.prototype.toJSON = function (t) {
          var e = !!t && Boolean(t.keepComments);
          return o.toObject(["type", "rpc" !== this.type && this.type || void 0, "requestType", this.requestType, "requestStream", this.requestStream, "responseType", this.responseType, "responseStream", this.responseStream, "options", this.options, "comment", e ? this.comment : void 0, "parsedOptions", this.parsedOptions]);
        }, r.prototype.resolve = function () {
          return this.resolved ? this : (this.resolvedRequestType = this.parent.lookupType(this.requestType), this.resolvedResponseType = this.parent.lookupType(this.responseType), i.prototype.resolve.call(this));
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = function (t) {
          var e = r.codegen(["r", "l"], t.name + "$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor" + (t.fieldsArray.filter(function (t) {
            return t.map;
          }).length ? ",k,value" : ""))("while(r.pos<c){")("var t=r.uint32()");
          t.group && e("if((t&7)===4)")("break");
          e("switch(t>>>3){");

          for (var n = 0; n < t.fieldsArray.length; ++n) {
            var a = t._fieldsArray[n].resolve(),
                c = a.resolvedType instanceof i ? "int32" : a.type,
                l = "m" + r.safeProp(a.name);

            e("case %i:", a.id), a.map ? (e("if(%s===util.emptyObject)", l)("%s={}", l)("var c2 = r.uint32()+r.pos"), void 0 !== o.defaults[a.keyType] ? e("k=%j", o.defaults[a.keyType]) : e("k=null"), void 0 !== o.defaults[c] ? e("value=%j", o.defaults[c]) : e("value=null"), e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break", a.keyType)("case 2:"), void 0 === o.basic[c] ? e("value=types[%i].decode(r,r.uint32())", n) : e("value=r.%s()", c), e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"), void 0 !== o["long"][a.keyType] ? e('%s[typeof k==="object"?util.longToHash(k):k]=value', l) : e("%s[k]=value", l)) : a.repeated ? (e("if(!(%s&&%s.length))", l, l)("%s=[]", l), void 0 !== o.packed[c] && e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())", l, c)("}else"), void 0 === o.basic[c] ? e(a.resolvedType.group ? "%s.push(types[%i].decode(r))" : "%s.push(types[%i].decode(r,r.uint32()))", l, n) : e("%s.push(r.%s())", l, c)) : void 0 === o.basic[c] ? e(a.resolvedType.group ? "%s=types[%i].decode(r)" : "%s=types[%i].decode(r,r.uint32())", l, n) : e("%s=r.%s()", l, c), e("break");
          }

          for (e("default:")("r.skipType(t&7)")("break")("}")("}"), n = 0; n < t._fieldsArray.length; ++n) {
            var d = t._fieldsArray[n];
            d.required && e("if(!m.hasOwnProperty(%j))", d.name)("throw util.ProtocolError(%j,{instance:m})", s(d));
          }

          return e("return m");
        };

        var i = n(26),
            o = n(53),
            r = n(14);

        function s(t) {
          return "missing required '" + t.name + "'";
        }
      }, function (t, e, n) {
        "use strict";

        t.exports = function (t) {
          var e = o.codegen(["m"], t.name + "$verify")('if(typeof m!=="object"||m===null)')("return%j", "object expected"),
              n = {};
          t.oneofsArray.length && e("var p={}");

          for (var i = 0; i < t.fieldsArray.length; ++i) {
            var c = t._fieldsArray[i].resolve(),
                l = "m" + o.safeProp(c.name);

            if (c.optional && e("if(%s!=null&&m.hasOwnProperty(%j)){", l, c.name), c.map) e("if(!util.isObject(%s))", l)("return%j", r(c, "object"))("var k=Object.keys(%s)", l)("for(var i=0;i<k.length;++i){"), a(e, c, "k[i]"), s(e, c, i, l + "[k[i]]")("}");else if (c.repeated) e("if(!Array.isArray(%s))", l)("return%j", r(c, "array"))("for(var i=0;i<%s.length;++i){", l), s(e, c, i, l + "[i]")("}");else {
              if (c.partOf) {
                var d = o.safeProp(c.partOf.name);
                1 === n[c.partOf.name] && e("if(p%s===1)", d)("return%j", c.partOf.name + ": multiple values"), n[c.partOf.name] = 1, e("p%s=1", d);
              }

              s(e, c, i, l);
            }
            c.optional && e("}");
          }

          return e("return null");
        };

        var i = n(26),
            o = n(14);

        function r(t, e) {
          return t.name + ": " + e + (t.repeated && "array" !== e ? "[]" : t.map && "object" !== e ? "{k:" + t.keyType + "}" : "") + " expected";
        }

        function s(t, e, n, o) {
          if (e.resolvedType) {
            if (e.resolvedType instanceof i) {
              t("switch(%s){", o)("default:")("return%j", r(e, "enum value"));

              for (var s = Object.keys(e.resolvedType.values), a = 0; a < s.length; ++a) {
                t("case %i:", e.resolvedType.values[s[a]]);
              }

              t("break")("}");
            } else t("{")("var e=types[%i].verify(%s);", n, o)("if(e)")("return%j+e", e.name + ".")("}");
          } else switch (e.type) {
            case "int32":
            case "uint32":
            case "sint32":
            case "fixed32":
            case "sfixed32":
              t("if(!util.isInteger(%s))", o)("return%j", r(e, "integer"));
              break;

            case "int64":
            case "uint64":
            case "sint64":
            case "fixed64":
            case "sfixed64":
              t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))", o, o, o, o)("return%j", r(e, "integer|Long"));
              break;

            case "float":
            case "double":
              t('if(typeof %s!=="number")', o)("return%j", r(e, "number"));
              break;

            case "bool":
              t('if(typeof %s!=="boolean")', o)("return%j", r(e, "boolean"));
              break;

            case "string":
              t("if(!util.isString(%s))", o)("return%j", r(e, "string"));
              break;

            case "bytes":
              t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))', o, o, o)("return%j", r(e, "buffer"));
          }
          return t;
        }

        function a(t, e, n) {
          switch (e.keyType) {
            case "int32":
            case "uint32":
            case "sint32":
            case "fixed32":
            case "sfixed32":
              t("if(!util.key32Re.test(%s))", n)("return%j", r(e, "integer key"));
              break;

            case "int64":
            case "uint64":
            case "sint64":
            case "fixed64":
            case "sfixed64":
              t("if(!util.key64Re.test(%s))", n)("return%j", r(e, "integer|Long key"));
              break;

            case "bool":
              t("if(!util.key2Re.test(%s))", n)("return%j", r(e, "boolean key"));
          }

          return t;
        }
      }, function (t, e, n) {
        "use strict";

        var i = e,
            o = n(26),
            r = n(14);

        function s(t, e, n, i) {
          if (e.resolvedType) {
            if (e.resolvedType instanceof o) {
              t("switch(d%s){", i);

              for (var r = e.resolvedType.values, s = Object.keys(r), a = 0; a < s.length; ++a) {
                e.repeated && r[s[a]] === e.typeDefault && t("default:"), t("case%j:", s[a])("case %i:", r[s[a]])("m%s=%j", i, r[s[a]])("break");
              }

              t("}");
            } else t('if(typeof d%s!=="object")', i)("throw TypeError(%j)", e.fullName + ": object expected")("m%s=types[%i].fromObject(d%s)", i, n, i);
          } else {
            var c = !1;

            switch (e.type) {
              case "double":
              case "float":
                t("m%s=Number(d%s)", i, i);
                break;

              case "uint32":
              case "fixed32":
                t("m%s=d%s>>>0", i, i);
                break;

              case "int32":
              case "sint32":
              case "sfixed32":
                t("m%s=d%s|0", i, i);
                break;

              case "uint64":
                c = !0;

              case "int64":
              case "sint64":
              case "fixed64":
              case "sfixed64":
                t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j", i, i, c)('else if(typeof d%s==="string")', i)("m%s=parseInt(d%s,10)", i, i)('else if(typeof d%s==="number")', i)("m%s=d%s", i, i)('else if(typeof d%s==="object")', i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)", i, i, i, c ? "true" : "");
                break;

              case "bytes":
                t('if(typeof d%s==="string")', i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)", i, i, i)("else if(d%s.length)", i)("m%s=d%s", i, i);
                break;

              case "string":
                t("m%s=String(d%s)", i, i);
                break;

              case "bool":
                t("m%s=Boolean(d%s)", i, i);
            }
          }
          return t;
        }

        function a(t, e, n, i) {
          if (e.resolvedType) e.resolvedType instanceof o ? t("d%s=o.enums===String?types[%i].values[m%s]:m%s", i, n, i, i) : t("d%s=types[%i].toObject(m%s,o)", i, n, i);else {
            var r = !1;

            switch (e.type) {
              case "double":
              case "float":
                t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s", i, i, i, i);
                break;

              case "uint64":
                r = !0;

              case "int64":
              case "sint64":
              case "fixed64":
              case "sfixed64":
                t('if(typeof m%s==="number")', i)("d%s=o.longs===String?String(m%s):m%s", i, i, i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s", i, i, i, i, r ? "true" : "", i);
                break;

              case "bytes":
                t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s", i, i, i, i, i);
                break;

              default:
                t("d%s=m%s", i, i);
            }
          }
          return t;
        }

        i.fromObject = function (t) {
          var e = t.fieldsArray,
              n = r.codegen(["d"], t.name + "$fromObject")("if(d instanceof this.ctor)")("return d");
          if (!e.length) return n("return new this.ctor");
          n("var m=new this.ctor");

          for (var i = 0; i < e.length; ++i) {
            var a = e[i].resolve(),
                c = r.safeProp(a.name);
            a.map ? (n("if(d%s){", c)('if(typeof d%s!=="object")', c)("throw TypeError(%j)", a.fullName + ": object expected")("m%s={}", c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){", c), s(n, a, i, c + "[ks[i]]")("}")("}")) : a.repeated ? (n("if(d%s){", c)("if(!Array.isArray(d%s))", c)("throw TypeError(%j)", a.fullName + ": array expected")("m%s=[]", c)("for(var i=0;i<d%s.length;++i){", c), s(n, a, i, c + "[i]")("}")("}")) : (a.resolvedType instanceof o || n("if(d%s!=null){", c), s(n, a, i, c), a.resolvedType instanceof o || n("}"));
          }

          return n("return m");
        }, i.toObject = function (t) {
          var e = t.fieldsArray.slice().sort(r.compareFieldsById);
          if (!e.length) return r.codegen()("return {}");

          for (var n = r.codegen(["m", "o"], t.name + "$toObject")("if(!o)")("o={}")("var d={}"), i = [], s = [], c = [], l = 0; l < e.length; ++l) {
            e[l].partOf || (e[l].resolve().repeated ? i : e[l].map ? s : c).push(e[l]);
          }

          if (i.length) {
            for (n("if(o.arrays||o.defaults){"), l = 0; l < i.length; ++l) {
              n("d%s=[]", r.safeProp(i[l].name));
            }

            n("}");
          }

          if (s.length) {
            for (n("if(o.objects||o.defaults){"), l = 0; l < s.length; ++l) {
              n("d%s={}", r.safeProp(s[l].name));
            }

            n("}");
          }

          if (c.length) {
            for (n("if(o.defaults){"), l = 0; l < c.length; ++l) {
              var d = c[l],
                  u = r.safeProp(d.name);
              if (d.resolvedType instanceof o) n("d%s=o.enums===String?%j:%j", u, d.resolvedType.valuesById[d.typeDefault], d.typeDefault);else if (d["long"]) n("if(util.Long){")("var n=new util.Long(%i,%i,%j)", d.typeDefault.low, d.typeDefault.high, d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n", u)("}else")("d%s=o.longs===String?%j:%i", u, d.typeDefault.toString(), d.typeDefault.toNumber());else if (d.bytes) {
                var h = "[" + Array.prototype.slice.call(d.typeDefault).join(",") + "]";
                n("if(o.bytes===String)d%s=%j", u, String.fromCharCode.apply(String, d.typeDefault))("else{")("d%s=%s", u, h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)", u, u)("}");
              } else n("d%s=%j", u, d.typeDefault);
            }

            n("}");
          }

          var f = !1;

          for (l = 0; l < e.length; ++l) {
            d = e[l];

            var g = t._fieldsArray.indexOf(d);

            u = r.safeProp(d.name);
            d.map ? (f || (f = !0, n("var ks2")), n("if(m%s&&(ks2=Object.keys(m%s)).length){", u, u)("d%s={}", u)("for(var j=0;j<ks2.length;++j){"), a(n, d, g, u + "[ks2[j]]")("}")) : d.repeated ? (n("if(m%s&&m%s.length){", u, u)("d%s=[]", u)("for(var j=0;j<m%s.length;++j){", u), a(n, d, g, u + "[j]")("}")) : (n("if(m%s!=null&&m.hasOwnProperty(%j)){", u, d.name), a(n, d, g, u), d.partOf && n("if(o.oneofs)")("d%s=%j", r.safeProp(d.partOf.name), d.name)), n("}");
          }

          return n("return d");
        };
      }, function (t, e, n) {
        "use strict";

        var i = e,
            o = n(78);
        i[".google.protobuf.Any"] = {
          fromObject: function fromObject(t) {
            if (t && t["@type"]) {
              var e = t["@type"].substring(t["@type"].lastIndexOf("/") + 1),
                  n = this.lookup(e);

              if (n) {
                var i = "." === t["@type"].charAt(0) ? t["@type"].substr(1) : t["@type"];
                return -1 === i.indexOf("/") && (i = "/" + i), this.create({
                  type_url: i,
                  value: n.encode(n.fromObject(t)).finish()
                });
              }
            }

            return this.fromObject(t);
          },
          toObject: function toObject(t, e) {
            var n = "",
                i = "";

            if (e && e.json && t.type_url && t.value) {
              i = t.type_url.substring(t.type_url.lastIndexOf("/") + 1), n = t.type_url.substring(0, t.type_url.lastIndexOf("/") + 1);
              var r = this.lookup(i);
              r && (t = r.decode(t.value));
            }

            if (!(t instanceof this.ctor) && t instanceof o) {
              var s = t.$type.toObject(t, e),
                  a = "." === t.$type.fullName[0] ? t.$type.fullName.substr(1) : t.$type.fullName;
              return "" === n && (n = "type.googleapis.com/"), i = n + a, s["@type"] = i, s;
            }

            return this.toObject(t, e);
          }
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = u;
        var i = n(52);
        ((u.prototype = Object.create(i.prototype)).constructor = u).className = "Root";
        var o,
            r,
            s,
            a = n(38),
            c = n(26),
            l = n(59),
            d = n(14);

        function u(t) {
          i.call(this, "", t), this.deferred = [], this.files = [];
        }

        function h() {}

        u.fromJSON = function (t, e) {
          return e || (e = new u()), t.options && e.setOptions(t.options), e.addJSON(t.nested);
        }, u.prototype.resolvePath = d.path.resolve, u.prototype.fetch = d.fetch, u.prototype.load = function t(e, n, i) {
          "function" == typeof n && (i = n, n = void 0);
          var o = this;
          if (!i) return d.asPromise(t, o, e, n);
          var a = i === h;

          function c(t, e) {
            if (i) {
              var n = i;
              if (i = null, a) throw t;
              n(t, e);
            }
          }

          function l(t) {
            var e = t.lastIndexOf("google/protobuf/");

            if (e > -1) {
              var n = t.substring(e);
              if (n in s) return n;
            }

            return null;
          }

          function u(t, e) {
            try {
              if (d.isString(e) && "{" === e.charAt(0) && (e = JSON.parse(e)), d.isString(e)) {
                r.filename = t;
                var i,
                    s = r(e, o, n),
                    u = 0;
                if (s.imports) for (; u < s.imports.length; ++u) {
                  (i = l(s.imports[u]) || o.resolvePath(t, s.imports[u])) && f(i);
                }
                if (s.weakImports) for (u = 0; u < s.weakImports.length; ++u) {
                  (i = l(s.weakImports[u]) || o.resolvePath(t, s.weakImports[u])) && f(i, !0);
                }
              } else o.setOptions(e.options).addJSON(e.nested);
            } catch (t) {
              c(t);
            }

            a || g || c(null, o);
          }

          function f(t, e) {
            if (!(o.files.indexOf(t) > -1)) if (o.files.push(t), t in s) a ? u(t, s[t]) : (++g, setTimeout(function () {
              --g, u(t, s[t]);
            }));else if (a) {
              var n;

              try {
                n = d.fs.readFileSync(t).toString("utf8");
              } catch (t) {
                return void (e || c(t));
              }

              u(t, n);
            } else ++g, o.fetch(t, function (n, r) {
              --g, i && (n ? e ? g || c(null, o) : c(n) : u(t, r));
            });
          }

          var g = 0;
          d.isString(e) && (e = [e]);

          for (var m, p = 0; p < e.length; ++p) {
            (m = o.resolvePath("", e[p])) && f(m);
          }

          if (a) return o;
          g || c(null, o);
        }, u.prototype.loadSync = function (t, e) {
          if (!d.isNode) throw Error("not supported");
          return this.load(t, e, h);
        }, u.prototype.resolveAll = function () {
          if (this.deferred.length) throw Error("unresolvable extensions: " + this.deferred.map(function (t) {
            return "'extend " + t.extend + "' in " + t.parent.fullName;
          }).join(", "));
          return i.prototype.resolveAll.call(this);
        };
        var f = /^[A-Z]/;

        function g(t, e) {
          var n = e.parent.lookup(e.extend);

          if (n) {
            var i = new a(e.fullName, e.id, e.type, e.rule, void 0, e.options);
            return i.declaringField = e, e.extensionField = i, n.add(i), !0;
          }

          return !1;
        }

        u.prototype._handleAdd = function (t) {
          if (t instanceof a) void 0 === t.extend || t.extensionField || g(0, t) || this.deferred.push(t);else if (t instanceof c) f.test(t.name) && (t.parent[t.name] = t.values);else if (!(t instanceof l)) {
            if (t instanceof o) for (var e = 0; e < this.deferred.length;) {
              g(0, this.deferred[e]) ? this.deferred.splice(e, 1) : ++e;
            }

            for (var n = 0; n < t.nestedArray.length; ++n) {
              this._handleAdd(t._nestedArray[n]);
            }

            f.test(t.name) && (t.parent[t.name] = t);
          }
        }, u.prototype._handleRemove = function (t) {
          if (t instanceof a) {
            if (void 0 !== t.extend) if (t.extensionField) t.extensionField.parent.remove(t.extensionField), t.extensionField = null;else {
              var e = this.deferred.indexOf(t);
              e > -1 && this.deferred.splice(e, 1);
            }
          } else if (t instanceof c) f.test(t.name) && delete t.parent[t.name];else if (t instanceof i) {
            for (var n = 0; n < t.nestedArray.length; ++n) {
              this._handleRemove(t._nestedArray[n]);
            }

            f.test(t.name) && delete t.parent[t.name];
          }
        }, u._configure = function (t, e, n) {
          o = t, r = e, s = n;
        };
      }, function (t, e, n) {
        (function (e) {
          t.exports = function (t) {
            return n && e.isBuffer(t) || i && (t instanceof ArrayBuffer || o(t));
          };

          var n = "function" == typeof e && "function" == typeof e.isBuffer,
              i = "function" == typeof ArrayBuffer,
              o = function o(t) {
            return "function" == typeof ArrayBuffer.isView ? ArrayBuffer.isView(t) : t.buffer instanceof ArrayBuffer;
          };
        }).call(this, n(51).Buffer);
      }, function (t, e, n) {
        var i = n(2),
            o = n(405);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e, n) {
        var i = n(2),
            o = n(406);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e, n) {
        "use strict";

        e.a = function () {
          return !1;
        };
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';
      }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';
      }, function (t, e) {
        t.exports = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = n(420),
            r = i(n(1)),
            s = i(n(3)),
            a = i(n(32)),
            c = i(n(82)),
            l = i(n(362)),
            d = i(n(363)),
            u = i(n(364)),
            h = i(n(365)),
            f = i(n(366)),
            g = i(n(39)),
            m = i(n(54)),
            p = i(n(84));
        e._SERVICE = 1;

        var b = /*#__PURE__*/function () {
          function b(t, e) {
            _classCallCheck(this, b);

            if (!t) throw new TypeError('Param "bundleVersion" must be provided.');
            this._id = null != e ? e : o.v4(), this._isConnected = !1, this._bundleVersion = t;
          }

          _createClass(b, [{
            key: "getId",
            value: function getId() {
              return this._id;
            }
          }, {
            key: "isConnected",
            value: function isConnected() {
              return this._isConnected;
            }
          }, {
            key: "connect",
            value: function connect(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
                buffers: [],
                types: []
              };
              var n = new l["default"](this.getId(), e.buffers, e.types, this._bundleVersion);
              return this._connect(t, n);
            }
          }, {
            key: "reconnect",
            value: function reconnect(t, e) {
              if (this.isConnected()) throw new m["default"]("Cannot reconnect to already connected service.", t);
              return this._connect(t, new u["default"](this.getId(), e, this._bundleVersion));
            }
          }, {
            key: "disconnect",
            value: function disconnect() {
              this._isConnected && (this._isConnected = !1, this._wsGateway && (this.stopListening(this._wsGateway), this._wsGateway = void 0), this._channel && (this.stopListening(this._channel), this._channel = void 0), this._connectedSessions && (this._connectedSessions.disconnect(), this._connectedSessions = void 0), this.fire("disconnected"), this.stopListening());
            }
          }, {
            key: "sendOperations",
            value: function () {
              var _sendOperations = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12(t, n) {
                var i, o, r;
                return regeneratorRuntime.wrap(function _callee12$(_context12) {
                  while (1) {
                    switch (_context12.prev = _context12.next) {
                      case 0:
                        if (!(!t || !t.types || !t.types.length)) {
                          _context12.next = 2;
                          break;
                        }

                        throw new m["default"]("Cannot send empty update.", this._wsGateway);

                      case 2:
                        i = "number" == typeof n ? n : parseInt(n);

                        if (!(!Number.isInteger(i) || i < 0)) {
                          _context12.next = 5;
                          break;
                        }

                        throw new m["default"]("Base version not provided.", this._wsGateway);

                      case 5:
                        o = new d["default"](this.getId(), t.buffers, t.types, i);

                        if (!(!this._wsGateway || !this._isConnected)) {
                          _context12.next = 8;
                          break;
                        }

                        throw new p["default"]("Collaborative Editing", this);

                      case 8:
                        _context12.next = 10;
                        return this._wsGateway._sendRequest(e._SERVICE, d["default"].TYPE, a["default"].encode(o));

                      case 10:
                        r = _context12.sent;
                        return _context12.abrupt("return", a["default"].decode(r, h["default"]));

                      case 12:
                      case "end":
                        return _context12.stop();
                    }
                  }
                }, _callee12, this);
              }));

              function sendOperations(_x17, _x18) {
                return _sendOperations.apply(this, arguments);
              }

              return sendOperations;
            }()
          }, {
            key: "getConnectedSessions",
            value: function () {
              var _getConnectedSessions2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13() {
                return regeneratorRuntime.wrap(function _callee13$(_context13) {
                  while (1) {
                    switch (_context13.prev = _context13.next) {
                      case 0:
                        if (this._isConnected) {
                          _context13.next = 2;
                          break;
                        }

                        throw new p["default"]("Collaborative Editing", this);

                      case 2:
                        _context13.t0 = this._connectedSessions;

                        if (_context13.t0) {
                          _context13.next = 7;
                          break;
                        }

                        _context13.next = 6;
                        return c["default"].getConnectedSessions(this._wsGateway, this._id, e._SERVICE);

                      case 6:
                        this._connectedSessions = _context13.sent;

                      case 7:
                        return _context13.abrupt("return", this._connectedSessions);

                      case 8:
                      case "end":
                        return _context13.stop();
                    }
                  }
                }, _callee13, this);
              }));

              function getConnectedSessions() {
                return _getConnectedSessions2.apply(this, arguments);
              }

              return getConnectedSessions;
            }()
          }, {
            key: "_connect",
            value: function () {
              var _connect3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee14(t, n) {
                var _this17 = this;

                var i, o;
                return regeneratorRuntime.wrap(function _callee14$(_context14) {
                  while (1) {
                    switch (_context14.prev = _context14.next) {
                      case 0:
                        if (!this.isConnected()) {
                          _context14.next = 2;
                          break;
                        }

                        return _context14.abrupt("return");

                      case 2:
                        if (!(t.state !== g["default"].STATE_CONNECTED)) {
                          _context14.next = 4;
                          break;
                        }

                        throw new m["default"]("WebSocket Gateway is not connected.", t);

                      case 4:
                        this._wsGateway = t, this.stopListening(t, "change:state");
                        _context14.next = 7;
                        return t._sendRequest(e._SERVICE, n.constructor.TYPE, a["default"].encode(n));

                      case 7:
                        i = _context14.sent;
                        o = a["default"].decode(i, f["default"]);
                        return _context14.abrupt("return", (this.listenTo(t, "change:state", function (t, e, n) {
                          return _this17._onWsGatewayStateChange(n);
                        }, {
                          priority: g["default"]._CHANGE_STATE_EVENT_PRIORITY
                        }), this._connectToChannel(t, o.channel), this._isConnected = !0, this.fire("connected"), o));

                      case 10:
                      case "end":
                        return _context14.stop();
                    }
                  }
                }, _callee14, this);
              }));

              function _connect(_x19, _x20) {
                return _connect3.apply(this, arguments);
              }

              return _connect;
            }()
          }, {
            key: "_connectToChannel",
            value: function _connectToChannel(t, n) {
              var _this18 = this;

              this._channel = t._getChannel(e._SERVICE, n), this.listenTo(this._channel, this._channel.getEventName(d["default"].TYPE), function (t, e) {
                var n = a["default"].decode(e, d["default"]);

                _this18.fire("operationsReceived", n.baseVersion, n.data, n.metadata);
              });
            }
          }, {
            key: "_onWsGatewayStateChange",
            value: function _onWsGatewayStateChange(t) {
              t === g["default"].STATE_DISCONNECTED && this.disconnect();
            }
          }], [{
            key: "getConnectedSessions",
            value: function getConnectedSessions(t, n) {
              return c["default"].getConnectedSessions(t, n, e._SERVICE);
            }
          }]);

          return b;
        }();

        b._SERVICE = e._SERVICE, r["default"](b, s["default"]), e["default"] = b;
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });

        var r = i(n(1)),
            s = i(n(3)),
            a = i(n(32)),
            c = i(n(367)),
            l = i(n(368)),
            d = i(n(369)),
            u = i(n(370)),
            h = i(n(371)),
            f = i(n(372)),
            g = i(n(373)),
            m = i(n(374)),
            p = i(n(375)),
            b = i(n(376)),
            k = i(n(377)),
            _ = o(n(39)),
            w = i(n(54)),
            v = i(n(82)),
            y = i(n(84));

        e._SERVICE = 9;

        var x = /*#__PURE__*/function () {
          function x(t) {
            _classCallCheck(this, x);

            this._documentId = t, this._isConnected = !1;
          }

          _createClass(x, [{
            key: "isConnected",
            get: function get() {
              return this._isConnected;
            }
          }, {
            key: "connect",
            value: function () {
              var _connect4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee15(t) {
                var _this19 = this;

                var n, i, _a$default$decode, o, r;

                return regeneratorRuntime.wrap(function _callee15$(_context15) {
                  while (1) {
                    switch (_context15.prev = _context15.next) {
                      case 0:
                        if (!this._isConnected) {
                          _context15.next = 2;
                          break;
                        }

                        return _context15.abrupt("return");

                      case 2:
                        if (!(t.state !== _.WEB_SOCKET_GATEWAY_STATES.CONNECTED)) {
                          _context15.next = 4;
                          break;
                        }

                        throw new w["default"]("WebSocket Gateway is not connected.", t);

                      case 4:
                        n = new d["default"](this._documentId);
                        this._wsGateway = t, this.stopListening(t, "change:state");
                        _context15.next = 8;
                        return t._sendRequest(e._SERVICE, d["default"].TYPE, a["default"].encode(n));

                      case 8:
                        i = _context15.sent;
                        _a$default$decode = a["default"].decode(i, u["default"]);
                        o = _a$default$decode.channel;
                        r = _a$default$decode.threads;
                        return _context15.abrupt("return", (this.listenTo(t, "change:state", function (t, e, n) {
                          return _this19._onWsGatewayStateChange(n);
                        }, {
                          priority: _["default"]._CHANGE_STATE_EVENT_PRIORITY
                        }), this._connectToChannel(t, o), this._isConnected = !0, this.fire("connected"), r));

                      case 13:
                      case "end":
                        return _context15.stop();
                    }
                  }
                }, _callee15, this);
              }));

              function connect(_x21) {
                return _connect4.apply(this, arguments);
              }

              return connect;
            }()
          }, {
            key: "disconnect",
            value: function disconnect() {
              this._isConnected && (this._isConnected = !1, this._wsGateway && (this.stopListening(this._wsGateway), this._wsGateway = void 0), this._channel && (this.stopListening(this._channel), this._channel = void 0), this._connectedSessions && (this._connectedSessions.disconnect(), this._connectedSessions = void 0), this.fire("disconnected"), this.stopListening());
            }
          }, {
            key: "addComment",
            value: function () {
              var _addComment = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee16(t, e, n, i) {
                var o, r;
                return regeneratorRuntime.wrap(function _callee16$(_context16) {
                  while (1) {
                    switch (_context16.prev = _context16.next) {
                      case 0:
                        o = new c["default"](this._documentId, t, n, e, void 0, void 0, i);
                        _context16.next = 3;
                        return this._sendRequest(c["default"].TYPE, o);

                      case 3:
                        r = _context16.sent;
                        return _context16.abrupt("return", a["default"].decode(r, l["default"]));

                      case 5:
                      case "end":
                        return _context16.stop();
                    }
                  }
                }, _callee16, this);
              }));

              function addComment(_x22, _x23, _x24, _x25) {
                return _addComment.apply(this, arguments);
              }

              return addComment;
            }()
          }, {
            key: "updateComment",
            value: function () {
              var _updateComment = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee17(t, e, n, i) {
                var o, r;
                return regeneratorRuntime.wrap(function _callee17$(_context17) {
                  while (1) {
                    switch (_context17.prev = _context17.next) {
                      case 0:
                        o = void 0 !== i, r = new g["default"](this._documentId, t, e, n, i, o);
                        _context17.next = 3;
                        return this._sendRequest(g["default"].TYPE, r);

                      case 3:
                      case "end":
                        return _context17.stop();
                    }
                  }
                }, _callee17, this);
              }));

              function updateComment(_x26, _x27, _x28, _x29) {
                return _updateComment.apply(this, arguments);
              }

              return updateComment;
            }()
          }, {
            key: "removeComment",
            value: function () {
              var _removeComment = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee18(t, e) {
                var n;
                return regeneratorRuntime.wrap(function _callee18$(_context18) {
                  while (1) {
                    switch (_context18.prev = _context18.next) {
                      case 0:
                        n = new h["default"](this._documentId, t, e);
                        _context18.next = 3;
                        return this._sendRequest(h["default"].TYPE, n);

                      case 3:
                      case "end":
                        return _context18.stop();
                    }
                  }
                }, _callee18, this);
              }));

              function removeComment(_x30, _x31) {
                return _removeComment.apply(this, arguments);
              }

              return removeComment;
            }()
          }, {
            key: "removeCommentThread",
            value: function () {
              var _removeCommentThread = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee19(t) {
                var e;
                return regeneratorRuntime.wrap(function _callee19$(_context19) {
                  while (1) {
                    switch (_context19.prev = _context19.next) {
                      case 0:
                        e = new f["default"](this._documentId, t);
                        _context19.next = 3;
                        return this._sendRequest(f["default"].TYPE, e);

                      case 3:
                      case "end":
                        return _context19.stop();
                    }
                  }
                }, _callee19, this);
              }));

              function removeCommentThread(_x32) {
                return _removeCommentThread.apply(this, arguments);
              }

              return removeCommentThread;
            }()
          }, {
            key: "getCommentThread",
            value: function () {
              var _getCommentThread = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee20(t) {
                var e,
                    n,
                    _o7,
                    _a$default$decode2,
                    _r6,
                    _s2,
                    i,
                    _args20 = arguments;

                return regeneratorRuntime.wrap(function _callee20$(_context20) {
                  while (1) {
                    switch (_context20.prev = _context20.next) {
                      case 0:
                        e = _args20.length > 1 && _args20[1] !== undefined ? _args20[1] : 1;
                        n = new m["default"](t, this._documentId);
                        _context20.prev = 2;
                        _context20.next = 5;
                        return this._sendRequest(m["default"].TYPE, n);

                      case 5:
                        _o7 = _context20.sent;
                        _a$default$decode2 = a["default"].decode(_o7, p["default"]);
                        _r6 = _a$default$decode2.comments;
                        _s2 = _a$default$decode2.commentThreadId;
                        return _context20.abrupt("return", {
                          comments: _r6,
                          commentThreadId: _s2
                        });

                      case 12:
                        _context20.prev = 12;
                        _context20.t0 = _context20["catch"](2);

                        if (!(_context20.t0 instanceof w["default"] && "404" === _context20.t0.code && e < 5)) {
                          _context20.next = 18;
                          break;
                        }

                        _context20.next = 17;
                        return i = 100 * e, new Promise(function (t) {
                          setTimeout(t, i);
                        });

                      case 17:
                        return _context20.abrupt("return", this.getCommentThread(t, e + 1));

                      case 18:
                        if (!(_context20.t0 instanceof w["default"])) {
                          _context20.next = 20;
                          break;
                        }

                        throw _context20.t0;

                      case 20:
                        throw new w["default"](_context20.t0.message, this._wsGateway);

                      case 21:
                      case "end":
                        return _context20.stop();
                    }
                  }
                }, _callee20, this, [[2, 12]]);
              }));

              function getCommentThread(_x33) {
                return _getCommentThread.apply(this, arguments);
              }

              return getCommentThread;
            }()
          }, {
            key: "getDocumentThreads",
            value: function () {
              var _getDocumentThreads = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee21() {
                var t, e, _a$default$decode3, n;

                return regeneratorRuntime.wrap(function _callee21$(_context21) {
                  while (1) {
                    switch (_context21.prev = _context21.next) {
                      case 0:
                        t = new b["default"](this._documentId);
                        _context21.next = 3;
                        return this._sendRequest(b["default"].TYPE, t);

                      case 3:
                        e = _context21.sent;
                        _a$default$decode3 = a["default"].decode(e, k["default"]);
                        n = _a$default$decode3.threads;
                        return _context21.abrupt("return", {
                          threads: n
                        });

                      case 7:
                      case "end":
                        return _context21.stop();
                    }
                  }
                }, _callee21, this);
              }));

              function getDocumentThreads() {
                return _getDocumentThreads.apply(this, arguments);
              }

              return getDocumentThreads;
            }()
          }, {
            key: "getConnectedSessions",
            value: function () {
              var _getConnectedSessions3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee22() {
                return regeneratorRuntime.wrap(function _callee22$(_context22) {
                  while (1) {
                    switch (_context22.prev = _context22.next) {
                      case 0:
                        if (this._isConnected) {
                          _context22.next = 2;
                          break;
                        }

                        throw new y["default"]("Comments", this);

                      case 2:
                        _context22.t0 = this._connectedSessions;

                        if (_context22.t0) {
                          _context22.next = 7;
                          break;
                        }

                        _context22.next = 6;
                        return v["default"].getConnectedSessions(this._wsGateway, this._documentId, e._SERVICE);

                      case 6:
                        this._connectedSessions = _context22.sent;

                      case 7:
                        return _context22.abrupt("return", this._connectedSessions);

                      case 8:
                      case "end":
                        return _context22.stop();
                    }
                  }
                }, _callee22, this);
              }));

              function getConnectedSessions() {
                return _getConnectedSessions3.apply(this, arguments);
              }

              return getConnectedSessions;
            }()
          }, {
            key: "_connectToChannel",
            value: function _connectToChannel(t, e) {
              var _this20 = this;

              this._channel = t._getChannel(x._SERVICE, e), this._channel && (this.listenTo(this._channel, this._channel.getEventName(c["default"].TYPE), function (t, e) {
                var n = a["default"].decode(e, c["default"]);

                _this20.fire("commentAdded", n);
              }), this.listenTo(this._channel, this._channel.getEventName(h["default"].TYPE), function (t, e) {
                var n = a["default"].decode(e, h["default"]);

                _this20.fire("commentRemoved", n);
              }), this.listenTo(this._channel, this._channel.getEventName(g["default"].TYPE), function (t, e) {
                var n = a["default"].decode(e, g["default"]);

                _this20.fire("commentUpdated", n);
              }), this.listenTo(this._channel, this._channel.getEventName(f["default"].TYPE), function (t, e) {
                var n = a["default"].decode(e, f["default"]);

                _this20.fire("commentThreadRemoved", n);
              }));
            }
          }, {
            key: "_onWsGatewayStateChange",
            value: function _onWsGatewayStateChange(t) {
              t === _.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED && this.disconnect();
            }
          }, {
            key: "_sendRequest",
            value: function _sendRequest(t, n) {
              if (!this._wsGateway || !this._isConnected) throw new y["default"]("Comments", this);
              return this._wsGateway._sendRequest(e._SERVICE, t, a["default"].encode(n));
            }
          }]);

          return x;
        }();

        x._SERVICE = e._SERVICE, r["default"](x, s["default"]), e["default"] = x;
      }, function (t, e) {
        t.exports = '\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.4zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2z"/></svg>\n';
      }, function (t, e) {
        t.exports = '\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 9.41c0 3.54 3.24 6.42 7.23 6.42 1.03 0 2.02-.19 2.95-.56 1.65.93 1.79.98 3.62 1.63.3.11.57.13.61.05.04-.08.02-.43-.08-.75-.48-1.63-.87-1.77-1.01-3.32a5.87 5.87 0 0 0 1.15-3.47C16.97 5.88 13.72 3 9.73 3S2.5 5.88 2.5 9.41zm9.64 0c0-.52.44-.95.97-.95s.96.43.96.95c0 .53-.43.95-.96.95a.96.96 0 0 1-.97-.95zm-3.37 0c0-.52.43-.95.96-.95.54 0 .97.43.97.95 0 .53-.43.95-.97.95a.96.96 0 0 1-.96-.95zm-3.38 0c0-.52.44-.95.97-.95s.96.43.96.95c0 .53-.43.95-.96.95a.96.96 0 0 1-.97-.95z"/></svg>\n';
      }, function (t, e) {
        t.exports = '\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12 9.4a1 1 0 0 1 2 0c0 .5-.5 1-1 1a1 1 0 0 1-1-1zM8.7 9.4c0-.5.4-1 1-1 .5 0 .9.5.9 1s-.4 1-1 1a1 1 0 0 1-1-1zM6.3 8.5c.5 0 1 .4 1 1 0 .4-.5.9-1 .9a1 1 0 0 1-1-1c0-.5.4-1 1-1z"/><path d="M16 17.4c.6.2 1 .2 1.3-.2V16l-.5-1.1-.3-.7-.3-1.3c.8-1 1.2-2.3 1.2-3.6 0-3.8-3.5-6.9-7.8-6.9-4.2 0-7.7 3-7.7 7 0 3.7 3.5 6.8 7.7 6.8 1 0 2-.1 3-.5 1.4.8 1.6 1 3.4 1.6zm-3.2-2.6h-.4c-.9.4-1.8.5-2.8.5C6 15.3 3 12.7 3 9.4c0-3.2 3-5.9 6.7-5.9 3.8 0 6.8 2.7 6.8 6 0 1-.4 2.2-1 3l-.2.2v.2c0 .7.2 1.2.4 1.8l.3.7a10.4 10.4 0 0 1 .4 1c-1.8-.6-2-.7-3.5-1.6z"/></svg>\n';
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });

        var r = i(n(1)),
            s = i(n(3)),
            a = i(n(32)),
            c = i(n(396)),
            l = i(n(397)),
            d = i(n(398)),
            u = i(n(399)),
            h = i(n(400)),
            f = i(n(401)),
            g = i(n(402)),
            m = i(n(403)),
            p = i(n(404)),
            b = i(n(54)),
            k = o(n(39)),
            _ = i(n(84));

        e._SERVICE = 10;

        var w = /*#__PURE__*/function () {
          function w(t) {
            _classCallCheck(this, w);

            this._documentId = t, this._isConnected = !1;
          }

          _createClass(w, [{
            key: "isConnected",
            get: function get() {
              return this._isConnected;
            }
          }, {
            key: "connect",
            value: function () {
              var _connect5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee23(t) {
                var _this21 = this;

                var n, i, o;
                return regeneratorRuntime.wrap(function _callee23$(_context23) {
                  while (1) {
                    switch (_context23.prev = _context23.next) {
                      case 0:
                        if (!this._isConnected) {
                          _context23.next = 2;
                          break;
                        }

                        return _context23.abrupt("return");

                      case 2:
                        if (!(t.state !== k.WEB_SOCKET_GATEWAY_STATES.CONNECTED)) {
                          _context23.next = 4;
                          break;
                        }

                        throw new b["default"]("WebSocket Gateway is not connected.", t);

                      case 4:
                        n = new m["default"](this._documentId);
                        this._wsGateway = t, this.stopListening(t, "change:state");
                        _context23.next = 8;
                        return t._sendRequest(e._SERVICE, m["default"].TYPE, a["default"].encode(n));

                      case 8:
                        i = _context23.sent;
                        o = a["default"].decode(i, p["default"]);
                        return _context23.abrupt("return", (this.listenTo(t, "change:state", function (t, e, n) {
                          return _this21._onWsGatewayStateChange(n);
                        }, {
                          priority: k["default"]._CHANGE_STATE_EVENT_PRIORITY
                        }), this._connectToChannel(t, o.channel), this._isConnected = !0, this.fire("connected"), o.suggestions));

                      case 11:
                      case "end":
                        return _context23.stop();
                    }
                  }
                }, _callee23, this);
              }));

              function connect(_x34) {
                return _connect5.apply(this, arguments);
              }

              return connect;
            }()
          }, {
            key: "disconnect",
            value: function disconnect() {
              this._isConnected && (this._isConnected = !1, this._wsGateway && (this.stopListening(this._wsGateway), this._wsGateway = void 0), this._channel && (this.stopListening(this._channel), this._channel = void 0), this.fire("disconnected"), this.stopListening());
            }
          }, {
            key: "add",
            value: function () {
              var _add = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee24(t, e, n) {
                var i,
                    o,
                    r,
                    s,
                    _args24 = arguments;
                return regeneratorRuntime.wrap(function _callee24$(_context24) {
                  while (1) {
                    switch (_context24.prev = _context24.next) {
                      case 0:
                        i = _args24.length > 3 && _args24[3] !== undefined ? _args24[3] : null;
                        o = _args24.length > 4 ? _args24[4] : undefined;
                        r = new c["default"](t, this._documentId, e, n, i, o);
                        _context24.next = 5;
                        return this._sendRequest(c["default"].TYPE, r);

                      case 5:
                        s = _context24.sent;
                        return _context24.abrupt("return", a["default"].decode(s, l["default"]));

                      case 7:
                      case "end":
                        return _context24.stop();
                    }
                  }
                }, _callee24, this);
              }));

              function add(_x35, _x36, _x37) {
                return _add.apply(this, arguments);
              }

              return add;
            }()
          }, {
            key: "get",
            value: function () {
              var _get2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee25(t) {
                var e,
                    n,
                    _o8,
                    i,
                    _args25 = arguments;

                return regeneratorRuntime.wrap(function _callee25$(_context25) {
                  while (1) {
                    switch (_context25.prev = _context25.next) {
                      case 0:
                        e = _args25.length > 1 && _args25[1] !== undefined ? _args25[1] : 1;
                        n = new d["default"](t, this._documentId);
                        _context25.prev = 2;
                        _context25.next = 5;
                        return this._sendRequest(d["default"].TYPE, n);

                      case 5:
                        _o8 = _context25.sent;
                        return _context25.abrupt("return", a["default"].decode(_o8, u["default"]));

                      case 9:
                        _context25.prev = 9;
                        _context25.t0 = _context25["catch"](2);

                        if (!(_context25.t0 instanceof b["default"] && "404" === _context25.t0.code && e < 5)) {
                          _context25.next = 15;
                          break;
                        }

                        _context25.next = 14;
                        return i = 100 * e, new Promise(function (t) {
                          setTimeout(t, i);
                        });

                      case 14:
                        return _context25.abrupt("return", this.get(t, e + 1));

                      case 15:
                        if (!(_context25.t0 instanceof b["default"])) {
                          _context25.next = 17;
                          break;
                        }

                        throw _context25.t0;

                      case 17:
                        throw new b["default"](_context25.t0.message, this._wsGateway);

                      case 18:
                      case "end":
                        return _context25.stop();
                    }
                  }
                }, _callee25, this, [[2, 9]]);
              }));

              function get(_x38) {
                return _get2.apply(this, arguments);
              }

              return get;
            }()
          }, {
            key: "getAll",
            value: function () {
              var _getAll = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee26() {
                var t, e, _a$default$decode4, n;

                return regeneratorRuntime.wrap(function _callee26$(_context26) {
                  while (1) {
                    switch (_context26.prev = _context26.next) {
                      case 0:
                        t = new h["default"](this._documentId);
                        _context26.next = 3;
                        return this._sendRequest(h["default"].TYPE, t);

                      case 3:
                        e = _context26.sent;
                        _a$default$decode4 = a["default"].decode(e, f["default"]);
                        n = _a$default$decode4.suggestions;
                        return _context26.abrupt("return", n);

                      case 7:
                      case "end":
                        return _context26.stop();
                    }
                  }
                }, _callee26, this);
              }));

              function getAll() {
                return _getAll.apply(this, arguments);
              }

              return getAll;
            }()
          }, {
            key: "update",
            value: function () {
              var _update = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee27(t) {
                var e,
                    n,
                    i,
                    o,
                    r,
                    s,
                    _args27 = arguments;
                return regeneratorRuntime.wrap(function _callee27$(_context27) {
                  while (1) {
                    switch (_context27.prev = _context27.next) {
                      case 0:
                        e = _args27.length > 1 && _args27[1] !== undefined ? _args27[1] : {};
                        n = e.hasComments, i = e.state, o = e.attributes, r = void 0 !== n, s = new g["default"](t, this._documentId, n, r, i, o);
                        _context27.next = 4;
                        return this._sendRequest(g["default"].TYPE, s);

                      case 4:
                      case "end":
                        return _context27.stop();
                    }
                  }
                }, _callee27, this);
              }));

              function update(_x39) {
                return _update.apply(this, arguments);
              }

              return update;
            }()
          }, {
            key: "_connectToChannel",
            value: function _connectToChannel(t, e) {
              var _this22 = this;

              this._channel = t._getChannel(w._SERVICE, e), this._channel && this.listenTo(this._channel, this._channel.getEventName(g["default"].TYPE), function (t, e) {
                var n = a["default"].decode(e, g["default"]);

                _this22.fire("suggestionUpdated", n);
              });
            }
          }, {
            key: "_onWsGatewayStateChange",
            value: function _onWsGatewayStateChange(t) {
              t === k.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED && this.disconnect();
            }
          }, {
            key: "_sendRequest",
            value: function _sendRequest(t, n) {
              if (!this._wsGateway || !this._isConnected) throw new _["default"]("Track Changes", this);
              return this._wsGateway._sendRequest(e._SERVICE, t, a["default"].encode(n));
            }
          }]);

          return w;
        }();

        w._SERVICE = e._SERVICE, r["default"](w, s["default"]), e["default"] = w;
      }, function (t, e) {
        t.exports = '\x3c!--\n\n What you\'re currently looking at is the source code of a legally protected, proprietary software.\n CKEditor 5 Collaboration is licensed under a commercial license and protected by copyright law. Where not otherwise indicated,\n all CKEditor 5 Collaboration content is authored by CKSource engineers and consists of CKSource-owned intellectual property.\n\n Copyright (c) 2003-2021, CKSource Frederico Knabben. All rights reserved.\n\n!--\x3e\n\n<svg viewBox="0 0 20 20" width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M1 3.28C1 2.574 1.574 2 2.272 2h10.23c.703 0 1.272.573 1.272 1.28v12.768c0 .708-.574 1.281-1.271 1.281H2.272A1.276 1.276 0 0 1 1 16.049V3.28zm11.503 12.954c-.008 0-.006-12.77-.006-12.77 0-.003-10.225-.004-10.225-.004.007 0 .005 12.77.005 12.77 0 .003 10.226.004 10.226.004zm-8.31-9.58c0-.353.292-.64.636-.64h5.116c.351 0 .636.284.636.64a.641.641 0 0 1-.636.638H4.829a.636.636 0 0 1-.635-.639zm0 2.554c0-.352.292-.638.636-.638h5.116c.351 0 .636.283.636.638a.641.641 0 0 1-.636.639H4.829a.636.636 0 0 1-.635-.639zm0 2.555c0-.353.289-.639.633-.639h2.567c.35 0 .633.284.633.64a.639.639 0 0 1-.633.638H4.826a.634.634 0 0 1-.632-.639z"/><path d="M10.515 17.958l.154-.23c-.195-.099-.304-.193-.328-.28-.024-.09.001-.275.076-.552.062-.165.099-.296.111-.393.013-.159.013-.319 0-.478-.138-.41-.2-.686-.187-.83.013-.145.117-.335.313-.57l4.465-6.208c.356-.6 1.059-.56 2.11.119 1.051.68 1.443 1.271 1.177 1.771L14.53 17.14c-.105.271-.22.444-.347.516-.128.07-.399.118-.813.138a2.954 2.954 0 0 0-.487.21 2.044 2.044 0 0 0-.347.31c-.193.174-.332.262-.416.262-.064 0-.178-.05-.346-.15l-.204.27-1.056-.738h.001zm-.184.274l1.039.727-.259.34H9.614l.717-1.067z"/></g></svg>\n';
      }, function (t, e, n) {
        var i = n(2),
            o = n(181);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(183);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(185);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(187);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(189);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(191);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(193);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{content:"";position:absolute;width:1px;height:100%;background-color:var(--ck-color-split-button-hover-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(195);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(197);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(199);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(201);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(203);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(205);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(207);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(209);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(211);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(213);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(215);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(217);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(219);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(221);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(223);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(225);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(227);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(229);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(231);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:0 var(--ck-spacing-small);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{top:calc(var(--ck-resizer-tooltip-height)*-1);left:50%;transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness));top:0}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(233);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);transform:translateX(-50%);border-left:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-bottom:0 solid transparent;border-right:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-top:calc(var(--ck-clipboard-drop-target-dot-height)) solid var(--ck-clipboard-drop-target-color)}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(235);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}";
      }, function (t, e) {
        t.exports = ".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(238);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(240);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}";
      }, function (t, e) {
        t.exports = '.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}';
      }, function (t, e) {
        t.exports = ".ck-content .image{display:table;clear:both;text-align:center;margin:.9em auto;min-width:50px}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{display:inline-flex;max-width:100%;align-items:flex-start}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ck.ck-editor__editable .image-inline.ck-widget_selected,.ck.ck-editor__editable .image.ck-widget_selected{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(244);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highligted-background:#fd0}.ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:var(--ck-color-image-caption-text);background-color:var(--ck-color-image-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highligted-background)}to{background-color:var(--ck-color-image-caption-background)}}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(246);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(248);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image-style-block-align-left,.ck-content .image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image-style-align-left,.ck-content .image-style-align-right{clear:none}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-block-align-right{margin-right:0;margin-left:auto}.ck-content .image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content p+.image-style-align-left,.ck-content p+.image-style-align-right,.ck-content p+.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-top:var(--ck-inline-image-style-spacing);margin-bottom:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(250);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(252);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck-image-upload-complete-icon{display:block;position:absolute;top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);border-radius:50%;z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:calc(1px*var(--ck-image-upload-icon-size));animation-delay:0ms,3s;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(254);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(256);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(258);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(260);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(262);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(264);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(266);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .media{clear:both;margin:.9em 0;display:block;min-width:15em}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(268);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(270);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(272);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(274);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .table{margin:.9em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(276);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(278);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(280);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#62f962;--ck-highlight-marker-pink:#fc7899;--ck-highlight-marker-blue:#72ccfd;--ck-highlight-pen-red:#e71313;--ck-highlight-pen-green:#128a00}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{color:var(--ck-highlight-pen-red);background-color:transparent}.ck-content .pen-green{color:var(--ck-highlight-pen-green);background-color:transparent}";
      }, function (t, e, n) {
        var i = n(282),
            o = n(72),
            r = n(91),
            s = n(24)("socket.io-client");
        t.exports = e = c;
        var a = e.managers = {};

        function c(t, e) {
          "object" == typeof t && (e = t, t = void 0), e = e || {};
          var n,
              o = i(t),
              c = o.source,
              l = o.id,
              d = o.path,
              u = a[l] && d in a[l].nsps;
          return e.forceNew || e["force new connection"] || !1 === e.multiplex || u ? (s("ignoring socket cache for %s", c), n = r(c, e)) : (a[l] || (s("new io instance for %s", c), a[l] = r(c, e)), n = a[l]), o.query && !e.query && (e.query = o.query), n.socket(o.path, e);
        }

        e.protocol = o.protocol, e.connect = c, e.Manager = n(91), e.Socket = n(97);
      }, function (t, e, n) {
        var i = n(89),
            o = n(24)("socket.io-client:url");

        t.exports = function (t, e) {
          var n = t;
          e = e || "undefined" != typeof location && location, null == t && (t = e.protocol + "//" + e.host);
          "string" == typeof t && ("/" === t.charAt(0) && (t = "/" === t.charAt(1) ? e.protocol + t : e.host + t), /^(https?|wss?):\/\//.test(t) || (o("protocol-less url %s", t), t = void 0 !== e ? e.protocol + "//" + t : "https://" + t), o("parse %s", t), n = i(t));
          n.port || (/^(http|ws)$/.test(n.protocol) ? n.port = "80" : /^(http|ws)s$/.test(n.protocol) && (n.port = "443"));
          n.path = n.path || "/";
          var r = -1 !== n.host.indexOf(":") ? "[" + n.host + "]" : n.host;
          return n.id = n.protocol + "://" + r + ":" + n.port, n.href = n.protocol + "://" + r + (e && e.port === n.port ? "" : ":" + n.port), n;
        };
      }, function (t, e, n) {
        function i(t) {
          var n;

          function i() {
            if (i.enabled) {
              var t = i,
                  o = +new Date(),
                  r = o - (n || o);
              t.diff = r, t.prev = n, t.curr = o, n = o;

              for (var s = new Array(arguments.length), a = 0; a < s.length; a++) {
                s[a] = arguments[a];
              }

              s[0] = e.coerce(s[0]), "string" != typeof s[0] && s.unshift("%O");
              var c = 0;
              s[0] = s[0].replace(/%([a-zA-Z%])/g, function (n, i) {
                if ("%%" === n) return n;
                c++;
                var o = e.formatters[i];

                if ("function" == typeof o) {
                  var r = s[c];
                  n = o.call(t, r), s.splice(c, 1), c--;
                }

                return n;
              }), e.formatArgs.call(t, s), (i.log || e.log || console.log.bind(console)).apply(t, s);
            }
          }

          return i.namespace = t, i.enabled = e.enabled(t), i.useColors = e.useColors(), i.color = function (t) {
            var n,
                i = 0;

            for (n in t) {
              i = (i << 5) - i + t.charCodeAt(n), i |= 0;
            }

            return e.colors[Math.abs(i) % e.colors.length];
          }(t), i.destroy = o, "function" == typeof e.init && e.init(i), e.instances.push(i), i;
        }

        function o() {
          var t = e.instances.indexOf(this);
          return -1 !== t && (e.instances.splice(t, 1), !0);
        }

        (e = t.exports = i.debug = i["default"] = i).coerce = function (t) {
          return t instanceof Error ? t.stack || t.message : t;
        }, e.disable = function () {
          e.enable("");
        }, e.enable = function (t) {
          var n;
          e.save(t), e.names = [], e.skips = [];
          var i = ("string" == typeof t ? t : "").split(/[\s,]+/),
              o = i.length;

          for (n = 0; n < o; n++) {
            i[n] && ("-" === (t = i[n].replace(/\*/g, ".*?"))[0] ? e.skips.push(new RegExp("^" + t.substr(1) + "$")) : e.names.push(new RegExp("^" + t + "$")));
          }

          for (n = 0; n < e.instances.length; n++) {
            var r = e.instances[n];
            r.enabled = e.enabled(r.namespace);
          }
        }, e.enabled = function (t) {
          if ("*" === t[t.length - 1]) return !0;
          var n, i;

          for (n = 0, i = e.skips.length; n < i; n++) {
            if (e.skips[n].test(t)) return !1;
          }

          for (n = 0, i = e.names.length; n < i; n++) {
            if (e.names[n].test(t)) return !0;
          }

          return !1;
        }, e.humanize = n(284), e.instances = [], e.names = [], e.skips = [], e.formatters = {};
      }, function (t, e) {
        var n = 1e3,
            i = 60 * n,
            o = 60 * i,
            r = 24 * o,
            s = 365.25 * r;

        function a(t, e, n) {
          if (!(t < e)) return t < 1.5 * e ? Math.floor(t / e) + " " + n : Math.ceil(t / e) + " " + n + "s";
        }

        t.exports = function (t, e) {
          e = e || {};
          var c = typeof t;
          if ("string" === c && t.length > 0) return function (t) {
            if ((t = String(t)).length > 100) return;
            var e = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);
            if (!e) return;
            var a = parseFloat(e[1]);

            switch ((e[2] || "ms").toLowerCase()) {
              case "years":
              case "year":
              case "yrs":
              case "yr":
              case "y":
                return a * s;

              case "days":
              case "day":
              case "d":
                return a * r;

              case "hours":
              case "hour":
              case "hrs":
              case "hr":
              case "h":
                return a * o;

              case "minutes":
              case "minute":
              case "mins":
              case "min":
              case "m":
                return a * i;

              case "seconds":
              case "second":
              case "secs":
              case "sec":
              case "s":
                return a * n;

              case "milliseconds":
              case "millisecond":
              case "msecs":
              case "msec":
              case "ms":
                return a;

              default:
                return;
            }
          }(t);
          if ("number" === c && !1 === isNaN(t)) return e["long"] ? function (t) {
            return a(t, r, "day") || a(t, o, "hour") || a(t, i, "minute") || a(t, n, "second") || t + " ms";
          }(t) : function (t) {
            if (t >= r) return Math.round(t / r) + "d";
            if (t >= o) return Math.round(t / o) + "h";
            if (t >= i) return Math.round(t / i) + "m";
            if (t >= n) return Math.round(t / n) + "s";
            return t + "ms";
          }(t);
          throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(t));
        };
      }, function (t, e, n) {
        var i = n(50),
            o = n(90),
            r = Object.prototype.toString,
            s = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === r.call(Blob),
            a = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === r.call(File);
        e.deconstructPacket = function (t) {
          var e = [],
              n = t.data,
              r = t;
          return r.data = function t(e, n) {
            if (!e) return e;

            if (o(e)) {
              var r = {
                _placeholder: !0,
                num: n.length
              };
              return n.push(e), r;
            }

            if (i(e)) {
              for (var s = new Array(e.length), a = 0; a < e.length; a++) {
                s[a] = t(e[a], n);
              }

              return s;
            }

            if ("object" == typeof e && !(e instanceof Date)) {
              var s = {};

              for (var c in e) {
                s[c] = t(e[c], n);
              }

              return s;
            }

            return e;
          }(n, e), r.attachments = e.length, {
            packet: r,
            buffers: e
          };
        }, e.reconstructPacket = function (t, e) {
          return t.data = function t(e, n) {
            if (!e) return e;
            if (e && e._placeholder) return n[e.num];
            if (i(e)) for (var o = 0; o < e.length; o++) {
              e[o] = t(e[o], n);
            } else if ("object" == typeof e) for (var r in e) {
              e[r] = t(e[r], n);
            }
            return e;
          }(t.data, e), t.attachments = void 0, t;
        }, e.removeBlobs = function (t, e) {
          var n = 0,
              r = t;
          !function t(c, l, d) {
            if (!c) return c;

            if (s && c instanceof Blob || a && c instanceof File) {
              n++;
              var u = new FileReader();
              u.onload = function () {
                d ? d[l] = this.result : r = this.result, --n || e(r);
              }, u.readAsArrayBuffer(c);
            } else if (i(c)) for (var h = 0; h < c.length; h++) {
              t(c[h], h, c);
            } else if ("object" == typeof c && !o(c)) for (var f in c) {
              t(c[f], f, c);
            }
          }(r), n || e(r);
        };
      }, function (t, e, n) {
        "use strict";

        e.byteLength = function (t) {
          var e = l(t),
              n = e[0],
              i = e[1];
          return 3 * (n + i) / 4 - i;
        }, e.toByteArray = function (t) {
          var e,
              n,
              i = l(t),
              s = i[0],
              a = i[1],
              c = new r(function (t, e, n) {
            return 3 * (e + n) / 4 - n;
          }(0, s, a)),
              d = 0,
              u = a > 0 ? s - 4 : s;

          for (n = 0; n < u; n += 4) {
            e = o[t.charCodeAt(n)] << 18 | o[t.charCodeAt(n + 1)] << 12 | o[t.charCodeAt(n + 2)] << 6 | o[t.charCodeAt(n + 3)], c[d++] = e >> 16 & 255, c[d++] = e >> 8 & 255, c[d++] = 255 & e;
          }

          2 === a && (e = o[t.charCodeAt(n)] << 2 | o[t.charCodeAt(n + 1)] >> 4, c[d++] = 255 & e);
          1 === a && (e = o[t.charCodeAt(n)] << 10 | o[t.charCodeAt(n + 1)] << 4 | o[t.charCodeAt(n + 2)] >> 2, c[d++] = e >> 8 & 255, c[d++] = 255 & e);
          return c;
        }, e.fromByteArray = function (t) {
          for (var e, n = t.length, o = n % 3, r = [], s = 0, a = n - o; s < a; s += 16383) {
            r.push(u(t, s, s + 16383 > a ? a : s + 16383));
          }

          1 === o ? (e = t[n - 1], r.push(i[e >> 2] + i[e << 4 & 63] + "==")) : 2 === o && (e = (t[n - 2] << 8) + t[n - 1], r.push(i[e >> 10] + i[e >> 4 & 63] + i[e << 2 & 63] + "="));
          return r.join("");
        };

        for (var i = [], o = [], r = "undefined" != typeof Uint8Array ? Uint8Array : Array, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = 0, c = s.length; a < c; ++a) {
          i[a] = s[a], o[s.charCodeAt(a)] = a;
        }

        function l(t) {
          var e = t.length;
          if (e % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
          var n = t.indexOf("=");
          return -1 === n && (n = e), [n, n === e ? 0 : 4 - n % 4];
        }

        function d(t) {
          return i[t >> 18 & 63] + i[t >> 12 & 63] + i[t >> 6 & 63] + i[63 & t];
        }

        function u(t, e, n) {
          for (var i, o = [], r = e; r < n; r += 3) {
            i = (t[r] << 16 & 16711680) + (t[r + 1] << 8 & 65280) + (255 & t[r + 2]), o.push(d(i));
          }

          return o.join("");
        }

        o["-".charCodeAt(0)] = 62, o["_".charCodeAt(0)] = 63;
      }, function (t, e) {
        /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
        e.read = function (t, e, n, i, o) {
          var r,
              s,
              a = 8 * o - i - 1,
              c = (1 << a) - 1,
              l = c >> 1,
              d = -7,
              u = n ? o - 1 : 0,
              h = n ? -1 : 1,
              f = t[e + u];

          for (u += h, r = f & (1 << -d) - 1, f >>= -d, d += a; d > 0; r = 256 * r + t[e + u], u += h, d -= 8) {
            ;
          }

          for (s = r & (1 << -d) - 1, r >>= -d, d += i; d > 0; s = 256 * s + t[e + u], u += h, d -= 8) {
            ;
          }

          if (0 === r) r = 1 - l;else {
            if (r === c) return s ? NaN : 1 / 0 * (f ? -1 : 1);
            s += Math.pow(2, i), r -= l;
          }
          return (f ? -1 : 1) * s * Math.pow(2, r - i);
        }, e.write = function (t, e, n, i, o, r) {
          var s,
              a,
              c,
              l = 8 * r - o - 1,
              d = (1 << l) - 1,
              u = d >> 1,
              h = 23 === o ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
              f = i ? 0 : r - 1,
              g = i ? 1 : -1,
              m = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;

          for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, s = d) : (s = Math.floor(Math.log(e) / Math.LN2), e * (c = Math.pow(2, -s)) < 1 && (s--, c *= 2), (e += s + u >= 1 ? h / c : h * Math.pow(2, 1 - u)) * c >= 2 && (s++, c /= 2), s + u >= d ? (a = 0, s = d) : s + u >= 1 ? (a = (e * c - 1) * Math.pow(2, o), s += u) : (a = e * Math.pow(2, u - 1) * Math.pow(2, o), s = 0)); o >= 8; t[n + f] = 255 & a, f += g, a /= 256, o -= 8) {
            ;
          }

          for (s = s << o | a, l += o; l > 0; t[n + f] = 255 & s, f += g, s /= 256, l -= 8) {
            ;
          }

          t[n + f - g] |= 128 * m;
        };
      }, function (t, e) {
        var n = {}.toString;

        t.exports = Array.isArray || function (t) {
          return "[object Array]" == n.call(t);
        };
      }, function (t, e, n) {
        t.exports = n(290), t.exports.parser = n(36);
      }, function (t, e, n) {
        var i = n(92),
            o = n(35),
            r = n(24)("engine.io-client:socket"),
            s = n(96),
            a = n(36),
            c = n(89),
            l = n(57);

        function d(t, e) {
          if (!(this instanceof d)) return new d(t, e);
          e = e || {}, t && "object" == typeof t && (e = t, t = null), t ? (t = c(t), e.hostname = t.host, e.secure = "https" === t.protocol || "wss" === t.protocol, e.port = t.port, t.query && (e.query = t.query)) : e.host && (e.hostname = c(e.host).host), this.secure = null != e.secure ? e.secure : "undefined" != typeof location && "https:" === location.protocol, e.hostname && !e.port && (e.port = this.secure ? "443" : "80"), this.agent = e.agent || !1, this.hostname = e.hostname || ("undefined" != typeof location ? location.hostname : "localhost"), this.port = e.port || ("undefined" != typeof location && location.port ? location.port : this.secure ? 443 : 80), this.query = e.query || {}, "string" == typeof this.query && (this.query = l.decode(this.query)), this.upgrade = !1 !== e.upgrade, this.path = (e.path || "/engine.io").replace(/\/$/, "") + "/", this.forceJSONP = !!e.forceJSONP, this.jsonp = !1 !== e.jsonp, this.forceBase64 = !!e.forceBase64, this.enablesXDR = !!e.enablesXDR, this.withCredentials = !1 !== e.withCredentials, this.timestampParam = e.timestampParam || "t", this.timestampRequests = e.timestampRequests, this.transports = e.transports || ["polling", "websocket"], this.transportOptions = e.transportOptions || {}, this.readyState = "", this.writeBuffer = [], this.prevBufferLen = 0, this.policyPort = e.policyPort || 843, this.rememberUpgrade = e.rememberUpgrade || !1, this.binaryType = null, this.onlyBinaryUpgrades = e.onlyBinaryUpgrades, this.perMessageDeflate = !1 !== e.perMessageDeflate && (e.perMessageDeflate || {}), !0 === this.perMessageDeflate && (this.perMessageDeflate = {}), this.perMessageDeflate && null == this.perMessageDeflate.threshold && (this.perMessageDeflate.threshold = 1024), this.pfx = e.pfx || void 0, this.key = e.key || void 0, this.passphrase = e.passphrase || void 0, this.cert = e.cert || void 0, this.ca = e.ca || void 0, this.ciphers = e.ciphers || void 0, this.rejectUnauthorized = void 0 === e.rejectUnauthorized || e.rejectUnauthorized, this.forceNode = !!e.forceNode, this.isReactNative = "undefined" != typeof navigator && "string" == typeof navigator.product && "reactnative" === navigator.product.toLowerCase(), ("undefined" == typeof self || this.isReactNative) && (e.extraHeaders && Object.keys(e.extraHeaders).length > 0 && (this.extraHeaders = e.extraHeaders), e.localAddress && (this.localAddress = e.localAddress)), this.id = null, this.upgrades = null, this.pingInterval = null, this.pingTimeout = null, this.pingIntervalTimer = null, this.pingTimeoutTimer = null, this.open();
        }

        t.exports = d, d.priorWebsocketSuccess = !1, o(d.prototype), d.protocol = a.protocol, d.Socket = d, d.Transport = n(75), d.transports = n(92), d.parser = n(36), d.prototype.createTransport = function (t) {
          r('creating transport "%s"', t);

          var e = function (t) {
            var e = {};

            for (var n in t) {
              t.hasOwnProperty(n) && (e[n] = t[n]);
            }

            return e;
          }(this.query);

          e.EIO = a.protocol, e.transport = t;
          var n = this.transportOptions[t] || {};
          return this.id && (e.sid = this.id), new i[t]({
            query: e,
            socket: this,
            agent: n.agent || this.agent,
            hostname: n.hostname || this.hostname,
            port: n.port || this.port,
            secure: n.secure || this.secure,
            path: n.path || this.path,
            forceJSONP: n.forceJSONP || this.forceJSONP,
            jsonp: n.jsonp || this.jsonp,
            forceBase64: n.forceBase64 || this.forceBase64,
            enablesXDR: n.enablesXDR || this.enablesXDR,
            withCredentials: n.withCredentials || this.withCredentials,
            timestampRequests: n.timestampRequests || this.timestampRequests,
            timestampParam: n.timestampParam || this.timestampParam,
            policyPort: n.policyPort || this.policyPort,
            pfx: n.pfx || this.pfx,
            key: n.key || this.key,
            passphrase: n.passphrase || this.passphrase,
            cert: n.cert || this.cert,
            ca: n.ca || this.ca,
            ciphers: n.ciphers || this.ciphers,
            rejectUnauthorized: n.rejectUnauthorized || this.rejectUnauthorized,
            perMessageDeflate: n.perMessageDeflate || this.perMessageDeflate,
            extraHeaders: n.extraHeaders || this.extraHeaders,
            forceNode: n.forceNode || this.forceNode,
            localAddress: n.localAddress || this.localAddress,
            requestTimeout: n.requestTimeout || this.requestTimeout,
            protocols: n.protocols || void 0,
            isReactNative: this.isReactNative
          });
        }, d.prototype.open = function () {
          var t;
          if (this.rememberUpgrade && d.priorWebsocketSuccess && -1 !== this.transports.indexOf("websocket")) t = "websocket";else {
            if (0 === this.transports.length) {
              var e = this;
              return void setTimeout(function () {
                e.emit("error", "No transports available");
              }, 0);
            }

            t = this.transports[0];
          }
          this.readyState = "opening";

          try {
            t = this.createTransport(t);
          } catch (t) {
            return this.transports.shift(), void this.open();
          }

          t.open(), this.setTransport(t);
        }, d.prototype.setTransport = function (t) {
          r("setting transport %s", t.name);
          var e = this;
          this.transport && (r("clearing existing transport %s", this.transport.name), this.transport.removeAllListeners()), this.transport = t, t.on("drain", function () {
            e.onDrain();
          }).on("packet", function (t) {
            e.onPacket(t);
          }).on("error", function (t) {
            e.onError(t);
          }).on("close", function () {
            e.onClose("transport close");
          });
        }, d.prototype.probe = function (t) {
          r('probing transport "%s"', t);
          var e = this.createTransport(t, {
            probe: 1
          }),
              n = !1,
              i = this;

          function o() {
            if (i.onlyBinaryUpgrades) {
              var o = !this.supportsBinary && i.transport.supportsBinary;
              n = n || o;
            }

            n || (r('probe transport "%s" opened', t), e.send([{
              type: "ping",
              data: "probe"
            }]), e.once("packet", function (o) {
              if (!n) if ("pong" === o.type && "probe" === o.data) {
                if (r('probe transport "%s" pong', t), i.upgrading = !0, i.emit("upgrading", e), !e) return;
                d.priorWebsocketSuccess = "websocket" === e.name, r('pausing current transport "%s"', i.transport.name), i.transport.pause(function () {
                  n || "closed" !== i.readyState && (r("changing transport and sending upgrade packet"), h(), i.setTransport(e), e.send([{
                    type: "upgrade"
                  }]), i.emit("upgrade", e), e = null, i.upgrading = !1, i.flush());
                });
              } else {
                r('probe transport "%s" failed', t);
                var s = new Error("probe error");
                s.transport = e.name, i.emit("upgradeError", s);
              }
            }));
          }

          function s() {
            n || (n = !0, h(), e.close(), e = null);
          }

          function a(n) {
            var o = new Error("probe error: " + n);
            o.transport = e.name, s(), r('probe transport "%s" failed because of error: %s', t, n), i.emit("upgradeError", o);
          }

          function c() {
            a("transport closed");
          }

          function l() {
            a("socket closed");
          }

          function u(t) {
            e && t.name !== e.name && (r('"%s" works - aborting "%s"', t.name, e.name), s());
          }

          function h() {
            e.removeListener("open", o), e.removeListener("error", a), e.removeListener("close", c), i.removeListener("close", l), i.removeListener("upgrading", u);
          }

          d.priorWebsocketSuccess = !1, e.once("open", o), e.once("error", a), e.once("close", c), this.once("close", l), this.once("upgrading", u), e.open();
        }, d.prototype.onOpen = function () {
          if (r("socket open"), this.readyState = "open", d.priorWebsocketSuccess = "websocket" === this.transport.name, this.emit("open"), this.flush(), "open" === this.readyState && this.upgrade && this.transport.pause) {
            r("starting upgrade probes");

            for (var t = 0, e = this.upgrades.length; t < e; t++) {
              this.probe(this.upgrades[t]);
            }
          }
        }, d.prototype.onPacket = function (t) {
          if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) switch (r('socket receive: type "%s", data "%s"', t.type, t.data), this.emit("packet", t), this.emit("heartbeat"), t.type) {
            case "open":
              this.onHandshake(JSON.parse(t.data));
              break;

            case "pong":
              this.setPing(), this.emit("pong");
              break;

            case "error":
              var e = new Error("server error");
              e.code = t.data, this.onError(e);
              break;

            case "message":
              this.emit("data", t.data), this.emit("message", t.data);
          } else r('packet received with socket readyState "%s"', this.readyState);
        }, d.prototype.onHandshake = function (t) {
          this.emit("handshake", t), this.id = t.sid, this.transport.query.sid = t.sid, this.upgrades = this.filterUpgrades(t.upgrades), this.pingInterval = t.pingInterval, this.pingTimeout = t.pingTimeout, this.onOpen(), "closed" !== this.readyState && (this.setPing(), this.removeListener("heartbeat", this.onHeartbeat), this.on("heartbeat", this.onHeartbeat));
        }, d.prototype.onHeartbeat = function (t) {
          clearTimeout(this.pingTimeoutTimer);
          var e = this;
          e.pingTimeoutTimer = setTimeout(function () {
            "closed" !== e.readyState && e.onClose("ping timeout");
          }, t || e.pingInterval + e.pingTimeout);
        }, d.prototype.setPing = function () {
          var t = this;
          clearTimeout(t.pingIntervalTimer), t.pingIntervalTimer = setTimeout(function () {
            r("writing ping packet - expecting pong within %sms", t.pingTimeout), t.ping(), t.onHeartbeat(t.pingTimeout);
          }, t.pingInterval);
        }, d.prototype.ping = function () {
          var t = this;
          this.sendPacket("ping", function () {
            t.emit("ping");
          });
        }, d.prototype.onDrain = function () {
          this.writeBuffer.splice(0, this.prevBufferLen), this.prevBufferLen = 0, 0 === this.writeBuffer.length ? this.emit("drain") : this.flush();
        }, d.prototype.flush = function () {
          "closed" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length && (r("flushing %d packets in socket", this.writeBuffer.length), this.transport.send(this.writeBuffer), this.prevBufferLen = this.writeBuffer.length, this.emit("flush"));
        }, d.prototype.write = d.prototype.send = function (t, e, n) {
          return this.sendPacket("message", t, e, n), this;
        }, d.prototype.sendPacket = function (t, e, n, i) {
          if ("function" == typeof e && (i = e, e = void 0), "function" == typeof n && (i = n, n = null), "closing" !== this.readyState && "closed" !== this.readyState) {
            (n = n || {}).compress = !1 !== n.compress;
            var o = {
              type: t,
              data: e,
              options: n
            };
            this.emit("packetCreate", o), this.writeBuffer.push(o), i && this.once("flush", i), this.flush();
          }
        }, d.prototype.close = function () {
          if ("opening" === this.readyState || "open" === this.readyState) {
            this.readyState = "closing";
            var t = this;
            this.writeBuffer.length ? this.once("drain", function () {
              this.upgrading ? i() : e();
            }) : this.upgrading ? i() : e();
          }

          function e() {
            t.onClose("forced close"), r("socket closing - telling transport to close"), t.transport.close();
          }

          function n() {
            t.removeListener("upgrade", n), t.removeListener("upgradeError", n), e();
          }

          function i() {
            t.once("upgrade", n), t.once("upgradeError", n);
          }

          return this;
        }, d.prototype.onError = function (t) {
          r("socket error %j", t), d.priorWebsocketSuccess = !1, this.emit("error", t), this.onClose("transport error", t);
        }, d.prototype.onClose = function (t, e) {
          if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) {
            r('socket close with reason: "%s"', t);
            clearTimeout(this.pingIntervalTimer), clearTimeout(this.pingTimeoutTimer), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), this.readyState = "closed", this.id = null, this.emit("close", t, e), this.writeBuffer = [], this.prevBufferLen = 0;
          }
        }, d.prototype.filterUpgrades = function (t) {
          for (var e = [], n = 0, i = t.length; n < i; n++) {
            ~s(this.transports, t[n]) && e.push(t[n]);
          }

          return e;
        };
      }, function (t, e) {
        try {
          t.exports = "undefined" != typeof XMLHttpRequest && "withCredentials" in new XMLHttpRequest();
        } catch (e) {
          t.exports = !1;
        }
      }, function (t, e, n) {
        var i = n(73),
            o = n(93),
            r = n(35),
            s = n(58),
            a = n(24)("engine.io-client:polling-xhr"),
            c = n(74);

        function l() {}

        function d(t) {
          if (o.call(this, t), this.requestTimeout = t.requestTimeout, this.extraHeaders = t.extraHeaders, "undefined" != typeof location) {
            var e = "https:" === location.protocol,
                n = location.port;
            n || (n = e ? 443 : 80), this.xd = "undefined" != typeof location && t.hostname !== location.hostname || n !== t.port, this.xs = t.secure !== e;
          }
        }

        function u(t) {
          this.method = t.method || "GET", this.uri = t.uri, this.xd = !!t.xd, this.xs = !!t.xs, this.async = !1 !== t.async, this.data = void 0 !== t.data ? t.data : null, this.agent = t.agent, this.isBinary = t.isBinary, this.supportsBinary = t.supportsBinary, this.enablesXDR = t.enablesXDR, this.withCredentials = t.withCredentials, this.requestTimeout = t.requestTimeout, this.pfx = t.pfx, this.key = t.key, this.passphrase = t.passphrase, this.cert = t.cert, this.ca = t.ca, this.ciphers = t.ciphers, this.rejectUnauthorized = t.rejectUnauthorized, this.extraHeaders = t.extraHeaders, this.create();
        }

        if (t.exports = d, t.exports.Request = u, s(d, o), d.prototype.supportsBinary = !0, d.prototype.request = function (t) {
          return (t = t || {}).uri = this.uri(), t.xd = this.xd, t.xs = this.xs, t.agent = this.agent || !1, t.supportsBinary = this.supportsBinary, t.enablesXDR = this.enablesXDR, t.withCredentials = this.withCredentials, t.pfx = this.pfx, t.key = this.key, t.passphrase = this.passphrase, t.cert = this.cert, t.ca = this.ca, t.ciphers = this.ciphers, t.rejectUnauthorized = this.rejectUnauthorized, t.requestTimeout = this.requestTimeout, t.extraHeaders = this.extraHeaders, new u(t);
        }, d.prototype.doWrite = function (t, e) {
          var n = "string" != typeof t && void 0 !== t,
              i = this.request({
            method: "POST",
            data: t,
            isBinary: n
          }),
              o = this;
          i.on("success", e), i.on("error", function (t) {
            o.onError("xhr post error", t);
          }), this.sendXhr = i;
        }, d.prototype.doPoll = function () {
          a("xhr poll");
          var t = this.request(),
              e = this;
          t.on("data", function (t) {
            e.onData(t);
          }), t.on("error", function (t) {
            e.onError("xhr poll error", t);
          }), this.pollXhr = t;
        }, r(u.prototype), u.prototype.create = function () {
          var t = {
            agent: this.agent,
            xdomain: this.xd,
            xscheme: this.xs,
            enablesXDR: this.enablesXDR
          };
          t.pfx = this.pfx, t.key = this.key, t.passphrase = this.passphrase, t.cert = this.cert, t.ca = this.ca, t.ciphers = this.ciphers, t.rejectUnauthorized = this.rejectUnauthorized;
          var e = this.xhr = new i(t),
              n = this;

          try {
            a("xhr open %s: %s", this.method, this.uri), e.open(this.method, this.uri, this.async);

            try {
              if (this.extraHeaders) for (var o in e.setDisableHeaderCheck && e.setDisableHeaderCheck(!0), this.extraHeaders) {
                this.extraHeaders.hasOwnProperty(o) && e.setRequestHeader(o, this.extraHeaders[o]);
              }
            } catch (t) {}

            if ("POST" === this.method) try {
              this.isBinary ? e.setRequestHeader("Content-type", "application/octet-stream") : e.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
            } catch (t) {}

            try {
              e.setRequestHeader("Accept", "*/*");
            } catch (t) {}

            "withCredentials" in e && (e.withCredentials = this.withCredentials), this.requestTimeout && (e.timeout = this.requestTimeout), this.hasXDR() ? (e.onload = function () {
              n.onLoad();
            }, e.onerror = function () {
              n.onError(e.responseText);
            }) : e.onreadystatechange = function () {
              if (2 === e.readyState) try {
                var t = e.getResponseHeader("Content-Type");
                (n.supportsBinary && "application/octet-stream" === t || "application/octet-stream; charset=UTF-8" === t) && (e.responseType = "arraybuffer");
              } catch (t) {}
              4 === e.readyState && (200 === e.status || 1223 === e.status ? n.onLoad() : setTimeout(function () {
                n.onError("number" == typeof e.status ? e.status : 0);
              }, 0));
            }, a("xhr data %s", this.data), e.send(this.data);
          } catch (t) {
            return void setTimeout(function () {
              n.onError(t);
            }, 0);
          }

          "undefined" != typeof document && (this.index = u.requestsCount++, u.requests[this.index] = this);
        }, u.prototype.onSuccess = function () {
          this.emit("success"), this.cleanup();
        }, u.prototype.onData = function (t) {
          this.emit("data", t), this.onSuccess();
        }, u.prototype.onError = function (t) {
          this.emit("error", t), this.cleanup(!0);
        }, u.prototype.cleanup = function (t) {
          if (void 0 !== this.xhr && null !== this.xhr) {
            if (this.hasXDR() ? this.xhr.onload = this.xhr.onerror = l : this.xhr.onreadystatechange = l, t) try {
              this.xhr.abort();
            } catch (t) {}
            "undefined" != typeof document && delete u.requests[this.index], this.xhr = null;
          }
        }, u.prototype.onLoad = function () {
          var t;

          try {
            var e;

            try {
              e = this.xhr.getResponseHeader("Content-Type");
            } catch (t) {}

            t = ("application/octet-stream" === e || "application/octet-stream; charset=UTF-8" === e) && this.xhr.response || this.xhr.responseText;
          } catch (t) {
            this.onError(t);
          }

          null != t && this.onData(t);
        }, u.prototype.hasXDR = function () {
          return "undefined" != typeof XDomainRequest && !this.xs && this.enablesXDR;
        }, u.prototype.abort = function () {
          this.cleanup();
        }, u.requestsCount = 0, u.requests = {}, "undefined" != typeof document) if ("function" == typeof attachEvent) attachEvent("onunload", h);else if ("function" == typeof addEventListener) {
          addEventListener("onpagehide" in c ? "pagehide" : "unload", h, !1);
        }

        function h() {
          for (var t in u.requests) {
            u.requests.hasOwnProperty(t) && u.requests[t].abort();
          }
        }
      }, function (t, e) {
        t.exports = Object.keys || function (t) {
          var e = [],
              n = Object.prototype.hasOwnProperty;

          for (var i in t) {
            n.call(t, i) && e.push(i);
          }

          return e;
        };
      }, function (t, e) {
        t.exports = function (t, e, n) {
          var i = t.byteLength;
          if (e = e || 0, n = n || i, t.slice) return t.slice(e, n);
          if (e < 0 && (e += i), n < 0 && (n += i), n > i && (n = i), e >= i || e >= n || 0 === i) return new ArrayBuffer(0);

          for (var o = new Uint8Array(t), r = new Uint8Array(n - e), s = e, a = 0; s < n; s++, a++) {
            r[a] = o[s];
          }

          return r.buffer;
        };
      }, function (t, e) {
        function n() {}

        t.exports = function (t, e, i) {
          var o = !1;
          return i = i || n, r.count = t, 0 === t ? e() : r;

          function r(t, n) {
            if (r.count <= 0) throw new Error("after called too many times");
            --r.count, t ? (o = !0, e(t), e = i) : 0 !== r.count || o || e(null, n);
          }
        };
      }, function (t, e) {
        /*! https://mths.be/utf8js v2.1.2 by @mathias */
        var n,
            i,
            o,
            r = String.fromCharCode;

        function s(t) {
          for (var e, n, i = [], o = 0, r = t.length; o < r;) {
            (e = t.charCodeAt(o++)) >= 55296 && e <= 56319 && o < r ? 56320 == (64512 & (n = t.charCodeAt(o++))) ? i.push(((1023 & e) << 10) + (1023 & n) + 65536) : (i.push(e), o--) : i.push(e);
          }

          return i;
        }

        function a(t, e) {
          if (t >= 55296 && t <= 57343) {
            if (e) throw Error("Lone surrogate U+" + t.toString(16).toUpperCase() + " is not a scalar value");
            return !1;
          }

          return !0;
        }

        function c(t, e) {
          return r(t >> e & 63 | 128);
        }

        function l(t, e) {
          if (0 == (4294967168 & t)) return r(t);
          var n = "";
          return 0 == (4294965248 & t) ? n = r(t >> 6 & 31 | 192) : 0 == (4294901760 & t) ? (a(t, e) || (t = 65533), n = r(t >> 12 & 15 | 224), n += c(t, 6)) : 0 == (4292870144 & t) && (n = r(t >> 18 & 7 | 240), n += c(t, 12), n += c(t, 6)), n += r(63 & t | 128);
        }

        function d() {
          if (o >= i) throw Error("Invalid byte index");
          var t = 255 & n[o];
          if (o++, 128 == (192 & t)) return 63 & t;
          throw Error("Invalid continuation byte");
        }

        function u(t) {
          var e, r;
          if (o > i) throw Error("Invalid byte index");
          if (o == i) return !1;
          if (e = 255 & n[o], o++, 0 == (128 & e)) return e;

          if (192 == (224 & e)) {
            if ((r = (31 & e) << 6 | d()) >= 128) return r;
            throw Error("Invalid continuation byte");
          }

          if (224 == (240 & e)) {
            if ((r = (15 & e) << 12 | d() << 6 | d()) >= 2048) return a(r, t) ? r : 65533;
            throw Error("Invalid continuation byte");
          }

          if (240 == (248 & e) && (r = (7 & e) << 18 | d() << 12 | d() << 6 | d()) >= 65536 && r <= 1114111) return r;
          throw Error("Invalid UTF-8 detected");
        }

        t.exports = {
          version: "2.1.2",
          encode: function encode(t, e) {
            for (var n = !1 !== (e = e || {}).strict, i = s(t), o = i.length, r = -1, a = ""; ++r < o;) {
              a += l(i[r], n);
            }

            return a;
          },
          decode: function decode(t, e) {
            var a = !1 !== (e = e || {}).strict;
            n = s(t), i = n.length, o = 0;

            for (var c, l = []; !1 !== (c = u(a));) {
              l.push(c);
            }

            return function (t) {
              for (var e, n = t.length, i = -1, o = ""; ++i < n;) {
                (e = t[i]) > 65535 && (o += r((e -= 65536) >>> 10 & 1023 | 55296), e = 56320 | 1023 & e), o += r(e);
              }

              return o;
            }(l);
          }
        };
      }, function (t, e) {
        !function (t) {
          "use strict";

          e.encode = function (e) {
            var n,
                i = new Uint8Array(e),
                o = i.length,
                r = "";

            for (n = 0; n < o; n += 3) {
              r += t[i[n] >> 2], r += t[(3 & i[n]) << 4 | i[n + 1] >> 4], r += t[(15 & i[n + 1]) << 2 | i[n + 2] >> 6], r += t[63 & i[n + 2]];
            }

            return o % 3 == 2 ? r = r.substring(0, r.length - 1) + "=" : o % 3 == 1 && (r = r.substring(0, r.length - 2) + "=="), r;
          }, e.decode = function (e) {
            var n,
                i,
                o,
                r,
                s,
                a = .75 * e.length,
                c = e.length,
                l = 0;
            "=" === e[e.length - 1] && (a--, "=" === e[e.length - 2] && a--);
            var d = new ArrayBuffer(a),
                u = new Uint8Array(d);

            for (n = 0; n < c; n += 4) {
              i = t.indexOf(e[n]), o = t.indexOf(e[n + 1]), r = t.indexOf(e[n + 2]), s = t.indexOf(e[n + 3]), u[l++] = i << 2 | o >> 4, u[l++] = (15 & o) << 4 | r >> 2, u[l++] = (3 & r) << 6 | 63 & s;
            }

            return d;
          };
        }("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");
      }, function (t, e) {
        var n = void 0 !== n ? n : "undefined" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder && MozBlobBuilder,
            i = function () {
          try {
            return 2 === new Blob(["hi"]).size;
          } catch (t) {
            return !1;
          }
        }(),
            o = i && function () {
          try {
            return 2 === new Blob([new Uint8Array([1, 2])]).size;
          } catch (t) {
            return !1;
          }
        }(),
            r = n && n.prototype.append && n.prototype.getBlob;

        function s(t) {
          return t.map(function (t) {
            if (t.buffer instanceof ArrayBuffer) {
              var e = t.buffer;

              if (t.byteLength !== e.byteLength) {
                var n = new Uint8Array(t.byteLength);
                n.set(new Uint8Array(e, t.byteOffset, t.byteLength)), e = n.buffer;
              }

              return e;
            }

            return t;
          });
        }

        function a(t, e) {
          e = e || {};
          var i = new n();
          return s(t).forEach(function (t) {
            i.append(t);
          }), e.type ? i.getBlob(e.type) : i.getBlob();
        }

        function c(t, e) {
          return new Blob(s(t), e || {});
        }

        "undefined" != typeof Blob && (a.prototype = Blob.prototype, c.prototype = Blob.prototype), t.exports = i ? o ? Blob : c : r ? a : void 0;
      }, function (t, e, n) {
        var i = n(93),
            o = n(58),
            r = n(74);
        t.exports = d;
        var s,
            a = /\n/g,
            c = /\\n/g;

        function l() {}

        function d(t) {
          i.call(this, t), this.query = this.query || {}, s || (s = r.___eio = r.___eio || []), this.index = s.length;
          var e = this;
          s.push(function (t) {
            e.onData(t);
          }), this.query.j = this.index, "function" == typeof addEventListener && addEventListener("beforeunload", function () {
            e.script && (e.script.onerror = l);
          }, !1);
        }

        o(d, i), d.prototype.supportsBinary = !1, d.prototype.doClose = function () {
          this.script && (this.script.parentNode.removeChild(this.script), this.script = null), this.form && (this.form.parentNode.removeChild(this.form), this.form = null, this.iframe = null), i.prototype.doClose.call(this);
        }, d.prototype.doPoll = function () {
          var t = this,
              e = document.createElement("script");
          this.script && (this.script.parentNode.removeChild(this.script), this.script = null), e.async = !0, e.src = this.uri(), e.onerror = function (e) {
            t.onError("jsonp poll error", e);
          };
          var n = document.getElementsByTagName("script")[0];
          n ? n.parentNode.insertBefore(e, n) : (document.head || document.body).appendChild(e), this.script = e, "undefined" != typeof navigator && /gecko/i.test(navigator.userAgent) && setTimeout(function () {
            var t = document.createElement("iframe");
            document.body.appendChild(t), document.body.removeChild(t);
          }, 100);
        }, d.prototype.doWrite = function (t, e) {
          var n = this;

          if (!this.form) {
            var i,
                o = document.createElement("form"),
                r = document.createElement("textarea"),
                s = this.iframeId = "eio_iframe_" + this.index;
            o.className = "socketio", o.style.position = "absolute", o.style.top = "-1000px", o.style.left = "-1000px", o.target = s, o.method = "POST", o.setAttribute("accept-charset", "utf-8"), r.name = "d", o.appendChild(r), document.body.appendChild(o), this.form = o, this.area = r;
          }

          function l() {
            d(), e();
          }

          function d() {
            if (n.iframe) try {
              n.form.removeChild(n.iframe);
            } catch (t) {
              n.onError("jsonp polling iframe removal error", t);
            }

            try {
              var t = '<iframe src="javascript:0" name="' + n.iframeId + '">';
              i = document.createElement(t);
            } catch (t) {
              (i = document.createElement("iframe")).name = n.iframeId, i.src = "javascript:0";
            }

            i.id = n.iframeId, n.form.appendChild(i), n.iframe = i;
          }

          this.form.action = this.uri(), d(), t = t.replace(c, "\\\n"), this.area.value = t.replace(a, "\\n");

          try {
            this.form.submit();
          } catch (t) {}

          this.iframe.attachEvent ? this.iframe.onreadystatechange = function () {
            "complete" === n.iframe.readyState && l();
          } : this.iframe.onload = l;
        };
      }, function (t, e, n) {
        (function (e) {
          var i,
              o,
              r = n(75),
              s = n(36),
              a = n(57),
              c = n(58),
              l = n(95),
              d = n(24)("engine.io-client:websocket");
          if ("undefined" != typeof WebSocket ? i = WebSocket : "undefined" != typeof self && (i = self.WebSocket || self.MozWebSocket), "undefined" == typeof window) try {
            o = n(301);
          } catch (t) {}
          var u = i || o;

          function h(t) {
            t && t.forceBase64 && (this.supportsBinary = !1), this.perMessageDeflate = t.perMessageDeflate, this.usingBrowserWebSocket = i && !t.forceNode, this.protocols = t.protocols, this.usingBrowserWebSocket || (u = o), r.call(this, t);
          }

          t.exports = h, c(h, r), h.prototype.name = "websocket", h.prototype.supportsBinary = !0, h.prototype.doOpen = function () {
            if (this.check()) {
              var t = this.uri(),
                  e = this.protocols,
                  n = {};
              this.isReactNative || (n.agent = this.agent, n.perMessageDeflate = this.perMessageDeflate, n.pfx = this.pfx, n.key = this.key, n.passphrase = this.passphrase, n.cert = this.cert, n.ca = this.ca, n.ciphers = this.ciphers, n.rejectUnauthorized = this.rejectUnauthorized), this.extraHeaders && (n.headers = this.extraHeaders), this.localAddress && (n.localAddress = this.localAddress);

              try {
                this.ws = this.usingBrowserWebSocket && !this.isReactNative ? e ? new u(t, e) : new u(t) : new u(t, e, n);
              } catch (t) {
                return this.emit("error", t);
              }

              void 0 === this.ws.binaryType && (this.supportsBinary = !1), this.ws.supports && this.ws.supports.binary ? (this.supportsBinary = !0, this.ws.binaryType = "nodebuffer") : this.ws.binaryType = "arraybuffer", this.addEventListeners();
            }
          }, h.prototype.addEventListeners = function () {
            var t = this;
            this.ws.onopen = function () {
              t.onOpen();
            }, this.ws.onclose = function () {
              t.onClose();
            }, this.ws.onmessage = function (e) {
              t.onData(e.data);
            }, this.ws.onerror = function (e) {
              t.onError("websocket error", e);
            };
          }, h.prototype.write = function (t) {
            var n = this;
            this.writable = !1;

            for (var i = t.length, o = 0, r = i; o < r; o++) {
              !function (t) {
                s.encodePacket(t, n.supportsBinary, function (o) {
                  if (!n.usingBrowserWebSocket) {
                    var r = {};
                    if (t.options && (r.compress = t.options.compress), n.perMessageDeflate) ("string" == typeof o ? e.byteLength(o) : o.length) < n.perMessageDeflate.threshold && (r.compress = !1);
                  }

                  try {
                    n.usingBrowserWebSocket ? n.ws.send(o) : n.ws.send(o, r);
                  } catch (t) {
                    d("websocket closed before onclose event");
                  }

                  --i || a();
                });
              }(t[o]);
            }

            function a() {
              n.emit("flush"), setTimeout(function () {
                n.writable = !0, n.emit("drain");
              }, 0);
            }
          }, h.prototype.onClose = function () {
            r.prototype.onClose.call(this);
          }, h.prototype.doClose = function () {
            void 0 !== this.ws && this.ws.close();
          }, h.prototype.uri = function () {
            var t = this.query || {},
                e = this.secure ? "wss" : "ws",
                n = "";
            return this.port && ("wss" === e && 443 !== Number(this.port) || "ws" === e && 80 !== Number(this.port)) && (n = ":" + this.port), this.timestampRequests && (t[this.timestampParam] = l()), this.supportsBinary || (t.b64 = 1), (t = a.encode(t)).length && (t = "?" + t), e + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + t;
          }, h.prototype.check = function () {
            return !(!u || "__initialize" in u && this.name === h.prototype.name);
          };
        }).call(this, n(51).Buffer);
      }, function (t, e) {}, function (t, e) {
        t.exports = function (t, e) {
          for (var n = [], i = (e = e || 0) || 0; i < t.length; i++) {
            n[i - e] = t[i];
          }

          return n;
        };
      }, function (t, e) {
        function n(t) {
          t = t || {}, this.ms = t.min || 100, this.max = t.max || 1e4, this.factor = t.factor || 2, this.jitter = t.jitter > 0 && t.jitter <= 1 ? t.jitter : 0, this.attempts = 0;
        }

        t.exports = n, n.prototype.duration = function () {
          var t = this.ms * Math.pow(this.factor, this.attempts++);

          if (this.jitter) {
            var e = Math.random(),
                n = Math.floor(e * this.jitter * t);
            t = 0 == (1 & Math.floor(10 * e)) ? t - n : t + n;
          }

          return 0 | Math.min(t, this.max);
        }, n.prototype.reset = function () {
          this.attempts = 0;
        }, n.prototype.setMin = function (t) {
          this.ms = t;
        }, n.prototype.setMax = function (t) {
          this.max = t;
        }, n.prototype.setJitter = function (t) {
          this.jitter = t;
        };
      }, function (t, e, n) {
        "use strict";

        (function (e) {
          var i = n(305),
              o = n(306),
              r = /^[A-Za-z][A-Za-z0-9+-.]*:\/\//,
              s = /^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,
              a = /^[a-zA-Z]:/,
              c = new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");

          function l(t) {
            return (t || "").toString().replace(c, "");
          }

          var d = [["#", "hash"], ["?", "query"], function (t, e) {
            return f(e.protocol) ? t.replace(/\\/g, "/") : t;
          }, ["/", "pathname"], ["@", "auth", 1], [NaN, "host", void 0, 1, 1], [/:(\d+)$/, "port", void 0, 1], [NaN, "hostname", void 0, 1, 1]],
              u = {
            hash: 1,
            query: 1
          };

          function h(t) {
            var n,
                i = ("undefined" != typeof window ? window : void 0 !== e ? e : "undefined" != typeof self ? self : {}).location || {},
                o = {},
                s = typeof (t = t || i);
            if ("blob:" === t.protocol) o = new m(unescape(t.pathname), {});else if ("string" === s) for (n in o = new m(t, {}), u) {
              delete o[n];
            } else if ("object" === s) {
              for (n in t) {
                n in u || (o[n] = t[n]);
              }

              void 0 === o.slashes && (o.slashes = r.test(t.href));
            }
            return o;
          }

          function f(t) {
            return "file:" === t || "ftp:" === t || "http:" === t || "https:" === t || "ws:" === t || "wss:" === t;
          }

          function g(t, e) {
            t = l(t), e = e || {};
            var n,
                i = s.exec(t),
                o = i[1] ? i[1].toLowerCase() : "",
                r = !!i[2],
                a = !!i[3],
                c = 0;
            return r ? a ? (n = i[2] + i[3] + i[4], c = i[2].length + i[3].length) : (n = i[2] + i[4], c = i[2].length) : a ? (n = i[3] + i[4], c = i[3].length) : n = i[4], "file:" === o ? c >= 2 && (n = n.slice(2)) : f(o) ? n = i[4] : o ? r && (n = n.slice(2)) : c >= 2 && f(e.protocol) && (n = i[4]), {
              protocol: o,
              slashes: r || f(o),
              slashesCount: c,
              rest: n
            };
          }

          function m(t, e, n) {
            if (t = l(t), !(this instanceof m)) return new m(t, e, n);

            var r,
                s,
                c,
                u,
                p,
                b,
                k = d.slice(),
                _ = typeof e,
                w = this,
                v = 0;

            for ("object" !== _ && "string" !== _ && (n = e, e = null), n && "function" != typeof n && (n = o.parse), e = h(e), r = !(s = g(t || "", e)).protocol && !s.slashes, w.slashes = s.slashes || r && e.slashes, w.protocol = s.protocol || e.protocol || "", t = s.rest, ("file:" === s.protocol && (2 !== s.slashesCount || a.test(t)) || !s.slashes && (s.protocol || s.slashesCount < 2 || !f(w.protocol))) && (k[3] = [/(.*)/, "pathname"]); v < k.length; v++) {
              "function" != typeof (u = k[v]) ? (c = u[0], b = u[1], c != c ? w[b] = t : "string" == typeof c ? ~(p = t.indexOf(c)) && ("number" == typeof u[2] ? (w[b] = t.slice(0, p), t = t.slice(p + u[2])) : (w[b] = t.slice(p), t = t.slice(0, p))) : (p = c.exec(t)) && (w[b] = p[1], t = t.slice(0, p.index)), w[b] = w[b] || r && u[3] && e[b] || "", u[4] && (w[b] = w[b].toLowerCase())) : t = u(t, w);
            }

            n && (w.query = n(w.query)), r && e.slashes && "/" !== w.pathname.charAt(0) && ("" !== w.pathname || "" !== e.pathname) && (w.pathname = function (t, e) {
              if ("" === t) return e;

              for (var n = (e || "/").split("/").slice(0, -1).concat(t.split("/")), i = n.length, o = n[i - 1], r = !1, s = 0; i--;) {
                "." === n[i] ? n.splice(i, 1) : ".." === n[i] ? (n.splice(i, 1), s++) : s && (0 === i && (r = !0), n.splice(i, 1), s--);
              }

              return r && n.unshift(""), "." !== o && ".." !== o || n.push(""), n.join("/");
            }(w.pathname, e.pathname)), "/" !== w.pathname.charAt(0) && f(w.protocol) && (w.pathname = "/" + w.pathname), i(w.port, w.protocol) || (w.host = w.hostname, w.port = ""), w.username = w.password = "", w.auth && (u = w.auth.split(":"), w.username = u[0] || "", w.password = u[1] || ""), w.origin = "file:" !== w.protocol && f(w.protocol) && w.host ? w.protocol + "//" + w.host : "null", w.href = w.toString();
          }

          m.prototype = {
            set: function set(t, e, n) {
              var r = this;

              switch (t) {
                case "query":
                  "string" == typeof e && e.length && (e = (n || o.parse)(e)), r[t] = e;
                  break;

                case "port":
                  r[t] = e, i(e, r.protocol) ? e && (r.host = r.hostname + ":" + e) : (r.host = r.hostname, r[t] = "");
                  break;

                case "hostname":
                  r[t] = e, r.port && (e += ":" + r.port), r.host = e;
                  break;

                case "host":
                  r[t] = e, /:\d+$/.test(e) ? (e = e.split(":"), r.port = e.pop(), r.hostname = e.join(":")) : (r.hostname = e, r.port = "");
                  break;

                case "protocol":
                  r.protocol = e.toLowerCase(), r.slashes = !n;
                  break;

                case "pathname":
                case "hash":
                  if (e) {
                    var s = "pathname" === t ? "/" : "#";
                    r[t] = e.charAt(0) !== s ? s + e : e;
                  } else r[t] = e;

                  break;

                default:
                  r[t] = e;
              }

              for (var a = 0; a < d.length; a++) {
                var c = d[a];
                c[4] && (r[c[1]] = r[c[1]].toLowerCase());
              }

              return r.origin = "file:" !== r.protocol && f(r.protocol) && r.host ? r.protocol + "//" + r.host : "null", r.href = r.toString(), r;
            },
            toString: function toString(t) {
              t && "function" == typeof t || (t = o.stringify);
              var e,
                  n = this,
                  i = n.protocol;
              i && ":" !== i.charAt(i.length - 1) && (i += ":");
              var r = i + (n.slashes || f(n.protocol) ? "//" : "");
              return n.username && (r += n.username, n.password && (r += ":" + n.password), r += "@"), r += n.host + n.pathname, (e = "object" == typeof n.query ? t(n.query) : n.query) && (r += "?" !== e.charAt(0) ? "?" + e : e), n.hash && (r += n.hash), r;
            }
          }, m.extractProtocol = g, m.location = h, m.trimLeft = l, m.qs = o, t.exports = m;
        }).call(this, n(49));
      }, function (t, e, n) {
        "use strict";

        t.exports = function (t, e) {
          if (e = e.split(":")[0], !(t = +t)) return !1;

          switch (e) {
            case "http":
            case "ws":
              return 80 !== t;

            case "https":
            case "wss":
              return 443 !== t;

            case "ftp":
              return 21 !== t;

            case "gopher":
              return 70 !== t;

            case "file":
              return !1;
          }

          return 0 !== t;
        };
      }, function (t, e, n) {
        "use strict";

        var i,
            o = Object.prototype.hasOwnProperty;

        function r(t) {
          try {
            return decodeURIComponent(t.replace(/\+/g, " "));
          } catch (t) {
            return null;
          }
        }

        function s(t) {
          try {
            return encodeURIComponent(t);
          } catch (t) {
            return null;
          }
        }

        e.stringify = function (t, e) {
          e = e || "";
          var n,
              r,
              a = [];

          for (r in "string" != typeof e && (e = "?"), t) {
            if (o.call(t, r)) {
              if ((n = t[r]) || null !== n && n !== i && !isNaN(n) || (n = ""), r = s(r), n = s(n), null === r || null === n) continue;
              a.push(r + "=" + n);
            }
          }

          return a.length ? e + a.join("&") : "";
        }, e.parse = function (t) {
          for (var e, n = /([^=?#&]+)=?([^&]*)/g, i = {}; e = n.exec(t);) {
            var o = r(e[1]),
                s = r(e[2]);
            null === o || null === s || o in i || (i[o] = s);
          }

          return i;
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(1)),
            r = i(n(3)),
            s = i(n(308)),
            a = i(n(32));

        var c = /*#__PURE__*/function () {
          function c(t, e, n) {
            _classCallCheck(this, c);

            this._channelName = t, this._wsGateway = e, this._socket = n, this._subscribeToChannel();
          }

          _createClass(c, [{
            key: "remove",
            value: function remove() {
              this._socket.off(this._channelName);
            }
          }, {
            key: "getEventName",
            value: function getEventName(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              var n = "";
              return e && (n += "all:"), n += "event", t && (n += ":" + t), n;
            }
          }, {
            key: "_subscribeToChannel",
            value: function _subscribeToChannel() {
              var _this23 = this;

              this._socket.on(this._channelName, function (t) {
                var e = a["default"].decode(t, s["default"]);
                _this23.fire(_this23.getEventName(e.type, !0), e.data, e.socketId), e.socketId !== _this23._wsGateway.sessionId && _this23.fire(_this23.getEventName(e.type), e.data, e.socketId);
              });
            }
          }]);

          return c;
        }();

        o["default"](c, r["default"]), e["default"] = c;
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default8) {
          _inherits(r, _o$default8);

          var _super9 = _createSuper(r);

          function r(t, e, n) {
            var _this24;

            _classCallCheck(this, r);

            _this24 = _super9.call(this), _this24.type = t, _this24.socketId = e, _this24.data = n;
            return _this24;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                type: this.type,
                socketId: this.socketId,
                data: this.data
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.type, t.socketId, t.data);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "ChannelMessage", r.DESCRIPTOR = {
          fields: {
            type: {
              type: "uint32",
              id: 1
            },
            socketId: {
              type: "string",
              id: 2
            },
            data: {
              type: "bytes",
              id: 3
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = t.exports = n(310);
        i.build = "light", i.load = function (t, e, n) {
          return "function" == typeof e ? (n = e, e = new i.Root()) : e || (e = new i.Root()), e.load(t, n);
        }, i.loadSync = function (t, e) {
          return e || (e = new i.Root()), e.loadSync(t);
        }, i.encoder = n(104), i.decoder = n(109), i.verifier = n(110), i.converter = n(111), i.ReflectionObject = n(37), i.Namespace = n(52), i.Root = n(113), i.Enum = n(26), i.Type = n(105), i.Field = n(38), i.OneOf = n(59), i.MapField = n(106), i.Service = n(107), i.Method = n(108), i.Message = n(78), i.wrappers = n(112), i.types = n(53), i.util = n(14), i.ReflectionObject._configure(i.Root), i.Namespace._configure(i.Type, i.Service, i.Enum), i.Root._configure(i.Type), i.Field._configure(i.Type);
      }, function (t, e, n) {
        "use strict";

        var i = e;

        function o() {
          i.util._configure(), i.Writer._configure(i.BufferWriter), i.Reader._configure(i.BufferReader);
        }

        i.build = "minimal", i.Writer = n(76), i.BufferWriter = n(317), i.Reader = n(77), i.BufferReader = n(318), i.util = n(25), i.rpc = n(102), i.roots = n(103), i.configure = o, o();
      }, function (t, e, n) {
        "use strict";

        var i = e;

        i.length = function (t) {
          var e = t.length;
          if (!e) return 0;

          for (var n = 0; --e % 4 > 1 && "=" === t.charAt(e);) {
            ++n;
          }

          return Math.ceil(3 * t.length) / 4 - n;
        };

        for (var o = new Array(64), r = new Array(123), s = 0; s < 64;) {
          r[o[s] = s < 26 ? s + 65 : s < 52 ? s + 71 : s < 62 ? s - 4 : s - 59 | 43] = s++;
        }

        i.encode = function (t, e, n) {
          for (var i, r = null, s = [], a = 0, c = 0; e < n;) {
            var l = t[e++];

            switch (c) {
              case 0:
                s[a++] = o[l >> 2], i = (3 & l) << 4, c = 1;
                break;

              case 1:
                s[a++] = o[i | l >> 4], i = (15 & l) << 2, c = 2;
                break;

              case 2:
                s[a++] = o[i | l >> 6], s[a++] = o[63 & l], c = 0;
            }

            a > 8191 && ((r || (r = [])).push(String.fromCharCode.apply(String, s)), a = 0);
          }

          return c && (s[a++] = o[i], s[a++] = 61, 1 === c && (s[a++] = 61)), r ? (a && r.push(String.fromCharCode.apply(String, s.slice(0, a))), r.join("")) : String.fromCharCode.apply(String, s.slice(0, a));
        };

        i.decode = function (t, e, n) {
          for (var i, o = n, s = 0, a = 0; a < t.length;) {
            var c = t.charCodeAt(a++);
            if (61 === c && s > 1) break;
            if (void 0 === (c = r[c])) throw Error("invalid encoding");

            switch (s) {
              case 0:
                i = c, s = 1;
                break;

              case 1:
                e[n++] = i << 2 | (48 & c) >> 4, i = c, s = 2;
                break;

              case 2:
                e[n++] = (15 & i) << 4 | (60 & c) >> 2, i = c, s = 3;
                break;

              case 3:
                e[n++] = (3 & i) << 6 | c, s = 0;
            }
          }

          if (1 === s) throw Error("invalid encoding");
          return n - o;
        }, i.test = function (t) {
          return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t);
        };
      }, function (t, e, n) {
        "use strict";

        function i() {
          this._listeners = {};
        }

        t.exports = i, i.prototype.on = function (t, e, n) {
          return (this._listeners[t] || (this._listeners[t] = [])).push({
            fn: e,
            ctx: n || this
          }), this;
        }, i.prototype.off = function (t, e) {
          if (void 0 === t) this._listeners = {};else if (void 0 === e) this._listeners[t] = [];else for (var n = this._listeners[t], i = 0; i < n.length;) {
            n[i].fn === e ? n.splice(i, 1) : ++i;
          }
          return this;
        }, i.prototype.emit = function (t) {
          var e = this._listeners[t];

          if (e) {
            for (var n = [], i = 1; i < arguments.length;) {
              n.push(arguments[i++]);
            }

            for (i = 0; i < e.length;) {
              e[i].fn.apply(e[i++].ctx, n);
            }
          }

          return this;
        };
      }, function (t, e, n) {
        "use strict";

        function i(t) {
          return "undefined" != typeof Float32Array ? function () {
            var e = new Float32Array([-0]),
                n = new Uint8Array(e.buffer),
                i = 128 === n[3];

            function o(t, i, o) {
              e[0] = t, i[o] = n[0], i[o + 1] = n[1], i[o + 2] = n[2], i[o + 3] = n[3];
            }

            function r(t, i, o) {
              e[0] = t, i[o] = n[3], i[o + 1] = n[2], i[o + 2] = n[1], i[o + 3] = n[0];
            }

            function s(t, i) {
              return n[0] = t[i], n[1] = t[i + 1], n[2] = t[i + 2], n[3] = t[i + 3], e[0];
            }

            function a(t, i) {
              return n[3] = t[i], n[2] = t[i + 1], n[1] = t[i + 2], n[0] = t[i + 3], e[0];
            }

            t.writeFloatLE = i ? o : r, t.writeFloatBE = i ? r : o, t.readFloatLE = i ? s : a, t.readFloatBE = i ? a : s;
          }() : function () {
            function e(t, e, n, i) {
              var o = e < 0 ? 1 : 0;
              if (o && (e = -e), 0 === e) t(1 / e > 0 ? 0 : 2147483648, n, i);else if (isNaN(e)) t(2143289344, n, i);else if (e > 3.4028234663852886e38) t((o << 31 | 2139095040) >>> 0, n, i);else if (e < 1.1754943508222875e-38) t((o << 31 | Math.round(e / 1.401298464324817e-45)) >>> 0, n, i);else {
                var r = Math.floor(Math.log(e) / Math.LN2);
                t((o << 31 | r + 127 << 23 | 8388607 & Math.round(e * Math.pow(2, -r) * 8388608)) >>> 0, n, i);
              }
            }

            function n(t, e, n) {
              var i = t(e, n),
                  o = 2 * (i >> 31) + 1,
                  r = i >>> 23 & 255,
                  s = 8388607 & i;
              return 255 === r ? s ? NaN : o * (1 / 0) : 0 === r ? 1.401298464324817e-45 * o * s : o * Math.pow(2, r - 150) * (s + 8388608);
            }

            t.writeFloatLE = e.bind(null, o), t.writeFloatBE = e.bind(null, r), t.readFloatLE = n.bind(null, s), t.readFloatBE = n.bind(null, a);
          }(), "undefined" != typeof Float64Array ? function () {
            var e = new Float64Array([-0]),
                n = new Uint8Array(e.buffer),
                i = 128 === n[7];

            function o(t, i, o) {
              e[0] = t, i[o] = n[0], i[o + 1] = n[1], i[o + 2] = n[2], i[o + 3] = n[3], i[o + 4] = n[4], i[o + 5] = n[5], i[o + 6] = n[6], i[o + 7] = n[7];
            }

            function r(t, i, o) {
              e[0] = t, i[o] = n[7], i[o + 1] = n[6], i[o + 2] = n[5], i[o + 3] = n[4], i[o + 4] = n[3], i[o + 5] = n[2], i[o + 6] = n[1], i[o + 7] = n[0];
            }

            function s(t, i) {
              return n[0] = t[i], n[1] = t[i + 1], n[2] = t[i + 2], n[3] = t[i + 3], n[4] = t[i + 4], n[5] = t[i + 5], n[6] = t[i + 6], n[7] = t[i + 7], e[0];
            }

            function a(t, i) {
              return n[7] = t[i], n[6] = t[i + 1], n[5] = t[i + 2], n[4] = t[i + 3], n[3] = t[i + 4], n[2] = t[i + 5], n[1] = t[i + 6], n[0] = t[i + 7], e[0];
            }

            t.writeDoubleLE = i ? o : r, t.writeDoubleBE = i ? r : o, t.readDoubleLE = i ? s : a, t.readDoubleBE = i ? a : s;
          }() : function () {
            function e(t, e, n, i, o, r) {
              var s = i < 0 ? 1 : 0;
              if (s && (i = -i), 0 === i) t(0, o, r + e), t(1 / i > 0 ? 0 : 2147483648, o, r + n);else if (isNaN(i)) t(0, o, r + e), t(2146959360, o, r + n);else if (i > 1.7976931348623157e308) t(0, o, r + e), t((s << 31 | 2146435072) >>> 0, o, r + n);else {
                var a;
                if (i < 2.2250738585072014e-308) t((a = i / 5e-324) >>> 0, o, r + e), t((s << 31 | a / 4294967296) >>> 0, o, r + n);else {
                  var c = Math.floor(Math.log(i) / Math.LN2);
                  1024 === c && (c = 1023), t(4503599627370496 * (a = i * Math.pow(2, -c)) >>> 0, o, r + e), t((s << 31 | c + 1023 << 20 | 1048576 * a & 1048575) >>> 0, o, r + n);
                }
              }
            }

            function n(t, e, n, i, o) {
              var r = t(i, o + e),
                  s = t(i, o + n),
                  a = 2 * (s >> 31) + 1,
                  c = s >>> 20 & 2047,
                  l = 4294967296 * (1048575 & s) + r;
              return 2047 === c ? l ? NaN : a * (1 / 0) : 0 === c ? 5e-324 * a * l : a * Math.pow(2, c - 1075) * (l + 4503599627370496);
            }

            t.writeDoubleLE = e.bind(null, o, 0, 4), t.writeDoubleBE = e.bind(null, r, 4, 0), t.readDoubleLE = n.bind(null, s, 0, 4), t.readDoubleBE = n.bind(null, a, 4, 0);
          }(), t;
        }

        function o(t, e, n) {
          e[n] = 255 & t, e[n + 1] = t >>> 8 & 255, e[n + 2] = t >>> 16 & 255, e[n + 3] = t >>> 24;
        }

        function r(t, e, n) {
          e[n] = t >>> 24, e[n + 1] = t >>> 16 & 255, e[n + 2] = t >>> 8 & 255, e[n + 3] = 255 & t;
        }

        function s(t, e) {
          return (t[e] | t[e + 1] << 8 | t[e + 2] << 16 | t[e + 3] << 24) >>> 0;
        }

        function a(t, e) {
          return (t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3]) >>> 0;
        }

        t.exports = i(i);
      }, function (t, e, n) {
        "use strict";

        var i = e;
        i.length = function (t) {
          for (var e = 0, n = 0, i = 0; i < t.length; ++i) {
            (n = t.charCodeAt(i)) < 128 ? e += 1 : n < 2048 ? e += 2 : 55296 == (64512 & n) && 56320 == (64512 & t.charCodeAt(i + 1)) ? (++i, e += 4) : e += 3;
          }

          return e;
        }, i.read = function (t, e, n) {
          if (n - e < 1) return "";

          for (var i, o = null, r = [], s = 0; e < n;) {
            (i = t[e++]) < 128 ? r[s++] = i : i > 191 && i < 224 ? r[s++] = (31 & i) << 6 | 63 & t[e++] : i > 239 && i < 365 ? (i = ((7 & i) << 18 | (63 & t[e++]) << 12 | (63 & t[e++]) << 6 | 63 & t[e++]) - 65536, r[s++] = 55296 + (i >> 10), r[s++] = 56320 + (1023 & i)) : r[s++] = (15 & i) << 12 | (63 & t[e++]) << 6 | 63 & t[e++], s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, r)), s = 0);
          }

          return o ? (s && o.push(String.fromCharCode.apply(String, r.slice(0, s))), o.join("")) : String.fromCharCode.apply(String, r.slice(0, s));
        }, i.write = function (t, e, n) {
          for (var i, o, r = n, s = 0; s < t.length; ++s) {
            (i = t.charCodeAt(s)) < 128 ? e[n++] = i : i < 2048 ? (e[n++] = i >> 6 | 192, e[n++] = 63 & i | 128) : 55296 == (64512 & i) && 56320 == (64512 & (o = t.charCodeAt(s + 1))) ? (i = 65536 + ((1023 & i) << 10) + (1023 & o), ++s, e[n++] = i >> 18 | 240, e[n++] = i >> 12 & 63 | 128, e[n++] = i >> 6 & 63 | 128, e[n++] = 63 & i | 128) : (e[n++] = i >> 12 | 224, e[n++] = i >> 6 & 63 | 128, e[n++] = 63 & i | 128);
          }

          return n - r;
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = function (t, e, n) {
          var i = n || 8192,
              o = i >>> 1,
              r = null,
              s = i;
          return function (n) {
            if (n < 1 || n > o) return t(n);
            s + n > i && (r = t(i), s = 0);
            var a = e.call(r, s, s += n);
            return 7 & s && (s = 1 + (7 | s)), a;
          };
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = o;
        var i = n(25);

        function o(t, e) {
          this.lo = t >>> 0, this.hi = e >>> 0;
        }

        var r = o.zero = new o(0, 0);
        r.toNumber = function () {
          return 0;
        }, r.zzEncode = r.zzDecode = function () {
          return this;
        }, r.length = function () {
          return 1;
        };
        var s = o.zeroHash = "\0\0\0\0\0\0\0\0";
        o.fromNumber = function (t) {
          if (0 === t) return r;
          var e = t < 0;
          e && (t = -t);
          var n = t >>> 0,
              i = (t - n) / 4294967296 >>> 0;
          return e && (i = ~i >>> 0, n = ~n >>> 0, ++n > 4294967295 && (n = 0, ++i > 4294967295 && (i = 0))), new o(n, i);
        }, o.from = function (t) {
          if ("number" == typeof t) return o.fromNumber(t);

          if (i.isString(t)) {
            if (!i.Long) return o.fromNumber(parseInt(t, 10));
            t = i.Long.fromString(t);
          }

          return t.low || t.high ? new o(t.low >>> 0, t.high >>> 0) : r;
        }, o.prototype.toNumber = function (t) {
          if (!t && this.hi >>> 31) {
            var e = 1 + ~this.lo >>> 0,
                n = ~this.hi >>> 0;
            return e || (n = n + 1 >>> 0), -(e + 4294967296 * n);
          }

          return this.lo + 4294967296 * this.hi;
        }, o.prototype.toLong = function (t) {
          return i.Long ? new i.Long(0 | this.lo, 0 | this.hi, Boolean(t)) : {
            low: 0 | this.lo,
            high: 0 | this.hi,
            unsigned: Boolean(t)
          };
        };
        var a = String.prototype.charCodeAt;
        o.fromHash = function (t) {
          return t === s ? r : new o((a.call(t, 0) | a.call(t, 1) << 8 | a.call(t, 2) << 16 | a.call(t, 3) << 24) >>> 0, (a.call(t, 4) | a.call(t, 5) << 8 | a.call(t, 6) << 16 | a.call(t, 7) << 24) >>> 0);
        }, o.prototype.toHash = function () {
          return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
        }, o.prototype.zzEncode = function () {
          var t = this.hi >> 31;
          return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ t) >>> 0, this.lo = (this.lo << 1 ^ t) >>> 0, this;
        }, o.prototype.zzDecode = function () {
          var t = -(1 & this.lo);
          return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ t) >>> 0, this.hi = (this.hi >>> 1 ^ t) >>> 0, this;
        }, o.prototype.length = function () {
          var t = this.lo,
              e = (this.lo >>> 28 | this.hi << 4) >>> 0,
              n = this.hi >>> 24;
          return 0 === n ? 0 === e ? t < 16384 ? t < 128 ? 1 : 2 : t < 2097152 ? 3 : 4 : e < 16384 ? e < 128 ? 5 : 6 : e < 2097152 ? 7 : 8 : n < 128 ? 9 : 10;
        };
      }, function (t, e, n) {
        "use strict";

        t.exports = r;
        var i = n(76);
        (r.prototype = Object.create(i.prototype)).constructor = r;
        var o = n(25);

        function r() {
          i.call(this);
        }

        function s(t, e, n) {
          t.length < 40 ? o.utf8.write(t, e, n) : e.utf8Write ? e.utf8Write(t, n) : e.write(t, n);
        }

        r._configure = function () {
          r.alloc = o._Buffer_allocUnsafe, r.writeBytesBuffer = o.Buffer && o.Buffer.prototype instanceof Uint8Array && "set" === o.Buffer.prototype.set.name ? function (t, e, n) {
            e.set(t, n);
          } : function (t, e, n) {
            if (t.copy) t.copy(e, n, 0, t.length);else for (var i = 0; i < t.length;) {
              e[n++] = t[i++];
            }
          };
        }, r.prototype.bytes = function (t) {
          o.isString(t) && (t = o._Buffer_from(t, "base64"));
          var e = t.length >>> 0;
          return this.uint32(e), e && this._push(r.writeBytesBuffer, e, t), this;
        }, r.prototype.string = function (t) {
          var e = o.Buffer.byteLength(t);
          return this.uint32(e), e && this._push(s, e, t), this;
        }, r._configure();
      }, function (t, e, n) {
        "use strict";

        t.exports = r;
        var i = n(77);
        (r.prototype = Object.create(i.prototype)).constructor = r;
        var o = n(25);

        function r(t) {
          i.call(this, t);
        }

        r._configure = function () {
          o.Buffer && (r.prototype._slice = o.Buffer.prototype.slice);
        }, r.prototype.string = function () {
          var t = this.uint32();
          return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + t, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + t, this.len));
        }, r._configure();
      }, function (t, e, n) {
        "use strict";

        t.exports = o;
        var i = n(25);

        function o(t, e, n) {
          if ("function" != typeof t) throw TypeError("rpcImpl must be a function");
          i.EventEmitter.call(this), this.rpcImpl = t, this.requestDelimited = Boolean(e), this.responseDelimited = Boolean(n);
        }

        (o.prototype = Object.create(i.EventEmitter.prototype)).constructor = o, o.prototype.rpcCall = function t(e, n, o, r, s) {
          if (!r) throw TypeError("request must be specified");
          var a = this;
          if (!s) return i.asPromise(t, a, e, n, o, r);
          if (a.rpcImpl) try {
            return a.rpcImpl(e, n[a.requestDelimited ? "encodeDelimited" : "encode"](r).finish(), function (t, n) {
              if (t) return a.emit("error", t, e), s(t);

              if (null !== n) {
                if (!(n instanceof o)) try {
                  n = o[a.responseDelimited ? "decodeDelimited" : "decode"](n);
                } catch (t) {
                  return a.emit("error", t, e), s(t);
                }
                return a.emit("data", n, e), s(null, n);
              }

              a.end(!0);
            });
          } catch (t) {
            return a.emit("error", t, e), void setTimeout(function () {
              s(t);
            }, 0);
          } else setTimeout(function () {
            s(Error("already ended"));
          }, 0);
        }, o.prototype.end = function (t) {
          return this.rpcImpl && (t || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this;
        };
      }, function (t, e, n) {
        "use strict";

        function i(t, e) {
          "string" == typeof t && (e = t, t = void 0);
          var n = [];

          function o(t) {
            if ("string" != typeof t) {
              var e = r();

              if (i.verbose && console.log("codegen: " + e), e = "return " + e, t) {
                for (var s = Object.keys(t), a = new Array(s.length + 1), c = new Array(s.length), l = 0; l < s.length;) {
                  a[l] = s[l], c[l] = t[s[l++]];
                }

                return a[l] = e, Function.apply(null, a).apply(null, c);
              }

              return Function(e)();
            }

            for (var d = new Array(arguments.length - 1), u = 0; u < d.length;) {
              d[u] = arguments[++u];
            }

            if (u = 0, t = t.replace(/%([%dfijs])/g, function (t, e) {
              var n = d[u++];

              switch (e) {
                case "d":
                case "f":
                  return String(Number(n));

                case "i":
                  return String(Math.floor(n));

                case "j":
                  return JSON.stringify(n);

                case "s":
                  return String(n);
              }

              return "%";
            }), u !== d.length) throw Error("parameter count mismatch");
            return n.push(t), o;
          }

          function r(i) {
            return "function " + (i || e || "") + "(" + (t && t.join(",") || "") + "){\n  " + n.join("\n  ") + "\n}";
          }

          return o.toString = r, o;
        }

        t.exports = i, i.verbose = !1;
      }, function (t, e, n) {
        "use strict";

        t.exports = r;
        var i = n(100),
            o = n(101)("fs");

        function r(t, e, n) {
          return "function" == typeof e ? (n = e, e = {}) : e || (e = {}), n ? !e.xhr && o && o.readFile ? o.readFile(t, function (i, o) {
            return i && "undefined" != typeof XMLHttpRequest ? r.xhr(t, e, n) : i ? n(i) : n(null, e.binary ? o : o.toString("utf8"));
          }) : r.xhr(t, e, n) : i(r, this, t, e);
        }

        r.xhr = function (t, e, n) {
          var i = new XMLHttpRequest();
          i.onreadystatechange = function () {
            if (4 === i.readyState) {
              if (0 !== i.status && 200 !== i.status) return n(Error("status " + i.status));

              if (e.binary) {
                var t = i.response;

                if (!t) {
                  t = [];

                  for (var o = 0; o < i.responseText.length; ++o) {
                    t.push(255 & i.responseText.charCodeAt(o));
                  }
                }

                return n(null, "undefined" != typeof Uint8Array ? new Uint8Array(t) : t);
              }

              return n(null, i.responseText);
            }
          }, e.binary && ("overrideMimeType" in i && i.overrideMimeType("text/plain; charset=x-user-defined"), i.responseType = "arraybuffer"), i.open("GET", t), i.send();
        };
      }, function (t, e, n) {
        "use strict";

        var i = e,
            o = i.isAbsolute = function (t) {
          return /^(?:\/|\w+:)/.test(t);
        },
            r = i.normalize = function (t) {
          var e = (t = t.replace(/\\/g, "/").replace(/\/{2,}/g, "/")).split("/"),
              n = o(t),
              i = "";
          n && (i = e.shift() + "/");

          for (var r = 0; r < e.length;) {
            ".." === e[r] ? r > 0 && ".." !== e[r - 1] ? e.splice(--r, 2) : n ? e.splice(r, 1) : ++r : "." === e[r] ? e.splice(r, 1) : ++r;
          }

          return i + e.join("/");
        };

        i.resolve = function (t, e, n) {
          return n || (e = r(e)), o(e) ? e : (n || (t = r(t)), (t = t.replace(/(?:\/|^)[^/]+$/, "")).length ? r(t + "/" + e) : e);
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31));

        var r = /*#__PURE__*/function (_o$default9) {
          _inherits(r, _o$default9);

          var _super10 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super10.apply(this, arguments);
          }

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "SessionsSocketDescriptor", r.DESCRIPTOR = {
          fields: {
            session: {
              type: "string",
              id: 1
            },
            user: {
              type: "string",
              id: 2
            },
            role: {
              id: 3,
              type: "string"
            },
            permissions: {
              rule: "repeated",
              type: "string",
              id: 4
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31));

        var r = /*#__PURE__*/function (_o$default10) {
          _inherits(r, _o$default10);

          var _super11 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super11.apply(this, arguments);
          }

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "OperationMetadataDescriptor", r.DESCRIPTOR = {
          fields: {
            userId: {
              type: "string",
              id: 1
            },
            type: {
              type: "string",
              id: 2,
              rule: "optional"
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31));

        var r = /*#__PURE__*/function (_o$default11) {
          _inherits(r, _o$default11);

          var _super12 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super12.apply(this, arguments);
          }

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "KeyValueDescriptor", r.DESCRIPTOR = {
          fields: {
            key: {
              type: "string",
              id: 1
            },
            value: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(31));

        var r = /*#__PURE__*/function (_o$default12) {
          _inherits(r, _o$default12);

          var _super13 = _createSuper(r);

          function r() {
            _classCallCheck(this, r);

            return _super13.apply(this, arguments);
          }

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "UserDescriptor", r.DESCRIPTOR = {
          fields: {
            attributes: {
              rule: "repeated",
              type: "KeyValueDescriptor",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default13) {
          _inherits(r, _o$default13);

          var _super14 = _createSuper(r);

          function r(t) {
            var _this25;

            _classCallCheck(this, r);

            _this25 = _super14.call(this), _this25.id = t;
            return _this25;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "21", r.READABLE_TYPE_NAME = "getUser", r.DESCRIPTOR_NAME = "GetUserMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default14) {
          _inherits(r, _o$default14);

          var _super15 = _createSuper(r);

          function r(t) {
            var _this26;

            _classCallCheck(this, r);

            _this26 = _super15.call(this), _this26.attributes = t;
            return _this26;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              var _this27 = this;

              return {
                attributes: Object.keys(this.attributes).map(function (t) {
                  return {
                    key: t,
                    value: JSON.stringify(_this27.attributes[t])
                  };
                })
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e = t.attributes.reduce(function (t, e) {
                return t[e.key] = e.value ? JSON.parse(e.value) : null, t;
              }, {});
              return new r(e);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "GetUserResponse", r.DESCRIPTOR = {
          fields: {
            attributes: {
              rule: "repeated",
              type: "KeyValueDescriptor",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default15) {
          _inherits(r, _o$default15);

          var _super16 = _createSuper(r);

          function r(t) {
            var _this28;

            _classCallCheck(this, r);

            _this28 = _super16.call(this), _this28.ids = t;
            return _this28;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                ids: this.ids
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.ids);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "22", r.READABLE_TYPE_NAME = "getManyUsers", r.DESCRIPTOR_NAME = "GetManyUsersMessage", r.DESCRIPTOR = {
          fields: {
            ids: {
              id: 1,
              type: "string",
              rule: "repeated"
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default16) {
          _inherits(r, _o$default16);

          var _super17 = _createSuper(r);

          function r(t) {
            var _this29;

            _classCallCheck(this, r);

            _this29 = _super17.call(this), _this29.users = t;
            return _this29;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                users: this.users.map(s)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.users.map(a));
            }
          }]);

          return r;
        }(o["default"]);

        function s(t) {
          return {
            attributes: Object.keys(t).map(function (e) {
              return {
                key: e,
                value: JSON.stringify(t[e])
              };
            })
          };
        }

        function a(t) {
          return t.attributes.reduce(function (t, e) {
            return t[e.key] = e.value ? JSON.parse(e.value) : null, t;
          }, {});
        }

        e["default"] = r, r.DESCRIPTOR_NAME = "GetManyUsersResponse", r.DESCRIPTOR = {
          fields: {
            users: {
              rule: "repeated",
              type: "UserDescriptor",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        Object.defineProperty(e, "__esModule", {
          value: !0
        }), e["default"] = "25.0.0";
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        },
            o = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = n(333),
            s = i(n(339)),
            a = o(n(18)),
            c = [s.MESSAGE_TYPES.EVENT, s.MESSAGE_TYPES.ACK, s.MESSAGE_TYPES.BINARY_ACK, s.MESSAGE_TYPES.BINARY_EVENT];

        e.Encoder = /*#__PURE__*/function (_r$Encoder) {
          _inherits(_class6, _r$Encoder);

          var _super18 = _createSuper(_class6);

          function _class6() {
            var _this30;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new s["default"]();

            _classCallCheck(this, _class6);

            _this30 = _super18.call(this), _this30._packetParser = t;
            return _this30;
          }

          _createClass(_class6, [{
            key: "encode",
            value: function encode(t, e) {
              if (c.includes(t.type)) {
                var _n10 = t.data && Array.isArray(t.data) && t.data.pop();

                if (_n10 && !_n10._cs && (t.data.push(_n10), _n10 = null), !_n10 || _n10 && !_n10.originalParser) try {
                  return e([this._packetParser.encode(t.type, t.data, t.id, t.nsp)]);
                } catch (t) {
                  console.error("Can not properly serialize or deserialize messages. Check the original error.", {
                    originalError: {
                      message: t.message
                    }
                  });
                }
              }

              return _get3(_getPrototypeOf(_class6.prototype), "encode", this).call(this, t, e);
            }
          }]);

          return _class6;
        }(r.Encoder);

        e.Decoder = /*#__PURE__*/function (_r$Decoder) {
          _inherits(_class7, _r$Decoder);

          var _super19 = _createSuper(_class7);

          function _class7() {
            var _this31;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new s["default"]();

            _classCallCheck(this, _class7);

            _this31 = _super19.call(this), _this31._packetParser = t;
            return _this31;
          }

          _createClass(_class7, [{
            key: "add",
            value: function add(t) {
              if (!a["default"].isBuffer(t)) return _get3(_getPrototypeOf(_class7.prototype), "add", this).call(this, t);
              var e;

              try {
                e = this._packetParser.decode(t).packet;
              } catch (e) {
                return _get3(_getPrototypeOf(_class7.prototype), "add", this).call(this, t);
              }

              this.emit("decoded", e);
            }
          }]);

          return _class7;
        }(r.Decoder);
      }, function (t, e, n) {
        var i = n(334)("socket.io-parser"),
            o = n(337),
            r = n(338),
            s = n(50),
            a = n(114);

        function c() {}

        e.protocol = 4, e.types = ["CONNECT", "DISCONNECT", "EVENT", "ACK", "ERROR", "BINARY_EVENT", "BINARY_ACK"], e.CONNECT = 0, e.DISCONNECT = 1, e.EVENT = 2, e.ACK = 3, e.ERROR = 4, e.BINARY_EVENT = 5, e.BINARY_ACK = 6, e.Encoder = c, e.Decoder = u;
        var l = e.ERROR + '"encode error"';

        function d(t) {
          var n = "" + t.type;

          if (e.BINARY_EVENT !== t.type && e.BINARY_ACK !== t.type || (n += t.attachments + "-"), t.nsp && "/" !== t.nsp && (n += t.nsp + ","), null != t.id && (n += t.id), null != t.data) {
            var o = function (t) {
              try {
                return JSON.stringify(t);
              } catch (t) {
                return !1;
              }
            }(t.data);

            if (!1 === o) return l;
            n += o;
          }

          return i("encoded %j as %s", t, n), n;
        }

        function u() {
          this.reconstructor = null;
        }

        function h(t) {
          this.reconPack = t, this.buffers = [];
        }

        function f(t) {
          return {
            type: e.ERROR,
            data: "parser error: " + t
          };
        }

        c.prototype.encode = function (t, n) {
          (i("encoding packet %j", t), e.BINARY_EVENT === t.type || e.BINARY_ACK === t.type) ? function (t, e) {
            r.removeBlobs(t, function (t) {
              var n = r.deconstructPacket(t),
                  i = d(n.packet),
                  o = n.buffers;
              o.unshift(i), e(o);
            });
          }(t, n) : n([d(t)]);
        }, o(u.prototype), u.prototype.add = function (t) {
          var n;
          if ("string" == typeof t) n = function (t) {
            var n = 0,
                o = {
              type: Number(t.charAt(0))
            };
            if (null == e.types[o.type]) return f("unknown packet type " + o.type);

            if (e.BINARY_EVENT === o.type || e.BINARY_ACK === o.type) {
              for (var r = n + 1; "-" !== t.charAt(++n) && n != t.length;) {
                ;
              }

              var a = t.substring(r, n);
              if (a != Number(a) || "-" !== t.charAt(n)) throw new Error("Illegal attachments");
              o.attachments = Number(a);
            }

            if ("/" === t.charAt(n + 1)) {
              for (var r = n + 1; ++n;) {
                var c = t.charAt(n);
                if ("," === c) break;
                if (n === t.length) break;
              }

              o.nsp = t.substring(r, n);
            } else o.nsp = "/";

            var l = t.charAt(n + 1);

            if ("" !== l && Number(l) == l) {
              for (var r = n + 1; ++n;) {
                var c = t.charAt(n);

                if (null == c || Number(c) != c) {
                  --n;
                  break;
                }

                if (n === t.length) break;
              }

              o.id = Number(t.substring(r, n + 1));
            }

            if (t.charAt(++n)) {
              var d = function (t) {
                try {
                  return JSON.parse(t);
                } catch (t) {
                  return !1;
                }
              }(t.substr(n)),
                  u = !1 !== d && (o.type === e.ERROR || s(d));

              if (!u) return f("invalid payload");
              o.data = d;
            }

            return i("decoded %s as %j", t, o), o;
          }(t), e.BINARY_EVENT === n.type || e.BINARY_ACK === n.type ? (this.reconstructor = new h(n), 0 === this.reconstructor.reconPack.attachments && this.emit("decoded", n)) : this.emit("decoded", n);else {
            if (!a(t) && !t.base64) throw new Error("Unknown type: " + t);
            if (!this.reconstructor) throw new Error("got binary data when not reconstructing a packet");
            (n = this.reconstructor.takeBinaryData(t)) && (this.reconstructor = null, this.emit("decoded", n));
          }
        }, u.prototype.destroy = function () {
          this.reconstructor && this.reconstructor.finishedReconstruction();
        }, h.prototype.takeBinaryData = function (t) {
          if (this.buffers.push(t), this.buffers.length === this.reconPack.attachments) {
            var e = r.reconstructPacket(this.reconPack, this.buffers);
            return this.finishedReconstruction(), e;
          }

          return null;
        }, h.prototype.finishedReconstruction = function () {
          this.reconPack = null, this.buffers = [];
        };
      }, function (t, e, n) {
        (function (i) {
          e.log = function () {
            var _console3;

            return "object" == typeof console && console.log && (_console3 = console).log.apply(_console3, arguments);
          }, e.formatArgs = function (e) {
            if (e[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + e[0] + (this.useColors ? "%c " : " ") + "+" + t.exports.humanize(this.diff), !this.useColors) return;
            var n = "color: " + this.color;
            e.splice(1, 0, n, "color: inherit");
            var i = 0,
                o = 0;
            e[0].replace(/%[a-zA-Z%]/g, function (t) {
              "%%" !== t && "%c" === t && (o = ++i);
            }), e.splice(o, 0, n);
          }, e.save = function (t) {
            try {
              t ? e.storage.setItem("debug", t) : e.storage.removeItem("debug");
            } catch (t) {}
          }, e.load = function () {
            var t;

            try {
              t = e.storage.getItem("debug");
            } catch (t) {}

            !t && void 0 !== i && "env" in i && (t = i.env.DEBUG);
            return t;
          }, e.useColors = function () {
            if ("undefined" != typeof window && window.process && ("renderer" === window.process.type || window.process.__nwjs)) return !0;
            if ("undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) return !1;
            return "undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
          }, e.storage = function () {
            try {
              return localStorage;
            } catch (t) {}
          }(), e.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"], t.exports = n(335)(e);
          var o = t.exports.formatters;

          o.j = function (t) {
            try {
              return JSON.stringify(t);
            } catch (t) {
              return "[UnexpectedJSONParseError]: " + t.message;
            }
          };
        }).call(this, n(71));
      }, function (t, e, n) {
        t.exports = function (t) {
          function e(t) {
            var e = 0;

            for (var _n11 = 0; _n11 < t.length; _n11++) {
              e = (e << 5) - e + t.charCodeAt(_n11), e |= 0;
            }

            return i.colors[Math.abs(e) % i.colors.length];
          }

          function i(t) {
            var n;

            function s() {
              for (var _len9 = arguments.length, t = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
                t[_key9] = arguments[_key9];
              }

              if (!s.enabled) return;
              var e = s,
                  o = Number(new Date()),
                  r = o - (n || o);
              e.diff = r, e.prev = n, e.curr = o, n = o, t[0] = i.coerce(t[0]), "string" != typeof t[0] && t.unshift("%O");
              var a = 0;
              t[0] = t[0].replace(/%([a-zA-Z%])/g, function (n, o) {
                if ("%%" === n) return n;
                a++;
                var r = i.formatters[o];

                if ("function" == typeof r) {
                  var _i7 = t[a];
                  n = r.call(e, _i7), t.splice(a, 1), a--;
                }

                return n;
              }), i.formatArgs.call(e, t), (e.log || i.log).apply(e, t);
            }

            return s.namespace = t, s.enabled = i.enabled(t), s.useColors = i.useColors(), s.color = e(t), s.destroy = o, s.extend = r, "function" == typeof i.init && i.init(s), i.instances.push(s), s;
          }

          function o() {
            var t = i.instances.indexOf(this);
            return -1 !== t && (i.instances.splice(t, 1), !0);
          }

          function r(t, e) {
            var n = i(this.namespace + (void 0 === e ? ":" : e) + t);
            return n.log = this.log, n;
          }

          function s(t) {
            return t.toString().substring(2, t.toString().length - 2).replace(/\.\*\?$/, "*");
          }

          return i.debug = i, i["default"] = i, i.coerce = function (t) {
            return t instanceof Error ? t.stack || t.message : t;
          }, i.disable = function () {
            var t = [].concat(_toConsumableArray(i.names.map(s)), _toConsumableArray(i.skips.map(s).map(function (t) {
              return "-" + t;
            }))).join(",");
            return i.enable(""), t;
          }, i.enable = function (t) {
            var e;
            i.save(t), i.names = [], i.skips = [];
            var n = ("string" == typeof t ? t : "").split(/[\s,]+/),
                o = n.length;

            for (e = 0; e < o; e++) {
              n[e] && ("-" === (t = n[e].replace(/\*/g, ".*?"))[0] ? i.skips.push(new RegExp("^" + t.substr(1) + "$")) : i.names.push(new RegExp("^" + t + "$")));
            }

            for (e = 0; e < i.instances.length; e++) {
              var _t15 = i.instances[e];
              _t15.enabled = i.enabled(_t15.namespace);
            }
          }, i.enabled = function (t) {
            if ("*" === t[t.length - 1]) return !0;
            var e, n;

            for (e = 0, n = i.skips.length; e < n; e++) {
              if (i.skips[e].test(t)) return !1;
            }

            for (e = 0, n = i.names.length; e < n; e++) {
              if (i.names[e].test(t)) return !0;
            }

            return !1;
          }, i.humanize = n(336), Object.keys(t).forEach(function (e) {
            i[e] = t[e];
          }), i.instances = [], i.names = [], i.skips = [], i.formatters = {}, i.selectColor = e, i.enable(i.load()), i;
        };
      }, function (t, e) {
        var n = 1e3,
            i = 60 * n,
            o = 60 * i,
            r = 24 * o,
            s = 7 * r,
            a = 365.25 * r;

        function c(t, e, n, i) {
          var o = e >= 1.5 * n;
          return Math.round(t / n) + " " + i + (o ? "s" : "");
        }

        t.exports = function (t, e) {
          e = e || {};
          var l = typeof t;
          if ("string" === l && t.length > 0) return function (t) {
            if ((t = String(t)).length > 100) return;
            var e = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);
            if (!e) return;
            var c = parseFloat(e[1]);

            switch ((e[2] || "ms").toLowerCase()) {
              case "years":
              case "year":
              case "yrs":
              case "yr":
              case "y":
                return c * a;

              case "weeks":
              case "week":
              case "w":
                return c * s;

              case "days":
              case "day":
              case "d":
                return c * r;

              case "hours":
              case "hour":
              case "hrs":
              case "hr":
              case "h":
                return c * o;

              case "minutes":
              case "minute":
              case "mins":
              case "min":
              case "m":
                return c * i;

              case "seconds":
              case "second":
              case "secs":
              case "sec":
              case "s":
                return c * n;

              case "milliseconds":
              case "millisecond":
              case "msecs":
              case "msec":
              case "ms":
                return c;

              default:
                return;
            }
          }(t);
          if ("number" === l && isFinite(t)) return e["long"] ? function (t) {
            var e = Math.abs(t);
            if (e >= r) return c(t, e, r, "day");
            if (e >= o) return c(t, e, o, "hour");
            if (e >= i) return c(t, e, i, "minute");
            if (e >= n) return c(t, e, n, "second");
            return t + " ms";
          }(t) : function (t) {
            var e = Math.abs(t);
            if (e >= r) return Math.round(t / r) + "d";
            if (e >= o) return Math.round(t / o) + "h";
            if (e >= i) return Math.round(t / i) + "m";
            if (e >= n) return Math.round(t / n) + "s";
            return t + "ms";
          }(t);
          throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(t));
        };
      }, function (t, e, n) {
        function i(t) {
          if (t) return function (t) {
            for (var e in i.prototype) {
              t[e] = i.prototype[e];
            }

            return t;
          }(t);
        }

        t.exports = i, i.prototype.on = i.prototype.addEventListener = function (t, e) {
          return this._callbacks = this._callbacks || {}, (this._callbacks["$" + t] = this._callbacks["$" + t] || []).push(e), this;
        }, i.prototype.once = function (t, e) {
          function n() {
            this.off(t, n), e.apply(this, arguments);
          }

          return n.fn = e, this.on(t, n), this;
        }, i.prototype.off = i.prototype.removeListener = i.prototype.removeAllListeners = i.prototype.removeEventListener = function (t, e) {
          if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this;
          var n,
              i = this._callbacks["$" + t];
          if (!i) return this;
          if (1 == arguments.length) return delete this._callbacks["$" + t], this;

          for (var o = 0; o < i.length; o++) {
            if ((n = i[o]) === e || n.fn === e) {
              i.splice(o, 1);
              break;
            }
          }

          return this;
        }, i.prototype.emit = function (t) {
          this._callbacks = this._callbacks || {};
          var e = [].slice.call(arguments, 1),
              n = this._callbacks["$" + t];
          if (n) for (var i = 0, o = (n = n.slice(0)).length; i < o; ++i) {
            n[i].apply(this, e);
          }
          return this;
        }, i.prototype.listeners = function (t) {
          return this._callbacks = this._callbacks || {}, this._callbacks["$" + t] || [];
        }, i.prototype.hasListeners = function (t) {
          return !!this.listeners(t).length;
        };
      }, function (t, e, n) {
        var i = n(50),
            o = n(114),
            r = Object.prototype.toString,
            s = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === r.call(Blob),
            a = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === r.call(File);
        e.deconstructPacket = function (t) {
          var e = [],
              n = t.data,
              r = t;
          return r.data = function t(e, n) {
            if (!e) return e;

            if (o(e)) {
              var r = {
                _placeholder: !0,
                num: n.length
              };
              return n.push(e), r;
            }

            if (i(e)) {
              for (var s = new Array(e.length), a = 0; a < e.length; a++) {
                s[a] = t(e[a], n);
              }

              return s;
            }

            if ("object" == typeof e && !(e instanceof Date)) {
              var s = {};

              for (var c in e) {
                s[c] = t(e[c], n);
              }

              return s;
            }

            return e;
          }(n, e), r.attachments = e.length, {
            packet: r,
            buffers: e
          };
        }, e.reconstructPacket = function (t, e) {
          return t.data = function t(e, n) {
            if (!e) return e;
            if (e && e._placeholder) return n[e.num];
            if (i(e)) for (var o = 0; o < e.length; o++) {
              e[o] = t(e[o], n);
            } else if ("object" == typeof e) for (var r in e) {
              e[r] = t(e[r], n);
            }
            return e;
          }(t.data, e), t.attachments = void 0, t;
        }, e.removeBlobs = function (t, e) {
          var n = 0,
              r = t;
          !function t(c, l, d) {
            if (!c) return c;

            if (s && c instanceof Blob || a && c instanceof File) {
              n++;
              var u = new FileReader();
              u.onload = function () {
                d ? d[l] = this.result : r = this.result, --n || e(r);
              }, u.readAsArrayBuffer(c);
            } else if (i(c)) for (var h = 0; h < c.length; h++) {
              t(c[h], h, c);
            } else if ("object" == typeof c && !o(c)) for (var f in c) {
              t(c[f], f, c);
            }
          }(r), n || e(r);
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(340)),
            r = i(n(32));
        !function (t) {
          t[t.CONNECT = 0] = "CONNECT", t[t.DISCONNECT = 1] = "DISCONNECT", t[t.EVENT = 2] = "EVENT", t[t.ACK = 3] = "ACK", t[t.ERROR = 4] = "ERROR", t[t.BINARY_EVENT = 5] = "BINARY_EVENT", t[t.BINARY_ACK = 6] = "BINARY_ACK";
        }(e.MESSAGE_TYPES || (e.MESSAGE_TYPES = {})), e["default"] = /*#__PURE__*/function () {
          function _class8() {
            _classCallCheck(this, _class8);
          }

          _createClass(_class8, [{
            key: "encode",
            value: function encode(t, e, n) {
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "/";
              var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
              if (e.length > 2) throw new Error("PacketParser supports only 2 elements in data");
              var a = {
                type: t,
                data: e,
                id: n,
                nsp: i
              };
              return r["default"].encode(o["default"].create(a, s));
            }
          }, {
            key: "decode",
            value: function decode(t) {
              var e = r["default"].decode(t, o["default"]);
              return {
                packet: {
                  id: e.id,
                  type: e.type,
                  data: e.packetData,
                  nsp: e.nsp
                },
                options: {
                  flags: e.options.flags,
                  rooms: e.options.rooms,
                  except: e.options.except
                }
              };
            }
          }]);

          return _class8;
        }();
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });

        var o = i(n(32)),
            r = i(n(6)),
            s = i(n(341)),
            a = i(n(18)),
            c = i(n(342)),
            l = i(n(343)),
            d = i(n(344)),
            u = i(n(345)),
            h = i(n(346)),
            f = i(n(347)),
            g = i(n(348)),
            m = i(n(349)),
            p = i(n(350)),
            b = i(n(351)),
            k = i(n(352)),
            _ = [c["default"], l["default"], d["default"], u["default"], h["default"], f["default"], g["default"], m["default"], p["default"], b["default"], k["default"]].reduce(function (t, e) {
          return t[e.TYPE] = e, t;
        }, {});

        var w = /*#__PURE__*/function (_r$default) {
          _inherits(w, _r$default);

          var _super20 = _createSuper(w);

          function w(t, e, n) {
            var _this32;

            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "/";
            var o = arguments.length > 4 ? arguments[4] : undefined;

            _classCallCheck(this, w);

            _this32 = _super20.call(this), _this32.type = t, _this32.data = e, _this32.id = n, _this32.nsp = i, _this32.options = o;
            return _this32;
          }

          _createClass(w, [{
            key: "packetData",
            get: function get() {
              return [this.data.data, this.data.data1];
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = o["default"].encode(this.options),
                  e = o["default"].encode(this.data);
              return {
                type: this.type + 10 * this.data.constructor.TYPE,
                id: this.id,
                nsp: "/" === this.nsp ? void 0 : this.nsp,
                data: e,
                options: t
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e = Math.floor(t.type / 10);
              return new w(t.type - 10 * e, o["default"].decode(t.data, _[e]), t.id, t.nsp, t.options ? o["default"].decode(t.options, s["default"]) : new s["default"]());
            }
          }, {
            key: "create",
            value: function create(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = a["default"].getPacketType(a["default"].getType(t.data[0]), a["default"].getType(t.data[1]));
              return new w(t.type, _[n].create(t.data[0], t.data[1]), t.id, t.nsp, new s["default"](e.flags, e.rooms, e.except));
            }
          }]);

          return w;
        }(r["default"]);

        e["default"] = w, w.TYPE = 10, w.DESCRIPTOR_NAME = "PacketMessage", w.DESCRIPTOR = {
          fields: {
            type: {
              type: "uint32",
              id: 1
            },
            id: {
              type: "uint32",
              id: 2
            },
            nsp: {
              type: "string",
              id: 3
            },
            data: {
              type: "bytes",
              id: 4
            },
            options: {
              type: "bytes",
              id: 5
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default17) {
          _inherits(r, _o$default17);

          var _super21 = _createSuper(r);

          function r(t) {
            var _this33;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

            _classCallCheck(this, r);

            _this33 = _super21.call(this), _this33.flags = t, _this33.rooms = e, _this33.except = n;
            return _this33;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              var t, e;
              return {
                flags: this.flags ? JSON.stringify(this.flags) : void 0,
                rooms: (null === (t = this.rooms) || void 0 === t ? void 0 : t.length) ? this.rooms : void 0,
                except: (null === (e = this.except) || void 0 === e ? void 0 : e.length) ? this.except : void 0
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.flags && JSON.parse(t.flags), t.rooms, t.except);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = 11, r.DESCRIPTOR_NAME = "PacketOptionsMessage", r.DESCRIPTOR = {
          fields: {
            flags: {
              type: "string",
              id: 1
            },
            rooms: {
              type: "string",
              id: 2,
              rule: "repeated"
            },
            except: {
              type: "string",
              id: 3,
              rule: "repeated"
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default2) {
          _inherits(a, _r$default2);

          var _super22 = _createSuper(a);

          function a(t, e) {
            var _this34;

            _classCallCheck(this, a);

            _this34 = _super22.call(this), _this34.data = t, _this34.data1 = e;
            return _this34;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.NUMBER, s.MessageDataTypes.BUFFER), a.DESCRIPTOR_NAME = "NumberBytesPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "uint32",
              id: 1
            },
            data1: {
              type: "bytes",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default3) {
          _inherits(a, _r$default3);

          var _super23 = _createSuper(a);

          function a(t, e) {
            var _this35;

            _classCallCheck(this, a);

            _this35 = _super23.call(this), _this35.data = t, _this35.data1 = e;
            return _this35;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.STRING, s.MessageDataTypes.BUFFER), a.DESCRIPTOR_NAME = "StringBytesPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "string",
              id: 1
            },
            data1: {
              type: "bytes",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default4) {
          _inherits(a, _r$default4);

          var _super24 = _createSuper(a);

          function a(t, e) {
            var _this36;

            _classCallCheck(this, a);

            _this36 = _super24.call(this), _this36.data = t, _this36.data1 = e;
            return _this36;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.BUFFER, s.MessageDataTypes.BUFFER), a.DESCRIPTOR_NAME = "BytesBytesPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "bytes",
              id: 1
            },
            data1: {
              type: "bytes",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default5) {
          _inherits(a, _r$default5);

          var _super25 = _createSuper(a);

          function a(t, e) {
            var _this37;

            _classCallCheck(this, a);

            _this37 = _super25.call(this), _this37.data = t, _this37.data1 = e;
            return _this37;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1 ? JSON.stringify(this.data1) : void 0
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1 && JSON.parse(t.data1));
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.STRING, s.MessageDataTypes.OBJECT), a.DESCRIPTOR_NAME = "StringObjectPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "string",
              id: 1
            },
            data1: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default6) {
          _inherits(a, _r$default6);

          var _super26 = _createSuper(a);

          function a(t, e) {
            var _this38;

            _classCallCheck(this, a);

            _this38 = _super26.call(this), _this38.data = t, _this38.data1 = e;
            return _this38;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1 ? JSON.stringify(this.data1) : void 0
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1 && JSON.parse(t.data1));
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.NUMBER, s.MessageDataTypes.OBJECT), a.DESCRIPTOR_NAME = "NumberObjectPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "uint32",
              id: 1
            },
            data1: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default7) {
          _inherits(a, _r$default7);

          var _super27 = _createSuper(a);

          function a(t, e) {
            var _this39;

            _classCallCheck(this, a);

            _this39 = _super27.call(this), _this39.data = t, _this39.data1 = e;
            return _this39;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data ? JSON.stringify(this.data) : void 0,
                data1: this.data1 ? JSON.stringify(this.data1) : void 0
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data && JSON.parse(t.data), t.data1 && JSON.parse(t.data1));
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.OBJECT, s.MessageDataTypes.OBJECT), a.DESCRIPTOR_NAME = "ObjectObjectPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "string",
              id: 1
            },
            data1: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default8) {
          _inherits(a, _r$default8);

          var _super28 = _createSuper(a);

          function a(t, e) {
            var _this40;

            _classCallCheck(this, a);

            _this40 = _super28.call(this), _this40.data = t, _this40.data1 = e;
            return _this40;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data ? JSON.stringify(this.data) : void 0,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data && JSON.parse(t.data), t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.OBJECT, s.MessageDataTypes.BUFFER), a.DESCRIPTOR_NAME = "ObjectBufferPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "string",
              id: 1
            },
            data1: {
              type: "bytes",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default9) {
          _inherits(a, _r$default9);

          var _super29 = _createSuper(a);

          function a(t, e) {
            var _this41;

            _classCallCheck(this, a);

            _this41 = _super29.call(this), _this41.data = t, _this41.data1 = e;
            return _this41;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.STRING, s.MessageDataTypes.STRING), a.DESCRIPTOR_NAME = "StringStringPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "string",
              id: 1
            },
            data1: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default10) {
          _inherits(a, _r$default10);

          var _super30 = _createSuper(a);

          function a(t, e) {
            var _this42;

            _classCallCheck(this, a);

            _this42 = _super30.call(this), _this42.data = t, _this42.data1 = e;
            return _this42;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.STRING, s.MessageDataTypes.NUMBER), a.DESCRIPTOR_NAME = "StringNumberPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "string",
              id: 1
            },
            data1: {
              type: "uint32",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default11) {
          _inherits(a, _r$default11);

          var _super31 = _createSuper(a);

          function a(t, e) {
            var _this43;

            _classCallCheck(this, a);

            _this43 = _super31.call(this), _this43.data = t, _this43.data1 = e;
            return _this43;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.NUMBER, s.MessageDataTypes.NUMBER), a.DESCRIPTOR_NAME = "NumberNumberPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "uint32",
              id: 1
            },
            data1: {
              type: "uint32",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        },
            o = this && this.__importStar || function (t) {
          if (t && t.__esModule) return t;
          var e = {};
          if (null != t) for (var n in t) {
            Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          }
          return e["default"] = t, e;
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var r = i(n(22)),
            s = o(n(18));

        var a = /*#__PURE__*/function (_r$default12) {
          _inherits(a, _r$default12);

          var _super32 = _createSuper(a);

          function a(t, e) {
            var _this44;

            _classCallCheck(this, a);

            _this44 = _super32.call(this), _this44.data = t, _this44.data1 = e;
            return _this44;
          }

          _createClass(a, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                data: this.data,
                data1: this.data1
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new a(t.data, t.data1);
            }
          }, {
            key: "create",
            value: function create(t, e) {
              return new a(t, e);
            }
          }]);

          return a;
        }(r["default"]);

        e["default"] = a, a.TYPE = s["default"].getPacketType(s.MessageDataTypes.NUMBER, s.MessageDataTypes.STRING), a.DESCRIPTOR_NAME = "NumberStringPacketDataMessage", a.DESCRIPTOR = {
          fields: {
            data: {
              type: "uint32",
              id: 1
            },
            data1: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        var i = n(2),
            o = n(354);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-user-colors--0:#6d78e8;--ck-user-colors--0-alpha:rgba(109,120,232,0.15);--ck-user-colors--1:#007a6c;--ck-user-colors--1-alpha:rgba(0,122,108,0.15);--ck-user-colors--2:#ba4545;--ck-user-colors--2-alpha:rgba(186,69,69,0.15);--ck-user-colors--3:#5635b1;--ck-user-colors--3-alpha:rgba(86,53,177,0.15);--ck-user-colors--4:#548a2e;--ck-user-colors--4-alpha:rgba(84,138,46,0.15);--ck-user-colors--5:#c3185d;--ck-user-colors--5-alpha:rgba(195,24,93,0.15);--ck-user-colors--6:#ea4343;--ck-user-colors--6-alpha:rgba(234,67,67,0.15);--ck-user-colors--7:#0bc3d0;--ck-user-colors--7-alpha:rgba(11,195,208,0.15);--ck-user-dot-size:6px}.ck .ck-user__color--0{color:var(--ck-user-colors--0)}.ck .ck-user__bg-color--0{background-color:var(--ck-user-colors--0)}.ck .ck-user__selection--0{background-color:var(--ck-user-colors--0-alpha)}.ck .ck-user__selection--0.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--0)}.ck .ck-user__marker--0,.ck .ck-user__marker--0 .ck-user__marker-dot,.ck .ck-user__marker--0:after{background-color:var(--ck-user-colors--0)}.ck .ck-user__marker--0 .ck-user__marker-line{border:1px solid var(--ck-user-colors--0)}.ck .ck-user__color--1{color:var(--ck-user-colors--1)}.ck .ck-user__bg-color--1{background-color:var(--ck-user-colors--1)}.ck .ck-user__selection--1{background-color:var(--ck-user-colors--1-alpha)}.ck .ck-user__selection--1.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--1)}.ck .ck-user__marker--1,.ck .ck-user__marker--1 .ck-user__marker-dot,.ck .ck-user__marker--1:after{background-color:var(--ck-user-colors--1)}.ck .ck-user__marker--1 .ck-user__marker-line{border:1px solid var(--ck-user-colors--1)}.ck .ck-user__color--2{color:var(--ck-user-colors--2)}.ck .ck-user__bg-color--2{background-color:var(--ck-user-colors--2)}.ck .ck-user__selection--2{background-color:var(--ck-user-colors--2-alpha)}.ck .ck-user__selection--2.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--2)}.ck .ck-user__marker--2,.ck .ck-user__marker--2 .ck-user__marker-dot,.ck .ck-user__marker--2:after{background-color:var(--ck-user-colors--2)}.ck .ck-user__marker--2 .ck-user__marker-line{border:1px solid var(--ck-user-colors--2)}.ck .ck-user__color--3{color:var(--ck-user-colors--3)}.ck .ck-user__bg-color--3{background-color:var(--ck-user-colors--3)}.ck .ck-user__selection--3{background-color:var(--ck-user-colors--3-alpha)}.ck .ck-user__selection--3.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--3)}.ck .ck-user__marker--3,.ck .ck-user__marker--3 .ck-user__marker-dot,.ck .ck-user__marker--3:after{background-color:var(--ck-user-colors--3)}.ck .ck-user__marker--3 .ck-user__marker-line{border:1px solid var(--ck-user-colors--3)}.ck .ck-user__color--4{color:var(--ck-user-colors--4)}.ck .ck-user__bg-color--4{background-color:var(--ck-user-colors--4)}.ck .ck-user__selection--4{background-color:var(--ck-user-colors--4-alpha)}.ck .ck-user__selection--4.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--4)}.ck .ck-user__marker--4,.ck .ck-user__marker--4 .ck-user__marker-dot,.ck .ck-user__marker--4:after{background-color:var(--ck-user-colors--4)}.ck .ck-user__marker--4 .ck-user__marker-line{border:1px solid var(--ck-user-colors--4)}.ck .ck-user__color--5{color:var(--ck-user-colors--5)}.ck .ck-user__bg-color--5{background-color:var(--ck-user-colors--5)}.ck .ck-user__selection--5{background-color:var(--ck-user-colors--5-alpha)}.ck .ck-user__selection--5.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--5)}.ck .ck-user__marker--5,.ck .ck-user__marker--5 .ck-user__marker-dot,.ck .ck-user__marker--5:after{background-color:var(--ck-user-colors--5)}.ck .ck-user__marker--5 .ck-user__marker-line{border:1px solid var(--ck-user-colors--5)}.ck .ck-user__color--6{color:var(--ck-user-colors--6)}.ck .ck-user__bg-color--6{background-color:var(--ck-user-colors--6)}.ck .ck-user__selection--6{background-color:var(--ck-user-colors--6-alpha)}.ck .ck-user__selection--6.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--6)}.ck .ck-user__marker--6,.ck .ck-user__marker--6 .ck-user__marker-dot,.ck .ck-user__marker--6:after{background-color:var(--ck-user-colors--6)}.ck .ck-user__marker--6 .ck-user__marker-line{border:1px solid var(--ck-user-colors--6)}.ck .ck-user__color--7{color:var(--ck-user-colors--7)}.ck .ck-user__bg-color--7{background-color:var(--ck-user-colors--7)}.ck .ck-user__selection--7{background-color:var(--ck-user-colors--7-alpha)}.ck .ck-user__selection--7.ck-widget{background-color:transparent;border:3px solid var(--ck-user-colors--7)}.ck .ck-user__marker--7,.ck .ck-user__marker--7 .ck-user__marker-dot,.ck .ck-user__marker--7:after{background-color:var(--ck-user-colors--7)}.ck .ck-user__marker--7 .ck-user__marker-line{border:1px solid var(--ck-user-colors--7)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(356);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-user__marker{display:inline;position:relative;cursor:default}.ck .ck-user__marker:after{content:attr(data-name);display:none;position:absolute;font-family:Georgia,sans-serif;font-size:var(--ck-font-size-base);line-height:1;font-style:normal;font-weight:400;left:0;opacity:0;top:-20px;padding:var(--ck-spacing-small);color:#fff;white-space:nowrap;transition:opacity .2s linear,transform .3s ease-in-out;z-index:99999}.ck .ck-user__marker:hover .ck-user__marker-dot{width:0}.ck .ck-user__marker:hover:after{display:block;opacity:1;animation:fadeInLeft .3s ease-in-out}.ck .ck-user__marker-line{position:absolute;bottom:0;height:100%;width:0}.ck .ck-user__marker-dot{display:block;position:absolute;left:50%;top:calc(var(--ck-user-dot-size)/2*-1);width:var(--ck-user-dot-size);height:var(--ck-user-dot-size);border-radius:50%;transform:translate(-50%,-50%);cursor:default}.ck .ck-placeholder .ck-user__marker{display:none}@keyframes fadeInLeft{0%{opacity:0;transform:translateX(-10px)}to{opacity:1;transform:translateX(0)}}";
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(13)),
            r = n(82),
            s = i(n(40)),
            a = i(n(39)),
            c = i(n(358)),
            l = i(n(359)),
            d = i(n(360)),
            u = i(n(361)),
            h = i(n(32));

        e["default"] = /*#__PURE__*/function (_o$default18) {
          _inherits(_class9, _o$default18);

          var _super33 = _createSuper(_class9);

          function _class9(t, e) {
            var _this45;

            _classCallCheck(this, _class9);

            _this45 = _super33.call(this, {
              idProperty: "id"
            }), _this45._id = t, _this45._sessionType = e, _this45._handlers = new Map(), _this45._eventsQueue = [], _this45._isRunning = !1;
            return _this45;
          }

          _createClass(_class9, [{
            key: "connect",
            value: function () {
              var _connect6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee29(t) {
                var _this46 = this;

                var e, n, _t16, i, _iterator12, _step12, _t17;

                return regeneratorRuntime.wrap(function _callee29$(_context29) {
                  while (1) {
                    switch (_context29.prev = _context29.next) {
                      case 0:
                        this._wsGateway = t, this.stopListening(t, "change:state");
                        e = new l["default"](this._id, this._sessionType);
                        _context29.prev = 2;
                        _context29.next = 5;
                        return this._wsGateway._sendRequest(r._SERVICE, l["default"].TYPE, h["default"].encode(e));

                      case 5:
                        _t16 = _context29.sent;
                        n = h["default"].decode(_t16, c["default"]);
                        _context29.next = 12;
                        break;

                      case 9:
                        _context29.prev = 9;
                        _context29.t0 = _context29["catch"](2);
                        n = new c["default"](this._id, []);

                      case 12:
                        this._connectToChannel(this._wsGateway, n.channel, this._sessionType);

                        _context29.next = 15;
                        return function () {
                          var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee28(t, e) {
                            var n, i;
                            return regeneratorRuntime.wrap(function _callee28$(_context28) {
                              while (1) {
                                switch (_context28.prev = _context28.next) {
                                  case 0:
                                    n = e.map(function (t) {
                                      return t.userId;
                                    });

                                    if (!n.length) {
                                      _context28.next = 7;
                                      break;
                                    }

                                    _context28.next = 4;
                                    return s["default"].getMany(t, n);

                                  case 4:
                                    _context28.t0 = _context28.sent;
                                    _context28.next = 8;
                                    break;

                                  case 7:
                                    _context28.t0 = [];

                                  case 8:
                                    i = _context28.t0;
                                    return _context28.abrupt("return", e.map(function (t) {
                                      var e = {
                                        id: t.id,
                                        role: t.role,
                                        permissions: t.permissions
                                      };
                                      return e.user = t.userId && i.find(function (e) {
                                        return e.id === t.userId;
                                      }) || new s["default"](), e;
                                    }));

                                  case 10:
                                  case "end":
                                    return _context28.stop();
                                }
                              }
                            }, _callee28);
                          }));

                          return function (_x41, _x42) {
                            return _ref5.apply(this, arguments);
                          };
                        }()(this._wsGateway, n.sockets);

                      case 15:
                        i = _context29.sent;
                        _iterator12 = _createForOfIteratorHelper(i);

                        try {
                          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
                            _t17 = _step12.value;

                            _get3(_getPrototypeOf(_class9.prototype), "add", this).call(this, _t17);
                          }
                        } catch (err) {
                          _iterator12.e(err);
                        } finally {
                          _iterator12.f();
                        }

                        this._connected = !0;
                        this.fire("connected");
                        this.listenTo(this._wsGateway, "change:state", function (t, e, n) {
                          return _this46._onWsGatewayStateChange(n);
                        }, {
                          priority: a["default"]._CHANGE_STATE_EVENT_PRIORITY
                        });
                        _context29.next = 23;
                        return this._runQueue();

                      case 23:
                      case "end":
                        return _context29.stop();
                    }
                  }
                }, _callee29, this, [[2, 9]]);
              }));

              function connect(_x40) {
                return _connect6.apply(this, arguments);
              }

              return connect;
            }()
          }, {
            key: "disconnect",
            value: function disconnect() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;

              if (this._connected) {
                for (this._connected = !1, this._eventsQueue = []; this.length;) {
                  _get3(_getPrototypeOf(_class9.prototype), "remove", this).call(this, 0);
                }

                this._channel && (this.stopListening(this._channel), this._channel = void 0), this._wsGateway && t && (this.stopListening(this._wsGateway), this._wsGateway = void 0), this.fire("disconnected"), t && this.stopListening();
              }
            }
          }, {
            key: "add",
            value: function add(t, e) {
              throw new TypeError("The collection is read-only.");
            }
          }, {
            key: "remove",
            value: function remove(t) {
              throw new TypeError("The collection is read-only.");
            }
          }, {
            key: "_connectToChannel",
            value: function _connectToChannel(t, e, n) {
              var _this47 = this;

              this._channel = t._getChannel(n, e), this._channel && (this._addHandler(this._channel, d["default"].TYPE, /*#__PURE__*/function () {
                var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee30(e) {
                  var n, _e8;

                  return regeneratorRuntime.wrap(function _callee30$(_context30) {
                    while (1) {
                      switch (_context30.prev = _context30.next) {
                        case 0:
                          n = h["default"].decode(e, d["default"]);

                          if (!(-1 === _this47.getIndex(n.id))) {
                            _context30.next = 9;
                            break;
                          }

                          _e8 = {
                            id: n.id,
                            role: n.role,
                            permissions: n.permissions
                          };
                          _context30.t0 = n.userId;

                          if (!_context30.t0) {
                            _context30.next = 8;
                            break;
                          }

                          _context30.next = 7;
                          return s["default"].get(t, n.userId);

                        case 7:
                          _e8.user = _context30.sent;

                        case 8:
                          _get3(_getPrototypeOf(_class9.prototype), "add", _this47).call(_this47, _e8);

                        case 9:
                        case "end":
                          return _context30.stop();
                      }
                    }
                  }, _callee30);
                }));

                return function (_x43) {
                  return _ref6.apply(this, arguments);
                };
              }()), this._addHandler(this._channel, u["default"].TYPE, function (t) {
                var e = h["default"].decode(t, u["default"]);
                -1 !== _this47.getIndex(e.id) && _get3(_getPrototypeOf(_class9.prototype), "remove", _this47).call(_this47, e.id);
              }));
            }
          }, {
            key: "_onWsGatewayStateChange",
            value: function () {
              var _onWsGatewayStateChange2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee31(t) {
                return regeneratorRuntime.wrap(function _callee31$(_context31) {
                  while (1) {
                    switch (_context31.prev = _context31.next) {
                      case 0:
                        t === a["default"].STATE_DISCONNECTED && this.disconnect(!1);
                        _context31.t0 = t === a["default"].STATE_CONNECTED;

                        if (!_context31.t0) {
                          _context31.next = 5;
                          break;
                        }

                        _context31.next = 5;
                        return this.connect(this._wsGateway);

                      case 5:
                      case "end":
                        return _context31.stop();
                    }
                  }
                }, _callee31, this);
              }));

              function _onWsGatewayStateChange(_x44) {
                return _onWsGatewayStateChange2.apply(this, arguments);
              }

              return _onWsGatewayStateChange;
            }()
          }, {
            key: "_runQueue",
            value: function () {
              var _runQueue2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee32() {
                var t, _e9;

                return regeneratorRuntime.wrap(function _callee32$(_context32) {
                  while (1) {
                    switch (_context32.prev = _context32.next) {
                      case 0:
                        if (!(this._isRunning || !this._connected)) {
                          _context32.next = 2;
                          break;
                        }

                        return _context32.abrupt("return");

                      case 2:
                        this._isRunning = !0;

                      case 3:
                        if (!(t = this._eventsQueue.shift())) {
                          _context32.next = 11;
                          break;
                        }

                        _e9 = this._handlers.get(t.eventName);
                        _context32.t0 = _e9;

                        if (!_context32.t0) {
                          _context32.next = 9;
                          break;
                        }

                        _context32.next = 9;
                        return _e9(t.data);

                      case 9:
                        _context32.next = 3;
                        break;

                      case 11:
                        this._isRunning = !1;

                      case 12:
                      case "end":
                        return _context32.stop();
                    }
                  }
                }, _callee32, this);
              }));

              function _runQueue() {
                return _runQueue2.apply(this, arguments);
              }

              return _runQueue;
            }()
          }, {
            key: "_addHandler",
            value: function _addHandler(t, e, n) {
              var _this48 = this;

              var i = t.getEventName(e, !0);
              this.listenTo(t, i, /*#__PURE__*/function () {
                var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee33(t, e) {
                  var n;
                  return regeneratorRuntime.wrap(function _callee33$(_context33) {
                    while (1) {
                      switch (_context33.prev = _context33.next) {
                        case 0:
                          n = t.name;

                          _this48._eventsQueue.push({
                            eventName: n,
                            data: e
                          });

                          _context33.next = 4;
                          return _this48._runQueue();

                        case 4:
                        case "end":
                          return _context33.stop();
                      }
                    }
                  }, _callee33);
                }));

                return function (_x45, _x46) {
                  return _ref7.apply(this, arguments);
                };
              }()), this._handlers.set(i, n);
            }
          }]);

          return _class9;
        }(o["default"]);
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default19) {
          _inherits(r, _o$default19);

          var _super34 = _createSuper(r);

          function r(t) {
            var _this49;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

            _classCallCheck(this, r);

            _this49 = _super34.call(this), _this49.channel = t, _this49.sockets = e;
            return _this49;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                channel: this.channel,
                sockets: this.sockets.map(function (t) {
                  return {
                    user: t.userId,
                    session: t.id,
                    role: t.role,
                    permissions: t.permissions
                  };
                })
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.channel, t.sockets.map(function (t) {
                return {
                  id: t.session,
                  userId: t.user,
                  role: t.role,
                  permissions: t.permissions
                };
              }));
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "SessionsConnectResponse", r.DESCRIPTOR = {
          fields: {
            channel: {
              type: "string",
              id: 1
            },
            sockets: {
              rule: "repeated",
              type: "SessionsSocketDescriptor",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default20) {
          _inherits(r, _o$default20);

          var _super35 = _createSuper(r);

          function r(t, e) {
            var _this50;

            _classCallCheck(this, r);

            _this50 = _super35.call(this), _this50.id = t, _this50.sessionType = e;
            return _this50;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                sessionType: this.sessionType
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.sessionType);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "31", r.READABLE_TYPE_NAME = "getConnectedSockets", r.DESCRIPTOR_NAME = "SessionsConnectMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            sessionType: {
              type: "uint32",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default21) {
          _inherits(r, _o$default21);

          var _super36 = _createSuper(r);

          function r(t, e, n, i) {
            var _this51;

            _classCallCheck(this, r);

            _this51 = _super36.call(this), _this51.id = t, _this51.userId = e, _this51.role = n, _this51.permissions = i;
            return _this51;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              var t, e, n;
              return {
                id: this.id,
                userId: null !== (t = this.userId) && void 0 !== t ? t : void 0,
                role: null !== (e = this.role) && void 0 !== e ? e : void 0,
                permissions: null !== (n = this.permissions) && void 0 !== n ? n : void 0
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.userId, t.role, t.permissions);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "32", r.READABLE_TYPE_NAME = "connectSocket", r.DESCRIPTOR_NAME = "SocketConnectMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            userId: {
              type: "string",
              id: 2
            },
            role: {
              type: "string",
              id: 3
            },
            permissions: {
              rule: "repeated",
              type: "string",
              id: 4
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default22) {
          _inherits(r, _o$default22);

          var _super37 = _createSuper(r);

          function r(t) {
            var _this52;

            _classCallCheck(this, r);

            _this52 = _super37.call(this), _this52.id = t;
            return _this52;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "33", r.READABLE_TYPE_NAME = "disconnectSocket", r.DESCRIPTOR_NAME = "SocketDisconnectMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default23) {
          _inherits(r, _o$default23);

          var _super38 = _createSuper(r);

          function r(t, e, n, i) {
            var _this53;

            _classCallCheck(this, r);

            _this53 = _super38.call(this), _this53.id = t, _this53.buffers = e, _this53.types = n, _this53.bundleVersion = i;
            return _this53;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                buffers: this.buffers,
                types: this.types,
                bundleVersion: this.bundleVersion
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.buffers, t.types, t.bundleVersion);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "11", r.READABLE_TYPE_NAME = "connectToDocument", r.DESCRIPTOR_NAME = "CollaborativeEditingConnectMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            bundleVersion: {
              type: "string",
              id: 2
            },
            buffers: {
              rule: "repeated",
              type: "bytes",
              id: 3
            },
            types: {
              rule: "repeated",
              type: "uint32",
              id: 4
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(83));

        var s = /*#__PURE__*/function (_o$default24) {
          _inherits(s, _o$default24);

          var _super39 = _createSuper(s);

          function s(t, e, n, i) {
            var _this54;

            var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];

            _classCallCheck(this, s);

            _this54 = _super39.call(this), _this54.id = t, _this54.buffers = e, _this54.types = n, _this54.baseVersion = i, _this54.metadata = o;
            return _this54;
          }

          _createClass(s, [{
            key: "data",
            get: function get() {
              return {
                buffers: this.buffers,
                types: this.types,
                baseVersion: this.baseVersion
              };
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                buffers: this.buffers,
                types: this.types,
                baseVersion: this.baseVersion,
                metadata: r["default"].removeUnnecessaryMetadata(this.types, this.metadata)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new s(t.id, t.buffers, t.types, t.baseVersion, r["default"].prepareMetadataForOperations(t.types, t.metadata).map(function (t) {
                return "function" != typeof t.toJSON ? t : t.toJSON();
              }));
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.TYPE = "13", s.READABLE_TYPE_NAME = "updateDocument", s.DESCRIPTOR_NAME = "CollaborativeEditingUpdateMessage", s.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            baseVersion: {
              type: "uint32",
              id: 2
            },
            buffers: {
              rule: "repeated",
              type: "bytes",
              id: 3
            },
            types: {
              rule: "repeated",
              type: "uint32",
              id: 4
            },
            metadata: {
              rule: "repeated",
              type: "OperationMetadataDescriptor",
              id: 6
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default25) {
          _inherits(r, _o$default25);

          var _super40 = _createSuper(r);

          function r(t, e, n) {
            var _this55;

            _classCallCheck(this, r);

            _this55 = _super40.call(this), _this55.id = t, _this55.lastKnowVersion = e, _this55.bundleVersion = n;
            return _this55;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                bundleVersion: this.bundleVersion,
                lastKnowVersion: this.lastKnowVersion
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.lastKnowVersion, t.bundleVersion);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "12", r.READABLE_TYPE_NAME = "reconnectToDocument", r.DESCRIPTOR_NAME = "CollaborativeEditingReconnectMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            bundleVersion: {
              type: "string",
              id: 2
            },
            lastKnowVersion: {
              type: "uint32",
              id: 3
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(83));

        var s = /*#__PURE__*/function (_o$default26) {
          _inherits(s, _o$default26);

          var _super41 = _createSuper(s);

          function s(t) {
            var _this56;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];

            _classCallCheck(this, s);

            _this56 = _super41.call(this), _this56.version = t, _this56.buffers = e, _this56.types = n, _this56.metadata = i;
            return _this56;
          }

          _createClass(s, [{
            key: "data",
            get: function get() {
              return {
                buffers: this.buffers,
                types: this.types,
                baseVersion: this.version - this.types.length
              };
            }
          }, {
            key: "wereChangesApplied",
            get: function get() {
              var t;
              return !(null === (t = this.types) || void 0 === t ? void 0 : t.length);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return {
                version: this.version,
                buffers: this.buffers,
                types: this.types,
                metadata: r["default"].removeUnnecessaryMetadata(this.types, this.metadata)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new s(t.version, t.buffers, t.types, r["default"].prepareMetadataForOperations(t.types, t.metadata).map(function (t) {
                return "function" != typeof t.toJSON ? t : t.toJSON();
              }));
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.DESCRIPTOR_NAME = "CollaborativeEditingResponse", s.DESCRIPTOR = {
          fields: {
            version: {
              type: "uint32",
              id: 1
            },
            buffers: {
              rule: "repeated",
              type: "bytes",
              id: 2
            },
            types: {
              rule: "repeated",
              type: "uint32",
              id: 3
            },
            metadata: {
              rule: "repeated",
              type: "OperationMetadataDescriptor",
              id: 5
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(83));

        var s = /*#__PURE__*/function (_o$default27) {
          _inherits(s, _o$default27);

          var _super42 = _createSuper(s);

          function s(t, e) {
            var _this57;

            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
            var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;
            var r = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];

            var _s3 = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;

            _classCallCheck(this, s);

            _this57 = _super42.call(this), _this57.channel = t, _this57.version = e, _this57.buffers = n, _this57.types = i, _this57.offset = o, _this57.metadata = r, _this57.initData = _s3;
            return _this57;
          }

          _createClass(s, [{
            key: "data",
            get: function get() {
              return {
                buffers: this.buffers,
                types: this.types,
                baseVersion: this.version - this.types.length
              };
            }
          }, {
            key: "wereChangesApplied",
            get: function get() {
              var t;
              return !(null === (t = this.types) || void 0 === t ? void 0 : t.length) && null === this.initData;
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t;
              return {
                channel: this.channel,
                version: this.version,
                buffers: this.buffers,
                types: this.types,
                offset: this.offset,
                metadata: r["default"].removeUnnecessaryMetadata(this.types, this.metadata),
                initData: null !== (t = this.initData) && void 0 !== t ? t : "",
                isInitialized: "string" == typeof this.initData
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e;
              var n = null;
              return !0 === t.isInitialized ? n = null !== (e = t.initData) && void 0 !== e ? e : "" : "boolean" != typeof t.isInitialized && t.initData && (n = t.initData), new s(t.channel, t.version, t.buffers, t.types, t.offset, r["default"].prepareMetadataForOperations(t.types, t.metadata).map(function (t) {
                return "function" != typeof t.toJSON ? t : t.toJSON();
              }), n);
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.DESCRIPTOR_NAME = "CollaborativeEditingConnectResponse", s.DESCRIPTOR = {
          fields: {
            channel: {
              type: "string",
              id: 1
            },
            offset: {
              type: "uint32",
              id: 2
            },
            version: {
              type: "uint32",
              id: 3
            },
            buffers: {
              rule: "repeated",
              type: "bytes",
              id: 4
            },
            types: {
              rule: "repeated",
              type: "uint32",
              id: 5
            },
            metadata: {
              rule: "repeated",
              type: "OperationMetadataDescriptor",
              id: 7
            },
            initData: {
              type: "string",
              id: 8
            },
            isInitialized: {
              type: "bool",
              id: 9
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default28) {
          _inherits(r, _o$default28);

          var _super43 = _createSuper(r);

          function r(t, e, n) {
            var _this58;

            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "";
            var o = arguments.length > 4 ? arguments[4] : undefined;

            var _r7 = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : "";

            var s = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;

            _classCallCheck(this, r);

            _this58 = _super43.call(this), _this58.documentId = t, _this58.commentThreadId = e, _this58.content = n, _this58.commentId = i, _this58.userId = _r7, _this58.attributes = s, _this58.createdAt = o ? new Date(o) : "";
            return _this58;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                commentThreadId: this.commentThreadId,
                content: this.content,
                documentId: this.documentId,
                commentId: this.commentId,
                createdAt: this.createdAt instanceof Date ? this.createdAt.toISOString() : this.createdAt,
                userId: this.userId,
                attributes: JSON.stringify(this.attributes)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId, t.commentThreadId, t.content, t.commentId ? t.commentId : void 0, t.createdAt ? new Date(t.createdAt) : void 0, t.userId ? t.userId : void 0, t.attributes ? JSON.parse(t.attributes) : {});
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "91", r.READABLE_TYPE_NAME = "addComment", r.DESCRIPTOR_NAME = "CommentsV2AddCommentMessage", r.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            content: {
              type: "string",
              id: 2
            },
            documentId: {
              type: "string",
              id: 3
            },
            commentId: {
              type: "string",
              id: 4
            },
            createdAt: {
              type: "string",
              id: 5
            },
            userId: {
              type: "string",
              id: 6
            },
            attributes: {
              type: "string",
              id: 7
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default29) {
          _inherits(r, _o$default29);

          var _super44 = _createSuper(r);

          function r(t, e, n) {
            var _this59;

            _classCallCheck(this, r);

            _this59 = _super44.call(this), _this59.commentThreadId = t, _this59.commentId = e, _this59.createdAt = new Date(n);
            return _this59;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                commentThreadId: this.commentThreadId,
                commentId: this.commentId,
                createdAt: this.createdAt.toISOString()
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.commentThreadId, t.commentId, t.createdAt);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "CommentsV2AddCommentResponse", r.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            commentId: {
              type: "string",
              id: 2
            },
            createdAt: {
              type: "string",
              id: 3
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default30) {
          _inherits(r, _o$default30);

          var _super45 = _createSuper(r);

          function r(t) {
            var _this60;

            _classCallCheck(this, r);

            _this60 = _super45.call(this), _this60.documentId = t;
            return _this60;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                documentId: this.documentId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "92", r.READABLE_TYPE_NAME = "connectToComment", r.DESCRIPTOR_NAME = "CommentsV2ConnectMessage", r.DESCRIPTOR = {
          fields: {
            documentId: {
              type: "string",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(80));

        var s = /*#__PURE__*/function (_o$default31) {
          _inherits(s, _o$default31);

          var _super46 = _createSuper(s);

          function s(t, e, n) {
            var _this61;

            _classCallCheck(this, s);

            _this61 = _super46.call(this), _this61.channel = t, _this61._threads = e, _this61._threadsV2 = n, _this61.threads = (null == n ? void 0 : n.length) ? n : e;
            return _this61;
          }

          _createClass(s, [{
            key: "toJSON",
            value: function toJSON() {
              var t, e;
              return {
                channel: this.channel,
                threads: null === (t = this._threads) || void 0 === t ? void 0 : t.map(function (t) {
                  return JSON.stringify(t);
                }),
                threadsV2: null === (e = this._threadsV2) || void 0 === e ? void 0 : e.map(r["default"].toJSON)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e, n;
              return new s(t.channel, null === (e = t.threads) || void 0 === e ? void 0 : e.map(function (t) {
                return JSON.parse(t);
              }), null === (n = t.threadsV2) || void 0 === n ? void 0 : n.map(r["default"].fromJSON));
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.DESCRIPTOR_NAME = "CommentsV2ConnectResponse", s.DESCRIPTOR = {
          fields: {
            channel: {
              type: "string",
              id: 1
            },
            threads: {
              type: "string",
              rule: "repeated",
              id: 2
            },
            threadsV2: {
              type: "CommentsThreadDescriptor",
              rule: "repeated",
              id: 3
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default32) {
          _inherits(r, _o$default32);

          var _super47 = _createSuper(r);

          function r(t, e, n) {
            var _this62;

            _classCallCheck(this, r);

            _this62 = _super47.call(this), _this62.documentId = t, _this62.commentThreadId = e, _this62.commentId = n;
            return _this62;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                documentId: this.documentId,
                commentThreadId: this.commentThreadId,
                commentId: this.commentId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId, t.commentThreadId, t.commentId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "95", r.READABLE_TYPE_NAME = "removeComment", r.DESCRIPTOR_NAME = "CommentsV2RemoveCommentMessage", r.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            commentId: {
              type: "string",
              id: 2
            },
            documentId: {
              type: "string",
              id: 3
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default33) {
          _inherits(r, _o$default33);

          var _super48 = _createSuper(r);

          function r(t, e) {
            var _this63;

            _classCallCheck(this, r);

            _this63 = _super48.call(this), _this63.documentId = t, _this63.commentThreadId = e;
            return _this63;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                documentId: this.documentId,
                commentThreadId: this.commentThreadId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId, t.commentThreadId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "97", r.READABLE_TYPE_NAME = "removeCommentThread", r.DESCRIPTOR_NAME = "CommentsV2RemoveCommentThreadMessage", r.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            documentId: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default34) {
          _inherits(r, _o$default34);

          var _super49 = _createSuper(r);

          function r(t, e, n, i) {
            var _this64;

            var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;

            var _r8 = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;

            _classCallCheck(this, r);

            _this64 = _super49.call(this), _this64.documentId = t, _this64.commentThreadId = e, _this64.commentId = n, _this64.content = i, _this64.attributes = o, _this64.isAttributesUpdated = _r8;
            return _this64;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                documentId: this.documentId,
                commentThreadId: this.commentThreadId,
                commentId: this.commentId,
                content: this.content,
                attributes: this.attributes ? JSON.stringify(this.attributes) : null,
                isAttributesUpdated: this.isAttributesUpdated
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId, t.commentThreadId, t.commentId, t.content, t.attributes ? JSON.parse(t.attributes) : null, t.isAttributesUpdated);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "96", r.READABLE_TYPE_NAME = "updateComment", r.DESCRIPTOR_NAME = "CommentsV2UpdateCommentMessage", r.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            commentId: {
              type: "string",
              id: 2
            },
            content: {
              type: "string",
              id: 3
            },
            documentId: {
              type: "string",
              id: 4
            },
            attributes: {
              type: "string",
              id: 5
            },
            isAttributesUpdated: {
              type: "bool",
              id: 6
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default35) {
          _inherits(r, _o$default35);

          var _super50 = _createSuper(r);

          function r(t, e) {
            var _this65;

            _classCallCheck(this, r);

            _this65 = _super50.call(this), _this65.commentThreadId = t, _this65.documentId = e;
            return _this65;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                commentThreadId: this.commentThreadId,
                documentId: this.documentId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.commentThreadId, t.documentId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "93", r.READABLE_TYPE_NAME = "getComment", r.DESCRIPTOR_NAME = "CommentsV2GetCommentThreadMessage", r.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            documentId: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(79));

        var s = /*#__PURE__*/function (_o$default36) {
          _inherits(s, _o$default36);

          var _super51 = _createSuper(s);

          function s(t, e, n) {
            var _this66;

            _classCallCheck(this, s);

            _this66 = _super51.call(this), _this66.commentThreadId = t, _this66._comments = e, _this66._commentsV2 = n, _this66.comments = (null == n ? void 0 : n.length) ? n : e;
            return _this66;
          }

          _createClass(s, [{
            key: "toJSON",
            value: function toJSON() {
              var t, e;
              return {
                commentThreadId: this.commentThreadId,
                comments: null === (t = this._comments) || void 0 === t ? void 0 : t.map(function (t) {
                  return JSON.stringify(t);
                }),
                commentsV2: null === (e = this._commentsV2) || void 0 === e ? void 0 : e.map(r["default"].toJSON)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e, n;
              return new s(t.commentThreadId, null === (e = t.comments) || void 0 === e ? void 0 : e.map(function (t) {
                return function (t) {
                  var e = JSON.parse(t);
                  return Object.assign(Object.assign({}, e), {
                    createdAt: new Date(e.createdAt)
                  });
                }(t);
              }), null === (n = t.commentsV2) || void 0 === n ? void 0 : n.map(r["default"].fromJSON));
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.DESCRIPTOR_NAME = "CommentsV2GetCommentThreadResponse", s.DESCRIPTOR = {
          fields: {
            commentThreadId: {
              type: "string",
              id: 1
            },
            comments: {
              type: "string",
              rule: "repeated",
              id: 2
            },
            commentsV2: {
              type: "CommentDescriptor",
              rule: "repeated",
              id: 3
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default37) {
          _inherits(r, _o$default37);

          var _super52 = _createSuper(r);

          function r(t) {
            var _this67;

            _classCallCheck(this, r);

            _this67 = _super52.call(this), _this67.documentId = t;
            return _this67;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                documentId: this.documentId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "94", r.READABLE_TYPE_NAME = "getDocumentThreads", r.DESCRIPTOR_NAME = "CommentsV2GetDocumentThreadsMessage", r.DESCRIPTOR = {
          fields: {
            documentId: {
              type: "string",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(80));

        var s = /*#__PURE__*/function (_o$default38) {
          _inherits(s, _o$default38);

          var _super53 = _createSuper(s);

          function s(t, e) {
            var _this68;

            _classCallCheck(this, s);

            _this68 = _super53.call(this), _this68._threads = t, _this68._threadsV2 = e, _this68.threads = (null == e ? void 0 : e.length) ? e : t;
            return _this68;
          }

          _createClass(s, [{
            key: "toJSON",
            value: function toJSON() {
              var t, e;
              return {
                threads: null === (t = this._threads) || void 0 === t ? void 0 : t.map(function (t) {
                  return JSON.stringify(t);
                }),
                threadsV2: null === (e = this._threadsV2) || void 0 === e ? void 0 : e.map(r["default"].toJSON)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e, n;
              return new s(null === (e = t.threads) || void 0 === e ? void 0 : e.map(function (t) {
                return function (t) {
                  var e;
                  var n = JSON.parse(t),
                      i = Object.assign({}, n);
                  return n.comments && (i.comments = null === (e = n.comments) || void 0 === e ? void 0 : e.map(function (t) {
                    return Object.assign(Object.assign({}, t), {
                      createdAt: new Date(t.createdAt)
                    });
                  })), i;
                }(t);
              }), null === (n = t.threadsV2) || void 0 === n ? void 0 : n.map(r["default"].fromJSON));
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.DESCRIPTOR_NAME = "CommentsV2GetDocumentThreadsResponse", s.DESCRIPTOR = {
          fields: {
            threads: {
              type: "string",
              rule: "repeated",
              id: 1
            },
            threadsV2: {
              type: "CommentsThreadDescriptor",
              rule: "repeated",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        var i = n(2),
            o = n(379);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-user-avatar-size:40px;--ck-user-avatar-background:#3670ab;--ck-user-avatar-color:#fff}.ck.ck-user{display:flex;justify-content:center;align-items:center;position:relative;border-radius:50%;overflow:hidden;background-color:var(--ck-user-avatar-background);height:var(--ck-user-avatar-size);width:var(--ck-user-avatar-size);min-width:var(--ck-user-avatar-size);min-height:var(--ck-user-avatar-size)}.ck.ck-user__name{color:var(--ck-user-avatar-color);cursor:default;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-user__name.ck-user__name--hidden{display:none}.ck.ck-user__img{display:none;width:inherit;height:inherit;background-position:50%;background-repeat:no-repeat;background-size:cover;background-color:var(--ck-user-avatar-background);border-radius:50%;border:2px solid var(--ck-user-avatar-background)}.ck.ck-user__img.ck-user__anonymous{display:block;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cpath fill='%23FFF' d='M9.8 20H2c0-5.7 5-5.7 6-7l.2-.8c-1.6-.8-2.7-2.7-2.7-5 0-2.8 2-5.2 4.3-5.2S14 4.4 14 7.3c0 2.2-1 4-2.6 5l.2.6c1.2 1.3 6 1.4 6 7H9.8z'/%3E%3C/svg%3E\")}.ck.ck-user__img.ck-user__anonymous+.ck-user__name{display:none}.ck.ck-user__img.ck-user__avatar{display:block;background-color:#fff}.ck.ck-user__img.ck-user__img--hidden{display:none}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(381);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ':root{--ck-color-comment-background:#f3f7fb;--ck-color-comment-separator:#cddeef;--ck-color-comment-remove-background:#fcc;--ck-color-comment-input-background:var(--ck-color-comment-background)}.ck .ck-comment__wrapper{font-size:var(--ck-font-size-base);position:relative;outline:0;transition:all .3s linear}.ck .ck-comment__wrapper.ck-comment--remove-confirmation{transform:translate3d(-100%,0,0)}.ck .ck-comment__wrapper:first-of-type{border-top-right-radius:var(--ck-border-radius);border-top-left-radius:var(--ck-border-radius)}.ck .ck-comment:after{content:"";display:block;position:absolute;opacity:1;top:calc(var(--ck-user-avatar-size) + var(--ck-spacing-small));left:calc(var(--ck-spacing-standard) + var(--ck-user-avatar-size)/2 - 2px);width:4px;height:100%;background-color:var(--ck-color-comment-separator)}.ck .ck-comment--remove{background-color:var(--ck-color-comment-remove-background)}.ck .ck-comment--remove:after{opacity:0}.ck .ck-comment--edit{background-color:var(--ck-color-comment-input-background)}.ck .ck-comment--edit:after{opacity:0}.ck .ck-comment__main .ck-comment__input-wrapper{display:flex;flex-direction:column;position:relative;transition:all .3s linear}.ck .ck-comment__main .ck-comment__input-wrapper .ck-comment__input{padding:0}.ck .ck-comment__content{word-break:break-word}.ck .ck-comment__user{z-index:var(--ck-z-default)}.ck-comment__input-actions .ck.ck-button.ck-comment__input-actions--submit{color:var(--ck-color-button-save)}.ck-comment__input-actions .ck.ck-button.ck-comment__input-actions--cancel{color:var(--ck-color-button-cancel)}.ck .ck-comment__input p,.ck .ck-comment p{margin:0}.ck .ck-comment__input ol,.ck .ck-comment__input ul,.ck .ck-comment ol,.ck .ck-comment ul{padding-left:10px;margin-left:10px}.ck .ck-comment__input ul,.ck .ck-comment ul{list-style:disc;margin-bottom:5px;margin-top:0}.ck .ck-comment__input ul ul,.ck .ck-comment ul ul{list-style:circle}.ck .ck-comment__input ul ul ul,.ck .ck-comment ul ul ul{list-style:square}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(383);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ':root{--ck-color-thread-remove-background:var(--ck-color-comment-remove-background);--ck-color-comment-count:#5891ca}.ck .ck-thread{width:100%;color:var(--ck-color-base-text);outline:0;background-color:var(--ck-color-base-background);overflow:hidden;transition:all .3s ease;border-radius:var(--ck-border-radius)}.ck .ck-thread__comments .ck-comment__wrapper:last-of-type .ck-comment:after{opacity:0}.ck .ck-thread__container{transition:transform .3s ease}.ck .ck-thread__comments{position:relative;z-index:var(--ck-z-default);list-style:none;margin:0;padding:0;border-radius:var(--ck-border-radius);overflow:hidden}.ck .ck-thread__comment-count{--ck-user-avatar-size:28px;padding-left:calc(var(--ck-user-avatar-size) + var(--ck-spacing-standard)*2);color:var(--ck-color-comment-count);font-size:var(--ck-font-size-base);font-weight:700;cursor:pointer;transition:background-color .3s ease}.ck .ck-thread__comment-count:before{content:"\\25BC";margin-right:var(--ck-spacing-small)}.ck .ck-thread--active .ck-comment__options.ck-dropdown{display:block}.ck .ck-thread--active .ck-thread__input{display:block;background-color:var(--ck-color-comment-background)}.ck .ck-thread--remove .ck-comment{background-color:var(--ck-color-comment-remove-background)}.ck .ck-thread--remove .ck-thread__input--active{background-color:var(--ck-color-base-background)}.ck .ck-thread--remove .ck-thread__comment-count,.ck .ck-thread--remove .ck-thread__input--active.ck-thread__input{background-color:var(--ck-color-comment-remove-background)}.ck .ck-thread--remove .ck-comment__wrapper .ck-comment:after{opacity:0}.ck .ck-thread--remove-confirmation .ck-thread__container{transform:translate3d(-100%,0,0)}.ck.ck-button.ck-thread__remove-confirm-submit{color:var(--ck-color-button-save)}.ck.ck-button.ck-thread__remove-confirm-cancel{color:var(--ck-color-button-cancel)}.ck .ck-thread__remove-confirm{font-size:var(--ck-font-size-base);position:absolute;display:flex;justify-content:flex-start;top:0;left:100%;width:100%;height:100%;background-color:var(--ck-color-comment-remove-background)}.ck .ck-thread__remove-confirm .ck-thread__remove-confirm-inner{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:var(--ck-spacing-standard);height:100%;width:100%;max-height:400px}.ck .ck-thread__remove-confirm p{font-weight:700;margin:0}.ck .ck-thread__input{width:calc(100% - var(--ck-user-avatar-size));transition:background-color .2s ease-in-out;border-radius:var(--ck-border-radius)}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(385);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck .ck-comment__input-container{--ck-user-avatar-size:28px;font-size:var(--ck-font-size-base);display:none;padding:var(--ck-spacing-standard);background:var(--ck-color-comment-background)}.ck .ck-comment__input-container--active{display:flex}.ck .ck-comment__input{padding:var(--ck-spacing-standard);padding-top:var(--ck-spacing-medium);color:var(--ck-color-base-text);border-width:0;resize:none;background-color:transparent;transition:color .3s ease-in-out}.ck .ck-comment__input:focus{outline:none}.ck .ck-comment__input .ck-editor__editable_inline{--ck-focus-ring:none;--ck-inner-shadow:none;padding:0;overflow:visible;border:0;background-color:transparent;word-break:break-word}.ck-comment__input-wrapper .ck.ck-editor__editable_inline :first-child{margin-top:0}.ck-comment__input-wrapper .ck.ck-editor__editable_inline :last-child{margin-bottom:0}.ck .ck-comment__input-actions{width:100%;text-align:right;display:none}.ck .ck-comment__input-actions.ck-comment__input-actions--active{display:block}.ck .ck-comment__input-actions .ck-button{background-color:transparent;min-width:unset;min-height:unset;cursor:pointer;color:var(--ck-color-annotations-icon);border-radius:var(--ck-border-radius);font-size:var(--ck-annotation-button-size)}.ck .ck-comment__input-actions .ck-button.ck-disabled{opacity:.3}.ck .ck-comment__input-textarea{display:block}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(387);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-annotation-icon:grey;--ck-color-annotation-info:#757575;--ck-annotation-button-size:0.85em}.ck .ck-annotation{--ck-user-avatar-size:28px;font-size:var(--ck-font-size-base);display:flex;position:relative;animation:fadeInLeft .3s;transition:background-color .3s ease;padding:var(--ck-spacing-standard)}.ck .ck-annotation .ck-button{background-color:transparent;min-width:unset;min-height:unset;cursor:pointer;color:var(--ck-color-annotation-icon);border-radius:var(--ck-border-radius);font-size:var(--ck-annotation-button-size)}.ck .ck-annotation__main{display:flex;flex-wrap:wrap;justify-content:space-between;width:calc(100% - var(--ck-user-avatar-size));transition:all .2s ease;border-radius:var(--ck-border-radius);padding-left:var(--ck-spacing-standard)}.ck .ck-annotation__main p{margin:0;white-space:normal;font-size:var(--ck-font-size-base);line-height:1.5em}.ck .ck-annotation__user{margin-top:var(--ck-spacing-small)}.ck .ck-annotation__info{display:flex;align-items:center;color:var(--ck-color-annotation-info);min-height:2.4em}.ck .ck-annotation__info-name,.ck .ck-annotation__info-time{font-weight:700;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--ck-color-annotation-info);font-size:var(--ck-font-size-small)}.ck .ck-annotation__info-time{margin-left:var(--ck-spacing-large)}.ck .ck-annotation__actions{transition:opacity .2s ease;opacity:.5}.ck .ck-annotation__content-wrapper{width:100%}@keyframes fadeInLeft{0%{transform:translate3d(-5%,0,0);opacity:0}to{transform:translateZ(0);opacity:1}}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(389);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-comment-marker:#fef7a9;--ck-color-comment-marker-active:#fdf05d}.ck-comment-marker{background:var(--ck-color-comment-marker);border-top:3px solid transparent;border-bottom:3px solid transparent}.ck-comment-marker.ck-widget{background-color:transparent;border:3px solid var(--ck-color-comment-marker)}.ck-comment-marker--active{background:var(--ck-color-comment-marker-active)}.ck-comment-marker--active.ck-widget{border-color:var(--ck-color-comment-marker-active)}.ck-comment-marker--active.ck-widget .ck-comment-marker{background-color:var(--ck-color-comment-marker)}.ck-comment-marker--active .ck-comment-marker{background:var(--ck-color-comment-marker-active)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(391);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-annotation-wrapper-background:#fff;--ck-color-annotation-wrapper-drop-shadow:0 1px 1px 1px #e6e6e6}.ck.ck-sidebar{position:relative;transition:min-height .25s ease;outline:0}.ck-sidebar-item{position:absolute;width:100%;transition:top .3s ease,box-shadow .3s ease}.ck-sidebar-item--no-animation{transition:top 0s ease!important}.ck.ck-annotation-wrapper{outline:0;border-radius:var(--ck-border-radius);background:var(--ck-color-annotation-wrapper-background);box-shadow:var(--ck-color-annotation-wrapper-drop-shadow)}.ck.ck-annotation-wrapper:not(.ck-annotation-wrapper--active):hover{box-shadow:var(--ck-drop-shadow)}.ck.ck-annotation-wrapper--active{box-shadow:var(--ck-drop-shadow-active)}.ck.ck-annotation-wrapper--active .ck-annotation__actions,.ck.ck-annotation-wrapper:hover .ck-annotation__actions{opacity:1}.ck.ck-annotation-wrapper--active .ck-suggestion--accept,.ck.ck-annotation-wrapper:hover .ck-suggestion--accept{color:var(--ck-color-button-save)}.ck.ck-annotation-wrapper--active .ck-suggestion--discard,.ck.ck-annotation-wrapper:hover .ck-suggestion--discard{color:var(--ck-color-button-cancel)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(393);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-annotation-counter-icon-size:18px;--ck-annotation-counter-number-size:10px;--ck-color-annotation-counter-comment:#f2de02;--ck-color-annotation-counter-suggestion-insertion:#5ad86b;--ck-color-annotation-counter-suggestion-deletion:#d85a79;--ck-color-annotation-counter-suggestion-format:#5ac1d8}.ck.ck-sidebar--narrow .ck-sidebar-item{display:flex;justify-content:center}.ck.ck-sidebar--narrow .ck-annotation-counter{font-size:var(--ck-annotation-counter-icon-size);min-height:unset;padding:0;cursor:pointer;color:grey}.ck.ck-sidebar--narrow .ck-annotation-counter:focus,.ck.ck-sidebar--narrow .ck-annotation-counter:hover{background:transparent;box-shadow:none;color:#4d4d4d}.ck.ck-sidebar--narrow .ck-annotation-counter__badge{border-radius:50%;position:absolute;width:16px;height:16px;background:#333;font-weight:700;color:#fff;font-size:var(--ck-annotation-counter-number-size);font-family:var(--ck-font-face);right:0;top:0;text-shadow:-1px 0 2px #444,1px 0 2px #444;display:flex;justify-content:center;line-height:16px;z-index:1}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--edit-mode{line-height:1}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-insertion,.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-replace{background:var(--ck-color-annotation-counter-suggestion-insertion)}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-deletion{background:var(--ck-color-annotation-counter-suggestion-deletion)}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--suggestion-format{background:var(--ck-color-annotation-counter-suggestion-format)}.ck.ck-sidebar--narrow .ck-annotation-counter__badge--comment{background:var(--ck-color-annotation-counter-comment)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(395);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-inline-annotation-container-width:300px;--ck-inline-annotation-container-max-height:400px}.ck.ck-balloon-panel .ck-annotation-wrapper{position:static;width:var(--ck-inline-annotation-container-width);max-height:var(--ck-inline-annotation-container-max-height);overflow-y:auto;overscroll-behavior-y:contain;overflow-x:hidden}.ck.ck-balloon-panel .ck-annotation{animation:none}.ck.ck-balloon-panel .ck-annotation-wrapper *{white-space:normal}.ck.ck-balloon-panel .ck-annotation-wrapper strong{font-weight:700}.ck.ck-balloon-panel .ck-annotation-wrapper i{font-style:italic}.ck.ck-balloon-panel button.ck-suggestion--accept .ck-tooltip__text,.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip__text{text-align:center}.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip{left:unset;right:0}.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip__text{left:unset}.ck.ck-balloon-panel button.ck-suggestion--discard .ck-tooltip__text:after{left:calc(100% - 10px)}";
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default39) {
          _inherits(r, _o$default39);

          var _super54 = _createSuper(r);

          function r(t, e, n) {
            var _this69;

            var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
            var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;

            var _r9 = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;

            _classCallCheck(this, r);

            _this69 = _super54.call(this), _this69.id = t, _this69.documentId = e, _this69.type = n, _this69.data = i, _this69.originalSuggestionId = o, _this69.attributes = _r9;
            return _this69;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                documentId: this.documentId,
                type: this.type,
                data: JSON.stringify(this.data),
                originalSuggestionId: this.originalSuggestionId,
                attributes: JSON.stringify(this.attributes)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e;
              return new r(t.id, t.documentId, t.type, JSON.parse(t.data), null !== (e = t.originalSuggestionId) && void 0 !== e ? e : null, t.attributes ? JSON.parse(t.attributes) : null);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "101", r.READABLE_TYPE_NAME = "addSuggestion", r.DESCRIPTOR_NAME = "TrackChangesAddSuggestionMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            documentId: {
              type: "string",
              id: 2
            },
            type: {
              type: "string",
              id: 3
            },
            data: {
              type: "string",
              id: 4
            },
            originalSuggestionId: {
              type: "string",
              id: 5
            },
            attributes: {
              type: "string",
              id: 6
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default40) {
          _inherits(r, _o$default40);

          var _super55 = _createSuper(r);

          function r(t, e, n, i, o, _r10) {
            var _this70;

            var s = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};
            var a = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;

            _classCallCheck(this, r);

            _this70 = _super55.call(this), _this70.id = t, _this70.authorId = e, _this70.type = n, _this70.hasComments = o, _this70.state = _r10, _this70.data = s, _this70.attributes = a, _this70.createdAt = i ? new Date(i) : void 0;
            return _this70;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              var t;
              return {
                id: this.id,
                authorId: this.authorId,
                type: this.type,
                createdAt: null === (t = this.createdAt) || void 0 === t ? void 0 : t.toISOString(),
                data: JSON.stringify(this.data),
                hasComments: this.hasComments,
                state: this.state,
                attributes: JSON.stringify(this.attributes)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.authorId, t.type, t.createdAt, t.hasComments, t.state, JSON.parse(t.data), t.attributes ? JSON.parse(t.attributes) : null);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "TrackChangesAddSuggestionResponse", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            authorId: {
              type: "string",
              id: 2
            },
            type: {
              type: "string",
              id: 3
            },
            createdAt: {
              type: "string",
              id: 4
            },
            data: {
              type: "string",
              id: 5
            },
            hasComments: {
              type: "bool",
              id: 6
            },
            state: {
              type: "string",
              id: 7
            },
            attributes: {
              type: "string",
              id: 8
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default41) {
          _inherits(r, _o$default41);

          var _super56 = _createSuper(r);

          function r(t, e) {
            var _this71;

            _classCallCheck(this, r);

            _this71 = _super56.call(this), _this71.id = t, _this71.documentId = e;
            return _this71;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                documentId: this.documentId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.documentId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "103", r.READABLE_TYPE_NAME = "getSuggestion", r.DESCRIPTOR_NAME = "TrackChangesGetSuggestionMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            documentId: {
              type: "string",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default42) {
          _inherits(r, _o$default42);

          var _super57 = _createSuper(r);

          function r(t, e, n, i, o, _r11) {
            var _this72;

            var s = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};
            var a = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;

            _classCallCheck(this, r);

            _this72 = _super57.call(this), _this72.id = t, _this72.authorId = e, _this72.type = n, _this72.hasComments = o, _this72.state = _r11, _this72.data = s, _this72.attributes = a, _this72.createdAt = new Date(i);
            return _this72;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                authorId: this.authorId,
                type: this.type,
                createdAt: this.createdAt.toISOString(),
                data: JSON.stringify(this.data),
                hasComments: this.hasComments,
                state: this.state,
                attributes: JSON.stringify(this.attributes)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.authorId, t.type, t.createdAt, t.hasComments, t.state, JSON.parse(t.data), t.attributes ? JSON.parse(t.attributes) : null);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.DESCRIPTOR_NAME = "TrackChangesGetSuggestionResponse", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            authorId: {
              type: "string",
              id: 2
            },
            type: {
              type: "string",
              id: 3
            },
            createdAt: {
              type: "string",
              id: 4
            },
            data: {
              type: "string",
              id: 5
            },
            hasComments: {
              type: "bool",
              id: 6
            },
            state: {
              type: "string",
              id: 7
            },
            attributes: {
              type: "string",
              id: 8
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default43) {
          _inherits(r, _o$default43);

          var _super58 = _createSuper(r);

          function r(t) {
            var _this73;

            _classCallCheck(this, r);

            _this73 = _super58.call(this), _this73.documentId = t;
            return _this73;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                documentId: this.documentId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "102", r.READABLE_TYPE_NAME = "getAllSuggestions", r.DESCRIPTOR_NAME = "TrackChangesGetAllSuggestionMessage", r.DESCRIPTOR = {
          fields: {
            documentId: {
              type: "string",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(81));

        var s = /*#__PURE__*/function (_o$default44) {
          _inherits(s, _o$default44);

          var _super59 = _createSuper(s);

          function s(t, e) {
            var _this74;

            _classCallCheck(this, s);

            _this74 = _super59.call(this), _this74._suggestions = t, _this74._suggestionsV2 = e, _this74.suggestions = (null == e ? void 0 : e.length) ? e : t;
            return _this74;
          }

          _createClass(s, [{
            key: "toJSON",
            value: function toJSON() {
              var t, e;
              return {
                suggestions: null === (t = this._suggestions) || void 0 === t ? void 0 : t.map(function (t) {
                  return JSON.stringify(t);
                }),
                suggestionsV2: null === (e = this._suggestionsV2) || void 0 === e ? void 0 : e.map(r["default"].toJSON)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e, n;
              return new s(null === (e = t.suggestions) || void 0 === e ? void 0 : e.map(a), null === (n = t.suggestionsV2) || void 0 === n ? void 0 : n.map(r["default"].fromJSON));
            }
          }]);

          return s;
        }(o["default"]);

        function a(t) {
          var e = JSON.parse(t);
          return e.createdAt = e.createdAt ? new Date(e.createdAt) : void 0, e;
        }

        e["default"] = s, s.DESCRIPTOR_NAME = "TrackChangesGetAllSuggestionsResponse", s.DESCRIPTOR = {
          fields: {
            suggestions: {
              type: "string",
              rule: "repeated",
              id: 1
            },
            suggestionsV2: {
              type: "SuggestionDescriptor",
              rule: "repeated",
              id: 2
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default45) {
          _inherits(r, _o$default45);

          var _super60 = _createSuper(r);

          function r(t, e, n, i, o) {
            var _this75;

            var _r12 = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;

            _classCallCheck(this, r);

            _this75 = _super60.call(this), _this75.id = t, _this75.documentId = e, _this75.hasComments = n, _this75.isHasCommentsModified = i, _this75.state = o, _this75.attributes = _r12;
            return _this75;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                id: this.id,
                documentId: this.documentId,
                hasComments: this.hasComments,
                isHasCommentsModified: this.isHasCommentsModified,
                state: this.state,
                attributes: JSON.stringify(this.attributes)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.id, t.documentId, t.hasComments, t.isHasCommentsModified, t.state, t.attributes ? JSON.parse(t.attributes) : null);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "104", r.READABLE_TYPE_NAME = "updateSuggestion", r.DESCRIPTOR_NAME = "TrackChangesUpdateSuggestionMessage", r.DESCRIPTOR = {
          fields: {
            id: {
              type: "string",
              id: 1
            },
            documentId: {
              type: "string",
              id: 2
            },
            hasComments: {
              type: "bool",
              id: 3
            },
            isHasCommentsModified: {
              type: "bool",
              id: 4
            },
            state: {
              type: "string",
              id: 5
            },
            attributes: {
              type: "string",
              id: 6
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6));

        var r = /*#__PURE__*/function (_o$default46) {
          _inherits(r, _o$default46);

          var _super61 = _createSuper(r);

          function r(t) {
            var _this76;

            _classCallCheck(this, r);

            _this76 = _super61.call(this), _this76.documentId = t;
            return _this76;
          }

          _createClass(r, [{
            key: "toJSON",
            value: function toJSON() {
              return {
                documentId: this.documentId
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new r(t.documentId);
            }
          }]);

          return r;
        }(o["default"]);

        e["default"] = r, r.TYPE = "105", r.READABLE_TYPE_NAME = "connectToSuggestions", r.DESCRIPTOR_NAME = "TrackChangesConnectMessage", r.DESCRIPTOR = {
          fields: {
            documentId: {
              type: "string",
              id: 1
            }
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i = this && this.__importDefault || function (t) {
          return t && t.__esModule ? t : {
            "default": t
          };
        };

        Object.defineProperty(e, "__esModule", {
          value: !0
        });
        var o = i(n(6)),
            r = i(n(81));

        var s = /*#__PURE__*/function (_o$default47) {
          _inherits(s, _o$default47);

          var _super62 = _createSuper(s);

          function s(t, e, n) {
            var _this77;

            _classCallCheck(this, s);

            _this77 = _super62.call(this), _this77.channel = t, _this77._suggestions = e, _this77._suggestionsV2 = n, _this77.suggestions = (null == n ? void 0 : n.length) ? n : e;
            return _this77;
          }

          _createClass(s, [{
            key: "toJSON",
            value: function toJSON() {
              var t, e;
              return {
                channel: this.channel,
                suggestions: null === (t = this._suggestions) || void 0 === t ? void 0 : t.map(function (t) {
                  return JSON.stringify(t);
                }),
                suggestionsV2: null === (e = this._suggestionsV2) || void 0 === e ? void 0 : e.map(r["default"].toJSON)
              };
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e, n;
              return new s(t.channel, null === (e = t.suggestions) || void 0 === e ? void 0 : e.map(function (t) {
                return JSON.parse(t);
              }), null === (n = t.suggestionsV2) || void 0 === n ? void 0 : n.map(r["default"].fromJSON));
            }
          }]);

          return s;
        }(o["default"]);

        e["default"] = s, s.DESCRIPTOR_NAME = "TrackChangesConnectResponse", s.DESCRIPTOR = {
          fields: {
            channel: {
              type: "string",
              id: 1
            },
            suggestions: {
              type: "string",
              rule: "repeated",
              id: 2
            },
            suggestionsV2: {
              type: "SuggestionDescriptor",
              rule: "repeated",
              id: 3
            }
          }
        };
      }, function (t, e) {
        t.exports = ":root{--ck-color-comment-box-border:#f2de02;--ck-color-suggestion-box-deletion-border:#d85a79;--ck-color-suggestion-box-insertion-border:#5ad86b;--ck-color-suggestion-box-format-border:#5ac1d8}.ck .ck-suggestion{border-top-left-radius:var(--ck-border-radius)}.ck .ck-annotation{border-left:3px solid transparent}.ck .ck-suggestion--disabled-comments .ck-annotation{min-height:80px}.ck .ck-comment,.ck .ck-comment__input-container,.ck .ck-thread__comment-count{border-left:3px solid var(--ck-color-comment-box-border)}.ck .ck-suggestion-insertion .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-insertion-border)}.ck .ck-suggestion-deletion .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-deletion-border)}.ck .ck-suggestion-replace .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-insertion-border)}.ck .ck-suggestion-format .ck-suggestion{border-left-color:var(--ck-color-suggestion-box-format-border)}.ck .ck-suggestion-wrapper{outline:0}.ck .ck-suggestion-type{font-weight:700}.ck .ck-suggestion-insertion .ck-comment,.ck .ck-suggestion-insertion .ck-comment__input-container,.ck .ck-suggestion-insertion .ck-thread__comment-count,.ck .ck-suggestion-replace .ck-comment,.ck .ck-suggestion-replace .ck-comment__input-container,.ck .ck-suggestion-replace .ck-thread__comment-count{border-left-color:var(--ck-color-suggestion-box-insertion-border)}.ck .ck-suggestion-deletion .ck-comment,.ck .ck-suggestion-deletion .ck-comment__input-container,.ck .ck-suggestion-deletion .ck-thread__comment-count{border-left-color:var(--ck-color-suggestion-box-deletion-border)}.ck .ck-suggestion-format .ck-comment,.ck .ck-suggestion-format .ck-comment__input-container,.ck .ck-suggestion-format .ck-thread__comment-count{border-left-color:var(--ck-color-suggestion-box-format-border)}";
      }, function (t, e) {
        t.exports = ':root{--ck-color-suggestion-marker-insertion-border:rgba(30,174,49,0.35);--ck-color-suggestion-marker-insertion-border-active:rgba(19,109,31,0.5);--ck-color-suggestion-marker-insertion-background:rgba(102,229,119,0.35);--ck-color-suggestion-marker-insertion-background-active:rgba(37,218,61,0.5);--ck-color-suggestion-marker-deletion-border:rgba(174,30,66,0.35);--ck-color-suggestion-marker-deletion-border-active:rgba(109,19,41,0.5);--ck-color-suggestion-marker-deletion-background:rgba(229,102,134,0.35);--ck-color-suggestion-marker-deletion-background-active:rgba(218,37,82,0.5);--ck-color-suggestion-marker-deletion-stroke:rgba(87,15,33,0.5);--ck-color-suggestion-marker-format-border:rgba(10,160,194,0.4);--ck-color-suggestion-marker-format-border-active:rgba(10,160,194,0.65);--ck-color-suggestion-widget-insertion-background:rgba(102,229,119,0.05);--ck-color-suggestion-widget-insertion-background-active:rgba(37,218,61,0.07);--ck-color-suggestion-widget-deletion-background:rgba(229,102,134,0.05);--ck-color-suggestion-widget-deletion-background-active:rgba(196,33,74,0.07);--ck-color-suggestion-widget-format-background:rgba(10,160,194,0.09);--ck-color-suggestion-widget-format-background-active:rgba(10,160,194,0.16)}.ck-content .ck-suggestion-marker-insertion{border-top:3px solid var(--ck-color-suggestion-marker-insertion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-insertion-border);background:var(--ck-color-suggestion-marker-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-insertion-border-active);background:var(--ck-color-suggestion-marker-insertion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget{background:none;text-decoration:none;border:3px solid var(--ck-color-suggestion-marker-insertion-border)}.ck-content .ck-suggestion-marker-insertion.ck-widget.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .ck-suggestion-marker-deletion{border-top:3px solid var(--ck-color-suggestion-marker-deletion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-deletion-border);text-decoration:line-through;text-decoration-color:var(--ck-color-suggestion-marker-deletion-stroke);text-decoration-thickness:3px;background:var(--ck-color-suggestion-marker-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-deletion-border-active);background:var(--ck-color-suggestion-marker-deletion-background-active)}.ck-content .ck-suggestion-marker-deletion.ck-widget{background:none;text-decoration:none;border:3px solid var(--ck-color-suggestion-marker-deletion-border)}.ck-content .ck-suggestion-marker-deletion.ck-widget.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .ck-suggestion-marker-merge:after{border-top:3px solid var(--ck-color-suggestion-marker-deletion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-deletion-border);text-decoration:line-through;text-decoration-color:var(--ck-color-suggestion-marker-deletion-stroke);background:var(--ck-color-suggestion-marker-deletion-background);color:var(--ck-color-suggestion-marker-deletion-stroke);content:"¶"}.ck-content .ck-suggestion-marker-merge.ck-suggestion-marker--active:after{border-color:var(--ck-color-suggestion-marker-deletion-border-active);background:var(--ck-color-suggestion-marker-deletion-background-active)}.ck-content .ck-suggestion-marker-split:after{border-top:3px solid var(--ck-color-suggestion-marker-insertion-border);border-bottom:3px solid var(--ck-color-suggestion-marker-insertion-border);background:var(--ck-color-suggestion-marker-insertion-background);color:var(--ck-color-suggestion-marker-insertion-border);content:"¶"}.ck-content .ck-suggestion-marker-split.ck-suggestion-marker--active:after{border-color:var(--ck-color-suggestion-marker-insertion-border-active);background:var(--ck-color-suggestion-marker-insertion-background-active)}.ck-content .ck-suggestion-marker-formatInline{border-top:3px solid var(--ck-color-suggestion-marker-format-border);border-bottom:3px solid var(--ck-color-suggestion-marker-format-border)}.ck-content .ck-suggestion-marker-formatInline.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-format-border-active)}.ck-content .ck-suggestion-marker-formatInline.ck-widget{background:none;border:3px solid var(--ck-color-suggestion-marker-format-border)}.ck-content .ck-suggestion-marker-formatInline.ck-widget.ck-suggestion-marker--active{border-color:var(--ck-color-suggestion-marker-format-border-active)}.ck-content .ck-suggestion-marker-formatBlock{border:0;background:none;box-shadow:-7px 0 0 0 var(--ck-color-base-background),-10px 0 0 0 var(--ck-color-suggestion-marker-format-border)}.ck-content .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active{box-shadow:-5px 0 0 0 var(--ck-color-base-background),-8px 0 0 0 var(--ck-color-suggestion-marker-format-border-active)}.ck-content ol .ck-suggestion-marker-formatBlock,.ck-content ul .ck-suggestion-marker-formatBlock{box-shadow:-2px 0 0 0 var(--ck-color-base-background),-5px 0 0 0 var(--ck-color-suggestion-marker-format-border)}.ck-content ol .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active,.ck-content ul .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active{box-shadow:-2px 0 0 0 var(--ck-color-base-background),-5px 0 0 0 var(--ck-color-suggestion-marker-format-border-active)}';
      }, function (t, e, n) {
        var i = n(2),
            o = n(408);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .ck-suggestion-marker-deletion.ck-widget.ck-horizontal-line{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.ck-horizontal-line.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.ck-horizontal-line{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.ck-horizontal-line.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(410);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .ck-suggestion-marker-deletion.ck-widget.image{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.image img{opacity:.6}.ck-content .ck-suggestion-marker-deletion.ck-widget.image figcaption{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.image.ck-suggestion-marker--active,.ck-content .ck-suggestion-marker-deletion.ck-widget.image.ck-suggestion-marker--active figcaption{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.image,.ck-content .ck-suggestion-marker-insertion.ck-widget.image figcaption{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.image.ck-suggestion-marker--active,.ck-content .ck-suggestion-marker-insertion.ck-widget.image.ck-suggestion-marker--active figcaption{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}.ck-content .ck-widget.image>figcaption.ck-suggestion-marker-deletion{background-color:var(--ck-color-suggestion-widget-deletion-background);border:none}.ck-content .ck-widget.image>figcaption.ck-suggestion-marker-deletion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-widget.image>figcaption.ck-suggestion-marker-insertion{background-color:var(--ck-color-suggestion-widget-insertion-background);border:none}.ck-content .ck-widget.image>figcaption.ck-suggestion-marker-insertion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(412);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .ck-suggestion-marker-deletion.ck-widget.media{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.media .ck-media__wrapper{opacity:.6}.ck-content .ck-suggestion-marker-deletion.ck-widget.media.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.media{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.media.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(414);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ".ck-content .ck-suggestion-marker-deletion.ck-widget.page-break{background-color:var(--ck-color-suggestion-widget-deletion-background)}.ck-content .ck-suggestion-marker-deletion.ck-widget.page-break.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .ck-suggestion-marker-insertion.ck-widget.page-break{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .ck-suggestion-marker-insertion.ck-widget.page-break.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(416);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = ":root{--ck-color-suggestion-widget-th-insertion-background:rgba(102,229,119,0.12);--ck-color-suggestion-widget-th-insertion-background-active:rgba(37,218,61,0.14);--ck-color-suggestion-widget-th-deletion-background:rgba(229,102,134,0.14);--ck-color-suggestion-widget-th-deletion-background-active:rgba(196,33,74,0.16)}.ck-content figure.table .ck-suggestion-marker-formatBlock{box-shadow:-3px 0 0 0 var(--ck-color-suggestion-marker-format-border)}.ck-content figure.table .ck-suggestion-marker-formatBlock.ck-suggestion-marker--active{box-shadow:-3px 0 0 0 var(--ck-color-suggestion-marker-format-border-active)}.ck-content .ck-suggestion-marker-insertion.table>table{border-color:var(--ck-color-suggestion-marker-insertion-border)}.ck-content .ck-suggestion-marker-insertion.table>table>tbody>tr>th,.ck-content .ck-suggestion-marker-insertion.table>table>thead>tr>th{background-color:var(--ck-color-suggestion-widget-th-insertion-background);border-color:var(--ck-color-suggestion-marker-insertion-border)}.ck-content .ck-suggestion-marker-insertion.table>table>tbody>tr>td{background-color:var(--ck-color-suggestion-widget-insertion-background);border-color:var(--ck-color-suggestion-marker-insertion-border)}.ck-content .ck-suggestion-marker-insertion.ck-suggestion-marker--active.table>table{border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .ck-suggestion-marker-insertion.ck-suggestion-marker--active.table>table>tbody>tr>th,.ck-content .ck-suggestion-marker-insertion.ck-suggestion-marker--active.table>table>thead>tr>th{background-color:var(--ck-color-suggestion-widget-th-insertion-background-active);border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .ck-suggestion-marker-insertion.ck-suggestion-marker--active.table>table>tbody>tr>td{background-color:var(--ck-color-suggestion-widget-insertion-background-active);border-color:var(--ck-color-suggestion-marker-insertion-border-active)}.ck-content .ck-suggestion-marker-deletion.table>table{border-color:var(--ck-color-suggestion-marker-deletion-border)}.ck-content .ck-suggestion-marker-deletion.table>table>tbody>tr>th,.ck-content .ck-suggestion-marker-deletion.table>table>thead>tr>th{background-color:var(--ck-color-suggestion-widget-th-deletion-background);border-color:var(--ck-color-suggestion-marker-deletion-border);text-decoration:none}.ck-content .ck-suggestion-marker-deletion.table>table>tbody>tr>td{background-color:var(--ck-color-suggestion-widget-deletion-background);border-color:var(--ck-color-suggestion-marker-deletion-border);text-decoration:none}.ck-content .ck-suggestion-marker-deletion.ck-suggestion-marker--active.table>table{border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .ck-suggestion-marker-deletion.ck-suggestion-marker--active.table>table>tbody>tr>th,.ck-content .ck-suggestion-marker-deletion.ck-suggestion-marker--active.table>table>thead>tr>th{background-color:var(--ck-color-suggestion-widget-th-deletion-background-active);border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .ck-suggestion-marker-deletion.ck-suggestion-marker--active.table>table>tbody>tr>td{background-color:var(--ck-color-suggestion-widget-deletion-background-active);border-color:var(--ck-color-suggestion-marker-deletion-border-active)}.ck-content .table th.ck-suggestion-marker-insertion{background-color:var(--ck-color-suggestion-widget-th-insertion-background)}.ck-content .table th.ck-suggestion-marker-insertion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-th-insertion-background-active)}.ck-content .table th.ck-suggestion-marker-deletion{background-color:var(--ck-color-suggestion-widget-th-deletion-background);text-decoration:none}.ck-content .table th.ck-suggestion-marker-deletion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-th-deletion-background-active)}.ck-content .table td.ck-suggestion-marker-insertion{background-color:var(--ck-color-suggestion-widget-insertion-background)}.ck-content .table td.ck-suggestion-marker-insertion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-insertion-background-active)}.ck-content .table td.ck-suggestion-marker-deletion{background-color:var(--ck-color-suggestion-widget-deletion-background);text-decoration:none}.ck-content .table td.ck-suggestion-marker-deletion.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-deletion-background-active)}.ck-content .table td.ck-suggestion-marker-formatBlock,.ck-content .table td.ck-suggestion-marker-formatInline,.ck-content .table th.ck-suggestion-marker-formatBlock,.ck-content .table th.ck-suggestion-marker-formatInline{background-color:var(--ck-color-suggestion-widget-format-background);box-shadow:none}.ck-content .table td.ck-suggestion-marker-formatBlock.ck-suggestion-marker--active,.ck-content .table td.ck-suggestion-marker-formatInline.ck-suggestion-marker--active,.ck-content .table th.ck-suggestion-marker-formatBlock.ck-suggestion-marker--active,.ck-content .table th.ck-suggestion-marker-formatInline.ck-suggestion-marker--active{background-color:var(--ck-color-suggestion-widget-format-background-active);box-shadow:none}";
      }, function (t, e, n) {
        var i = n(2),
            o = n(418);
        "string" == typeof (o = o.__esModule ? o["default"] : o) && (o = [[t.i, o, ""]]);
        var r = {
          injectType: "singletonStyleTag",
          attributes: {
            "data-cke": !0
          },
          insert: "head",
          singleton: !0
        };
        i(o, r);
        t.exports = o.locals || {};
      }, function (t, e) {
        t.exports = '.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-color-presence-list-dropdown-background:#fff;--ck-color-presence-list-dropdown-arrow-border:#ebebeb;--ck-presence-list-dropdown-list-max-width:250px;--ck-presence-list-dropdown-list-min-width:180px;--ck-presence-list-users-tooltip-max-width:120px;--ck-presence-list-users-tooltip-min-width:25px}.ck.ck-presence-list{display:flex;align-items:center;margin-right:var(--ck-spacing-standard);transition:margin-right .2s ease-in-out;font-size:var(--ck-font-size-base)}.ck.ck-presence-list *{box-sizing:border-box}.ck.ck-presence-list__list{display:flex;justify-content:flex-end}.ck.ck-presence-list__counter{color:var(--ck-color-base-text)}.ck.ck-presence-list__counter--hidden{display:none}.ck.ck-presence-list__list-item{font:inherit;color:inherit;border:0;padding:0;outline:none;background:none;position:relative;margin-left:var(--ck-spacing-standard)}.ck.ck-presence-list__list-item:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-presence-list__list-item .ck.ck-tooltip{display:block}.ck.ck-presence-list__list-item .ck-tooltip__text span{display:block;max-width:var(--ck-presence-list-users-tooltip-max-width);overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__marker{position:relative;display:block;width:100%;height:3px;margin-top:3px}.ck.ck-presence-list--collapsed .ck-presence-list__list{min-width:calc(var(--ck-user-avatar-size)*1.5);margin-left:var(--ck-spacing-standard)}.ck.ck-presence-list--collapsed .ck-presence-list__list *{cursor:pointer;transition:all .4s ease-in-out}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item{margin-left:calc(var(--ck-user-avatar-size)*-1 + 5px)}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item .ck-tooltip{display:none}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(5){opacity:.15}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(4){opacity:.35}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(3){opacity:.55}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(2){opacity:.75}.ck.ck-presence-list__balloon{--ck-color-panel-border:var(--ck-color-presence-list-dropdown-arrow-border);--ck-color-panel-background:var(--ck-color-presence-list-dropdown-background);background-color:var(--ck-color-presence-list-dropdown-background);border:0;opacity:1;animation:fadeIn .3s ease-in-out}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-wrapper{max-height:80vh;min-width:var(--ck-presence-list-dropdown-list-min-width);max-width:var(--ck-presence-list-dropdown-list-max-width);overflow-y:auto;overflow-x:hidden;border-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item{font:inherit;color:inherit;border:0;padding:0;outline:none;background:none;display:flex;align-items:center;position:relative;padding:var(--ck-spacing-standard)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:first-of-type .ck-presence-list__marker{border-top-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:last-of-type .ck-presence-list__marker{border-bottom-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck-user__full-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--ck-color-base-text);margin-left:var(--ck-spacing-standard)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck.ck-presence-list__marker{position:absolute;left:0;margin:0;height:100%;width:3px}.ck-presence-list__balloon button.ck-presence-list__dropdown-list-item *,.ck-presence-list__list button.ck-presence-list__list-item *{cursor:pointer}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}';
      }, function (t, e, n) {
        "use strict";

        var _marked = /*#__PURE__*/regeneratorRuntime.mark(lc),
            _marked2 = /*#__PURE__*/regeneratorRuntime.mark(dc),
            _marked3 = /*#__PURE__*/regeneratorRuntime.mark(Mh),
            _marked4 = /*#__PURE__*/regeneratorRuntime.mark(_I),
            _marked5 = /*#__PURE__*/regeneratorRuntime.mark(wI),
            _marked6 = /*#__PURE__*/regeneratorRuntime.mark(vI);

        n.r(e), n.d(e, "default", function () {
          return CO;
        });
        var i = n(4),
            o = n(1);

        var r = /*#__PURE__*/function () {
          function r(t) {
            _classCallCheck(this, r);

            this.editor = t, this.set("isEnabled", !0), this._disableStack = new Set();
          }

          _createClass(r, [{
            key: "forceDisabled",
            value: function forceDisabled(t) {
              this._disableStack.add(t), 1 == this._disableStack.size && (this.on("set:isEnabled", s, {
                priority: "highest"
              }), this.isEnabled = !1);
            }
          }, {
            key: "clearForceDisabled",
            value: function clearForceDisabled(t) {
              this._disableStack["delete"](t), 0 == this._disableStack.size && (this.off("set:isEnabled", s), this.isEnabled = !0);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.stopListening();
            }
          }], [{
            key: "isContextPlugin",
            get: function get() {
              return !1;
            }
          }]);

          return r;
        }();

        function s(t) {
          t["return"] = !1, t.stop();
        }

        Object(o["default"])(r, i["default"]);

        var a = /*#__PURE__*/function () {
          function a(t) {
            var _this78 = this;

            _classCallCheck(this, a);

            this.editor = t, this.set("value", void 0), this.set("isEnabled", !1), this._disableStack = new Set(), this.decorate("execute"), this.listenTo(this.editor.model.document, "change", function () {
              _this78.refresh();
            }), this.on("execute", function (t) {
              _this78.isEnabled || t.stop();
            }, {
              priority: "high"
            }), this.listenTo(t, "change:isReadOnly", function (t, e, n) {
              n ? _this78.forceDisabled("readOnlyMode") : _this78.clearForceDisabled("readOnlyMode");
            });
          }

          _createClass(a, [{
            key: "refresh",
            value: function refresh() {
              this.isEnabled = !0;
            }
          }, {
            key: "forceDisabled",
            value: function forceDisabled(t) {
              this._disableStack.add(t), 1 == this._disableStack.size && (this.on("set:isEnabled", c, {
                priority: "highest"
              }), this.isEnabled = !1);
            }
          }, {
            key: "clearForceDisabled",
            value: function clearForceDisabled(t) {
              this._disableStack["delete"](t), 0 == this._disableStack.size && (this.off("set:isEnabled", c), this.refresh());
            }
          }, {
            key: "execute",
            value: function execute() {}
          }, {
            key: "destroy",
            value: function destroy() {
              this.stopListening();
            }
          }]);

          return a;
        }();

        function c(t) {
          t["return"] = !1, t.stop();
        }

        Object(o["default"])(a, i["default"]);
        var l = n(15);

        var d = function d(t, e) {
          return function (n) {
            return t(e(n));
          };
        },
            u = d(Object.getPrototypeOf, Object),
            h = n(8),
            f = "[object Object]",
            g = Function.prototype,
            m = Object.prototype,
            p = g.toString,
            b = m.hasOwnProperty,
            k = p.call(Object);

        var _ = function _(t) {
          if (!Object(h.a)(t) || Object(l.a)(t) != f) return !1;
          var e = u(t);
          if (null === e) return !0;
          var n = b.call(e, "constructor") && e.constructor;
          return "function" == typeof n && n instanceof n && p.call(n) == k;
        };

        var w = function w() {
          this.__data__ = [], this.size = 0;
        },
            v = n(23);

        var y = function y(t, e) {
          for (var n = t.length; n--;) {
            if (Object(v.a)(t[n][0], e)) return n;
          }

          return -1;
        },
            x = Array.prototype.splice;

        var C = function C(t) {
          var e = this.__data__,
              n = y(e, t);
          return !(n < 0 || (n == e.length - 1 ? e.pop() : x.call(e, n, 1), --this.size, 0));
        };

        var T = function T(t) {
          var e = this.__data__,
              n = y(e, t);
          return n < 0 ? void 0 : e[n][1];
        };

        var A = function A(t) {
          return y(this.__data__, t) > -1;
        };

        var E = function E(t, e) {
          var n = this.__data__,
              i = y(n, t);
          return i < 0 ? (++this.size, n.push([t, e])) : n[i][1] = e, this;
        };

        function S(t) {
          var e = -1,
              n = null == t ? 0 : t.length;

          for (this.clear(); ++e < n;) {
            var i = t[e];
            this.set(i[0], i[1]);
          }
        }

        S.prototype.clear = w, S.prototype["delete"] = C, S.prototype.get = T, S.prototype.has = A, S.prototype.set = E;
        var I = S;

        var O = function O() {
          this.__data__ = new I(), this.size = 0;
        };

        var R = function R(t) {
          var e = this.__data__,
              n = e["delete"](t);
          return this.size = e.size, n;
        };

        var M = function M(t) {
          return this.__data__.get(t);
        };

        var P = function P(t) {
          return this.__data__.has(t);
        },
            N = n(17),
            D = n(10),
            j = Object(N.a)(D.a, "Map"),
            B = Object(N.a)(Object, "create");

        var L = function L() {
          this.__data__ = B ? B(null) : {}, this.size = 0;
        };

        var z = function z(t) {
          var e = this.has(t) && delete this.__data__[t];
          return this.size -= e ? 1 : 0, e;
        },
            F = "__lodash_hash_undefined__",
            V = Object.prototype.hasOwnProperty;

        var U = function U(t) {
          var e = this.__data__;

          if (B) {
            var n = e[t];
            return n === F ? void 0 : n;
          }

          return V.call(e, t) ? e[t] : void 0;
        },
            H = Object.prototype.hasOwnProperty;

        var q = function q(t) {
          var e = this.__data__;
          return B ? void 0 !== e[t] : H.call(e, t);
        },
            W = "__lodash_hash_undefined__";

        var $ = function $(t, e) {
          var n = this.__data__;
          return this.size += this.has(t) ? 0 : 1, n[t] = B && void 0 === e ? W : e, this;
        };

        function Y(t) {
          var e = -1,
              n = null == t ? 0 : t.length;

          for (this.clear(); ++e < n;) {
            var i = t[e];
            this.set(i[0], i[1]);
          }
        }

        Y.prototype.clear = L, Y.prototype["delete"] = z, Y.prototype.get = U, Y.prototype.has = q, Y.prototype.set = $;
        var J = Y;

        var G = function G() {
          this.size = 0, this.__data__ = {
            hash: new J(),
            map: new (j || I)(),
            string: new J()
          };
        };

        var K = function K(t) {
          var e = typeof t;
          return "string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== t : null === t;
        };

        var Q = function Q(t, e) {
          var n = t.__data__;
          return K(e) ? n["string" == typeof e ? "string" : "hash"] : n.map;
        };

        var X = function X(t) {
          var e = Q(this, t)["delete"](t);
          return this.size -= e ? 1 : 0, e;
        };

        var Z = function Z(t) {
          return Q(this, t).get(t);
        };

        var tt = function tt(t) {
          return Q(this, t).has(t);
        };

        var et = function et(t, e) {
          var n = Q(this, t),
              i = n.size;
          return n.set(t, e), this.size += n.size == i ? 0 : 1, this;
        };

        function nt(t) {
          var e = -1,
              n = null == t ? 0 : t.length;

          for (this.clear(); ++e < n;) {
            var i = t[e];
            this.set(i[0], i[1]);
          }
        }

        nt.prototype.clear = G, nt.prototype["delete"] = X, nt.prototype.get = Z, nt.prototype.has = tt, nt.prototype.set = et;
        var it = nt,
            ot = 200;

        var rt = function rt(t, e) {
          var n = this.__data__;

          if (n instanceof I) {
            var i = n.__data__;
            if (!j || i.length < ot - 1) return i.push([t, e]), this.size = ++n.size, this;
            n = this.__data__ = new it(i);
          }

          return n.set(t, e), this.size = n.size, this;
        };

        function st(t) {
          var e = this.__data__ = new I(t);
          this.size = e.size;
        }

        st.prototype.clear = O, st.prototype["delete"] = R, st.prototype.get = M, st.prototype.has = P, st.prototype.set = rt;
        var at = st;

        var ct = function ct(t, e) {
          for (var n = -1, i = null == t ? 0 : t.length; ++n < i && !1 !== e(t[n], n, t);) {
            ;
          }

          return t;
        },
            lt = n(44),
            dt = n(20),
            ut = n(68),
            ht = n(46),
            ft = d(Object.keys, Object),
            gt = Object.prototype.hasOwnProperty;

        var mt = function mt(t) {
          if (!Object(ht.a)(t)) return ft(t);
          var e = [];

          for (var n in Object(t)) {
            gt.call(t, n) && "constructor" != n && e.push(n);
          }

          return e;
        },
            pt = n(33);

        var bt = function bt(t) {
          return Object(pt.a)(t) ? Object(ut.a)(t) : mt(t);
        };

        var kt = function kt(t, e) {
          return t && Object(dt.a)(e, bt(e), t);
        },
            _t = n(21);

        var wt = function wt(t, e) {
          return t && Object(dt.a)(e, Object(_t.a)(e), t);
        },
            vt = n(63);

        var yt = function yt(t, e) {
          var n = -1,
              i = t.length;

          for (e || (e = Array(i)); ++n < i;) {
            e[n] = t[n];
          }

          return e;
        };

        var xt = function xt(t, e) {
          for (var n = -1, i = null == t ? 0 : t.length, o = 0, r = []; ++n < i;) {
            var s = t[n];
            e(s, n, t) && (r[o++] = s);
          }

          return r;
        };

        var Ct = function Ct() {
          return [];
        },
            Tt = Object.prototype.propertyIsEnumerable,
            At = Object.getOwnPropertySymbols,
            Et = At ? function (t) {
          return null == t ? [] : (t = Object(t), xt(At(t), function (e) {
            return Tt.call(t, e);
          }));
        } : Ct;

        var St = function St(t, e) {
          return Object(dt.a)(t, Et(t), e);
        };

        var It = function It(t, e) {
          for (var n = -1, i = e.length, o = t.length; ++n < i;) {
            t[o + n] = e[n];
          }

          return t;
        },
            Ot = Object.getOwnPropertySymbols ? function (t) {
          for (var e = []; t;) {
            It(e, Et(t)), t = u(t);
          }

          return e;
        } : Ct;

        var Rt = function Rt(t, e) {
          return Object(dt.a)(t, Ot(t), e);
        },
            Mt = n(12);

        var Pt = function Pt(t, e, n) {
          var i = e(t);
          return Object(Mt.a)(t) ? i : It(i, n(t));
        };

        var Nt = function Nt(t) {
          return Pt(t, bt, Et);
        };

        var Dt = function Dt(t) {
          return Pt(t, _t.a, Ot);
        },
            jt = Object(N.a)(D.a, "DataView"),
            Bt = Object(N.a)(D.a, "Promise"),
            Lt = Object(N.a)(D.a, "Set"),
            zt = Object(N.a)(D.a, "WeakMap"),
            Ft = n(30),
            Vt = Object(Ft.a)(jt),
            Ut = Object(Ft.a)(j),
            Ht = Object(Ft.a)(Bt),
            qt = Object(Ft.a)(Lt),
            Wt = Object(Ft.a)(zt),
            $t = l.a;

        (jt && "[object DataView]" != $t(new jt(new ArrayBuffer(1))) || j && "[object Map]" != $t(new j()) || Bt && "[object Promise]" != $t(Bt.resolve()) || Lt && "[object Set]" != $t(new Lt()) || zt && "[object WeakMap]" != $t(new zt())) && ($t = function $t(t) {
          var e = Object(l.a)(t),
              n = "[object Object]" == e ? t.constructor : void 0,
              i = n ? Object(Ft.a)(n) : "";
          if (i) switch (i) {
            case Vt:
              return "[object DataView]";

            case Ut:
              return "[object Map]";

            case Ht:
              return "[object Promise]";

            case qt:
              return "[object Set]";

            case Wt:
              return "[object WeakMap]";
          }
          return e;
        });
        var Yt = $t,
            Jt = Object.prototype.hasOwnProperty;

        var Gt = function Gt(t) {
          var e = t.length,
              n = new t.constructor(e);
          return e && "string" == typeof t[0] && Jt.call(t, "index") && (n.index = t.index, n.input = t.input), n;
        },
            Kt = D.a.Uint8Array;

        var Qt = function Qt(t) {
          var e = new t.constructor(t.byteLength);
          return new Kt(e).set(new Kt(t)), e;
        };

        var Xt = function Xt(t, e) {
          var n = e ? Qt(t.buffer) : t.buffer;
          return new t.constructor(n, t.byteOffset, t.byteLength);
        },
            Zt = /\w*$/;

        var te = function te(t) {
          var e = new t.constructor(t.source, Zt.exec(t));
          return e.lastIndex = t.lastIndex, e;
        },
            ee = n(16),
            ne = ee.a ? ee.a.prototype : void 0,
            ie = ne ? ne.valueOf : void 0;

        var oe = function oe(t) {
          return ie ? Object(ie.call(t)) : {};
        };

        var re = function re(t, e) {
          var n = e ? Qt(t.buffer) : t.buffer;
          return new t.constructor(n, t.byteOffset, t.length);
        },
            se = "[object Boolean]",
            ae = "[object Date]",
            ce = "[object Map]",
            le = "[object Number]",
            de = "[object RegExp]",
            ue = "[object Set]",
            he = "[object String]",
            fe = "[object Symbol]",
            ge = "[object ArrayBuffer]",
            me = "[object DataView]",
            pe = "[object Float32Array]",
            be = "[object Float64Array]",
            ke = "[object Int8Array]",
            _e = "[object Int16Array]",
            we = "[object Int32Array]",
            ve = "[object Uint8Array]",
            ye = "[object Uint8ClampedArray]",
            xe = "[object Uint16Array]",
            Ce = "[object Uint32Array]";

        var Te = function Te(t, e, n) {
          var i = t.constructor;

          switch (e) {
            case ge:
              return Qt(t);

            case se:
            case ae:
              return new i(+t);

            case me:
              return Xt(t, n);

            case pe:
            case be:
            case ke:
            case _e:
            case we:
            case ve:
            case ye:
            case xe:
            case Ce:
              return re(t, n);

            case ce:
              return new i();

            case le:
            case he:
              return new i(t);

            case de:
              return te(t);

            case ue:
              return new i();

            case fe:
              return oe(t);
          }
        },
            Ae = n(7),
            Ee = Object.create,
            Se = function () {
          function t() {}

          return function (e) {
            if (!Object(Ae.a)(e)) return {};
            if (Ee) return Ee(e);
            t.prototype = e;
            var n = new t();
            return t.prototype = void 0, n;
          };
        }();

        var Ie = function Ie(t) {
          return "function" != typeof t.constructor || Object(ht.a)(t) ? {} : Se(u(t));
        },
            Oe = n(28),
            Re = "[object Map]";

        var Me = function Me(t) {
          return Object(h.a)(t) && Yt(t) == Re;
        },
            Pe = n(45),
            Ne = n(29),
            De = Ne.a && Ne.a.isMap,
            je = De ? Object(Pe.a)(De) : Me,
            Be = "[object Set]";

        var Le = function Le(t) {
          return Object(h.a)(t) && Yt(t) == Be;
        },
            ze = Ne.a && Ne.a.isSet,
            Fe = ze ? Object(Pe.a)(ze) : Le,
            Ve = 1,
            Ue = 2,
            He = 4,
            qe = "[object Arguments]",
            We = "[object Function]",
            $e = "[object GeneratorFunction]",
            Ye = "[object Object]",
            Je = {};

        Je[qe] = Je["[object Array]"] = Je["[object ArrayBuffer]"] = Je["[object DataView]"] = Je["[object Boolean]"] = Je["[object Date]"] = Je["[object Float32Array]"] = Je["[object Float64Array]"] = Je["[object Int8Array]"] = Je["[object Int16Array]"] = Je["[object Int32Array]"] = Je["[object Map]"] = Je["[object Number]"] = Je[Ye] = Je["[object RegExp]"] = Je["[object Set]"] = Je["[object String]"] = Je["[object Symbol]"] = Je["[object Uint8Array]"] = Je["[object Uint8ClampedArray]"] = Je["[object Uint16Array]"] = Je["[object Uint32Array]"] = !0, Je["[object Error]"] = Je[We] = Je["[object WeakMap]"] = !1;

        var Ge = function t(e, n, i, o, r, s) {
          var a,
              c = n & Ve,
              l = n & Ue,
              d = n & He;
          if (i && (a = r ? i(e, o, r, s) : i(e)), void 0 !== a) return a;
          if (!Object(Ae.a)(e)) return e;
          var u = Object(Mt.a)(e);

          if (u) {
            if (a = Gt(e), !c) return yt(e, a);
          } else {
            var h = Yt(e),
                f = h == We || h == $e;
            if (Object(Oe.a)(e)) return Object(vt.a)(e, c);

            if (h == Ye || h == qe || f && !r) {
              if (a = l || f ? {} : Ie(e), !c) return l ? Rt(e, wt(a, e)) : St(e, kt(a, e));
            } else {
              if (!Je[h]) return r ? e : {};
              a = Te(e, h, c);
            }
          }

          s || (s = new at());
          var g = s.get(e);
          if (g) return g;
          s.set(e, a), Fe(e) ? e.forEach(function (o) {
            a.add(t(o, n, i, o, e, s));
          }) : je(e) && e.forEach(function (o, r) {
            a.set(r, t(o, n, i, r, e, s));
          });
          var m = d ? l ? Dt : Nt : l ? _t.a : bt,
              p = u ? void 0 : m(e);
          return ct(p || e, function (o, r) {
            p && (o = e[r = o]), Object(lt.a)(a, r, t(o, n, i, r, e, s));
          }), a;
        },
            Ke = 1,
            Qe = 4;

        var Xe = function Xe(t, e) {
          return Ge(t, Ke | Qe, e = "function" == typeof e ? e : void 0);
        };

        var Ze = function Ze(t) {
          return Object(h.a)(t) && 1 === t.nodeType && !_(t);
        };

        var tn = /*#__PURE__*/function () {
          function tn(t, e) {
            _classCallCheck(this, tn);

            this._config = {}, e && this.define(en(e)), t && this._setObjectToTarget(this._config, t);
          }

          _createClass(tn, [{
            key: "set",
            value: function set(t, e) {
              this._setToTarget(this._config, t, e);
            }
          }, {
            key: "define",
            value: function define(t, e) {
              this._setToTarget(this._config, t, e, !0);
            }
          }, {
            key: "get",
            value: function get(t) {
              return this._getFromSource(this._config, t);
            }
          }, {
            key: "names",
            value: /*#__PURE__*/regeneratorRuntime.mark(function names() {
              var _i8, _Object$keys2, _t18;

              return regeneratorRuntime.wrap(function names$(_context34) {
                while (1) {
                  switch (_context34.prev = _context34.next) {
                    case 0:
                      _i8 = 0, _Object$keys2 = Object.keys(this._config);

                    case 1:
                      if (!(_i8 < _Object$keys2.length)) {
                        _context34.next = 8;
                        break;
                      }

                      _t18 = _Object$keys2[_i8];
                      _context34.next = 5;
                      return _t18;

                    case 5:
                      _i8++;
                      _context34.next = 1;
                      break;

                    case 8:
                    case "end":
                      return _context34.stop();
                  }
                }
              }, names, this);
            })
          }, {
            key: "_setToTarget",
            value: function _setToTarget(t, e, n) {
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              if (_(e)) return void this._setObjectToTarget(t, e, i);
              var o = e.split(".");
              e = o.pop();

              var _iterator13 = _createForOfIteratorHelper(o),
                  _step13;

              try {
                for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
                  var _e10 = _step13.value;
                  _(t[_e10]) || (t[_e10] = {}), t = t[_e10];
                }
              } catch (err) {
                _iterator13.e(err);
              } finally {
                _iterator13.f();
              }

              if (_(n)) return _(t[e]) || (t[e] = {}), t = t[e], void this._setObjectToTarget(t, n, i);
              i && void 0 !== t[e] || (t[e] = n);
            }
          }, {
            key: "_getFromSource",
            value: function _getFromSource(t, e) {
              var n = e.split(".");
              e = n.pop();

              var _iterator14 = _createForOfIteratorHelper(n),
                  _step14;

              try {
                for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {
                  var _e11 = _step14.value;

                  if (!_(t[_e11])) {
                    t = null;
                    break;
                  }

                  t = t[_e11];
                }
              } catch (err) {
                _iterator14.e(err);
              } finally {
                _iterator14.f();
              }

              return t ? en(t[e]) : void 0;
            }
          }, {
            key: "_setObjectToTarget",
            value: function _setObjectToTarget(t, e, n) {
              var _this79 = this;

              Object.keys(e).forEach(function (i) {
                _this79._setToTarget(t, i, e[i], n);
              });
            }
          }]);

          return tn;
        }();

        function en(t) {
          return Xe(t, nn);
        }

        function nn(t) {
          return Ze(t) ? t : void 0;
        }

        var on = n(13),
            rn = n(0),
            sn = n(3);

        var an = /*#__PURE__*/function (_Symbol$iterator2) {
          function an(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

            _classCallCheck(this, an);

            this._context = t, this._plugins = new Map(), this._availablePlugins = new Map();

            var _iterator15 = _createForOfIteratorHelper(e),
                _step15;

            try {
              for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {
                var _t19 = _step15.value;
                _t19.pluginName && this._availablePlugins.set(_t19.pluginName, _t19);
              }
            } catch (err) {
              _iterator15.e(err);
            } finally {
              _iterator15.f();
            }

            this._contextPlugins = new Map();

            var _iterator16 = _createForOfIteratorHelper(n),
                _step16;

            try {
              for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {
                var _step16$value = _slicedToArray(_step16.value, 2),
                    _t20 = _step16$value[0],
                    _e12 = _step16$value[1];

                this._contextPlugins.set(_t20, _e12), this._contextPlugins.set(_e12, _t20), _t20.pluginName && this._availablePlugins.set(_t20.pluginName, _t20);
              }
            } catch (err) {
              _iterator16.e(err);
            } finally {
              _iterator16.f();
            }
          }

          _createClass(an, [{
            key: _Symbol$iterator2,
            value: /*#__PURE__*/regeneratorRuntime.mark(function value() {
              var _iterator17, _step17, _t21;

              return regeneratorRuntime.wrap(function value$(_context35) {
                while (1) {
                  switch (_context35.prev = _context35.next) {
                    case 0:
                      _iterator17 = _createForOfIteratorHelper(this._plugins);
                      _context35.prev = 1;

                      _iterator17.s();

                    case 3:
                      if ((_step17 = _iterator17.n()).done) {
                        _context35.next = 11;
                        break;
                      }

                      _t21 = _step17.value;
                      _context35.t0 = "function" == typeof _t21[0];

                      if (!_context35.t0) {
                        _context35.next = 9;
                        break;
                      }

                      _context35.next = 9;
                      return _t21;

                    case 9:
                      _context35.next = 3;
                      break;

                    case 11:
                      _context35.next = 16;
                      break;

                    case 13:
                      _context35.prev = 13;
                      _context35.t1 = _context35["catch"](1);

                      _iterator17.e(_context35.t1);

                    case 16:
                      _context35.prev = 16;

                      _iterator17.f();

                      return _context35.finish(16);

                    case 19:
                    case "end":
                      return _context35.stop();
                  }
                }
              }, value, this, [[1, 13, 16, 19]]);
            })
          }, {
            key: "get",
            value: function get(t) {
              var e = this._plugins.get(t);

              if (!e) {
                var _e13 = t;
                throw "function" == typeof t && (_e13 = t.pluginName || t.name), new rn["default"]("plugincollection-plugin-not-loaded", this._context, {
                  plugin: _e13
                });
              }

              return e;
            }
          }, {
            key: "has",
            value: function has(t) {
              return this._plugins.has(t);
            }
          }, {
            key: "init",
            value: function init(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
              var i = this,
                  o = this._context;
              !function t(e) {
                var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();
                e.forEach(function (e) {
                  a(e) && (n.has(e) || (n.add(e), e.pluginName && !i._availablePlugins.has(e.pluginName) && i._availablePlugins.set(e.pluginName, e), e.requires && t(e.requires, n)));
                });
              }(t), u(t);

              var r = _toConsumableArray(function t(e) {
                var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();
                return e.map(function (t) {
                  return a(t) ? t : i._availablePlugins.get(t);
                }).reduce(function (e, i) {
                  return n.has(i) ? e : (n.add(i), i.requires && (u(i.requires, i), t(i.requires, n).forEach(function (t) {
                    return e.add(t);
                  })), e.add(i));
                }, new Set());
              }(t.filter(function (t) {
                return !l(t, e);
              })));

              !function (t, e) {
                var _iterator18 = _createForOfIteratorHelper(e),
                    _step18;

                try {
                  for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {
                    var _n12 = _step18.value;
                    if ("function" != typeof _n12) throw new rn["default"]("plugincollection-replace-plugin-invalid-type", null, {
                      pluginItem: _n12
                    });
                    var _e14 = _n12.pluginName;
                    if (!_e14) throw new rn["default"]("plugincollection-replace-plugin-missing-name", null, {
                      pluginItem: _n12
                    });
                    if (_n12.requires && _n12.requires.length) throw new rn["default"]("plugincollection-plugin-for-replacing-cannot-have-dependencies", null, {
                      pluginName: _e14
                    });

                    var _o9 = i._availablePlugins.get(_e14);

                    if (!_o9) throw new rn["default"]("plugincollection-plugin-for-replacing-not-exist", null, {
                      pluginName: _e14
                    });

                    var _r13 = t.indexOf(_o9);

                    if (-1 === _r13) {
                      if (i._contextPlugins.has(_o9)) return;
                      throw new rn["default"]("plugincollection-plugin-for-replacing-not-loaded", null, {
                        pluginName: _e14
                      });
                    }

                    if (_o9.requires && _o9.requires.length) throw new rn["default"]("plugincollection-replaced-plugin-cannot-have-dependencies", null, {
                      pluginName: _e14
                    });
                    t.splice(_r13, 1, _n12), i._availablePlugins.set(_e14, _n12);
                  }
                } catch (err) {
                  _iterator18.e(err);
                } finally {
                  _iterator18.f();
                }
              }(r, n);

              var s = function (t) {
                return t.map(function (t) {
                  var e = i._contextPlugins.get(t) || new t(o);
                  return i._add(t, e), e;
                });
              }(r);

              return h(s, "init").then(function () {
                return h(s, "afterInit");
              }).then(function () {
                return s;
              });

              function a(t) {
                return "function" == typeof t;
              }

              function c(t) {
                return a(t) && t.isContextPlugin;
              }

              function l(t, e) {
                return e.some(function (e) {
                  return e === t || d(t) === e || d(e) === t;
                });
              }

              function d(t) {
                return a(t) ? t.pluginName || t.name : t;
              }

              function u(t) {
                var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
                t.map(function (t) {
                  return a(t) ? t : i._availablePlugins.get(t) || t;
                }).forEach(function (t) {
                  !function (t, e) {
                    if (a(t)) return;
                    if (e) throw new rn["default"]("plugincollection-soft-required", o, {
                      missingPlugin: t,
                      requiredBy: d(e)
                    });
                    throw new rn["default"]("plugincollection-plugin-not-found", o, {
                      plugin: t
                    });
                  }(t, n), function (t, e) {
                    if (!c(e)) return;
                    if (c(t)) return;
                    throw new rn["default"]("plugincollection-context-required", o, {
                      plugin: d(t),
                      requiredBy: d(e)
                    });
                  }(t, n), function (t, n) {
                    if (!n) return;
                    if (!l(t, e)) return;
                    throw new rn["default"]("plugincollection-required", o, {
                      plugin: d(t),
                      requiredBy: d(n)
                    });
                  }(t, n);
                });
              }

              function h(t, e) {
                return t.reduce(function (t, n) {
                  return n[e] ? i._contextPlugins.has(n) ? t : t.then(n[e].bind(n)) : t;
                }, Promise.resolve());
              }
            }
          }, {
            key: "destroy",
            value: function destroy() {
              var t = [];

              var _iterator19 = _createForOfIteratorHelper(this),
                  _step19;

              try {
                for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {
                  var _step19$value = _slicedToArray(_step19.value, 2),
                      _e15 = _step19$value[1];

                  "function" != typeof _e15.destroy || this._contextPlugins.has(_e15) || t.push(_e15.destroy());
                }
              } catch (err) {
                _iterator19.e(err);
              } finally {
                _iterator19.f();
              }

              return Promise.all(t);
            }
          }, {
            key: "_add",
            value: function _add(t, e) {
              this._plugins.set(t, e);

              var n = t.pluginName;

              if (n) {
                if (this._plugins.has(n)) throw new rn["default"]("plugincollection-plugin-name-conflict", null, {
                  pluginName: n,
                  plugin1: this._plugins.get(n).constructor,
                  plugin2: t
                });

                this._plugins.set(n, e);
              }
            }
          }]);

          return an;
        }(Symbol.iterator);

        function cn(t) {
          return Array.isArray(t) ? t : [t];
        }

        function ln(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
          if ("number" != typeof n) throw new rn["default"]("translation-service-quantity-not-a-number", null, {
            quantity: n
          });
          var i = Object.keys(window.CKEDITOR_TRANSLATIONS).length;
          1 === i && (t = Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);
          var o = e.id || e.string;
          if (0 === i || !function (t, e) {
            return !!window.CKEDITOR_TRANSLATIONS[t] && !!window.CKEDITOR_TRANSLATIONS[t].dictionary[e];
          }(t, o)) return 1 !== n ? e.plural : e.string;

          var r = window.CKEDITOR_TRANSLATIONS[t].dictionary,
              s = window.CKEDITOR_TRANSLATIONS[t].getPluralForm || function (t) {
            return 1 === t ? 0 : 1;
          };

          if ("string" == typeof r[o]) return r[o];
          var a = Number(s(n));
          return r[o][a];
        }

        Object(o["default"])(an, sn["default"]), window.CKEDITOR_TRANSLATIONS || (window.CKEDITOR_TRANSLATIONS = {});
        var dn = ["ar", "ara", "fa", "per", "fas", "he", "heb", "ku", "kur", "ug", "uig"];

        function un(t) {
          return dn.includes(t) ? "rtl" : "ltr";
        }

        var hn = /*#__PURE__*/function () {
          function hn() {
            var _this80 = this;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            _classCallCheck(this, hn);

            this.uiLanguage = t.uiLanguage || "en", this.contentLanguage = t.contentLanguage || this.uiLanguage, this.uiLanguageDirection = un(this.uiLanguage), this.contentLanguageDirection = un(this.contentLanguage), this.t = function (t, e) {
              return _this80._t(t, e);
            };
          }

          _createClass(hn, [{
            key: "language",
            get: function get() {
              return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."), this.uiLanguage;
            }
          }, {
            key: "_t",
            value: function _t(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
              e = cn(e), "string" == typeof t && (t = {
                string: t
              });
              var n = !!t.plural ? e[0] : 1;
              return function (t, e) {
                return t.replace(/%(\d+)/g, function (t, n) {
                  return n < e.length ? e[n] : t;
                });
              }(ln(this.uiLanguage, t, n), e);
            }
          }]);

          return hn;
        }();

        var fn = /*#__PURE__*/function () {
          function fn(t) {
            _classCallCheck(this, fn);

            this.config = new tn(t, this.constructor.defaultConfig);
            var e = this.constructor.builtinPlugins;
            this.config.define("plugins", e), this.plugins = new an(this, e);
            var n = this.config.get("language") || {};
            this.locale = new hn({
              uiLanguage: "string" == typeof n ? n : n.ui,
              contentLanguage: this.config.get("language.content")
            }), this.t = this.locale.t, this.editors = new on["default"](), this._contextOwner = null;
          }

          _createClass(fn, [{
            key: "initPlugins",
            value: function initPlugins() {
              var t = this.config.get("plugins") || [],
                  e = this.config.get("substitutePlugins") || [];

              var _iterator20 = _createForOfIteratorHelper(t.concat(e)),
                  _step20;

              try {
                for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {
                  var _n13 = _step20.value;
                  if ("function" != typeof _n13) throw new rn["default"]("context-initplugins-constructor-only", null, {
                    Plugin: _n13
                  });
                  if (!0 !== _n13.isContextPlugin) throw new rn["default"]("context-initplugins-invalid-plugin", null, {
                    Plugin: _n13
                  });
                }
              } catch (err) {
                _iterator20.e(err);
              } finally {
                _iterator20.f();
              }

              return this.plugins.init(t, [], e);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              var _this81 = this;

              return Promise.all(Array.from(this.editors, function (t) {
                return t.destroy();
              })).then(function () {
                return _this81.plugins.destroy();
              });
            }
          }, {
            key: "_addEditor",
            value: function _addEditor(t, e) {
              if (this._contextOwner) throw new rn["default"]("context-addeditor-private-context");
              this.editors.add(t), e && (this._contextOwner = t);
            }
          }, {
            key: "_removeEditor",
            value: function _removeEditor(t) {
              return this.editors.has(t) && this.editors.remove(t), this._contextOwner === t ? this.destroy() : Promise.resolve();
            }
          }, {
            key: "_getEditorConfig",
            value: function _getEditorConfig() {
              var t = {};

              var _iterator21 = _createForOfIteratorHelper(this.config.names()),
                  _step21;

              try {
                for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {
                  var _e16 = _step21.value;
                  ["plugins", "removePlugins", "extraPlugins"].includes(_e16) || (t[_e16] = this.config.get(_e16));
                }
              } catch (err) {
                _iterator21.e(err);
              } finally {
                _iterator21.f();
              }

              return t;
            }
          }], [{
            key: "create",
            value: function create(t) {
              var _this82 = this;

              return new Promise(function (e) {
                var n = new _this82(t);
                e(n.initPlugins().then(function () {
                  return n;
                }));
              });
            }
          }]);

          return fn;
        }();

        var gn = /*#__PURE__*/function () {
          function gn(t) {
            _classCallCheck(this, gn);

            this.context = t;
          }

          _createClass(gn, [{
            key: "destroy",
            value: function destroy() {
              this.stopListening();
            }
          }], [{
            key: "isContextPlugin",
            get: function get() {
              return !0;
            }
          }]);

          return gn;
        }();

        function mn(t, e) {
          var n = Math.min(t.length, e.length);

          for (var _i9 = 0; _i9 < n; _i9++) {
            if (t[_i9] != e[_i9]) return _i9;
          }

          return t.length == e.length ? "same" : t.length < e.length ? "prefix" : "extension";
        }

        Object(o["default"])(gn, i["default"]);
        var pn = 4;

        var bn = function bn(t) {
          return Ge(t, pn);
        },
            kn = n(34);

        var _n = /*#__PURE__*/function () {
          function _n(t) {
            _classCallCheck(this, _n);

            this.document = t, this.parent = null;
          }

          _createClass(_n, [{
            key: "index",
            get: function get() {
              var t;
              if (!this.parent) return null;
              if (-1 == (t = this.parent.getChildIndex(this))) throw new rn["default"]("view-node-not-found-in-parent", this);
              return t;
            }
          }, {
            key: "nextSibling",
            get: function get() {
              var t = this.index;
              return null !== t && this.parent.getChild(t + 1) || null;
            }
          }, {
            key: "previousSibling",
            get: function get() {
              var t = this.index;
              return null !== t && this.parent.getChild(t - 1) || null;
            }
          }, {
            key: "root",
            get: function get() {
              var t = this;

              for (; t.parent;) {
                t = t.parent;
              }

              return t;
            }
          }, {
            key: "isAttached",
            value: function isAttached() {
              return this.root.is("rootElement");
            }
          }, {
            key: "getPath",
            value: function getPath() {
              var t = [];
              var e = this;

              for (; e.parent;) {
                t.unshift(e.index), e = e.parent;
              }

              return t;
            }
          }, {
            key: "getAncestors",
            value: function getAncestors() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
                includeSelf: !1,
                parentFirst: !1
              };
              var e = [];
              var n = t.includeSelf ? this : this.parent;

              for (; n;) {
                e[t.parentFirst ? "push" : "unshift"](n), n = n.parent;
              }

              return e;
            }
          }, {
            key: "getCommonAncestor",
            value: function getCommonAncestor(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = this.getAncestors(e),
                  i = t.getAncestors(e);
              var o = 0;

              for (; n[o] == i[o] && n[o];) {
                o++;
              }

              return 0 === o ? null : n[o - 1];
            }
          }, {
            key: "isBefore",
            value: function isBefore(t) {
              if (this == t) return !1;
              if (this.root !== t.root) return !1;
              var e = this.getPath(),
                  n = t.getPath(),
                  i = mn(e, n);

              switch (i) {
                case "prefix":
                  return !0;

                case "extension":
                  return !1;

                default:
                  return e[i] < n[i];
              }
            }
          }, {
            key: "isAfter",
            value: function isAfter(t) {
              return this != t && this.root === t.root && !this.isBefore(t);
            }
          }, {
            key: "_remove",
            value: function _remove() {
              this.parent._removeChildren(this.index);
            }
          }, {
            key: "_fireChange",
            value: function _fireChange(t, e) {
              this.fire("change:" + t, e), this.parent && this.parent._fireChange(t, e);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = bn(this);
              return delete t.parent, t;
            }
          }, {
            key: "is",
            value: function is(t) {
              return "node" === t || "view:node" === t;
            }
          }]);

          return _n;
        }();

        Object(o["default"])(_n, sn["default"]);

        var wn = /*#__PURE__*/function (_n14) {
          _inherits(wn, _n14);

          var _super63 = _createSuper(wn);

          function wn(t, e) {
            var _this83;

            _classCallCheck(this, wn);

            _this83 = _super63.call(this, t), _this83._textData = e;
            return _this83;
          }

          _createClass(wn, [{
            key: "is",
            value: function is(t) {
              return "$text" === t || "view:$text" === t || "text" === t || "view:text" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "data",
            get: function get() {
              return this._textData;
            }
          }, {
            key: "_data",
            get: function get() {
              return this.data;
            },
            set: function set(t) {
              this._fireChange("text", this), this._textData = t;
            }
          }, {
            key: "isSimilar",
            value: function isSimilar(t) {
              return t instanceof wn && (this === t || this.data === t.data);
            }
          }, {
            key: "_clone",
            value: function _clone() {
              return new wn(this.document, this.data);
            }
          }]);

          return wn;
        }(_n);

        var vn = /*#__PURE__*/function () {
          function vn(t, e, n) {
            _classCallCheck(this, vn);

            if (this.textNode = t, e < 0 || e > t.data.length) throw new rn["default"]("view-textproxy-wrong-offsetintext", this);
            if (n < 0 || e + n > t.data.length) throw new rn["default"]("view-textproxy-wrong-length", this);
            this.data = t.data.substring(e, e + n), this.offsetInText = e;
          }

          _createClass(vn, [{
            key: "offsetSize",
            get: function get() {
              return this.data.length;
            }
          }, {
            key: "isPartial",
            get: function get() {
              return this.data.length !== this.textNode.data.length;
            }
          }, {
            key: "parent",
            get: function get() {
              return this.textNode.parent;
            }
          }, {
            key: "root",
            get: function get() {
              return this.textNode.root;
            }
          }, {
            key: "document",
            get: function get() {
              return this.textNode.document;
            }
          }, {
            key: "is",
            value: function is(t) {
              return "$textProxy" === t || "view:$textProxy" === t || "textProxy" === t || "view:textProxy" === t;
            }
          }, {
            key: "getAncestors",
            value: function getAncestors() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
                includeSelf: !1,
                parentFirst: !1
              };
              var e = [];
              var n = t.includeSelf ? this.textNode : this.parent;

              for (; null !== n;) {
                e[t.parentFirst ? "push" : "unshift"](n), n = n.parent;
              }

              return e;
            }
          }]);

          return vn;
        }();

        var yn = n(9);

        function xn(t) {
          return Object(yn.a)(t) ? new Map(t) : function (t) {
            var e = new Map();

            for (var _n15 in t) {
              e.set(_n15, t[_n15]);
            }

            return e;
          }(t);
        }

        var Cn = /*#__PURE__*/function () {
          function Cn() {
            _classCallCheck(this, Cn);

            this._patterns = [], this.add.apply(this, arguments);
          }

          _createClass(Cn, [{
            key: "add",
            value: function add() {
              for (var _len10 = arguments.length, t = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
                t[_key10] = arguments[_key10];
              }

              for (var _i10 = 0, _t22 = t; _i10 < _t22.length; _i10++) {
                var _e17 = _t22[_i10];
                ("string" == typeof _e17 || _e17 instanceof RegExp) && (_e17 = {
                  name: _e17
                }), this._patterns.push(_e17);
              }
            }
          }, {
            key: "match",
            value: function match() {
              for (var _len11 = arguments.length, t = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
                t[_key11] = arguments[_key11];
              }

              for (var _i11 = 0, _t23 = t; _i11 < _t23.length; _i11++) {
                var _e18 = _t23[_i11];

                var _iterator22 = _createForOfIteratorHelper(this._patterns),
                    _step22;

                try {
                  for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {
                    var _t24 = _step22.value;

                    var _n16 = Tn(_e18, _t24);

                    if (_n16) return {
                      element: _e18,
                      pattern: _t24,
                      match: _n16
                    };
                  }
                } catch (err) {
                  _iterator22.e(err);
                } finally {
                  _iterator22.f();
                }
              }

              return null;
            }
          }, {
            key: "matchAll",
            value: function matchAll() {
              var e = [];

              for (var _len12 = arguments.length, t = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {
                t[_key12] = arguments[_key12];
              }

              for (var _i12 = 0, _t25 = t; _i12 < _t25.length; _i12++) {
                var _n17 = _t25[_i12];

                var _iterator23 = _createForOfIteratorHelper(this._patterns),
                    _step23;

                try {
                  for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {
                    var _t26 = _step23.value;

                    var _i13 = Tn(_n17, _t26);

                    _i13 && e.push({
                      element: _n17,
                      pattern: _t26,
                      match: _i13
                    });
                  }
                } catch (err) {
                  _iterator23.e(err);
                } finally {
                  _iterator23.f();
                }
              }

              return e.length > 0 ? e : null;
            }
          }, {
            key: "getElementName",
            value: function getElementName() {
              if (1 !== this._patterns.length) return null;
              var t = this._patterns[0],
                  e = t.name;
              return "function" == typeof t || !e || e instanceof RegExp ? null : e;
            }
          }]);

          return Cn;
        }();

        function Tn(t, e) {
          if ("function" == typeof e) return e(t);
          var n = {};
          return e.name && (n.name = function (t, e) {
            if (t instanceof RegExp) return !!e.match(t);
            return t === e;
          }(e.name, t.name), !n.name) ? null : e.attributes && (n.attributes = function (t, e) {
            var n = new Set(e.getAttributeKeys());
            _(t) ? (void 0 !== t.style && Object(rn.logWarning)("matcher-pattern-deprecated-attributes-style-key", t), void 0 !== t["class"] && Object(rn.logWarning)("matcher-pattern-deprecated-attributes-class-key", t)) : (n["delete"]("style"), n["delete"]("class"));
            return An(t, n, function (t) {
              return e.getAttribute(t);
            });
          }(e.attributes, t), !n.attributes) ? null : !(e.classes && (n.classes = function (t, e) {
            return An(t, e.getClassNames());
          }(e.classes, t), !n.classes)) && !(e.styles && (n.styles = function (t, e) {
            return An(t, e.getStyleNames(!0), function (t) {
              return e.getStyle(t);
            });
          }(e.styles, t), !n.styles)) && n;
        }

        function An(t, e, n) {
          var i = function (t) {
            if (Array.isArray(t)) return t.map(function (t) {
              return _(t) ? (void 0 !== t.key && void 0 !== t.value || Object(rn.logWarning)("matcher-pattern-missing-key-or-value", t), [t.key, t.value]) : [t, !0];
            });
            if (_(t)) return Object.entries(t);
            return [[t, !0]];
          }(t),
              o = Array.from(e),
              r = [];

          return i.forEach(function (_ref8) {
            var _ref9 = _slicedToArray(_ref8, 2),
                t = _ref9[0],
                e = _ref9[1];

            o.forEach(function (i) {
              (function (t, e) {
                return !0 === t || t === e || t instanceof RegExp && e.match(t);
              })(t, i) && function (t, e, n) {
                if (!0 === t) return !0;
                var i = n(e);
                return t === i || t instanceof RegExp && !!String(i).match(t);
              }(e, i, n) && r.push(i);
            });
          }), !i.length || r.length < i.length ? null : r;
        }

        var En = "[object Symbol]";

        var Sn = function Sn(t) {
          return "symbol" == typeof t || Object(h.a)(t) && Object(l.a)(t) == En;
        },
            In = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
            On = /^\w*$/;

        var Rn = function Rn(t, e) {
          if (Object(Mt.a)(t)) return !1;
          var n = typeof t;
          return !("number" != n && "symbol" != n && "boolean" != n && null != t && !Sn(t)) || On.test(t) || !In.test(t) || null != e && t in Object(e);
        },
            Mn = "Expected a function";

        function Pn(t, e) {
          if ("function" != typeof t || null != e && "function" != typeof e) throw new TypeError(Mn);

          var n = function n() {
            var i = arguments,
                o = e ? e.apply(this, i) : i[0],
                r = n.cache;
            if (r.has(o)) return r.get(o);
            var s = t.apply(this, i);
            return n.cache = r.set(o, s) || r, s;
          };

          return n.cache = new (Pn.Cache || it)(), n;
        }

        Pn.Cache = it;
        var Nn = Pn,
            Dn = 500;

        var jn = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
            Bn = /\\(\\)?/g,
            Ln = function (t) {
          var e = Nn(t, function (t) {
            return n.size === Dn && n.clear(), t;
          }),
              n = e.cache;
          return e;
        }(function (t) {
          var e = [];
          return 46 === t.charCodeAt(0) && e.push(""), t.replace(jn, function (t, n, i, o) {
            e.push(i ? o.replace(Bn, "$1") : n || t);
          }), e;
        });

        var zn = function zn(t, e) {
          for (var n = -1, i = null == t ? 0 : t.length, o = Array(i); ++n < i;) {
            o[n] = e(t[n], n, t);
          }

          return o;
        },
            Fn = 1 / 0,
            Vn = ee.a ? ee.a.prototype : void 0,
            Un = Vn ? Vn.toString : void 0;

        var Hn = function t(e) {
          if ("string" == typeof e) return e;
          if (Object(Mt.a)(e)) return zn(e, t) + "";
          if (Sn(e)) return Un ? Un.call(e) : "";
          var n = e + "";
          return "0" == n && 1 / e == -Fn ? "-0" : n;
        };

        var qn = function qn(t) {
          return null == t ? "" : Hn(t);
        };

        var Wn = function Wn(t, e) {
          return Object(Mt.a)(t) ? t : Rn(t, e) ? [t] : Ln(qn(t));
        };

        var $n = function $n(t) {
          var e = null == t ? 0 : t.length;
          return e ? t[e - 1] : void 0;
        },
            Yn = 1 / 0;

        var Jn = function Jn(t) {
          if ("string" == typeof t || Sn(t)) return t;
          var e = t + "";
          return "0" == e && 1 / t == -Yn ? "-0" : e;
        };

        var Gn = function Gn(t, e) {
          for (var n = 0, i = (e = Wn(e, t)).length; null != t && n < i;) {
            t = t[Jn(e[n++])];
          }

          return n && n == i ? t : void 0;
        };

        var Kn = function Kn(t, e, n) {
          var i = -1,
              o = t.length;
          e < 0 && (e = -e > o ? 0 : o + e), (n = n > o ? o : n) < 0 && (n += o), o = e > n ? 0 : n - e >>> 0, e >>>= 0;

          for (var r = Array(o); ++i < o;) {
            r[i] = t[i + e];
          }

          return r;
        };

        var Qn = function Qn(t, e) {
          return e.length < 2 ? t : Gn(t, Kn(e, 0, -1));
        };

        var Xn = function Xn(t, e) {
          return e = Wn(e, t), null == (t = Qn(t, e)) || delete t[Jn($n(e))];
        };

        var Zn = function Zn(t, e) {
          return null == t || Xn(t, e);
        };

        var ti = function ti(t, e, n) {
          var i = null == t ? void 0 : Gn(t, e);
          return void 0 === i ? n : i;
        },
            ei = n(43);

        var ni = function ni(t, e, n) {
          (void 0 === n || Object(v.a)(t[e], n)) && (void 0 !== n || e in t) || Object(ei.a)(t, e, n);
        };

        var ii = function (t) {
          return function (e, n, i) {
            for (var o = -1, r = Object(e), s = i(e), a = s.length; a--;) {
              var c = s[t ? a : ++o];
              if (!1 === n(r[c], c, r)) break;
            }

            return e;
          };
        }(),
            oi = n(55);

        var ri = function ri(t) {
          return Object(h.a)(t) && Object(pt.a)(t);
        },
            si = n(41),
            ai = n(47);

        var ci = function ci(t, e) {
          if (("constructor" !== e || "function" != typeof t[e]) && "__proto__" != e) return t[e];
        };

        var li = function li(t) {
          return Object(dt.a)(t, Object(_t.a)(t));
        };

        var di = function di(t, e, n, i, o, r, s) {
          var a = ci(t, n),
              c = ci(e, n),
              l = s.get(c);
          if (l) ni(t, n, l);else {
            var d = r ? r(a, c, n + "", t, e, s) : void 0,
                u = void 0 === d;

            if (u) {
              var h = Object(Mt.a)(c),
                  f = !h && Object(Oe.a)(c),
                  g = !h && !f && Object(ai.a)(c);
              d = c, h || f || g ? Object(Mt.a)(a) ? d = a : ri(a) ? d = yt(a) : f ? (u = !1, d = Object(vt.a)(c, !0)) : g ? (u = !1, d = re(c, !0)) : d = [] : _(c) || Object(oi.a)(c) ? (d = a, Object(oi.a)(a) ? d = li(a) : Object(Ae.a)(a) && !Object(si.a)(a) || (d = Ie(c))) : u = !1;
            }

            u && (s.set(c, d), o(d, c, i, r, s), s["delete"](c)), ni(t, n, d);
          }
        };

        var ui = function t(e, n, i, o, r) {
          e !== n && ii(n, function (s, a) {
            if (r || (r = new at()), Object(Ae.a)(s)) di(e, n, a, i, t, o, r);else {
              var c = o ? o(ci(e, a), s, a + "", e, n, r) : void 0;
              void 0 === c && (c = s), ni(e, a, c);
            }
          }, _t.a);
        },
            hi = n(67),
            fi = Object(hi.a)(function (t, e, n) {
          ui(t, e, n);
        }),
            gi = n(42);

        var mi = function mi(t, e, n, i) {
          if (!Object(Ae.a)(t)) return t;

          for (var o = -1, r = (e = Wn(e, t)).length, s = r - 1, a = t; null != a && ++o < r;) {
            var c = Jn(e[o]),
                l = n;
            if ("__proto__" === c || "constructor" === c || "prototype" === c) return t;

            if (o != s) {
              var d = a[c];
              void 0 === (l = i ? i(d, c, a) : void 0) && (l = Object(Ae.a)(d) ? d : Object(gi.a)(e[o + 1]) ? [] : {});
            }

            Object(lt.a)(a, c, l), a = a[c];
          }

          return t;
        };

        var pi = function pi(t, e, n) {
          return null == t ? t : mi(t, e, n);
        };

        var bi = /*#__PURE__*/function () {
          function bi(t) {
            _classCallCheck(this, bi);

            this._styles = {}, this._styleProcessor = t;
          }

          _createClass(bi, [{
            key: "isEmpty",
            get: function get() {
              var t = Object.entries(this._styles);
              return !Array.from(t).length;
            }
          }, {
            key: "size",
            get: function get() {
              return this.isEmpty ? 0 : this.getStyleNames().length;
            }
          }, {
            key: "setTo",
            value: function setTo(t) {
              this.clear();
              var e = Array.from(function (t) {
                var e = null,
                    n = 0,
                    i = 0,
                    o = null;
                var r = new Map();
                if ("" === t) return r;
                ";" != t.charAt(t.length - 1) && (t += ";");

                for (var _s4 = 0; _s4 < t.length; _s4++) {
                  var _a3 = t.charAt(_s4);

                  if (null === e) switch (_a3) {
                    case ":":
                      o || (o = t.substr(n, _s4 - n), i = _s4 + 1);
                      break;

                    case '"':
                    case "'":
                      e = _a3;
                      break;

                    case ";":
                      {
                        var _e19 = t.substr(i, _s4 - i);

                        o && r.set(o.trim(), _e19.trim()), o = null, n = _s4 + 1;
                        break;
                      }
                  } else _a3 === e && (e = null);
                }

                return r;
              }(t).entries());

              for (var _i14 = 0, _e20 = e; _i14 < _e20.length; _i14++) {
                var _e20$_i = _slicedToArray(_e20[_i14], 2),
                    _t27 = _e20$_i[0],
                    _n18 = _e20$_i[1];

                this._styleProcessor.toNormalizedForm(_t27, _n18, this._styles);
              }
            }
          }, {
            key: "has",
            value: function has(t) {
              if (this.isEmpty) return !1;

              var e = this._styleProcessor.getReducedForm(t, this._styles).find(function (_ref10) {
                var _ref11 = _slicedToArray(_ref10, 1),
                    e = _ref11[0];

                return e === t;
              });

              return Array.isArray(e);
            }
          }, {
            key: "set",
            value: function set(t, e) {
              if (Object(Ae.a)(t)) for (var _i15 = 0, _Object$entries = Object.entries(t); _i15 < _Object$entries.length; _i15++) {
                var _Object$entries$_i = _slicedToArray(_Object$entries[_i15], 2),
                    _e21 = _Object$entries$_i[0],
                    _n19 = _Object$entries$_i[1];

                this._styleProcessor.toNormalizedForm(_e21, _n19, this._styles);
              } else this._styleProcessor.toNormalizedForm(t, e, this._styles);
            }
          }, {
            key: "remove",
            value: function remove(t) {
              var e = _i(t);

              Zn(this._styles, e), delete this._styles[t], this._cleanEmptyObjectsOnPath(e);
            }
          }, {
            key: "getNormalized",
            value: function getNormalized(t) {
              return this._styleProcessor.getNormalized(t, this._styles);
            }
          }, {
            key: "toString",
            value: function toString() {
              return this.isEmpty ? "" : this._getStylesEntries().map(function (t) {
                return t.join(":");
              }).sort().join(";") + ";";
            }
          }, {
            key: "getAsString",
            value: function getAsString(t) {
              if (this.isEmpty) return;
              if (this._styles[t] && !Object(Ae.a)(this._styles[t])) return this._styles[t];

              var e = this._styleProcessor.getReducedForm(t, this._styles).find(function (_ref12) {
                var _ref13 = _slicedToArray(_ref12, 1),
                    e = _ref13[0];

                return e === t;
              });

              return Array.isArray(e) ? e[1] : void 0;
            }
          }, {
            key: "getStyleNames",
            value: function getStyleNames() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
              if (this.isEmpty) return [];
              if (t) return this._styleProcessor.getStyleNames(this._styles);
              return this._getStylesEntries().map(function (_ref14) {
                var _ref15 = _slicedToArray(_ref14, 1),
                    t = _ref15[0];

                return t;
              });
            }
          }, {
            key: "clear",
            value: function clear() {
              this._styles = {};
            }
          }, {
            key: "_getStylesEntries",
            value: function _getStylesEntries() {
              var t = [],
                  e = Object.keys(this._styles);

              for (var _i16 = 0, _e22 = e; _i16 < _e22.length; _i16++) {
                var _n20 = _e22[_i16];
                t.push.apply(t, _toConsumableArray(this._styleProcessor.getReducedForm(_n20, this._styles)));
              }

              return t;
            }
          }, {
            key: "_cleanEmptyObjectsOnPath",
            value: function _cleanEmptyObjectsOnPath(t) {
              var e = t.split(".");
              if (!(e.length > 1)) return;
              var n = e.splice(0, e.length - 1).join("."),
                  i = ti(this._styles, n);
              i && !Array.from(Object.keys(i)).length && this.remove(n);
            }
          }]);

          return bi;
        }();

        var ki = /*#__PURE__*/function () {
          function ki() {
            _classCallCheck(this, ki);

            this._normalizers = new Map(), this._extractors = new Map(), this._reducers = new Map(), this._consumables = new Map();
          }

          _createClass(ki, [{
            key: "toNormalizedForm",
            value: function toNormalizedForm(t, e, n) {
              if (Object(Ae.a)(e)) wi(n, _i(t), e);else if (this._normalizers.has(t)) {
                var _i17 = this._normalizers.get(t),
                    _i18 = _i17(e),
                    _o10 = _i18.path,
                    _r14 = _i18.value;

                wi(n, _o10, _r14);
              } else wi(n, t, e);
            }
          }, {
            key: "getNormalized",
            value: function getNormalized(t, e) {
              if (!t) return fi({}, e);
              if (void 0 !== e[t]) return e[t];

              if (this._extractors.has(t)) {
                var _n21 = this._extractors.get(t);

                if ("string" == typeof _n21) return ti(e, _n21);

                var _i19 = _n21(t, e);

                if (_i19) return _i19;
              }

              return ti(e, _i(t));
            }
          }, {
            key: "getReducedForm",
            value: function getReducedForm(t, e) {
              var n = this.getNormalized(t, e);
              if (void 0 === n) return [];

              if (this._reducers.has(t)) {
                return this._reducers.get(t)(n);
              }

              return [[t, n]];
            }
          }, {
            key: "getStyleNames",
            value: function getStyleNames(t) {
              var _this84 = this;

              var e = Array.from(this._consumables.keys()).filter(function (e) {
                var n = _this84.getNormalized(e, t);

                return n && "object" == typeof n ? Object.keys(n).length : n;
              }),
                  n = new Set([].concat(_toConsumableArray(e), _toConsumableArray(Object.keys(t))));
              return Array.from(n.values());
            }
          }, {
            key: "getRelatedStyles",
            value: function getRelatedStyles(t) {
              return this._consumables.get(t) || [];
            }
          }, {
            key: "setNormalizer",
            value: function setNormalizer(t, e) {
              this._normalizers.set(t, e);
            }
          }, {
            key: "setExtractor",
            value: function setExtractor(t, e) {
              this._extractors.set(t, e);
            }
          }, {
            key: "setReducer",
            value: function setReducer(t, e) {
              this._reducers.set(t, e);
            }
          }, {
            key: "setStyleRelation",
            value: function setStyleRelation(t, e) {
              this._mapStyleNames(t, e);

              var _iterator24 = _createForOfIteratorHelper(e),
                  _step24;

              try {
                for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {
                  var _n22 = _step24.value;

                  this._mapStyleNames(_n22, [t]);
                }
              } catch (err) {
                _iterator24.e(err);
              } finally {
                _iterator24.f();
              }
            }
          }, {
            key: "_mapStyleNames",
            value: function _mapStyleNames(t, e) {
              var _this$_consumables$ge;

              this._consumables.has(t) || this._consumables.set(t, []), (_this$_consumables$ge = this._consumables.get(t)).push.apply(_this$_consumables$ge, _toConsumableArray(e));
            }
          }]);

          return ki;
        }();

        function _i(t) {
          return t.replace("-", ".");
        }

        function wi(t, e, n) {
          var i = n;
          Object(Ae.a)(n) && (i = fi({}, ti(t, e), n)), pi(t, e, i);
        }

        var vi = /*#__PURE__*/function (_n23) {
          _inherits(vi, _n23);

          var _super64 = _createSuper(vi);

          function vi(t, e, n, i) {
            var _this85;

            _classCallCheck(this, vi);

            if (_this85 = _super64.call(this, t), _this85.name = e, _this85._attrs = function (t) {
              t = xn(t);

              var _iterator25 = _createForOfIteratorHelper(t),
                  _step25;

              try {
                for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {
                  var _step25$value = _slicedToArray(_step25.value, 2),
                      _e23 = _step25$value[0],
                      _n24 = _step25$value[1];

                  null === _n24 ? t["delete"](_e23) : "string" != typeof _n24 && t.set(_e23, String(_n24));
                }
              } catch (err) {
                _iterator25.e(err);
              } finally {
                _iterator25.f();
              }

              return t;
            }(n), _this85._children = [], i && _this85._insertChild(0, i), _this85._classes = new Set(), _this85._attrs.has("class")) {
              var _t28 = _this85._attrs.get("class");

              yi(_this85._classes, _t28), _this85._attrs["delete"]("class");
            }

            _this85._styles = new bi(_this85.document.stylesProcessor), _this85._attrs.has("style") && (_this85._styles.setTo(_this85._attrs.get("style")), _this85._attrs["delete"]("style")), _this85._customProperties = new Map(), _this85._isAllowedInsideAttributeElement = !1;
            return _possibleConstructorReturn(_this85);
          }

          _createClass(vi, [{
            key: "childCount",
            get: function get() {
              return this._children.length;
            }
          }, {
            key: "isEmpty",
            get: function get() {
              return 0 === this._children.length;
            }
          }, {
            key: "isAllowedInsideAttributeElement",
            get: function get() {
              return this._isAllowedInsideAttributeElement;
            }
          }, {
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("element" === t || "view:element" === t) : "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "getChild",
            value: function getChild(t) {
              return this._children[t];
            }
          }, {
            key: "getChildIndex",
            value: function getChildIndex(t) {
              return this._children.indexOf(t);
            }
          }, {
            key: "getChildren",
            value: function getChildren() {
              return this._children[Symbol.iterator]();
            }
          }, {
            key: "getAttributeKeys",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getAttributeKeys() {
              return regeneratorRuntime.wrap(function getAttributeKeys$(_context36) {
                while (1) {
                  switch (_context36.prev = _context36.next) {
                    case 0:
                      _context36.t0 = this._classes.size > 0;

                      if (!_context36.t0) {
                        _context36.next = 4;
                        break;
                      }

                      _context36.next = 4;
                      return "class";

                    case 4:
                      _context36.t1 = this._styles.isEmpty;

                      if (_context36.t1) {
                        _context36.next = 8;
                        break;
                      }

                      _context36.next = 8;
                      return "style";

                    case 8:
                      return _context36.delegateYield(this._attrs.keys(), "t2", 9);

                    case 9:
                    case "end":
                      return _context36.stop();
                  }
                }
              }, getAttributeKeys, this);
            })
          }, {
            key: "getAttributes",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getAttributes() {
              return regeneratorRuntime.wrap(function getAttributes$(_context37) {
                while (1) {
                  switch (_context37.prev = _context37.next) {
                    case 0:
                      return _context37.delegateYield(this._attrs.entries(), "t0", 1);

                    case 1:
                      _context37.t1 = this._classes.size > 0;

                      if (!_context37.t1) {
                        _context37.next = 5;
                        break;
                      }

                      _context37.next = 5;
                      return ["class", this.getAttribute("class")];

                    case 5:
                      _context37.t2 = this._styles.isEmpty;

                      if (_context37.t2) {
                        _context37.next = 9;
                        break;
                      }

                      _context37.next = 9;
                      return ["style", this.getAttribute("style")];

                    case 9:
                    case "end":
                      return _context37.stop();
                  }
                }
              }, getAttributes, this);
            })
          }, {
            key: "getAttribute",
            value: function getAttribute(t) {
              if ("class" == t) return this._classes.size > 0 ? _toConsumableArray(this._classes).join(" ") : void 0;

              if ("style" == t) {
                var _t29 = this._styles.toString();

                return "" == _t29 ? void 0 : _t29;
              }

              return this._attrs.get(t);
            }
          }, {
            key: "hasAttribute",
            value: function hasAttribute(t) {
              return "class" == t ? this._classes.size > 0 : "style" == t ? !this._styles.isEmpty : this._attrs.has(t);
            }
          }, {
            key: "isSimilar",
            value: function isSimilar(t) {
              if (!(t instanceof vi)) return !1;
              if (this === t) return !0;
              if (this.name != t.name) return !1;
              if (this.isAllowedInsideAttributeElement != t.isAllowedInsideAttributeElement) return !1;
              if (this._attrs.size !== t._attrs.size || this._classes.size !== t._classes.size || this._styles.size !== t._styles.size) return !1;

              var _iterator26 = _createForOfIteratorHelper(this._attrs),
                  _step26;

              try {
                for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {
                  var _step26$value = _slicedToArray(_step26.value, 2),
                      _e24 = _step26$value[0],
                      _n25 = _step26$value[1];

                  if (!t._attrs.has(_e24) || t._attrs.get(_e24) !== _n25) return !1;
                }
              } catch (err) {
                _iterator26.e(err);
              } finally {
                _iterator26.f();
              }

              var _iterator27 = _createForOfIteratorHelper(this._classes),
                  _step27;

              try {
                for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {
                  var _e25 = _step27.value;
                  if (!t._classes.has(_e25)) return !1;
                }
              } catch (err) {
                _iterator27.e(err);
              } finally {
                _iterator27.f();
              }

              var _iterator28 = _createForOfIteratorHelper(this._styles.getStyleNames()),
                  _step28;

              try {
                for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {
                  var _e26 = _step28.value;
                  if (!t._styles.has(_e26) || t._styles.getAsString(_e26) !== this._styles.getAsString(_e26)) return !1;
                }
              } catch (err) {
                _iterator28.e(err);
              } finally {
                _iterator28.f();
              }

              return !0;
            }
          }, {
            key: "hasClass",
            value: function hasClass() {
              for (var _len13 = arguments.length, t = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
                t[_key13] = arguments[_key13];
              }

              for (var _i20 = 0, _t30 = t; _i20 < _t30.length; _i20++) {
                var _e27 = _t30[_i20];
                if (!this._classes.has(_e27)) return !1;
              }

              return !0;
            }
          }, {
            key: "getClassNames",
            value: function getClassNames() {
              return this._classes.keys();
            }
          }, {
            key: "getStyle",
            value: function getStyle(t) {
              return this._styles.getAsString(t);
            }
          }, {
            key: "getNormalizedStyle",
            value: function getNormalizedStyle(t) {
              return this._styles.getNormalized(t);
            }
          }, {
            key: "getStyleNames",
            value: function getStyleNames() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
              return this._styles.getStyleNames(t);
            }
          }, {
            key: "hasStyle",
            value: function hasStyle() {
              for (var _len14 = arguments.length, t = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
                t[_key14] = arguments[_key14];
              }

              for (var _i21 = 0, _t31 = t; _i21 < _t31.length; _i21++) {
                var _e28 = _t31[_i21];
                if (!this._styles.has(_e28)) return !1;
              }

              return !0;
            }
          }, {
            key: "findAncestor",
            value: function findAncestor() {
              for (var _len15 = arguments.length, t = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
                t[_key15] = arguments[_key15];
              }

              var e = _construct(Cn, t);

              var n = this.parent;

              for (; n;) {
                if (e.match(n)) return n;
                n = n.parent;
              }

              return null;
            }
          }, {
            key: "getCustomProperty",
            value: function getCustomProperty(t) {
              return this._customProperties.get(t);
            }
          }, {
            key: "getCustomProperties",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getCustomProperties() {
              return regeneratorRuntime.wrap(function getCustomProperties$(_context38) {
                while (1) {
                  switch (_context38.prev = _context38.next) {
                    case 0:
                      return _context38.delegateYield(this._customProperties.entries(), "t0", 1);

                    case 1:
                    case "end":
                      return _context38.stop();
                  }
                }
              }, getCustomProperties, this);
            })
          }, {
            key: "getIdentity",
            value: function getIdentity() {
              var t = Array.from(this._classes).sort().join(","),
                  e = this._styles.toString(),
                  n = Array.from(this._attrs).map(function (t) {
                return "".concat(t[0], "=\"").concat(t[1], "\"");
              }).sort().join(" ");

              return this.name + ("" == t ? "" : " class=\"".concat(t, "\"")) + (e ? " style=\"".concat(e, "\"") : "") + ("" == n ? "" : " ".concat(n));
            }
          }, {
            key: "_clone",
            value: function _clone() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
              var e = [];

              if (t) {
                var _iterator29 = _createForOfIteratorHelper(this.getChildren()),
                    _step29;

                try {
                  for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {
                    var _n26 = _step29.value;
                    e.push(_n26._clone(t));
                  }
                } catch (err) {
                  _iterator29.e(err);
                } finally {
                  _iterator29.f();
                }
              }

              var n = new this.constructor(this.document, this.name, this._attrs, e);
              return n._classes = new Set(this._classes), n._styles.set(this._styles.getNormalized()), n._customProperties = new Map(this._customProperties), n.getFillerOffset = this.getFillerOffset, n._isAllowedInsideAttributeElement = this.isAllowedInsideAttributeElement, n;
            }
          }, {
            key: "_appendChild",
            value: function _appendChild(t) {
              return this._insertChild(this.childCount, t);
            }
          }, {
            key: "_insertChild",
            value: function _insertChild(t, e) {
              this._fireChange("children", this);

              var n = 0;

              var i = function (t, e) {
                if ("string" == typeof e) return [new wn(t, e)];
                Object(yn.a)(e) || (e = [e]);
                return Array.from(e).map(function (e) {
                  return "string" == typeof e ? new wn(t, e) : e instanceof vn ? new wn(t, e.data) : e;
                });
              }(this.document, e);

              var _iterator30 = _createForOfIteratorHelper(i),
                  _step30;

              try {
                for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {
                  var _e29 = _step30.value;
                  null !== _e29.parent && _e29._remove(), _e29.parent = this, _e29.document = this.document, this._children.splice(t, 0, _e29), t++, n++;
                }
              } catch (err) {
                _iterator30.e(err);
              } finally {
                _iterator30.f();
              }

              return n;
            }
          }, {
            key: "_removeChildren",
            value: function _removeChildren(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

              this._fireChange("children", this);

              for (var _n27 = t; _n27 < t + e; _n27++) {
                this._children[_n27].parent = null;
              }

              return this._children.splice(t, e);
            }
          }, {
            key: "_setAttribute",
            value: function _setAttribute(t, e) {
              e = String(e), this._fireChange("attributes", this), "class" == t ? yi(this._classes, e) : "style" == t ? this._styles.setTo(e) : this._attrs.set(t, e);
            }
          }, {
            key: "_removeAttribute",
            value: function _removeAttribute(t) {
              return this._fireChange("attributes", this), "class" == t ? this._classes.size > 0 && (this._classes.clear(), !0) : "style" == t ? !this._styles.isEmpty && (this._styles.clear(), !0) : this._attrs["delete"](t);
            }
          }, {
            key: "_addClass",
            value: function _addClass(t) {
              this._fireChange("attributes", this);

              var _iterator31 = _createForOfIteratorHelper(cn(t)),
                  _step31;

              try {
                for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {
                  var _e30 = _step31.value;

                  this._classes.add(_e30);
                }
              } catch (err) {
                _iterator31.e(err);
              } finally {
                _iterator31.f();
              }
            }
          }, {
            key: "_removeClass",
            value: function _removeClass(t) {
              this._fireChange("attributes", this);

              var _iterator32 = _createForOfIteratorHelper(cn(t)),
                  _step32;

              try {
                for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {
                  var _e31 = _step32.value;

                  this._classes["delete"](_e31);
                }
              } catch (err) {
                _iterator32.e(err);
              } finally {
                _iterator32.f();
              }
            }
          }, {
            key: "_setStyle",
            value: function _setStyle(t, e) {
              this._fireChange("attributes", this), this._styles.set(t, e);
            }
          }, {
            key: "_removeStyle",
            value: function _removeStyle(t) {
              this._fireChange("attributes", this);

              var _iterator33 = _createForOfIteratorHelper(cn(t)),
                  _step33;

              try {
                for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {
                  var _e32 = _step33.value;

                  this._styles.remove(_e32);
                }
              } catch (err) {
                _iterator33.e(err);
              } finally {
                _iterator33.f();
              }
            }
          }, {
            key: "_setCustomProperty",
            value: function _setCustomProperty(t, e) {
              this._customProperties.set(t, e);
            }
          }, {
            key: "_removeCustomProperty",
            value: function _removeCustomProperty(t) {
              return this._customProperties["delete"](t);
            }
          }]);

          return vi;
        }(_n);

        function yi(t, e) {
          var n = e.split(/\s+/);
          t.clear(), n.forEach(function (e) {
            return t.add(e);
          });
        }

        var xi = /*#__PURE__*/function (_vi) {
          _inherits(xi, _vi);

          var _super65 = _createSuper(xi);

          function xi(t, e, n, i) {
            var _this86;

            _classCallCheck(this, xi);

            _this86 = _super65.call(this, t, e, n, i), _this86.getFillerOffset = Ci;
            return _this86;
          }

          _createClass(xi, [{
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("containerElement" === t || "view:containerElement" === t || "element" === t || "view:element" === t) : "containerElement" === t || "view:containerElement" === t || "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }]);

          return xi;
        }(vi);

        function Ci() {
          var t = _toConsumableArray(this.getChildren()),
              e = t[this.childCount - 1];

          if (e && e.is("element", "br")) return this.childCount;

          var _iterator34 = _createForOfIteratorHelper(t),
              _step34;

          try {
            for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {
              var _e33 = _step34.value;
              if (!_e33.is("uiElement")) return null;
            }
          } catch (err) {
            _iterator34.e(err);
          } finally {
            _iterator34.f();
          }

          return this.childCount;
        }

        var Ti = /*#__PURE__*/function (_xi) {
          _inherits(Ti, _xi);

          var _super66 = _createSuper(Ti);

          function Ti(t, e, n, i) {
            var _this87;

            _classCallCheck(this, Ti);

            _this87 = _super66.call(this, t, e, n, i), _this87.set("isReadOnly", !1), _this87.set("isFocused", !1), _this87.bind("isReadOnly").to(t), _this87.bind("isFocused").to(t, "isFocused", function (e) {
              return e && t.selection.editableElement == _assertThisInitialized(_this87);
            }), _this87.listenTo(t.selection, "change", function () {
              _this87.isFocused = t.isFocused && t.selection.editableElement == _assertThisInitialized(_this87);
            });
            return _this87;
          }

          _createClass(Ti, [{
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("editableElement" === t || "view:editableElement" === t || "containerElement" === t || "view:containerElement" === t || "element" === t || "view:element" === t) : "editableElement" === t || "view:editableElement" === t || "containerElement" === t || "view:containerElement" === t || "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.stopListening();
            }
          }]);

          return Ti;
        }(xi);

        Object(o["default"])(Ti, i["default"]);
        var Ai = Symbol("rootName");

        var Ei = /*#__PURE__*/function (_Ti) {
          _inherits(Ei, _Ti);

          var _super67 = _createSuper(Ei);

          function Ei(t, e) {
            var _this88;

            _classCallCheck(this, Ei);

            _this88 = _super67.call(this, t, e), _this88.rootName = "main";
            return _this88;
          }

          _createClass(Ei, [{
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("rootElement" === t || "view:rootElement" === t || "editableElement" === t || "view:editableElement" === t || "containerElement" === t || "view:containerElement" === t || "element" === t || "view:element" === t) : "rootElement" === t || "view:rootElement" === t || "editableElement" === t || "view:editableElement" === t || "containerElement" === t || "view:containerElement" === t || "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "rootName",
            get: function get() {
              return this.getCustomProperty(Ai);
            },
            set: function set(t) {
              this._setCustomProperty(Ai, t);
            }
          }, {
            key: "_name",
            set: function set(t) {
              this.name = t;
            }
          }]);

          return Ei;
        }(Ti);

        var Si = /*#__PURE__*/function (_Symbol$iterator3) {
          function Si() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            _classCallCheck(this, Si);

            if (!t.boundaries && !t.startPosition) throw new rn["default"]("view-tree-walker-no-start-position", null);
            if (t.direction && "forward" != t.direction && "backward" != t.direction) throw new rn["default"]("view-tree-walker-unknown-direction", t.startPosition, {
              direction: t.direction
            });
            this.boundaries = t.boundaries || null, t.startPosition ? this.position = Ii._createAt(t.startPosition) : this.position = Ii._createAt(t.boundaries["backward" == t.direction ? "end" : "start"]), this.direction = t.direction || "forward", this.singleCharacters = !!t.singleCharacters, this.shallow = !!t.shallow, this.ignoreElementEnd = !!t.ignoreElementEnd, this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null, this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;
          }

          _createClass(Si, [{
            key: _Symbol$iterator3,
            value: function value() {
              return this;
            }
          }, {
            key: "skip",
            value: function skip(t) {
              var e, n, i;

              do {
                var _this$next;

                i = this.position, (_this$next = this.next(), e = _this$next.done, n = _this$next.value, _this$next);
              } while (!e && t(n));

              e || (this.position = i);
            }
          }, {
            key: "next",
            value: function next() {
              return "forward" == this.direction ? this._next() : this._previous();
            }
          }, {
            key: "_next",
            value: function _next() {
              var t = this.position.clone();
              var e = this.position,
                  n = t.parent;
              if (null === n.parent && t.offset === n.childCount) return {
                done: !0
              };
              if (n === this._boundaryEndParent && t.offset == this.boundaries.end.offset) return {
                done: !0
              };
              var i;

              if (n instanceof wn) {
                if (t.isAtEnd) return this.position = Ii._createAfter(n), this._next();
                i = n.data[t.offset];
              } else i = n.getChild(t.offset);

              if (i instanceof vi) return this.shallow ? t.offset++ : t = new Ii(i, 0), this.position = t, this._formatReturnValue("elementStart", i, e, t, 1);

              if (i instanceof wn) {
                if (this.singleCharacters) return t = new Ii(i, 0), this.position = t, this._next();
                {
                  var _n28,
                      _o11 = i.data.length;

                  return i == this._boundaryEndParent ? (_o11 = this.boundaries.end.offset, _n28 = new vn(i, 0, _o11), t = Ii._createAfter(_n28)) : (_n28 = new vn(i, 0, i.data.length), t.offset++), this.position = t, this._formatReturnValue("text", _n28, e, t, _o11);
                }
              }

              if ("string" == typeof i) {
                var _i22;

                if (this.singleCharacters) _i22 = 1;else {
                  _i22 = (n === this._boundaryEndParent ? this.boundaries.end.offset : n.data.length) - t.offset;
                }

                var _o12 = new vn(n, t.offset, _i22);

                return t.offset += _i22, this.position = t, this._formatReturnValue("text", _o12, e, t, _i22);
              }

              return t = Ii._createAfter(n), this.position = t, this.ignoreElementEnd ? this._next() : this._formatReturnValue("elementEnd", n, e, t);
            }
          }, {
            key: "_previous",
            value: function _previous() {
              var t = this.position.clone();
              var e = this.position,
                  n = t.parent;
              if (null === n.parent && 0 === t.offset) return {
                done: !0
              };
              if (n == this._boundaryStartParent && t.offset == this.boundaries.start.offset) return {
                done: !0
              };
              var i;

              if (n instanceof wn) {
                if (t.isAtStart) return this.position = Ii._createBefore(n), this._previous();
                i = n.data[t.offset - 1];
              } else i = n.getChild(t.offset - 1);

              if (i instanceof vi) return this.shallow ? (t.offset--, this.position = t, this._formatReturnValue("elementStart", i, e, t, 1)) : (t = new Ii(i, i.childCount), this.position = t, this.ignoreElementEnd ? this._previous() : this._formatReturnValue("elementEnd", i, e, t));

              if (i instanceof wn) {
                if (this.singleCharacters) return t = new Ii(i, i.data.length), this.position = t, this._previous();
                {
                  var _n29,
                      _o13 = i.data.length;

                  if (i == this._boundaryStartParent) {
                    var _e34 = this.boundaries.start.offset;
                    _o13 = (_n29 = new vn(i, _e34, i.data.length - _e34)).data.length, t = Ii._createBefore(_n29);
                  } else _n29 = new vn(i, 0, i.data.length), t.offset--;

                  return this.position = t, this._formatReturnValue("text", _n29, e, t, _o13);
                }
              }

              if ("string" == typeof i) {
                var _i23;

                if (this.singleCharacters) _i23 = 1;else {
                  var _e35 = n === this._boundaryStartParent ? this.boundaries.start.offset : 0;

                  _i23 = t.offset - _e35;
                }
                t.offset -= _i23;

                var _o14 = new vn(n, t.offset, _i23);

                return this.position = t, this._formatReturnValue("text", _o14, e, t, _i23);
              }

              return t = Ii._createBefore(n), this.position = t, this._formatReturnValue("elementStart", n, e, t, 1);
            }
          }, {
            key: "_formatReturnValue",
            value: function _formatReturnValue(t, e, n, i, o) {
              return e instanceof vn && (e.offsetInText + e.data.length == e.textNode.data.length && ("forward" != this.direction || this.boundaries && this.boundaries.end.isEqual(this.position) ? n = Ii._createAfter(e.textNode) : (i = Ii._createAfter(e.textNode), this.position = i)), 0 === e.offsetInText && ("backward" != this.direction || this.boundaries && this.boundaries.start.isEqual(this.position) ? n = Ii._createBefore(e.textNode) : (i = Ii._createBefore(e.textNode), this.position = i))), {
                done: !1,
                value: {
                  type: t,
                  item: e,
                  previousPosition: n,
                  nextPosition: i,
                  length: o
                }
              };
            }
          }]);

          return Si;
        }(Symbol.iterator);

        var Ii = /*#__PURE__*/function () {
          function Ii(t, e) {
            _classCallCheck(this, Ii);

            this.parent = t, this.offset = e;
          }

          _createClass(Ii, [{
            key: "nodeAfter",
            get: function get() {
              return this.parent.is("$text") ? null : this.parent.getChild(this.offset) || null;
            }
          }, {
            key: "nodeBefore",
            get: function get() {
              return this.parent.is("$text") ? null : this.parent.getChild(this.offset - 1) || null;
            }
          }, {
            key: "isAtStart",
            get: function get() {
              return 0 === this.offset;
            }
          }, {
            key: "isAtEnd",
            get: function get() {
              var t = this.parent.is("$text") ? this.parent.data.length : this.parent.childCount;
              return this.offset === t;
            }
          }, {
            key: "root",
            get: function get() {
              return this.parent.root;
            }
          }, {
            key: "editableElement",
            get: function get() {
              var t = this.parent;

              for (; !(t instanceof Ti);) {
                if (!t.parent) return null;
                t = t.parent;
              }

              return t;
            }
          }, {
            key: "getShiftedBy",
            value: function getShiftedBy(t) {
              var e = Ii._createAt(this),
                  n = e.offset + t;

              return e.offset = n < 0 ? 0 : n, e;
            }
          }, {
            key: "getLastMatchingPosition",
            value: function getLastMatchingPosition(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              e.startPosition = this;
              var n = new Si(e);
              return n.skip(t), n.position;
            }
          }, {
            key: "getAncestors",
            value: function getAncestors() {
              return this.parent.is("documentFragment") ? [this.parent] : this.parent.getAncestors({
                includeSelf: !0
              });
            }
          }, {
            key: "getCommonAncestor",
            value: function getCommonAncestor(t) {
              var e = this.getAncestors(),
                  n = t.getAncestors();
              var i = 0;

              for (; e[i] == n[i] && e[i];) {
                i++;
              }

              return 0 === i ? null : e[i - 1];
            }
          }, {
            key: "is",
            value: function is(t) {
              return "position" === t || "view:position" === t;
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              return this.parent == t.parent && this.offset == t.offset;
            }
          }, {
            key: "isBefore",
            value: function isBefore(t) {
              return "before" == this.compareWith(t);
            }
          }, {
            key: "isAfter",
            value: function isAfter(t) {
              return "after" == this.compareWith(t);
            }
          }, {
            key: "compareWith",
            value: function compareWith(t) {
              if (this.root !== t.root) return "different";
              if (this.isEqual(t)) return "same";
              var e = this.parent.is("node") ? this.parent.getPath() : [],
                  n = t.parent.is("node") ? t.parent.getPath() : [];
              e.push(this.offset), n.push(t.offset);
              var i = mn(e, n);

              switch (i) {
                case "prefix":
                  return "before";

                case "extension":
                  return "after";

                default:
                  return e[i] < n[i] ? "before" : "after";
              }
            }
          }, {
            key: "getWalker",
            value: function getWalker() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              return t.startPosition = this, new Si(t);
            }
          }, {
            key: "clone",
            value: function clone() {
              return new Ii(this.parent, this.offset);
            }
          }], [{
            key: "_createAt",
            value: function _createAt(t, e) {
              if (t instanceof Ii) return new this(t.parent, t.offset);
              {
                var _n30 = t;
                if ("end" == e) e = _n30.is("$text") ? _n30.data.length : _n30.childCount;else {
                  if ("before" == e) return this._createBefore(_n30);
                  if ("after" == e) return this._createAfter(_n30);
                  if (0 !== e && !e) throw new rn["default"]("view-createpositionat-offset-required", _n30);
                }
                return new Ii(_n30, e);
              }
            }
          }, {
            key: "_createAfter",
            value: function _createAfter(t) {
              if (t.is("$textProxy")) return new Ii(t.textNode, t.offsetInText + t.data.length);
              if (!t.parent) throw new rn["default"]("view-position-after-root", t, {
                root: t
              });
              return new Ii(t.parent, t.index + 1);
            }
          }, {
            key: "_createBefore",
            value: function _createBefore(t) {
              if (t.is("$textProxy")) return new Ii(t.textNode, t.offsetInText);
              if (!t.parent) throw new rn["default"]("view-position-before-root", t, {
                root: t
              });
              return new Ii(t.parent, t.index);
            }
          }]);

          return Ii;
        }();

        var Oi = /*#__PURE__*/function (_Symbol$iterator4) {
          function Oi(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

            _classCallCheck(this, Oi);

            this.start = t.clone(), this.end = e ? e.clone() : t.clone();
          }

          _createClass(Oi, [{
            key: _Symbol$iterator4,
            value: /*#__PURE__*/regeneratorRuntime.mark(function value() {
              return regeneratorRuntime.wrap(function value$(_context39) {
                while (1) {
                  switch (_context39.prev = _context39.next) {
                    case 0:
                      return _context39.delegateYield(new Si({
                        boundaries: this,
                        ignoreElementEnd: !0
                      }), "t0", 1);

                    case 1:
                    case "end":
                      return _context39.stop();
                  }
                }
              }, value, this);
            })
          }, {
            key: "isCollapsed",
            get: function get() {
              return this.start.isEqual(this.end);
            }
          }, {
            key: "isFlat",
            get: function get() {
              return this.start.parent === this.end.parent;
            }
          }, {
            key: "root",
            get: function get() {
              return this.start.root;
            }
          }, {
            key: "getEnlarged",
            value: function getEnlarged() {
              var t = this.start.getLastMatchingPosition(Ri, {
                direction: "backward"
              }),
                  e = this.end.getLastMatchingPosition(Ri);
              return t.parent.is("$text") && t.isAtStart && (t = Ii._createBefore(t.parent)), e.parent.is("$text") && e.isAtEnd && (e = Ii._createAfter(e.parent)), new Oi(t, e);
            }
          }, {
            key: "getTrimmed",
            value: function getTrimmed() {
              var t = this.start.getLastMatchingPosition(Ri);
              if (t.isAfter(this.end) || t.isEqual(this.end)) return new Oi(t, t);
              var e = this.end.getLastMatchingPosition(Ri, {
                direction: "backward"
              });
              var n = t.nodeAfter,
                  i = e.nodeBefore;
              return n && n.is("$text") && (t = new Ii(n, 0)), i && i.is("$text") && (e = new Ii(i, i.data.length)), new Oi(t, e);
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              return this == t || this.start.isEqual(t.start) && this.end.isEqual(t.end);
            }
          }, {
            key: "containsPosition",
            value: function containsPosition(t) {
              return t.isAfter(this.start) && t.isBefore(this.end);
            }
          }, {
            key: "containsRange",
            value: function containsRange(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              t.isCollapsed && (e = !1);
              var n = this.containsPosition(t.start) || e && this.start.isEqual(t.start),
                  i = this.containsPosition(t.end) || e && this.end.isEqual(t.end);
              return n && i;
            }
          }, {
            key: "getDifference",
            value: function getDifference(t) {
              var e = [];
              return this.isIntersecting(t) ? (this.containsPosition(t.start) && e.push(new Oi(this.start, t.start)), this.containsPosition(t.end) && e.push(new Oi(t.end, this.end))) : e.push(this.clone()), e;
            }
          }, {
            key: "getIntersection",
            value: function getIntersection(t) {
              if (this.isIntersecting(t)) {
                var _e36 = this.start,
                    _n31 = this.end;
                return this.containsPosition(t.start) && (_e36 = t.start), this.containsPosition(t.end) && (_n31 = t.end), new Oi(_e36, _n31);
              }

              return null;
            }
          }, {
            key: "getWalker",
            value: function getWalker() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              return t.boundaries = this, new Si(t);
            }
          }, {
            key: "getCommonAncestor",
            value: function getCommonAncestor() {
              return this.start.getCommonAncestor(this.end);
            }
          }, {
            key: "getContainedElement",
            value: function getContainedElement() {
              if (this.isCollapsed) return null;
              var t = this.start.nodeAfter,
                  e = this.end.nodeBefore;
              return this.start.parent.is("$text") && this.start.isAtEnd && this.start.parent.nextSibling && (t = this.start.parent.nextSibling), this.end.parent.is("$text") && this.end.isAtStart && this.end.parent.previousSibling && (e = this.end.parent.previousSibling), t && t.is("element") && t === e ? t : null;
            }
          }, {
            key: "clone",
            value: function clone() {
              return new Oi(this.start, this.end);
            }
          }, {
            key: "getItems",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getItems() {
              var t,
                  e,
                  _iterator35,
                  _step35,
                  _t32,
                  _args40 = arguments;

              return regeneratorRuntime.wrap(function getItems$(_context40) {
                while (1) {
                  switch (_context40.prev = _context40.next) {
                    case 0:
                      t = _args40.length > 0 && _args40[0] !== undefined ? _args40[0] : {};
                      t.boundaries = this, t.ignoreElementEnd = !0;
                      e = new Si(t);
                      _iterator35 = _createForOfIteratorHelper(e);
                      _context40.prev = 4;

                      _iterator35.s();

                    case 6:
                      if ((_step35 = _iterator35.n()).done) {
                        _context40.next = 12;
                        break;
                      }

                      _t32 = _step35.value;
                      _context40.next = 10;
                      return _t32.item;

                    case 10:
                      _context40.next = 6;
                      break;

                    case 12:
                      _context40.next = 17;
                      break;

                    case 14:
                      _context40.prev = 14;
                      _context40.t0 = _context40["catch"](4);

                      _iterator35.e(_context40.t0);

                    case 17:
                      _context40.prev = 17;

                      _iterator35.f();

                      return _context40.finish(17);

                    case 20:
                    case "end":
                      return _context40.stop();
                  }
                }
              }, getItems, this, [[4, 14, 17, 20]]);
            })
          }, {
            key: "getPositions",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getPositions() {
              var t,
                  e,
                  _iterator36,
                  _step36,
                  _t33,
                  _args41 = arguments;

              return regeneratorRuntime.wrap(function getPositions$(_context41) {
                while (1) {
                  switch (_context41.prev = _context41.next) {
                    case 0:
                      t = _args41.length > 0 && _args41[0] !== undefined ? _args41[0] : {};
                      t.boundaries = this;
                      e = new Si(t);
                      _context41.next = 5;
                      return e.position;

                    case 5:
                      _iterator36 = _createForOfIteratorHelper(e);
                      _context41.prev = 6;

                      _iterator36.s();

                    case 8:
                      if ((_step36 = _iterator36.n()).done) {
                        _context41.next = 14;
                        break;
                      }

                      _t33 = _step36.value;
                      _context41.next = 12;
                      return _t33.nextPosition;

                    case 12:
                      _context41.next = 8;
                      break;

                    case 14:
                      _context41.next = 19;
                      break;

                    case 16:
                      _context41.prev = 16;
                      _context41.t0 = _context41["catch"](6);

                      _iterator36.e(_context41.t0);

                    case 19:
                      _context41.prev = 19;

                      _iterator36.f();

                      return _context41.finish(19);

                    case 22:
                    case "end":
                      return _context41.stop();
                  }
                }
              }, getPositions, this, [[6, 16, 19, 22]]);
            })
          }, {
            key: "is",
            value: function is(t) {
              return "range" === t || "view:range" === t;
            }
          }, {
            key: "isIntersecting",
            value: function isIntersecting(t) {
              return this.start.isBefore(t.end) && this.end.isAfter(t.start);
            }
          }], [{
            key: "_createFromParentsAndOffsets",
            value: function _createFromParentsAndOffsets(t, e, n, i) {
              return new this(new Ii(t, e), new Ii(n, i));
            }
          }, {
            key: "_createFromPositionAndShift",
            value: function _createFromPositionAndShift(t, e) {
              var n = t,
                  i = t.getShiftedBy(e);
              return e > 0 ? new this(n, i) : new this(i, n);
            }
          }, {
            key: "_createIn",
            value: function _createIn(t) {
              return this._createFromParentsAndOffsets(t, 0, t, t.childCount);
            }
          }, {
            key: "_createOn",
            value: function _createOn(t) {
              var e = t.is("$textProxy") ? t.offsetSize : 1;
              return this._createFromPositionAndShift(Ii._createBefore(t), e);
            }
          }]);

          return Oi;
        }(Symbol.iterator);

        function Ri(t) {
          return !(!t.item.is("attributeElement") && !t.item.is("uiElement"));
        }

        function Mi(t) {
          var e = 0;

          var _iterator37 = _createForOfIteratorHelper(t),
              _step37;

          try {
            for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {
              var _n32 = _step37.value;
              e++;
            }
          } catch (err) {
            _iterator37.e(err);
          } finally {
            _iterator37.f();
          }

          return e;
        }

        var Pi = /*#__PURE__*/function () {
          function Pi() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
            var e = arguments.length > 1 ? arguments[1] : undefined;
            var n = arguments.length > 2 ? arguments[2] : undefined;

            _classCallCheck(this, Pi);

            this._ranges = [], this._lastRangeBackward = !1, this._isFake = !1, this._fakeSelectionLabel = "", this.setTo(t, e, n);
          }

          _createClass(Pi, [{
            key: "isFake",
            get: function get() {
              return this._isFake;
            }
          }, {
            key: "fakeSelectionLabel",
            get: function get() {
              return this._fakeSelectionLabel;
            }
          }, {
            key: "anchor",
            get: function get() {
              if (!this._ranges.length) return null;
              var t = this._ranges[this._ranges.length - 1];
              return (this._lastRangeBackward ? t.end : t.start).clone();
            }
          }, {
            key: "focus",
            get: function get() {
              if (!this._ranges.length) return null;
              var t = this._ranges[this._ranges.length - 1];
              return (this._lastRangeBackward ? t.start : t.end).clone();
            }
          }, {
            key: "isCollapsed",
            get: function get() {
              return 1 === this.rangeCount && this._ranges[0].isCollapsed;
            }
          }, {
            key: "rangeCount",
            get: function get() {
              return this._ranges.length;
            }
          }, {
            key: "isBackward",
            get: function get() {
              return !this.isCollapsed && this._lastRangeBackward;
            }
          }, {
            key: "editableElement",
            get: function get() {
              return this.anchor ? this.anchor.editableElement : null;
            }
          }, {
            key: "getRanges",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getRanges() {
              var _iterator38, _step38, _t34;

              return regeneratorRuntime.wrap(function getRanges$(_context42) {
                while (1) {
                  switch (_context42.prev = _context42.next) {
                    case 0:
                      _iterator38 = _createForOfIteratorHelper(this._ranges);
                      _context42.prev = 1;

                      _iterator38.s();

                    case 3:
                      if ((_step38 = _iterator38.n()).done) {
                        _context42.next = 9;
                        break;
                      }

                      _t34 = _step38.value;
                      _context42.next = 7;
                      return _t34.clone();

                    case 7:
                      _context42.next = 3;
                      break;

                    case 9:
                      _context42.next = 14;
                      break;

                    case 11:
                      _context42.prev = 11;
                      _context42.t0 = _context42["catch"](1);

                      _iterator38.e(_context42.t0);

                    case 14:
                      _context42.prev = 14;

                      _iterator38.f();

                      return _context42.finish(14);

                    case 17:
                    case "end":
                      return _context42.stop();
                  }
                }
              }, getRanges, this, [[1, 11, 14, 17]]);
            })
          }, {
            key: "getFirstRange",
            value: function getFirstRange() {
              var t = null;

              var _iterator39 = _createForOfIteratorHelper(this._ranges),
                  _step39;

              try {
                for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {
                  var _e37 = _step39.value;
                  t && !_e37.start.isBefore(t.start) || (t = _e37);
                }
              } catch (err) {
                _iterator39.e(err);
              } finally {
                _iterator39.f();
              }

              return t ? t.clone() : null;
            }
          }, {
            key: "getLastRange",
            value: function getLastRange() {
              var t = null;

              var _iterator40 = _createForOfIteratorHelper(this._ranges),
                  _step40;

              try {
                for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {
                  var _e38 = _step40.value;
                  t && !_e38.end.isAfter(t.end) || (t = _e38);
                }
              } catch (err) {
                _iterator40.e(err);
              } finally {
                _iterator40.f();
              }

              return t ? t.clone() : null;
            }
          }, {
            key: "getFirstPosition",
            value: function getFirstPosition() {
              var t = this.getFirstRange();
              return t ? t.start.clone() : null;
            }
          }, {
            key: "getLastPosition",
            value: function getLastPosition() {
              var t = this.getLastRange();
              return t ? t.end.clone() : null;
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              if (this.isFake != t.isFake) return !1;
              if (this.isFake && this.fakeSelectionLabel != t.fakeSelectionLabel) return !1;
              if (this.rangeCount != t.rangeCount) return !1;
              if (0 === this.rangeCount) return !0;
              if (!this.anchor.isEqual(t.anchor) || !this.focus.isEqual(t.focus)) return !1;

              var _iterator41 = _createForOfIteratorHelper(this._ranges),
                  _step41;

              try {
                for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {
                  var _e39 = _step41.value;

                  var _n33 = !1;

                  var _iterator42 = _createForOfIteratorHelper(t._ranges),
                      _step42;

                  try {
                    for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {
                      var _i24 = _step42.value;

                      if (_e39.isEqual(_i24)) {
                        _n33 = !0;
                        break;
                      }
                    }
                  } catch (err) {
                    _iterator42.e(err);
                  } finally {
                    _iterator42.f();
                  }

                  if (!_n33) return !1;
                }
              } catch (err) {
                _iterator41.e(err);
              } finally {
                _iterator41.f();
              }

              return !0;
            }
          }, {
            key: "isSimilar",
            value: function isSimilar(t) {
              if (this.isBackward != t.isBackward) return !1;
              var e = Mi(this.getRanges());
              if (e != Mi(t.getRanges())) return !1;
              if (0 == e) return !0;

              var _iterator43 = _createForOfIteratorHelper(this.getRanges()),
                  _step43;

              try {
                for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {
                  var _e40 = _step43.value;
                  _e40 = _e40.getTrimmed();

                  var _n34 = !1;

                  var _iterator44 = _createForOfIteratorHelper(t.getRanges()),
                      _step44;

                  try {
                    for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {
                      var _i25 = _step44.value;

                      if (_i25 = _i25.getTrimmed(), _e40.start.isEqual(_i25.start) && _e40.end.isEqual(_i25.end)) {
                        _n34 = !0;
                        break;
                      }
                    }
                  } catch (err) {
                    _iterator44.e(err);
                  } finally {
                    _iterator44.f();
                  }

                  if (!_n34) return !1;
                }
              } catch (err) {
                _iterator43.e(err);
              } finally {
                _iterator43.f();
              }

              return !0;
            }
          }, {
            key: "getSelectedElement",
            value: function getSelectedElement() {
              return 1 !== this.rangeCount ? null : this.getFirstRange().getContainedElement();
            }
          }, {
            key: "setTo",
            value: function setTo(t, e, n) {
              if (null === t) this._setRanges([]), this._setFakeOptions(e);else if (t instanceof Pi || t instanceof Ni) this._setRanges(t.getRanges(), t.isBackward), this._setFakeOptions({
                fake: t.isFake,
                label: t.fakeSelectionLabel
              });else if (t instanceof Oi) this._setRanges([t], e && e.backward), this._setFakeOptions(e);else if (t instanceof Ii) this._setRanges([new Oi(t)]), this._setFakeOptions(e);else if (t instanceof _n) {
                var _i26 = !!n && !!n.backward;

                var _o15;

                if (void 0 === e) throw new rn["default"]("view-selection-setto-required-second-parameter", this);
                _o15 = "in" == e ? Oi._createIn(t) : "on" == e ? Oi._createOn(t) : new Oi(Ii._createAt(t, e)), this._setRanges([_o15], _i26), this._setFakeOptions(n);
              } else {
                if (!Object(yn.a)(t)) throw new rn["default"]("view-selection-setto-not-selectable", this);
                this._setRanges(t, e && e.backward), this._setFakeOptions(e);
              }
              this.fire("change");
            }
          }, {
            key: "setFocus",
            value: function setFocus(t, e) {
              if (null === this.anchor) throw new rn["default"]("view-selection-setfocus-no-ranges", this);

              var n = Ii._createAt(t, e);

              if ("same" == n.compareWith(this.focus)) return;
              var i = this.anchor;
              this._ranges.pop(), "before" == n.compareWith(i) ? this._addRange(new Oi(n, i), !0) : this._addRange(new Oi(i, n)), this.fire("change");
            }
          }, {
            key: "is",
            value: function is(t) {
              return "selection" === t || "view:selection" === t;
            }
          }, {
            key: "_setRanges",
            value: function _setRanges(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              t = Array.from(t), this._ranges = [];

              var _iterator45 = _createForOfIteratorHelper(t),
                  _step45;

              try {
                for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {
                  var _e41 = _step45.value;

                  this._addRange(_e41);
                }
              } catch (err) {
                _iterator45.e(err);
              } finally {
                _iterator45.f();
              }

              this._lastRangeBackward = !!e;
            }
          }, {
            key: "_setFakeOptions",
            value: function _setFakeOptions() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              this._isFake = !!t.fake, this._fakeSelectionLabel = t.fake && t.label || "";
            }
          }, {
            key: "_addRange",
            value: function _addRange(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              if (!(t instanceof Oi)) throw new rn["default"]("view-selection-add-range-not-range", this);
              this._pushRange(t), this._lastRangeBackward = !!e;
            }
          }, {
            key: "_pushRange",
            value: function _pushRange(t) {
              var _iterator46 = _createForOfIteratorHelper(this._ranges),
                  _step46;

              try {
                for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {
                  var _e42 = _step46.value;
                  if (t.isIntersecting(_e42)) throw new rn["default"]("view-selection-range-intersects", this, {
                    addedRange: t,
                    intersectingRange: _e42
                  });
                }
              } catch (err) {
                _iterator46.e(err);
              } finally {
                _iterator46.f();
              }

              this._ranges.push(new Oi(t.start, t.end));
            }
          }]);

          return Pi;
        }();

        Object(o["default"])(Pi, sn["default"]);

        var Ni = /*#__PURE__*/function () {
          function Ni() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
            var e = arguments.length > 1 ? arguments[1] : undefined;
            var n = arguments.length > 2 ? arguments[2] : undefined;

            _classCallCheck(this, Ni);

            this._selection = new Pi(), this._selection.delegate("change").to(this), this._selection.setTo(t, e, n);
          }

          _createClass(Ni, [{
            key: "isFake",
            get: function get() {
              return this._selection.isFake;
            }
          }, {
            key: "fakeSelectionLabel",
            get: function get() {
              return this._selection.fakeSelectionLabel;
            }
          }, {
            key: "anchor",
            get: function get() {
              return this._selection.anchor;
            }
          }, {
            key: "focus",
            get: function get() {
              return this._selection.focus;
            }
          }, {
            key: "isCollapsed",
            get: function get() {
              return this._selection.isCollapsed;
            }
          }, {
            key: "rangeCount",
            get: function get() {
              return this._selection.rangeCount;
            }
          }, {
            key: "isBackward",
            get: function get() {
              return this._selection.isBackward;
            }
          }, {
            key: "editableElement",
            get: function get() {
              return this._selection.editableElement;
            }
          }, {
            key: "_ranges",
            get: function get() {
              return this._selection._ranges;
            }
          }, {
            key: "getRanges",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getRanges() {
              return regeneratorRuntime.wrap(function getRanges$(_context43) {
                while (1) {
                  switch (_context43.prev = _context43.next) {
                    case 0:
                      return _context43.delegateYield(this._selection.getRanges(), "t0", 1);

                    case 1:
                    case "end":
                      return _context43.stop();
                  }
                }
              }, getRanges, this);
            })
          }, {
            key: "getFirstRange",
            value: function getFirstRange() {
              return this._selection.getFirstRange();
            }
          }, {
            key: "getLastRange",
            value: function getLastRange() {
              return this._selection.getLastRange();
            }
          }, {
            key: "getFirstPosition",
            value: function getFirstPosition() {
              return this._selection.getFirstPosition();
            }
          }, {
            key: "getLastPosition",
            value: function getLastPosition() {
              return this._selection.getLastPosition();
            }
          }, {
            key: "getSelectedElement",
            value: function getSelectedElement() {
              return this._selection.getSelectedElement();
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              return this._selection.isEqual(t);
            }
          }, {
            key: "isSimilar",
            value: function isSimilar(t) {
              return this._selection.isSimilar(t);
            }
          }, {
            key: "is",
            value: function is(t) {
              return "selection" === t || "documentSelection" == t || "view:selection" == t || "view:documentSelection" == t;
            }
          }, {
            key: "_setTo",
            value: function _setTo(t, e, n) {
              this._selection.setTo(t, e, n);
            }
          }, {
            key: "_setFocus",
            value: function _setFocus(t, e) {
              this._selection.setFocus(t, e);
            }
          }]);

          return Ni;
        }();

        Object(o["default"])(Ni, sn["default"]);
        var Di = n(19);

        var ji = /*#__PURE__*/function (_Di$a) {
          _inherits(ji, _Di$a);

          var _super68 = _createSuper(ji);

          function ji(t, e, n) {
            var _this89;

            _classCallCheck(this, ji);

            _this89 = _super68.call(this, t, e), _this89.startRange = n, _this89._eventPhase = "none", _this89._currentTarget = null;
            return _this89;
          }

          _createClass(ji, [{
            key: "eventPhase",
            get: function get() {
              return this._eventPhase;
            }
          }, {
            key: "currentTarget",
            get: function get() {
              return this._currentTarget;
            }
          }]);

          return ji;
        }(Di.a);

        var Bi = Symbol("bubbling contexts");
        var Li = {
          fire: function fire(t) {
            try {
              var _n35 = t instanceof Di.a ? t : new Di.a(this, t),
                  _i27 = Ui(this);

              if (!_i27.size) return;

              for (var _len16 = arguments.length, e = new Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {
                e[_key16 - 1] = arguments[_key16];
              }

              if (zi(_n35, "capturing", this), Fi.apply(void 0, [_i27, "$capture", _n35].concat(e))) return _n35["return"];

              var _o16 = _n35.startRange || this.selection.getFirstRange(),
                  _r15 = _o16 ? _o16.getContainedElement() : null,
                  _s5 = !!_r15 && Boolean(Vi(_i27, _r15));

              var _a4 = _r15 || function (t) {
                if (!t) return null;
                var e = t.start.parent,
                    n = t.end.parent,
                    i = e.getPath(),
                    o = n.getPath();
                return i.length > o.length ? e : n;
              }(_o16);

              if (zi(_n35, "atTarget", _a4), !_s5) {
                if (Fi.apply(void 0, [_i27, "$text", _n35].concat(e))) return _n35["return"];
                zi(_n35, "bubbling", _a4);
              }

              for (; _a4;) {
                if (_a4.is("rootElement")) {
                  if (Fi.apply(void 0, [_i27, "$root", _n35].concat(e))) return _n35["return"];
                } else if (_a4.is("element") && Fi.apply(void 0, [_i27, _a4.name, _n35].concat(e))) return _n35["return"];

                if (Fi.apply(void 0, [_i27, _a4, _n35].concat(e))) return _n35["return"];
                zi(_n35, "bubbling", _a4 = _a4.parent);
              }

              return zi(_n35, "bubbling", this), Fi.apply(void 0, [_i27, "$document", _n35].concat(e)), _n35["return"];
            } catch (t) {
              rn["default"].rethrowUnexpectedError(t, this);
            }
          },
          _addEventListener: function _addEventListener(t, e, n) {
            var i = cn(n.context || "$document"),
                o = Ui(this);

            var _iterator47 = _createForOfIteratorHelper(i),
                _step47;

            try {
              for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {
                var _r16 = _step47.value;

                var _i28 = o.get(_r16);

                _i28 || (_i28 = Object.create(sn["default"]), o.set(_r16, _i28)), this.listenTo(_i28, t, e, n);
              }
            } catch (err) {
              _iterator47.e(err);
            } finally {
              _iterator47.f();
            }
          },
          _removeEventListener: function _removeEventListener(t, e) {
            var n = Ui(this);

            var _iterator48 = _createForOfIteratorHelper(n.values()),
                _step48;

            try {
              for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {
                var _i29 = _step48.value;
                this.stopListening(_i29, t, e);
              }
            } catch (err) {
              _iterator48.e(err);
            } finally {
              _iterator48.f();
            }
          }
        };

        function zi(t, e, n) {
          t instanceof ji && (t._eventPhase = e, t._currentTarget = n);
        }

        function Fi(t, e, n) {
          var o = "string" == typeof e ? t.get(e) : Vi(t, e);

          for (var _len17 = arguments.length, i = new Array(_len17 > 3 ? _len17 - 3 : 0), _key17 = 3; _key17 < _len17; _key17++) {
            i[_key17 - 3] = arguments[_key17];
          }

          return !!o && (o.fire.apply(o, [n].concat(i)), n.stop.called);
        }

        function Vi(t, e) {
          var _iterator49 = _createForOfIteratorHelper(t),
              _step49;

          try {
            for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {
              var _step49$value = _slicedToArray(_step49.value, 2),
                  _n36 = _step49$value[0],
                  _i30 = _step49$value[1];

              if ("function" == typeof _n36 && _n36(e)) return _i30;
            }
          } catch (err) {
            _iterator49.e(err);
          } finally {
            _iterator49.f();
          }

          return null;
        }

        function Ui(t) {
          return t[Bi] || (t[Bi] = new Map()), t[Bi];
        }

        var Hi = /*#__PURE__*/function () {
          function Hi(t) {
            _classCallCheck(this, Hi);

            this.selection = new Ni(), this.roots = new on["default"]({
              idProperty: "rootName"
            }), this.stylesProcessor = t, this.set("isReadOnly", !1), this.set("isFocused", !1), this.set("isComposing", !1), this._postFixers = new Set();
          }

          _createClass(Hi, [{
            key: "getRoot",
            value: function getRoot() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
              return this.roots.get(t);
            }
          }, {
            key: "registerPostFixer",
            value: function registerPostFixer(t) {
              this._postFixers.add(t);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.roots.map(function (t) {
                return t.destroy();
              }), this.stopListening();
            }
          }, {
            key: "_callPostFixers",
            value: function _callPostFixers(t) {
              var e = !1;

              do {
                var _iterator50 = _createForOfIteratorHelper(this._postFixers),
                    _step50;

                try {
                  for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {
                    var _n37 = _step50.value;
                    if (e = _n37(t)) break;
                  }
                } catch (err) {
                  _iterator50.e(err);
                } finally {
                  _iterator50.f();
                }
              } while (e);
            }
          }]);

          return Hi;
        }();

        Object(o["default"])(Hi, Li), Object(o["default"])(Hi, i["default"]);
        var qi = 10;

        var Wi = /*#__PURE__*/function (_vi2) {
          _inherits(Wi, _vi2);

          var _super69 = _createSuper(Wi);

          function Wi(t, e, n, i) {
            var _this90;

            _classCallCheck(this, Wi);

            _this90 = _super69.call(this, t, e, n, i), _this90.getFillerOffset = $i, _this90._priority = qi, _this90._id = null, _this90._clonesGroup = null;
            return _this90;
          }

          _createClass(Wi, [{
            key: "priority",
            get: function get() {
              return this._priority;
            }
          }, {
            key: "id",
            get: function get() {
              return this._id;
            }
          }, {
            key: "getElementsWithSameId",
            value: function getElementsWithSameId() {
              if (null === this.id) throw new rn["default"]("attribute-element-get-elements-with-same-id-no-id", this);
              return new Set(this._clonesGroup);
            }
          }, {
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("attributeElement" === t || "view:attributeElement" === t || "element" === t || "view:element" === t) : "attributeElement" === t || "view:attributeElement" === t || "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "isSimilar",
            value: function isSimilar(t) {
              return null !== this.id || null !== t.id ? this.id === t.id : _get3(_getPrototypeOf(Wi.prototype), "isSimilar", this).call(this, t) && this.priority == t.priority;
            }
          }, {
            key: "_clone",
            value: function _clone(t) {
              var e = _get3(_getPrototypeOf(Wi.prototype), "_clone", this).call(this, t);

              return e._priority = this._priority, e._id = this._id, e;
            }
          }]);

          return Wi;
        }(vi);

        function $i() {
          if (Yi(this)) return null;
          var t = this.parent;

          for (; t && t.is("attributeElement");) {
            if (Yi(t) > 1) return null;
            t = t.parent;
          }

          return !t || Yi(t) > 1 ? null : this.childCount;
        }

        function Yi(t) {
          return Array.from(t.getChildren()).filter(function (t) {
            return !t.is("uiElement");
          }).length;
        }

        Wi.DEFAULT_PRIORITY = qi;

        var Ji = /*#__PURE__*/function (_vi3) {
          _inherits(Ji, _vi3);

          var _super70 = _createSuper(Ji);

          function Ji(t, e, n, i) {
            var _this91;

            _classCallCheck(this, Ji);

            _this91 = _super70.call(this, t, e, n, i), _this91._isAllowedInsideAttributeElement = !0, _this91.getFillerOffset = Gi;
            return _this91;
          }

          _createClass(Ji, [{
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("emptyElement" === t || "view:emptyElement" === t || "element" === t || "view:element" === t) : "emptyElement" === t || "view:emptyElement" === t || "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "_insertChild",
            value: function _insertChild(t, e) {
              if (e && (e instanceof _n || Array.from(e).length > 0)) throw new rn["default"]("view-emptyelement-cannot-add", [this, e]);
            }
          }]);

          return Ji;
        }(vi);

        function Gi() {
          return null;
        }

        var Ki = navigator.userAgent.toLowerCase();
        var Qi = {
          isMac: function (t) {
            return t.indexOf("macintosh") > -1;
          }(Ki),
          isGecko: function (t) {
            return !!t.match(/gecko\/\d+/);
          }(Ki),
          isSafari: function (t) {
            return t.indexOf(" applewebkit/") > -1 && -1 === t.indexOf("chrome");
          }(Ki),
          isAndroid: function (t) {
            return t.indexOf("android") > -1;
          }(Ki),
          isBlink: function (t) {
            return t.indexOf("chrome/") > -1 && t.indexOf("edge/") < 0;
          }(Ki),
          features: {
            isRegExpUnicodePropertySupported: function () {
              var t = !1;

              try {
                t = 0 === "ć".search(new RegExp("[\\p{L}]", "u"));
              } catch (t) {}

              return t;
            }()
          }
        };

        var Xi = {
          ctrl: "⌃",
          cmd: "⌘",
          alt: "⌥",
          shift: "⇧"
        },
            Zi = {
          ctrl: "Ctrl+",
          alt: "Alt+",
          shift: "Shift+"
        },
            to = function () {
          var t = {
            arrowleft: 37,
            arrowup: 38,
            arrowright: 39,
            arrowdown: 40,
            backspace: 8,
            "delete": 46,
            enter: 13,
            space: 32,
            esc: 27,
            tab: 9,
            ctrl: 1114112,
            shift: 2228224,
            alt: 4456448,
            cmd: 8912896
          };

          for (var _e43 = 65; _e43 <= 90; _e43++) {
            var _n38 = String.fromCharCode(_e43);

            t[_n38.toLowerCase()] = _e43;
          }

          for (var _e44 = 48; _e44 <= 57; _e44++) {
            t[_e44 - 48] = _e44;
          }

          for (var _e45 = 112; _e45 <= 123; _e45++) {
            t["f" + (_e45 - 111)] = _e45;
          }

          var _iterator51 = _createForOfIteratorHelper("`-=[];',./\\"),
              _step51;

          try {
            for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {
              var _e46 = _step51.value;
              t[_e46] = _e46.charCodeAt(0);
            }
          } catch (err) {
            _iterator51.e(err);
          } finally {
            _iterator51.f();
          }

          return t;
        }(),
            eo = Object.fromEntries(Object.entries(to).map(function (_ref16) {
          var _ref17 = _slicedToArray(_ref16, 2),
              t = _ref17[0],
              e = _ref17[1];

          return [e, t.charAt(0).toUpperCase() + t.slice(1)];
        }));

        function no(t) {
          var e;

          if ("string" == typeof t) {
            if (!(e = to[t.toLowerCase()])) throw new rn["default"]("keyboard-unknown-key", null, {
              key: t
            });
          } else e = t.keyCode + (t.altKey ? to.alt : 0) + (t.ctrlKey ? to.ctrl : 0) + (t.shiftKey ? to.shift : 0) + (t.metaKey ? to.cmd : 0);

          return e;
        }

        function io(t) {
          return "string" == typeof t && (t = function (t) {
            return t.split("+").map(function (t) {
              return t.trim();
            });
          }(t)), t.map(function (t) {
            return "string" == typeof t ? function (t) {
              if (t.endsWith("!")) return no(t.slice(0, -1));
              var e = no(t);
              return Qi.isMac && e == to.ctrl ? to.cmd : e;
            }(t) : t;
          }).reduce(function (t, e) {
            return e + t;
          }, 0);
        }

        function oo(t) {
          var e = io(t);
          return Object.entries(Qi.isMac ? Xi : Zi).reduce(function (t, _ref18) {
            var _ref19 = _slicedToArray(_ref18, 2),
                n = _ref19[0],
                i = _ref19[1];

            return 0 != (e & to[n]) && (e &= ~to[n], t += i), t;
          }, "") + (e ? eo[e] : "");
        }

        function ro(t, e) {
          var n = "ltr" === e;

          switch (t) {
            case to.arrowleft:
              return n ? "left" : "right";

            case to.arrowright:
              return n ? "right" : "left";

            case to.arrowup:
              return "up";

            case to.arrowdown:
              return "down";
          }
        }

        var so = /*#__PURE__*/function (_vi4) {
          _inherits(so, _vi4);

          var _super71 = _createSuper(so);

          function so(t, e, n, i) {
            var _this92;

            _classCallCheck(this, so);

            _this92 = _super71.call(this, t, e, n, i), _this92._isAllowedInsideAttributeElement = !0, _this92.getFillerOffset = co;
            return _this92;
          }

          _createClass(so, [{
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("uiElement" === t || "view:uiElement" === t || "element" === t || "view:element" === t) : "uiElement" === t || "view:uiElement" === t || "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "_insertChild",
            value: function _insertChild(t, e) {
              if (e && (e instanceof _n || Array.from(e).length > 0)) throw new rn["default"]("view-uielement-cannot-add", this);
            }
          }, {
            key: "render",
            value: function render(t) {
              return this.toDomElement(t);
            }
          }, {
            key: "toDomElement",
            value: function toDomElement(t) {
              var e = t.createElement(this.name);

              var _iterator52 = _createForOfIteratorHelper(this.getAttributeKeys()),
                  _step52;

              try {
                for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {
                  var _t35 = _step52.value;
                  e.setAttribute(_t35, this.getAttribute(_t35));
                }
              } catch (err) {
                _iterator52.e(err);
              } finally {
                _iterator52.f();
              }

              return e;
            }
          }]);

          return so;
        }(vi);

        function ao(t) {
          t.document.on("arrowKey", function (e, n) {
            return function (t, e, n) {
              if (e.keyCode == to.arrowright) {
                var _t36 = e.domTarget.ownerDocument.defaultView.getSelection(),
                    _i31 = 1 == _t36.rangeCount && _t36.getRangeAt(0).collapsed;

                if (_i31 || e.shiftKey) {
                  var _e47 = _t36.focusNode,
                      _o17 = _t36.focusOffset,
                      _r17 = n.domPositionToView(_e47, _o17);

                  if (null === _r17) return;

                  var _s6 = !1;

                  var _a5 = _r17.getLastMatchingPosition(function (t) {
                    return t.item.is("uiElement") && (_s6 = !0), !(!t.item.is("uiElement") && !t.item.is("attributeElement"));
                  });

                  if (_s6) {
                    var _e48 = n.viewPositionToDom(_a5);

                    _i31 ? _t36.collapse(_e48.parent, _e48.offset) : _t36.extend(_e48.parent, _e48.offset);
                  }
                }
              }
            }(0, n, t.domConverter);
          }, {
            priority: "low"
          });
        }

        function co() {
          return null;
        }

        var lo = /*#__PURE__*/function (_vi5) {
          _inherits(lo, _vi5);

          var _super72 = _createSuper(lo);

          function lo(t, e, n, i) {
            var _this93;

            _classCallCheck(this, lo);

            _this93 = _super72.call(this, t, e, n, i), _this93._isAllowedInsideAttributeElement = !0, _this93.getFillerOffset = uo;
            return _this93;
          }

          _createClass(lo, [{
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("rawElement" === t || "view:rawElement" === t || "element" === t || "view:element" === t) : "rawElement" === t || "view:rawElement" === t || t === this.name || t === "view:" + this.name || "element" === t || "view:element" === t || "node" === t || "view:node" === t;
            }
          }, {
            key: "_insertChild",
            value: function _insertChild(t, e) {
              if (e && (e instanceof _n || Array.from(e).length > 0)) throw new rn["default"]("view-rawelement-cannot-add", [this, e]);
            }
          }]);

          return lo;
        }(vi);

        function uo() {
          return null;
        }

        var ho = /*#__PURE__*/function (_Symbol$iterator5) {
          function ho(t, e) {
            _classCallCheck(this, ho);

            this.document = t, this._children = [], e && this._insertChild(0, e);
          }

          _createClass(ho, [{
            key: _Symbol$iterator5,
            value: function value() {
              return this._children[Symbol.iterator]();
            }
          }, {
            key: "childCount",
            get: function get() {
              return this._children.length;
            }
          }, {
            key: "isEmpty",
            get: function get() {
              return 0 === this.childCount;
            }
          }, {
            key: "root",
            get: function get() {
              return this;
            }
          }, {
            key: "parent",
            get: function get() {
              return null;
            }
          }, {
            key: "is",
            value: function is(t) {
              return "documentFragment" === t || "view:documentFragment" === t;
            }
          }, {
            key: "_appendChild",
            value: function _appendChild(t) {
              return this._insertChild(this.childCount, t);
            }
          }, {
            key: "getChild",
            value: function getChild(t) {
              return this._children[t];
            }
          }, {
            key: "getChildIndex",
            value: function getChildIndex(t) {
              return this._children.indexOf(t);
            }
          }, {
            key: "getChildren",
            value: function getChildren() {
              return this._children[Symbol.iterator]();
            }
          }, {
            key: "_insertChild",
            value: function _insertChild(t, e) {
              this._fireChange("children", this);

              var n = 0;

              var i = function (t, e) {
                if ("string" == typeof e) return [new wn(t, e)];
                Object(yn.a)(e) || (e = [e]);
                return Array.from(e).map(function (e) {
                  return "string" == typeof e ? new wn(t, e) : e instanceof vn ? new wn(t, e.data) : e;
                });
              }(this.document, e);

              var _iterator53 = _createForOfIteratorHelper(i),
                  _step53;

              try {
                for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {
                  var _e49 = _step53.value;
                  null !== _e49.parent && _e49._remove(), _e49.parent = this, this._children.splice(t, 0, _e49), t++, n++;
                }
              } catch (err) {
                _iterator53.e(err);
              } finally {
                _iterator53.f();
              }

              return n;
            }
          }, {
            key: "_removeChildren",
            value: function _removeChildren(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

              this._fireChange("children", this);

              for (var _n39 = t; _n39 < t + e; _n39++) {
                this._children[_n39].parent = null;
              }

              return this._children.splice(t, e);
            }
          }, {
            key: "_fireChange",
            value: function _fireChange(t, e) {
              this.fire("change:" + t, e);
            }
          }]);

          return ho;
        }(Symbol.iterator);

        Object(o["default"])(ho, sn["default"]);

        var fo = /*#__PURE__*/function () {
          function fo(t) {
            _classCallCheck(this, fo);

            this.document = t, this._cloneGroups = new Map();
          }

          _createClass(fo, [{
            key: "setSelection",
            value: function setSelection(t, e, n) {
              this.document.selection._setTo(t, e, n);
            }
          }, {
            key: "setSelectionFocus",
            value: function setSelectionFocus(t, e) {
              this.document.selection._setFocus(t, e);
            }
          }, {
            key: "createDocumentFragment",
            value: function createDocumentFragment(t) {
              return new ho(this.document, t);
            }
          }, {
            key: "createText",
            value: function createText(t) {
              return new wn(this.document, t);
            }
          }, {
            key: "createAttributeElement",
            value: function createAttributeElement(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var i = new Wi(this.document, t, e);
              return "number" == typeof n.priority && (i._priority = n.priority), n.id && (i._id = n.id), i;
            }
          }, {
            key: "createContainerElement",
            value: function createContainerElement(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var i = new xi(this.document, t, e);
              return void 0 !== n.isAllowedInsideAttributeElement && (i._isAllowedInsideAttributeElement = n.isAllowedInsideAttributeElement), i;
            }
          }, {
            key: "createEditableElement",
            value: function createEditableElement(t, e) {
              var n = new Ti(this.document, t, e);
              return n._document = this.document, n;
            }
          }, {
            key: "createEmptyElement",
            value: function createEmptyElement(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var i = new Ji(this.document, t, e);
              return void 0 !== n.isAllowedInsideAttributeElement && (i._isAllowedInsideAttributeElement = n.isAllowedInsideAttributeElement), i;
            }
          }, {
            key: "createUIElement",
            value: function createUIElement(t, e, n) {
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
              var o = new so(this.document, t, e);
              return n && (o.render = n), void 0 !== i.isAllowedInsideAttributeElement && (o._isAllowedInsideAttributeElement = i.isAllowedInsideAttributeElement), o;
            }
          }, {
            key: "createRawElement",
            value: function createRawElement(t, e, n) {
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
              var o = new lo(this.document, t, e);
              return o.render = n || function () {}, void 0 !== i.isAllowedInsideAttributeElement && (o._isAllowedInsideAttributeElement = i.isAllowedInsideAttributeElement), o;
            }
          }, {
            key: "setAttribute",
            value: function setAttribute(t, e, n) {
              n._setAttribute(t, e);
            }
          }, {
            key: "removeAttribute",
            value: function removeAttribute(t, e) {
              e._removeAttribute(t);
            }
          }, {
            key: "addClass",
            value: function addClass(t, e) {
              e._addClass(t);
            }
          }, {
            key: "removeClass",
            value: function removeClass(t, e) {
              e._removeClass(t);
            }
          }, {
            key: "setStyle",
            value: function setStyle(t, e, n) {
              _(t) && void 0 === n && (n = e), n._setStyle(t, e);
            }
          }, {
            key: "removeStyle",
            value: function removeStyle(t, e) {
              e._removeStyle(t);
            }
          }, {
            key: "setCustomProperty",
            value: function setCustomProperty(t, e, n) {
              n._setCustomProperty(t, e);
            }
          }, {
            key: "removeCustomProperty",
            value: function removeCustomProperty(t, e) {
              return e._removeCustomProperty(t);
            }
          }, {
            key: "breakAttributes",
            value: function breakAttributes(t) {
              return t instanceof Ii ? this._breakAttributes(t) : this._breakAttributesRange(t);
            }
          }, {
            key: "breakContainer",
            value: function breakContainer(t) {
              var e = t.parent;
              if (!e.is("containerElement")) throw new rn["default"]("view-writer-break-non-container-element", this.document);
              if (!e.parent) throw new rn["default"]("view-writer-break-root", this.document);
              if (t.isAtStart) return Ii._createBefore(e);

              if (!t.isAtEnd) {
                var _n40 = e._clone(!1);

                this.insert(Ii._createAfter(e), _n40);

                var _i32 = new Oi(t, Ii._createAt(e, "end")),
                    _o18 = new Ii(_n40, 0);

                this.move(_i32, _o18);
              }

              return Ii._createAfter(e);
            }
          }, {
            key: "mergeAttributes",
            value: function mergeAttributes(t) {
              var e = t.offset,
                  n = t.parent;
              if (n.is("$text")) return t;

              if (n.is("attributeElement") && 0 === n.childCount) {
                var _t37 = n.parent,
                    _e50 = n.index;
                return n._remove(), this._removeFromClonedElementsGroup(n), this.mergeAttributes(new Ii(_t37, _e50));
              }

              var i = n.getChild(e - 1),
                  o = n.getChild(e);
              if (!i || !o) return t;
              if (i.is("$text") && o.is("$text")) return ko(i, o);

              if (i.is("attributeElement") && o.is("attributeElement") && i.isSimilar(o)) {
                var _t38 = i.childCount;
                return i._appendChild(o.getChildren()), o._remove(), this._removeFromClonedElementsGroup(o), this.mergeAttributes(new Ii(i, _t38));
              }

              return t;
            }
          }, {
            key: "mergeContainers",
            value: function mergeContainers(t) {
              var e = t.nodeBefore,
                  n = t.nodeAfter;
              if (!(e && n && e.is("containerElement") && n.is("containerElement"))) throw new rn["default"]("view-writer-merge-containers-invalid-position", this.document);
              var i = e.getChild(e.childCount - 1),
                  o = i instanceof wn ? Ii._createAt(i, "end") : Ii._createAt(e, "end");
              return this.move(Oi._createIn(n), Ii._createAt(e, "end")), this.remove(Oi._createOn(n)), o;
            }
          }, {
            key: "insert",
            value: function insert(t, e) {
              (function t(e, n) {
                var _iterator54 = _createForOfIteratorHelper(e),
                    _step54;

                try {
                  var _loop2 = function _loop2() {
                    var i = _step54.value;
                    if (!_o.some(function (t) {
                      return i instanceof t;
                    })) throw new rn["default"]("view-writer-insert-invalid-node-type", n);
                    i.is("$text") || t(i.getChildren(), n);
                  };

                  for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {
                    _loop2();
                  }
                } catch (err) {
                  _iterator54.e(err);
                } finally {
                  _iterator54.f();
                }
              })(e = Object(yn.a)(e) ? _toConsumableArray(e) : [e], this.document);

              var n = e.reduce(function (t, e) {
                var n = t[t.length - 1],
                    i = !(e.is("uiElement") && e.isAllowedInsideAttributeElement);
                return n && n.breakAttributes == i ? n.nodes.push(e) : t.push({
                  breakAttributes: i,
                  nodes: [e]
                }), t;
              }, []);
              var i = null,
                  o = t;

              var _iterator55 = _createForOfIteratorHelper(n),
                  _step55;

              try {
                for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {
                  var _step55$value = _step55.value,
                      _t39 = _step55$value.nodes,
                      _e51 = _step55$value.breakAttributes;

                  var _n41 = this._insertNodes(o, _t39, _e51);

                  i || (i = _n41.start), o = _n41.end;
                }
              } catch (err) {
                _iterator55.e(err);
              } finally {
                _iterator55.f();
              }

              return i ? new Oi(i, o) : new Oi(t);
            }
          }, {
            key: "remove",
            value: function remove(t) {
              var e = t instanceof Oi ? t : Oi._createOn(t);
              if (vo(e, this.document), e.isCollapsed) return new ho(this.document);

              var _this$_breakAttribute = this._breakAttributesRange(e, !0),
                  n = _this$_breakAttribute.start,
                  i = _this$_breakAttribute.end,
                  o = n.parent,
                  r = i.offset - n.offset,
                  s = o._removeChildren(n.offset, r);

              var _iterator56 = _createForOfIteratorHelper(s),
                  _step56;

              try {
                for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {
                  var _t40 = _step56.value;

                  this._removeFromClonedElementsGroup(_t40);
                }
              } catch (err) {
                _iterator56.e(err);
              } finally {
                _iterator56.f();
              }

              var a = this.mergeAttributes(n);
              return e.start = a, e.end = a.clone(), new ho(this.document, s);
            }
          }, {
            key: "clear",
            value: function clear(t, e) {
              vo(t, this.document);
              var n = t.getWalker({
                direction: "backward",
                ignoreElementEnd: !0
              });

              var _iterator57 = _createForOfIteratorHelper(n),
                  _step57;

              try {
                for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {
                  var _i33 = _step57.value;
                  var _n42 = _i33.item;

                  var _o19 = void 0;

                  if (_n42.is("element") && e.isSimilar(_n42)) _o19 = Oi._createOn(_n42);else if (!_i33.nextPosition.isAfter(t.start) && _n42.is("$textProxy")) {
                    var _t41 = _n42.getAncestors().find(function (t) {
                      return t.is("element") && e.isSimilar(t);
                    });

                    _t41 && (_o19 = Oi._createIn(_t41));
                  }
                  _o19 && (_o19.end.isAfter(t.end) && (_o19.end = t.end), _o19.start.isBefore(t.start) && (_o19.start = t.start), this.remove(_o19));
                }
              } catch (err) {
                _iterator57.e(err);
              } finally {
                _iterator57.f();
              }
            }
          }, {
            key: "move",
            value: function move(t, e) {
              var n;

              if (e.isAfter(t.end)) {
                var _i34 = (e = this._breakAttributes(e, !0)).parent,
                    _o20 = _i34.childCount;

                t = this._breakAttributesRange(t, !0), n = this.remove(t), e.offset += _i34.childCount - _o20;
              } else n = this.remove(t);

              return this.insert(e, n);
            }
          }, {
            key: "wrap",
            value: function wrap(t, e) {
              if (!(e instanceof Wi)) throw new rn["default"]("view-writer-wrap-invalid-attribute", this.document);

              if (vo(t, this.document), t.isCollapsed) {
                var _n43 = t.start;
                _n43.parent.is("element") && !function (t) {
                  return Array.from(t.getChildren()).some(function (t) {
                    return !t.is("uiElement");
                  });
                }(_n43.parent) && (_n43 = _n43.getLastMatchingPosition(function (t) {
                  return t.item.is("uiElement");
                })), _n43 = this._wrapPosition(_n43, e);
                var _i35 = this.document.selection;
                return _i35.isCollapsed && _i35.getFirstPosition().isEqual(t.start) && this.setSelection(_n43), new Oi(_n43);
              }

              return this._wrapRange(t, e);
            }
          }, {
            key: "unwrap",
            value: function unwrap(t, e) {
              if (!(e instanceof Wi)) throw new rn["default"]("view-writer-unwrap-invalid-attribute", this.document);
              if (vo(t, this.document), t.isCollapsed) return t;

              var _this$_breakAttribute2 = this._breakAttributesRange(t, !0),
                  n = _this$_breakAttribute2.start,
                  i = _this$_breakAttribute2.end,
                  o = n.parent,
                  r = this._unwrapChildren(o, n.offset, i.offset, e),
                  s = this.mergeAttributes(r.start);

              s.isEqual(r.start) || r.end.offset--;
              var a = this.mergeAttributes(r.end);
              return new Oi(s, a);
            }
          }, {
            key: "rename",
            value: function rename(t, e) {
              var n = new xi(this.document, t, e.getAttributes());
              return this.insert(Ii._createAfter(e), n), this.move(Oi._createIn(e), Ii._createAt(n, 0)), this.remove(Oi._createOn(e)), n;
            }
          }, {
            key: "clearClonedElementsGroup",
            value: function clearClonedElementsGroup(t) {
              this._cloneGroups["delete"](t);
            }
          }, {
            key: "createPositionAt",
            value: function createPositionAt(t, e) {
              return Ii._createAt(t, e);
            }
          }, {
            key: "createPositionAfter",
            value: function createPositionAfter(t) {
              return Ii._createAfter(t);
            }
          }, {
            key: "createPositionBefore",
            value: function createPositionBefore(t) {
              return Ii._createBefore(t);
            }
          }, {
            key: "createRange",
            value: function createRange(t, e) {
              return new Oi(t, e);
            }
          }, {
            key: "createRangeOn",
            value: function createRangeOn(t) {
              return Oi._createOn(t);
            }
          }, {
            key: "createRangeIn",
            value: function createRangeIn(t) {
              return Oi._createIn(t);
            }
          }, {
            key: "createSelection",
            value: function createSelection(t, e, n) {
              return new Pi(t, e, n);
            }
          }, {
            key: "_insertNodes",
            value: function _insertNodes(t, e, n) {
              var i, o;
              if (!(i = n ? go(t) : t.parent.is("$text") ? t.parent.parent : t.parent)) throw new rn["default"]("view-writer-invalid-position-container", this.document);
              o = n ? this._breakAttributes(t, !0) : t.parent.is("$text") ? bo(t) : t;

              var r = i._insertChild(o.offset, e);

              var _iterator58 = _createForOfIteratorHelper(e),
                  _step58;

              try {
                for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {
                  var _t42 = _step58.value;

                  this._addToClonedElementsGroup(_t42);
                }
              } catch (err) {
                _iterator58.e(err);
              } finally {
                _iterator58.f();
              }

              var s = o.getShiftedBy(r),
                  a = this.mergeAttributes(o);
              a.isEqual(o) || s.offset--;
              var c = this.mergeAttributes(s);
              return new Oi(a, c);
            }
          }, {
            key: "_wrapChildren",
            value: function _wrapChildren(t, e, n, i) {
              var o = e;
              var r = [];

              for (; o < n;) {
                var _e52 = t.getChild(o),
                    _n44 = _e52.is("$text"),
                    _s7 = _e52.is("attributeElement"),
                    _a6 = _e52.isAllowedInsideAttributeElement;

                if (_s7 && this._wrapAttributeElement(i, _e52)) r.push(new Ii(t, o));else if (_n44 || _a6 || _s7 && mo(i, _e52)) {
                  var _n45 = i._clone();

                  _e52._remove(), _n45._appendChild(_e52), t._insertChild(o, _n45), this._addToClonedElementsGroup(_n45), r.push(new Ii(t, o));
                } else _s7 && this._wrapChildren(_e52, 0, _e52.childCount, i);
                o++;
              }

              var s = 0;

              for (var _i36 = 0, _r18 = r; _i36 < _r18.length; _i36++) {
                var _t43 = _r18[_i36];
                if (_t43.offset -= s, _t43.offset == e) continue;
                this.mergeAttributes(_t43).isEqual(_t43) || (s++, n--);
              }

              return Oi._createFromParentsAndOffsets(t, e, t, n);
            }
          }, {
            key: "_unwrapChildren",
            value: function _unwrapChildren(t, e, n, i) {
              var o = e;
              var r = [];

              for (; o < n;) {
                var _e53 = t.getChild(o);

                if (_e53.is("attributeElement")) {
                  if (_e53.isSimilar(i)) {
                    var _i37 = _e53.getChildren(),
                        _s8 = _e53.childCount;

                    _e53._remove(), t._insertChild(o, _i37), this._removeFromClonedElementsGroup(_e53), r.push(new Ii(t, o), new Ii(t, o + _s8)), o += _s8, n += _s8 - 1;
                  } else this._unwrapAttributeElement(i, _e53) ? (r.push(new Ii(t, o), new Ii(t, o + 1)), o++) : (this._unwrapChildren(_e53, 0, _e53.childCount, i), o++);
                } else o++;
              }

              var s = 0;

              for (var _i38 = 0, _r19 = r; _i38 < _r19.length; _i38++) {
                var _t44 = _r19[_i38];
                if (_t44.offset -= s, _t44.offset == e || _t44.offset == n) continue;
                this.mergeAttributes(_t44).isEqual(_t44) || (s++, n--);
              }

              return Oi._createFromParentsAndOffsets(t, e, t, n);
            }
          }, {
            key: "_wrapRange",
            value: function _wrapRange(t, e) {
              var _this$_breakAttribute3 = this._breakAttributesRange(t, !0),
                  n = _this$_breakAttribute3.start,
                  i = _this$_breakAttribute3.end,
                  o = n.parent,
                  r = this._wrapChildren(o, n.offset, i.offset, e),
                  s = this.mergeAttributes(r.start);

              s.isEqual(r.start) || r.end.offset--;
              var a = this.mergeAttributes(r.end);
              return new Oi(s, a);
            }
          }, {
            key: "_wrapPosition",
            value: function _wrapPosition(t, e) {
              if (e.isSimilar(t.parent)) return po(t.clone());
              t.parent.is("$text") && (t = bo(t));
              var n = this.createAttributeElement();
              n._priority = Number.POSITIVE_INFINITY, n.isSimilar = function () {
                return !1;
              }, t.parent._insertChild(t.offset, n);
              var i = new Oi(t, t.getShiftedBy(1));
              this.wrap(i, e);
              var o = new Ii(n.parent, n.index);

              n._remove();

              var r = o.nodeBefore,
                  s = o.nodeAfter;
              return r instanceof wn && s instanceof wn ? ko(r, s) : po(o);
            }
          }, {
            key: "_wrapAttributeElement",
            value: function _wrapAttributeElement(t, e) {
              if (!yo(t, e)) return !1;
              if (t.name !== e.name || t.priority !== e.priority) return !1;

              var _iterator59 = _createForOfIteratorHelper(t.getAttributeKeys()),
                  _step59;

              try {
                for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {
                  var _n46 = _step59.value;
                  if ("class" !== _n46 && "style" !== _n46 && e.hasAttribute(_n46) && e.getAttribute(_n46) !== t.getAttribute(_n46)) return !1;
                }
              } catch (err) {
                _iterator59.e(err);
              } finally {
                _iterator59.f();
              }

              var _iterator60 = _createForOfIteratorHelper(t.getStyleNames()),
                  _step60;

              try {
                for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {
                  var _n47 = _step60.value;
                  if (e.hasStyle(_n47) && e.getStyle(_n47) !== t.getStyle(_n47)) return !1;
                }
              } catch (err) {
                _iterator60.e(err);
              } finally {
                _iterator60.f();
              }

              var _iterator61 = _createForOfIteratorHelper(t.getAttributeKeys()),
                  _step61;

              try {
                for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {
                  var _n48 = _step61.value;
                  "class" !== _n48 && "style" !== _n48 && (e.hasAttribute(_n48) || this.setAttribute(_n48, t.getAttribute(_n48), e));
                }
              } catch (err) {
                _iterator61.e(err);
              } finally {
                _iterator61.f();
              }

              var _iterator62 = _createForOfIteratorHelper(t.getStyleNames()),
                  _step62;

              try {
                for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {
                  var _n49 = _step62.value;
                  e.hasStyle(_n49) || this.setStyle(_n49, t.getStyle(_n49), e);
                }
              } catch (err) {
                _iterator62.e(err);
              } finally {
                _iterator62.f();
              }

              var _iterator63 = _createForOfIteratorHelper(t.getClassNames()),
                  _step63;

              try {
                for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {
                  var _n50 = _step63.value;
                  e.hasClass(_n50) || this.addClass(_n50, e);
                }
              } catch (err) {
                _iterator63.e(err);
              } finally {
                _iterator63.f();
              }

              return !0;
            }
          }, {
            key: "_unwrapAttributeElement",
            value: function _unwrapAttributeElement(t, e) {
              if (!yo(t, e)) return !1;
              if (t.name !== e.name || t.priority !== e.priority) return !1;

              var _iterator64 = _createForOfIteratorHelper(t.getAttributeKeys()),
                  _step64;

              try {
                for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {
                  var _n51 = _step64.value;
                  if ("class" !== _n51 && "style" !== _n51 && (!e.hasAttribute(_n51) || e.getAttribute(_n51) !== t.getAttribute(_n51))) return !1;
                }
              } catch (err) {
                _iterator64.e(err);
              } finally {
                _iterator64.f();
              }

              if (!e.hasClass.apply(e, _toConsumableArray(t.getClassNames()))) return !1;

              var _iterator65 = _createForOfIteratorHelper(t.getStyleNames()),
                  _step65;

              try {
                for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {
                  var _n52 = _step65.value;
                  if (!e.hasStyle(_n52) || e.getStyle(_n52) !== t.getStyle(_n52)) return !1;
                }
              } catch (err) {
                _iterator65.e(err);
              } finally {
                _iterator65.f();
              }

              var _iterator66 = _createForOfIteratorHelper(t.getAttributeKeys()),
                  _step66;

              try {
                for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {
                  var _n53 = _step66.value;
                  "class" !== _n53 && "style" !== _n53 && this.removeAttribute(_n53, e);
                }
              } catch (err) {
                _iterator66.e(err);
              } finally {
                _iterator66.f();
              }

              return this.removeClass(Array.from(t.getClassNames()), e), this.removeStyle(Array.from(t.getStyleNames()), e), !0;
            }
          }, {
            key: "_breakAttributesRange",
            value: function _breakAttributesRange(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              var n = t.start,
                  i = t.end;

              if (vo(t, this.document), t.isCollapsed) {
                var _n54 = this._breakAttributes(t.start, e);

                return new Oi(_n54, _n54);
              }

              var o = this._breakAttributes(i, e),
                  r = o.parent.childCount,
                  s = this._breakAttributes(n, e);

              return o.offset += o.parent.childCount - r, new Oi(s, o);
            }
          }, {
            key: "_breakAttributes",
            value: function _breakAttributes(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              var n = t.offset,
                  i = t.parent;
              if (t.parent.is("emptyElement")) throw new rn["default"]("view-writer-cannot-break-empty-element", this.document);
              if (t.parent.is("uiElement")) throw new rn["default"]("view-writer-cannot-break-ui-element", this.document);
              if (t.parent.is("rawElement")) throw new rn["default"]("view-writer-cannot-break-raw-element", this.document);
              if (!e && i.is("$text") && wo(i.parent)) return t.clone();
              if (wo(i)) return t.clone();
              if (i.is("$text")) return this._breakAttributes(bo(t), e);

              if (n == i.childCount) {
                var _t45 = new Ii(i.parent, i.index + 1);

                return this._breakAttributes(_t45, e);
              }

              if (0 === n) {
                var _t46 = new Ii(i.parent, i.index);

                return this._breakAttributes(_t46, e);
              }

              {
                var _t47 = i.index + 1,
                    _o21 = i._clone();

                i.parent._insertChild(_t47, _o21), this._addToClonedElementsGroup(_o21);

                var _r20 = i.childCount - n,
                    _s9 = i._removeChildren(n, _r20);

                _o21._appendChild(_s9);

                var _a7 = new Ii(i.parent, _t47);

                return this._breakAttributes(_a7, e);
              }
            }
          }, {
            key: "_addToClonedElementsGroup",
            value: function _addToClonedElementsGroup(t) {
              if (!t.root.is("rootElement")) return;

              if (t.is("element")) {
                var _iterator67 = _createForOfIteratorHelper(t.getChildren()),
                    _step67;

                try {
                  for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {
                    var _e54 = _step67.value;

                    this._addToClonedElementsGroup(_e54);
                  }
                } catch (err) {
                  _iterator67.e(err);
                } finally {
                  _iterator67.f();
                }
              }

              var e = t.id;
              if (!e) return;

              var n = this._cloneGroups.get(e);

              n || (n = new Set(), this._cloneGroups.set(e, n)), n.add(t), t._clonesGroup = n;
            }
          }, {
            key: "_removeFromClonedElementsGroup",
            value: function _removeFromClonedElementsGroup(t) {
              if (t.is("element")) {
                var _iterator68 = _createForOfIteratorHelper(t.getChildren()),
                    _step68;

                try {
                  for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {
                    var _e55 = _step68.value;

                    this._removeFromClonedElementsGroup(_e55);
                  }
                } catch (err) {
                  _iterator68.e(err);
                } finally {
                  _iterator68.f();
                }
              }

              var e = t.id;
              if (!e) return;

              var n = this._cloneGroups.get(e);

              n && n["delete"](t);
            }
          }]);

          return fo;
        }();

        function go(t) {
          var e = t.parent;

          for (; !wo(e);) {
            if (!e) return;
            e = e.parent;
          }

          return e;
        }

        function mo(t, e) {
          return t.priority < e.priority || !(t.priority > e.priority) && t.getIdentity() < e.getIdentity();
        }

        function po(t) {
          var e = t.nodeBefore;
          if (e && e.is("$text")) return new Ii(e, e.data.length);
          var n = t.nodeAfter;
          return n && n.is("$text") ? new Ii(n, 0) : t;
        }

        function bo(t) {
          if (t.offset == t.parent.data.length) return new Ii(t.parent.parent, t.parent.index + 1);
          if (0 === t.offset) return new Ii(t.parent.parent, t.parent.index);
          var e = t.parent.data.slice(t.offset);
          return t.parent._data = t.parent.data.slice(0, t.offset), t.parent.parent._insertChild(t.parent.index + 1, new wn(t.root.document, e)), new Ii(t.parent.parent, t.parent.index + 1);
        }

        function ko(t, e) {
          var n = t.data.length;
          return t._data += e.data, e._remove(), new Ii(t, n);
        }

        var _o = [wn, Wi, xi, Ji, lo, so];

        function wo(t) {
          return t && (t.is("containerElement") || t.is("documentFragment"));
        }

        function vo(t, e) {
          var n = go(t.start),
              i = go(t.end);
          if (!n || !i || n !== i) throw new rn["default"]("view-writer-invalid-range-container", e);
        }

        function yo(t, e) {
          return null === t.id && null === e.id;
        }

        function xo(t) {
          return "[object Text]" == Object.prototype.toString.call(t);
        }

        var Co = function Co(t) {
          return t.createTextNode(" ");
        },
            To = function To(t) {
          var e = t.createElement("span");
          return e.dataset.ckeFiller = !0, e.innerHTML = " ", e;
        },
            Ao = function Ao(t) {
          var e = t.createElement("br");
          return e.dataset.ckeFiller = !0, e;
        },
            Eo = 7,
            So = "⁠".repeat(Eo);

        function Io(t) {
          return xo(t) && t.data.substr(0, Eo) === So;
        }

        function Oo(t) {
          return t.data.length == Eo && Io(t);
        }

        function Ro(t) {
          return Io(t) ? t.data.slice(Eo) : t.data;
        }

        function Mo(t, e) {
          if (e.keyCode == to.arrowleft) {
            var _t48 = e.domTarget.ownerDocument.defaultView.getSelection();

            if (1 == _t48.rangeCount && _t48.getRangeAt(0).collapsed) {
              var _e56 = _t48.getRangeAt(0).startContainer,
                  _n55 = _t48.getRangeAt(0).startOffset;

              Io(_e56) && _n55 <= Eo && _t48.collapse(_e56, 0);
            }
          }
        }

        function Po(t, e, n) {
          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
          n = n || function (t, e) {
            return t === e;
          }, Array.isArray(t) || (t = Array.prototype.slice.call(t)), Array.isArray(e) || (e = Array.prototype.slice.call(e));

          var o = function (t, e, n) {
            var i = No(t, e, n);
            if (-1 === i) return {
              firstIndex: -1,
              lastIndexOld: -1,
              lastIndexNew: -1
            };
            var o = Do(t, i),
                r = Do(e, i),
                s = No(o, r, n),
                a = t.length - s,
                c = e.length - s;
            return {
              firstIndex: i,
              lastIndexOld: a,
              lastIndexNew: c
            };
          }(t, e, n);

          return i ? function (t, e) {
            var n = t.firstIndex,
                i = t.lastIndexOld,
                o = t.lastIndexNew;
            if (-1 === n) return Array(e).fill("equal");
            var r = [];
            n > 0 && (r = r.concat(Array(n).fill("equal")));
            o - n > 0 && (r = r.concat(Array(o - n).fill("insert")));
            i - n > 0 && (r = r.concat(Array(i - n).fill("delete")));
            o < e && (r = r.concat(Array(e - o).fill("equal")));
            return r;
          }(o, e.length) : function (t, e) {
            var n = [],
                i = e.firstIndex,
                o = e.lastIndexOld,
                r = e.lastIndexNew;
            r - i > 0 && n.push({
              index: i,
              type: "insert",
              values: t.slice(i, r)
            });
            o - i > 0 && n.push({
              index: i + (r - i),
              type: "delete",
              howMany: o - i
            });
            return n;
          }(e, o);
        }

        function No(t, e, n) {
          for (var _i39 = 0; _i39 < Math.max(t.length, e.length); _i39++) {
            if (void 0 === t[_i39] || void 0 === e[_i39] || !n(t[_i39], e[_i39])) return _i39;
          }

          return -1;
        }

        function Do(t, e) {
          return t.slice(e).reverse();
        }

        function jo(t, e, n) {
          n = n || function (t, e) {
            return t === e;
          };

          var i = t.length,
              o = e.length;
          if (i > 200 || o > 200 || i + o > 300) return jo.fastDiff(t, e, n, !0);
          var r, s;

          if (o < i) {
            var _n56 = t;
            t = e, e = _n56, r = "delete", s = "insert";
          } else r = "insert", s = "delete";

          var a = t.length,
              c = e.length,
              l = c - a,
              d = {},
              u = {};

          function h(i) {
            var o = (void 0 !== u[i - 1] ? u[i - 1] : -1) + 1,
                l = void 0 !== u[i + 1] ? u[i + 1] : -1,
                h = o > l ? -1 : 1;
            d[i + h] && (d[i] = d[i + h].slice(0)), d[i] || (d[i] = []), d[i].push(o > l ? r : s);
            var f = Math.max(o, l),
                g = f - i;

            for (; g < a && f < c && n(t[g], e[f]);) {
              g++, f++, d[i].push("equal");
            }

            return f;
          }

          var f,
              g = 0;

          do {
            for (f = -g; f < l; f++) {
              u[f] = h(f);
            }

            for (f = l + g; f > l; f--) {
              u[f] = h(f);
            }

            u[l] = h(l), g++;
          } while (u[l] !== c);

          return d[l].slice(1);
        }

        function Bo(t, e, n) {
          t.insertBefore(n, t.childNodes[e] || null);
        }

        function Lo(t) {
          var e = t.parentNode;
          e && e.removeChild(t);
        }

        function zo(t) {
          if (t) {
            if (t.defaultView) return t instanceof t.defaultView.Document;
            if (t.ownerDocument && t.ownerDocument.defaultView) return t instanceof t.ownerDocument.defaultView.Node;
          }

          return !1;
        }

        jo.fastDiff = Po;

        var Fo = /*#__PURE__*/function () {
          function Fo(t, e) {
            _classCallCheck(this, Fo);

            this.domDocuments = new Set(), this.domConverter = t, this.markedAttributes = new Set(), this.markedChildren = new Set(), this.markedTexts = new Set(), this.selection = e, this.isFocused = !1, this._inlineFiller = null, this._fakeSelectionContainer = null;
          }

          _createClass(Fo, [{
            key: "markToSync",
            value: function markToSync(t, e) {
              if ("text" === t) this.domConverter.mapViewToDom(e.parent) && this.markedTexts.add(e);else {
                if (!this.domConverter.mapViewToDom(e)) return;
                if ("attributes" === t) this.markedAttributes.add(e);else {
                  if ("children" !== t) throw new rn["default"]("view-renderer-unknown-type", this);
                  this.markedChildren.add(e);
                }
              }
            }
          }, {
            key: "render",
            value: function render() {
              var t;

              var _iterator69 = _createForOfIteratorHelper(this.markedChildren),
                  _step69;

              try {
                for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {
                  var _t49 = _step69.value;

                  this._updateChildrenMappings(_t49);
                }
              } catch (err) {
                _iterator69.e(err);
              } finally {
                _iterator69.f();
              }

              this._inlineFiller && !this._isSelectionInInlineFiller() && this._removeInlineFiller(), this._inlineFiller ? t = this._getInlineFillerPosition() : this._needsInlineFillerAtSelection() && (t = this.selection.getFirstPosition(), this.markedChildren.add(t.parent));

              var _iterator70 = _createForOfIteratorHelper(this.markedAttributes),
                  _step70;

              try {
                for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {
                  var _t50 = _step70.value;

                  this._updateAttrs(_t50);
                }
              } catch (err) {
                _iterator70.e(err);
              } finally {
                _iterator70.f();
              }

              var _iterator71 = _createForOfIteratorHelper(this.markedChildren),
                  _step71;

              try {
                for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {
                  var _e58 = _step71.value;

                  this._updateChildren(_e58, {
                    inlineFillerPosition: t
                  });
                }
              } catch (err) {
                _iterator71.e(err);
              } finally {
                _iterator71.f();
              }

              var _iterator72 = _createForOfIteratorHelper(this.markedTexts),
                  _step72;

              try {
                for (_iterator72.s(); !(_step72 = _iterator72.n()).done;) {
                  var _e59 = _step72.value;
                  !this.markedChildren.has(_e59.parent) && this.domConverter.mapViewToDom(_e59.parent) && this._updateText(_e59, {
                    inlineFillerPosition: t
                  });
                }
              } catch (err) {
                _iterator72.e(err);
              } finally {
                _iterator72.f();
              }

              if (t) {
                var _e57 = this.domConverter.viewPositionToDom(t),
                    _n57 = _e57.parent.ownerDocument;

                Io(_e57.parent) ? this._inlineFiller = _e57.parent : this._inlineFiller = Vo(_n57, _e57.parent, _e57.offset);
              } else this._inlineFiller = null;

              this._updateFocus(), this._updateSelection(), this.markedTexts.clear(), this.markedAttributes.clear(), this.markedChildren.clear();
            }
          }, {
            key: "_updateChildrenMappings",
            value: function _updateChildrenMappings(t) {
              var e = this.domConverter.mapViewToDom(t);
              if (!e) return;

              var n = Array.from(this.domConverter.mapViewToDom(t).childNodes),
                  i = Array.from(this.domConverter.viewChildrenToDom(t, e.ownerDocument, {
                withChildren: !1
              })),
                  o = this._diffNodeLists(n, i),
                  r = this._findReplaceActions(o, n, i);

              if (-1 !== r.indexOf("replace")) {
                var _e60 = {
                  equal: 0,
                  insert: 0,
                  "delete": 0
                };

                var _iterator73 = _createForOfIteratorHelper(r),
                    _step73;

                try {
                  for (_iterator73.s(); !(_step73 = _iterator73.n()).done;) {
                    var _o22 = _step73.value;

                    if ("replace" === _o22) {
                      var _o23 = _e60.equal + _e60.insert,
                          _r21 = _e60.equal + _e60["delete"],
                          _s10 = t.getChild(_o23);

                      !_s10 || _s10.is("uiElement") || _s10.is("rawElement") || this._updateElementMappings(_s10, n[_r21]), Lo(i[_o23]), _e60.equal++;
                    } else _e60[_o22]++;
                  }
                } catch (err) {
                  _iterator73.e(err);
                } finally {
                  _iterator73.f();
                }
              }
            }
          }, {
            key: "_updateElementMappings",
            value: function _updateElementMappings(t, e) {
              this.domConverter.unbindDomElement(e), this.domConverter.bindElements(e, t), this.markedChildren.add(t), this.markedAttributes.add(t);
            }
          }, {
            key: "_getInlineFillerPosition",
            value: function _getInlineFillerPosition() {
              var t = this.selection.getFirstPosition();
              return t.parent.is("$text") ? Ii._createBefore(this.selection.getFirstPosition().parent) : t;
            }
          }, {
            key: "_isSelectionInInlineFiller",
            value: function _isSelectionInInlineFiller() {
              if (1 != this.selection.rangeCount || !this.selection.isCollapsed) return !1;
              var t = this.selection.getFirstPosition(),
                  e = this.domConverter.viewPositionToDom(t);
              return !!(e && xo(e.parent) && Io(e.parent));
            }
          }, {
            key: "_removeInlineFiller",
            value: function _removeInlineFiller() {
              var t = this._inlineFiller;
              if (!Io(t)) throw new rn["default"]("view-renderer-filler-was-lost", this);
              Oo(t) ? t.parentNode.removeChild(t) : t.data = t.data.substr(Eo), this._inlineFiller = null;
            }
          }, {
            key: "_needsInlineFillerAtSelection",
            value: function _needsInlineFillerAtSelection() {
              if (1 != this.selection.rangeCount || !this.selection.isCollapsed) return !1;
              var t = this.selection.getFirstPosition(),
                  e = t.parent,
                  n = t.offset;
              if (!this.domConverter.mapViewToDom(e.root)) return !1;
              if (!e.is("element")) return !1;
              if (!function (t) {
                if ("false" == t.getAttribute("contenteditable")) return !1;
                var e = t.findAncestor(function (t) {
                  return t.hasAttribute("contenteditable");
                });
                return !e || "true" == e.getAttribute("contenteditable");
              }(e)) return !1;
              if (n === e.getFillerOffset()) return !1;
              var i = t.nodeBefore,
                  o = t.nodeAfter;
              return !(i instanceof wn || o instanceof wn);
            }
          }, {
            key: "_updateText",
            value: function _updateText(t, e) {
              var n = this.domConverter.findCorrespondingDomText(t),
                  i = this.domConverter.viewToDom(t, n.ownerDocument),
                  o = n.data;
              var r = i.data;
              var s = e.inlineFillerPosition;

              if (s && s.parent == t.parent && s.offset == t.index && (r = So + r), o != r) {
                var _t51 = Po(o, r);

                var _iterator74 = _createForOfIteratorHelper(_t51),
                    _step74;

                try {
                  for (_iterator74.s(); !(_step74 = _iterator74.n()).done;) {
                    var _e61 = _step74.value;
                    "insert" === _e61.type ? n.insertData(_e61.index, _e61.values.join("")) : n.deleteData(_e61.index, _e61.howMany);
                  }
                } catch (err) {
                  _iterator74.e(err);
                } finally {
                  _iterator74.f();
                }
              }
            }
          }, {
            key: "_updateAttrs",
            value: function _updateAttrs(t) {
              var e = this.domConverter.mapViewToDom(t);
              if (!e) return;
              var n = Array.from(e.attributes).map(function (t) {
                return t.name;
              }),
                  i = t.getAttributeKeys();

              var _iterator75 = _createForOfIteratorHelper(i),
                  _step75;

              try {
                for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {
                  var _n58 = _step75.value;
                  e.setAttribute(_n58, t.getAttribute(_n58));
                }
              } catch (err) {
                _iterator75.e(err);
              } finally {
                _iterator75.f();
              }

              var _iterator76 = _createForOfIteratorHelper(n),
                  _step76;

              try {
                for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {
                  var _i40 = _step76.value;
                  t.hasAttribute(_i40) || e.removeAttribute(_i40);
                }
              } catch (err) {
                _iterator76.e(err);
              } finally {
                _iterator76.f();
              }
            }
          }, {
            key: "_updateChildren",
            value: function _updateChildren(t, e) {
              var n = this.domConverter.mapViewToDom(t);
              if (!n) return;
              var i = e.inlineFillerPosition,
                  o = this.domConverter.mapViewToDom(t).childNodes,
                  r = Array.from(this.domConverter.viewChildrenToDom(t, n.ownerDocument, {
                bind: !0,
                inlineFillerPosition: i
              }));
              i && i.parent === t && Vo(n.ownerDocument, r, i.offset);

              var s = this._diffNodeLists(o, r);

              var a = 0;
              var c = new Set();

              var _iterator77 = _createForOfIteratorHelper(s),
                  _step77;

              try {
                for (_iterator77.s(); !(_step77 = _iterator77.n()).done;) {
                  var _t52 = _step77.value;
                  "delete" === _t52 ? (c.add(o[a]), Lo(o[a])) : "equal" === _t52 && a++;
                }
              } catch (err) {
                _iterator77.e(err);
              } finally {
                _iterator77.f();
              }

              a = 0;

              var _iterator78 = _createForOfIteratorHelper(s),
                  _step78;

              try {
                for (_iterator78.s(); !(_step78 = _iterator78.n()).done;) {
                  var _t53 = _step78.value;
                  "insert" === _t53 ? (Bo(n, a, r[a]), a++) : "equal" === _t53 && (this._markDescendantTextToSync(this.domConverter.domToView(r[a])), a++);
                }
              } catch (err) {
                _iterator78.e(err);
              } finally {
                _iterator78.f();
              }

              var _iterator79 = _createForOfIteratorHelper(c),
                  _step79;

              try {
                for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {
                  var _t54 = _step79.value;
                  _t54.parentNode || this.domConverter.unbindDomElement(_t54);
                }
              } catch (err) {
                _iterator79.e(err);
              } finally {
                _iterator79.f();
              }
            }
          }, {
            key: "_diffNodeLists",
            value: function _diffNodeLists(t, e) {
              return jo(t = function (t, e) {
                var n = Array.from(t);
                if (0 == n.length || !e) return n;
                n[n.length - 1] == e && n.pop();
                return n;
              }(t, this._fakeSelectionContainer), e, function (t, e, n) {
                if (e === n) return !0;
                if (xo(e) && xo(n)) return e.data === n.data;
                if (t.isBlockFiller(e) && t.isBlockFiller(n)) return !0;
                return !1;
              }.bind(null, this.domConverter));
            }
          }, {
            key: "_findReplaceActions",
            value: function _findReplaceActions(t, e, n) {
              if (-1 === t.indexOf("insert") || -1 === t.indexOf("delete")) return t;
              var i = [],
                  o = [],
                  r = [];
              var s = {
                equal: 0,
                insert: 0,
                "delete": 0
              };

              var _iterator80 = _createForOfIteratorHelper(t),
                  _step80;

              try {
                for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {
                  var _a8 = _step80.value;
                  "insert" === _a8 ? r.push(n[s.equal + s.insert]) : "delete" === _a8 ? o.push(e[s.equal + s["delete"]]) : ((i = i.concat(jo(o, r, Uo).map(function (t) {
                    return "equal" === t ? "replace" : t;
                  }))).push("equal"), o = [], r = []), s[_a8]++;
                }
              } catch (err) {
                _iterator80.e(err);
              } finally {
                _iterator80.f();
              }

              return i.concat(jo(o, r, Uo).map(function (t) {
                return "equal" === t ? "replace" : t;
              }));
            }
          }, {
            key: "_markDescendantTextToSync",
            value: function _markDescendantTextToSync(t) {
              if (t) if (t.is("$text")) this.markedTexts.add(t);else if (t.is("element")) {
                var _iterator81 = _createForOfIteratorHelper(t.getChildren()),
                    _step81;

                try {
                  for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {
                    var _e62 = _step81.value;

                    this._markDescendantTextToSync(_e62);
                  }
                } catch (err) {
                  _iterator81.e(err);
                } finally {
                  _iterator81.f();
                }
              }
            }
          }, {
            key: "_updateSelection",
            value: function _updateSelection() {
              if (0 === this.selection.rangeCount) return this._removeDomSelection(), void this._removeFakeSelection();
              var t = this.domConverter.mapViewToDom(this.selection.editableElement);
              this.isFocused && t && (this.selection.isFake ? this._updateFakeSelection(t) : (this._removeFakeSelection(), this._updateDomSelection(t)));
            }
          }, {
            key: "_updateFakeSelection",
            value: function _updateFakeSelection(t) {
              var e = t.ownerDocument;
              this._fakeSelectionContainer || (this._fakeSelectionContainer = function (t) {
                var e = t.createElement("div");
                return e.className = "ck-fake-selection-container", Object.assign(e.style, {
                  position: "fixed",
                  top: 0,
                  left: "-9999px",
                  width: "42px"
                }), e.textContent = " ", e;
              }(e));
              var n = this._fakeSelectionContainer;
              if (this.domConverter.bindFakeSelection(n, this.selection), !this._fakeSelectionNeedsUpdate(t)) return;
              n.parentElement && n.parentElement == t || t.appendChild(n), n.textContent = this.selection.fakeSelectionLabel || " ";
              var i = e.getSelection(),
                  o = e.createRange();
              i.removeAllRanges(), o.selectNodeContents(n), i.addRange(o);
            }
          }, {
            key: "_updateDomSelection",
            value: function _updateDomSelection(t) {
              var e = t.ownerDocument.defaultView.getSelection();
              if (!this._domSelectionNeedsUpdate(e)) return;
              var n = this.domConverter.viewPositionToDom(this.selection.anchor),
                  i = this.domConverter.viewPositionToDom(this.selection.focus);
              e.collapse(n.parent, n.offset), e.extend(i.parent, i.offset), Qi.isGecko && function (t, e) {
                var n = t.parent;
                if (n.nodeType != Node.ELEMENT_NODE || t.offset != n.childNodes.length - 1) return;
                var i = n.childNodes[t.offset];
                i && "BR" == i.tagName && e.addRange(e.getRangeAt(0));
              }(i, e);
            }
          }, {
            key: "_domSelectionNeedsUpdate",
            value: function _domSelectionNeedsUpdate(t) {
              if (!this.domConverter.isDomSelectionCorrect(t)) return !0;
              var e = t && this.domConverter.domSelectionToView(t);
              return (!e || !this.selection.isEqual(e)) && !(!this.selection.isCollapsed && this.selection.isSimilar(e));
            }
          }, {
            key: "_fakeSelectionNeedsUpdate",
            value: function _fakeSelectionNeedsUpdate(t) {
              var e = this._fakeSelectionContainer,
                  n = t.ownerDocument.getSelection();
              return !e || e.parentElement !== t || n.anchorNode !== e && !e.contains(n.anchorNode) || e.textContent !== this.selection.fakeSelectionLabel;
            }
          }, {
            key: "_removeDomSelection",
            value: function _removeDomSelection() {
              var _iterator82 = _createForOfIteratorHelper(this.domDocuments),
                  _step82;

              try {
                for (_iterator82.s(); !(_step82 = _iterator82.n()).done;) {
                  var _t55 = _step82.value;

                  if (_t55.getSelection().rangeCount) {
                    var _e63 = _t55.activeElement,
                        _n59 = this.domConverter.mapDomToView(_e63);

                    _e63 && _n59 && _t55.getSelection().removeAllRanges();
                  }
                }
              } catch (err) {
                _iterator82.e(err);
              } finally {
                _iterator82.f();
              }
            }
          }, {
            key: "_removeFakeSelection",
            value: function _removeFakeSelection() {
              var t = this._fakeSelectionContainer;
              t && t.remove();
            }
          }, {
            key: "_updateFocus",
            value: function _updateFocus() {
              if (this.isFocused) {
                var _t56 = this.selection.editableElement;
                _t56 && this.domConverter.focus(_t56);
              }
            }
          }]);

          return Fo;
        }();

        function Vo(t, e, n) {
          var i = e instanceof Array ? e : e.childNodes,
              o = i[n];
          if (xo(o)) return o.data = So + o.data, o;
          {
            var _o24 = t.createTextNode(So);

            return Array.isArray(e) ? i.splice(n, 0, _o24) : Bo(e, n, _o24), _o24;
          }
        }

        function Uo(t, e) {
          return zo(t) && zo(e) && !xo(t) && !xo(e) && t.nodeType !== Node.COMMENT_NODE && e.nodeType !== Node.COMMENT_NODE && t.tagName.toLowerCase() === e.tagName.toLowerCase();
        }

        Object(o["default"])(Fo, i["default"]);
        var Ho = {
          window: window,
          document: document
        };

        function qo(t) {
          var e = 0;

          for (; t.previousSibling;) {
            t = t.previousSibling, e++;
          }

          return e;
        }

        function Wo(t) {
          var e = [];

          for (; t && t.nodeType != Node.DOCUMENT_NODE;) {
            e.unshift(t), t = t.parentNode;
          }

          return e;
        }

        var $o = Ao(document),
            Yo = Co(document),
            Jo = To(document);

        var Go = /*#__PURE__*/function () {
          function Go(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            _classCallCheck(this, Go);

            this.document = t, this.blockFillerMode = e.blockFillerMode || "br", this.preElements = ["pre"], this.blockElements = ["address", "article", "aside", "blockquote", "caption", "center", "dd", "details", "dir", "div", "dl", "dt", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hgroup", "legend", "li", "main", "menu", "nav", "ol", "p", "pre", "section", "summary", "table", "tbody", "td", "tfoot", "th", "thead", "tr", "ul"], this.inlineObjectElements = ["object", "iframe", "input", "button", "textarea", "select", "option", "video", "embed", "audio", "img", "canvas"], this._domToViewMapping = new WeakMap(), this._viewToDomMapping = new WeakMap(), this._fakeSelectionMapping = new WeakMap(), this._rawContentElementMatcher = new Cn(), this._encounteredRawContentDomNodes = new WeakSet();
          }

          _createClass(Go, [{
            key: "bindFakeSelection",
            value: function bindFakeSelection(t, e) {
              this._fakeSelectionMapping.set(t, new Pi(e));
            }
          }, {
            key: "fakeSelectionToView",
            value: function fakeSelectionToView(t) {
              return this._fakeSelectionMapping.get(t);
            }
          }, {
            key: "bindElements",
            value: function bindElements(t, e) {
              this._domToViewMapping.set(t, e), this._viewToDomMapping.set(e, t);
            }
          }, {
            key: "unbindDomElement",
            value: function unbindDomElement(t) {
              var e = this._domToViewMapping.get(t);

              if (e) {
                this._domToViewMapping["delete"](t), this._viewToDomMapping["delete"](e);

                var _iterator83 = _createForOfIteratorHelper(t.childNodes),
                    _step83;

                try {
                  for (_iterator83.s(); !(_step83 = _iterator83.n()).done;) {
                    var _e64 = _step83.value;
                    this.unbindDomElement(_e64);
                  }
                } catch (err) {
                  _iterator83.e(err);
                } finally {
                  _iterator83.f();
                }
              }
            }
          }, {
            key: "bindDocumentFragments",
            value: function bindDocumentFragments(t, e) {
              this._domToViewMapping.set(t, e), this._viewToDomMapping.set(e, t);
            }
          }, {
            key: "viewToDom",
            value: function viewToDom(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

              if (t.is("$text")) {
                var _n60 = this._processDataFromViewText(t);

                return e.createTextNode(_n60);
              }

              {
                if (this.mapViewToDom(t)) return this.mapViewToDom(t);

                var _i41;

                if (t.is("documentFragment")) _i41 = e.createDocumentFragment(), n.bind && this.bindDocumentFragments(_i41, t);else {
                  if (t.is("uiElement")) return _i41 = "$comment" === t.name ? e.createComment(t.getCustomProperty("$rawContent")) : t.render(e), n.bind && this.bindElements(_i41, t), _i41;
                  _i41 = t.hasAttribute("xmlns") ? e.createElementNS(t.getAttribute("xmlns"), t.name) : e.createElement(t.name), t.is("rawElement") && t.render(_i41), n.bind && this.bindElements(_i41, t);

                  var _iterator84 = _createForOfIteratorHelper(t.getAttributeKeys()),
                      _step84;

                  try {
                    for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {
                      var _e65 = _step84.value;

                      _i41.setAttribute(_e65, t.getAttribute(_e65));
                    }
                  } catch (err) {
                    _iterator84.e(err);
                  } finally {
                    _iterator84.f();
                  }
                }

                if (!1 !== n.withChildren) {
                  var _iterator85 = _createForOfIteratorHelper(this.viewChildrenToDom(t, e, n)),
                      _step85;

                  try {
                    for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {
                      var _o25 = _step85.value;

                      _i41.appendChild(_o25);
                    }
                  } catch (err) {
                    _iterator85.e(err);
                  } finally {
                    _iterator85.f();
                  }
                }

                return _i41;
              }
            }
          }, {
            key: "viewChildrenToDom",
            value: /*#__PURE__*/regeneratorRuntime.mark(function viewChildrenToDom(t, e) {
              var n,
                  i,
                  o,
                  _iterator86,
                  _step86,
                  _r22,
                  _args44 = arguments;

              return regeneratorRuntime.wrap(function viewChildrenToDom$(_context44) {
                while (1) {
                  switch (_context44.prev = _context44.next) {
                    case 0:
                      n = _args44.length > 2 && _args44[2] !== undefined ? _args44[2] : {};
                      i = t.getFillerOffset && t.getFillerOffset();
                      o = 0;
                      _iterator86 = _createForOfIteratorHelper(t.getChildren());
                      _context44.prev = 4;

                      _iterator86.s();

                    case 6:
                      if ((_step86 = _iterator86.n()).done) {
                        _context44.next = 17;
                        break;
                      }

                      _r22 = _step86.value;
                      _context44.t0 = i === o;

                      if (!_context44.t0) {
                        _context44.next = 12;
                        break;
                      }

                      _context44.next = 12;
                      return this._getBlockFiller(e);

                    case 12:
                      _context44.next = 14;
                      return this.viewToDom(_r22, e, n);

                    case 14:
                      o++;

                    case 15:
                      _context44.next = 6;
                      break;

                    case 17:
                      _context44.next = 22;
                      break;

                    case 19:
                      _context44.prev = 19;
                      _context44.t1 = _context44["catch"](4);

                      _iterator86.e(_context44.t1);

                    case 22:
                      _context44.prev = 22;

                      _iterator86.f();

                      return _context44.finish(22);

                    case 25:
                      _context44.t2 = i === o;

                      if (!_context44.t2) {
                        _context44.next = 29;
                        break;
                      }

                      _context44.next = 29;
                      return this._getBlockFiller(e);

                    case 29:
                    case "end":
                      return _context44.stop();
                  }
                }
              }, viewChildrenToDom, this, [[4, 19, 22, 25]]);
            })
          }, {
            key: "viewRangeToDom",
            value: function viewRangeToDom(t) {
              var e = this.viewPositionToDom(t.start),
                  n = this.viewPositionToDom(t.end),
                  i = document.createRange();
              return i.setStart(e.parent, e.offset), i.setEnd(n.parent, n.offset), i;
            }
          }, {
            key: "viewPositionToDom",
            value: function viewPositionToDom(t) {
              var e = t.parent;

              if (e.is("$text")) {
                var _n61 = this.findCorrespondingDomText(e);

                if (!_n61) return null;
                var _i42 = t.offset;
                return Io(_n61) && (_i42 += Eo), {
                  parent: _n61,
                  offset: _i42
                };
              }

              {
                var _n62, _i43, _o26;

                if (0 === t.offset) {
                  if (!(_n62 = this.mapViewToDom(e))) return null;
                  _o26 = _n62.childNodes[0];
                } else {
                  var _e66 = t.nodeBefore;
                  if (!(_i43 = _e66.is("$text") ? this.findCorrespondingDomText(_e66) : this.mapViewToDom(t.nodeBefore))) return null;
                  _n62 = _i43.parentNode, _o26 = _i43.nextSibling;
                }

                if (xo(_o26) && Io(_o26)) return {
                  parent: _o26,
                  offset: Eo
                };
                return {
                  parent: _n62,
                  offset: _i43 ? qo(_i43) + 1 : 0
                };
              }
            }
          }, {
            key: "domToView",
            value: function domToView(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              if (this.isBlockFiller(t)) return null;
              var n = this.getHostViewElement(t);
              if (n) return n;
              if (this.isComment(t) && e.skipComments) return null;

              if (xo(t)) {
                if (Oo(t)) return null;
                {
                  var _e67 = this._processDataFromDomText(t);

                  return "" === _e67 ? null : new wn(this.document, _e67);
                }
              }

              {
                if (this.mapDomToView(t)) return this.mapDomToView(t);

                var _n63;

                if (this.isDocumentFragment(t)) _n63 = new ho(this.document), e.bind && this.bindDocumentFragments(t, _n63);else {
                  _n63 = this._createViewElement(t, e), e.bind && this.bindElements(t, _n63);
                  var _i44 = t.attributes;
                  if (_i44) for (var _t57 = _i44.length - 1; _t57 >= 0; _t57--) {
                    _n63._setAttribute(_i44[_t57].name, _i44[_t57].value);
                  }

                  if (this._isViewElementWithRawContent(_n63, e) || this.isComment(t)) {
                    var _e68 = this.isComment(t) ? t.data : t.innerHTML;

                    return _n63._setCustomProperty("$rawContent", _e68), this._encounteredRawContentDomNodes.add(t), _n63;
                  }
                }

                if (!1 !== e.withChildren) {
                  var _iterator87 = _createForOfIteratorHelper(this.domChildrenToView(t, e)),
                      _step87;

                  try {
                    for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {
                      var _i45 = _step87.value;

                      _n63._appendChild(_i45);
                    }
                  } catch (err) {
                    _iterator87.e(err);
                  } finally {
                    _iterator87.f();
                  }
                }

                return _n63;
              }
            }
          }, {
            key: "domChildrenToView",
            value: /*#__PURE__*/regeneratorRuntime.mark(function domChildrenToView(t) {
              var e,
                  _n64,
                  _i46,
                  _o27,
                  _args45 = arguments;

              return regeneratorRuntime.wrap(function domChildrenToView$(_context45) {
                while (1) {
                  switch (_context45.prev = _context45.next) {
                    case 0:
                      e = _args45.length > 1 && _args45[1] !== undefined ? _args45[1] : {};
                      _n64 = 0;

                    case 2:
                      if (!(_n64 < t.childNodes.length)) {
                        _context45.next = 11;
                        break;
                      }

                      _i46 = t.childNodes[_n64], _o27 = this.domToView(_i46, e);
                      _context45.t0 = null !== _o27;

                      if (!_context45.t0) {
                        _context45.next = 8;
                        break;
                      }

                      _context45.next = 8;
                      return _o27;

                    case 8:
                      _n64++;
                      _context45.next = 2;
                      break;

                    case 11:
                    case "end":
                      return _context45.stop();
                  }
                }
              }, domChildrenToView, this);
            })
          }, {
            key: "domSelectionToView",
            value: function domSelectionToView(t) {
              if (1 === t.rangeCount) {
                var _e69 = t.getRangeAt(0).startContainer;
                xo(_e69) && (_e69 = _e69.parentNode);

                var _n65 = this.fakeSelectionToView(_e69);

                if (_n65) return _n65;
              }

              var e = this.isDomSelectionBackward(t),
                  n = [];

              for (var _e70 = 0; _e70 < t.rangeCount; _e70++) {
                var _i47 = t.getRangeAt(_e70),
                    _o28 = this.domRangeToView(_i47);

                _o28 && n.push(_o28);
              }

              return new Pi(n, {
                backward: e
              });
            }
          }, {
            key: "domRangeToView",
            value: function domRangeToView(t) {
              var e = this.domPositionToView(t.startContainer, t.startOffset),
                  n = this.domPositionToView(t.endContainer, t.endOffset);
              return e && n ? new Oi(e, n) : null;
            }
          }, {
            key: "domPositionToView",
            value: function domPositionToView(t, e) {
              if (this.isBlockFiller(t)) return this.domPositionToView(t.parentNode, qo(t));
              var n = this.mapDomToView(t);
              if (n && (n.is("uiElement") || n.is("rawElement"))) return Ii._createBefore(n);

              if (xo(t)) {
                if (Oo(t)) return this.domPositionToView(t.parentNode, qo(t));

                var _n66 = this.findCorrespondingViewText(t);

                var _i48 = e;
                return _n66 ? (Io(t) && (_i48 = (_i48 -= Eo) < 0 ? 0 : _i48), new Ii(_n66, _i48)) : null;
              }

              if (0 === e) {
                var _e71 = this.mapDomToView(t);

                if (_e71) return new Ii(_e71, 0);
              } else {
                var _n67 = t.childNodes[e - 1],
                    _i49 = xo(_n67) ? this.findCorrespondingViewText(_n67) : this.mapDomToView(_n67);

                if (_i49 && _i49.parent) return new Ii(_i49.parent, _i49.index + 1);
              }

              return null;
            }
          }, {
            key: "mapDomToView",
            value: function mapDomToView(t) {
              return this.getHostViewElement(t) || this._domToViewMapping.get(t);
            }
          }, {
            key: "findCorrespondingViewText",
            value: function findCorrespondingViewText(t) {
              if (Oo(t)) return null;
              var e = this.getHostViewElement(t);
              if (e) return e;
              var n = t.previousSibling;

              if (n) {
                if (!this.isElement(n)) return null;

                var _t58 = this.mapDomToView(n);

                if (_t58) {
                  return _t58.nextSibling instanceof wn ? _t58.nextSibling : null;
                }
              } else {
                var _e72 = this.mapDomToView(t.parentNode);

                if (_e72) {
                  var _t59 = _e72.getChild(0);

                  return _t59 instanceof wn ? _t59 : null;
                }
              }

              return null;
            }
          }, {
            key: "mapViewToDom",
            value: function mapViewToDom(t) {
              return this._viewToDomMapping.get(t);
            }
          }, {
            key: "findCorrespondingDomText",
            value: function findCorrespondingDomText(t) {
              var e = t.previousSibling;
              return e && this.mapViewToDom(e) ? this.mapViewToDom(e).nextSibling : !e && t.parent && this.mapViewToDom(t.parent) ? this.mapViewToDom(t.parent).childNodes[0] : null;
            }
          }, {
            key: "focus",
            value: function focus(t) {
              var e = this.mapViewToDom(t);

              if (e && e.ownerDocument.activeElement !== e) {
                var _Ho$window = Ho.window,
                    _t60 = _Ho$window.scrollX,
                    _n68 = _Ho$window.scrollY,
                    _i50 = [];
                Ko(e, function (t) {
                  var e = t.scrollLeft,
                      n = t.scrollTop;

                  _i50.push([e, n]);
                }), e.focus(), Ko(e, function (t) {
                  var _i50$shift = _i50.shift(),
                      _i50$shift2 = _slicedToArray(_i50$shift, 2),
                      e = _i50$shift2[0],
                      n = _i50$shift2[1];

                  t.scrollLeft = e, t.scrollTop = n;
                }), Ho.window.scrollTo(_t60, _n68);
              }
            }
          }, {
            key: "isElement",
            value: function isElement(t) {
              return t && t.nodeType == Node.ELEMENT_NODE;
            }
          }, {
            key: "isDocumentFragment",
            value: function isDocumentFragment(t) {
              return t && t.nodeType == Node.DOCUMENT_FRAGMENT_NODE;
            }
          }, {
            key: "isComment",
            value: function isComment(t) {
              return t && t.nodeType == Node.COMMENT_NODE;
            }
          }, {
            key: "isBlockFiller",
            value: function isBlockFiller(t) {
              return "br" == this.blockFillerMode ? t.isEqualNode($o) : !("BR" !== t.tagName || !Qo(t, this.blockElements) || 1 !== t.parentNode.childNodes.length) || t.isEqualNode(Jo) || function (t, e) {
                return t.isEqualNode(Yo) && Qo(t, e) && 1 === t.parentNode.childNodes.length;
              }(t, this.blockElements);
            }
          }, {
            key: "isDomSelectionBackward",
            value: function isDomSelectionBackward(t) {
              if (t.isCollapsed) return !1;
              var e = document.createRange();
              e.setStart(t.anchorNode, t.anchorOffset), e.setEnd(t.focusNode, t.focusOffset);
              var n = e.collapsed;
              return e.detach(), n;
            }
          }, {
            key: "getHostViewElement",
            value: function getHostViewElement(t) {
              var e = Wo(t);

              for (e.pop(); e.length;) {
                var _t61 = e.pop(),
                    _n69 = this._domToViewMapping.get(_t61);

                if (_n69 && (_n69.is("uiElement") || _n69.is("rawElement"))) return _n69;
              }

              return null;
            }
          }, {
            key: "isDomSelectionCorrect",
            value: function isDomSelectionCorrect(t) {
              return this._isDomSelectionPositionCorrect(t.anchorNode, t.anchorOffset) && this._isDomSelectionPositionCorrect(t.focusNode, t.focusOffset);
            }
          }, {
            key: "registerRawContentMatcher",
            value: function registerRawContentMatcher(t) {
              this._rawContentElementMatcher.add(t);
            }
          }, {
            key: "_getBlockFiller",
            value: function _getBlockFiller(t) {
              switch (this.blockFillerMode) {
                case "nbsp":
                  return Co(t);

                case "markedNbsp":
                  return To(t);

                case "br":
                  return Ao(t);
              }
            }
          }, {
            key: "_isDomSelectionPositionCorrect",
            value: function _isDomSelectionPositionCorrect(t, e) {
              if (xo(t) && Io(t) && e < Eo) return !1;
              if (this.isElement(t) && Io(t.childNodes[e])) return !1;
              var n = this.mapDomToView(t);
              return !n || !n.is("uiElement") && !n.is("rawElement");
            }
          }, {
            key: "_processDataFromViewText",
            value: function _processDataFromViewText(t) {
              var _this94 = this;

              var e = t.data;
              if (t.getAncestors().some(function (t) {
                return _this94.preElements.includes(t.name);
              })) return e;

              if (" " == e.charAt(0)) {
                var _n70 = this._getTouchingInlineViewNode(t, !1);

                !(_n70 && _n70.is("$textProxy") && this._nodeEndsWithSpace(_n70)) && _n70 || (e = " " + e.substr(1));
              }

              if (" " == e.charAt(e.length - 1)) {
                var _n71 = this._getTouchingInlineViewNode(t, !0),
                    _i51 = _n71 && _n71.is("$textProxy") && " " == _n71.data.charAt(0);

                " " != e.charAt(e.length - 2) && _n71 && !_i51 || (e = e.substr(0, e.length - 1) + " ");
              }

              return e.replace(/ {2}/g, "  ");
            }
          }, {
            key: "_nodeEndsWithSpace",
            value: function _nodeEndsWithSpace(t) {
              var _this95 = this;

              if (t.getAncestors().some(function (t) {
                return _this95.preElements.includes(t.name);
              })) return !1;

              var e = this._processDataFromViewText(t);

              return " " == e.charAt(e.length - 1);
            }
          }, {
            key: "_processDataFromDomText",
            value: function _processDataFromDomText(t) {
              var e = t.data;
              if (function (t, e) {
                return Wo(t).some(function (t) {
                  return t.tagName && e.includes(t.tagName.toLowerCase());
                });
              }(t, this.preElements)) return Ro(t);
              e = e.replace(/[ \n\t\r]{1,}/g, " ");

              var n = this._getTouchingInlineDomNode(t, !1),
                  i = this._getTouchingInlineDomNode(t, !0),
                  o = this._checkShouldLeftTrimDomText(t, n),
                  r = this._checkShouldRightTrimDomText(t, i);

              o && (e = e.replace(/^ /, "")), r && (e = e.replace(/ $/, "")), e = (e = Ro(new Text(e))).replace(/ \u00A0/g, "  ");
              var s = i && this.isElement(i) && "BR" != i.tagName,
                  a = i && xo(i) && " " == i.data.charAt(0);
              return (/( |\u00A0)\u00A0$/.test(e) || !i || s || a) && (e = e.replace(/\u00A0$/, " ")), (o || n && this.isElement(n) && "BR" != n.tagName) && (e = e.replace(/^\u00A0/, " ")), e;
            }
          }, {
            key: "_checkShouldLeftTrimDomText",
            value: function _checkShouldLeftTrimDomText(t, e) {
              return !e || (this.isElement(e) ? "BR" === e.tagName : !this._encounteredRawContentDomNodes.has(t.previousSibling) && /[^\S\u00A0]/.test(e.data.charAt(e.data.length - 1)));
            }
          }, {
            key: "_checkShouldRightTrimDomText",
            value: function _checkShouldRightTrimDomText(t, e) {
              return !e && !Io(t);
            }
          }, {
            key: "_getTouchingInlineViewNode",
            value: function _getTouchingInlineViewNode(t, e) {
              var n = new Si({
                startPosition: e ? Ii._createAfter(t) : Ii._createBefore(t),
                direction: e ? "forward" : "backward"
              });

              var _iterator88 = _createForOfIteratorHelper(n),
                  _step88;

              try {
                for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {
                  var _t62 = _step88.value;
                  if (_t62.item.is("element") && this.inlineObjectElements.includes(_t62.item.name)) return _t62.item;
                  if (_t62.item.is("containerElement")) return null;
                  if (_t62.item.is("element", "br")) return null;
                  if (_t62.item.is("$textProxy")) return _t62.item;
                }
              } catch (err) {
                _iterator88.e(err);
              } finally {
                _iterator88.f();
              }

              return null;
            }
          }, {
            key: "_getTouchingInlineDomNode",
            value: function _getTouchingInlineDomNode(t, e) {
              if (!t.parentNode) return null;
              var n = e ? "firstChild" : "lastChild",
                  i = e ? "nextSibling" : "previousSibling";
              var o = !0;

              do {
                if (!o && t[n] ? t = t[n] : t[i] ? (t = t[i], o = !1) : (t = t.parentNode, o = !0), !t || this._isBlockElement(t)) return null;
              } while (!xo(t) && "BR" != t.tagName && !this._isInlineObjectElement(t));

              return t;
            }
          }, {
            key: "_isBlockElement",
            value: function _isBlockElement(t) {
              return this.isElement(t) && this.blockElements.includes(t.tagName.toLowerCase());
            }
          }, {
            key: "_isInlineObjectElement",
            value: function _isInlineObjectElement(t) {
              return this.isElement(t) && this.inlineObjectElements.includes(t.tagName.toLowerCase());
            }
          }, {
            key: "_createViewElement",
            value: function _createViewElement(t, e) {
              if (this.isComment(t)) return new so(this.document, "$comment");
              var n = e.keepOriginalCase ? t.tagName : t.tagName.toLowerCase();
              return new vi(this.document, n);
            }
          }, {
            key: "_isViewElementWithRawContent",
            value: function _isViewElementWithRawContent(t, e) {
              return !1 !== e.withChildren && this._rawContentElementMatcher.match(t);
            }
          }]);

          return Go;
        }();

        function Ko(t, e) {
          for (; t && t != Ho.document;) {
            e(t), t = t.parentNode;
          }
        }

        function Qo(t, e) {
          var n = t.parentNode;
          return n && n.tagName && e.includes(n.tagName.toLowerCase());
        }

        var Xo = n(11);

        function Zo(t) {
          var e = Object.prototype.toString.apply(t);
          return "[object Window]" == e || "[object global]" == e;
        }

        var tr = n(421);
        var er = Object(tr.a)({}, sn["default"], {
          listenTo: function listenTo(t) {
            var _sn$default$listenTo;

            for (var _len18 = arguments.length, e = new Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {
              e[_key18 - 1] = arguments[_key18];
            }

            if (zo(t) || Zo(t)) {
              var _n72 = this._getProxyEmitter(t) || new nr(t);

              _n72.attach.apply(_n72, e), t = _n72;
            }

            (_sn$default$listenTo = sn["default"].listenTo).call.apply(_sn$default$listenTo, [this, t].concat(e));
          },
          stopListening: function stopListening(t, e, n) {
            if (zo(t) || Zo(t)) {
              var _e73 = this._getProxyEmitter(t);

              if (!_e73) return;
              t = _e73;
            }

            sn["default"].stopListening.call(this, t, e, n), t instanceof nr && t.detach(e);
          },
          _getProxyEmitter: function _getProxyEmitter(t) {
            return Object(sn._getEmitterListenedTo)(this, ir(t));
          }
        });

        var nr = function nr(t) {
          _classCallCheck(this, nr);

          Object(sn._setEmitterId)(this, ir(t)), this._domNode = t;
        };

        function ir(t) {
          return t["data-ck-expando"] || (t["data-ck-expando"] = Object(Xo.a)());
        }

        Object(tr.a)(nr.prototype, sn["default"], {
          attach: function attach(t, e) {
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
            if (this._domListeners && this._domListeners[t]) return;

            var i = {
              capture: !!n.useCapture,
              passive: !!n.usePassive
            },
                o = this._createDomListener(t, i);

            this._domNode.addEventListener(t, o, i), this._domListeners || (this._domListeners = {}), this._domListeners[t] = o;
          },
          detach: function detach(t) {
            var e;
            !this._domListeners[t] || (e = this._events[t]) && e.callbacks.length || this._domListeners[t].removeListener();
          },
          _createDomListener: function _createDomListener(t, e) {
            var _this96 = this;

            var n = function n(e) {
              _this96.fire(t, e);
            };

            return n.removeListener = function () {
              _this96._domNode.removeEventListener(t, n, e), delete _this96._domListeners[t];
            }, n;
          }
        });

        var or = /*#__PURE__*/function () {
          function or(t) {
            _classCallCheck(this, or);

            this.view = t, this.document = t.document, this.isEnabled = !1;
          }

          _createClass(or, [{
            key: "enable",
            value: function enable() {
              this.isEnabled = !0;
            }
          }, {
            key: "disable",
            value: function disable() {
              this.isEnabled = !1;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.disable(), this.stopListening();
            }
          }, {
            key: "checkShouldIgnoreEventFromTarget",
            value: function checkShouldIgnoreEventFromTarget(t) {
              return t && 3 === t.nodeType && (t = t.parentNode), !(!t || 1 !== t.nodeType) && t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *");
            }
          }]);

          return or;
        }();

        Object(o["default"])(or, er);
        var rr = "__lodash_hash_undefined__";

        var sr = function sr(t) {
          return this.__data__.set(t, rr), this;
        };

        var ar = function ar(t) {
          return this.__data__.has(t);
        };

        function cr(t) {
          var e = -1,
              n = null == t ? 0 : t.length;

          for (this.__data__ = new it(); ++e < n;) {
            this.add(t[e]);
          }
        }

        cr.prototype.add = cr.prototype.push = sr, cr.prototype.has = ar;
        var lr = cr;

        var dr = function dr(t, e) {
          for (var n = -1, i = null == t ? 0 : t.length; ++n < i;) {
            if (e(t[n], n, t)) return !0;
          }

          return !1;
        };

        var ur = function ur(t, e) {
          return t.has(e);
        },
            hr = 1,
            fr = 2;

        var gr = function gr(t, e, n, i, o, r) {
          var s = n & hr,
              a = t.length,
              c = e.length;
          if (a != c && !(s && c > a)) return !1;
          var l = r.get(t),
              d = r.get(e);
          if (l && d) return l == e && d == t;
          var u = -1,
              h = !0,
              f = n & fr ? new lr() : void 0;

          for (r.set(t, e), r.set(e, t); ++u < a;) {
            var g = t[u],
                m = e[u];
            if (i) var p = s ? i(m, g, u, e, t, r) : i(g, m, u, t, e, r);

            if (void 0 !== p) {
              if (p) continue;
              h = !1;
              break;
            }

            if (f) {
              if (!dr(e, function (t, e) {
                if (!ur(f, e) && (g === t || o(g, t, n, i, r))) return f.push(e);
              })) {
                h = !1;
                break;
              }
            } else if (g !== m && !o(g, m, n, i, r)) {
              h = !1;
              break;
            }
          }

          return r["delete"](t), r["delete"](e), h;
        };

        var mr = function mr(t) {
          var e = -1,
              n = Array(t.size);
          return t.forEach(function (t, i) {
            n[++e] = [i, t];
          }), n;
        };

        var pr = function pr(t) {
          var e = -1,
              n = Array(t.size);
          return t.forEach(function (t) {
            n[++e] = t;
          }), n;
        },
            br = 1,
            kr = 2,
            _r = "[object Boolean]",
            wr = "[object Date]",
            vr = "[object Error]",
            yr = "[object Map]",
            xr = "[object Number]",
            Cr = "[object RegExp]",
            Tr = "[object Set]",
            Ar = "[object String]",
            Er = "[object Symbol]",
            Sr = "[object ArrayBuffer]",
            Ir = "[object DataView]",
            Or = ee.a ? ee.a.prototype : void 0,
            Rr = Or ? Or.valueOf : void 0;

        var Mr = function Mr(t, e, n, i, o, r, s) {
          switch (n) {
            case Ir:
              if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset) return !1;
              t = t.buffer, e = e.buffer;

            case Sr:
              return !(t.byteLength != e.byteLength || !r(new Kt(t), new Kt(e)));

            case _r:
            case wr:
            case xr:
              return Object(v.a)(+t, +e);

            case vr:
              return t.name == e.name && t.message == e.message;

            case Cr:
            case Ar:
              return t == e + "";

            case yr:
              var a = mr;

            case Tr:
              var c = i & br;
              if (a || (a = pr), t.size != e.size && !c) return !1;
              var l = s.get(t);
              if (l) return l == e;
              i |= kr, s.set(t, e);
              var d = gr(a(t), a(e), i, o, r, s);
              return s["delete"](t), d;

            case Er:
              if (Rr) return Rr.call(t) == Rr.call(e);
          }

          return !1;
        },
            Pr = 1,
            Nr = Object.prototype.hasOwnProperty;

        var Dr = function Dr(t, e, n, i, o, r) {
          var s = n & Pr,
              a = Nt(t),
              c = a.length;
          if (c != Nt(e).length && !s) return !1;

          for (var l = c; l--;) {
            var d = a[l];
            if (!(s ? d in e : Nr.call(e, d))) return !1;
          }

          var u = r.get(t),
              h = r.get(e);
          if (u && h) return u == e && h == t;
          var f = !0;
          r.set(t, e), r.set(e, t);

          for (var g = s; ++l < c;) {
            var m = t[d = a[l]],
                p = e[d];
            if (i) var b = s ? i(p, m, d, e, t, r) : i(m, p, d, t, e, r);

            if (!(void 0 === b ? m === p || o(m, p, n, i, r) : b)) {
              f = !1;
              break;
            }

            g || (g = "constructor" == d);
          }

          if (f && !g) {
            var k = t.constructor,
                _ = e.constructor;
            k != _ && "constructor" in t && "constructor" in e && !("function" == typeof k && k instanceof k && "function" == typeof _ && _ instanceof _) && (f = !1);
          }

          return r["delete"](t), r["delete"](e), f;
        },
            jr = 1,
            Br = "[object Arguments]",
            Lr = "[object Array]",
            zr = "[object Object]",
            Fr = Object.prototype.hasOwnProperty;

        var Vr = function Vr(t, e, n, i, o, r) {
          var s = Object(Mt.a)(t),
              a = Object(Mt.a)(e),
              c = s ? Lr : Yt(t),
              l = a ? Lr : Yt(e),
              d = (c = c == Br ? zr : c) == zr,
              u = (l = l == Br ? zr : l) == zr,
              h = c == l;

          if (h && Object(Oe.a)(t)) {
            if (!Object(Oe.a)(e)) return !1;
            s = !0, d = !1;
          }

          if (h && !d) return r || (r = new at()), s || Object(ai.a)(t) ? gr(t, e, n, i, o, r) : Mr(t, e, c, n, i, o, r);

          if (!(n & jr)) {
            var f = d && Fr.call(t, "__wrapped__"),
                g = u && Fr.call(e, "__wrapped__");

            if (f || g) {
              var m = f ? t.value() : t,
                  p = g ? e.value() : e;
              return r || (r = new at()), o(m, p, n, i, r);
            }
          }

          return !!h && (r || (r = new at()), Dr(t, e, n, i, o, r));
        };

        var Ur = function t(e, n, i, o, r) {
          return e === n || (null == e || null == n || !Object(h.a)(e) && !Object(h.a)(n) ? e != e && n != n : Vr(e, n, i, o, t, r));
        };

        var Hr = function Hr(t, e, n) {
          var i = (n = "function" == typeof n ? n : void 0) ? n(t, e) : void 0;
          return void 0 === i ? Ur(t, e, void 0, n) : !!i;
        };

        var qr = /*#__PURE__*/function (_or) {
          _inherits(qr, _or);

          var _super73 = _createSuper(qr);

          function qr(t) {
            var _this97;

            _classCallCheck(this, qr);

            _this97 = _super73.call(this, t), _this97._config = {
              childList: !0,
              characterData: !0,
              characterDataOldValue: !0,
              subtree: !0
            }, _this97.domConverter = t.domConverter, _this97.renderer = t._renderer, _this97._domElements = [], _this97._mutationObserver = new window.MutationObserver(_this97._onMutations.bind(_assertThisInitialized(_this97)));
            return _this97;
          }

          _createClass(qr, [{
            key: "flush",
            value: function flush() {
              this._onMutations(this._mutationObserver.takeRecords());
            }
          }, {
            key: "observe",
            value: function observe(t) {
              this._domElements.push(t), this.isEnabled && this._mutationObserver.observe(t, this._config);
            }
          }, {
            key: "enable",
            value: function enable() {
              _get3(_getPrototypeOf(qr.prototype), "enable", this).call(this);

              var _iterator89 = _createForOfIteratorHelper(this._domElements),
                  _step89;

              try {
                for (_iterator89.s(); !(_step89 = _iterator89.n()).done;) {
                  var _t63 = _step89.value;

                  this._mutationObserver.observe(_t63, this._config);
                }
              } catch (err) {
                _iterator89.e(err);
              } finally {
                _iterator89.f();
              }
            }
          }, {
            key: "disable",
            value: function disable() {
              _get3(_getPrototypeOf(qr.prototype), "disable", this).call(this), this._mutationObserver.disconnect();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(qr.prototype), "destroy", this).call(this), this._mutationObserver.disconnect();
            }
          }, {
            key: "_onMutations",
            value: function _onMutations(t) {
              if (0 === t.length) return;
              var e = this.domConverter,
                  n = new Map(),
                  i = new Set();

              var _iterator90 = _createForOfIteratorHelper(t),
                  _step90;

              try {
                for (_iterator90.s(); !(_step90 = _iterator90.n()).done;) {
                  var _n74 = _step90.value;

                  if ("childList" === _n74.type) {
                    var _t65 = e.mapDomToView(_n74.target);

                    if (_t65 && (_t65.is("uiElement") || _t65.is("rawElement"))) continue;
                    _t65 && !this._isBogusBrMutation(_n74) && i.add(_t65);
                  }
                }
              } catch (err) {
                _iterator90.e(err);
              } finally {
                _iterator90.f();
              }

              var _iterator91 = _createForOfIteratorHelper(t),
                  _step91;

              try {
                for (_iterator91.s(); !(_step91 = _iterator91.n()).done;) {
                  var _o29 = _step91.value;

                  var _t66 = e.mapDomToView(_o29.target);

                  if ((!_t66 || !_t66.is("uiElement") && !_t66.is("rawElement")) && "characterData" === _o29.type) {
                    var _t67 = e.findCorrespondingViewText(_o29.target);

                    _t67 && !i.has(_t67.parent) ? n.set(_t67, {
                      type: "text",
                      oldText: _t67.data,
                      newText: Ro(_o29.target),
                      node: _t67
                    }) : !_t67 && Io(_o29.target) && i.add(e.mapDomToView(_o29.target.parentNode));
                  }
                }
              } catch (err) {
                _iterator91.e(err);
              } finally {
                _iterator91.f();
              }

              var o = [];

              var _iterator92 = _createForOfIteratorHelper(n.values()),
                  _step92;

              try {
                for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {
                  var _t68 = _step92.value;
                  this.renderer.markToSync("text", _t68.node), o.push(_t68);
                }
              } catch (err) {
                _iterator92.e(err);
              } finally {
                _iterator92.f();
              }

              var _iterator93 = _createForOfIteratorHelper(i),
                  _step93;

              try {
                for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {
                  var _t69 = _step93.value;

                  var _n75 = e.mapViewToDom(_t69),
                      _i52 = Array.from(_t69.getChildren()),
                      _r23 = Array.from(e.domChildrenToView(_n75, {
                    withChildren: !1
                  }));

                  Hr(_i52, _r23, a) || (this.renderer.markToSync("children", _t69), o.push({
                    type: "children",
                    oldChildren: _i52,
                    newChildren: _r23,
                    node: _t69
                  }));
                }
              } catch (err) {
                _iterator93.e(err);
              } finally {
                _iterator93.f();
              }

              var r = t[0].target.ownerDocument.getSelection();
              var s = null;

              if (r && r.anchorNode) {
                var _t64 = e.domPositionToView(r.anchorNode, r.anchorOffset),
                    _n73 = e.domPositionToView(r.focusNode, r.focusOffset);

                _t64 && _n73 && (s = new Pi(_t64)).setFocus(_n73);
              }

              function a(t, e) {
                if (!Array.isArray(t)) return t === e || !(!t.is("$text") || !e.is("$text")) && t.data === e.data;
              }

              o.length && (this.document.fire("mutations", o, s), this.view.forceRender());
            }
          }, {
            key: "_isBogusBrMutation",
            value: function _isBogusBrMutation(t) {
              var e = null;
              return null === t.nextSibling && 0 === t.removedNodes.length && 1 == t.addedNodes.length && (e = this.domConverter.domToView(t.addedNodes[0], {
                withChildren: !1
              })), e && e.is("element", "br");
            }
          }]);

          return qr;
        }(or);

        var Wr = /*#__PURE__*/function () {
          function Wr(t, e, n) {
            _classCallCheck(this, Wr);

            this.view = t, this.document = t.document, this.domEvent = e, this.domTarget = e.target, Object(tr.a)(this, n);
          }

          _createClass(Wr, [{
            key: "target",
            get: function get() {
              return this.view.domConverter.mapDomToView(this.domTarget);
            }
          }, {
            key: "preventDefault",
            value: function preventDefault() {
              this.domEvent.preventDefault();
            }
          }, {
            key: "stopPropagation",
            value: function stopPropagation() {
              this.domEvent.stopPropagation();
            }
          }]);

          return Wr;
        }();

        var $r = /*#__PURE__*/function (_or2) {
          _inherits($r, _or2);

          var _super74 = _createSuper($r);

          function $r(t) {
            var _this98;

            _classCallCheck(this, $r);

            _this98 = _super74.call(this, t), _this98.useCapture = !1;
            return _this98;
          }

          _createClass($r, [{
            key: "observe",
            value: function observe(t) {
              var _this99 = this;

              ("string" == typeof this.domEventType ? [this.domEventType] : this.domEventType).forEach(function (e) {
                _this99.listenTo(t, e, function (t, e) {
                  _this99.isEnabled && !_this99.checkShouldIgnoreEventFromTarget(e.target) && _this99.onDomEvent(e);
                }, {
                  useCapture: _this99.useCapture
                });
              });
            }
          }, {
            key: "fire",
            value: function fire(t, e, n) {
              this.isEnabled && this.document.fire(t, new Wr(this.view, e, n));
            }
          }]);

          return $r;
        }(or);

        var Yr = /*#__PURE__*/function (_$r) {
          _inherits(Yr, _$r);

          var _super75 = _createSuper(Yr);

          function Yr(t) {
            var _this100;

            _classCallCheck(this, Yr);

            _this100 = _super75.call(this, t), _this100.domEventType = ["keydown", "keyup"];
            return _this100;
          }

          _createClass(Yr, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              this.fire(t.type, t, {
                keyCode: t.keyCode,
                altKey: t.altKey,
                ctrlKey: t.ctrlKey,
                shiftKey: t.shiftKey,
                metaKey: t.metaKey,

                get keystroke() {
                  return no(this);
                }

              });
            }
          }]);

          return Yr;
        }($r);

        var Jr = function Jr() {
          return D.a.Date.now();
        },
            Gr = /\s/;

        var Kr = function Kr(t) {
          for (var e = t.length; e-- && Gr.test(t.charAt(e));) {
            ;
          }

          return e;
        },
            Qr = /^\s+/;

        var Xr = function Xr(t) {
          return t ? t.slice(0, Kr(t) + 1).replace(Qr, "") : t;
        },
            Zr = NaN,
            ts = /^[-+]0x[0-9a-f]+$/i,
            es = /^0b[01]+$/i,
            ns = /^0o[0-7]+$/i,
            is = parseInt;

        var os = function os(t) {
          if ("number" == typeof t) return t;
          if (Sn(t)) return Zr;

          if (Object(Ae.a)(t)) {
            var e = "function" == typeof t.valueOf ? t.valueOf() : t;
            t = Object(Ae.a)(e) ? e + "" : e;
          }

          if ("string" != typeof t) return 0 === t ? t : +t;
          t = Xr(t);
          var n = es.test(t);
          return n || ns.test(t) ? is(t.slice(2), n ? 2 : 8) : ts.test(t) ? Zr : +t;
        },
            rs = "Expected a function",
            ss = Math.max,
            as = Math.min;

        var cs = function cs(t, e, n) {
          var i,
              o,
              r,
              s,
              a,
              c,
              l = 0,
              d = !1,
              u = !1,
              h = !0;
          if ("function" != typeof t) throw new TypeError(rs);

          function f(e) {
            var n = i,
                r = o;
            return i = o = void 0, l = e, s = t.apply(r, n);
          }

          function g(t) {
            var n = t - c;
            return void 0 === c || n >= e || n < 0 || u && t - l >= r;
          }

          function m() {
            var t = Jr();
            if (g(t)) return p(t);
            a = setTimeout(m, function (t) {
              var n = e - (t - c);
              return u ? as(n, r - (t - l)) : n;
            }(t));
          }

          function p(t) {
            return a = void 0, h && i ? f(t) : (i = o = void 0, s);
          }

          function b() {
            var t = Jr(),
                n = g(t);

            if (i = arguments, o = this, c = t, n) {
              if (void 0 === a) return function (t) {
                return l = t, a = setTimeout(m, e), d ? f(t) : s;
              }(c);
              if (u) return clearTimeout(a), a = setTimeout(m, e), f(c);
            }

            return void 0 === a && (a = setTimeout(m, e)), s;
          }

          return e = os(e) || 0, Object(Ae.a)(n) && (d = !!n.leading, r = (u = "maxWait" in n) ? ss(os(n.maxWait) || 0, e) : r, h = "trailing" in n ? !!n.trailing : h), b.cancel = function () {
            void 0 !== a && clearTimeout(a), l = 0, i = c = o = a = void 0;
          }, b.flush = function () {
            return void 0 === a ? s : p(Jr());
          }, b;
        };

        var ls = /*#__PURE__*/function (_or3) {
          _inherits(ls, _or3);

          var _super76 = _createSuper(ls);

          function ls(t) {
            var _this101;

            _classCallCheck(this, ls);

            _this101 = _super76.call(this, t), _this101._fireSelectionChangeDoneDebounced = cs(function (t) {
              return _this101.document.fire("selectionChangeDone", t);
            }, 200);
            return _this101;
          }

          _createClass(ls, [{
            key: "observe",
            value: function observe() {
              var _this102 = this;

              var t = this.document;
              t.on("arrowKey", function (e, n) {
                t.selection.isFake && _this102.isEnabled && n.preventDefault();
              }, {
                context: "$capture"
              }), t.on("arrowKey", function (e, n) {
                t.selection.isFake && _this102.isEnabled && _this102._handleSelectionMove(n.keyCode);
              }, {
                priority: "lowest"
              });
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(ls.prototype), "destroy", this).call(this), this._fireSelectionChangeDoneDebounced.cancel();
            }
          }, {
            key: "_handleSelectionMove",
            value: function _handleSelectionMove(t) {
              var e = this.document.selection,
                  n = new Pi(e.getRanges(), {
                backward: e.isBackward,
                fake: !1
              });
              t != to.arrowleft && t != to.arrowup || n.setTo(n.getFirstPosition()), t != to.arrowright && t != to.arrowdown || n.setTo(n.getLastPosition());
              var i = {
                oldSelection: e,
                newSelection: n,
                domSelection: null
              };
              this.document.fire("selectionChange", i), this._fireSelectionChangeDoneDebounced(i);
            }
          }]);

          return ls;
        }(or);

        var ds = /*#__PURE__*/function (_or4) {
          _inherits(ds, _or4);

          var _super77 = _createSuper(ds);

          function ds(t) {
            var _this103;

            _classCallCheck(this, ds);

            _this103 = _super77.call(this, t), _this103.mutationObserver = t.getObserver(qr), _this103.selection = _this103.document.selection, _this103.domConverter = t.domConverter, _this103._documents = new WeakSet(), _this103._fireSelectionChangeDoneDebounced = cs(function (t) {
              return _this103.document.fire("selectionChangeDone", t);
            }, 200), _this103._clearInfiniteLoopInterval = setInterval(function () {
              return _this103._clearInfiniteLoop();
            }, 1e3), _this103._loopbackCounter = 0;
            return _this103;
          }

          _createClass(ds, [{
            key: "observe",
            value: function observe(t) {
              var _this104 = this;

              var e = t.ownerDocument;
              this._documents.has(e) || (this.listenTo(e, "selectionchange", function (t, n) {
                _this104._handleSelectionChange(n, e);
              }), this._documents.add(e));
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(ds.prototype), "destroy", this).call(this), clearInterval(this._clearInfiniteLoopInterval), this._fireSelectionChangeDoneDebounced.cancel();
            }
          }, {
            key: "_handleSelectionChange",
            value: function _handleSelectionChange(t, e) {
              if (!this.isEnabled) return;
              var n = e.defaultView.getSelection();
              if (this.checkShouldIgnoreEventFromTarget(n.anchorNode)) return;
              this.mutationObserver.flush();
              var i = this.domConverter.domSelectionToView(n);

              if (0 != i.rangeCount) {
                if (this.view.hasDomSelection = !0, !(this.selection.isEqual(i) && this.domConverter.isDomSelectionCorrect(n) || ++this._loopbackCounter > 60)) if (this.selection.isSimilar(i)) this.view.forceRender();else {
                  var _t70 = {
                    oldSelection: this.selection,
                    newSelection: i,
                    domSelection: n
                  };
                  this.document.fire("selectionChange", _t70), this._fireSelectionChangeDoneDebounced(_t70);
                }
              } else this.view.hasDomSelection = !1;
            }
          }, {
            key: "_clearInfiniteLoop",
            value: function _clearInfiniteLoop() {
              this._loopbackCounter = 0;
            }
          }]);

          return ds;
        }(or);

        var us = /*#__PURE__*/function (_$r2) {
          _inherits(us, _$r2);

          var _super78 = _createSuper(us);

          function us(t) {
            var _this105;

            _classCallCheck(this, us);

            _this105 = _super78.call(this, t), _this105.domEventType = ["focus", "blur"], _this105.useCapture = !0;
            var e = _this105.document;
            e.on("focus", function () {
              e.isFocused = !0, _this105._renderTimeoutId = setTimeout(function () {
                return t.change(function () {});
              }, 50);
            }), e.on("blur", function (n, i) {
              var o = e.selection.editableElement;
              null !== o && o !== i.target || (e.isFocused = !1, t.change(function () {}));
            });
            return _this105;
          }

          _createClass(us, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              this.fire(t.type, t);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._renderTimeoutId && clearTimeout(this._renderTimeoutId), _get3(_getPrototypeOf(us.prototype), "destroy", this).call(this);
            }
          }]);

          return us;
        }($r);

        var hs = /*#__PURE__*/function (_$r3) {
          _inherits(hs, _$r3);

          var _super79 = _createSuper(hs);

          function hs(t) {
            var _this106;

            _classCallCheck(this, hs);

            _this106 = _super79.call(this, t), _this106.domEventType = ["compositionstart", "compositionupdate", "compositionend"];
            var e = _this106.document;
            e.on("compositionstart", function () {
              e.isComposing = !0;
            }), e.on("compositionend", function () {
              e.isComposing = !1;
            });
            return _this106;
          }

          _createClass(hs, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              this.fire(t.type, t);
            }
          }]);

          return hs;
        }($r);

        var fs = /*#__PURE__*/function (_$r4) {
          _inherits(fs, _$r4);

          var _super80 = _createSuper(fs);

          function fs(t) {
            var _this107;

            _classCallCheck(this, fs);

            _this107 = _super80.call(this, t), _this107.domEventType = ["beforeinput"];
            return _this107;
          }

          _createClass(fs, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              this.fire(t.type, t);
            }
          }]);

          return fs;
        }($r);

        var gs = /*#__PURE__*/function () {
          function gs() {
            _classCallCheck(this, gs);

            this._replacedElements = [];
          }

          _createClass(gs, [{
            key: "replace",
            value: function replace(t, e) {
              this._replacedElements.push({
                element: t,
                newElement: e
              }), t.style.display = "none", e && t.parentNode.insertBefore(e, t.nextSibling);
            }
          }, {
            key: "restore",
            value: function restore() {
              this._replacedElements.forEach(function (_ref20) {
                var t = _ref20.element,
                    e = _ref20.newElement;
                t.style.display = "", e && e.remove();
              }), this._replacedElements = [];
            }
          }]);

          return gs;
        }();

        var ms = "[object String]";

        var ps = function ps(t) {
          return "string" == typeof t || !Object(Mt.a)(t) && Object(h.a)(t) && Object(l.a)(t) == ms;
        };

        function bs(t) {
          return "[object Range]" == Object.prototype.toString.apply(t);
        }

        function ks(t) {
          var e = t.ownerDocument.defaultView.getComputedStyle(t);
          return {
            top: parseInt(e.borderTopWidth, 10),
            right: parseInt(e.borderRightWidth, 10),
            bottom: parseInt(e.borderBottomWidth, 10),
            left: parseInt(e.borderLeftWidth, 10)
          };
        }

        var _s = ["top", "right", "bottom", "left", "width", "height"];

        var ws = /*#__PURE__*/function () {
          function ws(t) {
            _classCallCheck(this, ws);

            var e = bs(t);
            if (Object.defineProperty(this, "_source", {
              value: t._source || t,
              writable: !0,
              enumerable: !1
            }), Ze(t) || e) {
              if (e) {
                var _e74 = ws.getDomRangeRects(t);

                vs(this, ws.getBoundingRect(_e74));
              } else vs(this, t.getBoundingClientRect());
            } else if (Zo(t)) {
              var _e75 = t.innerWidth,
                  _n76 = t.innerHeight;
              vs(this, {
                top: 0,
                right: _e75,
                bottom: _n76,
                left: 0,
                width: _e75,
                height: _n76
              });
            } else vs(this, t);
          }

          _createClass(ws, [{
            key: "clone",
            value: function clone() {
              return new ws(this);
            }
          }, {
            key: "moveTo",
            value: function moveTo(t, e) {
              return this.top = e, this.right = t + this.width, this.bottom = e + this.height, this.left = t, this;
            }
          }, {
            key: "moveBy",
            value: function moveBy(t, e) {
              return this.top += e, this.right += t, this.left += t, this.bottom += e, this;
            }
          }, {
            key: "getIntersection",
            value: function getIntersection(t) {
              var e = {
                top: Math.max(this.top, t.top),
                right: Math.min(this.right, t.right),
                bottom: Math.min(this.bottom, t.bottom),
                left: Math.max(this.left, t.left)
              };
              return e.width = e.right - e.left, e.height = e.bottom - e.top, e.width < 0 || e.height < 0 ? null : new ws(e);
            }
          }, {
            key: "getIntersectionArea",
            value: function getIntersectionArea(t) {
              var e = this.getIntersection(t);
              return e ? e.getArea() : 0;
            }
          }, {
            key: "getArea",
            value: function getArea() {
              return this.width * this.height;
            }
          }, {
            key: "getVisible",
            value: function getVisible() {
              var t = this._source;
              var e = this.clone();

              if (!ys(t)) {
                var _n77 = t.parentNode || t.commonAncestorContainer;

                for (; _n77 && !ys(_n77);) {
                  var _t71 = new ws(_n77),
                      _i53 = e.getIntersection(_t71);

                  if (!_i53) return null;
                  _i53.getArea() < e.getArea() && (e = _i53), _n77 = _n77.parentNode;
                }
              }

              return e;
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              var _iterator94 = _createForOfIteratorHelper(_s),
                  _step94;

              try {
                for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {
                  var _e76 = _step94.value;
                  if (this[_e76] !== t[_e76]) return !1;
                }
              } catch (err) {
                _iterator94.e(err);
              } finally {
                _iterator94.f();
              }

              return !0;
            }
          }, {
            key: "contains",
            value: function contains(t) {
              var e = this.getIntersection(t);
              return !(!e || !e.isEqual(t));
            }
          }, {
            key: "excludeScrollbarsAndBorders",
            value: function excludeScrollbarsAndBorders() {
              var t = this._source;
              var e, n, i;
              if (Zo(t)) e = t.innerWidth - t.document.documentElement.clientWidth, n = t.innerHeight - t.document.documentElement.clientHeight, i = t.getComputedStyle(t.document.documentElement).direction;else {
                var _o30 = ks(this._source);

                e = t.offsetWidth - t.clientWidth - _o30.left - _o30.right, n = t.offsetHeight - t.clientHeight - _o30.top - _o30.bottom, i = t.ownerDocument.defaultView.getComputedStyle(t).direction, this.left += _o30.left, this.top += _o30.top, this.right -= _o30.right, this.bottom -= _o30.bottom, this.width = this.right - this.left, this.height = this.bottom - this.top;
              }
              return this.width -= e, "ltr" === i ? this.right -= e : this.left += e, this.height -= n, this.bottom -= n, this;
            }
          }], [{
            key: "getDomRangeRects",
            value: function getDomRangeRects(t) {
              var e = [],
                  n = Array.from(t.getClientRects());

              if (n.length) {
                var _iterator95 = _createForOfIteratorHelper(n),
                    _step95;

                try {
                  for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {
                    var _t72 = _step95.value;
                    e.push(new ws(_t72));
                  }
                } catch (err) {
                  _iterator95.e(err);
                } finally {
                  _iterator95.f();
                }
              } else {
                var _n78 = t.startContainer;
                xo(_n78) && (_n78 = _n78.parentNode);

                var _i54 = new ws(_n78.getBoundingClientRect());

                _i54.right = _i54.left, _i54.width = 0, e.push(_i54);
              }

              return e;
            }
          }, {
            key: "getBoundingRect",
            value: function getBoundingRect(t) {
              var e = {
                left: Number.POSITIVE_INFINITY,
                top: Number.POSITIVE_INFINITY,
                right: Number.NEGATIVE_INFINITY,
                bottom: Number.NEGATIVE_INFINITY
              };
              var n = 0;

              var _iterator96 = _createForOfIteratorHelper(t),
                  _step96;

              try {
                for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {
                  var _i55 = _step96.value;
                  n++, e.left = Math.min(e.left, _i55.left), e.top = Math.min(e.top, _i55.top), e.right = Math.max(e.right, _i55.right), e.bottom = Math.max(e.bottom, _i55.bottom);
                }
              } catch (err) {
                _iterator96.e(err);
              } finally {
                _iterator96.f();
              }

              return 0 == n ? null : (e.width = e.right - e.left, e.height = e.bottom - e.top, new ws(e));
            }
          }]);

          return ws;
        }();

        function vs(t, e) {
          var _iterator97 = _createForOfIteratorHelper(_s),
              _step97;

          try {
            for (_iterator97.s(); !(_step97 = _iterator97.n()).done;) {
              var _n79 = _step97.value;
              t[_n79] = e[_n79];
            }
          } catch (err) {
            _iterator97.e(err);
          } finally {
            _iterator97.f();
          }
        }

        function ys(t) {
          return !!Ze(t) && t === t.ownerDocument.body;
        }

        var xs = 100;

        var Cs = /*#__PURE__*/function () {
          function Cs(t, e) {
            _classCallCheck(this, Cs);

            Cs._observerInstance || Cs._createObserver(), this._element = t, this._callback = e, Cs._addElementCallback(t, e), Cs._observerInstance.observe(t);
          }

          _createClass(Cs, [{
            key: "destroy",
            value: function destroy() {
              Cs._deleteElementCallback(this._element, this._callback);
            }
          }], [{
            key: "_addElementCallback",
            value: function _addElementCallback(t, e) {
              Cs._elementCallbacks || (Cs._elementCallbacks = new Map());

              var n = Cs._elementCallbacks.get(t);

              n || (n = new Set(), Cs._elementCallbacks.set(t, n)), n.add(e);
            }
          }, {
            key: "_deleteElementCallback",
            value: function _deleteElementCallback(t, e) {
              var n = Cs._getElementCallbacks(t);

              n && (n["delete"](e), n.size || (Cs._elementCallbacks["delete"](t), Cs._observerInstance.unobserve(t))), Cs._elementCallbacks && !Cs._elementCallbacks.size && (Cs._observerInstance = null, Cs._elementCallbacks = null);
            }
          }, {
            key: "_getElementCallbacks",
            value: function _getElementCallbacks(t) {
              return Cs._elementCallbacks ? Cs._elementCallbacks.get(t) : null;
            }
          }, {
            key: "_createObserver",
            value: function _createObserver() {
              var t;
              t = "function" == typeof Ho.window.ResizeObserver ? Ho.window.ResizeObserver : Ts, Cs._observerInstance = new t(function (t) {
                var _iterator98 = _createForOfIteratorHelper(t),
                    _step98;

                try {
                  for (_iterator98.s(); !(_step98 = _iterator98.n()).done;) {
                    var _e77 = _step98.value;

                    var _t73 = Cs._getElementCallbacks(_e77.target);

                    if (_t73) {
                      var _iterator99 = _createForOfIteratorHelper(_t73),
                          _step99;

                      try {
                        for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {
                          var _n80 = _step99.value;

                          _n80(_e77);
                        }
                      } catch (err) {
                        _iterator99.e(err);
                      } finally {
                        _iterator99.f();
                      }
                    }
                  }
                } catch (err) {
                  _iterator98.e(err);
                } finally {
                  _iterator98.f();
                }
              });
            }
          }]);

          return Cs;
        }();

        Cs._observerInstance = null, Cs._elementCallbacks = null;

        var Ts = /*#__PURE__*/function () {
          function Ts(t) {
            _classCallCheck(this, Ts);

            this._callback = t, this._elements = new Set(), this._previousRects = new Map(), this._periodicCheckTimeout = null;
          }

          _createClass(Ts, [{
            key: "observe",
            value: function observe(t) {
              this._elements.add(t), this._checkElementRectsAndExecuteCallback(), 1 === this._elements.size && this._startPeriodicCheck();
            }
          }, {
            key: "unobserve",
            value: function unobserve(t) {
              this._elements["delete"](t), this._previousRects["delete"](t), this._elements.size || this._stopPeriodicCheck();
            }
          }, {
            key: "_startPeriodicCheck",
            value: function _startPeriodicCheck() {
              var _this108 = this;

              var t = function t() {
                _this108._checkElementRectsAndExecuteCallback(), _this108._periodicCheckTimeout = setTimeout(t, xs);
              };

              this.listenTo(Ho.window, "resize", function () {
                _this108._checkElementRectsAndExecuteCallback();
              }), this._periodicCheckTimeout = setTimeout(t, xs);
            }
          }, {
            key: "_stopPeriodicCheck",
            value: function _stopPeriodicCheck() {
              clearTimeout(this._periodicCheckTimeout), this.stopListening(), this._previousRects.clear();
            }
          }, {
            key: "_checkElementRectsAndExecuteCallback",
            value: function _checkElementRectsAndExecuteCallback() {
              var t = [];

              var _iterator100 = _createForOfIteratorHelper(this._elements),
                  _step100;

              try {
                for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {
                  var _e78 = _step100.value;
                  this._hasRectChanged(_e78) && t.push({
                    target: _e78,
                    contentRect: this._previousRects.get(_e78)
                  });
                }
              } catch (err) {
                _iterator100.e(err);
              } finally {
                _iterator100.f();
              }

              t.length && this._callback(t);
            }
          }, {
            key: "_hasRectChanged",
            value: function _hasRectChanged(t) {
              if (!t.ownerDocument.body.contains(t)) return !1;

              var e = new ws(t),
                  n = this._previousRects.get(t),
                  i = !n || !n.isEqual(e);

              return this._previousRects.set(t, e), i;
            }
          }]);

          return Ts;
        }();

        function As(t) {
          return function (e) {
            return e + t;
          };
        }

        function Es(t) {
          var e = t.next();
          return e.done ? null : e.value;
        }

        Object(o["default"])(Ts, er);

        var Ss = /*#__PURE__*/function () {
          function Ss() {
            _classCallCheck(this, Ss);

            this.set("isFocused", !1), this.set("focusedElement", null), this._elements = new Set(), this._nextEventLoopTimeout = null;
          }

          _createClass(Ss, [{
            key: "add",
            value: function add(t) {
              var _this109 = this;

              if (this._elements.has(t)) throw new rn["default"]("focustracker-add-element-already-exist", this);
              this.listenTo(t, "focus", function () {
                return _this109._focus(t);
              }, {
                useCapture: !0
              }), this.listenTo(t, "blur", function () {
                return _this109._blur();
              }, {
                useCapture: !0
              }), this._elements.add(t);
            }
          }, {
            key: "remove",
            value: function remove(t) {
              t === this.focusedElement && this._blur(t), this._elements.has(t) && (this.stopListening(t), this._elements["delete"](t));
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.stopListening();
            }
          }, {
            key: "_focus",
            value: function _focus(t) {
              clearTimeout(this._nextEventLoopTimeout), this.focusedElement = t, this.isFocused = !0;
            }
          }, {
            key: "_blur",
            value: function _blur() {
              var _this110 = this;

              clearTimeout(this._nextEventLoopTimeout), this._nextEventLoopTimeout = setTimeout(function () {
                _this110.focusedElement = null, _this110.isFocused = !1;
              }, 0);
            }
          }]);

          return Ss;
        }();

        Object(o["default"])(Ss, er), Object(o["default"])(Ss, i["default"]);

        var Is = /*#__PURE__*/function () {
          function Is() {
            _classCallCheck(this, Is);

            this._listener = Object.create(er);
          }

          _createClass(Is, [{
            key: "listenTo",
            value: function listenTo(t) {
              var _this111 = this;

              this._listener.listenTo(t, "keydown", function (t, e) {
                _this111._listener.fire("_keydown:" + no(e), e);
              });
            }
          }, {
            key: "set",
            value: function set(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var i = io(t),
                  o = n.priority;

              this._listener.listenTo(this._listener, "_keydown:" + i, function (t, n) {
                e(n, function () {
                  n.preventDefault(), n.stopPropagation(), t.stop();
                }), t["return"] = !0;
              }, {
                priority: o
              });
            }
          }, {
            key: "press",
            value: function press(t) {
              return !!this._listener.fire("_keydown:" + no(t), t);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._listener.stopListening();
            }
          }]);

          return Is;
        }();

        var Os = n(27);

        var Rs = /*#__PURE__*/function (_or5) {
          _inherits(Rs, _or5);

          var _super81 = _createSuper(Rs);

          function Rs(t) {
            var _this112;

            _classCallCheck(this, Rs);

            _this112 = _super81.call(this, t), _this112.document.on("keydown", function (t, e) {
              if (_this112.isEnabled && function (t) {
                return t == to.arrowright || t == to.arrowleft || t == to.arrowup || t == to.arrowdown;
              }(e.keyCode)) {
                var _n81 = new ji(_this112.document, "arrowKey", _this112.document.selection.getFirstRange());

                _this112.document.fire(_n81, e), _n81.stop.called && t.stop();
              }
            });
            return _this112;
          }

          _createClass(Rs, [{
            key: "observe",
            value: function observe() {}
          }]);

          return Rs;
        }(or);

        function Ms(_ref21) {
          var t = _ref21.target,
              _ref21$viewportOffset = _ref21.viewportOffset,
              e = _ref21$viewportOffset === void 0 ? 0 : _ref21$viewportOffset;
          var n = zs(t);
          var i = n,
              o = null;

          for (; i;) {
            var _r24 = void 0;

            Ns(_r24 = Fs(i == n ? t : o), function () {
              return Vs(t, i);
            });

            var _s11 = Vs(t, i);

            if (Ps(i, _s11, e), i.parent != i) {
              if (o = i.frameElement, i = i.parent, !o) return;
            } else i = null;
          }
        }

        function Ps(t, e, n) {
          var i = e.clone().moveBy(0, n),
              o = e.clone().moveBy(0, -n),
              r = new ws(t).excludeScrollbarsAndBorders();

          if (![o, i].every(function (t) {
            return r.contains(t);
          })) {
            var _s12 = t.scrollX,
                _a9 = t.scrollY;
            js(o, r) ? _a9 -= r.top - e.top + n : Ds(i, r) && (_a9 += e.bottom - r.bottom + n), Bs(e, r) ? _s12 -= r.left - e.left + n : Ls(e, r) && (_s12 += e.right - r.right + n), t.scrollTo(_s12, _a9);
          }
        }

        function Ns(t, e) {
          var n = zs(t);
          var i, o;

          for (; t != n.document.body;) {
            o = e(), (i = new ws(t).excludeScrollbarsAndBorders()).contains(o) || (js(o, i) ? t.scrollTop -= i.top - o.top : Ds(o, i) && (t.scrollTop += o.bottom - i.bottom), Bs(o, i) ? t.scrollLeft -= i.left - o.left : Ls(o, i) && (t.scrollLeft += o.right - i.right)), t = t.parentNode;
          }
        }

        function Ds(t, e) {
          return t.bottom > e.bottom;
        }

        function js(t, e) {
          return t.top < e.top;
        }

        function Bs(t, e) {
          return t.left < e.left;
        }

        function Ls(t, e) {
          return t.right > e.right;
        }

        function zs(t) {
          return bs(t) ? t.startContainer.ownerDocument.defaultView : t.ownerDocument.defaultView;
        }

        function Fs(t) {
          if (bs(t)) {
            var _e79 = t.commonAncestorContainer;
            return xo(_e79) && (_e79 = _e79.parentNode), _e79;
          }

          return t.parentNode;
        }

        function Vs(t, e) {
          var n = zs(t),
              i = new ws(t);
          if (n === e) return i;
          {
            var _t74 = n;

            for (; _t74 != e;) {
              var _e80 = _t74.frameElement,
                  _n82 = new ws(_e80).excludeScrollbarsAndBorders();

              i.moveBy(_n82.left, _n82.top), _t74 = _t74.parent;
            }
          }
          return i;
        }

        Object.assign({}, {
          scrollViewportToShowTarget: Ms,
          scrollAncestorsToShowTarget: function scrollAncestorsToShowTarget(t) {
            Ns(Fs(t), function () {
              return new ws(t);
            });
          }
        });

        var Us = /*#__PURE__*/function () {
          function Us(t) {
            var _this113 = this;

            _classCallCheck(this, Us);

            this.document = new Hi(t), this.domConverter = new Go(this.document), this.domRoots = new Map(), this.set("isRenderingInProgress", !1), this.set("hasDomSelection", !1), this._renderer = new Fo(this.domConverter, this.document.selection), this._renderer.bind("isFocused").to(this.document), this._initialDomRootAttributes = new WeakMap(), this._observers = new Map(), this._ongoingChange = !1, this._postFixersInProgress = !1, this._renderingDisabled = !1, this._hasChangedSinceTheLastRendering = !1, this._writer = new fo(this.document), this.addObserver(qr), this.addObserver(ds), this.addObserver(us), this.addObserver(Yr), this.addObserver(ls), this.addObserver(hs), this.addObserver(Rs), Qi.isAndroid && this.addObserver(fs), function (t) {
              t.document.on("arrowKey", Mo, {
                priority: "low"
              });
            }(this), ao(this), this.on("render", function () {
              _this113._render(), _this113.document.fire("layoutChanged"), _this113._hasChangedSinceTheLastRendering = !1;
            }), this.listenTo(this.document.selection, "change", function () {
              _this113._hasChangedSinceTheLastRendering = !0;
            }), this.listenTo(this.document, "change:isFocused", function () {
              _this113._hasChangedSinceTheLastRendering = !0;
            });
          }

          _createClass(Us, [{
            key: "attachDomRoot",
            value: function attachDomRoot(t) {
              var _this114 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "main";
              var n = this.document.getRoot(e);
              n._name = t.tagName.toLowerCase();
              var i = {};

              for (var _i56 = 0, _Array$from = Array.from(t.attributes); _i56 < _Array$from.length; _i56++) {
                var _Array$from$_i = _Array$from[_i56],
                    _e81 = _Array$from$_i.name,
                    _o31 = _Array$from$_i.value;
                i[_e81] = _o31, "class" === _e81 ? this._writer.addClass(_o31.split(" "), n) : this._writer.setAttribute(_e81, _o31, n);
              }

              this._initialDomRootAttributes.set(t, i);

              var o = function o() {
                _this114._writer.setAttribute("contenteditable", !n.isReadOnly, n), n.isReadOnly ? _this114._writer.addClass("ck-read-only", n) : _this114._writer.removeClass("ck-read-only", n);
              };

              o(), this.domRoots.set(e, t), this.domConverter.bindElements(t, n), this._renderer.markToSync("children", n), this._renderer.markToSync("attributes", n), this._renderer.domDocuments.add(t.ownerDocument), n.on("change:children", function (t, e) {
                return _this114._renderer.markToSync("children", e);
              }), n.on("change:attributes", function (t, e) {
                return _this114._renderer.markToSync("attributes", e);
              }), n.on("change:text", function (t, e) {
                return _this114._renderer.markToSync("text", e);
              }), n.on("change:isReadOnly", function () {
                return _this114.change(o);
              }), n.on("change", function () {
                _this114._hasChangedSinceTheLastRendering = !0;
              });

              var _iterator101 = _createForOfIteratorHelper(this._observers.values()),
                  _step101;

              try {
                for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {
                  var _n83 = _step101.value;

                  _n83.observe(t, e);
                }
              } catch (err) {
                _iterator101.e(err);
              } finally {
                _iterator101.f();
              }
            }
          }, {
            key: "detachDomRoot",
            value: function detachDomRoot(t) {
              var e = this.domRoots.get(t);
              Array.from(e.attributes).forEach(function (_ref22) {
                var t = _ref22.name;
                return e.removeAttribute(t);
              });

              var n = this._initialDomRootAttributes.get(e);

              for (var _t75 in n) {
                e.setAttribute(_t75, n[_t75]);
              }

              this.domRoots["delete"](t), this.domConverter.unbindDomElement(e);
            }
          }, {
            key: "getDomRoot",
            value: function getDomRoot() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
              return this.domRoots.get(t);
            }
          }, {
            key: "addObserver",
            value: function addObserver(t) {
              var e = this._observers.get(t);

              if (e) return e;
              e = new t(this), this._observers.set(t, e);

              var _iterator102 = _createForOfIteratorHelper(this.domRoots),
                  _step102;

              try {
                for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {
                  var _step102$value = _slicedToArray(_step102.value, 2),
                      _t76 = _step102$value[0],
                      _n84 = _step102$value[1];

                  e.observe(_n84, _t76);
                }
              } catch (err) {
                _iterator102.e(err);
              } finally {
                _iterator102.f();
              }

              return e.enable(), e;
            }
          }, {
            key: "getObserver",
            value: function getObserver(t) {
              return this._observers.get(t);
            }
          }, {
            key: "disableObservers",
            value: function disableObservers() {
              var _iterator103 = _createForOfIteratorHelper(this._observers.values()),
                  _step103;

              try {
                for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {
                  var _t77 = _step103.value;

                  _t77.disable();
                }
              } catch (err) {
                _iterator103.e(err);
              } finally {
                _iterator103.f();
              }
            }
          }, {
            key: "enableObservers",
            value: function enableObservers() {
              var _iterator104 = _createForOfIteratorHelper(this._observers.values()),
                  _step104;

              try {
                for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {
                  var _t78 = _step104.value;

                  _t78.enable();
                }
              } catch (err) {
                _iterator104.e(err);
              } finally {
                _iterator104.f();
              }
            }
          }, {
            key: "scrollToTheSelection",
            value: function scrollToTheSelection() {
              var t = this.document.selection.getFirstRange();
              t && Ms({
                target: this.domConverter.viewRangeToDom(t),
                viewportOffset: 20
              });
            }
          }, {
            key: "focus",
            value: function focus() {
              if (!this.document.isFocused) {
                var _t79 = this.document.selection.editableElement;
                _t79 && (this.domConverter.focus(_t79), this.forceRender());
              }
            }
          }, {
            key: "change",
            value: function change(t) {
              if (this.isRenderingInProgress || this._postFixersInProgress) throw new rn["default"]("cannot-change-view-tree", this);

              try {
                if (this._ongoingChange) return t(this._writer);
                this._ongoingChange = !0;

                var _e82 = t(this._writer);

                return this._ongoingChange = !1, !this._renderingDisabled && this._hasChangedSinceTheLastRendering && (this._postFixersInProgress = !0, this.document._callPostFixers(this._writer), this._postFixersInProgress = !1, this.fire("render")), _e82;
              } catch (t) {
                rn["default"].rethrowUnexpectedError(t, this);
              }
            }
          }, {
            key: "forceRender",
            value: function forceRender() {
              this._hasChangedSinceTheLastRendering = !0, this.change(function () {});
            }
          }, {
            key: "destroy",
            value: function destroy() {
              var _iterator105 = _createForOfIteratorHelper(this._observers.values()),
                  _step105;

              try {
                for (_iterator105.s(); !(_step105 = _iterator105.n()).done;) {
                  var _t80 = _step105.value;

                  _t80.destroy();
                }
              } catch (err) {
                _iterator105.e(err);
              } finally {
                _iterator105.f();
              }

              this.document.destroy(), this.stopListening();
            }
          }, {
            key: "createPositionAt",
            value: function createPositionAt(t, e) {
              return Ii._createAt(t, e);
            }
          }, {
            key: "createPositionAfter",
            value: function createPositionAfter(t) {
              return Ii._createAfter(t);
            }
          }, {
            key: "createPositionBefore",
            value: function createPositionBefore(t) {
              return Ii._createBefore(t);
            }
          }, {
            key: "createRange",
            value: function createRange(t, e) {
              return new Oi(t, e);
            }
          }, {
            key: "createRangeOn",
            value: function createRangeOn(t) {
              return Oi._createOn(t);
            }
          }, {
            key: "createRangeIn",
            value: function createRangeIn(t) {
              return Oi._createIn(t);
            }
          }, {
            key: "createSelection",
            value: function createSelection(t, e, n) {
              return new Pi(t, e, n);
            }
          }, {
            key: "_disableRendering",
            value: function _disableRendering(t) {
              this._renderingDisabled = t, 0 == t && this.change(function () {});
            }
          }, {
            key: "_render",
            value: function _render() {
              this.isRenderingInProgress = !0, this.disableObservers(), this._renderer.render(), this.enableObservers(), this.isRenderingInProgress = !1;
            }
          }]);

          return Us;
        }();

        Object(o["default"])(Us, i["default"]);

        var Hs = /*#__PURE__*/function () {
          function Hs(t) {
            _classCallCheck(this, Hs);

            this.parent = null, this._attrs = xn(t);
          }

          _createClass(Hs, [{
            key: "index",
            get: function get() {
              var t;
              if (!this.parent) return null;
              if (null === (t = this.parent.getChildIndex(this))) throw new rn["default"]("model-node-not-found-in-parent", this);
              return t;
            }
          }, {
            key: "startOffset",
            get: function get() {
              var t;
              if (!this.parent) return null;
              if (null === (t = this.parent.getChildStartOffset(this))) throw new rn["default"]("model-node-not-found-in-parent", this);
              return t;
            }
          }, {
            key: "offsetSize",
            get: function get() {
              return 1;
            }
          }, {
            key: "endOffset",
            get: function get() {
              return this.parent ? this.startOffset + this.offsetSize : null;
            }
          }, {
            key: "nextSibling",
            get: function get() {
              var t = this.index;
              return null !== t && this.parent.getChild(t + 1) || null;
            }
          }, {
            key: "previousSibling",
            get: function get() {
              var t = this.index;
              return null !== t && this.parent.getChild(t - 1) || null;
            }
          }, {
            key: "root",
            get: function get() {
              var t = this;

              for (; t.parent;) {
                t = t.parent;
              }

              return t;
            }
          }, {
            key: "isAttached",
            value: function isAttached() {
              return this.root.is("rootElement");
            }
          }, {
            key: "getPath",
            value: function getPath() {
              var t = [];
              var e = this;

              for (; e.parent;) {
                t.unshift(e.startOffset), e = e.parent;
              }

              return t;
            }
          }, {
            key: "getAncestors",
            value: function getAncestors() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
                includeSelf: !1,
                parentFirst: !1
              };
              var e = [];
              var n = t.includeSelf ? this : this.parent;

              for (; n;) {
                e[t.parentFirst ? "push" : "unshift"](n), n = n.parent;
              }

              return e;
            }
          }, {
            key: "getCommonAncestor",
            value: function getCommonAncestor(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = this.getAncestors(e),
                  i = t.getAncestors(e);
              var o = 0;

              for (; n[o] == i[o] && n[o];) {
                o++;
              }

              return 0 === o ? null : n[o - 1];
            }
          }, {
            key: "isBefore",
            value: function isBefore(t) {
              if (this == t) return !1;
              if (this.root !== t.root) return !1;
              var e = this.getPath(),
                  n = t.getPath(),
                  i = mn(e, n);

              switch (i) {
                case "prefix":
                  return !0;

                case "extension":
                  return !1;

                default:
                  return e[i] < n[i];
              }
            }
          }, {
            key: "isAfter",
            value: function isAfter(t) {
              return this != t && this.root === t.root && !this.isBefore(t);
            }
          }, {
            key: "hasAttribute",
            value: function hasAttribute(t) {
              return this._attrs.has(t);
            }
          }, {
            key: "getAttribute",
            value: function getAttribute(t) {
              return this._attrs.get(t);
            }
          }, {
            key: "getAttributes",
            value: function getAttributes() {
              return this._attrs.entries();
            }
          }, {
            key: "getAttributeKeys",
            value: function getAttributeKeys() {
              return this._attrs.keys();
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = {};
              return this._attrs.size && (t.attributes = Array.from(this._attrs).reduce(function (t, e) {
                return t[e[0]] = e[1], t;
              }, {})), t;
            }
          }, {
            key: "is",
            value: function is(t) {
              return "node" === t || "model:node" === t;
            }
          }, {
            key: "_clone",
            value: function _clone() {
              return new Hs(this._attrs);
            }
          }, {
            key: "_remove",
            value: function _remove() {
              this.parent._removeChildren(this.index);
            }
          }, {
            key: "_setAttribute",
            value: function _setAttribute(t, e) {
              this._attrs.set(t, e);
            }
          }, {
            key: "_setAttributesTo",
            value: function _setAttributesTo(t) {
              this._attrs = xn(t);
            }
          }, {
            key: "_removeAttribute",
            value: function _removeAttribute(t) {
              return this._attrs["delete"](t);
            }
          }, {
            key: "_clearAttributes",
            value: function _clearAttributes() {
              this._attrs.clear();
            }
          }]);

          return Hs;
        }();

        var qs = /*#__PURE__*/function (_Hs) {
          _inherits(qs, _Hs);

          var _super82 = _createSuper(qs);

          function qs(t, e) {
            var _this115;

            _classCallCheck(this, qs);

            _this115 = _super82.call(this, e), _this115._data = t || "";
            return _this115;
          }

          _createClass(qs, [{
            key: "offsetSize",
            get: function get() {
              return this.data.length;
            }
          }, {
            key: "data",
            get: function get() {
              return this._data;
            }
          }, {
            key: "is",
            value: function is(t) {
              return "$text" === t || "model:$text" === t || "text" === t || "model:text" === t || "node" === t || "model:node" === t;
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(qs.prototype), "toJSON", this).call(this);

              return t.data = this.data, t;
            }
          }, {
            key: "_clone",
            value: function _clone() {
              return new qs(this.data, this.getAttributes());
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              return new qs(t.data, t.attributes);
            }
          }]);

          return qs;
        }(Hs);

        var Ws = /*#__PURE__*/function () {
          function Ws(t, e, n) {
            _classCallCheck(this, Ws);

            if (this.textNode = t, e < 0 || e > t.offsetSize) throw new rn["default"]("model-textproxy-wrong-offsetintext", this);
            if (n < 0 || e + n > t.offsetSize) throw new rn["default"]("model-textproxy-wrong-length", this);
            this.data = t.data.substring(e, e + n), this.offsetInText = e;
          }

          _createClass(Ws, [{
            key: "startOffset",
            get: function get() {
              return null !== this.textNode.startOffset ? this.textNode.startOffset + this.offsetInText : null;
            }
          }, {
            key: "offsetSize",
            get: function get() {
              return this.data.length;
            }
          }, {
            key: "endOffset",
            get: function get() {
              return null !== this.startOffset ? this.startOffset + this.offsetSize : null;
            }
          }, {
            key: "isPartial",
            get: function get() {
              return this.offsetSize !== this.textNode.offsetSize;
            }
          }, {
            key: "parent",
            get: function get() {
              return this.textNode.parent;
            }
          }, {
            key: "root",
            get: function get() {
              return this.textNode.root;
            }
          }, {
            key: "is",
            value: function is(t) {
              return "$textProxy" === t || "model:$textProxy" === t || "textProxy" === t || "model:textProxy" === t;
            }
          }, {
            key: "getPath",
            value: function getPath() {
              var t = this.textNode.getPath();
              return t.length > 0 && (t[t.length - 1] += this.offsetInText), t;
            }
          }, {
            key: "getAncestors",
            value: function getAncestors() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
                includeSelf: !1,
                parentFirst: !1
              };
              var e = [];
              var n = t.includeSelf ? this : this.parent;

              for (; n;) {
                e[t.parentFirst ? "push" : "unshift"](n), n = n.parent;
              }

              return e;
            }
          }, {
            key: "hasAttribute",
            value: function hasAttribute(t) {
              return this.textNode.hasAttribute(t);
            }
          }, {
            key: "getAttribute",
            value: function getAttribute(t) {
              return this.textNode.getAttribute(t);
            }
          }, {
            key: "getAttributes",
            value: function getAttributes() {
              return this.textNode.getAttributes();
            }
          }, {
            key: "getAttributeKeys",
            value: function getAttributeKeys() {
              return this.textNode.getAttributeKeys();
            }
          }]);

          return Ws;
        }();

        var $s = /*#__PURE__*/function (_Symbol$iterator6) {
          function $s(t) {
            _classCallCheck(this, $s);

            this._nodes = [], t && this._insertNodes(0, t);
          }

          _createClass($s, [{
            key: _Symbol$iterator6,
            value: function value() {
              return this._nodes[Symbol.iterator]();
            }
          }, {
            key: "length",
            get: function get() {
              return this._nodes.length;
            }
          }, {
            key: "maxOffset",
            get: function get() {
              return this._nodes.reduce(function (t, e) {
                return t + e.offsetSize;
              }, 0);
            }
          }, {
            key: "getNode",
            value: function getNode(t) {
              return this._nodes[t] || null;
            }
          }, {
            key: "getNodeIndex",
            value: function getNodeIndex(t) {
              var e = this._nodes.indexOf(t);

              return -1 == e ? null : e;
            }
          }, {
            key: "getNodeStartOffset",
            value: function getNodeStartOffset(t) {
              var e = this.getNodeIndex(t);
              return null === e ? null : this._nodes.slice(0, e).reduce(function (t, e) {
                return t + e.offsetSize;
              }, 0);
            }
          }, {
            key: "indexToOffset",
            value: function indexToOffset(t) {
              if (t == this._nodes.length) return this.maxOffset;
              var e = this._nodes[t];
              if (!e) throw new rn["default"]("model-nodelist-index-out-of-bounds", this);
              return this.getNodeStartOffset(e);
            }
          }, {
            key: "offsetToIndex",
            value: function offsetToIndex(t) {
              var e = 0;

              var _iterator106 = _createForOfIteratorHelper(this._nodes),
                  _step106;

              try {
                for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {
                  var _n85 = _step106.value;
                  if (t >= e && t < e + _n85.offsetSize) return this.getNodeIndex(_n85);
                  e += _n85.offsetSize;
                }
              } catch (err) {
                _iterator106.e(err);
              } finally {
                _iterator106.f();
              }

              if (e != t) throw new rn["default"]("model-nodelist-offset-out-of-bounds", this, {
                offset: t,
                nodeList: this
              });
              return this.length;
            }
          }, {
            key: "_insertNodes",
            value: function _insertNodes(t, e) {
              var _this$_nodes;

              var _iterator107 = _createForOfIteratorHelper(e),
                  _step107;

              try {
                for (_iterator107.s(); !(_step107 = _iterator107.n()).done;) {
                  var _t81 = _step107.value;
                  if (!(_t81 instanceof Hs)) throw new rn["default"]("model-nodelist-insertnodes-not-node", this);
                }
              } catch (err) {
                _iterator107.e(err);
              } finally {
                _iterator107.f();
              }

              (_this$_nodes = this._nodes).splice.apply(_this$_nodes, [t, 0].concat(_toConsumableArray(e)));
            }
          }, {
            key: "_removeNodes",
            value: function _removeNodes(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              return this._nodes.splice(t, e);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return this._nodes.map(function (t) {
                return t.toJSON();
              });
            }
          }]);

          return $s;
        }(Symbol.iterator);

        var Ys = /*#__PURE__*/function (_Hs2) {
          _inherits(Ys, _Hs2);

          var _super83 = _createSuper(Ys);

          function Ys(t, e, n) {
            var _this116;

            _classCallCheck(this, Ys);

            _this116 = _super83.call(this, e), _this116.name = t, _this116._children = new $s(), n && _this116._insertChild(0, n);
            return _this116;
          }

          _createClass(Ys, [{
            key: "childCount",
            get: function get() {
              return this._children.length;
            }
          }, {
            key: "maxOffset",
            get: function get() {
              return this._children.maxOffset;
            }
          }, {
            key: "isEmpty",
            get: function get() {
              return 0 === this.childCount;
            }
          }, {
            key: "is",
            value: function is(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              return e ? e === this.name && ("element" === t || "model:element" === t) : "element" === t || "model:element" === t || "node" === t || "model:node" === t;
            }
          }, {
            key: "getChild",
            value: function getChild(t) {
              return this._children.getNode(t);
            }
          }, {
            key: "getChildren",
            value: function getChildren() {
              return this._children[Symbol.iterator]();
            }
          }, {
            key: "getChildIndex",
            value: function getChildIndex(t) {
              return this._children.getNodeIndex(t);
            }
          }, {
            key: "getChildStartOffset",
            value: function getChildStartOffset(t) {
              return this._children.getNodeStartOffset(t);
            }
          }, {
            key: "offsetToIndex",
            value: function offsetToIndex(t) {
              return this._children.offsetToIndex(t);
            }
          }, {
            key: "getNodeByPath",
            value: function getNodeByPath(t) {
              var e = this;

              var _iterator108 = _createForOfIteratorHelper(t),
                  _step108;

              try {
                for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {
                  var _n86 = _step108.value;
                  e = e.getChild(e.offsetToIndex(_n86));
                }
              } catch (err) {
                _iterator108.e(err);
              } finally {
                _iterator108.f();
              }

              return e;
            }
          }, {
            key: "findAncestor",
            value: function findAncestor(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
                includeSelf: !1
              };
              var n = e.includeSelf ? this : this.parent;

              for (; n;) {
                if (n.name === t) return n;
                n = n.parent;
              }

              return null;
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Ys.prototype), "toJSON", this).call(this);

              if (t.name = this.name, this._children.length > 0) {
                t.children = [];

                var _iterator109 = _createForOfIteratorHelper(this._children),
                    _step109;

                try {
                  for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {
                    var _e83 = _step109.value;
                    t.children.push(_e83.toJSON());
                  }
                } catch (err) {
                  _iterator109.e(err);
                } finally {
                  _iterator109.f();
                }
              }

              return t;
            }
          }, {
            key: "_clone",
            value: function _clone() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
              var e = t ? Array.from(this._children).map(function (t) {
                return t._clone(!0);
              }) : null;
              return new Ys(this.name, this.getAttributes(), e);
            }
          }, {
            key: "_appendChild",
            value: function _appendChild(t) {
              this._insertChild(this.childCount, t);
            }
          }, {
            key: "_insertChild",
            value: function _insertChild(t, e) {
              var n = function (t) {
                if ("string" == typeof t) return [new qs(t)];
                Object(yn.a)(t) || (t = [t]);
                return Array.from(t).map(function (t) {
                  return "string" == typeof t ? new qs(t) : t instanceof Ws ? new qs(t.data, t.getAttributes()) : t;
                });
              }(e);

              var _iterator110 = _createForOfIteratorHelper(n),
                  _step110;

              try {
                for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {
                  var _t82 = _step110.value;
                  null !== _t82.parent && _t82._remove(), _t82.parent = this;
                }
              } catch (err) {
                _iterator110.e(err);
              } finally {
                _iterator110.f();
              }

              this._children._insertNodes(t, n);
            }
          }, {
            key: "_removeChildren",
            value: function _removeChildren(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

              var n = this._children._removeNodes(t, e);

              var _iterator111 = _createForOfIteratorHelper(n),
                  _step111;

              try {
                for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {
                  var _t83 = _step111.value;
                  _t83.parent = null;
                }
              } catch (err) {
                _iterator111.e(err);
              } finally {
                _iterator111.f();
              }

              return n;
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e = null;

              if (t.children) {
                e = [];

                var _iterator112 = _createForOfIteratorHelper(t.children),
                    _step112;

                try {
                  for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {
                    var _n87 = _step112.value;
                    _n87.name ? e.push(Ys.fromJSON(_n87)) : e.push(qs.fromJSON(_n87));
                  }
                } catch (err) {
                  _iterator112.e(err);
                } finally {
                  _iterator112.f();
                }
              }

              return new Ys(t.name, t.attributes, e);
            }
          }]);

          return Ys;
        }(Hs);

        var Js = /*#__PURE__*/function (_Symbol$iterator7) {
          function Js() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            _classCallCheck(this, Js);

            if (!t.boundaries && !t.startPosition) throw new rn["default"]("model-tree-walker-no-start-position", null);
            var e = t.direction || "forward";
            if ("forward" != e && "backward" != e) throw new rn["default"]("model-tree-walker-unknown-direction", t, {
              direction: e
            });
            this.direction = e, this.boundaries = t.boundaries || null, t.startPosition ? this.position = t.startPosition.clone() : this.position = Ks._createAt(this.boundaries["backward" == this.direction ? "end" : "start"]), this.position.stickiness = "toNone", this.singleCharacters = !!t.singleCharacters, this.shallow = !!t.shallow, this.ignoreElementEnd = !!t.ignoreElementEnd, this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null, this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null, this._visitedParent = this.position.parent;
          }

          _createClass(Js, [{
            key: _Symbol$iterator7,
            value: function value() {
              return this;
            }
          }, {
            key: "skip",
            value: function skip(t) {
              var e, n, i, o;

              do {
                var _this$next2;

                i = this.position, o = this._visitedParent, (_this$next2 = this.next(), e = _this$next2.done, n = _this$next2.value, _this$next2);
              } while (!e && t(n));

              e || (this.position = i, this._visitedParent = o);
            }
          }, {
            key: "next",
            value: function next() {
              return "forward" == this.direction ? this._next() : this._previous();
            }
          }, {
            key: "_next",
            value: function _next() {
              var t = this.position,
                  e = this.position.clone(),
                  n = this._visitedParent;
              if (null === n.parent && e.offset === n.maxOffset) return {
                done: !0
              };
              if (n === this._boundaryEndParent && e.offset == this.boundaries.end.offset) return {
                done: !0
              };
              var i = e.parent,
                  o = Qs(e, i),
                  r = o || Xs(e, i, o);
              if (r instanceof Ys) return this.shallow ? e.offset++ : (e.path.push(0), this._visitedParent = r), this.position = e, Gs("elementStart", r, t, e, 1);

              if (r instanceof qs) {
                var _i57;

                if (this.singleCharacters) _i57 = 1;else {
                  var _t84 = r.endOffset;
                  this._boundaryEndParent == n && this.boundaries.end.offset < _t84 && (_t84 = this.boundaries.end.offset), _i57 = _t84 - e.offset;
                }

                var _o32 = e.offset - r.startOffset,
                    _s13 = new Ws(r, _o32, _i57);

                return e.offset += _i57, this.position = e, Gs("text", _s13, t, e, _i57);
              }

              return e.path.pop(), e.offset++, this.position = e, this._visitedParent = n.parent, this.ignoreElementEnd ? this._next() : Gs("elementEnd", n, t, e);
            }
          }, {
            key: "_previous",
            value: function _previous() {
              var t = this.position,
                  e = this.position.clone(),
                  n = this._visitedParent;
              if (null === n.parent && 0 === e.offset) return {
                done: !0
              };
              if (n == this._boundaryStartParent && e.offset == this.boundaries.start.offset) return {
                done: !0
              };
              var i = e.parent,
                  o = Qs(e, i),
                  r = o || Zs(e, i, o);
              if (r instanceof Ys) return e.offset--, this.shallow ? (this.position = e, Gs("elementStart", r, t, e, 1)) : (e.path.push(r.maxOffset), this.position = e, this._visitedParent = r, this.ignoreElementEnd ? this._previous() : Gs("elementEnd", r, t, e));

              if (r instanceof qs) {
                var _i58;

                if (this.singleCharacters) _i58 = 1;else {
                  var _t85 = r.startOffset;
                  this._boundaryStartParent == n && this.boundaries.start.offset > _t85 && (_t85 = this.boundaries.start.offset), _i58 = e.offset - _t85;
                }

                var _o33 = e.offset - r.startOffset,
                    _s14 = new Ws(r, _o33 - _i58, _i58);

                return e.offset -= _i58, this.position = e, Gs("text", _s14, t, e, _i58);
              }

              return e.path.pop(), this.position = e, this._visitedParent = n.parent, Gs("elementStart", n, t, e, 1);
            }
          }]);

          return Js;
        }(Symbol.iterator);

        function Gs(t, e, n, i, o) {
          return {
            done: !1,
            value: {
              type: t,
              item: e,
              previousPosition: n,
              nextPosition: i,
              length: o
            }
          };
        }

        var Ks = /*#__PURE__*/function () {
          function Ks(t, e) {
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "toNone";

            _classCallCheck(this, Ks);

            if (!t.is("element") && !t.is("documentFragment")) throw new rn["default"]("model-position-root-invalid", t);
            if (!(e instanceof Array) || 0 === e.length) throw new rn["default"]("model-position-path-incorrect-format", t, {
              path: e
            });
            t.is("rootElement") ? e = e.slice() : (e = [].concat(_toConsumableArray(t.getPath()), _toConsumableArray(e)), t = t.root), this.root = t, this.path = e, this.stickiness = n;
          }

          _createClass(Ks, [{
            key: "offset",
            get: function get() {
              return this.path[this.path.length - 1];
            },
            set: function set(t) {
              this.path[this.path.length - 1] = t;
            }
          }, {
            key: "parent",
            get: function get() {
              var t = this.root;

              for (var _e84 = 0; _e84 < this.path.length - 1; _e84++) {
                if (!(t = t.getChild(t.offsetToIndex(this.path[_e84])))) throw new rn["default"]("model-position-path-incorrect", this, {
                  position: this
                });
              }

              if (t.is("$text")) throw new rn["default"]("model-position-path-incorrect", this, {
                position: this
              });
              return t;
            }
          }, {
            key: "index",
            get: function get() {
              return this.parent.offsetToIndex(this.offset);
            }
          }, {
            key: "textNode",
            get: function get() {
              return Qs(this, this.parent);
            }
          }, {
            key: "nodeAfter",
            get: function get() {
              var t = this.parent;
              return Xs(this, t, Qs(this, t));
            }
          }, {
            key: "nodeBefore",
            get: function get() {
              var t = this.parent;
              return Zs(this, t, Qs(this, t));
            }
          }, {
            key: "isAtStart",
            get: function get() {
              return 0 === this.offset;
            }
          }, {
            key: "isAtEnd",
            get: function get() {
              return this.offset == this.parent.maxOffset;
            }
          }, {
            key: "compareWith",
            value: function compareWith(t) {
              if (this.root != t.root) return "different";
              var e = mn(this.path, t.path);

              switch (e) {
                case "same":
                  return "same";

                case "prefix":
                  return "before";

                case "extension":
                  return "after";

                default:
                  return this.path[e] < t.path[e] ? "before" : "after";
              }
            }
          }, {
            key: "getLastMatchingPosition",
            value: function getLastMatchingPosition(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              e.startPosition = this;
              var n = new Js(e);
              return n.skip(t), n.position;
            }
          }, {
            key: "getParentPath",
            value: function getParentPath() {
              return this.path.slice(0, -1);
            }
          }, {
            key: "getAncestors",
            value: function getAncestors() {
              var t = this.parent;
              return t.is("documentFragment") ? [t] : t.getAncestors({
                includeSelf: !0
              });
            }
          }, {
            key: "findAncestor",
            value: function findAncestor(t) {
              var e = this.parent;
              return e.is("element") ? e.findAncestor(t, {
                includeSelf: !0
              }) : null;
            }
          }, {
            key: "getCommonPath",
            value: function getCommonPath(t) {
              if (this.root != t.root) return [];
              var e = mn(this.path, t.path),
                  n = "string" == typeof e ? Math.min(this.path.length, t.path.length) : e;
              return this.path.slice(0, n);
            }
          }, {
            key: "getCommonAncestor",
            value: function getCommonAncestor(t) {
              var e = this.getAncestors(),
                  n = t.getAncestors();
              var i = 0;

              for (; e[i] == n[i] && e[i];) {
                i++;
              }

              return 0 === i ? null : e[i - 1];
            }
          }, {
            key: "getShiftedBy",
            value: function getShiftedBy(t) {
              var e = this.clone(),
                  n = e.offset + t;
              return e.offset = n < 0 ? 0 : n, e;
            }
          }, {
            key: "isAfter",
            value: function isAfter(t) {
              return "after" == this.compareWith(t);
            }
          }, {
            key: "isBefore",
            value: function isBefore(t) {
              return "before" == this.compareWith(t);
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              return "same" == this.compareWith(t);
            }
          }, {
            key: "isTouching",
            value: function isTouching(t) {
              var e = null,
                  n = null;

              switch (this.compareWith(t)) {
                case "same":
                  return !0;

                case "before":
                  e = Ks._createAt(this), n = Ks._createAt(t);
                  break;

                case "after":
                  e = Ks._createAt(t), n = Ks._createAt(this);
                  break;

                default:
                  return !1;
              }

              var i = e.parent;

              for (; e.path.length + n.path.length;) {
                if (e.isEqual(n)) return !0;

                if (e.path.length > n.path.length) {
                  if (e.offset !== i.maxOffset) return !1;
                  e.path = e.path.slice(0, -1), i = i.parent, e.offset++;
                } else {
                  if (0 !== n.offset) return !1;
                  n.path = n.path.slice(0, -1);
                }
              }
            }
          }, {
            key: "is",
            value: function is(t) {
              return "position" === t || "model:position" === t;
            }
          }, {
            key: "hasSameParentAs",
            value: function hasSameParentAs(t) {
              if (this.root !== t.root) return !1;
              return "same" == mn(this.getParentPath(), t.getParentPath());
            }
          }, {
            key: "getTransformedByOperation",
            value: function getTransformedByOperation(t) {
              var e;

              switch (t.type) {
                case "insert":
                  e = this._getTransformedByInsertOperation(t);
                  break;

                case "move":
                case "remove":
                case "reinsert":
                  e = this._getTransformedByMoveOperation(t);
                  break;

                case "split":
                  e = this._getTransformedBySplitOperation(t);
                  break;

                case "merge":
                  e = this._getTransformedByMergeOperation(t);
                  break;

                default:
                  e = Ks._createAt(this);
              }

              return e;
            }
          }, {
            key: "_getTransformedByInsertOperation",
            value: function _getTransformedByInsertOperation(t) {
              return this._getTransformedByInsertion(t.position, t.howMany);
            }
          }, {
            key: "_getTransformedByMoveOperation",
            value: function _getTransformedByMoveOperation(t) {
              return this._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany);
            }
          }, {
            key: "_getTransformedBySplitOperation",
            value: function _getTransformedBySplitOperation(t) {
              var e = t.movedRange;
              return e.containsPosition(this) || e.start.isEqual(this) && "toNext" == this.stickiness ? this._getCombined(t.splitPosition, t.moveTargetPosition) : t.graveyardPosition ? this._getTransformedByMove(t.graveyardPosition, t.insertionPosition, 1) : this._getTransformedByInsertion(t.insertionPosition, 1);
            }
          }, {
            key: "_getTransformedByMergeOperation",
            value: function _getTransformedByMergeOperation(t) {
              var e = t.movedRange;
              var n;
              return e.containsPosition(this) || e.start.isEqual(this) ? (n = this._getCombined(t.sourcePosition, t.targetPosition), t.sourcePosition.isBefore(t.targetPosition) && (n = n._getTransformedByDeletion(t.deletionPosition, 1))) : n = this.isEqual(t.deletionPosition) ? Ks._createAt(t.deletionPosition) : this._getTransformedByMove(t.deletionPosition, t.graveyardPosition, 1), n;
            }
          }, {
            key: "_getTransformedByDeletion",
            value: function _getTransformedByDeletion(t, e) {
              var n = Ks._createAt(this);

              if (this.root != t.root) return n;

              if ("same" == mn(t.getParentPath(), this.getParentPath())) {
                if (t.offset < this.offset) {
                  if (t.offset + e > this.offset) return null;
                  n.offset -= e;
                }
              } else if ("prefix" == mn(t.getParentPath(), this.getParentPath())) {
                var _i59 = t.path.length - 1;

                if (t.offset <= this.path[_i59]) {
                  if (t.offset + e > this.path[_i59]) return null;
                  n.path[_i59] -= e;
                }
              }

              return n;
            }
          }, {
            key: "_getTransformedByInsertion",
            value: function _getTransformedByInsertion(t, e) {
              var n = Ks._createAt(this);

              if (this.root != t.root) return n;
              if ("same" == mn(t.getParentPath(), this.getParentPath())) (t.offset < this.offset || t.offset == this.offset && "toPrevious" != this.stickiness) && (n.offset += e);else if ("prefix" == mn(t.getParentPath(), this.getParentPath())) {
                var _i60 = t.path.length - 1;

                t.offset <= this.path[_i60] && (n.path[_i60] += e);
              }
              return n;
            }
          }, {
            key: "_getTransformedByMove",
            value: function _getTransformedByMove(t, e, n) {
              if (e = e._getTransformedByDeletion(t, n), t.isEqual(e)) return Ks._createAt(this);

              var i = this._getTransformedByDeletion(t, n);

              return null === i || t.isEqual(this) && "toNext" == this.stickiness || t.getShiftedBy(n).isEqual(this) && "toPrevious" == this.stickiness ? this._getCombined(t, e) : i._getTransformedByInsertion(e, n);
            }
          }, {
            key: "_getCombined",
            value: function _getCombined(t, e) {
              var n = t.path.length - 1,
                  i = Ks._createAt(e);

              return i.stickiness = this.stickiness, i.offset = i.offset + this.path[n] - t.offset, i.path = [].concat(_toConsumableArray(i.path), _toConsumableArray(this.path.slice(n + 1))), i;
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return {
                root: this.root.toJSON(),
                path: Array.from(this.path),
                stickiness: this.stickiness
              };
            }
          }, {
            key: "clone",
            value: function clone() {
              return new this.constructor(this.root, this.path, this.stickiness);
            }
          }], [{
            key: "_createAt",
            value: function _createAt(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "toNone";
              if (t instanceof Ks) return new Ks(t.root, t.path, t.stickiness);
              {
                var _i61 = t;
                if ("end" == e) e = _i61.maxOffset;else {
                  if ("before" == e) return this._createBefore(_i61, n);
                  if ("after" == e) return this._createAfter(_i61, n);
                  if (0 !== e && !e) throw new rn["default"]("model-createpositionat-offset-required", [this, t]);
                }
                if (!_i61.is("element") && !_i61.is("documentFragment")) throw new rn["default"]("model-position-parent-incorrect", [this, t]);

                var _o34 = _i61.getPath();

                return _o34.push(e), new this(_i61.root, _o34, n);
              }
            }
          }, {
            key: "_createAfter",
            value: function _createAfter(t, e) {
              if (!t.parent) throw new rn["default"]("model-position-after-root", [this, t], {
                root: t
              });
              return this._createAt(t.parent, t.endOffset, e);
            }
          }, {
            key: "_createBefore",
            value: function _createBefore(t, e) {
              if (!t.parent) throw new rn["default"]("model-position-before-root", t, {
                root: t
              });
              return this._createAt(t.parent, t.startOffset, e);
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              if ("$graveyard" === t.root) {
                var _n88 = new Ks(e.graveyard, t.path);

                return _n88.stickiness = t.stickiness, _n88;
              }

              if (!e.getRoot(t.root)) throw new rn["default"]("model-position-fromjson-no-root", e, {
                rootName: t.root
              });
              return new Ks(e.getRoot(t.root), t.path, t.stickiness);
            }
          }]);

          return Ks;
        }();

        function Qs(t, e) {
          var n = e.getChild(e.offsetToIndex(t.offset));
          return n && n.is("$text") && n.startOffset < t.offset ? n : null;
        }

        function Xs(t, e, n) {
          return null !== n ? null : e.getChild(e.offsetToIndex(t.offset));
        }

        function Zs(t, e, n) {
          return null !== n ? null : e.getChild(e.offsetToIndex(t.offset) - 1);
        }

        var ta = /*#__PURE__*/function (_Symbol$iterator8) {
          function ta(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

            _classCallCheck(this, ta);

            this.start = Ks._createAt(t), this.end = e ? Ks._createAt(e) : Ks._createAt(t), this.start.stickiness = this.isCollapsed ? "toNone" : "toNext", this.end.stickiness = this.isCollapsed ? "toNone" : "toPrevious";
          }

          _createClass(ta, [{
            key: _Symbol$iterator8,
            value: /*#__PURE__*/regeneratorRuntime.mark(function value() {
              return regeneratorRuntime.wrap(function value$(_context46) {
                while (1) {
                  switch (_context46.prev = _context46.next) {
                    case 0:
                      return _context46.delegateYield(new Js({
                        boundaries: this,
                        ignoreElementEnd: !0
                      }), "t0", 1);

                    case 1:
                    case "end":
                      return _context46.stop();
                  }
                }
              }, value, this);
            })
          }, {
            key: "isCollapsed",
            get: function get() {
              return this.start.isEqual(this.end);
            }
          }, {
            key: "isFlat",
            get: function get() {
              return "same" == mn(this.start.getParentPath(), this.end.getParentPath());
            }
          }, {
            key: "root",
            get: function get() {
              return this.start.root;
            }
          }, {
            key: "containsPosition",
            value: function containsPosition(t) {
              return t.isAfter(this.start) && t.isBefore(this.end);
            }
          }, {
            key: "containsRange",
            value: function containsRange(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              t.isCollapsed && (e = !1);
              var n = this.containsPosition(t.start) || e && this.start.isEqual(t.start),
                  i = this.containsPosition(t.end) || e && this.end.isEqual(t.end);
              return n && i;
            }
          }, {
            key: "containsItem",
            value: function containsItem(t) {
              var e = Ks._createBefore(t);

              return this.containsPosition(e) || this.start.isEqual(e);
            }
          }, {
            key: "is",
            value: function is(t) {
              return "range" === t || "model:range" === t;
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              return this.start.isEqual(t.start) && this.end.isEqual(t.end);
            }
          }, {
            key: "isIntersecting",
            value: function isIntersecting(t) {
              return this.start.isBefore(t.end) && this.end.isAfter(t.start);
            }
          }, {
            key: "getDifference",
            value: function getDifference(t) {
              var e = [];
              return this.isIntersecting(t) ? (this.containsPosition(t.start) && e.push(new ta(this.start, t.start)), this.containsPosition(t.end) && e.push(new ta(t.end, this.end))) : e.push(new ta(this.start, this.end)), e;
            }
          }, {
            key: "getIntersection",
            value: function getIntersection(t) {
              if (this.isIntersecting(t)) {
                var _e85 = this.start,
                    _n89 = this.end;
                return this.containsPosition(t.start) && (_e85 = t.start), this.containsPosition(t.end) && (_n89 = t.end), new ta(_e85, _n89);
              }

              return null;
            }
          }, {
            key: "getJoined",
            value: function getJoined(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              var n = this.isIntersecting(t);
              if (n || (n = this.start.isBefore(t.start) ? e ? this.end.isTouching(t.start) : this.end.isEqual(t.start) : e ? t.end.isTouching(this.start) : t.end.isEqual(this.start)), !n) return null;
              var i = this.start,
                  o = this.end;
              return t.start.isBefore(i) && (i = t.start), t.end.isAfter(o) && (o = t.end), new ta(i, o);
            }
          }, {
            key: "getMinimalFlatRanges",
            value: function getMinimalFlatRanges() {
              var t = [],
                  e = this.start.getCommonPath(this.end).length,
                  n = Ks._createAt(this.start);

              var i = n.parent;

              for (; n.path.length > e + 1;) {
                var _e86 = i.maxOffset - n.offset;

                0 !== _e86 && t.push(new ta(n, n.getShiftedBy(_e86))), n.path = n.path.slice(0, -1), n.offset++, i = i.parent;
              }

              for (; n.path.length <= this.end.path.length;) {
                var _e87 = this.end.path[n.path.length - 1],
                    _i62 = _e87 - n.offset;

                0 !== _i62 && t.push(new ta(n, n.getShiftedBy(_i62))), n.offset = _e87, n.path.push(0);
              }

              return t;
            }
          }, {
            key: "getWalker",
            value: function getWalker() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              return t.boundaries = this, new Js(t);
            }
          }, {
            key: "getItems",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getItems() {
              var t,
                  e,
                  _iterator113,
                  _step113,
                  _t86,
                  _args47 = arguments;

              return regeneratorRuntime.wrap(function getItems$(_context47) {
                while (1) {
                  switch (_context47.prev = _context47.next) {
                    case 0:
                      t = _args47.length > 0 && _args47[0] !== undefined ? _args47[0] : {};
                      t.boundaries = this, t.ignoreElementEnd = !0;
                      e = new Js(t);
                      _iterator113 = _createForOfIteratorHelper(e);
                      _context47.prev = 4;

                      _iterator113.s();

                    case 6:
                      if ((_step113 = _iterator113.n()).done) {
                        _context47.next = 12;
                        break;
                      }

                      _t86 = _step113.value;
                      _context47.next = 10;
                      return _t86.item;

                    case 10:
                      _context47.next = 6;
                      break;

                    case 12:
                      _context47.next = 17;
                      break;

                    case 14:
                      _context47.prev = 14;
                      _context47.t0 = _context47["catch"](4);

                      _iterator113.e(_context47.t0);

                    case 17:
                      _context47.prev = 17;

                      _iterator113.f();

                      return _context47.finish(17);

                    case 20:
                    case "end":
                      return _context47.stop();
                  }
                }
              }, getItems, this, [[4, 14, 17, 20]]);
            })
          }, {
            key: "getPositions",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getPositions() {
              var t,
                  e,
                  _iterator114,
                  _step114,
                  _t87,
                  _args48 = arguments;

              return regeneratorRuntime.wrap(function getPositions$(_context48) {
                while (1) {
                  switch (_context48.prev = _context48.next) {
                    case 0:
                      t = _args48.length > 0 && _args48[0] !== undefined ? _args48[0] : {};
                      t.boundaries = this;
                      e = new Js(t);
                      _context48.next = 5;
                      return e.position;

                    case 5:
                      _iterator114 = _createForOfIteratorHelper(e);
                      _context48.prev = 6;

                      _iterator114.s();

                    case 8:
                      if ((_step114 = _iterator114.n()).done) {
                        _context48.next = 14;
                        break;
                      }

                      _t87 = _step114.value;
                      _context48.next = 12;
                      return _t87.nextPosition;

                    case 12:
                      _context48.next = 8;
                      break;

                    case 14:
                      _context48.next = 19;
                      break;

                    case 16:
                      _context48.prev = 16;
                      _context48.t0 = _context48["catch"](6);

                      _iterator114.e(_context48.t0);

                    case 19:
                      _context48.prev = 19;

                      _iterator114.f();

                      return _context48.finish(19);

                    case 22:
                    case "end":
                      return _context48.stop();
                  }
                }
              }, getPositions, this, [[6, 16, 19, 22]]);
            })
          }, {
            key: "getTransformedByOperation",
            value: function getTransformedByOperation(t) {
              switch (t.type) {
                case "insert":
                  return this._getTransformedByInsertOperation(t);

                case "move":
                case "remove":
                case "reinsert":
                  return this._getTransformedByMoveOperation(t);

                case "split":
                  return [this._getTransformedBySplitOperation(t)];

                case "merge":
                  return [this._getTransformedByMergeOperation(t)];
              }

              return [new ta(this.start, this.end)];
            }
          }, {
            key: "getTransformedByOperations",
            value: function getTransformedByOperations(t) {
              var e = [new ta(this.start, this.end)];

              var _iterator115 = _createForOfIteratorHelper(t),
                  _step115;

              try {
                for (_iterator115.s(); !(_step115 = _iterator115.n()).done;) {
                  var _n91 = _step115.value;

                  for (var _t90 = 0; _t90 < e.length; _t90++) {
                    var _i64 = e[_t90].getTransformedByOperation(_n91);

                    e.splice.apply(e, [_t90, 1].concat(_toConsumableArray(_i64))), _t90 += _i64.length - 1;
                  }
                }
              } catch (err) {
                _iterator115.e(err);
              } finally {
                _iterator115.f();
              }

              for (var _t88 = 0; _t88 < e.length; _t88++) {
                var _n90 = e[_t88];

                for (var _i63 = _t88 + 1; _i63 < e.length; _i63++) {
                  var _t89 = e[_i63];
                  (_n90.containsRange(_t89) || _t89.containsRange(_n90) || _n90.isEqual(_t89)) && e.splice(_i63, 1);
                }
              }

              return e;
            }
          }, {
            key: "getCommonAncestor",
            value: function getCommonAncestor() {
              return this.start.getCommonAncestor(this.end);
            }
          }, {
            key: "getContainedElement",
            value: function getContainedElement() {
              if (this.isCollapsed) return null;
              var t = this.start.nodeAfter,
                  e = this.end.nodeBefore;
              return t && t.is("element") && t === e ? t : null;
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return {
                start: this.start.toJSON(),
                end: this.end.toJSON()
              };
            }
          }, {
            key: "clone",
            value: function clone() {
              return new this.constructor(this.start, this.end);
            }
          }, {
            key: "_getTransformedByInsertOperation",
            value: function _getTransformedByInsertOperation(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              return this._getTransformedByInsertion(t.position, t.howMany, e);
            }
          }, {
            key: "_getTransformedByMoveOperation",
            value: function _getTransformedByMoveOperation(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              var n = t.sourcePosition,
                  i = t.howMany,
                  o = t.targetPosition;
              return this._getTransformedByMove(n, o, i, e);
            }
          }, {
            key: "_getTransformedBySplitOperation",
            value: function _getTransformedBySplitOperation(t) {
              var e = this.start._getTransformedBySplitOperation(t);

              var n = this.end._getTransformedBySplitOperation(t);

              return this.end.isEqual(t.insertionPosition) && (n = this.end.getShiftedBy(1)), e.root != n.root && (n = this.end.getShiftedBy(-1)), new ta(e, n);
            }
          }, {
            key: "_getTransformedByMergeOperation",
            value: function _getTransformedByMergeOperation(t) {
              if (this.start.isEqual(t.targetPosition) && this.end.isEqual(t.deletionPosition)) return new ta(this.start);

              var e = this.start._getTransformedByMergeOperation(t),
                  n = this.end._getTransformedByMergeOperation(t);

              return e.root != n.root && (n = this.end.getShiftedBy(-1)), e.isAfter(n) ? (t.sourcePosition.isBefore(t.targetPosition) ? (e = Ks._createAt(n)).offset = 0 : (t.deletionPosition.isEqual(e) || (n = t.deletionPosition), e = t.targetPosition), new ta(e, n)) : new ta(e, n);
            }
          }, {
            key: "_getTransformedByInsertion",
            value: function _getTransformedByInsertion(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
              if (n && this.containsPosition(t)) return [new ta(this.start, t), new ta(t.getShiftedBy(e), this.end._getTransformedByInsertion(t, e))];
              {
                var _n92 = new ta(this.start, this.end);

                return _n92.start = _n92.start._getTransformedByInsertion(t, e), _n92.end = _n92.end._getTransformedByInsertion(t, e), [_n92];
              }
            }
          }, {
            key: "_getTransformedByMove",
            value: function _getTransformedByMove(t, e, n) {
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;

              if (this.isCollapsed) {
                var _i65 = this.start._getTransformedByMove(t, e, n);

                return [new ta(_i65)];
              }

              var o = ta._createFromPositionAndShift(t, n),
                  r = e._getTransformedByDeletion(t, n);

              if (this.containsPosition(e) && !i && (o.containsPosition(this.start) || o.containsPosition(this.end))) {
                var _i66 = this.start._getTransformedByMove(t, e, n),
                    _o35 = this.end._getTransformedByMove(t, e, n);

                return [new ta(_i66, _o35)];
              }

              var s;
              var a = this.getDifference(o);
              var c = null;
              var l = this.getIntersection(o);

              if (1 == a.length ? c = new ta(a[0].start._getTransformedByDeletion(t, n), a[0].end._getTransformedByDeletion(t, n)) : 2 == a.length && (c = new ta(this.start, this.end._getTransformedByDeletion(t, n))), s = c ? c._getTransformedByInsertion(r, n, null !== l || i) : [], l) {
                var _t91 = new ta(l.start._getCombined(o.start, r), l.end._getCombined(o.start, r));

                2 == s.length ? s.splice(1, 0, _t91) : s.push(_t91);
              }

              return s;
            }
          }, {
            key: "_getTransformedByDeletion",
            value: function _getTransformedByDeletion(t, e) {
              var n = this.start._getTransformedByDeletion(t, e),
                  i = this.end._getTransformedByDeletion(t, e);

              return null == n && null == i ? null : (null == n && (n = t), null == i && (i = t), new ta(n, i));
            }
          }], [{
            key: "_createFromPositionAndShift",
            value: function _createFromPositionAndShift(t, e) {
              var n = t,
                  i = t.getShiftedBy(e);
              return e > 0 ? new this(n, i) : new this(i, n);
            }
          }, {
            key: "_createIn",
            value: function _createIn(t) {
              return new this(Ks._createAt(t, 0), Ks._createAt(t, t.maxOffset));
            }
          }, {
            key: "_createOn",
            value: function _createOn(t) {
              return this._createFromPositionAndShift(Ks._createBefore(t), t.offsetSize);
            }
          }, {
            key: "_createFromRanges",
            value: function _createFromRanges(t) {
              if (0 === t.length) throw new rn["default"]("range-create-from-ranges-empty-array", null);
              if (1 == t.length) return t[0].clone();
              var e = t[0];
              t.sort(function (t, e) {
                return t.start.isAfter(e.start) ? 1 : -1;
              });
              var n = t.indexOf(e),
                  i = new this(e.start, e.end);
              if (n > 0) for (var _e88 = n - 1; t[_e88].end.isEqual(i.start); _e88++) {
                i.start = Ks._createAt(t[_e88].start);
              }

              for (var _e89 = n + 1; _e89 < t.length && t[_e89].start.isEqual(i.end); _e89++) {
                i.end = Ks._createAt(t[_e89].end);
              }

              return i;
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              return new this(Ks.fromJSON(t.start, e), Ks.fromJSON(t.end, e));
            }
          }]);

          return ta;
        }(Symbol.iterator);

        var ea = /*#__PURE__*/function () {
          function ea() {
            var _this117 = this;

            _classCallCheck(this, ea);

            this._modelToViewMapping = new WeakMap(), this._viewToModelMapping = new WeakMap(), this._viewToModelLengthCallbacks = new Map(), this._markerNameToElements = new Map(), this._elementToMarkerNames = new Map(), this._unboundMarkerNames = new Set(), this.on("modelToViewPosition", function (t, e) {
              if (e.viewPosition) return;

              var n = _this117._modelToViewMapping.get(e.modelPosition.parent);

              e.viewPosition = _this117.findPositionIn(n, e.modelPosition.offset);
            }, {
              priority: "low"
            }), this.on("viewToModelPosition", function (t, e) {
              if (e.modelPosition) return;

              var n = _this117.findMappedViewAncestor(e.viewPosition),
                  i = _this117._viewToModelMapping.get(n),
                  o = _this117._toModelOffset(e.viewPosition.parent, e.viewPosition.offset, n);

              e.modelPosition = Ks._createAt(i, o);
            }, {
              priority: "low"
            });
          }

          _createClass(ea, [{
            key: "bindElements",
            value: function bindElements(t, e) {
              this._modelToViewMapping.set(t, e), this._viewToModelMapping.set(e, t);
            }
          }, {
            key: "unbindViewElement",
            value: function unbindViewElement(t) {
              var e = this.toModelElement(t);

              if (this._viewToModelMapping["delete"](t), this._elementToMarkerNames.has(t)) {
                var _iterator116 = _createForOfIteratorHelper(this._elementToMarkerNames.get(t)),
                    _step116;

                try {
                  for (_iterator116.s(); !(_step116 = _iterator116.n()).done;) {
                    var _e90 = _step116.value;

                    this._unboundMarkerNames.add(_e90);
                  }
                } catch (err) {
                  _iterator116.e(err);
                } finally {
                  _iterator116.f();
                }
              }

              this._modelToViewMapping.get(e) == t && this._modelToViewMapping["delete"](e);
            }
          }, {
            key: "unbindModelElement",
            value: function unbindModelElement(t) {
              var e = this.toViewElement(t);
              this._modelToViewMapping["delete"](t), this._viewToModelMapping.get(e) == t && this._viewToModelMapping["delete"](e);
            }
          }, {
            key: "bindElementToMarker",
            value: function bindElementToMarker(t, e) {
              var n = this._markerNameToElements.get(e) || new Set();
              n.add(t);
              var i = this._elementToMarkerNames.get(t) || new Set();
              i.add(e), this._markerNameToElements.set(e, n), this._elementToMarkerNames.set(t, i);
            }
          }, {
            key: "unbindElementFromMarkerName",
            value: function unbindElementFromMarkerName(t, e) {
              var n = this._markerNameToElements.get(e);

              n && (n["delete"](t), 0 == n.size && this._markerNameToElements["delete"](e));

              var i = this._elementToMarkerNames.get(t);

              i && (i["delete"](e), 0 == i.size && this._elementToMarkerNames["delete"](t));
            }
          }, {
            key: "flushUnboundMarkerNames",
            value: function flushUnboundMarkerNames() {
              var t = Array.from(this._unboundMarkerNames);
              return this._unboundMarkerNames.clear(), t;
            }
          }, {
            key: "clearBindings",
            value: function clearBindings() {
              this._modelToViewMapping = new WeakMap(), this._viewToModelMapping = new WeakMap(), this._markerNameToElements = new Map(), this._elementToMarkerNames = new Map(), this._unboundMarkerNames = new Set();
            }
          }, {
            key: "toModelElement",
            value: function toModelElement(t) {
              return this._viewToModelMapping.get(t);
            }
          }, {
            key: "toViewElement",
            value: function toViewElement(t) {
              return this._modelToViewMapping.get(t);
            }
          }, {
            key: "toModelRange",
            value: function toModelRange(t) {
              return new ta(this.toModelPosition(t.start), this.toModelPosition(t.end));
            }
          }, {
            key: "toViewRange",
            value: function toViewRange(t) {
              return new Oi(this.toViewPosition(t.start), this.toViewPosition(t.end));
            }
          }, {
            key: "toModelPosition",
            value: function toModelPosition(t) {
              var e = {
                viewPosition: t,
                mapper: this
              };
              return this.fire("viewToModelPosition", e), e.modelPosition;
            }
          }, {
            key: "toViewPosition",
            value: function toViewPosition(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
                isPhantom: !1
              };
              var n = {
                modelPosition: t,
                mapper: this,
                isPhantom: e.isPhantom
              };
              return this.fire("modelToViewPosition", n), n.viewPosition;
            }
          }, {
            key: "markerNameToElements",
            value: function markerNameToElements(t) {
              var e = this._markerNameToElements.get(t);

              if (!e) return null;
              var n = new Set();

              var _iterator117 = _createForOfIteratorHelper(e),
                  _step117;

              try {
                for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {
                  var _t92 = _step117.value;

                  if (_t92.is("attributeElement")) {
                    var _iterator118 = _createForOfIteratorHelper(_t92.getElementsWithSameId()),
                        _step118;

                    try {
                      for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {
                        var _e91 = _step118.value;
                        n.add(_e91);
                      }
                    } catch (err) {
                      _iterator118.e(err);
                    } finally {
                      _iterator118.f();
                    }
                  } else n.add(_t92);
                }
              } catch (err) {
                _iterator117.e(err);
              } finally {
                _iterator117.f();
              }

              return n;
            }
          }, {
            key: "registerViewToModelLength",
            value: function registerViewToModelLength(t, e) {
              this._viewToModelLengthCallbacks.set(t, e);
            }
          }, {
            key: "findMappedViewAncestor",
            value: function findMappedViewAncestor(t) {
              var e = t.parent;

              for (; !this._viewToModelMapping.has(e);) {
                e = e.parent;
              }

              return e;
            }
          }, {
            key: "_toModelOffset",
            value: function _toModelOffset(t, e, n) {
              if (n != t) {
                return this._toModelOffset(t.parent, t.index, n) + this._toModelOffset(t, e, t);
              }

              if (t.is("$text")) return e;
              var i = 0;

              for (var _n93 = 0; _n93 < e; _n93++) {
                i += this.getModelLength(t.getChild(_n93));
              }

              return i;
            }
          }, {
            key: "getModelLength",
            value: function getModelLength(t) {
              if (this._viewToModelLengthCallbacks.get(t.name)) {
                return this._viewToModelLengthCallbacks.get(t.name)(t);
              }

              if (this._viewToModelMapping.has(t)) return 1;
              if (t.is("$text")) return t.data.length;
              if (t.is("uiElement")) return 0;
              {
                var _e92 = 0;

                var _iterator119 = _createForOfIteratorHelper(t.getChildren()),
                    _step119;

                try {
                  for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {
                    var _n94 = _step119.value;
                    _e92 += this.getModelLength(_n94);
                  }
                } catch (err) {
                  _iterator119.e(err);
                } finally {
                  _iterator119.f();
                }

                return _e92;
              }
            }
          }, {
            key: "findPositionIn",
            value: function findPositionIn(t, e) {
              var n,
                  i = 0,
                  o = 0,
                  r = 0;
              if (t.is("$text")) return new Ii(t, e);

              for (; o < e;) {
                n = t.getChild(r), o += i = this.getModelLength(n), r++;
              }

              return o == e ? this._moveViewPositionToTextNode(new Ii(t, r)) : this.findPositionIn(n, e - (o - i));
            }
          }, {
            key: "_moveViewPositionToTextNode",
            value: function _moveViewPositionToTextNode(t) {
              var e = t.nodeBefore,
                  n = t.nodeAfter;
              return e instanceof wn ? new Ii(e, e.data.length) : n instanceof wn ? new Ii(n, 0) : t;
            }
          }]);

          return ea;
        }();

        Object(o["default"])(ea, sn["default"]);

        var na = /*#__PURE__*/function () {
          function na() {
            _classCallCheck(this, na);

            this._consumable = new Map(), this._textProxyRegistry = new Map();
          }

          _createClass(na, [{
            key: "add",
            value: function add(t, e) {
              e = ia(e), t instanceof Ws && (t = this._getSymbolForTextProxy(t)), this._consumable.has(t) || this._consumable.set(t, new Map()), this._consumable.get(t).set(e, !0);
            }
          }, {
            key: "consume",
            value: function consume(t, e) {
              return e = ia(e), t instanceof Ws && (t = this._getSymbolForTextProxy(t)), !!this.test(t, e) && (this._consumable.get(t).set(e, !1), !0);
            }
          }, {
            key: "test",
            value: function test(t, e) {
              e = ia(e), t instanceof Ws && (t = this._getSymbolForTextProxy(t));

              var n = this._consumable.get(t);

              if (void 0 === n) return null;
              var i = n.get(e);
              return void 0 === i ? null : i;
            }
          }, {
            key: "revert",
            value: function revert(t, e) {
              e = ia(e), t instanceof Ws && (t = this._getSymbolForTextProxy(t));
              var n = this.test(t, e);
              return !1 === n ? (this._consumable.get(t).set(e, !0), !0) : !0 !== n && null;
            }
          }, {
            key: "_getSymbolForTextProxy",
            value: function _getSymbolForTextProxy(t) {
              var e = null;

              var n = this._textProxyRegistry.get(t.startOffset);

              if (n) {
                var _i67 = n.get(t.endOffset);

                _i67 && (e = _i67.get(t.parent));
              }

              return e || (e = this._addSymbolForTextProxy(t.startOffset, t.endOffset, t.parent)), e;
            }
          }, {
            key: "_addSymbolForTextProxy",
            value: function _addSymbolForTextProxy(t, e, n) {
              var i = Symbol("textProxySymbol");
              var o, r;
              return (o = this._textProxyRegistry.get(t)) || (o = new Map(), this._textProxyRegistry.set(t, o)), (r = o.get(e)) || (r = new Map(), o.set(e, r)), r.set(n, i), i;
            }
          }]);

          return na;
        }();

        function ia(t) {
          var e = t.split(":");
          return "addMarker" == e[0] || "removeMarker" == e[0] ? t : e.length > 1 ? e[0] + ":" + e[1] : e[0];
        }

        var oa = /*#__PURE__*/function () {
          function oa(t) {
            _classCallCheck(this, oa);

            this.conversionApi = Object.assign({
              dispatcher: this
            }, t), this._reconversionEventsMapping = new Map();
          }

          _createClass(oa, [{
            key: "convertChanges",
            value: function convertChanges(t, e, n) {
              var _iterator120 = _createForOfIteratorHelper(t.getMarkersToRemove()),
                  _step120;

              try {
                for (_iterator120.s(); !(_step120 = _iterator120.n()).done;) {
                  var _e93 = _step120.value;
                  this.convertMarkerRemove(_e93.name, _e93.range, n);
                }
              } catch (err) {
                _iterator120.e(err);
              } finally {
                _iterator120.f();
              }

              var i = this._mapChangesWithAutomaticReconversion(t);

              var _iterator121 = _createForOfIteratorHelper(i),
                  _step121;

              try {
                for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {
                  var _t93 = _step121.value;
                  "insert" === _t93.type ? this.convertInsert(ta._createFromPositionAndShift(_t93.position, _t93.length), n) : "remove" === _t93.type ? this.convertRemove(_t93.position, _t93.length, _t93.name, n) : "reconvert" === _t93.type ? this.reconvertElement(_t93.element, n) : this.convertAttribute(_t93.range, _t93.attributeKey, _t93.attributeOldValue, _t93.attributeNewValue, n);
                }
              } catch (err) {
                _iterator121.e(err);
              } finally {
                _iterator121.f();
              }

              var _iterator122 = _createForOfIteratorHelper(this.conversionApi.mapper.flushUnboundMarkerNames()),
                  _step122;

              try {
                for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {
                  var _t94 = _step122.value;

                  var _i68 = e.get(_t94).getRange();

                  this.convertMarkerRemove(_t94, _i68, n), this.convertMarkerAdd(_t94, _i68, n);
                }
              } catch (err) {
                _iterator122.e(err);
              } finally {
                _iterator122.f();
              }

              var _iterator123 = _createForOfIteratorHelper(t.getMarkersToAdd()),
                  _step123;

              try {
                for (_iterator123.s(); !(_step123 = _iterator123.n()).done;) {
                  var _e94 = _step123.value;
                  this.convertMarkerAdd(_e94.name, _e94.range, n);
                }
              } catch (err) {
                _iterator123.e(err);
              } finally {
                _iterator123.f();
              }
            }
          }, {
            key: "convertInsert",
            value: function convertInsert(t, e) {
              this.conversionApi.writer = e, this.conversionApi.consumable = this._createInsertConsumable(t);

              var _iterator124 = _createForOfIteratorHelper(Array.from(t).map(sa)),
                  _step124;

              try {
                for (_iterator124.s(); !(_step124 = _iterator124.n()).done;) {
                  var _e95 = _step124.value;

                  this._convertInsertWithAttributes(_e95);
                }
              } catch (err) {
                _iterator124.e(err);
              } finally {
                _iterator124.f();
              }

              this._clearConversionApi();
            }
          }, {
            key: "convertRemove",
            value: function convertRemove(t, e, n, i) {
              this.conversionApi.writer = i, this.fire("remove:" + n, {
                position: t,
                length: e
              }, this.conversionApi), this._clearConversionApi();
            }
          }, {
            key: "convertAttribute",
            value: function convertAttribute(t, e, n, i, o) {
              this.conversionApi.writer = o, this.conversionApi.consumable = this._createConsumableForRange(t, "attribute:".concat(e));

              var _iterator125 = _createForOfIteratorHelper(t),
                  _step125;

              try {
                for (_iterator125.s(); !(_step125 = _iterator125.n()).done;) {
                  var _o36 = _step125.value;
                  var _t95 = {
                    item: _o36.item,
                    range: ta._createFromPositionAndShift(_o36.previousPosition, _o36.length),
                    attributeKey: e,
                    attributeOldValue: n,
                    attributeNewValue: i
                  };

                  this._testAndFire("attribute:".concat(e), _t95);
                }
              } catch (err) {
                _iterator125.e(err);
              } finally {
                _iterator125.f();
              }

              this._clearConversionApi();
            }
          }, {
            key: "reconvertElement",
            value: function reconvertElement(t, e) {
              var n = ta._createOn(t);

              this.conversionApi.writer = e, this.conversionApi.consumable = this._createInsertConsumable(n);
              var i = this.conversionApi.mapper,
                  o = i.toViewElement(t);
              e.remove(o), this._convertInsertWithAttributes({
                item: t,
                range: n
              });
              var r = i.toViewElement(t);

              var _iterator126 = _createForOfIteratorHelper(ta._createIn(t)),
                  _step126;

              try {
                for (_iterator126.s(); !(_step126 = _iterator126.n()).done;) {
                  var _n95 = _step126.value;

                  var _t96 = _n95.item,
                      _o37 = aa(_t96, i);

                  _o37 ? _o37.root !== r.root && e.move(e.createRangeOn(_o37), i.toViewPosition(Ks._createBefore(_t96))) : this._convertInsertWithAttributes(sa(_n95));
                }
              } catch (err) {
                _iterator126.e(err);
              } finally {
                _iterator126.f();
              }

              i.unbindViewElement(o), this._clearConversionApi();
            }
          }, {
            key: "convertSelection",
            value: function convertSelection(t, e, n) {
              var i = Array.from(e.getMarkersAtPosition(t.getFirstPosition()));

              if (this.conversionApi.writer = n, this.conversionApi.consumable = this._createSelectionConsumable(t, i), this.fire("selection", {
                selection: t
              }, this.conversionApi), t.isCollapsed) {
                var _iterator127 = _createForOfIteratorHelper(i),
                    _step127;

                try {
                  for (_iterator127.s(); !(_step127 = _iterator127.n()).done;) {
                    var _e96 = _step127.value;

                    var _n96 = _e96.getRange();

                    if (!ra(t.getFirstPosition(), _e96, this.conversionApi.mapper)) continue;
                    var _i69 = {
                      item: t,
                      markerName: _e96.name,
                      markerRange: _n96
                    };
                    this.conversionApi.consumable.test(t, "addMarker:" + _e96.name) && this.fire("addMarker:" + _e96.name, _i69, this.conversionApi);
                  }
                } catch (err) {
                  _iterator127.e(err);
                } finally {
                  _iterator127.f();
                }

                var _iterator128 = _createForOfIteratorHelper(t.getAttributeKeys()),
                    _step128;

                try {
                  for (_iterator128.s(); !(_step128 = _iterator128.n()).done;) {
                    var _e97 = _step128.value;
                    var _n97 = {
                      item: t,
                      range: t.getFirstRange(),
                      attributeKey: _e97,
                      attributeOldValue: null,
                      attributeNewValue: t.getAttribute(_e97)
                    };
                    this.conversionApi.consumable.test(t, "attribute:" + _n97.attributeKey) && this.fire("attribute:" + _n97.attributeKey + ":$text", _n97, this.conversionApi);
                  }
                } catch (err) {
                  _iterator128.e(err);
                } finally {
                  _iterator128.f();
                }

                this._clearConversionApi();
              } else this._clearConversionApi();
            }
          }, {
            key: "convertMarkerAdd",
            value: function convertMarkerAdd(t, e, n) {
              if ("$graveyard" == e.root.rootName) return;
              this.conversionApi.writer = n;
              var i = "addMarker:" + t,
                  o = new na();

              if (o.add(e, i), this.conversionApi.consumable = o, this.fire(i, {
                markerName: t,
                markerRange: e
              }, this.conversionApi), o.test(e, i)) {
                this.conversionApi.consumable = this._createConsumableForRange(e, i);

                var _iterator129 = _createForOfIteratorHelper(e.getItems()),
                    _step129;

                try {
                  for (_iterator129.s(); !(_step129 = _iterator129.n()).done;) {
                    var _n98 = _step129.value;
                    if (!this.conversionApi.consumable.test(_n98, i)) continue;
                    var _o38 = {
                      item: _n98,
                      range: ta._createOn(_n98),
                      markerName: t,
                      markerRange: e
                    };
                    this.fire(i, _o38, this.conversionApi);
                  }
                } catch (err) {
                  _iterator129.e(err);
                } finally {
                  _iterator129.f();
                }

                this._clearConversionApi();
              } else this._clearConversionApi();
            }
          }, {
            key: "convertMarkerRemove",
            value: function convertMarkerRemove(t, e, n) {
              "$graveyard" != e.root.rootName && (this.conversionApi.writer = n, this.fire("removeMarker:" + t, {
                markerName: t,
                markerRange: e
              }, this.conversionApi), this._clearConversionApi());
            }
          }, {
            key: "_mapReconversionTriggerEvent",
            value: function _mapReconversionTriggerEvent(t, e) {
              this._reconversionEventsMapping.set(e, t);
            }
          }, {
            key: "_createInsertConsumable",
            value: function _createInsertConsumable(t) {
              var e = new na();

              var _iterator130 = _createForOfIteratorHelper(t),
                  _step130;

              try {
                for (_iterator130.s(); !(_step130 = _iterator130.n()).done;) {
                  var _n99 = _step130.value;
                  var _t97 = _n99.item;
                  e.add(_t97, "insert");

                  var _iterator131 = _createForOfIteratorHelper(_t97.getAttributeKeys()),
                      _step131;

                  try {
                    for (_iterator131.s(); !(_step131 = _iterator131.n()).done;) {
                      var _n100 = _step131.value;
                      e.add(_t97, "attribute:" + _n100);
                    }
                  } catch (err) {
                    _iterator131.e(err);
                  } finally {
                    _iterator131.f();
                  }
                }
              } catch (err) {
                _iterator130.e(err);
              } finally {
                _iterator130.f();
              }

              return e;
            }
          }, {
            key: "_createConsumableForRange",
            value: function _createConsumableForRange(t, e) {
              var n = new na();

              var _iterator132 = _createForOfIteratorHelper(t.getItems()),
                  _step132;

              try {
                for (_iterator132.s(); !(_step132 = _iterator132.n()).done;) {
                  var _i70 = _step132.value;
                  n.add(_i70, e);
                }
              } catch (err) {
                _iterator132.e(err);
              } finally {
                _iterator132.f();
              }

              return n;
            }
          }, {
            key: "_createSelectionConsumable",
            value: function _createSelectionConsumable(t, e) {
              var n = new na();
              n.add(t, "selection");

              var _iterator133 = _createForOfIteratorHelper(e),
                  _step133;

              try {
                for (_iterator133.s(); !(_step133 = _iterator133.n()).done;) {
                  var _i71 = _step133.value;
                  n.add(t, "addMarker:" + _i71.name);
                }
              } catch (err) {
                _iterator133.e(err);
              } finally {
                _iterator133.f();
              }

              var _iterator134 = _createForOfIteratorHelper(t.getAttributeKeys()),
                  _step134;

              try {
                for (_iterator134.s(); !(_step134 = _iterator134.n()).done;) {
                  var _e98 = _step134.value;
                  n.add(t, "attribute:" + _e98);
                }
              } catch (err) {
                _iterator134.e(err);
              } finally {
                _iterator134.f();
              }

              return n;
            }
          }, {
            key: "_testAndFire",
            value: function _testAndFire(t, e) {
              this.conversionApi.consumable.test(e.item, t) && this.fire(function (t, e) {
                var n = e.item.name || "$text";
                return "".concat(t, ":").concat(n);
              }(t, e), e, this.conversionApi);
            }
          }, {
            key: "_clearConversionApi",
            value: function _clearConversionApi() {
              delete this.conversionApi.writer, delete this.conversionApi.consumable;
            }
          }, {
            key: "_convertInsertWithAttributes",
            value: function _convertInsertWithAttributes(t) {
              this._testAndFire("insert", t);

              var _iterator135 = _createForOfIteratorHelper(t.item.getAttributeKeys()),
                  _step135;

              try {
                for (_iterator135.s(); !(_step135 = _iterator135.n()).done;) {
                  var _e99 = _step135.value;
                  t.attributeKey = _e99, t.attributeOldValue = null, t.attributeNewValue = t.item.getAttribute(_e99), this._testAndFire("attribute:".concat(_e99), t);
                }
              } catch (err) {
                _iterator135.e(err);
              } finally {
                _iterator135.f();
              }
            }
          }, {
            key: "_mapChangesWithAutomaticReconversion",
            value: function _mapChangesWithAutomaticReconversion(t) {
              var e = new Set(),
                  n = [];

              var _iterator136 = _createForOfIteratorHelper(t.getChanges()),
                  _step136;

              try {
                for (_iterator136.s(); !(_step136 = _iterator136.n()).done;) {
                  var _i72 = _step136.value;

                  var _t98 = _i72.position || _i72.range.start,
                      _o39 = _t98.parent;

                  if (Qs(_t98, _o39)) {
                    n.push(_i72);
                    continue;
                  }

                  var _r25 = "attribute" === _i72.type ? Xs(_t98, _o39, null) : _o39;

                  if (_r25.is("$text")) {
                    n.push(_i72);
                    continue;
                  }

                  var _s15 = void 0;

                  if (_s15 = "attribute" === _i72.type ? "attribute:".concat(_i72.attributeKey, ":").concat(_r25.name) : "".concat(_i72.type, ":").concat(_i72.name), this._isReconvertTriggerEvent(_s15, _r25.name)) {
                    if (e.has(_r25)) continue;
                    e.add(_r25), n.push({
                      type: "reconvert",
                      element: _r25
                    });
                  } else n.push(_i72);
                }
              } catch (err) {
                _iterator136.e(err);
              } finally {
                _iterator136.f();
              }

              return n;
            }
          }, {
            key: "_isReconvertTriggerEvent",
            value: function _isReconvertTriggerEvent(t, e) {
              return this._reconversionEventsMapping.get(t) === e;
            }
          }]);

          return oa;
        }();

        function ra(t, e, n) {
          var i = e.getRange(),
              o = Array.from(t.getAncestors());
          return o.shift(), o.reverse(), !o.some(function (t) {
            if (i.containsItem(t)) {
              return !!n.toViewElement(t).getCustomProperty("addHighlight");
            }
          });
        }

        function sa(t) {
          return {
            item: t.item,
            range: ta._createFromPositionAndShift(t.previousPosition, t.length)
          };
        }

        function aa(t, e) {
          if (t.is("textProxy")) {
            var _n101 = e.toViewPosition(Ks._createBefore(t)).parent;
            return _n101.is("$text") ? _n101 : null;
          }

          return e.toViewElement(t);
        }

        Object(o["default"])(oa, sn["default"]);

        var ca = /*#__PURE__*/function () {
          function ca(t, e, n) {
            _classCallCheck(this, ca);

            this._lastRangeBackward = !1, this._ranges = [], this._attrs = new Map(), t && this.setTo(t, e, n);
          }

          _createClass(ca, [{
            key: "anchor",
            get: function get() {
              if (this._ranges.length > 0) {
                var _t99 = this._ranges[this._ranges.length - 1];
                return this._lastRangeBackward ? _t99.end : _t99.start;
              }

              return null;
            }
          }, {
            key: "focus",
            get: function get() {
              if (this._ranges.length > 0) {
                var _t100 = this._ranges[this._ranges.length - 1];
                return this._lastRangeBackward ? _t100.start : _t100.end;
              }

              return null;
            }
          }, {
            key: "isCollapsed",
            get: function get() {
              return 1 === this._ranges.length && this._ranges[0].isCollapsed;
            }
          }, {
            key: "rangeCount",
            get: function get() {
              return this._ranges.length;
            }
          }, {
            key: "isBackward",
            get: function get() {
              return !this.isCollapsed && this._lastRangeBackward;
            }
          }, {
            key: "isEqual",
            value: function isEqual(t) {
              if (this.rangeCount != t.rangeCount) return !1;
              if (0 === this.rangeCount) return !0;
              if (!this.anchor.isEqual(t.anchor) || !this.focus.isEqual(t.focus)) return !1;

              var _iterator137 = _createForOfIteratorHelper(this._ranges),
                  _step137;

              try {
                for (_iterator137.s(); !(_step137 = _iterator137.n()).done;) {
                  var _e100 = _step137.value;

                  var _n102 = !1;

                  var _iterator138 = _createForOfIteratorHelper(t._ranges),
                      _step138;

                  try {
                    for (_iterator138.s(); !(_step138 = _iterator138.n()).done;) {
                      var _i73 = _step138.value;

                      if (_e100.isEqual(_i73)) {
                        _n102 = !0;
                        break;
                      }
                    }
                  } catch (err) {
                    _iterator138.e(err);
                  } finally {
                    _iterator138.f();
                  }

                  if (!_n102) return !1;
                }
              } catch (err) {
                _iterator137.e(err);
              } finally {
                _iterator137.f();
              }

              return !0;
            }
          }, {
            key: "getRanges",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getRanges() {
              var _iterator139, _step139, _t101;

              return regeneratorRuntime.wrap(function getRanges$(_context49) {
                while (1) {
                  switch (_context49.prev = _context49.next) {
                    case 0:
                      _iterator139 = _createForOfIteratorHelper(this._ranges);
                      _context49.prev = 1;

                      _iterator139.s();

                    case 3:
                      if ((_step139 = _iterator139.n()).done) {
                        _context49.next = 9;
                        break;
                      }

                      _t101 = _step139.value;
                      _context49.next = 7;
                      return new ta(_t101.start, _t101.end);

                    case 7:
                      _context49.next = 3;
                      break;

                    case 9:
                      _context49.next = 14;
                      break;

                    case 11:
                      _context49.prev = 11;
                      _context49.t0 = _context49["catch"](1);

                      _iterator139.e(_context49.t0);

                    case 14:
                      _context49.prev = 14;

                      _iterator139.f();

                      return _context49.finish(14);

                    case 17:
                    case "end":
                      return _context49.stop();
                  }
                }
              }, getRanges, this, [[1, 11, 14, 17]]);
            })
          }, {
            key: "getFirstRange",
            value: function getFirstRange() {
              var t = null;

              var _iterator140 = _createForOfIteratorHelper(this._ranges),
                  _step140;

              try {
                for (_iterator140.s(); !(_step140 = _iterator140.n()).done;) {
                  var _e101 = _step140.value;
                  t && !_e101.start.isBefore(t.start) || (t = _e101);
                }
              } catch (err) {
                _iterator140.e(err);
              } finally {
                _iterator140.f();
              }

              return t ? new ta(t.start, t.end) : null;
            }
          }, {
            key: "getLastRange",
            value: function getLastRange() {
              var t = null;

              var _iterator141 = _createForOfIteratorHelper(this._ranges),
                  _step141;

              try {
                for (_iterator141.s(); !(_step141 = _iterator141.n()).done;) {
                  var _e102 = _step141.value;
                  t && !_e102.end.isAfter(t.end) || (t = _e102);
                }
              } catch (err) {
                _iterator141.e(err);
              } finally {
                _iterator141.f();
              }

              return t ? new ta(t.start, t.end) : null;
            }
          }, {
            key: "getFirstPosition",
            value: function getFirstPosition() {
              var t = this.getFirstRange();
              return t ? t.start.clone() : null;
            }
          }, {
            key: "getLastPosition",
            value: function getLastPosition() {
              var t = this.getLastRange();
              return t ? t.end.clone() : null;
            }
          }, {
            key: "setTo",
            value: function setTo(t, e, n) {
              if (null === t) this._setRanges([]);else if (t instanceof ca) this._setRanges(t.getRanges(), t.isBackward);else if (t && "function" == typeof t.getRanges) this._setRanges(t.getRanges(), t.isBackward);else if (t instanceof ta) this._setRanges([t], !!e && !!e.backward);else if (t instanceof Ks) this._setRanges([new ta(t)]);else if (t instanceof Hs) {
                var _i74 = !!n && !!n.backward;

                var _o40;

                if ("in" == e) _o40 = ta._createIn(t);else if ("on" == e) _o40 = ta._createOn(t);else {
                  if (void 0 === e) throw new rn["default"]("model-selection-setto-required-second-parameter", [this, t]);
                  _o40 = new ta(Ks._createAt(t, e));
                }

                this._setRanges([_o40], _i74);
              } else {
                if (!Object(yn.a)(t)) throw new rn["default"]("model-selection-setto-not-selectable", [this, t]);

                this._setRanges(t, e && !!e.backward);
              }
            }
          }, {
            key: "_setRanges",
            value: function _setRanges(t) {
              var _this118 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              var n = (t = Array.from(t)).some(function (e) {
                if (!(e instanceof ta)) throw new rn["default"]("model-selection-set-ranges-not-range", [_this118, t]);
                return _this118._ranges.every(function (t) {
                  return !t.isEqual(e);
                });
              });

              if (t.length !== this._ranges.length || n) {
                this._removeAllRanges();

                var _iterator142 = _createForOfIteratorHelper(t),
                    _step142;

                try {
                  for (_iterator142.s(); !(_step142 = _iterator142.n()).done;) {
                    var _e103 = _step142.value;

                    this._pushRange(_e103);
                  }
                } catch (err) {
                  _iterator142.e(err);
                } finally {
                  _iterator142.f();
                }

                this._lastRangeBackward = !!e, this.fire("change:range", {
                  directChange: !0
                });
              }
            }
          }, {
            key: "setFocus",
            value: function setFocus(t, e) {
              if (null === this.anchor) throw new rn["default"]("model-selection-setfocus-no-ranges", [this, t]);

              var n = Ks._createAt(t, e);

              if ("same" == n.compareWith(this.focus)) return;
              var i = this.anchor;
              this._ranges.length && this._popRange(), "before" == n.compareWith(i) ? (this._pushRange(new ta(n, i)), this._lastRangeBackward = !0) : (this._pushRange(new ta(i, n)), this._lastRangeBackward = !1), this.fire("change:range", {
                directChange: !0
              });
            }
          }, {
            key: "getAttribute",
            value: function getAttribute(t) {
              return this._attrs.get(t);
            }
          }, {
            key: "getAttributes",
            value: function getAttributes() {
              return this._attrs.entries();
            }
          }, {
            key: "getAttributeKeys",
            value: function getAttributeKeys() {
              return this._attrs.keys();
            }
          }, {
            key: "hasAttribute",
            value: function hasAttribute(t) {
              return this._attrs.has(t);
            }
          }, {
            key: "removeAttribute",
            value: function removeAttribute(t) {
              this.hasAttribute(t) && (this._attrs["delete"](t), this.fire("change:attribute", {
                attributeKeys: [t],
                directChange: !0
              }));
            }
          }, {
            key: "setAttribute",
            value: function setAttribute(t, e) {
              this.getAttribute(t) !== e && (this._attrs.set(t, e), this.fire("change:attribute", {
                attributeKeys: [t],
                directChange: !0
              }));
            }
          }, {
            key: "getSelectedElement",
            value: function getSelectedElement() {
              return 1 !== this.rangeCount ? null : this.getFirstRange().getContainedElement();
            }
          }, {
            key: "is",
            value: function is(t) {
              return "selection" === t || "model:selection" === t;
            }
          }, {
            key: "getSelectedBlocks",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getSelectedBlocks() {
              var t, _iterator143, _step143, _e104, _n103, _iterator144, _step144, _n104, _i76, _i75;

              return regeneratorRuntime.wrap(function getSelectedBlocks$(_context50) {
                while (1) {
                  switch (_context50.prev = _context50.next) {
                    case 0:
                      t = new WeakSet();
                      _iterator143 = _createForOfIteratorHelper(this.getRanges());
                      _context50.prev = 2;

                      _iterator143.s();

                    case 4:
                      if ((_step143 = _iterator143.n()).done) {
                        _context50.next = 38;
                        break;
                      }

                      _e104 = _step143.value;
                      _n103 = ua(_e104.start, t);
                      _context50.t0 = _n103 && ha(_n103, _e104);

                      if (!_context50.t0) {
                        _context50.next = 11;
                        break;
                      }

                      _context50.next = 11;
                      return _n103;

                    case 11:
                      _iterator144 = _createForOfIteratorHelper(_e104.getWalker());
                      _context50.prev = 12;

                      _iterator144.s();

                    case 14:
                      if ((_step144 = _iterator144.n()).done) {
                        _context50.next = 23;
                        break;
                      }

                      _n104 = _step144.value;
                      _i76 = _n104.item;
                      _context50.t1 = "elementEnd" == _n104.type && da(_i76, t, _e104);

                      if (!_context50.t1) {
                        _context50.next = 21;
                        break;
                      }

                      _context50.next = 21;
                      return _i76;

                    case 21:
                      _context50.next = 14;
                      break;

                    case 23:
                      _context50.next = 28;
                      break;

                    case 25:
                      _context50.prev = 25;
                      _context50.t2 = _context50["catch"](12);

                      _iterator144.e(_context50.t2);

                    case 28:
                      _context50.prev = 28;

                      _iterator144.f();

                      return _context50.finish(28);

                    case 31:
                      _i75 = ua(_e104.end, t);
                      _context50.t3 = _i75 && !_e104.end.isTouching(Ks._createAt(_i75, 0)) && ha(_i75, _e104);

                      if (!_context50.t3) {
                        _context50.next = 36;
                        break;
                      }

                      _context50.next = 36;
                      return _i75;

                    case 36:
                      _context50.next = 4;
                      break;

                    case 38:
                      _context50.next = 43;
                      break;

                    case 40:
                      _context50.prev = 40;
                      _context50.t4 = _context50["catch"](2);

                      _iterator143.e(_context50.t4);

                    case 43:
                      _context50.prev = 43;

                      _iterator143.f();

                      return _context50.finish(43);

                    case 46:
                    case "end":
                      return _context50.stop();
                  }
                }
              }, getSelectedBlocks, this, [[2, 40, 43, 46], [12, 25, 28, 31]]);
            })
          }, {
            key: "containsEntireContent",
            value: function containsEntireContent() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.anchor.root;

              var e = Ks._createAt(t, 0),
                  n = Ks._createAt(t, "end");

              return e.isTouching(this.getFirstPosition()) && n.isTouching(this.getLastPosition());
            }
          }, {
            key: "_pushRange",
            value: function _pushRange(t) {
              this._checkRange(t), this._ranges.push(new ta(t.start, t.end));
            }
          }, {
            key: "_checkRange",
            value: function _checkRange(t) {
              for (var _e105 = 0; _e105 < this._ranges.length; _e105++) {
                if (t.isIntersecting(this._ranges[_e105])) throw new rn["default"]("model-selection-range-intersects", [this, t], {
                  addedRange: t,
                  intersectingRange: this._ranges[_e105]
                });
              }
            }
          }, {
            key: "_removeAllRanges",
            value: function _removeAllRanges() {
              for (; this._ranges.length > 0;) {
                this._popRange();
              }
            }
          }, {
            key: "_popRange",
            value: function _popRange() {
              this._ranges.pop();
            }
          }]);

          return ca;
        }();

        function la(t, e) {
          return !e.has(t) && (e.add(t), t.root.document.model.schema.isBlock(t) && t.parent);
        }

        function da(t, e, n) {
          return la(t, e) && ha(t, n);
        }

        function ua(t, e) {
          var n = t.parent.root.document.model.schema,
              i = t.parent.getAncestors({
            parentFirst: !0,
            includeSelf: !0
          });
          var o = !1;
          var r = i.find(function (t) {
            return !o && !(o = n.isLimit(t)) && la(t, e);
          });
          return i.forEach(function (t) {
            return e.add(t);
          }), r;
        }

        function ha(t, e) {
          var n = function (t) {
            var e = t.root.document.model.schema;
            var n = t.parent;

            for (; n;) {
              if (e.isBlock(n)) return n;
              n = n.parent;
            }
          }(t);

          return !n || !e.containsRange(ta._createOn(n), !0);
        }

        Object(o["default"])(ca, sn["default"]);

        var fa = /*#__PURE__*/function (_ta) {
          _inherits(fa, _ta);

          var _super84 = _createSuper(fa);

          function fa(t, e) {
            var _this119;

            _classCallCheck(this, fa);

            _this119 = _super84.call(this, t, e), function () {
              var _this120 = this;

              this.listenTo(this.root.document.model, "applyOperation", function (t, e) {
                var n = e[0];
                n.isDocumentOperation && function (t) {
                  var e = this.getTransformedByOperation(t),
                      n = ta._createFromRanges(e),
                      i = !n.isEqual(this),
                      o = function (t, e) {
                    switch (e.type) {
                      case "insert":
                        return t.containsPosition(e.position);

                      case "move":
                      case "remove":
                      case "reinsert":
                      case "merge":
                        return t.containsPosition(e.sourcePosition) || t.start.isEqual(e.sourcePosition) || t.containsPosition(e.targetPosition);

                      case "split":
                        return t.containsPosition(e.splitPosition) || t.containsPosition(e.insertionPosition);
                    }

                    return !1;
                  }(this, t);

                  var r = null;

                  if (i) {
                    "$graveyard" == n.root.rootName && (r = "remove" == t.type ? t.sourcePosition : t.deletionPosition);

                    var _e106 = this.toRange();

                    this.start = n.start, this.end = n.end, this.fire("change:range", _e106, {
                      deletionPosition: r
                    });
                  } else o && this.fire("change:content", this.toRange(), {
                    deletionPosition: r
                  });
                }.call(_this120, n);
              }, {
                priority: "low"
              });
            }.call(_assertThisInitialized(_this119));
            return _this119;
          }

          _createClass(fa, [{
            key: "detach",
            value: function detach() {
              this.stopListening();
            }
          }, {
            key: "is",
            value: function is(t) {
              return "liveRange" === t || "model:liveRange" === t || "range" == t || "model:range" === t;
            }
          }, {
            key: "toRange",
            value: function toRange() {
              return new ta(this.start, this.end);
            }
          }], [{
            key: "fromRange",
            value: function fromRange(t) {
              return new fa(t.start, t.end);
            }
          }]);

          return fa;
        }(ta);

        Object(o["default"])(fa, sn["default"]);
        var ga = "selection:";

        var ma = /*#__PURE__*/function () {
          function ma(t) {
            _classCallCheck(this, ma);

            this._selection = new pa(t), this._selection.delegate("change:range").to(this), this._selection.delegate("change:attribute").to(this), this._selection.delegate("change:marker").to(this);
          }

          _createClass(ma, [{
            key: "isCollapsed",
            get: function get() {
              return this._selection.isCollapsed;
            }
          }, {
            key: "anchor",
            get: function get() {
              return this._selection.anchor;
            }
          }, {
            key: "focus",
            get: function get() {
              return this._selection.focus;
            }
          }, {
            key: "rangeCount",
            get: function get() {
              return this._selection.rangeCount;
            }
          }, {
            key: "hasOwnRange",
            get: function get() {
              return this._selection.hasOwnRange;
            }
          }, {
            key: "isBackward",
            get: function get() {
              return this._selection.isBackward;
            }
          }, {
            key: "isGravityOverridden",
            get: function get() {
              return this._selection.isGravityOverridden;
            }
          }, {
            key: "markers",
            get: function get() {
              return this._selection.markers;
            }
          }, {
            key: "_ranges",
            get: function get() {
              return this._selection._ranges;
            }
          }, {
            key: "getRanges",
            value: function getRanges() {
              return this._selection.getRanges();
            }
          }, {
            key: "getFirstPosition",
            value: function getFirstPosition() {
              return this._selection.getFirstPosition();
            }
          }, {
            key: "getLastPosition",
            value: function getLastPosition() {
              return this._selection.getLastPosition();
            }
          }, {
            key: "getFirstRange",
            value: function getFirstRange() {
              return this._selection.getFirstRange();
            }
          }, {
            key: "getLastRange",
            value: function getLastRange() {
              return this._selection.getLastRange();
            }
          }, {
            key: "getSelectedBlocks",
            value: function getSelectedBlocks() {
              return this._selection.getSelectedBlocks();
            }
          }, {
            key: "getSelectedElement",
            value: function getSelectedElement() {
              return this._selection.getSelectedElement();
            }
          }, {
            key: "containsEntireContent",
            value: function containsEntireContent(t) {
              return this._selection.containsEntireContent(t);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._selection.destroy();
            }
          }, {
            key: "getAttributeKeys",
            value: function getAttributeKeys() {
              return this._selection.getAttributeKeys();
            }
          }, {
            key: "getAttributes",
            value: function getAttributes() {
              return this._selection.getAttributes();
            }
          }, {
            key: "getAttribute",
            value: function getAttribute(t) {
              return this._selection.getAttribute(t);
            }
          }, {
            key: "hasAttribute",
            value: function hasAttribute(t) {
              return this._selection.hasAttribute(t);
            }
          }, {
            key: "refresh",
            value: function refresh() {
              this._selection._updateMarkers(), this._selection._updateAttributes(!1);
            }
          }, {
            key: "observeMarkers",
            value: function observeMarkers(t) {
              this._selection.observeMarkers(t);
            }
          }, {
            key: "is",
            value: function is(t) {
              return "selection" === t || "model:selection" == t || "documentSelection" == t || "model:documentSelection" == t;
            }
          }, {
            key: "_setFocus",
            value: function _setFocus(t, e) {
              this._selection.setFocus(t, e);
            }
          }, {
            key: "_setTo",
            value: function _setTo(t, e, n) {
              this._selection.setTo(t, e, n);
            }
          }, {
            key: "_setAttribute",
            value: function _setAttribute(t, e) {
              this._selection.setAttribute(t, e);
            }
          }, {
            key: "_removeAttribute",
            value: function _removeAttribute(t) {
              this._selection.removeAttribute(t);
            }
          }, {
            key: "_getStoredAttributes",
            value: function _getStoredAttributes() {
              return this._selection._getStoredAttributes();
            }
          }, {
            key: "_overrideGravity",
            value: function _overrideGravity() {
              return this._selection.overrideGravity();
            }
          }, {
            key: "_restoreGravity",
            value: function _restoreGravity(t) {
              this._selection.restoreGravity(t);
            }
          }], [{
            key: "_getStoreAttributeKey",
            value: function _getStoreAttributeKey(t) {
              return ga + t;
            }
          }, {
            key: "_isStoreAttributeKey",
            value: function _isStoreAttributeKey(t) {
              return t.startsWith(ga);
            }
          }]);

          return ma;
        }();

        Object(o["default"])(ma, sn["default"]);

        var pa = /*#__PURE__*/function (_ca) {
          _inherits(pa, _ca);

          var _super85 = _createSuper(pa);

          function pa(t) {
            var _this121;

            _classCallCheck(this, pa);

            _this121 = _super85.call(this), _this121.markers = new on["default"]({
              idProperty: "name"
            }), _this121._model = t.model, _this121._document = t, _this121._attributePriority = new Map(), _this121._selectionRestorePosition = null, _this121._hasChangedRange = !1, _this121._overriddenGravityRegister = new Set(), _this121._observedMarkers = new Set(), _this121.listenTo(_this121._model, "applyOperation", function (t, e) {
              var n = e[0];
              n.isDocumentOperation && "marker" != n.type && "rename" != n.type && "noop" != n.type && (0 == _this121._ranges.length && _this121._selectionRestorePosition && _this121._fixGraveyardSelection(_this121._selectionRestorePosition), _this121._selectionRestorePosition = null, _this121._hasChangedRange && (_this121._hasChangedRange = !1, _this121.fire("change:range", {
                directChange: !1
              })));
            }, {
              priority: "lowest"
            }), _this121.on("change:range", function () {
              var _iterator145 = _createForOfIteratorHelper(_this121.getRanges()),
                  _step145;

              try {
                for (_iterator145.s(); !(_step145 = _iterator145.n()).done;) {
                  var _t102 = _step145.value;
                  if (!_this121._document._validateSelectionRange(_t102)) throw new rn["default"]("document-selection-wrong-position", _assertThisInitialized(_this121), {
                    range: _t102
                  });
                }
              } catch (err) {
                _iterator145.e(err);
              } finally {
                _iterator145.f();
              }
            }), _this121.listenTo(_this121._model.markers, "update", function (t, e, n, i) {
              _this121._updateMarker(e, i);
            }), _this121.listenTo(_this121._document, "change", function (t, e) {
              !function (t, e) {
                var n = t.document.differ;

                var _iterator146 = _createForOfIteratorHelper(n.getChanges()),
                    _step146;

                try {
                  var _loop3 = function _loop3() {
                    var i = _step146.value;
                    if ("insert" != i.type) return "continue";
                    var n = i.position.parent,
                        o = i.length === n.maxOffset;
                    o && t.enqueueChange(e, function (t) {
                      var e = Array.from(n.getAttributeKeys()).filter(function (t) {
                        return t.startsWith(ga);
                      });

                      var _iterator147 = _createForOfIteratorHelper(e),
                          _step147;

                      try {
                        for (_iterator147.s(); !(_step147 = _iterator147.n()).done;) {
                          var _i77 = _step147.value;
                          t.removeAttribute(_i77, n);
                        }
                      } catch (err) {
                        _iterator147.e(err);
                      } finally {
                        _iterator147.f();
                      }
                    });
                  };

                  for (_iterator146.s(); !(_step146 = _iterator146.n()).done;) {
                    var _ret = _loop3();

                    if (_ret === "continue") continue;
                  }
                } catch (err) {
                  _iterator146.e(err);
                } finally {
                  _iterator146.f();
                }
              }(_this121._model, e);
            });
            return _this121;
          }

          _createClass(pa, [{
            key: "isCollapsed",
            get: function get() {
              return 0 === this._ranges.length ? this._document._getDefaultRange().isCollapsed : _get3(_getPrototypeOf(pa.prototype), "isCollapsed", this);
            }
          }, {
            key: "anchor",
            get: function get() {
              return _get3(_getPrototypeOf(pa.prototype), "anchor", this) || this._document._getDefaultRange().start;
            }
          }, {
            key: "focus",
            get: function get() {
              return _get3(_getPrototypeOf(pa.prototype), "focus", this) || this._document._getDefaultRange().end;
            }
          }, {
            key: "rangeCount",
            get: function get() {
              return this._ranges.length ? this._ranges.length : 1;
            }
          }, {
            key: "hasOwnRange",
            get: function get() {
              return this._ranges.length > 0;
            }
          }, {
            key: "isGravityOverridden",
            get: function get() {
              return !!this._overriddenGravityRegister.size;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              for (var _t103 = 0; _t103 < this._ranges.length; _t103++) {
                this._ranges[_t103].detach();
              }

              this.stopListening();
            }
          }, {
            key: "getRanges",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getRanges() {
              return regeneratorRuntime.wrap(function getRanges$(_context51) {
                while (1) {
                  switch (_context51.prev = _context51.next) {
                    case 0:
                      if (!this._ranges.length) {
                        _context51.next = 4;
                        break;
                      }

                      return _context51.delegateYield(_get3(_getPrototypeOf(pa.prototype), "getRanges", this).call(this), "t0", 2);

                    case 2:
                      _context51.next = 6;
                      break;

                    case 4:
                      _context51.next = 6;
                      return this._document._getDefaultRange();

                    case 6:
                    case "end":
                      return _context51.stop();
                  }
                }
              }, getRanges, this);
            })
          }, {
            key: "getFirstRange",
            value: function getFirstRange() {
              return _get3(_getPrototypeOf(pa.prototype), "getFirstRange", this).call(this) || this._document._getDefaultRange();
            }
          }, {
            key: "getLastRange",
            value: function getLastRange() {
              return _get3(_getPrototypeOf(pa.prototype), "getLastRange", this).call(this) || this._document._getDefaultRange();
            }
          }, {
            key: "setTo",
            value: function setTo(t, e, n) {
              _get3(_getPrototypeOf(pa.prototype), "setTo", this).call(this, t, e, n), this._updateAttributes(!0), this._updateMarkers();
            }
          }, {
            key: "setFocus",
            value: function setFocus(t, e) {
              _get3(_getPrototypeOf(pa.prototype), "setFocus", this).call(this, t, e), this._updateAttributes(!0), this._updateMarkers();
            }
          }, {
            key: "setAttribute",
            value: function setAttribute(t, e) {
              if (this._setAttribute(t, e)) {
                var _e107 = [t];
                this.fire("change:attribute", {
                  attributeKeys: _e107,
                  directChange: !0
                });
              }
            }
          }, {
            key: "removeAttribute",
            value: function removeAttribute(t) {
              if (this._removeAttribute(t)) {
                var _e108 = [t];
                this.fire("change:attribute", {
                  attributeKeys: _e108,
                  directChange: !0
                });
              }
            }
          }, {
            key: "overrideGravity",
            value: function overrideGravity() {
              var t = Object(Xo.a)();
              return this._overriddenGravityRegister.add(t), 1 === this._overriddenGravityRegister.size && this._updateAttributes(!0), t;
            }
          }, {
            key: "restoreGravity",
            value: function restoreGravity(t) {
              if (!this._overriddenGravityRegister.has(t)) throw new rn["default"]("document-selection-gravity-wrong-restore", this, {
                uid: t
              });
              this._overriddenGravityRegister["delete"](t), this.isGravityOverridden || this._updateAttributes(!0);
            }
          }, {
            key: "observeMarkers",
            value: function observeMarkers(t) {
              this._observedMarkers.add(t), this._updateMarkers();
            }
          }, {
            key: "_popRange",
            value: function _popRange() {
              this._ranges.pop().detach();
            }
          }, {
            key: "_pushRange",
            value: function _pushRange(t) {
              var e = this._prepareRange(t);

              e && this._ranges.push(e);
            }
          }, {
            key: "_prepareRange",
            value: function _prepareRange(t) {
              var _this122 = this;

              if (this._checkRange(t), t.root == this._document.graveyard) return;
              var e = fa.fromRange(t);
              return e.on("change:range", function (t, n, i) {
                if (_this122._hasChangedRange = !0, e.root == _this122._document.graveyard) {
                  _this122._selectionRestorePosition = i.deletionPosition;

                  var _t104 = _this122._ranges.indexOf(e);

                  _this122._ranges.splice(_t104, 1), e.detach();
                }
              }), e;
            }
          }, {
            key: "_updateMarkers",
            value: function _updateMarkers() {
              if (!this._observedMarkers.size) return;
              var t = [];
              var e = !1;

              var _iterator148 = _createForOfIteratorHelper(this._model.markers),
                  _step148;

              try {
                for (_iterator148.s(); !(_step148 = _iterator148.n()).done;) {
                  var _e109 = _step148.value;

                  var _n107 = _e109.name.split(":", 1)[0];

                  if (!this._observedMarkers.has(_n107)) continue;

                  var _i80 = _e109.getRange();

                  var _iterator149 = _createForOfIteratorHelper(this.getRanges()),
                      _step149;

                  try {
                    for (_iterator149.s(); !(_step149 = _iterator149.n()).done;) {
                      var _n108 = _step149.value;
                      _i80.containsRange(_n108, !_n108.isCollapsed) && t.push(_e109);
                    }
                  } catch (err) {
                    _iterator149.e(err);
                  } finally {
                    _iterator149.f();
                  }
                }
              } catch (err) {
                _iterator148.e(err);
              } finally {
                _iterator148.f();
              }

              var n = Array.from(this.markers);

              for (var _i78 = 0, _t105 = t; _i78 < _t105.length; _i78++) {
                var _n105 = _t105[_i78];
                this.markers.has(_n105) || (this.markers.add(_n105), e = !0);
              }

              for (var _i79 = 0, _Array$from2 = Array.from(this.markers); _i79 < _Array$from2.length; _i79++) {
                var _n106 = _Array$from2[_i79];
                t.includes(_n106) || (this.markers.remove(_n106), e = !0);
              }

              e && this.fire("change:marker", {
                oldMarkers: n,
                directChange: !1
              });
            }
          }, {
            key: "_updateMarker",
            value: function _updateMarker(t, e) {
              var n = t.name.split(":", 1)[0];
              if (!this._observedMarkers.has(n)) return;
              var i = !1;
              var o = Array.from(this.markers),
                  r = this.markers.has(t);

              if (e) {
                var _n109 = !1;

                var _iterator150 = _createForOfIteratorHelper(this.getRanges()),
                    _step150;

                try {
                  for (_iterator150.s(); !(_step150 = _iterator150.n()).done;) {
                    var _t106 = _step150.value;

                    if (e.containsRange(_t106, !_t106.isCollapsed)) {
                      _n109 = !0;
                      break;
                    }
                  }
                } catch (err) {
                  _iterator150.e(err);
                } finally {
                  _iterator150.f();
                }

                _n109 && !r ? (this.markers.add(t), i = !0) : !_n109 && r && (this.markers.remove(t), i = !0);
              } else r && (this.markers.remove(t), i = !0);

              i && this.fire("change:marker", {
                oldMarkers: o,
                directChange: !1
              });
            }
          }, {
            key: "_updateAttributes",
            value: function _updateAttributes(t) {
              var e = xn(this._getSurroundingAttributes()),
                  n = xn(this.getAttributes());
              if (t) this._attributePriority = new Map(), this._attrs = new Map();else {
                var _iterator151 = _createForOfIteratorHelper(this._attributePriority),
                    _step151;

                try {
                  for (_iterator151.s(); !(_step151 = _iterator151.n()).done;) {
                    var _step151$value = _slicedToArray(_step151.value, 2),
                        _t107 = _step151$value[0],
                        _e110 = _step151$value[1];

                    "low" == _e110 && (this._attrs["delete"](_t107), this._attributePriority["delete"](_t107));
                  }
                } catch (err) {
                  _iterator151.e(err);
                } finally {
                  _iterator151.f();
                }
              }

              this._setAttributesTo(e);

              var i = [];

              var _iterator152 = _createForOfIteratorHelper(this.getAttributes()),
                  _step152;

              try {
                for (_iterator152.s(); !(_step152 = _iterator152.n()).done;) {
                  var _step152$value = _slicedToArray(_step152.value, 2),
                      _t108 = _step152$value[0],
                      _e111 = _step152$value[1];

                  n.has(_t108) && n.get(_t108) === _e111 || i.push(_t108);
                }
              } catch (err) {
                _iterator152.e(err);
              } finally {
                _iterator152.f();
              }

              var _iterator153 = _createForOfIteratorHelper(n),
                  _step153;

              try {
                for (_iterator153.s(); !(_step153 = _iterator153.n()).done;) {
                  var _step153$value = _slicedToArray(_step153.value, 1),
                      _t109 = _step153$value[0];

                  this.hasAttribute(_t109) || i.push(_t109);
                }
              } catch (err) {
                _iterator153.e(err);
              } finally {
                _iterator153.f();
              }

              i.length > 0 && this.fire("change:attribute", {
                attributeKeys: i,
                directChange: !1
              });
            }
          }, {
            key: "_setAttribute",
            value: function _setAttribute(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
              var i = n ? "normal" : "low";
              return ("low" != i || "normal" != this._attributePriority.get(t)) && _get3(_getPrototypeOf(pa.prototype), "getAttribute", this).call(this, t) !== e && (this._attrs.set(t, e), this._attributePriority.set(t, i), !0);
            }
          }, {
            key: "_removeAttribute",
            value: function _removeAttribute(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
              var n = e ? "normal" : "low";
              return ("low" != n || "normal" != this._attributePriority.get(t)) && (this._attributePriority.set(t, n), !!_get3(_getPrototypeOf(pa.prototype), "hasAttribute", this).call(this, t) && (this._attrs["delete"](t), !0));
            }
          }, {
            key: "_setAttributesTo",
            value: function _setAttributesTo(t) {
              var e = new Set();

              var _iterator154 = _createForOfIteratorHelper(this.getAttributes()),
                  _step154;

              try {
                for (_iterator154.s(); !(_step154 = _iterator154.n()).done;) {
                  var _step154$value = _slicedToArray(_step154.value, 2),
                      _e112 = _step154$value[0],
                      _n110 = _step154$value[1];

                  t.get(_e112) !== _n110 && this._removeAttribute(_e112, !1);
                }
              } catch (err) {
                _iterator154.e(err);
              } finally {
                _iterator154.f();
              }

              var _iterator155 = _createForOfIteratorHelper(t),
                  _step155;

              try {
                for (_iterator155.s(); !(_step155 = _iterator155.n()).done;) {
                  var _step155$value = _slicedToArray(_step155.value, 2),
                      _n111 = _step155$value[0],
                      _i81 = _step155$value[1];

                  this._setAttribute(_n111, _i81, !1) && e.add(_n111);
                }
              } catch (err) {
                _iterator155.e(err);
              } finally {
                _iterator155.f();
              }

              return e;
            }
          }, {
            key: "_getStoredAttributes",
            value: /*#__PURE__*/regeneratorRuntime.mark(function _getStoredAttributes() {
              var t, _iterator156, _step156, _e113;

              return regeneratorRuntime.wrap(function _getStoredAttributes$(_context52) {
                while (1) {
                  switch (_context52.prev = _context52.next) {
                    case 0:
                      t = this.getFirstPosition().parent;

                      if (!(this.isCollapsed && t.isEmpty)) {
                        _context52.next = 20;
                        break;
                      }

                      _iterator156 = _createForOfIteratorHelper(t.getAttributeKeys());
                      _context52.prev = 3;

                      _iterator156.s();

                    case 5:
                      if ((_step156 = _iterator156.n()).done) {
                        _context52.next = 12;
                        break;
                      }

                      _e113 = _step156.value;

                      if (!_e113.startsWith(ga)) {
                        _context52.next = 10;
                        break;
                      }

                      _context52.next = 10;
                      return [_e113.substr(ga.length), t.getAttribute(_e113)];

                    case 10:
                      _context52.next = 5;
                      break;

                    case 12:
                      _context52.next = 17;
                      break;

                    case 14:
                      _context52.prev = 14;
                      _context52.t0 = _context52["catch"](3);

                      _iterator156.e(_context52.t0);

                    case 17:
                      _context52.prev = 17;

                      _iterator156.f();

                      return _context52.finish(17);

                    case 20:
                    case "end":
                      return _context52.stop();
                  }
                }
              }, _getStoredAttributes, this, [[3, 14, 17, 20]]);
            })
          }, {
            key: "_getSurroundingAttributes",
            value: function _getSurroundingAttributes() {
              var t = this.getFirstPosition(),
                  e = this._model.schema;
              var n = null;

              if (this.isCollapsed) {
                var _i82 = t.textNode ? t.textNode : t.nodeBefore,
                    _o41 = t.textNode ? t.textNode : t.nodeAfter;

                if (this.isGravityOverridden || (n = ba(_i82)), n || (n = ba(_o41)), !this.isGravityOverridden && !n) {
                  var _t110 = _i82;

                  for (; _t110 && !e.isInline(_t110) && !n;) {
                    n = ba(_t110 = _t110.previousSibling);
                  }
                }

                if (!n) {
                  var _t111 = _o41;

                  for (; _t111 && !e.isInline(_t111) && !n;) {
                    n = ba(_t111 = _t111.nextSibling);
                  }
                }

                n || (n = this._getStoredAttributes());
              } else {
                var _t112 = this.getFirstRange();

                var _iterator157 = _createForOfIteratorHelper(_t112),
                    _step157;

                try {
                  for (_iterator157.s(); !(_step157 = _iterator157.n()).done;) {
                    var _i83 = _step157.value;
                    if (_i83.item.is("element") && e.isObject(_i83.item)) break;

                    if ("text" == _i83.type) {
                      n = _i83.item.getAttributes();
                      break;
                    }
                  }
                } catch (err) {
                  _iterator157.e(err);
                } finally {
                  _iterator157.f();
                }
              }

              return n;
            }
          }, {
            key: "_fixGraveyardSelection",
            value: function _fixGraveyardSelection(t) {
              var e = this._model.schema.getNearestSelectionRange(t);

              e && this._pushRange(e);
            }
          }]);

          return pa;
        }(ca);

        function ba(t) {
          return t instanceof Ws || t instanceof qs ? t.getAttributes() : null;
        }

        var ka = /*#__PURE__*/function () {
          function ka(t) {
            _classCallCheck(this, ka);

            this._dispatchers = t;
          }

          _createClass(ka, [{
            key: "add",
            value: function add(t) {
              var _iterator158 = _createForOfIteratorHelper(this._dispatchers),
                  _step158;

              try {
                for (_iterator158.s(); !(_step158 = _iterator158.n()).done;) {
                  var _e114 = _step158.value;
                  t(_e114);
                }
              } catch (err) {
                _iterator158.e(err);
              } finally {
                _iterator158.f();
              }

              return this;
            }
          }]);

          return ka;
        }();

        var _a = 1,
            wa = 4;

        var va = function va(t) {
          return Ge(t, _a | wa);
        };

        var ya = /*#__PURE__*/function (_ka) {
          _inherits(ya, _ka);

          var _super86 = _createSuper(ya);

          function ya() {
            _classCallCheck(this, ya);

            return _super86.apply(this, arguments);
          }

          _createClass(ya, [{
            key: "elementToElement",
            value: function elementToElement(t) {
              return this.add(function (t) {
                return (t = va(t)).view = Ta(t.view, "container"), function (e) {
                  if (e.on("insert:" + t.model, function (t) {
                    return function (e, n, i) {
                      var o = t(n.item, i);
                      if (!o) return;
                      if (!i.consumable.consume(n.item, "insert")) return;
                      var r = i.mapper.toViewPosition(n.range.start);
                      i.mapper.bindElements(n.item, o), i.writer.insert(r, o);
                    };
                  }(t.view), {
                    priority: t.converterPriority || "normal"
                  }), t.triggerBy) {
                    if (t.triggerBy.attributes) {
                      var _iterator159 = _createForOfIteratorHelper(t.triggerBy.attributes),
                          _step159;

                      try {
                        for (_iterator159.s(); !(_step159 = _iterator159.n()).done;) {
                          var _n112 = _step159.value;

                          e._mapReconversionTriggerEvent(t.model, "attribute:".concat(_n112, ":").concat(t.model));
                        }
                      } catch (err) {
                        _iterator159.e(err);
                      } finally {
                        _iterator159.f();
                      }
                    }

                    if (t.triggerBy.children) {
                      var _iterator160 = _createForOfIteratorHelper(t.triggerBy.children),
                          _step160;

                      try {
                        for (_iterator160.s(); !(_step160 = _iterator160.n()).done;) {
                          var _n113 = _step160.value;
                          e._mapReconversionTriggerEvent(t.model, "insert:".concat(_n113)), e._mapReconversionTriggerEvent(t.model, "remove:".concat(_n113));
                        }
                      } catch (err) {
                        _iterator160.e(err);
                      } finally {
                        _iterator160.f();
                      }
                    }
                  }
                };
              }(t));
            }
          }, {
            key: "attributeToElement",
            value: function attributeToElement(t) {
              return this.add(function (t) {
                var e = "attribute:" + ((t = va(t)).model.key ? t.model.key : t.model);
                t.model.name && (e += ":" + t.model.name);

                if (t.model.values) {
                  var _iterator161 = _createForOfIteratorHelper(t.model.values),
                      _step161;

                  try {
                    for (_iterator161.s(); !(_step161 = _iterator161.n()).done;) {
                      var _e115 = _step161.value;
                      t.view[_e115] = Ta(t.view[_e115], "attribute");
                    }
                  } catch (err) {
                    _iterator161.e(err);
                  } finally {
                    _iterator161.f();
                  }
                } else t.view = Ta(t.view, "attribute");

                var n = Aa(t);
                return function (i) {
                  i.on(e, function (t) {
                    return function (e, n, i) {
                      var o = t(n.attributeOldValue, i),
                          r = t(n.attributeNewValue, i);
                      if (!o && !r) return;
                      if (!i.consumable.consume(n.item, e.name)) return;
                      var s = i.writer,
                          a = s.document.selection;
                      if (n.item instanceof ca || n.item instanceof ma) s.wrap(a.getFirstRange(), r);else {
                        var _t113 = i.mapper.toViewRange(n.range);

                        null !== n.attributeOldValue && o && (_t113 = s.unwrap(_t113, o)), null !== n.attributeNewValue && r && s.wrap(_t113, r);
                      }
                    };
                  }(n), {
                    priority: t.converterPriority || "normal"
                  });
                };
              }(t));
            }
          }, {
            key: "attributeToAttribute",
            value: function attributeToAttribute(t) {
              return this.add(function (t) {
                var e = "attribute:" + ((t = va(t)).model.key ? t.model.key : t.model);
                t.model.name && (e += ":" + t.model.name);

                if (t.model.values) {
                  var _iterator162 = _createForOfIteratorHelper(t.model.values),
                      _step162;

                  try {
                    for (_iterator162.s(); !(_step162 = _iterator162.n()).done;) {
                      var _e116 = _step162.value;
                      t.view[_e116] = Ea(t.view[_e116]);
                    }
                  } catch (err) {
                    _iterator162.e(err);
                  } finally {
                    _iterator162.f();
                  }
                } else t.view = Ea(t.view);

                var n = Aa(t);
                return function (i) {
                  i.on(e, function (t) {
                    return function (e, n, i) {
                      var o = t(n.attributeOldValue, i),
                          r = t(n.attributeNewValue, i);
                      if (!o && !r) return;
                      if (!i.consumable.consume(n.item, e.name)) return;
                      var s = i.mapper.toViewElement(n.item),
                          a = i.writer;
                      if (!s) throw new rn["default"]("conversion-attribute-to-attribute-on-text", [n, i]);
                      if (null !== n.attributeOldValue && o) if ("class" == o.key) {
                        var _t114 = cn(o.value);

                        var _iterator163 = _createForOfIteratorHelper(_t114),
                            _step163;

                        try {
                          for (_iterator163.s(); !(_step163 = _iterator163.n()).done;) {
                            var _e117 = _step163.value;
                            a.removeClass(_e117, s);
                          }
                        } catch (err) {
                          _iterator163.e(err);
                        } finally {
                          _iterator163.f();
                        }
                      } else if ("style" == o.key) {
                        var _t115 = Object.keys(o.value);

                        for (var _i84 = 0, _t116 = _t115; _i84 < _t116.length; _i84++) {
                          var _e118 = _t116[_i84];
                          a.removeStyle(_e118, s);
                        }
                      } else a.removeAttribute(o.key, s);
                      if (null !== n.attributeNewValue && r) if ("class" == r.key) {
                        var _t117 = cn(r.value);

                        var _iterator164 = _createForOfIteratorHelper(_t117),
                            _step164;

                        try {
                          for (_iterator164.s(); !(_step164 = _iterator164.n()).done;) {
                            var _e119 = _step164.value;
                            a.addClass(_e119, s);
                          }
                        } catch (err) {
                          _iterator164.e(err);
                        } finally {
                          _iterator164.f();
                        }
                      } else if ("style" == r.key) {
                        var _t118 = Object.keys(r.value);

                        for (var _i85 = 0, _t119 = _t118; _i85 < _t119.length; _i85++) {
                          var _e120 = _t119[_i85];
                          a.setStyle(_e120, r.value[_e120], s);
                        }
                      } else a.setAttribute(r.key, r.value, s);
                    };
                  }(n), {
                    priority: t.converterPriority || "normal"
                  });
                };
              }(t));
            }
          }, {
            key: "markerToElement",
            value: function markerToElement(t) {
              return this.add(function (t) {
                return (t = va(t)).view = Ta(t.view, "ui"), function (e) {
                  e.on("addMarker:" + t.model, function (t) {
                    return function (e, n, i) {
                      n.isOpening = !0;
                      var o = t(n, i);
                      n.isOpening = !1;
                      var r = t(n, i);
                      if (!o || !r) return;
                      var s = n.markerRange;
                      if (s.isCollapsed && !i.consumable.consume(s, e.name)) return;

                      var _iterator165 = _createForOfIteratorHelper(s),
                          _step165;

                      try {
                        for (_iterator165.s(); !(_step165 = _iterator165.n()).done;) {
                          var _t120 = _step165.value;
                          if (!i.consumable.consume(_t120.item, e.name)) return;
                        }
                      } catch (err) {
                        _iterator165.e(err);
                      } finally {
                        _iterator165.f();
                      }

                      var a = i.mapper,
                          c = i.writer;
                      c.insert(a.toViewPosition(s.start), o), i.mapper.bindElementToMarker(o, n.markerName), s.isCollapsed || (c.insert(a.toViewPosition(s.end), r), i.mapper.bindElementToMarker(r, n.markerName)), e.stop();
                    };
                  }(t.view), {
                    priority: t.converterPriority || "normal"
                  }), e.on("removeMarker:" + t.model, (t.view, function (t, e, n) {
                    var i = n.mapper.markerNameToElements(e.markerName);

                    if (i) {
                      var _iterator166 = _createForOfIteratorHelper(i),
                          _step166;

                      try {
                        for (_iterator166.s(); !(_step166 = _iterator166.n()).done;) {
                          var _t121 = _step166.value;
                          n.mapper.unbindElementFromMarkerName(_t121, e.markerName), n.writer.clear(n.writer.createRangeOn(_t121), _t121);
                        }
                      } catch (err) {
                        _iterator166.e(err);
                      } finally {
                        _iterator166.f();
                      }

                      n.writer.clearClonedElementsGroup(e.markerName), t.stop();
                    }
                  }), {
                    priority: t.converterPriority || "normal"
                  });
                };
              }(t));
            }
          }, {
            key: "markerToHighlight",
            value: function markerToHighlight(t) {
              return this.add(function (t) {
                return function (e) {
                  e.on("addMarker:" + t.model, function (t) {
                    return function (e, n, i) {
                      if (!n.item) return;
                      if (!(n.item instanceof ca || n.item instanceof ma || n.item.is("$textProxy"))) return;
                      var o = Sa(t, n, i);
                      if (!o) return;
                      if (!i.consumable.consume(n.item, e.name)) return;
                      var r = i.writer,
                          s = xa(r, o),
                          a = r.document.selection;
                      if (n.item instanceof ca || n.item instanceof ma) r.wrap(a.getFirstRange(), s, a);else {
                        var _t122 = i.mapper.toViewRange(n.range),
                            _e121 = r.wrap(_t122, s);

                        var _iterator167 = _createForOfIteratorHelper(_e121.getItems()),
                            _step167;

                        try {
                          for (_iterator167.s(); !(_step167 = _iterator167.n()).done;) {
                            var _t123 = _step167.value;

                            if (_t123.is("attributeElement") && _t123.isSimilar(s)) {
                              i.mapper.bindElementToMarker(_t123, n.markerName);
                              break;
                            }
                          }
                        } catch (err) {
                          _iterator167.e(err);
                        } finally {
                          _iterator167.f();
                        }
                      }
                    };
                  }(t.view), {
                    priority: t.converterPriority || "normal"
                  }), e.on("addMarker:" + t.model, function (t) {
                    return function (e, n, i) {
                      if (!n.item) return;
                      if (!(n.item instanceof Ys)) return;
                      var o = Sa(t, n, i);
                      if (!o) return;
                      if (!i.consumable.test(n.item, e.name)) return;
                      var r = i.mapper.toViewElement(n.item);

                      if (r && r.getCustomProperty("addHighlight")) {
                        i.consumable.consume(n.item, e.name);

                        var _iterator168 = _createForOfIteratorHelper(ta._createIn(n.item)),
                            _step168;

                        try {
                          for (_iterator168.s(); !(_step168 = _iterator168.n()).done;) {
                            var _t124 = _step168.value;
                            i.consumable.consume(_t124.item, e.name);
                          }
                        } catch (err) {
                          _iterator168.e(err);
                        } finally {
                          _iterator168.f();
                        }

                        r.getCustomProperty("addHighlight")(r, o, i.writer), i.mapper.bindElementToMarker(r, n.markerName);
                      }
                    };
                  }(t.view), {
                    priority: t.converterPriority || "normal"
                  }), e.on("removeMarker:" + t.model, function (t) {
                    return function (e, n, i) {
                      if (n.markerRange.isCollapsed) return;
                      var o = Sa(t, n, i);
                      if (!o) return;
                      var r = xa(i.writer, o),
                          s = i.mapper.markerNameToElements(n.markerName);

                      if (s) {
                        var _iterator169 = _createForOfIteratorHelper(s),
                            _step169;

                        try {
                          for (_iterator169.s(); !(_step169 = _iterator169.n()).done;) {
                            var _t125 = _step169.value;
                            i.mapper.unbindElementFromMarkerName(_t125, n.markerName), _t125.is("attributeElement") ? i.writer.unwrap(i.writer.createRangeOn(_t125), r) : _t125.getCustomProperty("removeHighlight")(_t125, o.id, i.writer);
                          }
                        } catch (err) {
                          _iterator169.e(err);
                        } finally {
                          _iterator169.f();
                        }

                        i.writer.clearClonedElementsGroup(n.markerName), e.stop();
                      }
                    };
                  }(t.view), {
                    priority: t.converterPriority || "normal"
                  });
                };
              }(t));
            }
          }, {
            key: "markerToData",
            value: function markerToData(t) {
              return this.add(function (t) {
                var e = (t = va(t)).model;
                t.view || (t.view = function (n) {
                  return {
                    group: e,
                    name: n.substr(t.model.length + 1)
                  };
                });
                return function (n) {
                  n.on("addMarker:" + e, function (t) {
                    return function (e, n, i) {
                      var o = t(n.markerName, i);
                      if (!o) return;
                      var r = n.markerRange;
                      i.consumable.consume(r, e.name) && (Ca(r, !1, i, n, o), Ca(r, !0, i, n, o), e.stop());
                    };
                  }(t.view), {
                    priority: t.converterPriority || "normal"
                  }), n.on("removeMarker:" + e, function (t) {
                    return function (e, n, i) {
                      var o = t(n.markerName, i);
                      if (!o) return;
                      var r = i.mapper.markerNameToElements(n.markerName);

                      if (r) {
                        var _iterator170 = _createForOfIteratorHelper(r),
                            _step170;

                        try {
                          for (_iterator170.s(); !(_step170 = _iterator170.n()).done;) {
                            var _t126 = _step170.value;
                            i.mapper.unbindElementFromMarkerName(_t126, n.markerName), _t126.is("containerElement") ? (s("data-".concat(o.group, "-start-before"), _t126), s("data-".concat(o.group, "-start-after"), _t126), s("data-".concat(o.group, "-end-before"), _t126), s("data-".concat(o.group, "-end-after"), _t126)) : i.writer.clear(i.writer.createRangeOn(_t126), _t126);
                          }
                        } catch (err) {
                          _iterator170.e(err);
                        } finally {
                          _iterator170.f();
                        }

                        i.writer.clearClonedElementsGroup(n.markerName), e.stop();
                      }

                      function s(t, e) {
                        if (e.hasAttribute(t)) {
                          var _n114 = new Set(e.getAttribute(t).split(","));

                          _n114["delete"](o.name), 0 == _n114.size ? i.writer.removeAttribute(t, e) : i.writer.setAttribute(t, Array.from(_n114).join(","), e);
                        }
                      }
                    };
                  }(t.view), {
                    priority: t.converterPriority || "normal"
                  });
                };
              }(t));
            }
          }]);

          return ya;
        }(ka);

        function xa(t, e) {
          var n = t.createAttributeElement("span", e.attributes);
          return e.classes && n._addClass(e.classes), "number" == typeof e.priority && (n._priority = e.priority), n._id = e.id, n;
        }

        function Ca(t, e, n, i, o) {
          var r = e ? t.start : t.end,
              s = r.nodeAfter && r.nodeAfter.is("element") ? r.nodeAfter : null,
              a = r.nodeBefore && r.nodeBefore.is("element") ? r.nodeBefore : null;

          if (s || a) {
            var _t127, _r26;

            e && s || !e && !a ? (_t127 = s, _r26 = !0) : (_t127 = a, _r26 = !1);

            var _c2 = n.mapper.toViewElement(_t127);

            if (_c2) return void function (t, e, n, i, o, r) {
              var s = "data-".concat(r.group, "-").concat(e ? "start" : "end", "-").concat(n ? "before" : "after"),
                  a = t.hasAttribute(s) ? t.getAttribute(s).split(",") : [];
              a.unshift(r.name), i.writer.setAttribute(s, a.join(","), t), i.mapper.bindElementToMarker(t, o.markerName);
            }(_c2, e, _r26, n, i, o);
          }

          !function (t, e, n, i, o) {
            var r = "".concat(o.group, "-").concat(e ? "start" : "end"),
                s = o.name ? {
              name: o.name
            } : null,
                a = n.writer.createUIElement(r, s);
            n.writer.insert(t, a), n.mapper.bindElementToMarker(a, i.markerName);
          }(n.mapper.toViewPosition(r), e, n, i, o);
        }

        function Ta(t, e) {
          return "function" == typeof t ? t : function (n, i) {
            return function (t, e, n) {
              "string" == typeof t && (t = {
                name: t
              });
              var i;
              var o = e.writer,
                  r = Object.assign({}, t.attributes);
              if ("container" == n) i = o.createContainerElement(t.name, r);else if ("attribute" == n) {
                var _e122 = {
                  priority: t.priority || Wi.DEFAULT_PRIORITY
                };
                i = o.createAttributeElement(t.name, r, _e122);
              } else i = o.createUIElement(t.name, r);

              if (t.styles) {
                var _e123 = Object.keys(t.styles);

                for (var _i86 = 0, _e124 = _e123; _i86 < _e124.length; _i86++) {
                  var _n115 = _e124[_i86];
                  o.setStyle(_n115, t.styles[_n115], i);
                }
              }

              if (t.classes) {
                var _e125 = t.classes;
                if ("string" == typeof _e125) o.addClass(_e125, i);else {
                  var _iterator171 = _createForOfIteratorHelper(_e125),
                      _step171;

                  try {
                    for (_iterator171.s(); !(_step171 = _iterator171.n()).done;) {
                      var _t128 = _step171.value;
                      o.addClass(_t128, i);
                    }
                  } catch (err) {
                    _iterator171.e(err);
                  } finally {
                    _iterator171.f();
                  }
                }
              }

              return i;
            }(t, i, e);
          };
        }

        function Aa(t) {
          return t.model.values ? function (e, n) {
            var i = t.view[e];
            return i ? i(e, n) : null;
          } : t.view;
        }

        function Ea(t) {
          return "string" == typeof t ? function (e) {
            return {
              key: t,
              value: e
            };
          } : "object" == typeof t ? t.value ? function () {
            return t;
          } : function (e) {
            return {
              key: t.key,
              value: e
            };
          } : t;
        }

        function Sa(t, e, n) {
          var i = "function" == typeof t ? t(e, n) : t;
          return i ? (i.priority || (i.priority = 10), i.id || (i.id = e.markerName), i) : null;
        }

        function Ia(t) {
          var _t$model = t.model,
              e = _t$model.schema,
              n = _t$model.document;

          var _iterator172 = _createForOfIteratorHelper(n.getRootNames()),
              _step172;

          try {
            for (_iterator172.s(); !(_step172 = _iterator172.n()).done;) {
              var _i87 = _step172.value;

              var _o42 = n.getRoot(_i87);

              if (_o42.isEmpty && !e.checkChild(_o42, "$text") && e.checkChild(_o42, "paragraph")) return t.insertElement("paragraph", _o42), !0;
            }
          } catch (err) {
            _iterator172.e(err);
          } finally {
            _iterator172.f();
          }

          return !1;
        }

        function Oa(t, e, n) {
          var i = n.createContext(t);
          return !!n.checkChild(i, "paragraph") && !!n.checkChild(i.push("paragraph"), e);
        }

        function Ra(t, e) {
          var n = e.createElement("paragraph");
          return e.insert(n, t), e.createPositionAt(n, 0);
        }

        var Ma = /*#__PURE__*/function (_ka2) {
          _inherits(Ma, _ka2);

          var _super87 = _createSuper(Ma);

          function Ma() {
            _classCallCheck(this, Ma);

            return _super87.apply(this, arguments);
          }

          _createClass(Ma, [{
            key: "elementToElement",
            value: function elementToElement(t) {
              return this.add(Pa(t));
            }
          }, {
            key: "elementToAttribute",
            value: function elementToAttribute(t) {
              return this.add(function (t) {
                ja(t = va(t));
                var e = Ba(t, !1),
                    n = Na(t.view),
                    i = n ? "element:" + n : "element";
                return function (n) {
                  n.on(i, e, {
                    priority: t.converterPriority || "low"
                  });
                };
              }(t));
            }
          }, {
            key: "attributeToAttribute",
            value: function attributeToAttribute(t) {
              return this.add(function (t) {
                var e = null;
                ("string" == typeof (t = va(t)).view || t.view.key) && (e = function (t) {
                  "string" == typeof t.view && (t.view = {
                    key: t.view
                  });
                  var e = t.view.key;
                  var n;

                  if ("class" == e || "style" == e) {
                    var _i88 = "class" == e ? "classes" : "styles";

                    n = _defineProperty({}, _i88, t.view.value);
                  } else {
                    var _i89 = void 0 === t.view.value ? /[\s\S]*/ : t.view.value;

                    n = {
                      attributes: _defineProperty({}, e, _i89)
                    };
                  }

                  t.view.name && (n.name = t.view.name);
                  return t.view = n, e;
                }(t));
                ja(t, e);
                var n = Ba(t, !0);
                return function (e) {
                  e.on("element", n, {
                    priority: t.converterPriority || "low"
                  });
                };
              }(t));
            }
          }, {
            key: "elementToMarker",
            value: function elementToMarker(t) {
              return this.add(function (t) {
                return function (t) {
                  var e = t.model;

                  t.model = function (t, n) {
                    var i = "string" == typeof e ? e : e(t, n);
                    return n.writer.createElement("$marker", {
                      "data-name": i
                    });
                  };
                }(t = va(t)), Pa(t);
              }(t));
            }
          }, {
            key: "dataToMarker",
            value: function dataToMarker(t) {
              return this.add(function (t) {
                (t = va(t)).model || (t.model = function (e) {
                  return e ? t.view + ":" + e : t.view;
                });
                var e = Da(La(t, "start")),
                    n = Da(La(t, "end"));
                return function (i) {
                  i.on("element:" + t.view + "-start", e, {
                    priority: t.converterPriority || "normal"
                  }), i.on("element:" + t.view + "-end", n, {
                    priority: t.converterPriority || "normal"
                  });
                  var o = Os["default"].get("low"),
                      r = Os["default"].get("highest"),
                      s = Os["default"].get(t.converterPriority) / r;
                  i.on("element", function (t) {
                    return function (e, n, i) {
                      var o = "data-".concat(t.view);

                      function r(e, o) {
                        var _iterator173 = _createForOfIteratorHelper(o),
                            _step173;

                        try {
                          for (_iterator173.s(); !(_step173 = _iterator173.n()).done;) {
                            var _r27 = _step173.value;

                            var _o43 = t.model(_r27, i),
                                _s16 = i.writer.createElement("$marker", {
                              "data-name": _o43
                            });

                            i.writer.insert(_s16, e), n.modelCursor.isEqual(e) ? n.modelCursor = n.modelCursor.getShiftedBy(1) : n.modelCursor = n.modelCursor._getTransformedByInsertion(e, 1), n.modelRange = n.modelRange._getTransformedByInsertion(e, 1)[0];
                          }
                        } catch (err) {
                          _iterator173.e(err);
                        } finally {
                          _iterator173.f();
                        }
                      }

                      (i.consumable.test(n.viewItem, {
                        attributes: o + "-end-after"
                      }) || i.consumable.test(n.viewItem, {
                        attributes: o + "-start-after"
                      }) || i.consumable.test(n.viewItem, {
                        attributes: o + "-end-before"
                      }) || i.consumable.test(n.viewItem, {
                        attributes: o + "-start-before"
                      })) && (n.modelRange || Object.assign(n, i.convertChildren(n.viewItem, n.modelCursor)), i.consumable.consume(n.viewItem, {
                        attributes: o + "-end-after"
                      }) && r(n.modelRange.end, n.viewItem.getAttribute(o + "-end-after").split(",")), i.consumable.consume(n.viewItem, {
                        attributes: o + "-start-after"
                      }) && r(n.modelRange.end, n.viewItem.getAttribute(o + "-start-after").split(",")), i.consumable.consume(n.viewItem, {
                        attributes: o + "-end-before"
                      }) && r(n.modelRange.start, n.viewItem.getAttribute(o + "-end-before").split(",")), i.consumable.consume(n.viewItem, {
                        attributes: o + "-start-before"
                      }) && r(n.modelRange.start, n.viewItem.getAttribute(o + "-start-before").split(",")));
                    };
                  }(t), {
                    priority: o + s
                  });
                };
              }(t));
            }
          }]);

          return Ma;
        }(ka);

        function Pa(t) {
          var e = Da(t = va(t)),
              n = Na(t.view),
              i = n ? "element:" + n : "element";
          return function (n) {
            n.on(i, e, {
              priority: t.converterPriority || "normal"
            });
          };
        }

        function Na(t) {
          return "string" == typeof t ? t : "object" == typeof t && "string" == typeof t.name ? t.name : null;
        }

        function Da(t) {
          var e = new Cn(t.view);
          return function (n, i, o) {
            var r = e.match(i.viewItem);
            if (!r) return;
            var s = r.match;
            if (s.name = !0, !o.consumable.test(i.viewItem, s)) return;

            var a = function (t, e, n) {
              return t instanceof Function ? t(e, n) : n.writer.createElement(t);
            }(t.model, i.viewItem, o);

            a && o.safeInsert(a, i.modelCursor) && (o.consumable.consume(i.viewItem, s), o.convertChildren(i.viewItem, a), o.updateConversionResult(a, i));
          };
        }

        function ja(t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

          var n = null === e || function (t) {
            return t.getAttribute(e);
          },
              i = "object" != typeof t.model ? t.model : t.model.key,
              o = "object" != typeof t.model || void 0 === t.model.value ? n : t.model.value;

          t.model = {
            key: i,
            value: o
          };
        }

        function Ba(t, e) {
          var n = new Cn(t.view);
          return function (i, o, r) {
            var s = n.match(o.viewItem);
            if (!s) return;
            if (!function (t, e) {
              var n = "function" == typeof t ? t(e) : t;
              if ("object" == typeof n && !Na(n)) return !1;
              return !n.classes && !n.attributes && !n.styles;
            }(t.view, o.viewItem) ? delete s.match.name : s.match.name = !0, !r.consumable.test(o.viewItem, s.match)) return;
            var a = t.model.key,
                c = "function" == typeof t.model.value ? t.model.value(o.viewItem, r) : t.model.value;
            null !== c && (o.modelRange || Object.assign(o, r.convertChildren(o.viewItem, o.modelCursor)), function (t, e, n, i) {
              var o = !1;

              for (var _i90 = 0, _Array$from3 = Array.from(t.getItems({
                shallow: n
              })); _i90 < _Array$from3.length; _i90++) {
                var _r28 = _Array$from3[_i90];
                i.schema.checkAttribute(_r28, e.key) && (o = !0, _r28.hasAttribute(e.key) || i.writer.setAttribute(e.key, e.value, _r28));
              }

              return o;
            }(o.modelRange, {
              key: a,
              value: c
            }, e, r) && r.consumable.consume(o.viewItem, s.match));
          };
        }

        function La(t, e) {
          var n = {};
          return n.view = t.view + "-" + e, n.model = function (e, n) {
            var i = e.getAttribute("name"),
                o = t.model(i, n);
            return n.writer.createElement("$marker", {
              "data-name": o
            });
          }, n;
        }

        var za = /*#__PURE__*/function () {
          function za(t, e) {
            var _this123 = this;

            _classCallCheck(this, za);

            this.model = t, this.view = new Us(e), this.mapper = new ea(), this.downcastDispatcher = new oa({
              mapper: this.mapper,
              schema: t.schema
            });
            var n = this.model.document,
                i = n.selection,
                o = this.model.markers;
            this.listenTo(this.model, "_beforeChanges", function () {
              _this123.view._disableRendering(!0);
            }, {
              priority: "highest"
            }), this.listenTo(this.model, "_afterChanges", function () {
              _this123.view._disableRendering(!1);
            }, {
              priority: "lowest"
            }), this.listenTo(n, "change", function () {
              _this123.view.change(function (t) {
                _this123.downcastDispatcher.convertChanges(n.differ, o, t), _this123.downcastDispatcher.convertSelection(i, o, t);
              });
            }, {
              priority: "low"
            }), this.listenTo(this.view.document, "selectionChange", function (t, e) {
              return function (n, i) {
                var o = i.newSelection,
                    r = [];

                var _iterator174 = _createForOfIteratorHelper(o.getRanges()),
                    _step174;

                try {
                  for (_iterator174.s(); !(_step174 = _iterator174.n()).done;) {
                    var _t129 = _step174.value;
                    r.push(e.toModelRange(_t129));
                  }
                } catch (err) {
                  _iterator174.e(err);
                } finally {
                  _iterator174.f();
                }

                var s = t.createSelection(r, {
                  backward: o.isBackward
                });
                s.isEqual(t.document.selection) || t.change(function (t) {
                  t.setSelection(s);
                });
              };
            }(this.model, this.mapper)), this.downcastDispatcher.on("insert:$text", function (t, e, n) {
              if (!n.consumable.consume(e.item, "insert")) return;
              var i = n.writer,
                  o = n.mapper.toViewPosition(e.range.start),
                  r = i.createText(e.item.data);
              i.insert(o, r);
            }, {
              priority: "lowest"
            }), this.downcastDispatcher.on("remove", function (t, e, n) {
              var i = n.mapper.toViewPosition(e.position),
                  o = e.position.getShiftedBy(e.length),
                  r = n.mapper.toViewPosition(o, {
                isPhantom: !0
              }),
                  s = n.writer.createRange(i, r),
                  a = n.writer.remove(s.getTrimmed());

              var _iterator175 = _createForOfIteratorHelper(n.writer.createRangeIn(a).getItems()),
                  _step175;

              try {
                for (_iterator175.s(); !(_step175 = _iterator175.n()).done;) {
                  var _t130 = _step175.value;
                  n.mapper.unbindViewElement(_t130);
                }
              } catch (err) {
                _iterator175.e(err);
              } finally {
                _iterator175.f();
              }
            }, {
              priority: "low"
            }), this.downcastDispatcher.on("selection", function (t, e, n) {
              var i = n.writer,
                  o = i.document.selection;

              var _iterator176 = _createForOfIteratorHelper(o.getRanges()),
                  _step176;

              try {
                for (_iterator176.s(); !(_step176 = _iterator176.n()).done;) {
                  var _t131 = _step176.value;
                  _t131.isCollapsed && _t131.end.parent.isAttached() && n.writer.mergeAttributes(_t131.start);
                }
              } catch (err) {
                _iterator176.e(err);
              } finally {
                _iterator176.f();
              }

              i.setSelection(null);
            }, {
              priority: "high"
            }), this.downcastDispatcher.on("selection", function (t, e, n) {
              var i = e.selection;
              if (i.isCollapsed) return;
              if (!n.consumable.consume(i, "selection")) return;
              var o = [];

              var _iterator177 = _createForOfIteratorHelper(i.getRanges()),
                  _step177;

              try {
                for (_iterator177.s(); !(_step177 = _iterator177.n()).done;) {
                  var _t132 = _step177.value;

                  var _e126 = n.mapper.toViewRange(_t132);

                  o.push(_e126);
                }
              } catch (err) {
                _iterator177.e(err);
              } finally {
                _iterator177.f();
              }

              n.writer.setSelection(o, {
                backward: i.isBackward
              });
            }, {
              priority: "low"
            }), this.downcastDispatcher.on("selection", function (t, e, n) {
              var i = e.selection;
              if (!i.isCollapsed) return;
              if (!n.consumable.consume(i, "selection")) return;
              var o = n.writer,
                  r = i.getFirstPosition(),
                  s = n.mapper.toViewPosition(r),
                  a = o.breakAttributes(s);
              o.setSelection(a);
            }, {
              priority: "low"
            }), this.view.document.roots.bindTo(this.model.document.roots).using(function (t) {
              if ("$graveyard" == t.rootName) return null;
              var e = new Ei(_this123.view.document, t.name);
              return e.rootName = t.rootName, _this123.mapper.bindElements(t, e), e;
            });
          }

          _createClass(za, [{
            key: "destroy",
            value: function destroy() {
              this.view.destroy(), this.stopListening();
            }
          }]);

          return za;
        }();

        Object(o["default"])(za, i["default"]);

        var Fa = /*#__PURE__*/function (_Symbol$iterator9) {
          function Fa() {
            _classCallCheck(this, Fa);

            this._commands = new Map();
          }

          _createClass(Fa, [{
            key: "add",
            value: function add(t, e) {
              this._commands.set(t, e);
            }
          }, {
            key: "get",
            value: function get(t) {
              return this._commands.get(t);
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var n = this.get(t);
              if (!n) throw new rn["default"]("commandcollection-command-not-found", this, {
                commandName: t
              });

              for (var _len19 = arguments.length, e = new Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {
                e[_key19 - 1] = arguments[_key19];
              }

              return n.execute.apply(n, e);
            }
          }, {
            key: "names",
            value: /*#__PURE__*/regeneratorRuntime.mark(function names() {
              return regeneratorRuntime.wrap(function names$(_context53) {
                while (1) {
                  switch (_context53.prev = _context53.next) {
                    case 0:
                      return _context53.delegateYield(this._commands.keys(), "t0", 1);

                    case 1:
                    case "end":
                      return _context53.stop();
                  }
                }
              }, names, this);
            })
          }, {
            key: "commands",
            value: /*#__PURE__*/regeneratorRuntime.mark(function commands() {
              return regeneratorRuntime.wrap(function commands$(_context54) {
                while (1) {
                  switch (_context54.prev = _context54.next) {
                    case 0:
                      return _context54.delegateYield(this._commands.values(), "t0", 1);

                    case 1:
                    case "end":
                      return _context54.stop();
                  }
                }
              }, commands, this);
            })
          }, {
            key: _Symbol$iterator9,
            value: function value() {
              return this._commands[Symbol.iterator]();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              var _iterator178 = _createForOfIteratorHelper(this.commands()),
                  _step178;

              try {
                for (_iterator178.s(); !(_step178 = _iterator178.n()).done;) {
                  var _t133 = _step178.value;

                  _t133.destroy();
                }
              } catch (err) {
                _iterator178.e(err);
              } finally {
                _iterator178.f();
              }
            }
          }]);

          return Fa;
        }(Symbol.iterator);

        var Va = /*#__PURE__*/function () {
          function Va() {
            _classCallCheck(this, Va);

            this._consumables = new Map();
          }

          _createClass(Va, [{
            key: "add",
            value: function add(t, e) {
              var n;
              t.is("$text") || t.is("documentFragment") ? this._consumables.set(t, !0) : (this._consumables.has(t) ? n = this._consumables.get(t) : (n = new Ua(t), this._consumables.set(t, n)), n.add(e));
            }
          }, {
            key: "test",
            value: function test(t, e) {
              var n = this._consumables.get(t);

              return void 0 === n ? null : t.is("$text") || t.is("documentFragment") ? n : n.test(e);
            }
          }, {
            key: "consume",
            value: function consume(t, e) {
              return !!this.test(t, e) && (t.is("$text") || t.is("documentFragment") ? this._consumables.set(t, !1) : this._consumables.get(t).consume(e), !0);
            }
          }, {
            key: "revert",
            value: function revert(t, e) {
              var n = this._consumables.get(t);

              void 0 !== n && (t.is("$text") || t.is("documentFragment") ? this._consumables.set(t, !0) : n.revert(e));
            }
          }], [{
            key: "consumablesFromElement",
            value: function consumablesFromElement(t) {
              var e = {
                element: t,
                name: !0,
                attributes: [],
                classes: [],
                styles: []
              },
                  n = t.getAttributeKeys();

              var _iterator179 = _createForOfIteratorHelper(n),
                  _step179;

              try {
                for (_iterator179.s(); !(_step179 = _iterator179.n()).done;) {
                  var _t134 = _step179.value;
                  "style" != _t134 && "class" != _t134 && e.attributes.push(_t134);
                }
              } catch (err) {
                _iterator179.e(err);
              } finally {
                _iterator179.f();
              }

              var i = t.getClassNames();

              var _iterator180 = _createForOfIteratorHelper(i),
                  _step180;

              try {
                for (_iterator180.s(); !(_step180 = _iterator180.n()).done;) {
                  var _t135 = _step180.value;
                  e.classes.push(_t135);
                }
              } catch (err) {
                _iterator180.e(err);
              } finally {
                _iterator180.f();
              }

              var o = t.getStyleNames();

              var _iterator181 = _createForOfIteratorHelper(o),
                  _step181;

              try {
                for (_iterator181.s(); !(_step181 = _iterator181.n()).done;) {
                  var _t136 = _step181.value;
                  e.styles.push(_t136);
                }
              } catch (err) {
                _iterator181.e(err);
              } finally {
                _iterator181.f();
              }

              return e;
            }
          }, {
            key: "createFrom",
            value: function createFrom(t, e) {
              if (e || (e = new Va(t)), t.is("$text")) return e.add(t), e;
              t.is("element") && e.add(t, Va.consumablesFromElement(t)), t.is("documentFragment") && e.add(t);

              var _iterator182 = _createForOfIteratorHelper(t.getChildren()),
                  _step182;

              try {
                for (_iterator182.s(); !(_step182 = _iterator182.n()).done;) {
                  var _n117 = _step182.value;
                  e = Va.createFrom(_n117, e);
                }
              } catch (err) {
                _iterator182.e(err);
              } finally {
                _iterator182.f();
              }

              return e;
            }
          }]);

          return Va;
        }();

        var Ua = /*#__PURE__*/function () {
          function Ua(t) {
            _classCallCheck(this, Ua);

            this.element = t, this._canConsumeName = null, this._consumables = {
              attributes: new Map(),
              styles: new Map(),
              classes: new Map()
            };
          }

          _createClass(Ua, [{
            key: "add",
            value: function add(t) {
              t.name && (this._canConsumeName = !0);

              for (var _e127 in this._consumables) {
                _e127 in t && this._add(_e127, t[_e127]);
              }
            }
          }, {
            key: "test",
            value: function test(t) {
              if (t.name && !this._canConsumeName) return this._canConsumeName;

              for (var _e128 in this._consumables) {
                if (_e128 in t) {
                  var _n118 = this._test(_e128, t[_e128]);

                  if (!0 !== _n118) return _n118;
                }
              }

              return !0;
            }
          }, {
            key: "consume",
            value: function consume(t) {
              t.name && (this._canConsumeName = !1);

              for (var _e129 in this._consumables) {
                _e129 in t && this._consume(_e129, t[_e129]);
              }
            }
          }, {
            key: "revert",
            value: function revert(t) {
              t.name && (this._canConsumeName = !0);

              for (var _e130 in this._consumables) {
                _e130 in t && this._revert(_e130, t[_e130]);
              }
            }
          }, {
            key: "_add",
            value: function _add(t, e) {
              var n = Object(Mt.a)(e) ? e : [e],
                  i = this._consumables[t];

              var _iterator183 = _createForOfIteratorHelper(n),
                  _step183;

              try {
                for (_iterator183.s(); !(_step183 = _iterator183.n()).done;) {
                  var _e131 = _step183.value;
                  if ("attributes" === t && ("class" === _e131 || "style" === _e131)) throw new rn["default"]("viewconsumable-invalid-attribute", this);

                  if (i.set(_e131, !0), "styles" === t) {
                    var _iterator184 = _createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_e131)),
                        _step184;

                    try {
                      for (_iterator184.s(); !(_step184 = _iterator184.n()).done;) {
                        var _t137 = _step184.value;
                        i.set(_t137, !0);
                      }
                    } catch (err) {
                      _iterator184.e(err);
                    } finally {
                      _iterator184.f();
                    }
                  }
                }
              } catch (err) {
                _iterator183.e(err);
              } finally {
                _iterator183.f();
              }
            }
          }, {
            key: "_test",
            value: function _test(t, e) {
              var n = Object(Mt.a)(e) ? e : [e],
                  i = this._consumables[t];

              var _iterator185 = _createForOfIteratorHelper(n),
                  _step185;

              try {
                for (_iterator185.s(); !(_step185 = _iterator185.n()).done;) {
                  var _e132 = _step185.value;

                  if ("attributes" !== t || "class" !== _e132 && "style" !== _e132) {
                    var _t138 = i.get(_e132);

                    if (void 0 === _t138) return null;
                    if (!_t138) return !1;
                  } else {
                    var _t139 = "class" == _e132 ? "classes" : "styles",
                        _n119 = this._test(_t139, _toConsumableArray(this._consumables[_t139].keys()));

                    if (!0 !== _n119) return _n119;
                  }
                }
              } catch (err) {
                _iterator185.e(err);
              } finally {
                _iterator185.f();
              }

              return !0;
            }
          }, {
            key: "_consume",
            value: function _consume(t, e) {
              var n = Object(Mt.a)(e) ? e : [e],
                  i = this._consumables[t];

              var _iterator186 = _createForOfIteratorHelper(n),
                  _step186;

              try {
                for (_iterator186.s(); !(_step186 = _iterator186.n()).done;) {
                  var _e133 = _step186.value;

                  if ("attributes" !== t || "class" !== _e133 && "style" !== _e133) {
                    if (i.set(_e133, !1), "styles" == t) {
                      var _iterator187 = _createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_e133)),
                          _step187;

                      try {
                        for (_iterator187.s(); !(_step187 = _iterator187.n()).done;) {
                          var _t140 = _step187.value;
                          i.set(_t140, !1);
                        }
                      } catch (err) {
                        _iterator187.e(err);
                      } finally {
                        _iterator187.f();
                      }
                    }
                  } else {
                    var _t141 = "class" == _e133 ? "classes" : "styles";

                    this._consume(_t141, _toConsumableArray(this._consumables[_t141].keys()));
                  }
                }
              } catch (err) {
                _iterator186.e(err);
              } finally {
                _iterator186.f();
              }
            }
          }, {
            key: "_revert",
            value: function _revert(t, e) {
              var n = Object(Mt.a)(e) ? e : [e],
                  i = this._consumables[t];

              var _iterator188 = _createForOfIteratorHelper(n),
                  _step188;

              try {
                for (_iterator188.s(); !(_step188 = _iterator188.n()).done;) {
                  var _e134 = _step188.value;

                  if ("attributes" !== t || "class" !== _e134 && "style" !== _e134) {
                    !1 === i.get(_e134) && i.set(_e134, !0);
                  } else {
                    var _t142 = "class" == _e134 ? "classes" : "styles";

                    this._revert(_t142, _toConsumableArray(this._consumables[_t142].keys()));
                  }
                }
              } catch (err) {
                _iterator188.e(err);
              } finally {
                _iterator188.f();
              }
            }
          }]);

          return Ua;
        }();

        var Ha = /*#__PURE__*/function () {
          function Ha() {
            var _this124 = this;

            _classCallCheck(this, Ha);

            this._sourceDefinitions = {}, this._attributeProperties = {}, this.decorate("checkChild"), this.decorate("checkAttribute"), this.on("checkAttribute", function (t, e) {
              e[0] = new qa(e[0]);
            }, {
              priority: "highest"
            }), this.on("checkChild", function (t, e) {
              e[0] = new qa(e[0]), e[1] = _this124.getDefinition(e[1]);
            }, {
              priority: "highest"
            });
          }

          _createClass(Ha, [{
            key: "register",
            value: function register(t, e) {
              if (this._sourceDefinitions[t]) throw new rn["default"]("schema-cannot-register-item-twice", this, {
                itemName: t
              });
              this._sourceDefinitions[t] = [Object.assign({}, e)], this._clearCache();
            }
          }, {
            key: "extend",
            value: function extend(t, e) {
              if (!this._sourceDefinitions[t]) throw new rn["default"]("schema-cannot-extend-missing-item", this, {
                itemName: t
              });
              this._sourceDefinitions[t].push(Object.assign({}, e)), this._clearCache();
            }
          }, {
            key: "getDefinitions",
            value: function getDefinitions() {
              return this._compiledDefinitions || this._compile(), this._compiledDefinitions;
            }
          }, {
            key: "getDefinition",
            value: function getDefinition(t) {
              var e;
              return e = "string" == typeof t ? t : t.is && (t.is("$text") || t.is("$textProxy")) ? "$text" : t.name, this.getDefinitions()[e];
            }
          }, {
            key: "isRegistered",
            value: function isRegistered(t) {
              return !!this.getDefinition(t);
            }
          }, {
            key: "isBlock",
            value: function isBlock(t) {
              var e = this.getDefinition(t);
              return !(!e || !e.isBlock);
            }
          }, {
            key: "isLimit",
            value: function isLimit(t) {
              var e = this.getDefinition(t);
              return !!e && !(!e.isLimit && !e.isObject);
            }
          }, {
            key: "isObject",
            value: function isObject(t) {
              var e = this.getDefinition(t);
              return !!e && !!(e.isObject || e.isLimit && e.isSelectable && e.isContent);
            }
          }, {
            key: "isInline",
            value: function isInline(t) {
              var e = this.getDefinition(t);
              return !(!e || !e.isInline);
            }
          }, {
            key: "isSelectable",
            value: function isSelectable(t) {
              var e = this.getDefinition(t);
              return !!e && !(!e.isSelectable && !e.isObject);
            }
          }, {
            key: "isContent",
            value: function isContent(t) {
              var e = this.getDefinition(t);
              return !!e && !(!e.isContent && !e.isObject);
            }
          }, {
            key: "checkChild",
            value: function checkChild(t, e) {
              return !!e && this._checkContextMatch(e, t);
            }
          }, {
            key: "checkAttribute",
            value: function checkAttribute(t, e) {
              var n = this.getDefinition(t.last);
              return !!n && n.allowAttributes.includes(e);
            }
          }, {
            key: "checkMerge",
            value: function checkMerge(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

              if (t instanceof Ks) {
                var _e135 = t.nodeBefore,
                    _n120 = t.nodeAfter;
                if (!(_e135 instanceof Ys)) throw new rn["default"]("schema-check-merge-no-element-before", this);
                if (!(_n120 instanceof Ys)) throw new rn["default"]("schema-check-merge-no-element-after", this);
                return this.checkMerge(_e135, _n120);
              }

              var _iterator189 = _createForOfIteratorHelper(e.getChildren()),
                  _step189;

              try {
                for (_iterator189.s(); !(_step189 = _iterator189.n()).done;) {
                  var _n121 = _step189.value;
                  if (!this.checkChild(t, _n121)) return !1;
                }
              } catch (err) {
                _iterator189.e(err);
              } finally {
                _iterator189.f();
              }

              return !0;
            }
          }, {
            key: "addChildCheck",
            value: function addChildCheck(t) {
              this.on("checkChild", function (e, _ref23) {
                var _ref24 = _slicedToArray(_ref23, 2),
                    n = _ref24[0],
                    i = _ref24[1];

                if (!i) return;
                var o = t(n, i);
                "boolean" == typeof o && (e.stop(), e["return"] = o);
              }, {
                priority: "high"
              });
            }
          }, {
            key: "addAttributeCheck",
            value: function addAttributeCheck(t) {
              this.on("checkAttribute", function (e, _ref25) {
                var _ref26 = _slicedToArray(_ref25, 2),
                    n = _ref26[0],
                    i = _ref26[1];

                var o = t(n, i);
                "boolean" == typeof o && (e.stop(), e["return"] = o);
              }, {
                priority: "high"
              });
            }
          }, {
            key: "setAttributeProperties",
            value: function setAttributeProperties(t, e) {
              this._attributeProperties[t] = Object.assign(this.getAttributeProperties(t), e);
            }
          }, {
            key: "getAttributeProperties",
            value: function getAttributeProperties(t) {
              return this._attributeProperties[t] || {};
            }
          }, {
            key: "getLimitElement",
            value: function getLimitElement(t) {
              var e;
              if (t instanceof Ks) e = t.parent;else {
                e = (t instanceof ta ? [t] : Array.from(t.getRanges())).reduce(function (t, e) {
                  var n = e.getCommonAncestor();
                  return t ? t.getCommonAncestor(n, {
                    includeSelf: !0
                  }) : n;
                }, null);
              }

              for (; !this.isLimit(e) && e.parent;) {
                e = e.parent;
              }

              return e;
            }
          }, {
            key: "checkAttributeInSelection",
            value: function checkAttributeInSelection(t, e) {
              if (t.isCollapsed) {
                var _n122 = [].concat(_toConsumableArray(t.getFirstPosition().getAncestors()), [new qs("", t.getAttributes())]);

                return this.checkAttribute(_n122, e);
              }

              {
                var _n123 = t.getRanges();

                var _iterator190 = _createForOfIteratorHelper(_n123),
                    _step190;

                try {
                  for (_iterator190.s(); !(_step190 = _iterator190.n()).done;) {
                    var _t143 = _step190.value;

                    var _iterator191 = _createForOfIteratorHelper(_t143),
                        _step191;

                    try {
                      for (_iterator191.s(); !(_step191 = _iterator191.n()).done;) {
                        var _n124 = _step191.value;
                        if (this.checkAttribute(_n124.item, e)) return !0;
                      }
                    } catch (err) {
                      _iterator191.e(err);
                    } finally {
                      _iterator191.f();
                    }
                  }
                } catch (err) {
                  _iterator190.e(err);
                } finally {
                  _iterator190.f();
                }
              }
              return !1;
            }
          }, {
            key: "getValidRanges",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getValidRanges(t, e) {
              var _iterator193, _step193, _n125;

              return regeneratorRuntime.wrap(function getValidRanges$(_context56) {
                while (1) {
                  switch (_context56.prev = _context56.next) {
                    case 0:
                      t = /*#__PURE__*/regeneratorRuntime.mark(function _callee34(t) {
                        var _iterator192, _step192, _e136;

                        return regeneratorRuntime.wrap(function _callee34$(_context55) {
                          while (1) {
                            switch (_context55.prev = _context55.next) {
                              case 0:
                                _iterator192 = _createForOfIteratorHelper(t);
                                _context55.prev = 1;

                                _iterator192.s();

                              case 3:
                                if ((_step192 = _iterator192.n()).done) {
                                  _context55.next = 8;
                                  break;
                                }

                                _e136 = _step192.value;
                                return _context55.delegateYield(_e136.getMinimalFlatRanges(), "t0", 6);

                              case 6:
                                _context55.next = 3;
                                break;

                              case 8:
                                _context55.next = 13;
                                break;

                              case 10:
                                _context55.prev = 10;
                                _context55.t1 = _context55["catch"](1);

                                _iterator192.e(_context55.t1);

                              case 13:
                                _context55.prev = 13;

                                _iterator192.f();

                                return _context55.finish(13);

                              case 16:
                              case "end":
                                return _context55.stop();
                            }
                          }
                        }, _callee34, null, [[1, 10, 13, 16]]);
                      })(t);
                      _iterator193 = _createForOfIteratorHelper(t);
                      _context56.prev = 2;

                      _iterator193.s();

                    case 4:
                      if ((_step193 = _iterator193.n()).done) {
                        _context56.next = 9;
                        break;
                      }

                      _n125 = _step193.value;
                      return _context56.delegateYield(this._getValidRangesForRange(_n125, e), "t0", 7);

                    case 7:
                      _context56.next = 4;
                      break;

                    case 9:
                      _context56.next = 14;
                      break;

                    case 11:
                      _context56.prev = 11;
                      _context56.t1 = _context56["catch"](2);

                      _iterator193.e(_context56.t1);

                    case 14:
                      _context56.prev = 14;

                      _iterator193.f();

                      return _context56.finish(14);

                    case 17:
                    case "end":
                      return _context56.stop();
                  }
                }
              }, getValidRanges, this, [[2, 11, 14, 17]]);
            })
          }, {
            key: "getNearestSelectionRange",
            value: function getNearestSelectionRange(t) {
              var _this125 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "both";
              if (this.checkChild(t, "$text")) return new ta(t);
              var n, i;
              var o = t.getAncestors().reverse().find(function (t) {
                return _this125.isLimit(t);
              }) || t.root;
              "both" != e && "backward" != e || (n = new Js({
                boundaries: ta._createIn(o),
                startPosition: t,
                direction: "backward"
              })), "both" != e && "forward" != e || (i = new Js({
                boundaries: ta._createIn(o),
                startPosition: t
              }));

              var _iterator194 = _createForOfIteratorHelper( /*#__PURE__*/regeneratorRuntime.mark(function _callee35(t, e) {
                var n, _e137, _t144;

                return regeneratorRuntime.wrap(function _callee35$(_context57) {
                  while (1) {
                    switch (_context57.prev = _context57.next) {
                      case 0:
                        n = !1;

                      case 1:
                        if (n) {
                          _context57.next = 18;
                          break;
                        }

                        if (!(n = !0, t)) {
                          _context57.next = 9;
                          break;
                        }

                        _e137 = t.next();
                        _context57.t0 = _e137.done;

                        if (_context57.t0) {
                          _context57.next = 9;
                          break;
                        }

                        n = !1;
                        _context57.next = 9;
                        return {
                          walker: t,
                          value: _e137.value
                        };

                      case 9:
                        if (!e) {
                          _context57.next = 16;
                          break;
                        }

                        _t144 = e.next();
                        _context57.t1 = _t144.done;

                        if (_context57.t1) {
                          _context57.next = 16;
                          break;
                        }

                        n = !1;
                        _context57.next = 16;
                        return {
                          walker: e,
                          value: _t144.value
                        };

                      case 16:
                        _context57.next = 1;
                        break;

                      case 18:
                      case "end":
                        return _context57.stop();
                    }
                  }
                }, _callee35);
              })(n, i)),
                  _step194;

              try {
                for (_iterator194.s(); !(_step194 = _iterator194.n()).done;) {
                  var _t145 = _step194.value;

                  var _e138 = _t145.walker == n ? "elementEnd" : "elementStart",
                      _i91 = _t145.value;

                  if (_i91.type == _e138 && this.isObject(_i91.item)) return ta._createOn(_i91.item);
                  if (this.checkChild(_i91.nextPosition, "$text")) return new ta(_i91.nextPosition);
                }
              } catch (err) {
                _iterator194.e(err);
              } finally {
                _iterator194.f();
              }

              return null;
            }
          }, {
            key: "findAllowedParent",
            value: function findAllowedParent(t, e) {
              var n = t.parent;

              for (; n;) {
                if (this.checkChild(n, e)) return n;
                if (this.isLimit(n)) return null;
                n = n.parent;
              }

              return null;
            }
          }, {
            key: "removeDisallowedAttributes",
            value: function removeDisallowedAttributes(t, e) {
              var _iterator195 = _createForOfIteratorHelper(t),
                  _step195;

              try {
                for (_iterator195.s(); !(_step195 = _iterator195.n()).done;) {
                  var _n126 = _step195.value;
                  if (_n126.is("$text")) ic(this, _n126, e);else {
                    var _t146 = ta._createIn(_n126).getPositions();

                    var _iterator196 = _createForOfIteratorHelper(_t146),
                        _step196;

                    try {
                      for (_iterator196.s(); !(_step196 = _iterator196.n()).done;) {
                        var _n127 = _step196.value;
                        ic(this, _n127.nodeBefore || _n127.parent, e);
                      }
                    } catch (err) {
                      _iterator196.e(err);
                    } finally {
                      _iterator196.f();
                    }
                  }
                }
              } catch (err) {
                _iterator195.e(err);
              } finally {
                _iterator195.f();
              }
            }
          }, {
            key: "createContext",
            value: function createContext(t) {
              return new qa(t);
            }
          }, {
            key: "_clearCache",
            value: function _clearCache() {
              this._compiledDefinitions = null;
            }
          }, {
            key: "_compile",
            value: function _compile() {
              var t = {},
                  e = this._sourceDefinitions,
                  n = Object.keys(e);

              for (var _i92 = 0, _n128 = n; _i92 < _n128.length; _i92++) {
                var _i93 = _n128[_i92];
                t[_i93] = Wa(e[_i93], _i93);
              }

              for (var _i94 = 0, _n129 = n; _i94 < _n129.length; _i94++) {
                var _e139 = _n129[_i94];
                $a(t, _e139);
              }

              for (var _i95 = 0, _n130 = n; _i95 < _n130.length; _i95++) {
                var _e140 = _n130[_i95];
                Ya(t, _e140);
              }

              for (var _i96 = 0, _n131 = n; _i96 < _n131.length; _i96++) {
                var _e141 = _n131[_i96];
                Ja(t, _e141);
              }

              for (var _i97 = 0, _n132 = n; _i97 < _n132.length; _i97++) {
                var _e142 = _n132[_i97];
                Ga(t, _e142), Ka(t, _e142);
              }

              for (var _i98 = 0, _n133 = n; _i98 < _n133.length; _i98++) {
                var _e143 = _n133[_i98];
                Qa(t, _e143), Xa(t, _e143), Za(t, _e143);
              }

              this._compiledDefinitions = t;
            }
          }, {
            key: "_checkContextMatch",
            value: function _checkContextMatch(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : e.length - 1;
              var i = e.getItem(n);

              if (t.allowIn.includes(i.name)) {
                if (0 == n) return !0;
                {
                  var _t147 = this.getDefinition(i);

                  return this._checkContextMatch(_t147, e, n - 1);
                }
              }

              return !1;
            }
          }, {
            key: "_getValidRangesForRange",
            value: /*#__PURE__*/regeneratorRuntime.mark(function _getValidRangesForRange(t, e) {
              var n, i, _iterator197, _step197, _o44;

              return regeneratorRuntime.wrap(function _getValidRangesForRange$(_context58) {
                while (1) {
                  switch (_context58.prev = _context58.next) {
                    case 0:
                      n = t.start, i = t.start;
                      _iterator197 = _createForOfIteratorHelper(t.getItems({
                        shallow: !0
                      }));
                      _context58.prev = 2;

                      _iterator197.s();

                    case 4:
                      if ((_step197 = _iterator197.n()).done) {
                        _context58.next = 19;
                        break;
                      }

                      _o44 = _step197.value;
                      _context58.t0 = _o44.is("element");

                      if (!_context58.t0) {
                        _context58.next = 9;
                        break;
                      }

                      return _context58.delegateYield(this._getValidRangesForRange(ta._createIn(_o44), e), "t1", 9);

                    case 9:
                      _context58.t2 = this.checkAttribute(_o44, e);

                      if (_context58.t2) {
                        _context58.next = 16;
                        break;
                      }

                      _context58.t3 = n.isEqual(i);

                      if (_context58.t3) {
                        _context58.next = 15;
                        break;
                      }

                      _context58.next = 15;
                      return new ta(n, i);

                    case 15:
                      n = Ks._createAfter(_o44);

                    case 16:
                      i = Ks._createAfter(_o44);

                    case 17:
                      _context58.next = 4;
                      break;

                    case 19:
                      _context58.next = 24;
                      break;

                    case 21:
                      _context58.prev = 21;
                      _context58.t4 = _context58["catch"](2);

                      _iterator197.e(_context58.t4);

                    case 24:
                      _context58.prev = 24;

                      _iterator197.f();

                      return _context58.finish(24);

                    case 27:
                      _context58.t5 = n.isEqual(i);

                      if (_context58.t5) {
                        _context58.next = 31;
                        break;
                      }

                      _context58.next = 31;
                      return new ta(n, i);

                    case 31:
                    case "end":
                      return _context58.stop();
                  }
                }
              }, _getValidRangesForRange, this, [[2, 21, 24, 27]]);
            })
          }]);

          return Ha;
        }();

        Object(o["default"])(Ha, i["default"]);

        var qa = /*#__PURE__*/function (_Symbol$iterator10) {
          function qa(t) {
            _classCallCheck(this, qa);

            if (t instanceof qa) return t;
            "string" == typeof t ? t = [t] : Array.isArray(t) || (t = t.getAncestors({
              includeSelf: !0
            })), this._items = t.map(nc);
          }

          _createClass(qa, [{
            key: "length",
            get: function get() {
              return this._items.length;
            }
          }, {
            key: "last",
            get: function get() {
              return this._items[this._items.length - 1];
            }
          }, {
            key: _Symbol$iterator10,
            value: function value() {
              return this._items[Symbol.iterator]();
            }
          }, {
            key: "push",
            value: function push(t) {
              var e = new qa([t]);
              return e._items = [].concat(_toConsumableArray(this._items), _toConsumableArray(e._items)), e;
            }
          }, {
            key: "getItem",
            value: function getItem(t) {
              return this._items[t];
            }
          }, {
            key: "getNames",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getNames() {
              return regeneratorRuntime.wrap(function getNames$(_context59) {
                while (1) {
                  switch (_context59.prev = _context59.next) {
                    case 0:
                      return _context59.delegateYield(this._items.map(function (t) {
                        return t.name;
                      }), "t0", 1);

                    case 1:
                    case "end":
                      return _context59.stop();
                  }
                }
              }, getNames, this);
            })
          }, {
            key: "endsWith",
            value: function endsWith(t) {
              return Array.from(this.getNames()).join(" ").endsWith(t);
            }
          }, {
            key: "startsWith",
            value: function startsWith(t) {
              return Array.from(this.getNames()).join(" ").startsWith(t);
            }
          }]);

          return qa;
        }(Symbol.iterator);

        function Wa(t, e) {
          var n = {
            name: e,
            allowIn: [],
            allowContentOf: [],
            allowWhere: [],
            allowAttributes: [],
            allowAttributesOf: [],
            allowChildren: [],
            inheritTypesFrom: []
          };
          return function (t, e) {
            var _iterator198 = _createForOfIteratorHelper(t),
                _step198;

            try {
              for (_iterator198.s(); !(_step198 = _iterator198.n()).done;) {
                var _n134 = _step198.value;

                var _t148 = Object.keys(_n134).filter(function (t) {
                  return t.startsWith("is");
                });

                var _iterator199 = _createForOfIteratorHelper(_t148),
                    _step199;

                try {
                  for (_iterator199.s(); !(_step199 = _iterator199.n()).done;) {
                    var _i99 = _step199.value;
                    e[_i99] = _n134[_i99];
                  }
                } catch (err) {
                  _iterator199.e(err);
                } finally {
                  _iterator199.f();
                }
              }
            } catch (err) {
              _iterator198.e(err);
            } finally {
              _iterator198.f();
            }
          }(t, n), tc(t, n, "allowIn"), tc(t, n, "allowContentOf"), tc(t, n, "allowWhere"), tc(t, n, "allowAttributes"), tc(t, n, "allowAttributesOf"), tc(t, n, "allowChildren"), tc(t, n, "inheritTypesFrom"), function (t, e) {
            var _iterator200 = _createForOfIteratorHelper(t),
                _step200;

            try {
              for (_iterator200.s(); !(_step200 = _iterator200.n()).done;) {
                var _n135 = _step200.value;
                var _t149 = _n135.inheritAllFrom;
                _t149 && (e.allowContentOf.push(_t149), e.allowWhere.push(_t149), e.allowAttributesOf.push(_t149), e.inheritTypesFrom.push(_t149));
              }
            } catch (err) {
              _iterator200.e(err);
            } finally {
              _iterator200.f();
            }
          }(t, n), n;
        }

        function $a(t, e) {
          var n = t[e];

          var _iterator201 = _createForOfIteratorHelper(n.allowChildren),
              _step201;

          try {
            for (_iterator201.s(); !(_step201 = _iterator201.n()).done;) {
              var _i100 = _step201.value;
              var _n136 = t[_i100];
              _n136 && _n136.allowIn.push(e);
            }
          } catch (err) {
            _iterator201.e(err);
          } finally {
            _iterator201.f();
          }

          n.allowChildren.length = 0;
        }

        function Ya(t, e) {
          var _iterator202 = _createForOfIteratorHelper(t[e].allowContentOf),
              _step202;

          try {
            for (_iterator202.s(); !(_step202 = _iterator202.n()).done;) {
              var _n137 = _step202.value;

              if (t[_n137]) {
                ec(t, _n137).forEach(function (t) {
                  t.allowIn.push(e);
                });
              }
            }
          } catch (err) {
            _iterator202.e(err);
          } finally {
            _iterator202.f();
          }

          delete t[e].allowContentOf;
        }

        function Ja(t, e) {
          var _iterator203 = _createForOfIteratorHelper(t[e].allowWhere),
              _step203;

          try {
            for (_iterator203.s(); !(_step203 = _iterator203.n()).done;) {
              var _n138 = _step203.value;
              var _i101 = t[_n138];

              if (_i101) {
                var _t$e$allowIn;

                var _n139 = _i101.allowIn;

                (_t$e$allowIn = t[e].allowIn).push.apply(_t$e$allowIn, _toConsumableArray(_n139));
              }
            }
          } catch (err) {
            _iterator203.e(err);
          } finally {
            _iterator203.f();
          }

          delete t[e].allowWhere;
        }

        function Ga(t, e) {
          var _iterator204 = _createForOfIteratorHelper(t[e].allowAttributesOf),
              _step204;

          try {
            for (_iterator204.s(); !(_step204 = _iterator204.n()).done;) {
              var _n140 = _step204.value;
              var _i102 = t[_n140];

              if (_i102) {
                var _t$e$allowAttributes;

                var _n141 = _i102.allowAttributes;

                (_t$e$allowAttributes = t[e].allowAttributes).push.apply(_t$e$allowAttributes, _toConsumableArray(_n141));
              }
            }
          } catch (err) {
            _iterator204.e(err);
          } finally {
            _iterator204.f();
          }

          delete t[e].allowAttributesOf;
        }

        function Ka(t, e) {
          var n = t[e];

          var _iterator205 = _createForOfIteratorHelper(n.inheritTypesFrom),
              _step205;

          try {
            for (_iterator205.s(); !(_step205 = _iterator205.n()).done;) {
              var _e144 = _step205.value;
              var _i103 = t[_e144];

              if (_i103) {
                var _t150 = Object.keys(_i103).filter(function (t) {
                  return t.startsWith("is");
                });

                var _iterator206 = _createForOfIteratorHelper(_t150),
                    _step206;

                try {
                  for (_iterator206.s(); !(_step206 = _iterator206.n()).done;) {
                    var _e145 = _step206.value;
                    _e145 in n || (n[_e145] = _i103[_e145]);
                  }
                } catch (err) {
                  _iterator206.e(err);
                } finally {
                  _iterator206.f();
                }
              }
            }
          } catch (err) {
            _iterator205.e(err);
          } finally {
            _iterator205.f();
          }

          delete n.inheritTypesFrom;
        }

        function Qa(t, e) {
          var n = t[e],
              i = n.allowIn.filter(function (e) {
            return t[e];
          });
          n.allowIn = Array.from(new Set(i));
        }

        function Xa(t, e) {
          var n = t[e];

          var _iterator207 = _createForOfIteratorHelper(n.allowIn),
              _step207;

          try {
            for (_iterator207.s(); !(_step207 = _iterator207.n()).done;) {
              var _i104 = _step207.value;

              t[_i104].allowChildren.push(e);
            }
          } catch (err) {
            _iterator207.e(err);
          } finally {
            _iterator207.f();
          }
        }

        function Za(t, e) {
          var n = t[e];
          n.allowAttributes = Array.from(new Set(n.allowAttributes));
        }

        function tc(t, e, n) {
          var _iterator208 = _createForOfIteratorHelper(t),
              _step208;

          try {
            for (_iterator208.s(); !(_step208 = _iterator208.n()).done;) {
              var _e$n;

              var _i105 = _step208.value;
              "string" == typeof _i105[n] ? e[n].push(_i105[n]) : Array.isArray(_i105[n]) && (_e$n = e[n]).push.apply(_e$n, _toConsumableArray(_i105[n]));
            }
          } catch (err) {
            _iterator208.e(err);
          } finally {
            _iterator208.f();
          }
        }

        function ec(t, e) {
          var n = t[e];
          return function (t) {
            return Object.keys(t).map(function (e) {
              return t[e];
            });
          }(t).filter(function (t) {
            return t.allowIn.includes(n.name);
          });
        }

        function nc(t) {
          return "string" == typeof t || t.is("documentFragment") ? {
            name: "string" == typeof t ? t : "$documentFragment",
            getAttributeKeys: /*#__PURE__*/regeneratorRuntime.mark(function getAttributeKeys() {
              return regeneratorRuntime.wrap(function getAttributeKeys$(_context60) {
                while (1) {
                  switch (_context60.prev = _context60.next) {
                    case 0:
                    case "end":
                      return _context60.stop();
                  }
                }
              }, getAttributeKeys);
            }),
            getAttribute: function getAttribute() {}
          } : {
            name: t.is("element") ? t.name : "$text",
            getAttributeKeys: /*#__PURE__*/regeneratorRuntime.mark(function getAttributeKeys() {
              return regeneratorRuntime.wrap(function getAttributeKeys$(_context61) {
                while (1) {
                  switch (_context61.prev = _context61.next) {
                    case 0:
                      return _context61.delegateYield(t.getAttributeKeys(), "t0", 1);

                    case 1:
                    case "end":
                      return _context61.stop();
                  }
                }
              }, getAttributeKeys);
            }),
            getAttribute: function getAttribute(e) {
              return t.getAttribute(e);
            }
          };
        }

        function ic(t, e, n) {
          var _iterator209 = _createForOfIteratorHelper(e.getAttributeKeys()),
              _step209;

          try {
            for (_iterator209.s(); !(_step209 = _iterator209.n()).done;) {
              var _i106 = _step209.value;
              t.checkAttribute(e, _i106) || n.removeAttribute(_i106, e);
            }
          } catch (err) {
            _iterator209.e(err);
          } finally {
            _iterator209.f();
          }
        }

        var oc = /*#__PURE__*/function () {
          function oc() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            _classCallCheck(this, oc);

            this._splitParts = new Map(), this._cursorParents = new Map(), this._modelCursor = null, this.conversionApi = Object.assign({}, t), this.conversionApi.convertItem = this._convertItem.bind(this), this.conversionApi.convertChildren = this._convertChildren.bind(this), this.conversionApi.safeInsert = this._safeInsert.bind(this), this.conversionApi.updateConversionResult = this._updateConversionResult.bind(this), this.conversionApi.splitToAllowedParent = this._splitToAllowedParent.bind(this), this.conversionApi.getSplitParts = this._getSplitParts.bind(this);
          }

          _createClass(oc, [{
            key: "convert",
            value: function convert(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ["$root"];
              this.fire("viewCleanup", t), this._modelCursor = function (t, e) {
                var n;

                var _iterator210 = _createForOfIteratorHelper(new qa(t)),
                    _step210;

                try {
                  for (_iterator210.s(); !(_step210 = _iterator210.n()).done;) {
                    var _i107 = _step210.value;
                    var _t151 = {};

                    var _iterator211 = _createForOfIteratorHelper(_i107.getAttributeKeys()),
                        _step211;

                    try {
                      for (_iterator211.s(); !(_step211 = _iterator211.n()).done;) {
                        var _e146 = _step211.value;
                        _t151[_e146] = _i107.getAttribute(_e146);
                      }
                    } catch (err) {
                      _iterator211.e(err);
                    } finally {
                      _iterator211.f();
                    }

                    var _o45 = e.createElement(_i107.name, _t151);

                    n && e.append(_o45, n), n = Ks._createAt(_o45, 0);
                  }
                } catch (err) {
                  _iterator210.e(err);
                } finally {
                  _iterator210.f();
                }

                return n;
              }(n, e), this.conversionApi.writer = e, this.conversionApi.consumable = Va.createFrom(t), this.conversionApi.store = {};

              var _this$_convertItem = this._convertItem(t, this._modelCursor),
                  i = _this$_convertItem.modelRange,
                  o = e.createDocumentFragment();

              if (i) {
                this._removeEmptyElements();

                for (var _i108 = 0, _Array$from4 = Array.from(this._modelCursor.parent.getChildren()); _i108 < _Array$from4.length; _i108++) {
                  var _t152 = _Array$from4[_i108];
                  e.append(_t152, o);
                }

                o.markers = function (t, e) {
                  var n = new Set(),
                      i = new Map(),
                      o = ta._createIn(t).getItems();

                  var _iterator212 = _createForOfIteratorHelper(o),
                      _step212;

                  try {
                    for (_iterator212.s(); !(_step212 = _iterator212.n()).done;) {
                      var _t153 = _step212.value;
                      "$marker" == _t153.name && n.add(_t153);
                    }
                  } catch (err) {
                    _iterator212.e(err);
                  } finally {
                    _iterator212.f();
                  }

                  var _iterator213 = _createForOfIteratorHelper(n),
                      _step213;

                  try {
                    for (_iterator213.s(); !(_step213 = _iterator213.n()).done;) {
                      var _t154 = _step213.value;

                      var _n142 = _t154.getAttribute("data-name"),
                          _o46 = e.createPositionBefore(_t154);

                      i.has(_n142) ? i.get(_n142).end = _o46.clone() : i.set(_n142, new ta(_o46.clone())), e.remove(_t154);
                    }
                  } catch (err) {
                    _iterator213.e(err);
                  } finally {
                    _iterator213.f();
                  }

                  return i;
                }(o, e);
              }

              return this._modelCursor = null, this._splitParts.clear(), this._cursorParents.clear(), this.conversionApi.writer = null, this.conversionApi.store = null, o;
            }
          }, {
            key: "_convertItem",
            value: function _convertItem(t, e) {
              var n = Object.assign({
                viewItem: t,
                modelCursor: e,
                modelRange: null
              });
              if (t.is("element") ? this.fire("element:" + t.name, n, this.conversionApi) : t.is("$text") ? this.fire("text", n, this.conversionApi) : this.fire("documentFragment", n, this.conversionApi), n.modelRange && !(n.modelRange instanceof ta)) throw new rn["default"]("view-conversion-dispatcher-incorrect-result", this);
              return {
                modelRange: n.modelRange,
                modelCursor: n.modelCursor
              };
            }
          }, {
            key: "_convertChildren",
            value: function _convertChildren(t, e) {
              var n = e.is("position") ? e : Ks._createAt(e, 0);
              var i = new ta(n);

              for (var _i109 = 0, _Array$from5 = Array.from(t.getChildren()); _i109 < _Array$from5.length; _i109++) {
                var _e147 = _Array$from5[_i109];

                var _t155 = this._convertItem(_e147, n);

                _t155.modelRange instanceof ta && (i.end = _t155.modelRange.end, n = _t155.modelCursor);
              }

              return {
                modelRange: i,
                modelCursor: n
              };
            }
          }, {
            key: "_safeInsert",
            value: function _safeInsert(t, e) {
              var n = this._splitToAllowedParent(t, e);

              return !!n && (this.conversionApi.writer.insert(t, n.position), !0);
            }
          }, {
            key: "_updateConversionResult",
            value: function _updateConversionResult(t, e) {
              var n = this._getSplitParts(t),
                  i = this.conversionApi.writer;

              e.modelRange || (e.modelRange = i.createRange(i.createPositionBefore(t), i.createPositionAfter(n[n.length - 1])));

              var o = this._cursorParents.get(t);

              e.modelCursor = o ? i.createPositionAt(o, 0) : e.modelRange.end;
            }
          }, {
            key: "_splitToAllowedParent",
            value: function _splitToAllowedParent(t, e) {
              var _this$conversionApi = this.conversionApi,
                  n = _this$conversionApi.schema,
                  i = _this$conversionApi.writer;
              var o = n.findAllowedParent(e, t);

              if (o) {
                if (o === e.parent) return {
                  position: e
                };
                this._modelCursor.parent.getAncestors().includes(o) && (o = null);
              }

              if (!o) return Oa(e, t, n) ? {
                position: Ra(e, i)
              } : null;
              var r = this.conversionApi.writer.split(e, o),
                  s = [];

              var _iterator214 = _createForOfIteratorHelper(r.range.getWalker()),
                  _step214;

              try {
                for (_iterator214.s(); !(_step214 = _iterator214.n()).done;) {
                  var _t156 = _step214.value;
                  if ("elementEnd" == _t156.type) s.push(_t156.item);else {
                    var _e148 = s.pop(),
                        _n143 = _t156.item;

                    this._registerSplitPair(_e148, _n143);
                  }
                }
              } catch (err) {
                _iterator214.e(err);
              } finally {
                _iterator214.f();
              }

              var a = r.range.end.parent;
              return this._cursorParents.set(t, a), {
                position: r.position,
                cursorParent: a
              };
            }
          }, {
            key: "_registerSplitPair",
            value: function _registerSplitPair(t, e) {
              this._splitParts.has(t) || this._splitParts.set(t, [t]);

              var n = this._splitParts.get(t);

              this._splitParts.set(e, n), n.push(e);
            }
          }, {
            key: "_getSplitParts",
            value: function _getSplitParts(t) {
              var e;
              return e = this._splitParts.has(t) ? this._splitParts.get(t) : [t];
            }
          }, {
            key: "_removeEmptyElements",
            value: function _removeEmptyElements() {
              var t = !1;

              var _iterator215 = _createForOfIteratorHelper(this._splitParts.keys()),
                  _step215;

              try {
                for (_iterator215.s(); !(_step215 = _iterator215.n()).done;) {
                  var _e149 = _step215.value;
                  _e149.isEmpty && (this.conversionApi.writer.remove(_e149), this._splitParts["delete"](_e149), t = !0);
                }
              } catch (err) {
                _iterator215.e(err);
              } finally {
                _iterator215.f();
              }

              t && this._removeEmptyElements();
            }
          }]);

          return oc;
        }();

        Object(o["default"])(oc, sn["default"]);

        var rc = /*#__PURE__*/function () {
          function rc() {
            _classCallCheck(this, rc);
          }

          _createClass(rc, [{
            key: "getHtml",
            value: function getHtml(t) {
              var e = document.implementation.createHTMLDocument("").createElement("div");
              return e.appendChild(t), e.innerHTML;
            }
          }]);

          return rc;
        }();

        var sc = /*#__PURE__*/function () {
          function sc(t) {
            _classCallCheck(this, sc);

            this._domParser = new DOMParser(), this._domConverter = new Go(t, {
              blockFillerMode: "nbsp"
            }), this._htmlWriter = new rc();
          }

          _createClass(sc, [{
            key: "toData",
            value: function toData(t) {
              var e = this._domConverter.viewToDom(t, document);

              return this._htmlWriter.getHtml(e);
            }
          }, {
            key: "toView",
            value: function toView(t) {
              var e = this._toDom(t);

              return this._domConverter.domToView(e);
            }
          }, {
            key: "registerRawContentMatcher",
            value: function registerRawContentMatcher(t) {
              this._domConverter.registerRawContentMatcher(t);
            }
          }, {
            key: "useFillerType",
            value: function useFillerType(t) {
              this._domConverter.blockFillerMode = "marked" == t ? "markedNbsp" : "nbsp";
            }
          }, {
            key: "_toDom",
            value: function _toDom(t) {
              var e = this._domParser.parseFromString(t, "text/html"),
                  n = e.createDocumentFragment();

              var i = e.firstChild;

              for (; !i.isSameNode(e.documentElement);) {
                var _t157 = i;
                i = i.nextSibling, _t157.nodeType == Node.COMMENT_NODE && n.appendChild(_t157);
              }

              var o = e.body.childNodes;

              for (; o.length > 0;) {
                n.appendChild(o[0]);
              }

              return n;
            }
          }]);

          return sc;
        }();

        var ac = /*#__PURE__*/function () {
          function ac(t, e) {
            var _this126 = this;

            _classCallCheck(this, ac);

            this.model = t, this.mapper = new ea(), this.downcastDispatcher = new oa({
              mapper: this.mapper,
              schema: t.schema
            }), this.downcastDispatcher.on("insert:$text", function (t, e, n) {
              if (!n.consumable.consume(e.item, "insert")) return;
              var i = n.writer,
                  o = n.mapper.toViewPosition(e.range.start),
                  r = i.createText(e.item.data);
              i.insert(o, r);
            }, {
              priority: "lowest"
            }), this.upcastDispatcher = new oc({
              schema: t.schema
            }), this.viewDocument = new Hi(e), this.stylesProcessor = e, this.htmlProcessor = new sc(this.viewDocument), this.processor = this.htmlProcessor, this._viewWriter = new fo(this.viewDocument), this.upcastDispatcher.on("text", function (t, e, _ref27) {
              var n = _ref27.schema,
                  i = _ref27.consumable,
                  o = _ref27.writer;
              var r = e.modelCursor;
              if (!i.test(e.viewItem)) return;

              if (!n.checkChild(r, "$text")) {
                if (!Oa(r, "$text", n)) return;
                r = Ra(r, o);
              }

              i.consume(e.viewItem);
              var s = o.createText(e.viewItem.data);
              o.insert(s, r), e.modelRange = o.createRange(r, r.getShiftedBy(s.offsetSize)), e.modelCursor = e.modelRange.end;
            }, {
              priority: "lowest"
            }), this.upcastDispatcher.on("element", function (t, e, n) {
              if (!e.modelRange && n.consumable.consume(e.viewItem, {
                name: !0
              })) {
                var _n$convertChildren = n.convertChildren(e.viewItem, e.modelCursor),
                    _t158 = _n$convertChildren.modelRange,
                    _i110 = _n$convertChildren.modelCursor;

                e.modelRange = _t158, e.modelCursor = _i110;
              }
            }, {
              priority: "lowest"
            }), this.upcastDispatcher.on("documentFragment", function (t, e, n) {
              if (!e.modelRange && n.consumable.consume(e.viewItem, {
                name: !0
              })) {
                var _n$convertChildren2 = n.convertChildren(e.viewItem, e.modelCursor),
                    _t159 = _n$convertChildren2.modelRange,
                    _i111 = _n$convertChildren2.modelCursor;

                e.modelRange = _t159, e.modelCursor = _i111;
              }
            }, {
              priority: "lowest"
            }), this.decorate("init"), this.decorate("set"), this.on("init", function () {
              _this126.fire("ready");
            }, {
              priority: "lowest"
            }), this.on("ready", function () {
              _this126.model.enqueueChange("transparent", Ia);
            }, {
              priority: "lowest"
            });
          }

          _createClass(ac, [{
            key: "get",
            value: function get() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var _t$rootName = t.rootName,
                  e = _t$rootName === void 0 ? "main" : _t$rootName,
                  _t$trim = t.trim,
                  n = _t$trim === void 0 ? "empty" : _t$trim;
              if (!this._checkIfRootsExists([e])) throw new rn["default"]("datacontroller-get-non-existent-root", this);
              var i = this.model.document.getRoot(e);
              return "empty" !== n || this.model.hasContent(i, {
                ignoreWhitespaces: !0
              }) ? this.stringify(i, t) : "";
            }
          }, {
            key: "stringify",
            value: function stringify(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = this.toView(t, e);
              return this.processor.toData(n);
            }
          }, {
            key: "toView",
            value: function toView(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = this.viewDocument,
                  i = this._viewWriter;
              this.mapper.clearBindings();

              var o = ta._createIn(t),
                  r = new ho(n);

              this.mapper.bindElements(t, r), this.downcastDispatcher.conversionApi.options = e, this.downcastDispatcher.convertInsert(o, i);
              var s = t.is("documentFragment") ? Array.from(t.markers) : function (t) {
                var e = [],
                    n = t.root.document;
                if (!n) return [];

                var i = ta._createIn(t);

                var _iterator216 = _createForOfIteratorHelper(n.model.markers),
                    _step216;

                try {
                  for (_iterator216.s(); !(_step216 = _iterator216.n()).done;) {
                    var _t160 = _step216.value;

                    var _n144 = _t160.getRange(),
                        _o47 = _n144.isCollapsed,
                        _r29 = _n144.start.isEqual(i.start) || _n144.end.isEqual(i.end);

                    if (_o47 && _r29) e.push([_t160.name, _n144]);else {
                      var _o48 = i.getIntersection(_n144);

                      _o48 && e.push([_t160.name, _o48]);
                    }
                  }
                } catch (err) {
                  _iterator216.e(err);
                } finally {
                  _iterator216.f();
                }

                return e;
              }(t);

              var _iterator217 = _createForOfIteratorHelper(s),
                  _step217;

              try {
                for (_iterator217.s(); !(_step217 = _iterator217.n()).done;) {
                  var _step217$value = _slicedToArray(_step217.value, 2),
                      _t161 = _step217$value[0],
                      _e150 = _step217$value[1];

                  this.downcastDispatcher.convertMarkerAdd(_t161, _e150, i);
                }
              } catch (err) {
                _iterator217.e(err);
              } finally {
                _iterator217.f();
              }

              return delete this.downcastDispatcher.conversionApi.options, r;
            }
          }, {
            key: "init",
            value: function init(t) {
              var _this127 = this;

              if (this.model.document.version) throw new rn["default"]("datacontroller-init-document-not-empty", this);
              var e = {};
              if ("string" == typeof t ? e.main = t : e = t, !this._checkIfRootsExists(Object.keys(e))) throw new rn["default"]("datacontroller-init-non-existent-root", this);
              return this.model.enqueueChange("transparent", function (t) {
                for (var _i112 = 0, _Object$keys3 = Object.keys(e); _i112 < _Object$keys3.length; _i112++) {
                  var _n145 = _Object$keys3[_i112];

                  var _i113 = _this127.model.document.getRoot(_n145);

                  t.insert(_this127.parse(e[_n145], _i113), _i113, 0);
                }
              }), Promise.resolve();
            }
          }, {
            key: "set",
            value: function set(t) {
              var _this128 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = {};
              if ("string" == typeof t ? n.main = t : n = t, !this._checkIfRootsExists(Object.keys(n))) throw new rn["default"]("datacontroller-set-non-existent-root", this);
              var i = e.batchType || "default";
              this.model.enqueueChange(i, function (t) {
                t.setSelection(null), t.removeSelectionAttribute(_this128.model.document.selection.getAttributeKeys());

                for (var _i114 = 0, _Object$keys4 = Object.keys(n); _i114 < _Object$keys4.length; _i114++) {
                  var _e151 = _Object$keys4[_i114];

                  var _i115 = _this128.model.document.getRoot(_e151);

                  t.remove(t.createRangeIn(_i115)), t.insert(_this128.parse(n[_e151], _i115), _i115, 0);
                }
              });
            }
          }, {
            key: "parse",
            value: function parse(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "$root";
              var n = this.processor.toView(t);
              return this.toModel(n, e);
            }
          }, {
            key: "toModel",
            value: function toModel(t) {
              var _this129 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "$root";
              return this.model.change(function (n) {
                return _this129.upcastDispatcher.convert(t, n, e);
              });
            }
          }, {
            key: "addStyleProcessorRules",
            value: function addStyleProcessorRules(t) {
              t(this.stylesProcessor);
            }
          }, {
            key: "registerRawContentMatcher",
            value: function registerRawContentMatcher(t) {
              this.processor && this.processor !== this.htmlProcessor && this.processor.registerRawContentMatcher(t), this.htmlProcessor.registerRawContentMatcher(t);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.stopListening();
            }
          }, {
            key: "_checkIfRootsExists",
            value: function _checkIfRootsExists(t) {
              var _iterator218 = _createForOfIteratorHelper(t),
                  _step218;

              try {
                for (_iterator218.s(); !(_step218 = _iterator218.n()).done;) {
                  var _e152 = _step218.value;
                  if (!this.model.document.getRootNames().includes(_e152)) return !1;
                }
              } catch (err) {
                _iterator218.e(err);
              } finally {
                _iterator218.f();
              }

              return !0;
            }
          }]);

          return ac;
        }();

        Object(o["default"])(ac, i["default"]);

        var cc = /*#__PURE__*/function () {
          function cc(t, e) {
            _classCallCheck(this, cc);

            this._helpers = new Map(), this._downcast = cn(t), this._createConversionHelpers({
              name: "downcast",
              dispatchers: this._downcast,
              isDowncast: !0
            }), this._upcast = cn(e), this._createConversionHelpers({
              name: "upcast",
              dispatchers: this._upcast,
              isDowncast: !1
            });
          }

          _createClass(cc, [{
            key: "addAlias",
            value: function addAlias(t, e) {
              var n = this._downcast.includes(e);

              if (!this._upcast.includes(e) && !n) throw new rn["default"]("conversion-add-alias-dispatcher-not-registered", this);

              this._createConversionHelpers({
                name: t,
                dispatchers: [e],
                isDowncast: n
              });
            }
          }, {
            key: "for",
            value: function _for(t) {
              if (!this._helpers.has(t)) throw new rn["default"]("conversion-for-unknown-group", this);
              return this._helpers.get(t);
            }
          }, {
            key: "elementToElement",
            value: function elementToElement(t) {
              this["for"]("downcast").elementToElement(t);

              var _iterator219 = _createForOfIteratorHelper(lc(t)),
                  _step219;

              try {
                for (_iterator219.s(); !(_step219 = _iterator219.n()).done;) {
                  var _step219$value = _step219.value,
                      _e153 = _step219$value.model,
                      _n146 = _step219$value.view;
                  this["for"]("upcast").elementToElement({
                    model: _e153,
                    view: _n146,
                    converterPriority: t.converterPriority
                  });
                }
              } catch (err) {
                _iterator219.e(err);
              } finally {
                _iterator219.f();
              }
            }
          }, {
            key: "attributeToElement",
            value: function attributeToElement(t) {
              this["for"]("downcast").attributeToElement(t);

              var _iterator220 = _createForOfIteratorHelper(lc(t)),
                  _step220;

              try {
                for (_iterator220.s(); !(_step220 = _iterator220.n()).done;) {
                  var _step220$value = _step220.value,
                      _e154 = _step220$value.model,
                      _n147 = _step220$value.view;
                  this["for"]("upcast").elementToAttribute({
                    view: _n147,
                    model: _e154,
                    converterPriority: t.converterPriority
                  });
                }
              } catch (err) {
                _iterator220.e(err);
              } finally {
                _iterator220.f();
              }
            }
          }, {
            key: "attributeToAttribute",
            value: function attributeToAttribute(t) {
              this["for"]("downcast").attributeToAttribute(t);

              var _iterator221 = _createForOfIteratorHelper(lc(t)),
                  _step221;

              try {
                for (_iterator221.s(); !(_step221 = _iterator221.n()).done;) {
                  var _step221$value = _step221.value,
                      _e155 = _step221$value.model,
                      _n148 = _step221$value.view;
                  this["for"]("upcast").attributeToAttribute({
                    view: _n148,
                    model: _e155
                  });
                }
              } catch (err) {
                _iterator221.e(err);
              } finally {
                _iterator221.f();
              }
            }
          }, {
            key: "_createConversionHelpers",
            value: function _createConversionHelpers(_ref28) {
              var t = _ref28.name,
                  e = _ref28.dispatchers,
                  n = _ref28.isDowncast;
              if (this._helpers.has(t)) throw new rn["default"]("conversion-group-exists", this);
              var i = n ? new ya(e) : new Ma(e);

              this._helpers.set(t, i);
            }
          }]);

          return cc;
        }();

        function lc(t) {
          var _iterator222, _step222, _e156;

          return regeneratorRuntime.wrap(function lc$(_context62) {
            while (1) {
              switch (_context62.prev = _context62.next) {
                case 0:
                  if (!t.model.values) {
                    _context62.next = 19;
                    break;
                  }

                  _iterator222 = _createForOfIteratorHelper(t.model.values);
                  _context62.prev = 2;

                  _iterator222.s();

                case 4:
                  if ((_step222 = _iterator222.n()).done) {
                    _context62.next = 9;
                    break;
                  }

                  _e156 = _step222.value;
                  return _context62.delegateYield(dc({
                    key: t.model.key,
                    value: _e156
                  }, t.view[_e156], t.upcastAlso ? t.upcastAlso[_e156] : void 0), "t0", 7);

                case 7:
                  _context62.next = 4;
                  break;

                case 9:
                  _context62.next = 14;
                  break;

                case 11:
                  _context62.prev = 11;
                  _context62.t1 = _context62["catch"](2);

                  _iterator222.e(_context62.t1);

                case 14:
                  _context62.prev = 14;

                  _iterator222.f();

                  return _context62.finish(14);

                case 17:
                  _context62.next = 20;
                  break;

                case 19:
                  return _context62.delegateYield(dc(t.model, t.view, t.upcastAlso), "t2", 20);

                case 20:
                case "end":
                  return _context62.stop();
              }
            }
          }, _marked, null, [[2, 11, 14, 17]]);
        }

        function dc(t, e, n) {
          var _iterator223, _step223, _e157;

          return regeneratorRuntime.wrap(function dc$(_context63) {
            while (1) {
              switch (_context63.prev = _context63.next) {
                case 0:
                  _context63.next = 2;
                  return {
                    model: t,
                    view: e
                  };

                case 2:
                  if (!n) {
                    _context63.next = 20;
                    break;
                  }

                  _iterator223 = _createForOfIteratorHelper(cn(n));
                  _context63.prev = 4;

                  _iterator223.s();

                case 6:
                  if ((_step223 = _iterator223.n()).done) {
                    _context63.next = 12;
                    break;
                  }

                  _e157 = _step223.value;
                  _context63.next = 10;
                  return {
                    model: t,
                    view: _e157
                  };

                case 10:
                  _context63.next = 6;
                  break;

                case 12:
                  _context63.next = 17;
                  break;

                case 14:
                  _context63.prev = 14;
                  _context63.t0 = _context63["catch"](4);

                  _iterator223.e(_context63.t0);

                case 17:
                  _context63.prev = 17;

                  _iterator223.f();

                  return _context63.finish(17);

                case 20:
                case "end":
                  return _context63.stop();
              }
            }
          }, _marked2, null, [[4, 14, 17, 20]]);
        }

        var uc = /*#__PURE__*/function () {
          function uc() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "default";

            _classCallCheck(this, uc);

            this.operations = [], this.type = t;
          }

          _createClass(uc, [{
            key: "baseVersion",
            get: function get() {
              var _iterator224 = _createForOfIteratorHelper(this.operations),
                  _step224;

              try {
                for (_iterator224.s(); !(_step224 = _iterator224.n()).done;) {
                  var _t162 = _step224.value;
                  if (null !== _t162.baseVersion) return _t162.baseVersion;
                }
              } catch (err) {
                _iterator224.e(err);
              } finally {
                _iterator224.f();
              }

              return null;
            }
          }, {
            key: "addOperation",
            value: function addOperation(t) {
              return t.batch = this, this.operations.push(t), t;
            }
          }]);

          return uc;
        }();

        var hc = /*#__PURE__*/function () {
          function hc(t) {
            _classCallCheck(this, hc);

            this.baseVersion = t, this.isDocumentOperation = null !== this.baseVersion, this.batch = null;
          }

          _createClass(hc, [{
            key: "_validate",
            value: function _validate() {}
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = Object.assign({}, this);
              return t.__className = this.constructor.className, delete t.batch, delete t.isDocumentOperation, t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "Operation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t) {
              return new this(t.baseVersion);
            }
          }]);

          return hc;
        }();

        var fc = /*#__PURE__*/function (_Symbol$iterator11) {
          function fc(t) {
            _classCallCheck(this, fc);

            this.markers = new Map(), this._children = new $s(), t && this._insertChild(0, t);
          }

          _createClass(fc, [{
            key: _Symbol$iterator11,
            value: function value() {
              return this.getChildren();
            }
          }, {
            key: "childCount",
            get: function get() {
              return this._children.length;
            }
          }, {
            key: "maxOffset",
            get: function get() {
              return this._children.maxOffset;
            }
          }, {
            key: "isEmpty",
            get: function get() {
              return 0 === this.childCount;
            }
          }, {
            key: "root",
            get: function get() {
              return this;
            }
          }, {
            key: "parent",
            get: function get() {
              return null;
            }
          }, {
            key: "is",
            value: function is(t) {
              return "documentFragment" === t || "model:documentFragment" === t;
            }
          }, {
            key: "getChild",
            value: function getChild(t) {
              return this._children.getNode(t);
            }
          }, {
            key: "getChildren",
            value: function getChildren() {
              return this._children[Symbol.iterator]();
            }
          }, {
            key: "getChildIndex",
            value: function getChildIndex(t) {
              return this._children.getNodeIndex(t);
            }
          }, {
            key: "getChildStartOffset",
            value: function getChildStartOffset(t) {
              return this._children.getNodeStartOffset(t);
            }
          }, {
            key: "getPath",
            value: function getPath() {
              return [];
            }
          }, {
            key: "getNodeByPath",
            value: function getNodeByPath(t) {
              var e = this;

              var _iterator225 = _createForOfIteratorHelper(t),
                  _step225;

              try {
                for (_iterator225.s(); !(_step225 = _iterator225.n()).done;) {
                  var _n149 = _step225.value;
                  e = e.getChild(e.offsetToIndex(_n149));
                }
              } catch (err) {
                _iterator225.e(err);
              } finally {
                _iterator225.f();
              }

              return e;
            }
          }, {
            key: "offsetToIndex",
            value: function offsetToIndex(t) {
              return this._children.offsetToIndex(t);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = [];

              var _iterator226 = _createForOfIteratorHelper(this._children),
                  _step226;

              try {
                for (_iterator226.s(); !(_step226 = _iterator226.n()).done;) {
                  var _e158 = _step226.value;
                  t.push(_e158.toJSON());
                }
              } catch (err) {
                _iterator226.e(err);
              } finally {
                _iterator226.f();
              }

              return t;
            }
          }, {
            key: "_appendChild",
            value: function _appendChild(t) {
              this._insertChild(this.childCount, t);
            }
          }, {
            key: "_insertChild",
            value: function _insertChild(t, e) {
              var n = function (t) {
                if ("string" == typeof t) return [new qs(t)];
                Object(yn.a)(t) || (t = [t]);
                return Array.from(t).map(function (t) {
                  return "string" == typeof t ? new qs(t) : t instanceof Ws ? new qs(t.data, t.getAttributes()) : t;
                });
              }(e);

              var _iterator227 = _createForOfIteratorHelper(n),
                  _step227;

              try {
                for (_iterator227.s(); !(_step227 = _iterator227.n()).done;) {
                  var _t163 = _step227.value;
                  null !== _t163.parent && _t163._remove(), _t163.parent = this;
                }
              } catch (err) {
                _iterator227.e(err);
              } finally {
                _iterator227.f();
              }

              this._children._insertNodes(t, n);
            }
          }, {
            key: "_removeChildren",
            value: function _removeChildren(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

              var n = this._children._removeNodes(t, e);

              var _iterator228 = _createForOfIteratorHelper(n),
                  _step228;

              try {
                for (_iterator228.s(); !(_step228 = _iterator228.n()).done;) {
                  var _t164 = _step228.value;
                  _t164.parent = null;
                }
              } catch (err) {
                _iterator228.e(err);
              } finally {
                _iterator228.f();
              }

              return n;
            }
          }], [{
            key: "fromJSON",
            value: function fromJSON(t) {
              var e = [];

              var _iterator229 = _createForOfIteratorHelper(t),
                  _step229;

              try {
                for (_iterator229.s(); !(_step229 = _iterator229.n()).done;) {
                  var _n150 = _step229.value;
                  _n150.name ? e.push(Ys.fromJSON(_n150)) : e.push(qs.fromJSON(_n150));
                }
              } catch (err) {
                _iterator229.e(err);
              } finally {
                _iterator229.f();
              }

              return new fc(e);
            }
          }]);

          return fc;
        }(Symbol.iterator);

        function gc(t, e) {
          var n = (e = bc(e)).reduce(function (t, e) {
            return t + e.offsetSize;
          }, 0),
              i = t.parent;

          _c(t);

          var o = t.index;
          return i._insertChild(o, e), kc(i, o + e.length), kc(i, o), new ta(t, t.getShiftedBy(n));
        }

        function mc(t) {
          if (!t.isFlat) throw new rn["default"]("operation-utils-remove-range-not-flat", this);
          var e = t.start.parent;
          _c(t.start), _c(t.end);

          var n = e._removeChildren(t.start.index, t.end.index - t.start.index);

          return kc(e, t.start.index), n;
        }

        function pc(t, e) {
          if (!t.isFlat) throw new rn["default"]("operation-utils-move-range-not-flat", this);
          var n = mc(t);
          return gc(e = e._getTransformedByDeletion(t.start, t.end.offset - t.start.offset), n);
        }

        function bc(t) {
          var e = [];
          t instanceof Array || (t = [t]);

          for (var _n151 = 0; _n151 < t.length; _n151++) {
            if ("string" == typeof t[_n151]) e.push(new qs(t[_n151]));else if (t[_n151] instanceof Ws) e.push(new qs(t[_n151].data, t[_n151].getAttributes()));else if (t[_n151] instanceof fc || t[_n151] instanceof $s) {
              var _iterator230 = _createForOfIteratorHelper(t[_n151]),
                  _step230;

              try {
                for (_iterator230.s(); !(_step230 = _iterator230.n()).done;) {
                  var _i116 = _step230.value;
                  e.push(_i116);
                }
              } catch (err) {
                _iterator230.e(err);
              } finally {
                _iterator230.f();
              }
            } else t[_n151] instanceof Hs && e.push(t[_n151]);
          }

          for (var _t165 = 1; _t165 < e.length; _t165++) {
            var _n152 = e[_t165],
                _i117 = e[_t165 - 1];
            _n152 instanceof qs && _i117 instanceof qs && wc(_n152, _i117) && (e.splice(_t165 - 1, 2, new qs(_i117.data + _n152.data, _i117.getAttributes())), _t165--);
          }

          return e;
        }

        function kc(t, e) {
          var n = t.getChild(e - 1),
              i = t.getChild(e);

          if (n && i && n.is("$text") && i.is("$text") && wc(n, i)) {
            var _o49 = new qs(n.data + i.data, n.getAttributes());

            t._removeChildren(e - 1, 2), t._insertChild(e - 1, _o49);
          }
        }

        function _c(t) {
          var e = t.textNode,
              n = t.parent;

          if (e) {
            var _i118 = t.offset - e.startOffset,
                _o50 = e.index;

            n._removeChildren(_o50, 1);

            var _r30 = new qs(e.data.substr(0, _i118), e.getAttributes()),
                _s17 = new qs(e.data.substr(_i118), e.getAttributes());

            n._insertChild(_o50, [_r30, _s17]);
          }
        }

        function wc(t, e) {
          var n = t.getAttributes(),
              i = e.getAttributes();

          var _iterator231 = _createForOfIteratorHelper(n),
              _step231;

          try {
            for (_iterator231.s(); !(_step231 = _iterator231.n()).done;) {
              var _t166 = _step231.value;
              if (_t166[1] !== e.getAttribute(_t166[0])) return !1;
              i.next();
            }
          } catch (err) {
            _iterator231.e(err);
          } finally {
            _iterator231.f();
          }

          return i.next().done;
        }

        var vc = function vc(t, e) {
          return Ur(t, e);
        };

        var yc = /*#__PURE__*/function (_hc) {
          _inherits(yc, _hc);

          var _super88 = _createSuper(yc);

          function yc(t, e, n, i, o) {
            var _this130;

            _classCallCheck(this, yc);

            _this130 = _super88.call(this, o), _this130.range = t.clone(), _this130.key = e, _this130.oldValue = void 0 === n ? null : n, _this130.newValue = void 0 === i ? null : i;
            return _this130;
          }

          _createClass(yc, [{
            key: "type",
            get: function get() {
              return null === this.oldValue ? "addAttribute" : null === this.newValue ? "removeAttribute" : "changeAttribute";
            }
          }, {
            key: "clone",
            value: function clone() {
              return new yc(this.range, this.key, this.oldValue, this.newValue, this.baseVersion);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              return new yc(this.range, this.key, this.newValue, this.oldValue, this.baseVersion + 1);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(yc.prototype), "toJSON", this).call(this);

              return t.range = this.range.toJSON(), t;
            }
          }, {
            key: "_validate",
            value: function _validate() {
              if (!this.range.isFlat) throw new rn["default"]("attribute-operation-range-not-flat", this);

              var _iterator232 = _createForOfIteratorHelper(this.range.getItems({
                shallow: !0
              })),
                  _step232;

              try {
                for (_iterator232.s(); !(_step232 = _iterator232.n()).done;) {
                  var _t167 = _step232.value;
                  if (null !== this.oldValue && !vc(_t167.getAttribute(this.key), this.oldValue)) throw new rn["default"]("attribute-operation-wrong-old-value", this, {
                    item: _t167,
                    key: this.key,
                    value: this.oldValue
                  });
                  if (null === this.oldValue && null !== this.newValue && _t167.hasAttribute(this.key)) throw new rn["default"]("attribute-operation-attribute-exists", this, {
                    node: _t167,
                    key: this.key
                  });
                }
              } catch (err) {
                _iterator232.e(err);
              } finally {
                _iterator232.f();
              }
            }
          }, {
            key: "_execute",
            value: function _execute() {
              vc(this.oldValue, this.newValue) || function (t, e, n) {
                _c(t.start), _c(t.end);

                var _iterator233 = _createForOfIteratorHelper(t.getItems({
                  shallow: !0
                })),
                    _step233;

                try {
                  for (_iterator233.s(); !(_step233 = _iterator233.n()).done;) {
                    var _i119 = _step233.value;

                    var _t168 = _i119.is("$textProxy") ? _i119.textNode : _i119;

                    null !== n ? _t168._setAttribute(e, n) : _t168._removeAttribute(e), kc(_t168.parent, _t168.index);
                  }
                } catch (err) {
                  _iterator233.e(err);
                } finally {
                  _iterator233.f();
                }

                kc(t.end.parent, t.end.index);
              }(this.range, this.key, this.newValue);
            }
          }], [{
            key: "className",
            get: function get() {
              return "AttributeOperation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              return new yc(ta.fromJSON(t.range, e), t.key, t.oldValue, t.newValue, t.baseVersion);
            }
          }]);

          return yc;
        }(hc);

        var xc = /*#__PURE__*/function (_hc2) {
          _inherits(xc, _hc2);

          var _super89 = _createSuper(xc);

          function xc(t, e) {
            var _this131;

            _classCallCheck(this, xc);

            _this131 = _super89.call(this, null), _this131.sourcePosition = t.clone(), _this131.howMany = e;
            return _this131;
          }

          _createClass(xc, [{
            key: "type",
            get: function get() {
              return "detach";
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(xc.prototype), "toJSON", this).call(this);

              return t.sourcePosition = this.sourcePosition.toJSON(), t;
            }
          }, {
            key: "_validate",
            value: function _validate() {
              if (this.sourcePosition.root.document) throw new rn["default"]("detach-operation-on-document-node", this);
            }
          }, {
            key: "_execute",
            value: function _execute() {
              mc(ta._createFromPositionAndShift(this.sourcePosition, this.howMany));
            }
          }], [{
            key: "className",
            get: function get() {
              return "DetachOperation";
            }
          }]);

          return xc;
        }(hc);

        var Cc = /*#__PURE__*/function (_hc3) {
          _inherits(Cc, _hc3);

          var _super90 = _createSuper(Cc);

          function Cc(t, e, n, i) {
            var _this132;

            _classCallCheck(this, Cc);

            _this132 = _super90.call(this, i), _this132.sourcePosition = t.clone(), _this132.sourcePosition.stickiness = "toNext", _this132.howMany = e, _this132.targetPosition = n.clone(), _this132.targetPosition.stickiness = "toNone";
            return _this132;
          }

          _createClass(Cc, [{
            key: "type",
            get: function get() {
              return "$graveyard" == this.targetPosition.root.rootName ? "remove" : "$graveyard" == this.sourcePosition.root.rootName ? "reinsert" : "move";
            }
          }, {
            key: "clone",
            value: function clone() {
              return new this.constructor(this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion);
            }
          }, {
            key: "getMovedRangeStart",
            value: function getMovedRangeStart() {
              return this.targetPosition._getTransformedByDeletion(this.sourcePosition, this.howMany);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              var t = this.sourcePosition._getTransformedByInsertion(this.targetPosition, this.howMany);

              return new this.constructor(this.getMovedRangeStart(), this.howMany, t, this.baseVersion + 1);
            }
          }, {
            key: "_validate",
            value: function _validate() {
              var t = this.sourcePosition.parent,
                  e = this.targetPosition.parent,
                  n = this.sourcePosition.offset,
                  i = this.targetPosition.offset;
              if (n + this.howMany > t.maxOffset) throw new rn["default"]("move-operation-nodes-do-not-exist", this);
              if (t === e && n < i && i < n + this.howMany) throw new rn["default"]("move-operation-range-into-itself", this);

              if (this.sourcePosition.root == this.targetPosition.root && "prefix" == mn(this.sourcePosition.getParentPath(), this.targetPosition.getParentPath())) {
                var _t169 = this.sourcePosition.path.length - 1;

                if (this.targetPosition.path[_t169] >= n && this.targetPosition.path[_t169] < n + this.howMany) throw new rn["default"]("move-operation-node-into-itself", this);
              }
            }
          }, {
            key: "_execute",
            value: function _execute() {
              pc(ta._createFromPositionAndShift(this.sourcePosition, this.howMany), this.targetPosition);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Cc.prototype), "toJSON", this).call(this);

              return t.sourcePosition = this.sourcePosition.toJSON(), t.targetPosition = this.targetPosition.toJSON(), t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "MoveOperation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              var n = Ks.fromJSON(t.sourcePosition, e),
                  i = Ks.fromJSON(t.targetPosition, e);
              return new this(n, t.howMany, i, t.baseVersion);
            }
          }]);

          return Cc;
        }(hc);

        var Tc = /*#__PURE__*/function (_hc4) {
          _inherits(Tc, _hc4);

          var _super91 = _createSuper(Tc);

          function Tc(t, e, n) {
            var _this133;

            _classCallCheck(this, Tc);

            _this133 = _super91.call(this, n), _this133.position = t.clone(), _this133.position.stickiness = "toNone", _this133.nodes = new $s(bc(e)), _this133.shouldReceiveAttributes = !1;
            return _this133;
          }

          _createClass(Tc, [{
            key: "type",
            get: function get() {
              return "insert";
            }
          }, {
            key: "howMany",
            get: function get() {
              return this.nodes.maxOffset;
            }
          }, {
            key: "clone",
            value: function clone() {
              var t = new $s(_toConsumableArray(this.nodes).map(function (t) {
                return t._clone(!0);
              })),
                  e = new Tc(this.position, t, this.baseVersion);
              return e.shouldReceiveAttributes = this.shouldReceiveAttributes, e;
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              var t = this.position.root.document.graveyard,
                  e = new Ks(t, [0]);
              return new Cc(this.position, this.nodes.maxOffset, e, this.baseVersion + 1);
            }
          }, {
            key: "_validate",
            value: function _validate() {
              var t = this.position.parent;
              if (!t || t.maxOffset < this.position.offset) throw new rn["default"]("insert-operation-position-invalid", this);
            }
          }, {
            key: "_execute",
            value: function _execute() {
              var t = this.nodes;
              this.nodes = new $s(_toConsumableArray(t).map(function (t) {
                return t._clone(!0);
              })), gc(this.position, t);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Tc.prototype), "toJSON", this).call(this);

              return t.position = this.position.toJSON(), t.nodes = this.nodes.toJSON(), t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "InsertOperation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              var n = [];

              var _iterator234 = _createForOfIteratorHelper(t.nodes),
                  _step234;

              try {
                for (_iterator234.s(); !(_step234 = _iterator234.n()).done;) {
                  var _e159 = _step234.value;
                  _e159.name ? n.push(Ys.fromJSON(_e159)) : n.push(qs.fromJSON(_e159));
                }
              } catch (err) {
                _iterator234.e(err);
              } finally {
                _iterator234.f();
              }

              var i = new Tc(Ks.fromJSON(t.position, e), n, t.baseVersion);
              return i.shouldReceiveAttributes = t.shouldReceiveAttributes, i;
            }
          }]);

          return Tc;
        }(hc);

        var Ac = /*#__PURE__*/function (_hc5) {
          _inherits(Ac, _hc5);

          var _super92 = _createSuper(Ac);

          function Ac(t, e, n, i, o, r) {
            var _this134;

            _classCallCheck(this, Ac);

            _this134 = _super92.call(this, r), _this134.name = t, _this134.oldRange = e ? e.clone() : null, _this134.newRange = n ? n.clone() : null, _this134.affectsData = o, _this134._markers = i;
            return _this134;
          }

          _createClass(Ac, [{
            key: "type",
            get: function get() {
              return "marker";
            }
          }, {
            key: "clone",
            value: function clone() {
              return new Ac(this.name, this.oldRange, this.newRange, this._markers, this.affectsData, this.baseVersion);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              return new Ac(this.name, this.newRange, this.oldRange, this._markers, this.affectsData, this.baseVersion + 1);
            }
          }, {
            key: "_execute",
            value: function _execute() {
              var t = this.newRange ? "_set" : "_remove";

              this._markers[t](this.name, this.newRange, !0, this.affectsData);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Ac.prototype), "toJSON", this).call(this);

              return this.oldRange && (t.oldRange = this.oldRange.toJSON()), this.newRange && (t.newRange = this.newRange.toJSON()), delete t._markers, t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "MarkerOperation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              return new Ac(t.name, t.oldRange ? ta.fromJSON(t.oldRange, e) : null, t.newRange ? ta.fromJSON(t.newRange, e) : null, e.model.markers, t.affectsData, t.baseVersion);
            }
          }]);

          return Ac;
        }(hc);

        var Ec = /*#__PURE__*/function (_hc6) {
          _inherits(Ec, _hc6);

          var _super93 = _createSuper(Ec);

          function Ec(t, e, n, i) {
            var _this135;

            _classCallCheck(this, Ec);

            _this135 = _super93.call(this, i), _this135.position = t, _this135.position.stickiness = "toNext", _this135.oldName = e, _this135.newName = n;
            return _this135;
          }

          _createClass(Ec, [{
            key: "type",
            get: function get() {
              return "rename";
            }
          }, {
            key: "clone",
            value: function clone() {
              return new Ec(this.position.clone(), this.oldName, this.newName, this.baseVersion);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              return new Ec(this.position.clone(), this.newName, this.oldName, this.baseVersion + 1);
            }
          }, {
            key: "_validate",
            value: function _validate() {
              var t = this.position.nodeAfter;
              if (!(t instanceof Ys)) throw new rn["default"]("rename-operation-wrong-position", this);
              if (t.name !== this.oldName) throw new rn["default"]("rename-operation-wrong-name", this);
            }
          }, {
            key: "_execute",
            value: function _execute() {
              this.position.nodeAfter.name = this.newName;
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Ec.prototype), "toJSON", this).call(this);

              return t.position = this.position.toJSON(), t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "RenameOperation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              return new Ec(Ks.fromJSON(t.position, e), t.oldName, t.newName, t.baseVersion);
            }
          }]);

          return Ec;
        }(hc);

        var Sc = /*#__PURE__*/function (_hc7) {
          _inherits(Sc, _hc7);

          var _super94 = _createSuper(Sc);

          function Sc(t, e, n, i, o) {
            var _this136;

            _classCallCheck(this, Sc);

            _this136 = _super94.call(this, o), _this136.root = t, _this136.key = e, _this136.oldValue = n, _this136.newValue = i;
            return _this136;
          }

          _createClass(Sc, [{
            key: "type",
            get: function get() {
              return null === this.oldValue ? "addRootAttribute" : null === this.newValue ? "removeRootAttribute" : "changeRootAttribute";
            }
          }, {
            key: "clone",
            value: function clone() {
              return new Sc(this.root, this.key, this.oldValue, this.newValue, this.baseVersion);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              return new Sc(this.root, this.key, this.newValue, this.oldValue, this.baseVersion + 1);
            }
          }, {
            key: "_validate",
            value: function _validate() {
              if (this.root != this.root.root || this.root.is("documentFragment")) throw new rn["default"]("rootattribute-operation-not-a-root", this, {
                root: this.root,
                key: this.key
              });
              if (null !== this.oldValue && this.root.getAttribute(this.key) !== this.oldValue) throw new rn["default"]("rootattribute-operation-wrong-old-value", this, {
                root: this.root,
                key: this.key
              });
              if (null === this.oldValue && null !== this.newValue && this.root.hasAttribute(this.key)) throw new rn["default"]("rootattribute-operation-attribute-exists", this, {
                root: this.root,
                key: this.key
              });
            }
          }, {
            key: "_execute",
            value: function _execute() {
              null !== this.newValue ? this.root._setAttribute(this.key, this.newValue) : this.root._removeAttribute(this.key);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Sc.prototype), "toJSON", this).call(this);

              return t.root = this.root.toJSON(), t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "RootAttributeOperation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              if (!e.getRoot(t.root)) throw new rn["default"]("rootattribute-operation-fromjson-no-root", this, {
                rootName: t.root
              });
              return new Sc(e.getRoot(t.root), t.key, t.oldValue, t.newValue, t.baseVersion);
            }
          }]);

          return Sc;
        }(hc);

        var Ic = /*#__PURE__*/function (_hc8) {
          _inherits(Ic, _hc8);

          var _super95 = _createSuper(Ic);

          function Ic(t, e, n, i, o) {
            var _this137;

            _classCallCheck(this, Ic);

            _this137 = _super95.call(this, o), _this137.sourcePosition = t.clone(), _this137.sourcePosition.stickiness = "toPrevious", _this137.howMany = e, _this137.targetPosition = n.clone(), _this137.targetPosition.stickiness = "toNext", _this137.graveyardPosition = i.clone();
            return _this137;
          }

          _createClass(Ic, [{
            key: "type",
            get: function get() {
              return "merge";
            }
          }, {
            key: "deletionPosition",
            get: function get() {
              return new Ks(this.sourcePosition.root, this.sourcePosition.path.slice(0, -1));
            }
          }, {
            key: "movedRange",
            get: function get() {
              var t = this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);
              return new ta(this.sourcePosition, t);
            }
          }, {
            key: "clone",
            value: function clone() {
              return new this.constructor(this.sourcePosition, this.howMany, this.targetPosition, this.graveyardPosition, this.baseVersion);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              var t = this.targetPosition._getTransformedByMergeOperation(this),
                  e = this.sourcePosition.path.slice(0, -1),
                  n = new Ks(this.sourcePosition.root, e)._getTransformedByMergeOperation(this);

              return new Oc(t, this.howMany, n, this.graveyardPosition, this.baseVersion + 1);
            }
          }, {
            key: "_validate",
            value: function _validate() {
              var t = this.sourcePosition.parent,
                  e = this.targetPosition.parent;
              if (!t.parent) throw new rn["default"]("merge-operation-source-position-invalid", this);
              if (!e.parent) throw new rn["default"]("merge-operation-target-position-invalid", this);
              if (this.howMany != t.maxOffset) throw new rn["default"]("merge-operation-how-many-invalid", this);
            }
          }, {
            key: "_execute",
            value: function _execute() {
              var t = this.sourcePosition.parent;
              pc(ta._createIn(t), this.targetPosition), pc(ta._createOn(t), this.graveyardPosition);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Ic.prototype), "toJSON", this).call(this);

              return t.sourcePosition = t.sourcePosition.toJSON(), t.targetPosition = t.targetPosition.toJSON(), t.graveyardPosition = t.graveyardPosition.toJSON(), t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "MergeOperation";
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              var n = Ks.fromJSON(t.sourcePosition, e),
                  i = Ks.fromJSON(t.targetPosition, e),
                  o = Ks.fromJSON(t.graveyardPosition, e);
              return new this(n, t.howMany, i, o, t.baseVersion);
            }
          }]);

          return Ic;
        }(hc);

        var Oc = /*#__PURE__*/function (_hc9) {
          _inherits(Oc, _hc9);

          var _super96 = _createSuper(Oc);

          function Oc(t, e, n, i, o) {
            var _this138;

            _classCallCheck(this, Oc);

            _this138 = _super96.call(this, o), _this138.splitPosition = t.clone(), _this138.splitPosition.stickiness = "toNext", _this138.howMany = e, _this138.insertionPosition = n, _this138.graveyardPosition = i ? i.clone() : null, _this138.graveyardPosition && (_this138.graveyardPosition.stickiness = "toNext");
            return _this138;
          }

          _createClass(Oc, [{
            key: "type",
            get: function get() {
              return "split";
            }
          }, {
            key: "moveTargetPosition",
            get: function get() {
              var t = this.insertionPosition.path.slice();
              return t.push(0), new Ks(this.insertionPosition.root, t);
            }
          }, {
            key: "movedRange",
            get: function get() {
              var t = this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);
              return new ta(this.splitPosition, t);
            }
          }, {
            key: "clone",
            value: function clone() {
              return new this.constructor(this.splitPosition, this.howMany, this.insertionPosition, this.graveyardPosition, this.baseVersion);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              var t = this.splitPosition.root.document.graveyard,
                  e = new Ks(t, [0]);
              return new Ic(this.moveTargetPosition, this.howMany, this.splitPosition, e, this.baseVersion + 1);
            }
          }, {
            key: "_validate",
            value: function _validate() {
              var t = this.splitPosition.parent,
                  e = this.splitPosition.offset;
              if (!t || t.maxOffset < e) throw new rn["default"]("split-operation-position-invalid", this);
              if (!t.parent) throw new rn["default"]("split-operation-split-in-root", this);
              if (this.howMany != t.maxOffset - this.splitPosition.offset) throw new rn["default"]("split-operation-how-many-invalid", this);
              if (this.graveyardPosition && !this.graveyardPosition.nodeAfter) throw new rn["default"]("split-operation-graveyard-position-invalid", this);
            }
          }, {
            key: "_execute",
            value: function _execute() {
              var t = this.splitPosition.parent;
              if (this.graveyardPosition) pc(ta._createFromPositionAndShift(this.graveyardPosition, 1), this.insertionPosition);else {
                var _e160 = t._clone();

                gc(this.insertionPosition, _e160);
              }
              pc(new ta(Ks._createAt(t, this.splitPosition.offset), Ks._createAt(t, t.maxOffset)), this.moveTargetPosition);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = _get3(_getPrototypeOf(Oc.prototype), "toJSON", this).call(this);

              return t.splitPosition = this.splitPosition.toJSON(), t.insertionPosition = this.insertionPosition.toJSON(), this.graveyardPosition && (t.graveyardPosition = this.graveyardPosition.toJSON()), t;
            }
          }], [{
            key: "className",
            get: function get() {
              return "SplitOperation";
            }
          }, {
            key: "getInsertionPosition",
            value: function getInsertionPosition(t) {
              var e = t.path.slice(0, -1);
              return e[e.length - 1]++, new Ks(t.root, e, "toPrevious");
            }
          }, {
            key: "fromJSON",
            value: function fromJSON(t, e) {
              var n = Ks.fromJSON(t.splitPosition, e),
                  i = Ks.fromJSON(t.insertionPosition, e),
                  o = t.graveyardPosition ? Ks.fromJSON(t.graveyardPosition, e) : null;
              return new this(n, t.howMany, i, o, t.baseVersion);
            }
          }]);

          return Oc;
        }(hc);

        var Rc = /*#__PURE__*/function (_Ys) {
          _inherits(Rc, _Ys);

          var _super97 = _createSuper(Rc);

          function Rc(t, e) {
            var _this139;

            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "main";

            _classCallCheck(this, Rc);

            _this139 = _super97.call(this, e), _this139._document = t, _this139.rootName = n;
            return _this139;
          }

          _createClass(Rc, [{
            key: "document",
            get: function get() {
              return this._document;
            }
          }, {
            key: "is",
            value: function is(t, e) {
              return e ? e === this.name && ("rootElement" === t || "model:rootElement" === t || "element" === t || "model:element" === t) : "rootElement" === t || "model:rootElement" === t || "element" === t || "model:element" === t || "node" === t || "model:node" === t;
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return this.rootName;
            }
          }]);

          return Rc;
        }(Ys);

        var Mc = /*#__PURE__*/function () {
          function Mc(t, e) {
            _classCallCheck(this, Mc);

            this.model = t, this.batch = e;
          }

          _createClass(Mc, [{
            key: "createText",
            value: function createText(t, e) {
              return new qs(t, e);
            }
          }, {
            key: "createElement",
            value: function createElement(t, e) {
              return new Ys(t, e);
            }
          }, {
            key: "createDocumentFragment",
            value: function createDocumentFragment() {
              return new fc();
            }
          }, {
            key: "cloneElement",
            value: function cloneElement(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
              return t._clone(e);
            }
          }, {
            key: "insert",
            value: function insert(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
              if (this._assertWriterUsedCorrectly(), t instanceof qs && "" == t.data) return;

              var i = Ks._createAt(e, n);

              if (t.parent) {
                if (Bc(t.root, i.root)) return void this.move(ta._createOn(t), i);
                if (t.root.document) throw new rn["default"]("model-writer-insert-forbidden-move", this);
                this.remove(t);
              }

              var o = i.root.document ? i.root.document.version : null,
                  r = new Tc(i, t, o);

              if (t instanceof qs && (r.shouldReceiveAttributes = !0), this.batch.addOperation(r), this.model.applyOperation(r), t instanceof fc) {
                var _iterator235 = _createForOfIteratorHelper(t.markers),
                    _step235;

                try {
                  for (_iterator235.s(); !(_step235 = _iterator235.n()).done;) {
                    var _step235$value = _slicedToArray(_step235.value, 2),
                        _e161 = _step235$value[0],
                        _n153 = _step235$value[1];

                    var _t170 = Ks._createAt(_n153.root, 0),
                        _o51 = {
                      range: new ta(_n153.start._getCombined(_t170, i), _n153.end._getCombined(_t170, i)),
                      usingOperation: !0,
                      affectsData: !0
                    };

                    this.model.markers.has(_e161) ? this.updateMarker(_e161, _o51) : this.addMarker(_e161, _o51);
                  }
                } catch (err) {
                  _iterator235.e(err);
                } finally {
                  _iterator235.f();
                }
              }
            }
          }, {
            key: "insertText",
            value: function insertText(t, e, n, i) {
              e instanceof fc || e instanceof Ys || e instanceof Ks ? this.insert(this.createText(t), e, n) : this.insert(this.createText(t, e), n, i);
            }
          }, {
            key: "insertElement",
            value: function insertElement(t, e, n, i) {
              e instanceof fc || e instanceof Ys || e instanceof Ks ? this.insert(this.createElement(t), e, n) : this.insert(this.createElement(t, e), n, i);
            }
          }, {
            key: "append",
            value: function append(t, e) {
              this.insert(t, e, "end");
            }
          }, {
            key: "appendText",
            value: function appendText(t, e, n) {
              e instanceof fc || e instanceof Ys ? this.insert(this.createText(t), e, "end") : this.insert(this.createText(t, e), n, "end");
            }
          }, {
            key: "appendElement",
            value: function appendElement(t, e, n) {
              e instanceof fc || e instanceof Ys ? this.insert(this.createElement(t), e, "end") : this.insert(this.createElement(t, e), n, "end");
            }
          }, {
            key: "setAttribute",
            value: function setAttribute(t, e, n) {
              if (this._assertWriterUsedCorrectly(), n instanceof ta) {
                var _i120 = n.getMinimalFlatRanges();

                var _iterator236 = _createForOfIteratorHelper(_i120),
                    _step236;

                try {
                  for (_iterator236.s(); !(_step236 = _iterator236.n()).done;) {
                    var _n154 = _step236.value;
                    Pc(this, t, e, _n154);
                  }
                } catch (err) {
                  _iterator236.e(err);
                } finally {
                  _iterator236.f();
                }
              } else Nc(this, t, e, n);
            }
          }, {
            key: "setAttributes",
            value: function setAttributes(t, e) {
              var _iterator237 = _createForOfIteratorHelper(xn(t)),
                  _step237;

              try {
                for (_iterator237.s(); !(_step237 = _iterator237.n()).done;) {
                  var _step237$value = _slicedToArray(_step237.value, 2),
                      _n155 = _step237$value[0],
                      _i121 = _step237$value[1];

                  this.setAttribute(_n155, _i121, e);
                }
              } catch (err) {
                _iterator237.e(err);
              } finally {
                _iterator237.f();
              }
            }
          }, {
            key: "removeAttribute",
            value: function removeAttribute(t, e) {
              if (this._assertWriterUsedCorrectly(), e instanceof ta) {
                var _n156 = e.getMinimalFlatRanges();

                var _iterator238 = _createForOfIteratorHelper(_n156),
                    _step238;

                try {
                  for (_iterator238.s(); !(_step238 = _iterator238.n()).done;) {
                    var _e162 = _step238.value;
                    Pc(this, t, null, _e162);
                  }
                } catch (err) {
                  _iterator238.e(err);
                } finally {
                  _iterator238.f();
                }
              } else Nc(this, t, null, e);
            }
          }, {
            key: "clearAttributes",
            value: function clearAttributes(t) {
              var _this140 = this;

              this._assertWriterUsedCorrectly();

              var e = function e(t) {
                var _iterator239 = _createForOfIteratorHelper(t.getAttributeKeys()),
                    _step239;

                try {
                  for (_iterator239.s(); !(_step239 = _iterator239.n()).done;) {
                    var _e163 = _step239.value;

                    _this140.removeAttribute(_e163, t);
                  }
                } catch (err) {
                  _iterator239.e(err);
                } finally {
                  _iterator239.f();
                }
              };

              if (t instanceof ta) {
                var _iterator240 = _createForOfIteratorHelper(t.getItems()),
                    _step240;

                try {
                  for (_iterator240.s(); !(_step240 = _iterator240.n()).done;) {
                    var _n157 = _step240.value;
                    e(_n157);
                  }
                } catch (err) {
                  _iterator240.e(err);
                } finally {
                  _iterator240.f();
                }
              } else e(t);
            }
          }, {
            key: "move",
            value: function move(t, e, n) {
              if (this._assertWriterUsedCorrectly(), !(t instanceof ta)) throw new rn["default"]("writer-move-invalid-range", this);
              if (!t.isFlat) throw new rn["default"]("writer-move-range-not-flat", this);

              var i = Ks._createAt(e, n);

              if (i.isEqual(t.start)) return;
              if (this._addOperationForAffectedMarkers("move", t), !Bc(t.root, i.root)) throw new rn["default"]("writer-move-different-document", this);
              var o = t.root.document ? t.root.document.version : null,
                  r = new Cc(t.start, t.end.offset - t.start.offset, i, o);
              this.batch.addOperation(r), this.model.applyOperation(r);
            }
          }, {
            key: "remove",
            value: function remove(t) {
              this._assertWriterUsedCorrectly();

              var e = (t instanceof ta ? t : ta._createOn(t)).getMinimalFlatRanges().reverse();

              var _iterator241 = _createForOfIteratorHelper(e),
                  _step241;

              try {
                for (_iterator241.s(); !(_step241 = _iterator241.n()).done;) {
                  var _t171 = _step241.value;
                  this._addOperationForAffectedMarkers("move", _t171), jc(_t171.start, _t171.end.offset - _t171.start.offset, this.batch, this.model);
                }
              } catch (err) {
                _iterator241.e(err);
              } finally {
                _iterator241.f();
              }
            }
          }, {
            key: "merge",
            value: function merge(t) {
              this._assertWriterUsedCorrectly();

              var e = t.nodeBefore,
                  n = t.nodeAfter;
              if (this._addOperationForAffectedMarkers("merge", t), !(e instanceof Ys)) throw new rn["default"]("writer-merge-no-element-before", this);
              if (!(n instanceof Ys)) throw new rn["default"]("writer-merge-no-element-after", this);
              t.root.document ? this._merge(t) : this._mergeDetached(t);
            }
          }, {
            key: "createPositionFromPath",
            value: function createPositionFromPath(t, e, n) {
              return this.model.createPositionFromPath(t, e, n);
            }
          }, {
            key: "createPositionAt",
            value: function createPositionAt(t, e) {
              return this.model.createPositionAt(t, e);
            }
          }, {
            key: "createPositionAfter",
            value: function createPositionAfter(t) {
              return this.model.createPositionAfter(t);
            }
          }, {
            key: "createPositionBefore",
            value: function createPositionBefore(t) {
              return this.model.createPositionBefore(t);
            }
          }, {
            key: "createRange",
            value: function createRange(t, e) {
              return this.model.createRange(t, e);
            }
          }, {
            key: "createRangeIn",
            value: function createRangeIn(t) {
              return this.model.createRangeIn(t);
            }
          }, {
            key: "createRangeOn",
            value: function createRangeOn(t) {
              return this.model.createRangeOn(t);
            }
          }, {
            key: "createSelection",
            value: function createSelection(t, e, n) {
              return this.model.createSelection(t, e, n);
            }
          }, {
            key: "_mergeDetached",
            value: function _mergeDetached(t) {
              var e = t.nodeBefore,
                  n = t.nodeAfter;
              this.move(ta._createIn(n), Ks._createAt(e, "end")), this.remove(n);
            }
          }, {
            key: "_merge",
            value: function _merge(t) {
              var e = Ks._createAt(t.nodeBefore, "end"),
                  n = Ks._createAt(t.nodeAfter, 0),
                  i = t.root.document.graveyard,
                  o = new Ks(i, [0]),
                  r = t.root.document.version,
                  s = new Ic(n, t.nodeAfter.maxOffset, e, o, r);

              this.batch.addOperation(s), this.model.applyOperation(s);
            }
          }, {
            key: "rename",
            value: function rename(t, e) {
              if (this._assertWriterUsedCorrectly(), !(t instanceof Ys)) throw new rn["default"]("writer-rename-not-element-instance", this);
              var n = t.root.document ? t.root.document.version : null,
                  i = new Ec(Ks._createBefore(t), t.name, e, n);
              this.batch.addOperation(i), this.model.applyOperation(i);
            }
          }, {
            key: "split",
            value: function split(t, e) {
              this._assertWriterUsedCorrectly();

              var n,
                  i,
                  o = t.parent;
              if (!o.parent) throw new rn["default"]("writer-split-element-no-parent", this);
              if (e || (e = o.parent), !t.parent.getAncestors({
                includeSelf: !0
              }).includes(e)) throw new rn["default"]("writer-split-invalid-limit-element", this);

              do {
                var _e164 = o.root.document ? o.root.document.version : null,
                    _r31 = o.maxOffset - t.offset,
                    _s18 = Oc.getInsertionPosition(t),
                    _a10 = new Oc(t, _r31, _s18, null, _e164);

                this.batch.addOperation(_a10), this.model.applyOperation(_a10), n || i || (n = o, i = t.parent.nextSibling), o = (t = this.createPositionAfter(t.parent)).parent;
              } while (o !== e);

              return {
                position: t,
                range: new ta(Ks._createAt(n, "end"), Ks._createAt(i, 0))
              };
            }
          }, {
            key: "wrap",
            value: function wrap(t, e) {
              if (this._assertWriterUsedCorrectly(), !t.isFlat) throw new rn["default"]("writer-wrap-range-not-flat", this);
              var n = e instanceof Ys ? e : new Ys(e);
              if (n.childCount > 0) throw new rn["default"]("writer-wrap-element-not-empty", this);
              if (null !== n.parent) throw new rn["default"]("writer-wrap-element-attached", this);
              this.insert(n, t.start);
              var i = new ta(t.start.getShiftedBy(1), t.end.getShiftedBy(1));
              this.move(i, Ks._createAt(n, 0));
            }
          }, {
            key: "unwrap",
            value: function unwrap(t) {
              if (this._assertWriterUsedCorrectly(), null === t.parent) throw new rn["default"]("writer-unwrap-element-no-parent", this);
              this.move(ta._createIn(t), this.createPositionAfter(t)), this.remove(t);
            }
          }, {
            key: "addMarker",
            value: function addMarker(t, e) {
              if (this._assertWriterUsedCorrectly(), !e || "boolean" != typeof e.usingOperation) throw new rn["default"]("writer-addmarker-no-usingoperation", this);
              var n = e.usingOperation,
                  i = e.range,
                  o = void 0 !== e.affectsData && e.affectsData;
              if (this.model.markers.has(t)) throw new rn["default"]("writer-addmarker-marker-exists", this);
              if (!i) throw new rn["default"]("writer-addmarker-no-range", this);
              return n ? (Dc(this, t, null, i, o), this.model.markers.get(t)) : this.model.markers._set(t, i, n, o);
            }
          }, {
            key: "updateMarker",
            value: function updateMarker(t, e) {
              this._assertWriterUsedCorrectly();

              var n = "string" == typeof t ? t : t.name,
                  i = this.model.markers.get(n);
              if (!i) throw new rn["default"]("writer-updatemarker-marker-not-exists", this);
              if (!e) return void this.model.markers._refresh(i);
              var o = "boolean" == typeof e.usingOperation,
                  r = "boolean" == typeof e.affectsData,
                  s = r ? e.affectsData : i.affectsData;
              if (!o && !e.range && !r) throw new rn["default"]("writer-updatemarker-wrong-options", this);
              var a = i.getRange(),
                  c = e.range ? e.range : a;
              o && e.usingOperation !== i.managedUsingOperations ? e.usingOperation ? Dc(this, n, null, c, s) : (Dc(this, n, a, null, s), this.model.markers._set(n, c, void 0, s)) : i.managedUsingOperations ? Dc(this, n, a, c, s) : this.model.markers._set(n, c, void 0, s);
            }
          }, {
            key: "removeMarker",
            value: function removeMarker(t) {
              this._assertWriterUsedCorrectly();

              var e = "string" == typeof t ? t : t.name;
              if (!this.model.markers.has(e)) throw new rn["default"]("writer-removemarker-no-marker", this);
              var n = this.model.markers.get(e);
              n.managedUsingOperations ? Dc(this, e, n.getRange(), null, n.affectsData) : this.model.markers._remove(e);
            }
          }, {
            key: "setSelection",
            value: function setSelection(t, e, n) {
              this._assertWriterUsedCorrectly(), this.model.document.selection._setTo(t, e, n);
            }
          }, {
            key: "setSelectionFocus",
            value: function setSelectionFocus(t, e) {
              this._assertWriterUsedCorrectly(), this.model.document.selection._setFocus(t, e);
            }
          }, {
            key: "setSelectionAttribute",
            value: function setSelectionAttribute(t, e) {
              if (this._assertWriterUsedCorrectly(), "string" == typeof t) this._setSelectionAttribute(t, e);else {
                var _iterator242 = _createForOfIteratorHelper(xn(t)),
                    _step242;

                try {
                  for (_iterator242.s(); !(_step242 = _iterator242.n()).done;) {
                    var _step242$value = _slicedToArray(_step242.value, 2),
                        _e165 = _step242$value[0],
                        _n158 = _step242$value[1];

                    this._setSelectionAttribute(_e165, _n158);
                  }
                } catch (err) {
                  _iterator242.e(err);
                } finally {
                  _iterator242.f();
                }
              }
            }
          }, {
            key: "removeSelectionAttribute",
            value: function removeSelectionAttribute(t) {
              if (this._assertWriterUsedCorrectly(), "string" == typeof t) this._removeSelectionAttribute(t);else {
                var _iterator243 = _createForOfIteratorHelper(t),
                    _step243;

                try {
                  for (_iterator243.s(); !(_step243 = _iterator243.n()).done;) {
                    var _e166 = _step243.value;

                    this._removeSelectionAttribute(_e166);
                  }
                } catch (err) {
                  _iterator243.e(err);
                } finally {
                  _iterator243.f();
                }
              }
            }
          }, {
            key: "overrideSelectionGravity",
            value: function overrideSelectionGravity() {
              return this.model.document.selection._overrideGravity();
            }
          }, {
            key: "restoreSelectionGravity",
            value: function restoreSelectionGravity(t) {
              this.model.document.selection._restoreGravity(t);
            }
          }, {
            key: "_setSelectionAttribute",
            value: function _setSelectionAttribute(t, e) {
              var n = this.model.document.selection;

              if (n.isCollapsed && n.anchor.parent.isEmpty) {
                var _i122 = ma._getStoreAttributeKey(t);

                this.setAttribute(_i122, e, n.anchor.parent);
              }

              n._setAttribute(t, e);
            }
          }, {
            key: "_removeSelectionAttribute",
            value: function _removeSelectionAttribute(t) {
              var e = this.model.document.selection;

              if (e.isCollapsed && e.anchor.parent.isEmpty) {
                var _n159 = ma._getStoreAttributeKey(t);

                this.removeAttribute(_n159, e.anchor.parent);
              }

              e._removeAttribute(t);
            }
          }, {
            key: "_assertWriterUsedCorrectly",
            value: function _assertWriterUsedCorrectly() {
              if (this.model._currentWriter !== this) throw new rn["default"]("writer-incorrect-use", this);
            }
          }, {
            key: "_addOperationForAffectedMarkers",
            value: function _addOperationForAffectedMarkers(t, e) {
              var _iterator244 = _createForOfIteratorHelper(this.model.markers),
                  _step244;

              try {
                for (_iterator244.s(); !(_step244 = _iterator244.n()).done;) {
                  var _n160 = _step244.value;
                  if (!_n160.managedUsingOperations) continue;

                  var _i123 = _n160.getRange();

                  var _o52 = !1;

                  if ("move" === t) _o52 = e.containsPosition(_i123.start) || e.start.isEqual(_i123.start) || e.containsPosition(_i123.end) || e.end.isEqual(_i123.end);else {
                    var _t172 = e.nodeBefore,
                        _n161 = e.nodeAfter,
                        _r32 = _i123.start.parent == _t172 && _i123.start.isAtEnd,
                        _s19 = _i123.end.parent == _n161 && 0 == _i123.end.offset,
                        _a11 = _i123.end.nodeAfter == _n161,
                        _c3 = _i123.start.nodeAfter == _n161;

                    _o52 = _r32 || _s19 || _a11 || _c3;
                  }
                  _o52 && this.updateMarker(_n160.name, {
                    range: _i123
                  });
                }
              } catch (err) {
                _iterator244.e(err);
              } finally {
                _iterator244.f();
              }
            }
          }]);

          return Mc;
        }();

        function Pc(t, e, n, i) {
          var o = t.model,
              r = o.document;
          var s,
              a,
              c,
              l = i.start;

          var _iterator245 = _createForOfIteratorHelper(i.getWalker({
            shallow: !0
          })),
              _step245;

          try {
            for (_iterator245.s(); !(_step245 = _iterator245.n()).done;) {
              var _t173 = _step245.value;
              c = _t173.item.getAttribute(e), s && a != c && (a != n && d(), l = s), s = _t173.nextPosition, a = c;
            }
          } catch (err) {
            _iterator245.e(err);
          } finally {
            _iterator245.f();
          }

          function d() {
            var i = new ta(l, s),
                c = i.root.document ? r.version : null,
                d = new yc(i, e, a, n, c);
            t.batch.addOperation(d), o.applyOperation(d);
          }

          s instanceof Ks && s != l && a != n && d();
        }

        function Nc(t, e, n, i) {
          var o = t.model,
              r = o.document,
              s = i.getAttribute(e);
          var a, c;

          if (s != n) {
            if (i.root === i) {
              var _t174 = i.document ? r.version : null;

              c = new Sc(i, e, s, n, _t174);
            } else {
              var _o53 = (a = new ta(Ks._createBefore(i), t.createPositionAfter(i))).root.document ? r.version : null;

              c = new yc(a, e, s, n, _o53);
            }

            t.batch.addOperation(c), o.applyOperation(c);
          }
        }

        function Dc(t, e, n, i, o) {
          var r = t.model,
              s = r.document,
              a = new Ac(e, n, i, r.markers, o, s.version);
          t.batch.addOperation(a), r.applyOperation(a);
        }

        function jc(t, e, n, i) {
          var o;

          if (t.root.document) {
            var _n162 = i.document,
                _r33 = new Ks(_n162.graveyard, [0]);

            o = new Cc(t, e, _r33, _n162.version);
          } else o = new xc(t, e);

          n.addOperation(o), i.applyOperation(o);
        }

        function Bc(t, e) {
          return t === e || t instanceof Rc && e instanceof Rc;
        }

        var Lc = /*#__PURE__*/function () {
          function Lc(t) {
            _classCallCheck(this, Lc);

            this._markerCollection = t, this._changesInElement = new Map(), this._elementSnapshots = new Map(), this._changedMarkers = new Map(), this._changeCount = 0, this._cachedChanges = null, this._cachedChangesWithGraveyard = null;
          }

          _createClass(Lc, [{
            key: "isEmpty",
            get: function get() {
              return 0 == this._changesInElement.size && 0 == this._changedMarkers.size;
            }
          }, {
            key: "refreshItem",
            value: function refreshItem(t) {
              if (this._isInInsertedElement(t.parent)) return;
              this._markRemove(t.parent, t.startOffset, t.offsetSize), this._markInsert(t.parent, t.startOffset, t.offsetSize);

              var e = ta._createOn(t);

              var _iterator246 = _createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(e)),
                  _step246;

              try {
                for (_iterator246.s(); !(_step246 = _iterator246.n()).done;) {
                  var _t175 = _step246.value;

                  var _e167 = _t175.getRange();

                  this.bufferMarkerChange(_t175.name, _e167, _e167, _t175.affectsData);
                }
              } catch (err) {
                _iterator246.e(err);
              } finally {
                _iterator246.f();
              }

              this._cachedChanges = null;
            }
          }, {
            key: "bufferOperation",
            value: function bufferOperation(t) {
              switch (t.type) {
                case "insert":
                  if (this._isInInsertedElement(t.position.parent)) return;

                  this._markInsert(t.position.parent, t.position.offset, t.nodes.maxOffset);

                  break;

                case "addAttribute":
                case "removeAttribute":
                case "changeAttribute":
                  var _iterator247 = _createForOfIteratorHelper(t.range.getItems({
                    shallow: !0
                  })),
                      _step247;

                  try {
                    for (_iterator247.s(); !(_step247 = _iterator247.n()).done;) {
                      var _e168 = _step247.value;
                      this._isInInsertedElement(_e168.parent) || this._markAttribute(_e168);
                    }
                  } catch (err) {
                    _iterator247.e(err);
                  } finally {
                    _iterator247.f();
                  }

                  break;

                case "remove":
                case "move":
                case "reinsert":
                  {
                    if (t.sourcePosition.isEqual(t.targetPosition) || t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition)) return;

                    var _e169 = this._isInInsertedElement(t.sourcePosition.parent),
                        _n163 = this._isInInsertedElement(t.targetPosition.parent);

                    _e169 || this._markRemove(t.sourcePosition.parent, t.sourcePosition.offset, t.howMany), _n163 || this._markInsert(t.targetPosition.parent, t.getMovedRangeStart().offset, t.howMany);
                    break;
                  }

                case "rename":
                  {
                    if (this._isInInsertedElement(t.position.parent)) return;
                    this._markRemove(t.position.parent, t.position.offset, 1), this._markInsert(t.position.parent, t.position.offset, 1);

                    var _e170 = ta._createFromPositionAndShift(t.position, 1);

                    var _iterator248 = _createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(_e170)),
                        _step248;

                    try {
                      for (_iterator248.s(); !(_step248 = _iterator248.n()).done;) {
                        var _t176 = _step248.value;

                        var _e171 = _t176.getRange();

                        this.bufferMarkerChange(_t176.name, _e171, _e171, _t176.affectsData);
                      }
                    } catch (err) {
                      _iterator248.e(err);
                    } finally {
                      _iterator248.f();
                    }

                    break;
                  }

                case "split":
                  {
                    var _e172 = t.splitPosition.parent;
                    this._isInInsertedElement(_e172) || this._markRemove(_e172, t.splitPosition.offset, t.howMany), this._isInInsertedElement(t.insertionPosition.parent) || this._markInsert(t.insertionPosition.parent, t.insertionPosition.offset, 1), t.graveyardPosition && this._markRemove(t.graveyardPosition.parent, t.graveyardPosition.offset, 1);
                    break;
                  }

                case "merge":
                  {
                    var _e173 = t.sourcePosition.parent;
                    this._isInInsertedElement(_e173.parent) || this._markRemove(_e173.parent, _e173.startOffset, 1);
                    var _n164 = t.graveyardPosition.parent;

                    this._markInsert(_n164, t.graveyardPosition.offset, 1);

                    var _i124 = t.targetPosition.parent;
                    this._isInInsertedElement(_i124) || this._markInsert(_i124, t.targetPosition.offset, _e173.maxOffset);
                    break;
                  }
              }

              this._cachedChanges = null;
            }
          }, {
            key: "bufferMarkerChange",
            value: function bufferMarkerChange(t, e, n, i) {
              var o = this._changedMarkers.get(t);

              o ? (o.newRange = n, o.affectsData = i, null == o.oldRange && null == o.newRange && this._changedMarkers["delete"](t)) : this._changedMarkers.set(t, {
                oldRange: e,
                newRange: n,
                affectsData: i
              });
            }
          }, {
            key: "getMarkersToRemove",
            value: function getMarkersToRemove() {
              var t = [];

              var _iterator249 = _createForOfIteratorHelper(this._changedMarkers),
                  _step249;

              try {
                for (_iterator249.s(); !(_step249 = _iterator249.n()).done;) {
                  var _step249$value = _slicedToArray(_step249.value, 2),
                      _e174 = _step249$value[0],
                      _n165 = _step249$value[1];

                  null != _n165.oldRange && t.push({
                    name: _e174,
                    range: _n165.oldRange
                  });
                }
              } catch (err) {
                _iterator249.e(err);
              } finally {
                _iterator249.f();
              }

              return t;
            }
          }, {
            key: "getMarkersToAdd",
            value: function getMarkersToAdd() {
              var t = [];

              var _iterator250 = _createForOfIteratorHelper(this._changedMarkers),
                  _step250;

              try {
                for (_iterator250.s(); !(_step250 = _iterator250.n()).done;) {
                  var _step250$value = _slicedToArray(_step250.value, 2),
                      _e175 = _step250$value[0],
                      _n166 = _step250$value[1];

                  null != _n166.newRange && t.push({
                    name: _e175,
                    range: _n166.newRange
                  });
                }
              } catch (err) {
                _iterator250.e(err);
              } finally {
                _iterator250.f();
              }

              return t;
            }
          }, {
            key: "getChangedMarkers",
            value: function getChangedMarkers() {
              return Array.from(this._changedMarkers).map(function (t) {
                return {
                  name: t[0],
                  data: {
                    oldRange: t[1].oldRange,
                    newRange: t[1].newRange
                  }
                };
              });
            }
          }, {
            key: "hasDataChanges",
            value: function hasDataChanges() {
              var _iterator251 = _createForOfIteratorHelper(this._changedMarkers),
                  _step251;

              try {
                for (_iterator251.s(); !(_step251 = _iterator251.n()).done;) {
                  var _step251$value = _slicedToArray(_step251.value, 2),
                      _t177 = _step251$value[1];

                  if (_t177.affectsData) return !0;
                }
              } catch (err) {
                _iterator251.e(err);
              } finally {
                _iterator251.f();
              }

              return this._changesInElement.size > 0;
            }
          }, {
            key: "getChanges",
            value: function getChanges() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
                includeChangesInGraveyard: !1
              };
              if (this._cachedChanges) return t.includeChangesInGraveyard ? this._cachedChangesWithGraveyard.slice() : this._cachedChanges.slice();
              var e = [];

              var _iterator252 = _createForOfIteratorHelper(this._changesInElement.keys()),
                  _step252;

              try {
                for (_iterator252.s(); !(_step252 = _iterator252.n()).done;) {
                  var _t179 = _step252.value;

                  var _n168 = this._changesInElement.get(_t179).sort(function (t, e) {
                    return t.offset === e.offset ? t.type != e.type ? "remove" == t.type ? -1 : 1 : 0 : t.offset < e.offset ? -1 : 1;
                  }),
                      _i126 = this._elementSnapshots.get(_t179),
                      _o55 = zc(_t179.getChildren()),
                      _r35 = Fc(_i126.length, _n168);

                  var _s21 = 0,
                      _a13 = 0;

                  var _iterator254 = _createForOfIteratorHelper(_r35),
                      _step254;

                  try {
                    for (_iterator254.s(); !(_step254 = _iterator254.n()).done;) {
                      var _n169 = _step254.value;
                      if ("i" === _n169) e.push(this._getInsertDiff(_t179, _s21, _o55[_s21].name)), _s21++;else if ("r" === _n169) e.push(this._getRemoveDiff(_t179, _s21, _i126[_a13].name)), _a13++;else if ("a" === _n169) {
                        var _e177;

                        var _n170 = _o55[_s21].attributes,
                            _r36 = _i126[_a13].attributes;

                        var _c4 = void 0;

                        if ("$text" == _o55[_s21].name) _c4 = new ta(Ks._createAt(_t179, _s21), Ks._createAt(_t179, _s21 + 1));else {
                          var _e176 = _t179.offsetToIndex(_s21);

                          _c4 = new ta(Ks._createAt(_t179, _s21), Ks._createAt(_t179.getChild(_e176), 0));
                        }
                        (_e177 = e).push.apply(_e177, _toConsumableArray(this._getAttributesDiff(_c4, _r36, _n170))), _s21++, _a13++;
                      } else _s21++, _a13++;
                    }
                  } catch (err) {
                    _iterator254.e(err);
                  } finally {
                    _iterator254.f();
                  }
                }
              } catch (err) {
                _iterator252.e(err);
              } finally {
                _iterator252.f();
              }

              e.sort(function (t, e) {
                return t.position.root != e.position.root ? t.position.root.rootName < e.position.root.rootName ? -1 : 1 : t.position.isEqual(e.position) ? t.changeCount - e.changeCount : t.position.isBefore(e.position) ? -1 : 1;
              });

              for (var _t178 = 1, _n167 = 0; _t178 < e.length; _t178++) {
                var _i125 = e[_n167],
                    _o54 = e[_t178],
                    _r34 = "remove" == _i125.type && "remove" == _o54.type && "$text" == _i125.name && "$text" == _o54.name && _i125.position.isEqual(_o54.position),
                    _s20 = "insert" == _i125.type && "insert" == _o54.type && "$text" == _i125.name && "$text" == _o54.name && _i125.position.parent == _o54.position.parent && _i125.position.offset + _i125.length == _o54.position.offset,
                    _a12 = "attribute" == _i125.type && "attribute" == _o54.type && _i125.position.parent == _o54.position.parent && _i125.range.isFlat && _o54.range.isFlat && _i125.position.offset + _i125.length == _o54.position.offset && _i125.attributeKey == _o54.attributeKey && _i125.attributeOldValue == _o54.attributeOldValue && _i125.attributeNewValue == _o54.attributeNewValue;

                _r34 || _s20 || _a12 ? (_i125.length++, _a12 && (_i125.range.end = _i125.range.end.getShiftedBy(1)), e[_t178] = null) : _n167 = _t178;
              }

              e = e.filter(function (t) {
                return t;
              });

              var _iterator253 = _createForOfIteratorHelper(e),
                  _step253;

              try {
                for (_iterator253.s(); !(_step253 = _iterator253.n()).done;) {
                  var _t180 = _step253.value;
                  delete _t180.changeCount, "attribute" == _t180.type && (delete _t180.position, delete _t180.length);
                }
              } catch (err) {
                _iterator253.e(err);
              } finally {
                _iterator253.f();
              }

              return this._changeCount = 0, this._cachedChangesWithGraveyard = e.slice(), this._cachedChanges = e.filter(Vc), t.includeChangesInGraveyard ? this._cachedChangesWithGraveyard : this._cachedChanges;
            }
          }, {
            key: "reset",
            value: function reset() {
              this._changesInElement.clear(), this._elementSnapshots.clear(), this._changedMarkers.clear(), this._cachedChanges = null;
            }
          }, {
            key: "_markInsert",
            value: function _markInsert(t, e, n) {
              var i = {
                type: "insert",
                offset: e,
                howMany: n,
                count: this._changeCount++
              };

              this._markChange(t, i);
            }
          }, {
            key: "_markRemove",
            value: function _markRemove(t, e, n) {
              var i = {
                type: "remove",
                offset: e,
                howMany: n,
                count: this._changeCount++
              };
              this._markChange(t, i), this._removeAllNestedChanges(t, e, n);
            }
          }, {
            key: "_markAttribute",
            value: function _markAttribute(t) {
              var e = {
                type: "attribute",
                offset: t.startOffset,
                howMany: t.offsetSize,
                count: this._changeCount++
              };

              this._markChange(t.parent, e);
            }
          }, {
            key: "_markChange",
            value: function _markChange(t, e) {
              this._makeSnapshot(t);

              var n = this._getChangesForElement(t);

              this._handleChange(e, n), n.push(e);

              for (var _t181 = 0; _t181 < n.length; _t181++) {
                n[_t181].howMany < 1 && (n.splice(_t181, 1), _t181--);
              }
            }
          }, {
            key: "_getChangesForElement",
            value: function _getChangesForElement(t) {
              var e;
              return this._changesInElement.has(t) ? e = this._changesInElement.get(t) : (e = [], this._changesInElement.set(t, e)), e;
            }
          }, {
            key: "_makeSnapshot",
            value: function _makeSnapshot(t) {
              this._elementSnapshots.has(t) || this._elementSnapshots.set(t, zc(t.getChildren()));
            }
          }, {
            key: "_handleChange",
            value: function _handleChange(t, e) {
              t.nodesToHandle = t.howMany;

              var _iterator255 = _createForOfIteratorHelper(e),
                  _step255;

              try {
                for (_iterator255.s(); !(_step255 = _iterator255.n()).done;) {
                  var _n171 = _step255.value;

                  var _i127 = t.offset + t.howMany,
                      _o56 = _n171.offset + _n171.howMany;

                  if ("insert" == t.type && ("insert" == _n171.type && (t.offset <= _n171.offset ? _n171.offset += t.howMany : t.offset < _o56 && (_n171.howMany += t.nodesToHandle, t.nodesToHandle = 0)), "remove" == _n171.type && t.offset < _n171.offset && (_n171.offset += t.howMany), "attribute" == _n171.type)) if (t.offset <= _n171.offset) _n171.offset += t.howMany;else if (t.offset < _o56) {
                    var _o57 = _n171.howMany;
                    _n171.howMany = t.offset - _n171.offset, e.unshift({
                      type: "attribute",
                      offset: _i127,
                      howMany: _o57 - _n171.howMany,
                      count: this._changeCount++
                    });
                  }

                  if ("remove" == t.type) {
                    if ("insert" == _n171.type) if (_i127 <= _n171.offset) _n171.offset -= t.howMany;else if (_i127 <= _o56) {
                      if (t.offset < _n171.offset) {
                        var _e178 = _i127 - _n171.offset;

                        _n171.offset = t.offset, _n171.howMany -= _e178, t.nodesToHandle -= _e178;
                      } else _n171.howMany -= t.nodesToHandle, t.nodesToHandle = 0;
                    } else if (t.offset <= _n171.offset) t.nodesToHandle -= _n171.howMany, _n171.howMany = 0;else if (t.offset < _o56) {
                      var _e179 = _o56 - t.offset;

                      _n171.howMany -= _e179, t.nodesToHandle -= _e179;
                    }
                    if ("remove" == _n171.type && (_i127 <= _n171.offset ? _n171.offset -= t.howMany : t.offset < _n171.offset && (t.nodesToHandle += _n171.howMany, _n171.howMany = 0)), "attribute" == _n171.type) if (_i127 <= _n171.offset) _n171.offset -= t.howMany;else if (t.offset < _n171.offset) {
                      var _e180 = _i127 - _n171.offset;

                      _n171.offset = t.offset, _n171.howMany -= _e180;
                    } else if (t.offset < _o56) if (_i127 <= _o56) {
                      var _i128 = _n171.howMany;
                      _n171.howMany = t.offset - _n171.offset;

                      var _o58 = _i128 - _n171.howMany - t.nodesToHandle;

                      e.unshift({
                        type: "attribute",
                        offset: t.offset,
                        howMany: _o58,
                        count: this._changeCount++
                      });
                    } else _n171.howMany -= _o56 - t.offset;
                  }

                  if ("attribute" == t.type) {
                    if ("insert" == _n171.type) if (t.offset < _n171.offset && _i127 > _n171.offset) {
                      if (_i127 > _o56) {
                        var _t182 = {
                          type: "attribute",
                          offset: _o56,
                          howMany: _i127 - _o56,
                          count: this._changeCount++
                        };
                        this._handleChange(_t182, e), e.push(_t182);
                      }

                      t.nodesToHandle = _n171.offset - t.offset, t.howMany = t.nodesToHandle;
                    } else t.offset >= _n171.offset && t.offset < _o56 && (_i127 > _o56 ? (t.nodesToHandle = _i127 - _o56, t.offset = _o56) : t.nodesToHandle = 0);

                    if ("remove" == _n171.type && t.offset < _n171.offset && _i127 > _n171.offset) {
                      var _o59 = {
                        type: "attribute",
                        offset: _n171.offset,
                        howMany: _i127 - _n171.offset,
                        count: this._changeCount++
                      };
                      this._handleChange(_o59, e), e.push(_o59), t.nodesToHandle = _n171.offset - t.offset, t.howMany = t.nodesToHandle;
                    }

                    "attribute" == _n171.type && (t.offset >= _n171.offset && _i127 <= _o56 ? (t.nodesToHandle = 0, t.howMany = 0, t.offset = 0) : t.offset <= _n171.offset && _i127 >= _o56 && (_n171.howMany = 0));
                  }
                }
              } catch (err) {
                _iterator255.e(err);
              } finally {
                _iterator255.f();
              }

              t.howMany = t.nodesToHandle, delete t.nodesToHandle;
            }
          }, {
            key: "_getInsertDiff",
            value: function _getInsertDiff(t, e, n) {
              return {
                type: "insert",
                position: Ks._createAt(t, e),
                name: n,
                length: 1,
                changeCount: this._changeCount++
              };
            }
          }, {
            key: "_getRemoveDiff",
            value: function _getRemoveDiff(t, e, n) {
              return {
                type: "remove",
                position: Ks._createAt(t, e),
                name: n,
                length: 1,
                changeCount: this._changeCount++
              };
            }
          }, {
            key: "_getAttributesDiff",
            value: function _getAttributesDiff(t, e, n) {
              var i = [];
              n = new Map(n);

              var _iterator256 = _createForOfIteratorHelper(e),
                  _step256;

              try {
                for (_iterator256.s(); !(_step256 = _iterator256.n()).done;) {
                  var _step256$value = _slicedToArray(_step256.value, 2),
                      _o60 = _step256$value[0],
                      _r37 = _step256$value[1];

                  var _e181 = n.has(_o60) ? n.get(_o60) : null;

                  _e181 !== _r37 && i.push({
                    type: "attribute",
                    position: t.start,
                    range: t.clone(),
                    length: 1,
                    attributeKey: _o60,
                    attributeOldValue: _r37,
                    attributeNewValue: _e181,
                    changeCount: this._changeCount++
                  }), n["delete"](_o60);
                }
              } catch (err) {
                _iterator256.e(err);
              } finally {
                _iterator256.f();
              }

              var _iterator257 = _createForOfIteratorHelper(n),
                  _step257;

              try {
                for (_iterator257.s(); !(_step257 = _iterator257.n()).done;) {
                  var _step257$value = _slicedToArray(_step257.value, 2),
                      _e182 = _step257$value[0],
                      _o61 = _step257$value[1];

                  i.push({
                    type: "attribute",
                    position: t.start,
                    range: t.clone(),
                    length: 1,
                    attributeKey: _e182,
                    attributeOldValue: null,
                    attributeNewValue: _o61,
                    changeCount: this._changeCount++
                  });
                }
              } catch (err) {
                _iterator257.e(err);
              } finally {
                _iterator257.f();
              }

              return i;
            }
          }, {
            key: "_isInInsertedElement",
            value: function _isInInsertedElement(t) {
              var e = t.parent;
              if (!e) return !1;

              var n = this._changesInElement.get(e),
                  i = t.startOffset;

              if (n) {
                var _iterator258 = _createForOfIteratorHelper(n),
                    _step258;

                try {
                  for (_iterator258.s(); !(_step258 = _iterator258.n()).done;) {
                    var _t183 = _step258.value;
                    if ("insert" == _t183.type && i >= _t183.offset && i < _t183.offset + _t183.howMany) return !0;
                  }
                } catch (err) {
                  _iterator258.e(err);
                } finally {
                  _iterator258.f();
                }
              }

              return this._isInInsertedElement(e);
            }
          }, {
            key: "_removeAllNestedChanges",
            value: function _removeAllNestedChanges(t, e, n) {
              var i = new ta(Ks._createAt(t, e), Ks._createAt(t, e + n));

              var _iterator259 = _createForOfIteratorHelper(i.getItems({
                shallow: !0
              })),
                  _step259;

              try {
                for (_iterator259.s(); !(_step259 = _iterator259.n()).done;) {
                  var _t184 = _step259.value;
                  _t184.is("element") && (this._elementSnapshots["delete"](_t184), this._changesInElement["delete"](_t184), this._removeAllNestedChanges(_t184, 0, _t184.maxOffset));
                }
              } catch (err) {
                _iterator259.e(err);
              } finally {
                _iterator259.f();
              }
            }
          }]);

          return Lc;
        }();

        function zc(t) {
          var e = [];

          var _iterator260 = _createForOfIteratorHelper(t),
              _step260;

          try {
            for (_iterator260.s(); !(_step260 = _iterator260.n()).done;) {
              var _n172 = _step260.value;
              if (_n172.is("$text")) for (var _t185 = 0; _t185 < _n172.data.length; _t185++) {
                e.push({
                  name: "$text",
                  attributes: new Map(_n172.getAttributes())
                });
              } else e.push({
                name: _n172.name,
                attributes: new Map(_n172.getAttributes())
              });
            }
          } catch (err) {
            _iterator260.e(err);
          } finally {
            _iterator260.f();
          }

          return e;
        }

        function Fc(t, e) {
          var n = [];
          var i = 0,
              o = 0;

          var _iterator261 = _createForOfIteratorHelper(e),
              _step261;

          try {
            for (_iterator261.s(); !(_step261 = _iterator261.n()).done;) {
              var _t186 = _step261.value;

              if (_t186.offset > i) {
                for (var _e184 = 0; _e184 < _t186.offset - i; _e184++) {
                  n.push("e");
                }

                o += _t186.offset - i;
              }

              if ("insert" == _t186.type) {
                for (var _e185 = 0; _e185 < _t186.howMany; _e185++) {
                  n.push("i");
                }

                i = _t186.offset + _t186.howMany;
              } else if ("remove" == _t186.type) {
                for (var _e186 = 0; _e186 < _t186.howMany; _e186++) {
                  n.push("r");
                }

                i = _t186.offset, o += _t186.howMany;
              } else n.push.apply(n, _toConsumableArray("a".repeat(_t186.howMany).split(""))), i = _t186.offset + _t186.howMany, o += _t186.howMany;
            }
          } catch (err) {
            _iterator261.e(err);
          } finally {
            _iterator261.f();
          }

          if (o < t) for (var _e183 = 0; _e183 < t - o - i; _e183++) {
            n.push("e");
          }
          return n;
        }

        function Vc(t) {
          var e = t.position && "$graveyard" == t.position.root.rootName,
              n = t.range && "$graveyard" == t.range.root.rootName;
          return !e && !n;
        }

        var Uc = /*#__PURE__*/function () {
          function Uc() {
            _classCallCheck(this, Uc);

            this._operations = [], this._undoPairs = new Map(), this._undoneOperations = new Set();
          }

          _createClass(Uc, [{
            key: "addOperation",
            value: function addOperation(t) {
              this._operations.includes(t) || this._operations.push(t);
            }
          }, {
            key: "getOperations",
            value: function getOperations() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.NEGATIVE_INFINITY;
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.POSITIVE_INFINITY;
              var n = [];

              var _iterator262 = _createForOfIteratorHelper(this._operations),
                  _step262;

              try {
                for (_iterator262.s(); !(_step262 = _iterator262.n()).done;) {
                  var _i129 = _step262.value;
                  _i129.baseVersion >= t && _i129.baseVersion < e && n.push(_i129);
                }
              } catch (err) {
                _iterator262.e(err);
              } finally {
                _iterator262.f();
              }

              return n;
            }
          }, {
            key: "getOperation",
            value: function getOperation(t) {
              var _iterator263 = _createForOfIteratorHelper(this._operations),
                  _step263;

              try {
                for (_iterator263.s(); !(_step263 = _iterator263.n()).done;) {
                  var _e187 = _step263.value;
                  if (_e187.baseVersion == t) return _e187;
                }
              } catch (err) {
                _iterator263.e(err);
              } finally {
                _iterator263.f();
              }
            }
          }, {
            key: "setOperationAsUndone",
            value: function setOperationAsUndone(t, e) {
              this._undoPairs.set(e, t), this._undoneOperations.add(t);
            }
          }, {
            key: "isUndoingOperation",
            value: function isUndoingOperation(t) {
              return this._undoPairs.has(t);
            }
          }, {
            key: "isUndoneOperation",
            value: function isUndoneOperation(t) {
              return this._undoneOperations.has(t);
            }
          }, {
            key: "getUndoneOperation",
            value: function getUndoneOperation(t) {
              return this._undoPairs.get(t);
            }
          }]);

          return Uc;
        }();

        function Hc(t, e) {
          return function (t) {
            return !!t && 1 == t.length && /[\ud800-\udbff]/.test(t);
          }(t.charAt(e - 1)) && function (t) {
            return !!t && 1 == t.length && /[\udc00-\udfff]/.test(t);
          }(t.charAt(e));
        }

        function qc(t, e) {
          return function (t) {
            return !!t && 1 == t.length && /[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t);
          }(t.charAt(e));
        }

        var Wc = "$graveyard";

        var $c = /*#__PURE__*/function () {
          function $c(t) {
            var _this141 = this;

            _classCallCheck(this, $c);

            this.model = t, this.version = 0, this.history = new Uc(this), this.selection = new ma(this), this.roots = new on["default"]({
              idProperty: "rootName"
            }), this.differ = new Lc(t.markers), this._postFixers = new Set(), this._hasSelectionChangedFromTheLastChangeBlock = !1, this.createRoot("$root", Wc), this.listenTo(t, "applyOperation", function (t, e) {
              var n = e[0];
              if (n.isDocumentOperation && n.baseVersion !== _this141.version) throw new rn["default"]("model-document-applyoperation-wrong-version", _this141, {
                operation: n
              });
            }, {
              priority: "highest"
            }), this.listenTo(t, "applyOperation", function (t, e) {
              var n = e[0];
              n.isDocumentOperation && _this141.differ.bufferOperation(n);
            }, {
              priority: "high"
            }), this.listenTo(t, "applyOperation", function (t, e) {
              var n = e[0];
              n.isDocumentOperation && (_this141.version++, _this141.history.addOperation(n));
            }, {
              priority: "low"
            }), this.listenTo(this.selection, "change", function () {
              _this141._hasSelectionChangedFromTheLastChangeBlock = !0;
            }), this.listenTo(t.markers, "update", function (t, e, n, i) {
              _this141.differ.bufferMarkerChange(e.name, n, i, e.affectsData), null === n && e.on("change", function (t, n) {
                _this141.differ.bufferMarkerChange(e.name, n, e.getRange(), e.affectsData);
              });
            });
          }

          _createClass($c, [{
            key: "graveyard",
            get: function get() {
              return this.getRoot(Wc);
            }
          }, {
            key: "createRoot",
            value: function createRoot() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "$root";
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "main";
              if (this.roots.get(e)) throw new rn["default"]("model-document-createroot-name-exists", this, {
                name: e
              });
              var n = new Rc(this, t, e);
              return this.roots.add(n), n;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.selection.destroy(), this.stopListening();
            }
          }, {
            key: "getRoot",
            value: function getRoot() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
              return this.roots.get(t);
            }
          }, {
            key: "getRootNames",
            value: function getRootNames() {
              return Array.from(this.roots, function (t) {
                return t.rootName;
              }).filter(function (t) {
                return t != Wc;
              });
            }
          }, {
            key: "registerPostFixer",
            value: function registerPostFixer(t) {
              this._postFixers.add(t);
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              var t = bn(this);
              return t.selection = "[engine.model.DocumentSelection]", t.model = "[engine.model.Model]", t;
            }
          }, {
            key: "_handleChangeBlock",
            value: function _handleChangeBlock(t) {
              this._hasDocumentChangedFromTheLastChangeBlock() && (this._callPostFixers(t), this.selection.refresh(), this.differ.hasDataChanges() ? this.fire("change:data", t.batch) : this.fire("change", t.batch), this.selection.refresh(), this.differ.reset()), this._hasSelectionChangedFromTheLastChangeBlock = !1;
            }
          }, {
            key: "_hasDocumentChangedFromTheLastChangeBlock",
            value: function _hasDocumentChangedFromTheLastChangeBlock() {
              return !this.differ.isEmpty || this._hasSelectionChangedFromTheLastChangeBlock;
            }
          }, {
            key: "_getDefaultRoot",
            value: function _getDefaultRoot() {
              var _iterator264 = _createForOfIteratorHelper(this.roots),
                  _step264;

              try {
                for (_iterator264.s(); !(_step264 = _iterator264.n()).done;) {
                  var _t187 = _step264.value;
                  if (_t187 !== this.graveyard) return _t187;
                }
              } catch (err) {
                _iterator264.e(err);
              } finally {
                _iterator264.f();
              }

              return this.graveyard;
            }
          }, {
            key: "_getDefaultRange",
            value: function _getDefaultRange() {
              var t = this._getDefaultRoot(),
                  e = this.model,
                  n = e.schema,
                  i = e.createPositionFromPath(t, [0]);

              return n.getNearestSelectionRange(i) || e.createRange(i);
            }
          }, {
            key: "_validateSelectionRange",
            value: function _validateSelectionRange(t) {
              return Yc(t.start) && Yc(t.end);
            }
          }, {
            key: "_callPostFixers",
            value: function _callPostFixers(t) {
              var e = !1;

              do {
                var _iterator265 = _createForOfIteratorHelper(this._postFixers),
                    _step265;

                try {
                  for (_iterator265.s(); !(_step265 = _iterator265.n()).done;) {
                    var _n173 = _step265.value;
                    if (this.selection.refresh(), e = _n173(t)) break;
                  }
                } catch (err) {
                  _iterator265.e(err);
                } finally {
                  _iterator265.f();
                }
              } while (e);
            }
          }]);

          return $c;
        }();

        function Yc(t) {
          var e = t.textNode;

          if (e) {
            var _n174 = e.data,
                _i130 = t.offset - e.startOffset;

            return !Hc(_n174, _i130) && !qc(_n174, _i130);
          }

          return !0;
        }

        Object(o["default"])($c, sn["default"]);

        var Jc = /*#__PURE__*/function (_Symbol$iterator12) {
          function Jc() {
            _classCallCheck(this, Jc);

            this._markers = new Map();
          }

          _createClass(Jc, [{
            key: _Symbol$iterator12,
            value: function value() {
              return this._markers.values();
            }
          }, {
            key: "has",
            value: function has(t) {
              var e = t instanceof Gc ? t.name : t;
              return this._markers.has(e);
            }
          }, {
            key: "get",
            value: function get(t) {
              return this._markers.get(t) || null;
            }
          }, {
            key: "_set",
            value: function _set(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
              var o = t instanceof Gc ? t.name : t;
              if (o.includes(",")) throw new rn["default"]("markercollection-incorrect-marker-name", this);

              var r = this._markers.get(o);

              if (r) {
                var _t188 = r.getRange();

                var _s22 = !1;

                return _t188.isEqual(e) || (r._attachLiveRange(fa.fromRange(e)), _s22 = !0), n != r.managedUsingOperations && (r._managedUsingOperations = n, _s22 = !0), "boolean" == typeof i && i != r.affectsData && (r._affectsData = i, _s22 = !0), _s22 && this.fire("update:" + o, r, _t188, e), r;
              }

              var s = fa.fromRange(e),
                  a = new Gc(o, s, n, i);
              return this._markers.set(o, a), this.fire("update:" + o, a, null, e), a;
            }
          }, {
            key: "_remove",
            value: function _remove(t) {
              var e = t instanceof Gc ? t.name : t,
                  n = this._markers.get(e);

              return !!n && (this._markers["delete"](e), this.fire("update:" + e, n, n.getRange(), null), this._destroyMarker(n), !0);
            }
          }, {
            key: "_refresh",
            value: function _refresh(t) {
              var e = t instanceof Gc ? t.name : t,
                  n = this._markers.get(e);

              if (!n) throw new rn["default"]("markercollection-refresh-marker-not-exists", this);
              var i = n.getRange();
              this.fire("update:" + e, n, i, i, n.managedUsingOperations, n.affectsData);
            }
          }, {
            key: "getMarkersAtPosition",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getMarkersAtPosition(t) {
              var _iterator266, _step266, _e188;

              return regeneratorRuntime.wrap(function getMarkersAtPosition$(_context64) {
                while (1) {
                  switch (_context64.prev = _context64.next) {
                    case 0:
                      _iterator266 = _createForOfIteratorHelper(this);
                      _context64.prev = 1;

                      _iterator266.s();

                    case 3:
                      if ((_step266 = _iterator266.n()).done) {
                        _context64.next = 11;
                        break;
                      }

                      _e188 = _step266.value;
                      _context64.t0 = _e188.getRange().containsPosition(t);

                      if (!_context64.t0) {
                        _context64.next = 9;
                        break;
                      }

                      _context64.next = 9;
                      return _e188;

                    case 9:
                      _context64.next = 3;
                      break;

                    case 11:
                      _context64.next = 16;
                      break;

                    case 13:
                      _context64.prev = 13;
                      _context64.t1 = _context64["catch"](1);

                      _iterator266.e(_context64.t1);

                    case 16:
                      _context64.prev = 16;

                      _iterator266.f();

                      return _context64.finish(16);

                    case 19:
                    case "end":
                      return _context64.stop();
                  }
                }
              }, getMarkersAtPosition, this, [[1, 13, 16, 19]]);
            })
          }, {
            key: "getMarkersIntersectingRange",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getMarkersIntersectingRange(t) {
              var _iterator267, _step267, _e189;

              return regeneratorRuntime.wrap(function getMarkersIntersectingRange$(_context65) {
                while (1) {
                  switch (_context65.prev = _context65.next) {
                    case 0:
                      _iterator267 = _createForOfIteratorHelper(this);
                      _context65.prev = 1;

                      _iterator267.s();

                    case 3:
                      if ((_step267 = _iterator267.n()).done) {
                        _context65.next = 11;
                        break;
                      }

                      _e189 = _step267.value;
                      _context65.t0 = null !== _e189.getRange().getIntersection(t);

                      if (!_context65.t0) {
                        _context65.next = 9;
                        break;
                      }

                      _context65.next = 9;
                      return _e189;

                    case 9:
                      _context65.next = 3;
                      break;

                    case 11:
                      _context65.next = 16;
                      break;

                    case 13:
                      _context65.prev = 13;
                      _context65.t1 = _context65["catch"](1);

                      _iterator267.e(_context65.t1);

                    case 16:
                      _context65.prev = 16;

                      _iterator267.f();

                      return _context65.finish(16);

                    case 19:
                    case "end":
                      return _context65.stop();
                  }
                }
              }, getMarkersIntersectingRange, this, [[1, 13, 16, 19]]);
            })
          }, {
            key: "destroy",
            value: function destroy() {
              var _iterator268 = _createForOfIteratorHelper(this._markers.values()),
                  _step268;

              try {
                for (_iterator268.s(); !(_step268 = _iterator268.n()).done;) {
                  var _t189 = _step268.value;

                  this._destroyMarker(_t189);
                }
              } catch (err) {
                _iterator268.e(err);
              } finally {
                _iterator268.f();
              }

              this._markers = null, this.stopListening();
            }
          }, {
            key: "getMarkersGroup",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getMarkersGroup(t) {
              var _iterator269, _step269, _e190;

              return regeneratorRuntime.wrap(function getMarkersGroup$(_context66) {
                while (1) {
                  switch (_context66.prev = _context66.next) {
                    case 0:
                      _iterator269 = _createForOfIteratorHelper(this._markers.values());
                      _context66.prev = 1;

                      _iterator269.s();

                    case 3:
                      if ((_step269 = _iterator269.n()).done) {
                        _context66.next = 11;
                        break;
                      }

                      _e190 = _step269.value;
                      _context66.t0 = _e190.name.startsWith(t + ":");

                      if (!_context66.t0) {
                        _context66.next = 9;
                        break;
                      }

                      _context66.next = 9;
                      return _e190;

                    case 9:
                      _context66.next = 3;
                      break;

                    case 11:
                      _context66.next = 16;
                      break;

                    case 13:
                      _context66.prev = 13;
                      _context66.t1 = _context66["catch"](1);

                      _iterator269.e(_context66.t1);

                    case 16:
                      _context66.prev = 16;

                      _iterator269.f();

                      return _context66.finish(16);

                    case 19:
                    case "end":
                      return _context66.stop();
                  }
                }
              }, getMarkersGroup, this, [[1, 13, 16, 19]]);
            })
          }, {
            key: "_destroyMarker",
            value: function _destroyMarker(t) {
              t.stopListening(), t._detachLiveRange();
            }
          }]);

          return Jc;
        }(Symbol.iterator);

        Object(o["default"])(Jc, sn["default"]);

        var Gc = /*#__PURE__*/function () {
          function Gc(t, e, n, i) {
            _classCallCheck(this, Gc);

            this.name = t, this._liveRange = this._attachLiveRange(e), this._managedUsingOperations = n, this._affectsData = i;
          }

          _createClass(Gc, [{
            key: "managedUsingOperations",
            get: function get() {
              if (!this._liveRange) throw new rn["default"]("marker-destroyed", this);
              return this._managedUsingOperations;
            }
          }, {
            key: "affectsData",
            get: function get() {
              if (!this._liveRange) throw new rn["default"]("marker-destroyed", this);
              return this._affectsData;
            }
          }, {
            key: "getStart",
            value: function getStart() {
              if (!this._liveRange) throw new rn["default"]("marker-destroyed", this);
              return this._liveRange.start.clone();
            }
          }, {
            key: "getEnd",
            value: function getEnd() {
              if (!this._liveRange) throw new rn["default"]("marker-destroyed", this);
              return this._liveRange.end.clone();
            }
          }, {
            key: "getRange",
            value: function getRange() {
              if (!this._liveRange) throw new rn["default"]("marker-destroyed", this);
              return this._liveRange.toRange();
            }
          }, {
            key: "is",
            value: function is(t) {
              return "marker" === t || "model:marker" === t;
            }
          }, {
            key: "_attachLiveRange",
            value: function _attachLiveRange(t) {
              return this._liveRange && this._detachLiveRange(), t.delegate("change:range").to(this), t.delegate("change:content").to(this), this._liveRange = t, t;
            }
          }, {
            key: "_detachLiveRange",
            value: function _detachLiveRange() {
              this._liveRange.stopDelegating("change:range", this), this._liveRange.stopDelegating("change:content", this), this._liveRange.detach(), this._liveRange = null;
            }
          }]);

          return Gc;
        }();

        Object(o["default"])(Gc, sn["default"]);

        var Kc = /*#__PURE__*/function (_hc10) {
          _inherits(Kc, _hc10);

          var _super98 = _createSuper(Kc);

          function Kc() {
            _classCallCheck(this, Kc);

            return _super98.apply(this, arguments);
          }

          _createClass(Kc, [{
            key: "type",
            get: function get() {
              return "noop";
            }
          }, {
            key: "clone",
            value: function clone() {
              return new Kc(this.baseVersion);
            }
          }, {
            key: "getReversed",
            value: function getReversed() {
              return new Kc(this.baseVersion + 1);
            }
          }, {
            key: "_execute",
            value: function _execute() {}
          }], [{
            key: "className",
            get: function get() {
              return "NoOperation";
            }
          }]);

          return Kc;
        }(hc);

        var Qc = {};
        Qc[yc.className] = yc, Qc[Tc.className] = Tc, Qc[Ac.className] = Ac, Qc[Cc.className] = Cc, Qc[Kc.className] = Kc, Qc[hc.className] = hc, Qc[Ec.className] = Ec, Qc[Sc.className] = Sc, Qc[Oc.className] = Oc, Qc[Ic.className] = Ic;

        var Xc = /*#__PURE__*/function () {
          function Xc() {
            _classCallCheck(this, Xc);
          }

          _createClass(Xc, null, [{
            key: "fromJSON",
            value: function fromJSON(t, e) {
              return Qc[t.__className].fromJSON(t, e);
            }
          }]);

          return Xc;
        }();

        var Zc = /*#__PURE__*/function (_Ks) {
          _inherits(Zc, _Ks);

          var _super99 = _createSuper(Zc);

          function Zc(t, e) {
            var _this142;

            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "toNone";

            _classCallCheck(this, Zc);

            if (_this142 = _super99.call(this, t, e, n), !_this142.root.is("rootElement")) throw new rn["default"]("model-liveposition-root-not-rootelement", t);
            (function () {
              var _this143 = this;

              this.listenTo(this.root.document.model, "applyOperation", function (t, e) {
                var n = e[0];
                n.isDocumentOperation && function (t) {
                  var e = this.getTransformedByOperation(t);

                  if (!this.isEqual(e)) {
                    var _t190 = this.toPosition();

                    this.path = e.path, this.root = e.root, this.fire("change", _t190);
                  }
                }.call(_this143, n);
              }, {
                priority: "low"
              });
            }).call(_assertThisInitialized(_this142));
            return _possibleConstructorReturn(_this142);
          }

          _createClass(Zc, [{
            key: "detach",
            value: function detach() {
              this.stopListening();
            }
          }, {
            key: "is",
            value: function is(t) {
              return "livePosition" === t || "model:livePosition" === t || "position" == t || "model:position" === t;
            }
          }, {
            key: "toPosition",
            value: function toPosition() {
              return new Ks(this.root, this.path.slice(), this.stickiness);
            }
          }], [{
            key: "fromPosition",
            value: function fromPosition(t, e) {
              return new this(t.root, t.path.slice(), e || t.stickiness);
            }
          }]);

          return Zc;
        }(Ks);

        Object(o["default"])(Zc, sn["default"]);

        var tl = /*#__PURE__*/function () {
          function tl(t, e, n) {
            _classCallCheck(this, tl);

            this.model = t, this.writer = e, this.position = n, this.canMergeWith = new Set([this.position.parent]), this.schema = t.schema, this._documentFragment = e.createDocumentFragment(), this._documentFragmentPosition = e.createPositionAt(this._documentFragment, 0), this._firstNode = null, this._lastNode = null, this._lastAutoParagraph = null, this._filterAttributesOf = [], this._affectedStart = null, this._affectedEnd = null;
          }

          _createClass(tl, [{
            key: "handleNodes",
            value: function handleNodes(t) {
              for (var _i131 = 0, _Array$from6 = Array.from(t); _i131 < _Array$from6.length; _i131++) {
                var _e191 = _Array$from6[_i131];

                this._handleNode(_e191);
              }

              this._insertPartialFragment(), this._lastAutoParagraph && this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph), this._mergeOnRight(), this.schema.removeDisallowedAttributes(this._filterAttributesOf, this.writer), this._filterAttributesOf = [];
            }
          }, {
            key: "_updateLastNodeFromAutoParagraph",
            value: function _updateLastNodeFromAutoParagraph(t) {
              var e = this.writer.createPositionAfter(this._lastNode),
                  n = this.writer.createPositionAfter(t);

              if (n.isAfter(e)) {
                if (this._lastNode = t, this.position.parent != t || !this.position.isAtEnd) throw new rn["default"]("insertcontent-invalid-insertion-position", this);
                this.position = n, this._setAffectedBoundaries(this.position);
              }
            }
          }, {
            key: "getSelectionRange",
            value: function getSelectionRange() {
              return this.nodeToSelect ? ta._createOn(this.nodeToSelect) : this.model.schema.getNearestSelectionRange(this.position);
            }
          }, {
            key: "getAffectedRange",
            value: function getAffectedRange() {
              return this._affectedStart ? new ta(this._affectedStart, this._affectedEnd) : null;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._affectedStart && this._affectedStart.detach(), this._affectedEnd && this._affectedEnd.detach();
            }
          }, {
            key: "_handleNode",
            value: function _handleNode(t) {
              if (this.schema.isObject(t)) return void this._handleObject(t);

              var e = this._checkAndAutoParagraphToAllowedPosition(t);

              e || (e = this._checkAndSplitToAllowedPosition(t)) ? (this._appendToFragment(t), this._firstNode || (this._firstNode = t), this._lastNode = t) : this._handleDisallowedNode(t);
            }
          }, {
            key: "_insertPartialFragment",
            value: function _insertPartialFragment() {
              if (this._documentFragment.isEmpty) return;
              var t = Zc.fromPosition(this.position, "toNext");
              this._setAffectedBoundaries(this.position), this._documentFragment.getChild(0) == this._firstNode && (this.writer.insert(this._firstNode, this.position), this._mergeOnLeft(), this.position = t.toPosition()), this._documentFragment.isEmpty || this.writer.insert(this._documentFragment, this.position), this._documentFragmentPosition = this.writer.createPositionAt(this._documentFragment, 0), this.position = t.toPosition(), t.detach();
            }
          }, {
            key: "_handleObject",
            value: function _handleObject(t) {
              this._checkAndSplitToAllowedPosition(t) ? this._appendToFragment(t) : this._tryAutoparagraphing(t);
            }
          }, {
            key: "_handleDisallowedNode",
            value: function _handleDisallowedNode(t) {
              t.is("element") ? this.handleNodes(t.getChildren()) : this._tryAutoparagraphing(t);
            }
          }, {
            key: "_appendToFragment",
            value: function _appendToFragment(t) {
              if (!this.schema.checkChild(this.position, t)) throw new rn["default"]("insertcontent-wrong-position", this, {
                node: t,
                position: this.position
              });
              this.writer.insert(t, this._documentFragmentPosition), this._documentFragmentPosition = this._documentFragmentPosition.getShiftedBy(t.offsetSize), this.schema.isObject(t) && !this.schema.checkChild(this.position, "$text") ? this.nodeToSelect = t : this.nodeToSelect = null, this._filterAttributesOf.push(t);
            }
          }, {
            key: "_setAffectedBoundaries",
            value: function _setAffectedBoundaries(t) {
              this._affectedStart || (this._affectedStart = Zc.fromPosition(t, "toPrevious")), this._affectedEnd && !this._affectedEnd.isBefore(t) || (this._affectedEnd && this._affectedEnd.detach(), this._affectedEnd = Zc.fromPosition(t, "toNext"));
            }
          }, {
            key: "_mergeOnLeft",
            value: function _mergeOnLeft() {
              var t = this._firstNode;
              if (!(t instanceof Ys)) return;
              if (!this._canMergeLeft(t)) return;

              var e = Zc._createBefore(t);

              e.stickiness = "toNext";
              var n = Zc.fromPosition(this.position, "toNext");
              this._affectedStart.isEqual(e) && (this._affectedStart.detach(), this._affectedStart = Zc._createAt(e.nodeBefore, "end", "toPrevious")), this._firstNode === this._lastNode && (this._firstNode = e.nodeBefore, this._lastNode = e.nodeBefore), this.writer.merge(e), e.isEqual(this._affectedEnd) && this._firstNode === this._lastNode && (this._affectedEnd.detach(), this._affectedEnd = Zc._createAt(e.nodeBefore, "end", "toNext")), this.position = n.toPosition(), n.detach(), this._filterAttributesOf.push(this.position.parent), e.detach();
            }
          }, {
            key: "_mergeOnRight",
            value: function _mergeOnRight() {
              var t = this._lastNode;
              if (!(t instanceof Ys)) return;
              if (!this._canMergeRight(t)) return;

              var e = Zc._createAfter(t);

              if (e.stickiness = "toNext", !this.position.isEqual(e)) throw new rn["default"]("insertcontent-invalid-insertion-position", this);
              this.position = Ks._createAt(e.nodeBefore, "end");
              var n = Zc.fromPosition(this.position, "toPrevious");
              this._affectedEnd.isEqual(e) && (this._affectedEnd.detach(), this._affectedEnd = Zc._createAt(e.nodeBefore, "end", "toNext")), this._firstNode === this._lastNode && (this._firstNode = e.nodeBefore, this._lastNode = e.nodeBefore), this.writer.merge(e), e.getShiftedBy(-1).isEqual(this._affectedStart) && this._firstNode === this._lastNode && (this._affectedStart.detach(), this._affectedStart = Zc._createAt(e.nodeBefore, 0, "toPrevious")), this.position = n.toPosition(), n.detach(), this._filterAttributesOf.push(this.position.parent), e.detach();
            }
          }, {
            key: "_canMergeLeft",
            value: function _canMergeLeft(t) {
              var e = t.previousSibling;
              return e instanceof Ys && this.canMergeWith.has(e) && this.model.schema.checkMerge(e, t);
            }
          }, {
            key: "_canMergeRight",
            value: function _canMergeRight(t) {
              var e = t.nextSibling;
              return e instanceof Ys && this.canMergeWith.has(e) && this.model.schema.checkMerge(t, e);
            }
          }, {
            key: "_tryAutoparagraphing",
            value: function _tryAutoparagraphing(t) {
              var e = this.writer.createElement("paragraph");
              this._getAllowedIn(this.position.parent, e) && this.schema.checkChild(e, t) && (e._appendChild(t), this._handleNode(e));
            }
          }, {
            key: "_checkAndAutoParagraphToAllowedPosition",
            value: function _checkAndAutoParagraphToAllowedPosition(t) {
              if (this.schema.checkChild(this.position.parent, t)) return !0;
              if (!this.schema.checkChild(this.position.parent, "paragraph") || !this.schema.checkChild("paragraph", t)) return !1;

              this._insertPartialFragment();

              var e = this.writer.createElement("paragraph");
              return this.writer.insert(e, this.position), this._setAffectedBoundaries(this.position), this._lastAutoParagraph = e, this.position = this.writer.createPositionAt(e, 0), !0;
            }
          }, {
            key: "_checkAndSplitToAllowedPosition",
            value: function _checkAndSplitToAllowedPosition(t) {
              var e = this._getAllowedIn(this.position.parent, t);

              if (!e) return !1;

              for (e != this.position.parent && this._insertPartialFragment(); e != this.position.parent;) {
                if (this.position.isAtStart) {
                  var _t191 = this.position.parent;
                  this.position = this.writer.createPositionBefore(_t191), _t191.isEmpty && _t191.parent === e && this.writer.remove(_t191);
                } else if (this.position.isAtEnd) this.position = this.writer.createPositionAfter(this.position.parent);else {
                  var _t192 = this.writer.createPositionAfter(this.position.parent);

                  this._setAffectedBoundaries(this.position), this.writer.split(this.position), this.position = _t192, this.canMergeWith.add(this.position.nodeAfter);
                }
              }

              return !0;
            }
          }, {
            key: "_getAllowedIn",
            value: function _getAllowedIn(t, e) {
              return this.schema.checkChild(t, e) ? t : this.schema.isLimit(t) ? null : this._getAllowedIn(t.parent, e);
            }
          }]);

          return tl;
        }();

        function el(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          if (e.isCollapsed) return;
          var i = e.getFirstRange();
          if ("$graveyard" == i.root.rootName) return;
          var o = t.schema;
          t.change(function (t) {
            if (!n.doNotResetEntireContent && function (t, e) {
              var n = t.getLimitElement(e);
              if (!e.containsEntireContent(n)) return !1;
              var i = e.getFirstRange();
              if (i.start.parent == i.end.parent) return !1;
              return t.checkChild(n, "paragraph");
            }(o, e)) return void function (t, e) {
              var n = t.model.schema.getLimitElement(e);
              t.remove(t.createRangeIn(n)), il(t, t.createPositionAt(n, 0), e);
            }(t, e);

            var _ref29 = function (t) {
              var e = t.root.document.model,
                  n = t.start;
              var i = t.end;

              if (e.hasContent(t, {
                ignoreMarkers: !0
              })) {
                var _n175 = function (t) {
                  var e = t.parent,
                      n = e.root.document.model.schema,
                      i = e.getAncestors({
                    parentFirst: !0,
                    includeSelf: !0
                  });

                  var _iterator270 = _createForOfIteratorHelper(i),
                      _step270;

                  try {
                    for (_iterator270.s(); !(_step270 = _iterator270.n()).done;) {
                      var _t193 = _step270.value;
                      if (n.isLimit(_t193)) return null;
                      if (n.isBlock(_t193)) return _t193;
                    }
                  } catch (err) {
                    _iterator270.e(err);
                  } finally {
                    _iterator270.f();
                  }
                }(i);

                if (_n175 && i.isTouching(e.createPositionAt(_n175, 0))) {
                  var _n176 = e.createSelection(t);

                  e.modifySelection(_n176, {
                    direction: "backward"
                  });

                  var _o62 = _n176.getLastPosition(),
                      _r38 = e.createRange(_o62, i);

                  e.hasContent(_r38, {
                    ignoreMarkers: !0
                  }) || (i = _o62);
                }
              }

              return [Zc.fromPosition(n, "toPrevious"), Zc.fromPosition(i, "toNext")];
            }(i),
                _ref30 = _slicedToArray(_ref29, 2),
                r = _ref30[0],
                s = _ref30[1];

            r.isTouching(s) || t.remove(t.createRange(r, s)), n.leaveUnmerged || (!function (t, e, n) {
              var i = t.model;
              if (!nl(t.model.schema, e, n)) return;

              var _ref31 = function (t, e) {
                var n = t.getAncestors(),
                    i = e.getAncestors();
                var o = 0;

                for (; n[o] && n[o] == i[o];) {
                  o++;
                }

                return [n[o], i[o]];
              }(e, n),
                  _ref32 = _slicedToArray(_ref31, 2),
                  o = _ref32[0],
                  r = _ref32[1];

              if (!o || !r) return;
              !i.hasContent(o, {
                ignoreMarkers: !0
              }) && i.hasContent(r, {
                ignoreMarkers: !0
              }) ? function t(e, n, i, o) {
                var r = n.parent;
                var s = i.parent;
                if (r == o || s == o) return;
                n = e.createPositionAfter(r);
                i = e.createPositionBefore(s);
                i.isEqual(n) || e.insert(r, i);

                for (; n.parent.isEmpty;) {
                  var _t194 = n.parent;
                  n = e.createPositionBefore(_t194), e.remove(_t194);
                }

                i = e.createPositionBefore(s);
                !function (t, e) {
                  var n = e.nodeBefore,
                      i = e.nodeAfter;
                  n.name != i.name && t.rename(n, i.name);
                  t.clearAttributes(n), t.setAttributes(Object.fromEntries(i.getAttributes()), n), t.merge(e);
                }(e, i);
                if (!nl(e.model.schema, n, i)) return;
                t(e, n, i, o);
              }(t, e, n, o.parent) : function t(e, n, i, o) {
                var r = n.parent;
                var s = i.parent;
                if (r == o || s == o) return;
                n = e.createPositionAfter(r);
                i = e.createPositionBefore(s);
                i.isEqual(n) || e.insert(s, n);
                e.merge(n);

                for (; i.parent.isEmpty;) {
                  var _t195 = i.parent;
                  i = e.createPositionBefore(_t195), e.remove(_t195);
                }

                if (!nl(e.model.schema, n, i)) return;
                t(e, n, i, o);
              }(t, e, n, o.parent);
            }(t, r, s), o.removeDisallowedAttributes(r.parent.getChildren(), t)), ol(t, e, r), !n.doNotAutoparagraph && function (t, e) {
              var n = t.checkChild(e, "$text"),
                  i = t.checkChild(e, "paragraph");
              return !n && i;
            }(o, r) && il(t, r, e), r.detach(), s.detach();
          });
        }

        function nl(t, e, n) {
          var i = e.parent,
              o = n.parent;
          return i != o && !t.isLimit(i) && !t.isLimit(o) && function (t, e, n) {
            var i = new ta(t, e);

            var _iterator271 = _createForOfIteratorHelper(i.getWalker()),
                _step271;

            try {
              for (_iterator271.s(); !(_step271 = _iterator271.n()).done;) {
                var _t196 = _step271.value;
                if (n.isLimit(_t196.item)) return !1;
              }
            } catch (err) {
              _iterator271.e(err);
            } finally {
              _iterator271.f();
            }

            return !0;
          }(e, n, t);
        }

        function il(t, e, n) {
          var i = t.createElement("paragraph");
          t.insert(i, e), ol(t, n, t.createPositionAt(i, 0));
        }

        function ol(t, e, n) {
          e instanceof ma ? t.setSelection(n) : e.setTo(n);
        }

        var rl = ' ,.?!:;"-()';

        function sl(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          var i = t.schema,
              o = "backward" != n.direction,
              r = n.unit ? n.unit : "character",
              s = e.focus,
              a = new Js({
            boundaries: function (t, e) {
              var n = t.root,
                  i = Ks._createAt(n, e ? "end" : 0);

              return e ? new ta(t, i) : new ta(i, t);
            }(s, o),
            singleCharacters: !0,
            direction: o ? "forward" : "backward"
          }),
              c = {
            walker: a,
            schema: i,
            isForward: o,
            unit: r
          };
          var l;

          var _loop4 = function _loop4() {
            if (l.done) return {
              v: void 0
            };
            var n = al(c, l.value);
            if (n) return {
              v: void (e instanceof ma ? t.change(function (t) {
                t.setSelectionFocus(n);
              }) : e.setFocus(n))
            };
          };

          for (; l = a.next();) {
            var _ret2 = _loop4();

            if (typeof _ret2 === "object") return _ret2.v;
          }
        }

        function al(t, e) {
          var n = t.isForward,
              i = t.walker,
              o = t.unit,
              r = t.schema,
              s = e.type,
              a = e.item,
              c = e.nextPosition;
          if ("text" == s) return "word" === t.unit ? function (t, e) {
            var n = t.position.textNode;

            if (n) {
              var _i132 = t.position.offset - n.startOffset;

              for (; !cl(n.data, _i132, e) && !ll(n, _i132, e);) {
                t.next();

                var _o63 = e ? t.position.nodeAfter : t.position.nodeBefore;

                if (_o63 && _o63.is("$text")) {
                  var _i133 = _o63.data.charAt(e ? 0 : _o63.data.length - 1);

                  rl.includes(_i133) || (t.next(), n = t.position.textNode);
                }

                _i132 = t.position.offset - n.startOffset;
              }
            }

            return t.position;
          }(i, n) : function (t, e) {
            var n = t.position.textNode;

            if (n) {
              var _i134 = n.data;

              var _o64 = t.position.offset - n.startOffset;

              for (; Hc(_i134, _o64) || "character" == e && qc(_i134, _o64);) {
                t.next(), _o64 = t.position.offset - n.startOffset;
              }
            }

            return t.position;
          }(i, o);

          if (s == (n ? "elementStart" : "elementEnd")) {
            if (r.isSelectable(a)) return Ks._createAt(a, n ? "after" : "before");
            if (r.checkChild(c, "$text")) return c;
          } else {
            if (r.isLimit(a)) return void i.skip(function () {
              return !0;
            });
            if (r.checkChild(c, "$text")) return c;
          }
        }

        function cl(t, e, n) {
          var i = e + (n ? 0 : -1);
          return rl.includes(t.charAt(i));
        }

        function ll(t, e, n) {
          return e === (n ? t.endOffset : 0);
        }

        function dl(t, e) {
          var n = [];
          Array.from(t.getItems({
            direction: "backward"
          })).map(function (t) {
            return e.createRangeOn(t);
          }).filter(function (e) {
            return (e.start.isAfter(t.start) || e.start.isEqual(t.start)) && (e.end.isBefore(t.end) || e.end.isEqual(t.end));
          }).forEach(function (t) {
            n.push(t.start.parent), e.remove(t);
          }), n.forEach(function (t) {
            var n = t;

            for (; n.parent && n.isEmpty;) {
              var _t197 = e.createRangeOn(n);

              n = n.parent, e.remove(_t197);
            }
          });
        }

        function ul(t) {
          t.document.registerPostFixer(function (e) {
            return function (t, e) {
              var n = e.document.selection,
                  i = e.schema,
                  o = [];
              var r = !1;

              var _iterator272 = _createForOfIteratorHelper(n.getRanges()),
                  _step272;

              try {
                for (_iterator272.s(); !(_step272 = _iterator272.n()).done;) {
                  var _t199 = _step272.value;

                  var _e192 = hl(_t199, i);

                  _e192 && !_e192.isEqual(_t199) ? (o.push(_e192), r = !0) : o.push(_t199);
                }
              } catch (err) {
                _iterator272.e(err);
              } finally {
                _iterator272.f();
              }

              r && t.setSelection(function (t) {
                var e = [];
                e.push(t.shift());

                var _iterator273 = _createForOfIteratorHelper(t),
                    _step273;

                try {
                  for (_iterator273.s(); !(_step273 = _iterator273.n()).done;) {
                    var _n177 = _step273.value;

                    var _t198 = e.pop();

                    if (_n177.isEqual(_t198)) e.push(_t198);else if (_n177.isIntersecting(_t198)) {
                      var _i135 = _t198.start.isAfter(_n177.start) ? _n177.start : _t198.start,
                          _o65 = _t198.end.isAfter(_n177.end) ? _t198.end : _n177.end,
                          _r39 = new ta(_i135, _o65);

                      e.push(_r39);
                    } else e.push(_t198), e.push(_n177);
                  }
                } catch (err) {
                  _iterator273.e(err);
                } finally {
                  _iterator273.f();
                }

                return e;
              }(o), {
                backward: n.isBackward
              });
            }(e, t);
          });
        }

        function hl(t, e) {
          return t.isCollapsed ? function (t, e) {
            var n = t.start,
                i = e.getNearestSelectionRange(n);
            if (!i) return null;
            if (!i.isCollapsed) return i;
            var o = i.start;
            if (n.isEqual(o)) return null;
            return new ta(o);
          }(t, e) : function (t, e) {
            var n = t.start,
                i = t.end,
                o = e.checkChild(n, "$text"),
                r = e.checkChild(i, "$text"),
                s = e.getLimitElement(n),
                a = e.getLimitElement(i);

            if (s === a) {
              if (o && r) return null;

              if (function (t, e, n) {
                var i = t.nodeAfter && !n.isLimit(t.nodeAfter) || n.checkChild(t, "$text"),
                    o = e.nodeBefore && !n.isLimit(e.nodeBefore) || n.checkChild(e, "$text");
                return i || o;
              }(n, i, e)) {
                var _t200 = n.nodeAfter && e.isSelectable(n.nodeAfter),
                    _o66 = _t200 ? null : e.getNearestSelectionRange(n, "forward"),
                    _r40 = i.nodeBefore && e.isSelectable(i.nodeBefore),
                    _s23 = _r40 ? null : e.getNearestSelectionRange(i, "backward"),
                    _a14 = _o66 ? _o66.start : n,
                    _c5 = _s23 ? _s23.end : i;

                return new ta(_a14, _c5);
              }
            }

            var c = s && !s.is("rootElement"),
                l = a && !a.is("rootElement");

            if (c || l) {
              var _t201 = n.nodeAfter && i.nodeBefore && n.nodeAfter.parent === i.nodeBefore.parent,
                  _o67 = c && (!_t201 || !gl(n.nodeAfter, e)),
                  _r41 = l && (!_t201 || !gl(i.nodeBefore, e));

              var _d2 = n,
                  _u2 = i;
              return _o67 && (_d2 = Ks._createBefore(fl(s, e))), _r41 && (_u2 = Ks._createAfter(fl(a, e))), new ta(_d2, _u2);
            }

            return null;
          }(t, e);
        }

        function fl(t, e) {
          var n = t,
              i = n;

          for (; e.isLimit(i) && i.parent;) {
            n = i, i = i.parent;
          }

          return n;
        }

        function gl(t, e) {
          return t && e.isSelectable(t);
        }

        var ml = /*#__PURE__*/function () {
          function ml() {
            var _this144 = this;

            _classCallCheck(this, ml);

            this.markers = new Jc(), this.document = new $c(this), this.schema = new Ha(), this._pendingChanges = [], this._currentWriter = null, ["insertContent", "deleteContent", "modifySelection", "getSelectedContent", "applyOperation"].forEach(function (t) {
              return _this144.decorate(t);
            }), this.on("applyOperation", function (t, e) {
              e[0]._validate();
            }, {
              priority: "highest"
            }), this.schema.register("$root", {
              isLimit: !0
            }), this.schema.register("$block", {
              allowIn: "$root",
              isBlock: !0
            }), this.schema.register("$text", {
              allowIn: "$block",
              isInline: !0,
              isContent: !0
            }), this.schema.register("$clipboardHolder", {
              allowContentOf: "$root",
              allowChildren: "$text",
              isLimit: !0
            }), this.schema.register("$documentFragment", {
              allowContentOf: "$root",
              allowChildren: "$text",
              isLimit: !0
            }), this.schema.register("$marker"), this.schema.addChildCheck(function (t, e) {
              if ("$marker" === e.name) return !0;
            }), ul(this), this.document.registerPostFixer(Ia);
          }

          _createClass(ml, [{
            key: "change",
            value: function change(t) {
              try {
                return 0 === this._pendingChanges.length ? (this._pendingChanges.push({
                  batch: new uc(),
                  callback: t
                }), this._runPendingChanges()[0]) : t(this._currentWriter);
              } catch (t) {
                rn["default"].rethrowUnexpectedError(t, this);
              }
            }
          }, {
            key: "enqueueChange",
            value: function enqueueChange(t, e) {
              try {
                "string" == typeof t ? t = new uc(t) : "function" == typeof t && (e = t, t = new uc()), this._pendingChanges.push({
                  batch: t,
                  callback: e
                }), 1 == this._pendingChanges.length && this._runPendingChanges();
              } catch (t) {
                rn["default"].rethrowUnexpectedError(t, this);
              }
            }
          }, {
            key: "applyOperation",
            value: function applyOperation(t) {
              t._execute();
            }
          }, {
            key: "insertContent",
            value: function insertContent(t, e, n) {
              return function (t, e, n, i) {
                return t.change(function (o) {
                  var r;
                  (r = n ? n instanceof ca || n instanceof ma ? n : o.createSelection(n, i) : t.document.selection).isCollapsed || t.deleteContent(r, {
                    doNotAutoparagraph: !0
                  });
                  var s = new tl(t, o, r.anchor);
                  var a;
                  a = e.is("documentFragment") ? e.getChildren() : [e], s.handleNodes(a);
                  var c = s.getSelectionRange();
                  c && (r instanceof ma ? o.setSelection(c) : r.setTo(c));
                  var l = s.getAffectedRange() || t.createRange(r.anchor);
                  return s.destroy(), l;
                });
              }(this, t, e, n);
            }
          }, {
            key: "deleteContent",
            value: function deleteContent(t, e) {
              el(this, t, e);
            }
          }, {
            key: "modifySelection",
            value: function modifySelection(t, e) {
              sl(this, t, e);
            }
          }, {
            key: "getSelectedContent",
            value: function getSelectedContent(t) {
              return function (t, e) {
                return t.change(function (t) {
                  var n = t.createDocumentFragment(),
                      i = e.getFirstRange();
                  if (!i || i.isCollapsed) return n;
                  var o = i.start.root,
                      r = i.start.getCommonPath(i.end),
                      s = o.getNodeByPath(r);
                  var a;
                  var c = (a = i.start.parent == i.end.parent ? i : t.createRange(t.createPositionAt(s, i.start.path[r.length]), t.createPositionAt(s, i.end.path[r.length] + 1))).end.offset - a.start.offset;

                  var _iterator274 = _createForOfIteratorHelper(a.getItems({
                    shallow: !0
                  })),
                      _step274;

                  try {
                    for (_iterator274.s(); !(_step274 = _iterator274.n()).done;) {
                      var _e194 = _step274.value;
                      _e194.is("$textProxy") ? t.appendText(_e194.data, _e194.getAttributes(), n) : t.append(t.cloneElement(_e194, !0), n);
                    }
                  } catch (err) {
                    _iterator274.e(err);
                  } finally {
                    _iterator274.f();
                  }

                  if (a != i) {
                    var _e193 = i._getTransformedByMove(a.start, t.createPositionAt(n, 0), c)[0],
                        _o68 = t.createRange(t.createPositionAt(n, 0), _e193.start);

                    dl(t.createRange(_e193.end, t.createPositionAt(n, "end")), t), dl(_o68, t);
                  }

                  return n;
                });
              }(this, t);
            }
          }, {
            key: "hasContent",
            value: function hasContent(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = t instanceof Ys ? ta._createIn(t) : t;
              if (n.isCollapsed) return !1;
              var _e$ignoreWhitespaces = e.ignoreWhitespaces,
                  i = _e$ignoreWhitespaces === void 0 ? !1 : _e$ignoreWhitespaces,
                  _e$ignoreMarkers = e.ignoreMarkers,
                  o = _e$ignoreMarkers === void 0 ? !1 : _e$ignoreMarkers;

              if (!o) {
                var _iterator275 = _createForOfIteratorHelper(this.markers.getMarkersIntersectingRange(n)),
                    _step275;

                try {
                  for (_iterator275.s(); !(_step275 = _iterator275.n()).done;) {
                    var _t202 = _step275.value;
                    if (_t202.affectsData) return !0;
                  }
                } catch (err) {
                  _iterator275.e(err);
                } finally {
                  _iterator275.f();
                }
              }

              var _iterator276 = _createForOfIteratorHelper(n.getItems()),
                  _step276;

              try {
                for (_iterator276.s(); !(_step276 = _iterator276.n()).done;) {
                  var _t203 = _step276.value;

                  if (this.schema.isContent(_t203)) {
                    if (!_t203.is("$textProxy")) return !0;
                    if (!i) return !0;
                    if (-1 !== _t203.data.search(/\S/)) return !0;
                  }
                }
              } catch (err) {
                _iterator276.e(err);
              } finally {
                _iterator276.f();
              }

              return !1;
            }
          }, {
            key: "createPositionFromPath",
            value: function createPositionFromPath(t, e, n) {
              return new Ks(t, e, n);
            }
          }, {
            key: "createPositionAt",
            value: function createPositionAt(t, e) {
              return Ks._createAt(t, e);
            }
          }, {
            key: "createPositionAfter",
            value: function createPositionAfter(t) {
              return Ks._createAfter(t);
            }
          }, {
            key: "createPositionBefore",
            value: function createPositionBefore(t) {
              return Ks._createBefore(t);
            }
          }, {
            key: "createRange",
            value: function createRange(t, e) {
              return new ta(t, e);
            }
          }, {
            key: "createRangeIn",
            value: function createRangeIn(t) {
              return ta._createIn(t);
            }
          }, {
            key: "createRangeOn",
            value: function createRangeOn(t) {
              return ta._createOn(t);
            }
          }, {
            key: "createSelection",
            value: function createSelection(t, e, n) {
              return new ca(t, e, n);
            }
          }, {
            key: "createBatch",
            value: function createBatch(t) {
              return new uc(t);
            }
          }, {
            key: "createOperationFromJSON",
            value: function createOperationFromJSON(t) {
              return Xc.fromJSON(t, this.document);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.document.destroy(), this.stopListening();
            }
          }, {
            key: "_runPendingChanges",
            value: function _runPendingChanges() {
              var t = [];

              for (this.fire("_beforeChanges"); this._pendingChanges.length;) {
                var _e195 = this._pendingChanges[0].batch;
                this._currentWriter = new Mc(this, _e195);

                var _n178 = this._pendingChanges[0].callback(this._currentWriter);

                t.push(_n178), this.document._handleChangeBlock(this._currentWriter), this._pendingChanges.shift(), this._currentWriter = null;
              }

              return this.fire("_afterChanges"), t;
            }
          }]);

          return ml;
        }();

        Object(o["default"])(ml, i["default"]);

        var pl = /*#__PURE__*/function (_Is) {
          _inherits(pl, _Is);

          var _super100 = _createSuper(pl);

          function pl(t) {
            var _this145;

            _classCallCheck(this, pl);

            _this145 = _super100.call(this), _this145.editor = t;
            return _this145;
          }

          _createClass(pl, [{
            key: "set",
            value: function set(t, e) {
              var _this146 = this;

              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

              if ("string" == typeof e) {
                var _t204 = e;

                e = function e(_e196, n) {
                  _this146.editor.execute(_t204), n();
                };
              }

              _get3(_getPrototypeOf(pl.prototype), "set", this).call(this, t, e, n);
            }
          }]);

          return pl;
        }(Is);

        var bl = /*#__PURE__*/function () {
          function bl() {
            var _this147 = this;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            _classCallCheck(this, bl);

            this._context = t.context || new fn({
              language: t.language
            }), this._context._addEditor(this, !t.context);
            var e = Array.from(this.constructor.builtinPlugins || []);
            this.config = new tn(t, this.constructor.defaultConfig), this.config.define("plugins", e), this.config.define(this._context._getEditorConfig()), this.plugins = new an(this, e, this._context.plugins), this.locale = this._context.locale, this.t = this.locale.t, this.commands = new Fa(), this.set("state", "initializing"), this.once("ready", function () {
              return _this147.state = "ready";
            }, {
              priority: "high"
            }), this.once("destroy", function () {
              return _this147.state = "destroyed";
            }, {
              priority: "high"
            }), this.set("isReadOnly", !1), this.model = new ml();
            var n = new ki();
            this.data = new ac(this.model, n), this.editing = new za(this.model, n), this.editing.view.document.bind("isReadOnly").to(this), this.conversion = new cc([this.editing.downcastDispatcher, this.data.downcastDispatcher], this.data.upcastDispatcher), this.conversion.addAlias("dataDowncast", this.data.downcastDispatcher), this.conversion.addAlias("editingDowncast", this.editing.downcastDispatcher), this.keystrokes = new pl(this), this.keystrokes.listenTo(this.editing.view.document);
          }

          _createClass(bl, [{
            key: "initPlugins",
            value: function initPlugins() {
              var t = this.config,
                  e = t.get("plugins"),
                  n = t.get("removePlugins") || [],
                  i = t.get("extraPlugins") || [],
                  o = t.get("substitutePlugins") || [];
              return this.plugins.init(e.concat(i), n, o);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              var _this148 = this;

              var t = Promise.resolve();
              return "initializing" == this.state && (t = new Promise(function (t) {
                return _this148.once("ready", t);
              })), t.then(function () {
                _this148.fire("destroy"), _this148.stopListening(), _this148.commands.destroy();
              }).then(function () {
                return _this148.plugins.destroy();
              }).then(function () {
                _this148.model.destroy(), _this148.data.destroy(), _this148.editing.destroy(), _this148.keystrokes.destroy();
              }).then(function () {
                return _this148._context._removeEditor(_this148);
              });
            }
          }, {
            key: "execute",
            value: function execute() {
              try {
                var _this$commands;

                return (_this$commands = this.commands).execute.apply(_this$commands, arguments);
              } catch (t) {
                rn["default"].rethrowUnexpectedError(t, this);
              }
            }
          }, {
            key: "focus",
            value: function focus() {
              this.editing.view.focus();
            }
          }]);

          return bl;
        }();

        Object(o["default"])(bl, i["default"]);

        var kl = /*#__PURE__*/function () {
          function kl(t) {
            _classCallCheck(this, kl);

            this.editor = t, this._components = new Map();
          }

          _createClass(kl, [{
            key: "names",
            value: /*#__PURE__*/regeneratorRuntime.mark(function names() {
              var _iterator277, _step277, _t205;

              return regeneratorRuntime.wrap(function names$(_context67) {
                while (1) {
                  switch (_context67.prev = _context67.next) {
                    case 0:
                      _iterator277 = _createForOfIteratorHelper(this._components.values());
                      _context67.prev = 1;

                      _iterator277.s();

                    case 3:
                      if ((_step277 = _iterator277.n()).done) {
                        _context67.next = 9;
                        break;
                      }

                      _t205 = _step277.value;
                      _context67.next = 7;
                      return _t205.originalName;

                    case 7:
                      _context67.next = 3;
                      break;

                    case 9:
                      _context67.next = 14;
                      break;

                    case 11:
                      _context67.prev = 11;
                      _context67.t0 = _context67["catch"](1);

                      _iterator277.e(_context67.t0);

                    case 14:
                      _context67.prev = 14;

                      _iterator277.f();

                      return _context67.finish(14);

                    case 17:
                    case "end":
                      return _context67.stop();
                  }
                }
              }, names, this, [[1, 11, 14, 17]]);
            })
          }, {
            key: "add",
            value: function add(t, e) {
              this._components.set(_l(t), {
                callback: e,
                originalName: t
              });
            }
          }, {
            key: "create",
            value: function create(t) {
              if (!this.has(t)) throw new rn["default"]("componentfactory-item-missing", this, {
                name: t
              });
              return this._components.get(_l(t)).callback(this.editor.locale);
            }
          }, {
            key: "has",
            value: function has(t) {
              return this._components.has(_l(t));
            }
          }]);

          return kl;
        }();

        function _l(t) {
          return String(t).toLowerCase();
        }

        var wl = /*#__PURE__*/function () {
          function wl(t) {
            var _this149 = this;

            _classCallCheck(this, wl);

            this.editor = t, this.componentFactory = new kl(t), this.focusTracker = new Ss(), this.set("viewportOffset", this._readViewportOffsetFromConfig()), this._editableElementsMap = new Map(), this.listenTo(t.editing.view.document, "layoutChanged", function () {
              return _this149.update();
            });
          }

          _createClass(wl, [{
            key: "element",
            get: function get() {
              return null;
            }
          }, {
            key: "update",
            value: function update() {
              this.fire("update");
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.stopListening(), this.focusTracker.destroy();

              var _iterator278 = _createForOfIteratorHelper(this._editableElementsMap.values()),
                  _step278;

              try {
                for (_iterator278.s(); !(_step278 = _iterator278.n()).done;) {
                  var _t206 = _step278.value;
                  _t206.ckeditorInstance = null;
                }
              } catch (err) {
                _iterator278.e(err);
              } finally {
                _iterator278.f();
              }

              this._editableElementsMap = new Map();
            }
          }, {
            key: "setEditableElement",
            value: function setEditableElement(t, e) {
              this._editableElementsMap.set(t, e), e.ckeditorInstance || (e.ckeditorInstance = this.editor);
            }
          }, {
            key: "getEditableElement",
            value: function getEditableElement() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
              return this._editableElementsMap.get(t);
            }
          }, {
            key: "getEditableElementsNames",
            value: function getEditableElementsNames() {
              return this._editableElementsMap.keys();
            }
          }, {
            key: "_editableElements",
            get: function get() {
              return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.", {
                editorUI: this
              }), this._editableElementsMap;
            }
          }, {
            key: "_readViewportOffsetFromConfig",
            value: function _readViewportOffsetFromConfig() {
              var t = this.editor,
                  e = t.config.get("ui.viewportOffset");
              if (e) return e;
              var n = t.config.get("toolbar.viewportTopOffset");
              return n ? (console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."), {
                top: n
              }) : {
                top: 0
              };
            }
          }]);

          return wl;
        }();

        Object(o["default"])(wl, i["default"]);
        var vl = {
          setData: function setData(t) {
            this.data.set(t);
          },
          getData: function getData(t) {
            return this.data.get(t);
          }
        };
        var yl = {
          updateSourceElement: function updateSourceElement() {
            if (!this.sourceElement) throw new rn["default"]("editor-missing-sourceelement", this);
            !function (t, e) {
              t instanceof HTMLTextAreaElement && (t.value = e), t.innerHTML = e;
            }(this.sourceElement, this.data.get());
          }
        };

        var xl = /*#__PURE__*/function (_gn, _Symbol$iterator13) {
          _inherits(xl, _gn);

          var _super101 = _createSuper(xl);

          function xl() {
            _classCallCheck(this, xl);

            return _super101.apply(this, arguments);
          }

          _createClass(xl, [{
            key: "init",
            value: function init() {
              this.set("hasAny", !1), this._actions = new on["default"]({
                idProperty: "_id"
              }), this._actions.delegate("add", "remove").to(this);
            }
          }, {
            key: "add",
            value: function add(t) {
              if ("string" != typeof t) throw new rn["default"]("pendingactions-add-invalid-message", this);
              var e = Object.create(i["default"]);
              return e.set("message", t), this._actions.add(e), this.hasAny = !0, e;
            }
          }, {
            key: "remove",
            value: function remove(t) {
              this._actions.remove(t), this.hasAny = !!this._actions.length;
            }
          }, {
            key: "first",
            get: function get() {
              return this._actions.get(0);
            }
          }, {
            key: _Symbol$iterator13,
            value: function value() {
              return this._actions[Symbol.iterator]();
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "PendingActions";
            }
          }]);

          return xl;
        }(gn, Symbol.iterator);

        var Cl = n(118),
            Tl = n.n(Cl),
            Al = n(119),
            El = n.n(Al),
            Sl = n(120),
            Il = n.n(Sl),
            Ol = n(121),
            Rl = n.n(Ol),
            Ml = n(122),
            Pl = n.n(Ml),
            Nl = n(123),
            Dl = n.n(Nl),
            jl = n(124),
            Bl = n.n(jl),
            Ll = n(125),
            zl = n.n(Ll),
            Fl = n(126),
            Vl = n.n(Fl),
            Ul = n(127),
            Hl = n.n(Ul),
            ql = n(128),
            Wl = n.n(ql),
            $l = n(129),
            Yl = n.n($l),
            Jl = n(130),
            Gl = n.n(Jl),
            Kl = n(131),
            Ql = n.n(Kl),
            Xl = n(132),
            Zl = n.n(Xl),
            td = n(133),
            ed = n.n(td),
            nd = n(134),
            id = n.n(nd),
            od = n(135),
            rd = n.n(od),
            sd = n(136),
            ad = n.n(sd),
            cd = n(137),
            ld = n.n(cd),
            dd = n(138),
            ud = n.n(dd),
            hd = n(139),
            fd = n.n(hd),
            gd = n(140),
            md = n.n(gd),
            pd = n(141),
            bd = n.n(pd),
            kd = n(142),
            _d = n.n(kd),
            wd = n(143),
            vd = n.n(wd),
            yd = n(64),
            xd = n.n(yd),
            Cd = n(144),
            Td = n.n(Cd),
            Ad = n(65),
            Ed = n.n(Ad);

        var Sd = {
          cancel: Tl.a,
          caption: El.a,
          check: Il.a,
          cog: Rl.a,
          eraser: Pl.a,
          lowVision: Dl.a,
          image: Bl.a,
          alignBottom: zl.a,
          alignMiddle: Vl.a,
          alignTop: Hl.a,
          alignLeft: Wl.a,
          alignCenter: Yl.a,
          alignRight: Gl.a,
          alignJustify: Ql.a,
          objectLeft: ld.a,
          objectCenter: ed.a,
          objectRight: ud.a,
          objectFullWidth: rd.a,
          objectInline: ad.a,
          objectBlockLeft: Zl.a,
          objectBlockRight: id.a,
          objectSizeFull: fd.a,
          objectSizeLarge: md.a,
          objectSizeSmall: bd.a,
          objectSizeMedium: _d.a,
          pencil: vd.a,
          pilcrow: xd.a,
          quote: Td.a,
          threeVerticalDots: Ed.a
        };

        function Id(_ref33) {
          var t = _ref33.emitter,
              e = _ref33.activator,
              n = _ref33.callback,
              i = _ref33.contextElements;
          t.listenTo(document, "mousedown", function (t, o) {
            if (!e()) return;
            var r = "function" == typeof o.composedPath ? o.composedPath() : [];

            var _iterator279 = _createForOfIteratorHelper(i),
                _step279;

            try {
              for (_iterator279.s(); !(_step279 = _iterator279.n()).done;) {
                var _t207 = _step279.value;
                if (_t207.contains(o.target) || r.includes(_t207)) return;
              }
            } catch (err) {
              _iterator279.e(err);
            } finally {
              _iterator279.f();
            }

            n();
          });
        }

        function Od(t) {
          t.set("_isCssTransitionsDisabled", !1), t.disableCssTransitions = function () {
            t._isCssTransitionsDisabled = !0;
          }, t.enableCssTransitions = function () {
            t._isCssTransitionsDisabled = !1;
          }, t.extendTemplate({
            attributes: {
              "class": [t.bindTemplate["if"]("_isCssTransitionsDisabled", "ck-transitions-disabled")]
            }
          });
        }

        function Rd(_ref34) {
          var t = _ref34.view;
          t.listenTo(t.element, "submit", function (e, n) {
            n.preventDefault(), t.fire("submit");
          }, {
            useCapture: !0
          });
        }

        var Md = /*#__PURE__*/function (_on$default) {
          _inherits(Md, _on$default);

          var _super102 = _createSuper(Md);

          function Md() {
            var _this150;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            _classCallCheck(this, Md);

            _this150 = _super102.call(this, t, {
              idProperty: "viewUid"
            }), _this150.on("add", function (t, e, n) {
              _this150._renderViewIntoCollectionParent(e, n);
            }), _this150.on("remove", function (t, e) {
              e.element && _this150._parentElement && e.element.remove();
            }), _this150._parentElement = null;
            return _this150;
          }

          _createClass(Md, [{
            key: "destroy",
            value: function destroy() {
              this.map(function (t) {
                return t.destroy();
              });
            }
          }, {
            key: "setParent",
            value: function setParent(t) {
              this._parentElement = t;

              var _iterator280 = _createForOfIteratorHelper(this),
                  _step280;

              try {
                for (_iterator280.s(); !(_step280 = _iterator280.n()).done;) {
                  var _t208 = _step280.value;

                  this._renderViewIntoCollectionParent(_t208);
                }
              } catch (err) {
                _iterator280.e(err);
              } finally {
                _iterator280.f();
              }
            }
          }, {
            key: "delegate",
            value: function delegate() {
              var _this151 = this;

              for (var _len20 = arguments.length, t = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
                t[_key20] = arguments[_key20];
              }

              if (!t.length || !function (t) {
                return t.every(function (t) {
                  return "string" == typeof t;
                });
              }(t)) throw new rn["default"]("ui-viewcollection-delegate-wrong-events", this);
              return {
                to: function to(e) {
                  var _iterator281 = _createForOfIteratorHelper(_this151),
                      _step281;

                  try {
                    for (_iterator281.s(); !(_step281 = _iterator281.n()).done;) {
                      var _n181 = _step281.value;

                      var _iterator284 = _createForOfIteratorHelper(t),
                          _step284;

                      try {
                        for (_iterator284.s(); !(_step284 = _iterator284.n()).done;) {
                          var _i136 = _step284.value;

                          _n181.delegate(_i136).to(e);
                        }
                      } catch (err) {
                        _iterator284.e(err);
                      } finally {
                        _iterator284.f();
                      }
                    }
                  } catch (err) {
                    _iterator281.e(err);
                  } finally {
                    _iterator281.f();
                  }

                  _this151.on("add", function (n, i) {
                    var _iterator282 = _createForOfIteratorHelper(t),
                        _step282;

                    try {
                      for (_iterator282.s(); !(_step282 = _iterator282.n()).done;) {
                        var _n179 = _step282.value;
                        i.delegate(_n179).to(e);
                      }
                    } catch (err) {
                      _iterator282.e(err);
                    } finally {
                      _iterator282.f();
                    }
                  }), _this151.on("remove", function (n, i) {
                    var _iterator283 = _createForOfIteratorHelper(t),
                        _step283;

                    try {
                      for (_iterator283.s(); !(_step283 = _iterator283.n()).done;) {
                        var _n180 = _step283.value;
                        i.stopDelegating(_n180, e);
                      }
                    } catch (err) {
                      _iterator283.e(err);
                    } finally {
                      _iterator283.f();
                    }
                  });
                }
              };
            }
          }, {
            key: "_renderViewIntoCollectionParent",
            value: function _renderViewIntoCollectionParent(t, e) {
              t.isRendered || t.render(), t.element && this._parentElement && this._parentElement.insertBefore(t.element, this._parentElement.children[e]);
            }
          }]);

          return Md;
        }(on["default"]);

        n(180);

        var Pd = /*#__PURE__*/function () {
          function Pd(t) {
            _classCallCheck(this, Pd);

            this.element = null, this.isRendered = !1, this.locale = t, this.t = t && t.t, this._viewCollections = new on["default"](), this._unboundChildren = this.createCollection(), this._viewCollections.on("add", function (e, n) {
              n.locale = t;
            }), this.decorate("render");
          }

          _createClass(Pd, [{
            key: "bindTemplate",
            get: function get() {
              return this._bindTemplate ? this._bindTemplate : this._bindTemplate = Dd.bind(this, this);
            }
          }, {
            key: "createCollection",
            value: function createCollection(t) {
              var e = new Md(t);
              return this._viewCollections.add(e), e;
            }
          }, {
            key: "registerChild",
            value: function registerChild(t) {
              Object(yn.a)(t) || (t = [t]);

              var _iterator285 = _createForOfIteratorHelper(t),
                  _step285;

              try {
                for (_iterator285.s(); !(_step285 = _iterator285.n()).done;) {
                  var _e197 = _step285.value;

                  this._unboundChildren.add(_e197);
                }
              } catch (err) {
                _iterator285.e(err);
              } finally {
                _iterator285.f();
              }
            }
          }, {
            key: "deregisterChild",
            value: function deregisterChild(t) {
              Object(yn.a)(t) || (t = [t]);

              var _iterator286 = _createForOfIteratorHelper(t),
                  _step286;

              try {
                for (_iterator286.s(); !(_step286 = _iterator286.n()).done;) {
                  var _e198 = _step286.value;

                  this._unboundChildren.remove(_e198);
                }
              } catch (err) {
                _iterator286.e(err);
              } finally {
                _iterator286.f();
              }
            }
          }, {
            key: "setTemplate",
            value: function setTemplate(t) {
              this.template = new Dd(t);
            }
          }, {
            key: "extendTemplate",
            value: function extendTemplate(t) {
              Dd.extend(this.template, t);
            }
          }, {
            key: "render",
            value: function render() {
              if (this.isRendered) throw new rn["default"]("ui-view-render-already-rendered", this);
              this.template && (this.element = this.template.render(), this.registerChild(this.template.getViews())), this.isRendered = !0;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.stopListening(), this._viewCollections.map(function (t) {
                return t.destroy();
              }), this.template && this.template._revertData && this.template.revert(this.element);
            }
          }]);

          return Pd;
        }();

        Object(o["default"])(Pd, er), Object(o["default"])(Pd, i["default"]);
        var Nd = "http://www.w3.org/1999/xhtml";

        var Dd = /*#__PURE__*/function () {
          function Dd(t) {
            _classCallCheck(this, Dd);

            Object.assign(this, qd(Hd(t))), this._isRendered = !1, this._revertData = null;
          }

          _createClass(Dd, [{
            key: "render",
            value: function render() {
              var t = this._renderNode({
                intoFragment: !0
              });

              return this._isRendered = !0, t;
            }
          }, {
            key: "apply",
            value: function apply(t) {
              return this._revertData = {
                children: [],
                bindings: [],
                attributes: {}
              }, this._renderNode({
                node: t,
                isApplying: !0,
                revertData: this._revertData
              }), t;
            }
          }, {
            key: "revert",
            value: function revert(t) {
              if (!this._revertData) throw new rn["default"]("ui-template-revert-not-applied", [this, t]);

              this._revertTemplateFromNode(t, this._revertData);
            }
          }, {
            key: "getViews",
            value: /*#__PURE__*/regeneratorRuntime.mark(function getViews() {
              return regeneratorRuntime.wrap(function getViews$(_context69) {
                while (1) {
                  switch (_context69.prev = _context69.next) {
                    case 0:
                      return _context69.delegateYield( /*#__PURE__*/regeneratorRuntime.mark(function t(e) {
                        var _iterator287, _step287, _n182;

                        return regeneratorRuntime.wrap(function t$(_context68) {
                          while (1) {
                            switch (_context68.prev = _context68.next) {
                              case 0:
                                if (!e.children) {
                                  _context68.next = 24;
                                  break;
                                }

                                _iterator287 = _createForOfIteratorHelper(e.children);
                                _context68.prev = 2;

                                _iterator287.s();

                              case 4:
                                if ((_step287 = _iterator287.n()).done) {
                                  _context68.next = 16;
                                  break;
                                }

                                _n182 = _step287.value;

                                if (!Gd(_n182)) {
                                  _context68.next = 11;
                                  break;
                                }

                                _context68.next = 9;
                                return _n182;

                              case 9:
                                _context68.next = 14;
                                break;

                              case 11:
                                _context68.t0 = Kd(_n182);

                                if (!_context68.t0) {
                                  _context68.next = 14;
                                  break;
                                }

                                return _context68.delegateYield(t(_n182), "t1", 14);

                              case 14:
                                _context68.next = 4;
                                break;

                              case 16:
                                _context68.next = 21;
                                break;

                              case 18:
                                _context68.prev = 18;
                                _context68.t2 = _context68["catch"](2);

                                _iterator287.e(_context68.t2);

                              case 21:
                                _context68.prev = 21;

                                _iterator287.f();

                                return _context68.finish(21);

                              case 24:
                              case "end":
                                return _context68.stop();
                            }
                          }
                        }, t, null, [[2, 18, 21, 24]]);
                      })(this), "t0", 1);

                    case 1:
                    case "end":
                      return _context69.stop();
                  }
                }
              }, getViews, this);
            })
          }, {
            key: "_renderNode",
            value: function _renderNode(t) {
              var e;
              if (e = t.node ? this.tag && this.text : this.tag ? this.text : !this.text) throw new rn["default"]("ui-template-wrong-syntax", this);
              return this.text ? this._renderText(t) : this._renderElement(t);
            }
          }, {
            key: "_renderElement",
            value: function _renderElement(t) {
              var e = t.node;
              return e || (e = t.node = document.createElementNS(this.ns || Nd, this.tag)), this._renderAttributes(t), this._renderElementChildren(t), this._setUpListeners(t), e;
            }
          }, {
            key: "_renderText",
            value: function _renderText(t) {
              var e = t.node;
              return e ? t.revertData.text = e.textContent : e = t.node = document.createTextNode(""), zd(this.text) ? this._bindToObservable({
                schema: this.text,
                updater: function (t) {
                  return {
                    set: function set(e) {
                      t.textContent = e;
                    },
                    remove: function remove() {
                      t.textContent = "";
                    }
                  };
                }(e),
                data: t
              }) : e.textContent = this.text.join(""), e;
            }
          }, {
            key: "_renderAttributes",
            value: function _renderAttributes(t) {
              var e, n, i, o;
              if (!this.attributes) return;
              var r = t.node,
                  s = t.revertData;

              for (e in this.attributes) {
                if (i = r.getAttribute(e), n = this.attributes[e], s && (s.attributes[e] = i), o = Object(Ae.a)(n[0]) && n[0].ns ? n[0].ns : null, zd(n)) {
                  var _a15 = o ? n[0].value : n;

                  s && Xd(e) && _a15.unshift(i), this._bindToObservable({
                    schema: _a15,
                    updater: Vd(r, e, o),
                    data: t
                  });
                } else "style" == e && "string" != typeof n[0] ? this._renderStyleAttribute(n[0], t) : (s && i && Xd(e) && n.unshift(i), Jd(n = n.map(function (t) {
                  return t && t.value || t;
                }).reduce(function (t, e) {
                  return t.concat(e);
                }, []).reduce($d, "")) || r.setAttributeNS(o, e, n));
              }
            }
          }, {
            key: "_renderStyleAttribute",
            value: function _renderStyleAttribute(t, e) {
              var n = e.node;

              for (var _i137 in t) {
                var _o69 = t[_i137];
                zd(_o69) ? this._bindToObservable({
                  schema: [_o69],
                  updater: Ud(n, _i137),
                  data: e
                }) : n.style[_i137] = _o69;
              }
            }
          }, {
            key: "_renderElementChildren",
            value: function _renderElementChildren(t) {
              var e = t.node,
                  n = t.intoFragment ? document.createDocumentFragment() : e,
                  i = t.isApplying;
              var o = 0;

              var _iterator288 = _createForOfIteratorHelper(this.children),
                  _step288;

              try {
                for (_iterator288.s(); !(_step288 = _iterator288.n()).done;) {
                  var _r42 = _step288.value;

                  if (Qd(_r42)) {
                    if (!i) {
                      _r42.setParent(e);

                      var _iterator289 = _createForOfIteratorHelper(_r42),
                          _step289;

                      try {
                        for (_iterator289.s(); !(_step289 = _iterator289.n()).done;) {
                          var _t209 = _step289.value;
                          n.appendChild(_t209.element);
                        }
                      } catch (err) {
                        _iterator289.e(err);
                      } finally {
                        _iterator289.f();
                      }
                    }
                  } else if (Gd(_r42)) i || (_r42.isRendered || _r42.render(), n.appendChild(_r42.element));else if (zo(_r42)) n.appendChild(_r42);else if (i) {
                    var _e199 = {
                      children: [],
                      bindings: [],
                      attributes: {}
                    };
                    t.revertData.children.push(_e199), _r42._renderNode({
                      node: n.childNodes[o++],
                      isApplying: !0,
                      revertData: _e199
                    });
                  } else n.appendChild(_r42.render());
                }
              } catch (err) {
                _iterator288.e(err);
              } finally {
                _iterator288.f();
              }

              t.intoFragment && e.appendChild(n);
            }
          }, {
            key: "_setUpListeners",
            value: function _setUpListeners(t) {
              var _this152 = this;

              if (this.eventListeners) {
                var _loop5 = function _loop5(_e200) {
                  var n = _this152.eventListeners[_e200].map(function (n) {
                    var _e200$split = _e200.split("@"),
                        _e200$split2 = _slicedToArray(_e200$split, 2),
                        i = _e200$split2[0],
                        o = _e200$split2[1];

                    return n.activateDomEventListener(i, o, t);
                  });

                  t.revertData && t.revertData.bindings.push(n);
                };

                for (var _e200 in this.eventListeners) {
                  _loop5(_e200);
                }
              }
            }
          }, {
            key: "_bindToObservable",
            value: function _bindToObservable(_ref35) {
              var t = _ref35.schema,
                  e = _ref35.updater,
                  n = _ref35.data;
              var i = n.revertData;
              Fd(t, e, n);
              var o = t.filter(function (t) {
                return !Jd(t);
              }).filter(function (t) {
                return t.observable;
              }).map(function (i) {
                return i.activateAttributeListener(t, e, n);
              });
              i && i.bindings.push(o);
            }
          }, {
            key: "_revertTemplateFromNode",
            value: function _revertTemplateFromNode(t, e) {
              var _iterator290 = _createForOfIteratorHelper(e.bindings),
                  _step290;

              try {
                for (_iterator290.s(); !(_step290 = _iterator290.n()).done;) {
                  var _t210 = _step290.value;

                  var _iterator291 = _createForOfIteratorHelper(_t210),
                      _step291;

                  try {
                    for (_iterator291.s(); !(_step291 = _iterator291.n()).done;) {
                      var _e201 = _step291.value;

                      _e201();
                    }
                  } catch (err) {
                    _iterator291.e(err);
                  } finally {
                    _iterator291.f();
                  }
                }
              } catch (err) {
                _iterator290.e(err);
              } finally {
                _iterator290.f();
              }

              if (e.text) t.textContent = e.text;else {
                for (var _n183 in e.attributes) {
                  var _i138 = e.attributes[_n183];
                  null === _i138 ? t.removeAttribute(_n183) : t.setAttribute(_n183, _i138);
                }

                for (var _n184 = 0; _n184 < e.children.length; ++_n184) {
                  this._revertTemplateFromNode(t.childNodes[_n184], e.children[_n184]);
                }
              }
            }
          }], [{
            key: "bind",
            value: function bind(t, e) {
              return {
                to: function to(n, i) {
                  return new Bd({
                    eventNameOrFunction: n,
                    attribute: n,
                    observable: t,
                    emitter: e,
                    callback: i
                  });
                },
                "if": function _if(n, i, o) {
                  return new Ld({
                    observable: t,
                    emitter: e,
                    attribute: n,
                    valueIfTrue: i,
                    callback: o
                  });
                }
              };
            }
          }, {
            key: "extend",
            value: function extend(t, e) {
              if (t._isRendered) throw new rn["default"]("template-extend-render", [this, t]);
              !function t(e, n) {
                var _e$text;

                n.attributes && (e.attributes || (e.attributes = {}), Yd(e.attributes, n.attributes));
                n.eventListeners && (e.eventListeners || (e.eventListeners = {}), Yd(e.eventListeners, n.eventListeners));
                n.text && (_e$text = e.text).push.apply(_e$text, _toConsumableArray(n.text));

                if (n.children && n.children.length) {
                  if (e.children.length != n.children.length) throw new rn["default"]("ui-template-extend-children-mismatch", e);
                  var _i139 = 0;

                  var _iterator292 = _createForOfIteratorHelper(n.children),
                      _step292;

                  try {
                    for (_iterator292.s(); !(_step292 = _iterator292.n()).done;) {
                      var _o70 = _step292.value;
                      t(e.children[_i139++], _o70);
                    }
                  } catch (err) {
                    _iterator292.e(err);
                  } finally {
                    _iterator292.f();
                  }
                }
              }(t, qd(Hd(e)));
            }
          }]);

          return Dd;
        }();

        Object(o["default"])(Dd, sn["default"]);

        var jd = /*#__PURE__*/function () {
          function jd(t) {
            _classCallCheck(this, jd);

            Object.assign(this, t);
          }

          _createClass(jd, [{
            key: "getValue",
            value: function getValue(t) {
              var e = this.observable[this.attribute];
              return this.callback ? this.callback(e, t) : e;
            }
          }, {
            key: "activateAttributeListener",
            value: function activateAttributeListener(t, e, n) {
              var _this153 = this;

              var i = function i() {
                return Fd(t, e, n);
              };

              return this.emitter.listenTo(this.observable, "change:" + this.attribute, i), function () {
                _this153.emitter.stopListening(_this153.observable, "change:" + _this153.attribute, i);
              };
            }
          }]);

          return jd;
        }();

        var Bd = /*#__PURE__*/function (_jd) {
          _inherits(Bd, _jd);

          var _super103 = _createSuper(Bd);

          function Bd() {
            _classCallCheck(this, Bd);

            return _super103.apply(this, arguments);
          }

          _createClass(Bd, [{
            key: "activateDomEventListener",
            value: function activateDomEventListener(t, e, n) {
              var _this154 = this;

              var i = function i(t, n) {
                e && !n.target.matches(e) || ("function" == typeof _this154.eventNameOrFunction ? _this154.eventNameOrFunction(n) : _this154.observable.fire(_this154.eventNameOrFunction, n));
              };

              return this.emitter.listenTo(n.node, t, i), function () {
                _this154.emitter.stopListening(n.node, t, i);
              };
            }
          }]);

          return Bd;
        }(jd);

        var Ld = /*#__PURE__*/function (_jd2) {
          _inherits(Ld, _jd2);

          var _super104 = _createSuper(Ld);

          function Ld() {
            _classCallCheck(this, Ld);

            return _super104.apply(this, arguments);
          }

          _createClass(Ld, [{
            key: "getValue",
            value: function getValue(t) {
              return !Jd(_get3(_getPrototypeOf(Ld.prototype), "getValue", this).call(this, t)) && (this.valueIfTrue || !0);
            }
          }]);

          return Ld;
        }(jd);

        function zd(t) {
          return !!t && (t.value && (t = t.value), Array.isArray(t) ? t.some(zd) : t instanceof jd);
        }

        function Fd(t, e, _ref36) {
          var n = _ref36.node;

          var i = function (t, e) {
            return t.map(function (t) {
              return t instanceof jd ? t.getValue(e) : t;
            });
          }(t, n);

          Jd(i = 1 == t.length && t[0] instanceof Ld ? i[0] : i.reduce($d, "")) ? e.remove() : e.set(i);
        }

        function Vd(t, e, n) {
          return {
            set: function set(i) {
              t.setAttributeNS(n, e, i);
            },
            remove: function remove() {
              t.removeAttributeNS(n, e);
            }
          };
        }

        function Ud(t, e) {
          return {
            set: function set(n) {
              t.style[e] = n;
            },
            remove: function remove() {
              t.style[e] = null;
            }
          };
        }

        function Hd(t) {
          return Xe(t, function (t) {
            if (t && (t instanceof jd || Kd(t) || Gd(t) || Qd(t))) return t;
          });
        }

        function qd(t) {
          if ("string" == typeof t ? t = function (t) {
            return {
              text: [t]
            };
          }(t) : t.text && function (t) {
            t.text = cn(t.text);
          }(t), t.on && (t.eventListeners = function (t) {
            for (var _e202 in t) {
              Wd(t, _e202);
            }

            return t;
          }(t.on), delete t.on), !t.text) {
            t.attributes && function (t) {
              for (var _e204 in t) {
                t[_e204].value && (t[_e204].value = cn(t[_e204].value)), Wd(t, _e204);
              }
            }(t.attributes);
            var _e203 = [];
            if (t.children) if (Qd(t.children)) _e203.push(t.children);else {
              var _iterator293 = _createForOfIteratorHelper(t.children),
                  _step293;

              try {
                for (_iterator293.s(); !(_step293 = _iterator293.n()).done;) {
                  var _n185 = _step293.value;
                  Kd(_n185) || Gd(_n185) || zo(_n185) ? _e203.push(_n185) : _e203.push(new Dd(_n185));
                }
              } catch (err) {
                _iterator293.e(err);
              } finally {
                _iterator293.f();
              }
            }
            t.children = _e203;
          }

          return t;
        }

        function Wd(t, e) {
          t[e] = cn(t[e]);
        }

        function $d(t, e) {
          return Jd(e) ? t : Jd(t) ? e : "".concat(t, " ").concat(e);
        }

        function Yd(t, e) {
          for (var _n186 in e) {
            var _t$_n;

            t[_n186] ? (_t$_n = t[_n186]).push.apply(_t$_n, _toConsumableArray(e[_n186])) : t[_n186] = e[_n186];
          }
        }

        function Jd(t) {
          return !t && 0 !== t;
        }

        function Gd(t) {
          return t instanceof Pd;
        }

        function Kd(t) {
          return t instanceof Dd;
        }

        function Qd(t) {
          return t instanceof Md;
        }

        function Xd(t) {
          return "class" == t || "style" == t;
        }

        var Zd = /*#__PURE__*/function (_Md) {
          _inherits(Zd, _Md);

          var _super105 = _createSuper(Zd);

          function Zd(t) {
            var _this155;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

            _classCallCheck(this, Zd);

            _this155 = _super105.call(this, e), _this155.locale = t;
            return _this155;
          }

          _createClass(Zd, [{
            key: "attachToDom",
            value: function attachToDom() {
              this._bodyCollectionContainer = new Dd({
                tag: "div",
                attributes: {
                  "class": ["ck", "ck-reset_all", "ck-body", "ck-rounded-corners"],
                  dir: this.locale.uiLanguageDirection
                },
                children: this
              }).render();
              var t = document.querySelector(".ck-body-wrapper");
              t || (t = function (t, e) {
                var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
                var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
                var o = n && n.xmlns,
                    r = o ? t.createElementNS(o, e) : t.createElement(e);

                for (var _t211 in n) {
                  r.setAttribute(_t211, n[_t211]);
                }

                !ps(i) && Object(yn.a)(i) || (i = [i]);

                var _iterator294 = _createForOfIteratorHelper(i),
                    _step294;

                try {
                  for (_iterator294.s(); !(_step294 = _iterator294.n()).done;) {
                    var _e205 = _step294.value;
                    ps(_e205) && (_e205 = t.createTextNode(_e205)), r.appendChild(_e205);
                  }
                } catch (err) {
                  _iterator294.e(err);
                } finally {
                  _iterator294.f();
                }

                return r;
              }(document, "div", {
                "class": "ck-body-wrapper"
              }), document.body.appendChild(t)), t.appendChild(this._bodyCollectionContainer);
            }
          }, {
            key: "detachFromDom",
            value: function detachFromDom() {
              _get3(_getPrototypeOf(Zd.prototype), "destroy", this).call(this), this._bodyCollectionContainer && this._bodyCollectionContainer.remove();
              var t = document.querySelector(".ck-body-wrapper");
              t && 0 == t.childElementCount && t.remove();
            }
          }]);

          return Zd;
        }(Md);

        n(182);

        var tu = /*#__PURE__*/function (_Pd) {
          _inherits(tu, _Pd);

          var _super106 = _createSuper(tu);

          function tu() {
            var _this156;

            _classCallCheck(this, tu);

            _this156 = _super106.call(this);
            var t = _this156.bindTemplate;
            _this156.set("content", ""), _this156.set("viewBox", "0 0 20 20"), _this156.set("fillColor", ""), _this156.setTemplate({
              tag: "svg",
              ns: "http://www.w3.org/2000/svg",
              attributes: {
                "class": ["ck", "ck-icon"],
                viewBox: t.to("viewBox")
              }
            });
            return _this156;
          }

          _createClass(tu, [{
            key: "render",
            value: function render() {
              var _this157 = this;

              _get3(_getPrototypeOf(tu.prototype), "render", this).call(this), this._updateXMLContent(), this._colorFillPaths(), this.on("change:content", function () {
                _this157._updateXMLContent(), _this157._colorFillPaths();
              }), this.on("change:fillColor", function () {
                _this157._colorFillPaths();
              });
            }
          }, {
            key: "_updateXMLContent",
            value: function _updateXMLContent() {
              if (this.content) {
                var _t212 = new DOMParser().parseFromString(this.content.trim(), "image/svg+xml").querySelector("svg"),
                    _e206 = _t212.getAttribute("viewBox");

                for (_e206 && (this.viewBox = _e206), this.element.innerHTML = ""; _t212.childNodes.length > 0;) {
                  this.element.appendChild(_t212.childNodes[0]);
                }
              }
            }
          }, {
            key: "_colorFillPaths",
            value: function _colorFillPaths() {
              var _this158 = this;

              this.fillColor && this.element.querySelectorAll(".ck-icon__fill").forEach(function (t) {
                t.style.fill = _this158.fillColor;
              });
            }
          }]);

          return tu;
        }(Pd);

        n(184);

        var eu = /*#__PURE__*/function (_Pd2) {
          _inherits(eu, _Pd2);

          var _super107 = _createSuper(eu);

          function eu(t) {
            var _this159;

            _classCallCheck(this, eu);

            _this159 = _super107.call(this, t), _this159.set("text", ""), _this159.set("position", "s");
            var e = _this159.bindTemplate;

            _this159.setTemplate({
              tag: "span",
              attributes: {
                "class": ["ck", "ck-tooltip", e.to("position", function (t) {
                  return "ck-tooltip_" + t;
                }), e["if"]("text", "ck-hidden", function (t) {
                  return !t.trim();
                })]
              },
              children: [{
                tag: "span",
                attributes: {
                  "class": ["ck", "ck-tooltip__text"]
                },
                children: [{
                  text: e.to("text")
                }]
              }]
            });

            return _this159;
          }

          return eu;
        }(Pd);

        n(186);

        var nu = /*#__PURE__*/function (_Pd3) {
          _inherits(nu, _Pd3);

          var _super108 = _createSuper(nu);

          function nu(t) {
            var _this160;

            _classCallCheck(this, nu);

            _this160 = _super108.call(this, t);
            var e = _this160.bindTemplate,
                n = Object(Xo.a)();
            _this160.set("class"), _this160.set("labelStyle"), _this160.set("icon"), _this160.set("isEnabled", !0), _this160.set("isOn", !1), _this160.set("isVisible", !0), _this160.set("isToggleable", !1), _this160.set("keystroke"), _this160.set("label"), _this160.set("tabindex", -1), _this160.set("tooltip"), _this160.set("tooltipPosition", "s"), _this160.set("type", "button"), _this160.set("withText", !1), _this160.set("withKeystroke", !1), _this160.children = _this160.createCollection(), _this160.tooltipView = _this160._createTooltipView(), _this160.labelView = _this160._createLabelView(n), _this160.iconView = new tu(), _this160.iconView.extendTemplate({
              attributes: {
                "class": "ck-button__icon"
              }
            }), _this160.keystrokeView = _this160._createKeystrokeView(), _this160.bind("_tooltipString").to(_assertThisInitialized(_this160), "tooltip", _assertThisInitialized(_this160), "label", _assertThisInitialized(_this160), "keystroke", _this160._getTooltipString.bind(_assertThisInitialized(_this160))), _this160.setTemplate({
              tag: "button",
              attributes: {
                "class": ["ck", "ck-button", e.to("class"), e["if"]("isEnabled", "ck-disabled", function (t) {
                  return !t;
                }), e["if"]("isVisible", "ck-hidden", function (t) {
                  return !t;
                }), e.to("isOn", function (t) {
                  return t ? "ck-on" : "ck-off";
                }), e["if"]("withText", "ck-button_with-text"), e["if"]("withKeystroke", "ck-button_with-keystroke")],
                type: e.to("type", function (t) {
                  return t || "button";
                }),
                tabindex: e.to("tabindex"),
                "aria-labelledby": "ck-editor__aria-label_".concat(n),
                "aria-disabled": e["if"]("isEnabled", !0, function (t) {
                  return !t;
                }),
                "aria-pressed": e.to("isOn", function (t) {
                  return !!_this160.isToggleable && String(t);
                })
              },
              children: _this160.children,
              on: {
                mousedown: e.to(function (t) {
                  t.preventDefault();
                }),
                click: e.to(function (t) {
                  _this160.isEnabled ? _this160.fire("execute") : t.preventDefault();
                })
              }
            });
            return _this160;
          }

          _createClass(nu, [{
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(nu.prototype), "render", this).call(this), this.icon && (this.iconView.bind("content").to(this, "icon"), this.children.add(this.iconView)), this.children.add(this.tooltipView), this.children.add(this.labelView), this.withKeystroke && this.keystroke && this.children.add(this.keystrokeView);
            }
          }, {
            key: "focus",
            value: function focus() {
              this.element.focus();
            }
          }, {
            key: "_createTooltipView",
            value: function _createTooltipView() {
              var t = new eu();
              return t.bind("text").to(this, "_tooltipString"), t.bind("position").to(this, "tooltipPosition"), t;
            }
          }, {
            key: "_createLabelView",
            value: function _createLabelView(t) {
              var e = new Pd(),
                  n = this.bindTemplate;
              return e.setTemplate({
                tag: "span",
                attributes: {
                  "class": ["ck", "ck-button__label"],
                  style: n.to("labelStyle"),
                  id: "ck-editor__aria-label_".concat(t)
                },
                children: [{
                  text: this.bindTemplate.to("label")
                }]
              }), e;
            }
          }, {
            key: "_createKeystrokeView",
            value: function _createKeystrokeView() {
              var t = new Pd();
              return t.setTemplate({
                tag: "span",
                attributes: {
                  "class": ["ck", "ck-button__keystroke"]
                },
                children: [{
                  text: this.bindTemplate.to("keystroke", function (t) {
                    return oo(t);
                  })
                }]
              }), t;
            }
          }, {
            key: "_getTooltipString",
            value: function _getTooltipString(t, e, n) {
              return t ? "string" == typeof t ? t : (n && (n = oo(n)), t instanceof Function ? t(e, n) : "".concat(e).concat(n ? " (".concat(n, ")") : "")) : "";
            }
          }]);

          return nu;
        }(Pd);

        n(188);

        var iu = /*#__PURE__*/function (_nu) {
          _inherits(iu, _nu);

          var _super109 = _createSuper(iu);

          function iu(t) {
            var _this161;

            _classCallCheck(this, iu);

            _this161 = _super109.call(this, t), _this161.isToggleable = !0, _this161.toggleSwitchView = _this161._createToggleView(), _this161.extendTemplate({
              attributes: {
                "class": "ck-switchbutton"
              }
            });
            return _this161;
          }

          _createClass(iu, [{
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(iu.prototype), "render", this).call(this), this.children.add(this.toggleSwitchView);
            }
          }, {
            key: "_createToggleView",
            value: function _createToggleView() {
              var t = new Pd();
              return t.setTemplate({
                tag: "span",
                attributes: {
                  "class": ["ck", "ck-button__toggle"]
                },
                children: [{
                  tag: "span",
                  attributes: {
                    "class": ["ck", "ck-button__toggle__inner"]
                  }
                }]
              }), t;
            }
          }]);

          return iu;
        }(nu);

        function ou(t) {
          return t.map(ru).filter(function (t) {
            return !!t;
          });
        }

        function ru(t) {
          return "string" == typeof t ? {
            model: t,
            label: t,
            hasBorder: !1,
            view: {
              name: "span",
              styles: {
                color: t
              }
            }
          } : {
            model: t.color,
            label: t.label || t.color,
            hasBorder: void 0 !== t.hasBorder && t.hasBorder,
            view: {
              name: "span",
              styles: {
                color: "".concat(t.color)
              }
            }
          };
        }

        n(145);

        var su = /*#__PURE__*/function () {
          function su(t) {
            var _this162 = this;

            _classCallCheck(this, su);

            if (Object.assign(this, t), t.actions && t.keystrokeHandler) {
              var _loop6 = function _loop6(_e207) {
                var n = t.actions[_e207];
                "string" == typeof n && (n = [n]);

                var _iterator295 = _createForOfIteratorHelper(n),
                    _step295;

                try {
                  for (_iterator295.s(); !(_step295 = _iterator295.n()).done;) {
                    var _i140 = _step295.value;
                    t.keystrokeHandler.set(_i140, function (t, n) {
                      _this162[_e207](), n();
                    });
                  }
                } catch (err) {
                  _iterator295.e(err);
                } finally {
                  _iterator295.f();
                }
              };

              for (var _e207 in t.actions) {
                _loop6(_e207);
              }
            }
          }

          _createClass(su, [{
            key: "first",
            get: function get() {
              return this.focusables.find(au) || null;
            }
          }, {
            key: "last",
            get: function get() {
              return this.focusables.filter(au).slice(-1)[0] || null;
            }
          }, {
            key: "next",
            get: function get() {
              return this._getFocusableItem(1);
            }
          }, {
            key: "previous",
            get: function get() {
              return this._getFocusableItem(-1);
            }
          }, {
            key: "current",
            get: function get() {
              var _this163 = this;

              var t = null;
              return null === this.focusTracker.focusedElement ? null : (this.focusables.find(function (e, n) {
                var i = e.element === _this163.focusTracker.focusedElement;
                return i && (t = n), i;
              }), t);
            }
          }, {
            key: "focusFirst",
            value: function focusFirst() {
              this._focus(this.first);
            }
          }, {
            key: "focusLast",
            value: function focusLast() {
              this._focus(this.last);
            }
          }, {
            key: "focusNext",
            value: function focusNext() {
              this._focus(this.next);
            }
          }, {
            key: "focusPrevious",
            value: function focusPrevious() {
              this._focus(this.previous);
            }
          }, {
            key: "_focus",
            value: function _focus(t) {
              t && t.focus();
            }
          }, {
            key: "_getFocusableItem",
            value: function _getFocusableItem(t) {
              var e = this.current,
                  n = this.focusables.length;
              if (!n) return null;
              if (null === e) return this[1 === t ? "first" : "last"];
              var i = (e + n + t) % n;

              do {
                var _e208 = this.focusables.get(i);

                if (au(_e208)) return _e208;
                i = (i + n + t) % n;
              } while (i !== e);

              return null;
            }
          }]);

          return su;
        }();

        function au(t) {
          return !(!t.focus || "none" == Ho.window.getComputedStyle(t.element).display);
        }

        n(190);
        var cu = n(66),
            lu = n.n(cu);

        var du = /*#__PURE__*/function (_nu2) {
          _inherits(du, _nu2);

          var _super110 = _createSuper(du);

          function du(t) {
            var _this164;

            _classCallCheck(this, du);

            _this164 = _super110.call(this, t), _this164.arrowView = _this164._createArrowView(), _this164.extendTemplate({
              attributes: {
                "aria-haspopup": !0
              }
            }), _this164.delegate("execute").to(_assertThisInitialized(_this164), "open");
            return _this164;
          }

          _createClass(du, [{
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(du.prototype), "render", this).call(this), this.children.add(this.arrowView);
            }
          }, {
            key: "_createArrowView",
            value: function _createArrowView() {
              var t = new tu();
              return t.content = lu.a, t.extendTemplate({
                attributes: {
                  "class": "ck-dropdown__arrow"
                }
              }), t;
            }
          }]);

          return du;
        }(nu);

        n(192);

        var uu = /*#__PURE__*/function (_Pd4) {
          _inherits(uu, _Pd4);

          var _super111 = _createSuper(uu);

          function uu(t) {
            var _this165;

            _classCallCheck(this, uu);

            _this165 = _super111.call(this, t);
            var e = _this165.bindTemplate;
            _this165.set("class"), _this165.set("icon"), _this165.set("isEnabled", !0), _this165.set("isOn", !1), _this165.set("isToggleable", !1), _this165.set("isVisible", !0), _this165.set("keystroke"), _this165.set("label"), _this165.set("tabindex", -1), _this165.set("tooltip"), _this165.set("tooltipPosition", "s"), _this165.set("type", "button"), _this165.set("withText", !1), _this165.children = _this165.createCollection(), _this165.actionView = _this165._createActionView(), _this165.arrowView = _this165._createArrowView(), _this165.keystrokes = new Is(), _this165.focusTracker = new Ss(), _this165.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-splitbutton", e.to("class"), e["if"]("isVisible", "ck-hidden", function (t) {
                  return !t;
                }), _this165.arrowView.bindTemplate["if"]("isOn", "ck-splitbutton_open")]
              },
              children: _this165.children
            });
            return _this165;
          }

          _createClass(uu, [{
            key: "render",
            value: function render() {
              var _this166 = this;

              _get3(_getPrototypeOf(uu.prototype), "render", this).call(this), this.children.add(this.actionView), this.children.add(this.arrowView), this.focusTracker.add(this.actionView.element), this.focusTracker.add(this.arrowView.element), this.keystrokes.listenTo(this.element), this.keystrokes.set("arrowright", function (t, e) {
                _this166.focusTracker.focusedElement === _this166.actionView.element && (_this166.arrowView.focus(), e());
              }), this.keystrokes.set("arrowleft", function (t, e) {
                _this166.focusTracker.focusedElement === _this166.arrowView.element && (_this166.actionView.focus(), e());
              });
            }
          }, {
            key: "focus",
            value: function focus() {
              this.actionView.focus();
            }
          }, {
            key: "_createActionView",
            value: function _createActionView() {
              var t = new nu();
              return t.bind("icon", "isEnabled", "isOn", "isToggleable", "keystroke", "label", "tabindex", "tooltip", "tooltipPosition", "type", "withText").to(this), t.extendTemplate({
                attributes: {
                  "class": "ck-splitbutton__action"
                }
              }), t.delegate("execute").to(this), t;
            }
          }, {
            key: "_createArrowView",
            value: function _createArrowView() {
              var t = new nu(),
                  e = t.bindTemplate;
              return t.icon = lu.a, t.extendTemplate({
                attributes: {
                  "class": "ck-splitbutton__arrow",
                  "aria-haspopup": !0,
                  "aria-expanded": e.to("isOn", function (t) {
                    return String(t);
                  })
                }
              }), t.bind("isEnabled").to(this), t.delegate("execute").to(this, "open"), t;
            }
          }]);

          return uu;
        }(Pd);

        var hu = /*#__PURE__*/function (_Pd5) {
          _inherits(hu, _Pd5);

          var _super112 = _createSuper(hu);

          function hu(t) {
            var _this167;

            _classCallCheck(this, hu);

            _this167 = _super112.call(this, t);
            var e = _this167.bindTemplate;
            _this167.set("isVisible", !1), _this167.set("position", "se"), _this167.children = _this167.createCollection(), _this167.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-reset", "ck-dropdown__panel", e.to("position", function (t) {
                  return "ck-dropdown__panel_".concat(t);
                }), e["if"]("isVisible", "ck-dropdown__panel-visible")]
              },
              children: _this167.children,
              on: {
                selectstart: e.to(function (t) {
                  return t.preventDefault();
                })
              }
            });
            return _this167;
          }

          _createClass(hu, [{
            key: "focus",
            value: function focus() {
              this.children.length && this.children.first.focus();
            }
          }, {
            key: "focusLast",
            value: function focusLast() {
              if (this.children.length) {
                var _t213 = this.children.last;
                "function" == typeof _t213.focusLast ? _t213.focusLast() : _t213.focus();
              }
            }
          }]);

          return hu;
        }(Pd);

        n(194);

        function fu(_ref37) {
          var t = _ref37.element,
              e = _ref37.target,
              n = _ref37.positions,
              i = _ref37.limiter,
              o = _ref37.fitInViewport,
              r = _ref37.viewportOffsetConfig;
          Object(si.a)(e) && (e = e()), Object(si.a)(i) && (i = i());

          var s = function (t) {
            return t && t.parentNode ? t.offsetParent === Ho.document.body ? null : t.offsetParent : null;
          }(t),
              a = new ws(t);

          var c;
          var l = {
            targetRect: new ws(e),
            elementRect: a,
            positionedElementAncestor: s
          };

          if (i || o) {
            var _t214 = i && new ws(i).getVisible(),
                _e209 = o && function (t) {
              t = Object.assign({
                top: 0,
                bottom: 0,
                left: 0,
                right: 0
              }, t);
              var e = new ws(Ho.window);
              return e.top += t.top, e.height -= t.top, e.bottom -= t.bottom, e.height -= t.bottom, e;
            }(r);

            Object.assign(l, {
              limiterRect: _t214,
              viewportRect: _e209
            }), c = function (t, e) {
              var n = e.elementRect,
                  i = n.getArea(),
                  o = t.map(function (t) {
                return new mu(t, e);
              }).filter(function (t) {
                return !!t.name;
              });
              var r = 0,
                  s = null;

              var _iterator296 = _createForOfIteratorHelper(o),
                  _step296;

              try {
                for (_iterator296.s(); !(_step296 = _iterator296.n()).done;) {
                  var _t215 = _step296.value;
                  var _e210 = _t215._limiterIntersectionArea,
                      _n187 = _t215._viewportIntersectionArea;
                  if (_e210 === i) return _t215;

                  var _o71 = Math.pow(_n187, 2) + Math.pow(_e210, 2);

                  _o71 > r && (r = _o71, s = _t215);
                }
              } catch (err) {
                _iterator296.e(err);
              } finally {
                _iterator296.f();
              }

              return s;
            }(n, l) || new mu(n[0], l);
          } else c = new mu(n[0], l);

          return c;
        }

        function gu(t) {
          var _Ho$window2 = Ho.window,
              e = _Ho$window2.scrollX,
              n = _Ho$window2.scrollY;
          return t.clone().moveBy(e, n);
        }

        var mu = /*#__PURE__*/function () {
          function mu(t, e) {
            _classCallCheck(this, mu);

            var n = t(e.targetRect, e.elementRect, e.viewportRect);
            if (!n) return;
            var i = n.left,
                o = n.top,
                r = n.name,
                s = n.config;
            Object.assign(this, {
              name: r,
              config: s
            }), this._positioningFunctionCorrdinates = {
              left: i,
              top: o
            }, this._options = e;
          }

          _createClass(mu, [{
            key: "left",
            get: function get() {
              return this._absoluteRect.left;
            }
          }, {
            key: "top",
            get: function get() {
              return this._absoluteRect.top;
            }
          }, {
            key: "_limiterIntersectionArea",
            get: function get() {
              var t = this._options.limiterRect;

              if (t) {
                var _e211 = this._options.viewportRect;
                if (!_e211) return t.getIntersectionArea(this._rect);
                {
                  var _n188 = t.getIntersection(_e211);

                  if (_n188) return _n188.getIntersectionArea(this._rect);
                }
              }

              return 0;
            }
          }, {
            key: "_viewportIntersectionArea",
            get: function get() {
              var t = this._options.viewportRect;
              return t ? t.getIntersectionArea(this._rect) : 0;
            }
          }, {
            key: "_rect",
            get: function get() {
              return this._cachedRect ? this._cachedRect : (this._cachedRect = this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left, this._positioningFunctionCorrdinates.top), this._cachedRect);
            }
          }, {
            key: "_absoluteRect",
            get: function get() {
              return this._cachedAbsoluteRect ? this._cachedAbsoluteRect : (this._cachedAbsoluteRect = gu(this._rect), this._options.positionedElementAncestor && function (t, e) {
                var n = gu(new ws(e)),
                    i = ks(e);
                var o = 0,
                    r = 0;
                o -= n.left, r -= n.top, o += e.scrollLeft, r += e.scrollTop, o -= i.left, r -= i.top, t.moveBy(o, r);
              }(this._cachedAbsoluteRect, this._options.positionedElementAncestor), this._cachedAbsoluteRect);
            }
          }]);

          return mu;
        }();

        var pu = /*#__PURE__*/function (_Pd6) {
          _inherits(pu, _Pd6);

          var _super113 = _createSuper(pu);

          function pu(t, e, n) {
            var _this168;

            _classCallCheck(this, pu);

            _this168 = _super113.call(this, t);
            var i = _this168.bindTemplate;
            _this168.buttonView = e, _this168.panelView = n, _this168.set("isOpen", !1), _this168.set("isEnabled", !0), _this168.set("class"), _this168.set("id"), _this168.set("panelPosition", "auto"), _this168.keystrokes = new Is(), _this168.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-dropdown", i.to("class"), i["if"]("isEnabled", "ck-disabled", function (t) {
                  return !t;
                })],
                id: i.to("id"),
                "aria-describedby": i.to("ariaDescribedById")
              },
              children: [e, n]
            }), e.extendTemplate({
              attributes: {
                "class": ["ck-dropdown__button"]
              }
            });
            return _this168;
          }

          _createClass(pu, [{
            key: "render",
            value: function render() {
              var _this169 = this;

              _get3(_getPrototypeOf(pu.prototype), "render", this).call(this), this.listenTo(this.buttonView, "open", function () {
                _this169.isOpen = !_this169.isOpen;
              }), this.panelView.bind("isVisible").to(this, "isOpen"), this.on("change:isOpen", function () {
                _this169.isOpen && ("auto" === _this169.panelPosition ? _this169.panelView.position = pu._getOptimalPosition({
                  element: _this169.panelView.element,
                  target: _this169.buttonView.element,
                  fitInViewport: !0,
                  positions: _this169._panelPositions
                }).name : _this169.panelView.position = _this169.panelPosition);
              }), this.keystrokes.listenTo(this.element);

              var t = function t(_t216, e) {
                _this169.isOpen && (_this169.buttonView.focus(), _this169.isOpen = !1, e());
              };

              this.keystrokes.set("arrowdown", function (t, e) {
                _this169.buttonView.isEnabled && !_this169.isOpen && (_this169.isOpen = !0, e());
              }), this.keystrokes.set("arrowright", function (t, e) {
                _this169.isOpen && e();
              }), this.keystrokes.set("arrowleft", t), this.keystrokes.set("esc", t);
            }
          }, {
            key: "focus",
            value: function focus() {
              this.buttonView.focus();
            }
          }, {
            key: "_panelPositions",
            get: function get() {
              var _pu$defaultPanelPosit = pu.defaultPanelPositions,
                  t = _pu$defaultPanelPosit.south,
                  e = _pu$defaultPanelPosit.north,
                  n = _pu$defaultPanelPosit.southEast,
                  i = _pu$defaultPanelPosit.southWest,
                  o = _pu$defaultPanelPosit.northEast,
                  r = _pu$defaultPanelPosit.northWest,
                  s = _pu$defaultPanelPosit.southMiddleEast,
                  a = _pu$defaultPanelPosit.southMiddleWest,
                  c = _pu$defaultPanelPosit.northMiddleEast,
                  l = _pu$defaultPanelPosit.northMiddleWest;
              return "rtl" !== this.locale.uiLanguageDirection ? [n, i, s, a, t, o, r, c, l, e] : [i, n, a, s, t, r, o, l, c, e];
            }
          }]);

          return pu;
        }(Pd);

        pu.defaultPanelPositions = {
          south: function south(t, e) {
            return {
              top: t.bottom,
              left: t.left - (e.width - t.width) / 2,
              name: "s"
            };
          },
          southEast: function southEast(t) {
            return {
              top: t.bottom,
              left: t.left,
              name: "se"
            };
          },
          southWest: function southWest(t, e) {
            return {
              top: t.bottom,
              left: t.left - e.width + t.width,
              name: "sw"
            };
          },
          southMiddleEast: function southMiddleEast(t, e) {
            return {
              top: t.bottom,
              left: t.left - (e.width - t.width) / 4,
              name: "sme"
            };
          },
          southMiddleWest: function southMiddleWest(t, e) {
            return {
              top: t.bottom,
              left: t.left - 3 * (e.width - t.width) / 4,
              name: "smw"
            };
          },
          north: function north(t, e) {
            return {
              top: t.top - e.height,
              left: t.left - (e.width - t.width) / 2,
              name: "n"
            };
          },
          northEast: function northEast(t, e) {
            return {
              top: t.top - e.height,
              left: t.left,
              name: "ne"
            };
          },
          northWest: function northWest(t, e) {
            return {
              top: t.top - e.height,
              left: t.left - e.width + t.width,
              name: "nw"
            };
          },
          northMiddleEast: function northMiddleEast(t, e) {
            return {
              top: t.top - e.height,
              left: t.left - (e.width - t.width) / 4,
              name: "nme"
            };
          },
          northMiddleWest: function northMiddleWest(t, e) {
            return {
              top: t.top - e.height,
              left: t.left - 3 * (e.width - t.width) / 4,
              name: "nmw"
            };
          }
        }, pu._getOptimalPosition = fu;

        var bu = /*#__PURE__*/function (_Pd7) {
          _inherits(bu, _Pd7);

          var _super114 = _createSuper(bu);

          function bu(t) {
            var _this170;

            _classCallCheck(this, bu);

            _this170 = _super114.call(this, t), _this170.setTemplate({
              tag: "span",
              attributes: {
                "class": ["ck", "ck-toolbar__separator"]
              }
            });
            return _this170;
          }

          return bu;
        }(Pd);

        var ku = /*#__PURE__*/function (_Pd8) {
          _inherits(ku, _Pd8);

          var _super115 = _createSuper(ku);

          function ku(t) {
            var _this171;

            _classCallCheck(this, ku);

            _this171 = _super115.call(this, t), _this171.setTemplate({
              tag: "span",
              attributes: {
                "class": ["ck", "ck-toolbar__line-break"]
              }
            });
            return _this171;
          }

          return ku;
        }(Pd);

        function _u(t) {
          return Array.isArray(t) ? {
            items: t,
            removeItems: []
          } : t ? Object.assign({
            items: [],
            removeItems: []
          }, t) : {
            items: [],
            removeItems: []
          };
        }

        n(196);

        var wu = /*#__PURE__*/function (_Pd9) {
          _inherits(wu, _Pd9);

          var _super116 = _createSuper(wu);

          function wu(t, e) {
            var _this172;

            _classCallCheck(this, wu);

            _this172 = _super116.call(this, t);
            var n = _this172.bindTemplate,
                i = _this172.t;
            _this172.options = e || {}, _this172.set("ariaLabel", i("Editor toolbar")), _this172.set("maxWidth", "auto"), _this172.items = _this172.createCollection(), _this172.focusTracker = new Ss(), _this172.keystrokes = new Is(), _this172.set("class"), _this172.set("isCompact", !1), _this172.itemsView = new vu(t), _this172.children = _this172.createCollection(), _this172.children.add(_this172.itemsView), _this172.focusables = _this172.createCollection();
            var o = "rtl" === t.uiLanguageDirection;
            _this172._focusCycler = new su({
              focusables: _this172.focusables,
              focusTracker: _this172.focusTracker,
              keystrokeHandler: _this172.keystrokes,
              actions: {
                focusPrevious: [o ? "arrowright" : "arrowleft", "arrowup"],
                focusNext: [o ? "arrowleft" : "arrowright", "arrowdown"]
              }
            });
            var r = ["ck", "ck-toolbar", n.to("class"), n["if"]("isCompact", "ck-toolbar_compact")];
            _this172.options.shouldGroupWhenFull && _this172.options.isFloating && r.push("ck-toolbar_floating"), _this172.setTemplate({
              tag: "div",
              attributes: {
                "class": r,
                role: "toolbar",
                "aria-label": n.to("ariaLabel"),
                style: {
                  maxWidth: n.to("maxWidth")
                }
              },
              children: _this172.children,
              on: {
                mousedown: function (t) {
                  return t.bindTemplate.to(function (e) {
                    e.target === t.element && e.preventDefault();
                  });
                }(_assertThisInitialized(_this172))
              }
            }), _this172._behavior = _this172.options.shouldGroupWhenFull ? new xu(_assertThisInitialized(_this172)) : new yu(_assertThisInitialized(_this172));
            return _this172;
          }

          _createClass(wu, [{
            key: "render",
            value: function render() {
              var _this173 = this;

              _get3(_getPrototypeOf(wu.prototype), "render", this).call(this);

              var _iterator297 = _createForOfIteratorHelper(this.items),
                  _step297;

              try {
                for (_iterator297.s(); !(_step297 = _iterator297.n()).done;) {
                  var _t217 = _step297.value;
                  this.focusTracker.add(_t217.element);
                }
              } catch (err) {
                _iterator297.e(err);
              } finally {
                _iterator297.f();
              }

              this.items.on("add", function (t, e) {
                _this173.focusTracker.add(e.element);
              }), this.items.on("remove", function (t, e) {
                _this173.focusTracker.remove(e.element);
              }), this.keystrokes.listenTo(this.element), this._behavior.render(this);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              return this._behavior.destroy(), _get3(_getPrototypeOf(wu.prototype), "destroy", this).call(this);
            }
          }, {
            key: "focus",
            value: function focus() {
              this._focusCycler.focusFirst();
            }
          }, {
            key: "focusLast",
            value: function focusLast() {
              this._focusCycler.focusLast();
            }
          }, {
            key: "fillFromConfig",
            value: function fillFromConfig(t, e) {
              var _this174 = this;

              var n = _u(t),
                  i = n.items.filter(function (t, i, o) {
                return "|" === t || -1 === n.removeItems.indexOf(t) && ("-" === t ? !_this174.options.shouldGroupWhenFull || (Object(rn.logWarning)("toolbarview-line-break-ignored-when-grouping-items", o), !1) : !!e.has(t) || (Object(rn.logWarning)("toolbarview-item-unavailable", {
                  name: t
                }), !1));
              }),
                  o = this._cleanSeparators(i).map(function (t) {
                return "|" === t ? new bu() : "-" === t ? new ku() : e.create(t);
              });

              this.items.addMany(o);
            }
          }, {
            key: "_cleanSeparators",
            value: function _cleanSeparators(t) {
              var e = function e(t) {
                return "-" !== t && "|" !== t;
              },
                  n = t.length,
                  i = t.findIndex(e),
                  o = n - t.slice().reverse().findIndex(e);

              return t.slice(i, o).filter(function (t, n, i) {
                if (e(t)) return !0;
                return !(n > 0 && i[n - 1] === t);
              });
            }
          }]);

          return wu;
        }(Pd);

        var vu = /*#__PURE__*/function (_Pd10) {
          _inherits(vu, _Pd10);

          var _super117 = _createSuper(vu);

          function vu(t) {
            var _this175;

            _classCallCheck(this, vu);

            _this175 = _super117.call(this, t), _this175.children = _this175.createCollection(), _this175.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-toolbar__items"]
              },
              children: _this175.children
            });
            return _this175;
          }

          return vu;
        }(Pd);

        var yu = /*#__PURE__*/function () {
          function yu(t) {
            _classCallCheck(this, yu);

            var e = t.bindTemplate;
            t.set("isVertical", !1), t.itemsView.children.bindTo(t.items).using(function (t) {
              return t;
            }), t.focusables.bindTo(t.items).using(function (t) {
              return t;
            }), t.extendTemplate({
              attributes: {
                "class": [e["if"]("isVertical", "ck-toolbar_vertical")]
              }
            });
          }

          _createClass(yu, [{
            key: "render",
            value: function render() {}
          }, {
            key: "destroy",
            value: function destroy() {}
          }]);

          return yu;
        }();

        var xu = /*#__PURE__*/function () {
          function xu(t) {
            var _this176 = this;

            _classCallCheck(this, xu);

            this.view = t, this.viewChildren = t.children, this.viewFocusables = t.focusables, this.viewItemsView = t.itemsView, this.viewFocusTracker = t.focusTracker, this.viewLocale = t.locale, this.ungroupedItems = t.createCollection(), this.groupedItems = t.createCollection(), this.groupedItemsDropdown = this._createGroupedItemsDropdown(), this.resizeObserver = null, this.cachedPadding = null, this.shouldUpdateGroupingOnNextResize = !1, t.itemsView.children.bindTo(this.ungroupedItems).using(function (t) {
              return t;
            }), this.ungroupedItems.on("add", this._updateFocusCycleableItems.bind(this)), this.ungroupedItems.on("remove", this._updateFocusCycleableItems.bind(this)), t.children.on("add", this._updateFocusCycleableItems.bind(this)), t.children.on("remove", this._updateFocusCycleableItems.bind(this)), t.items.on("change", function (t, e) {
              var n = e.index;

              var _iterator298 = _createForOfIteratorHelper(e.removed),
                  _step298;

              try {
                for (_iterator298.s(); !(_step298 = _iterator298.n()).done;) {
                  var _t219 = _step298.value;
                  n >= _this176.ungroupedItems.length ? _this176.groupedItems.remove(_t219) : _this176.ungroupedItems.remove(_t219);
                }
              } catch (err) {
                _iterator298.e(err);
              } finally {
                _iterator298.f();
              }

              for (var _t218 = n; _t218 < n + e.added.length; _t218++) {
                var _i141 = e.added[_t218 - n];
                _t218 > _this176.ungroupedItems.length ? _this176.groupedItems.add(_i141, _t218 - _this176.ungroupedItems.length) : _this176.ungroupedItems.add(_i141, _t218);
              }

              _this176._updateGrouping();
            }), t.extendTemplate({
              attributes: {
                "class": ["ck-toolbar_grouping"]
              }
            });
          }

          _createClass(xu, [{
            key: "render",
            value: function render(t) {
              this.viewElement = t.element, this._enableGroupingOnResize(), this._enableGroupingOnMaxWidthChange(t);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.groupedItemsDropdown.destroy(), this.resizeObserver.destroy();
            }
          }, {
            key: "_updateGrouping",
            value: function _updateGrouping() {
              if (!this.viewElement.ownerDocument.body.contains(this.viewElement)) return;
              if (!this.viewElement.offsetParent) return void (this.shouldUpdateGroupingOnNextResize = !0);
              var t = this.groupedItems.length;
              var e;

              for (; this._areItemsOverflowing;) {
                this._groupLastItem(), e = !0;
              }

              if (!e && this.groupedItems.length) {
                for (; this.groupedItems.length && !this._areItemsOverflowing;) {
                  this._ungroupFirstItem();
                }

                this._areItemsOverflowing && this._groupLastItem();
              }

              this.groupedItems.length !== t && this.view.fire("groupedItemsUpdate");
            }
          }, {
            key: "_areItemsOverflowing",
            get: function get() {
              if (!this.ungroupedItems.length) return !1;
              var t = this.viewElement,
                  e = this.viewLocale.uiLanguageDirection,
                  n = new ws(t.lastChild),
                  i = new ws(t);

              if (!this.cachedPadding) {
                var _n189 = Ho.window.getComputedStyle(t),
                    _i142 = "ltr" === e ? "paddingRight" : "paddingLeft";

                this.cachedPadding = Number.parseInt(_n189[_i142]);
              }

              return "ltr" === e ? n.right > i.right - this.cachedPadding : n.left < i.left + this.cachedPadding;
            }
          }, {
            key: "_enableGroupingOnResize",
            value: function _enableGroupingOnResize() {
              var _this177 = this;

              var t;
              this.resizeObserver = new Cs(this.viewElement, function (e) {
                t && t === e.contentRect.width && !_this177.shouldUpdateGroupingOnNextResize || (_this177.shouldUpdateGroupingOnNextResize = !1, _this177._updateGrouping(), t = e.contentRect.width);
              }), this._updateGrouping();
            }
          }, {
            key: "_enableGroupingOnMaxWidthChange",
            value: function _enableGroupingOnMaxWidthChange(t) {
              var _this178 = this;

              t.on("change:maxWidth", function () {
                _this178._updateGrouping();
              });
            }
          }, {
            key: "_groupLastItem",
            value: function _groupLastItem() {
              this.groupedItems.length || (this.viewChildren.add(new bu()), this.viewChildren.add(this.groupedItemsDropdown), this.viewFocusTracker.add(this.groupedItemsDropdown.element)), this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last), 0);
            }
          }, {
            key: "_ungroupFirstItem",
            value: function _ungroupFirstItem() {
              this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)), this.groupedItems.length || (this.viewChildren.remove(this.groupedItemsDropdown), this.viewChildren.remove(this.viewChildren.last), this.viewFocusTracker.remove(this.groupedItemsDropdown.element));
            }
          }, {
            key: "_createGroupedItemsDropdown",
            value: function _createGroupedItemsDropdown() {
              var t = this.viewLocale,
                  e = t.t,
                  n = Eu(t);
              return n["class"] = "ck-toolbar__grouped-dropdown", n.panelPosition = "ltr" === t.uiLanguageDirection ? "sw" : "se", Su(n, []), n.buttonView.set({
                label: e("Show more items"),
                tooltip: !0,
                tooltipPosition: "rtl" === t.uiLanguageDirection ? "se" : "sw",
                icon: Ed.a
              }), n.toolbarView.items.bindTo(this.groupedItems).using(function (t) {
                return t;
              }), n;
            }
          }, {
            key: "_updateFocusCycleableItems",
            value: function _updateFocusCycleableItems() {
              var _this179 = this;

              this.viewFocusables.clear(), this.ungroupedItems.map(function (t) {
                _this179.viewFocusables.add(t);
              }), this.groupedItems.length && this.viewFocusables.add(this.groupedItemsDropdown);
            }
          }]);

          return xu;
        }();

        n(198);

        var Cu = /*#__PURE__*/function (_Pd11) {
          _inherits(Cu, _Pd11);

          var _super118 = _createSuper(Cu);

          function Cu() {
            var _this180;

            _classCallCheck(this, Cu);

            _this180 = _super118.call(this), _this180.items = _this180.createCollection(), _this180.focusTracker = new Ss(), _this180.keystrokes = new Is(), _this180._focusCycler = new su({
              focusables: _this180.items,
              focusTracker: _this180.focusTracker,
              keystrokeHandler: _this180.keystrokes,
              actions: {
                focusPrevious: "arrowup",
                focusNext: "arrowdown"
              }
            }), _this180.setTemplate({
              tag: "ul",
              attributes: {
                "class": ["ck", "ck-reset", "ck-list"]
              },
              children: _this180.items
            });
            return _this180;
          }

          _createClass(Cu, [{
            key: "render",
            value: function render() {
              var _this181 = this;

              _get3(_getPrototypeOf(Cu.prototype), "render", this).call(this);

              var _iterator299 = _createForOfIteratorHelper(this.items),
                  _step299;

              try {
                for (_iterator299.s(); !(_step299 = _iterator299.n()).done;) {
                  var _t220 = _step299.value;
                  this.focusTracker.add(_t220.element);
                }
              } catch (err) {
                _iterator299.e(err);
              } finally {
                _iterator299.f();
              }

              this.items.on("add", function (t, e) {
                _this181.focusTracker.add(e.element);
              }), this.items.on("remove", function (t, e) {
                _this181.focusTracker.remove(e.element);
              }), this.keystrokes.listenTo(this.element);
            }
          }, {
            key: "focus",
            value: function focus() {
              this._focusCycler.focusFirst();
            }
          }, {
            key: "focusLast",
            value: function focusLast() {
              this._focusCycler.focusLast();
            }
          }]);

          return Cu;
        }(Pd);

        var Tu = /*#__PURE__*/function (_Pd12) {
          _inherits(Tu, _Pd12);

          var _super119 = _createSuper(Tu);

          function Tu(t) {
            var _this182;

            _classCallCheck(this, Tu);

            _this182 = _super119.call(this, t), _this182.children = _this182.createCollection(), _this182.setTemplate({
              tag: "li",
              attributes: {
                "class": ["ck", "ck-list__item"]
              },
              children: _this182.children
            });
            return _this182;
          }

          _createClass(Tu, [{
            key: "focus",
            value: function focus() {
              this.children.first.focus();
            }
          }]);

          return Tu;
        }(Pd);

        var Au = /*#__PURE__*/function (_Pd13) {
          _inherits(Au, _Pd13);

          var _super120 = _createSuper(Au);

          function Au(t) {
            var _this183;

            _classCallCheck(this, Au);

            _this183 = _super120.call(this, t), _this183.setTemplate({
              tag: "li",
              attributes: {
                "class": ["ck", "ck-list__separator"]
              }
            });
            return _this183;
          }

          return Au;
        }(Pd);

        n(200), n(202);

        function Eu(t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : du;
          var n = new e(t),
              i = new hu(t),
              o = new pu(t, n, i);
          return n.bind("isEnabled").to(o), n instanceof du ? n.bind("isOn").to(o, "isOpen") : n.arrowView.bind("isOn").to(o, "isOpen"), function (t) {
            (function (t) {
              t.on("render", function () {
                Id({
                  emitter: t,
                  activator: function activator() {
                    return t.isOpen;
                  },
                  callback: function callback() {
                    t.isOpen = !1;
                  },
                  contextElements: [t.element]
                });
              });
            })(t), function (t) {
              t.on("execute", function (e) {
                e.source instanceof iu || (t.isOpen = !1);
              });
            }(t), function (t) {
              t.keystrokes.set("arrowdown", function (e, n) {
                t.isOpen && (t.panelView.focus(), n());
              }), t.keystrokes.set("arrowup", function (e, n) {
                t.isOpen && (t.panelView.focusLast(), n());
              });
            }(t);
          }(o), o;
        }

        function Su(t, e) {
          var n = t.locale,
              i = n.t,
              o = t.toolbarView = new wu(n);
          o.set("ariaLabel", i("Dropdown toolbar")), t.extendTemplate({
            attributes: {
              "class": ["ck-toolbar-dropdown"]
            }
          }), e.map(function (t) {
            return o.items.add(t);
          }), t.panelView.children.add(o), o.items.delegate("execute").to(t);
        }

        function Iu(t, e) {
          var n = t.locale,
              i = t.listView = new Cu(n);
          i.items.bindTo(e).using(function (_ref38) {
            var t = _ref38.type,
                e = _ref38.model;
            if ("separator" === t) return new Au(n);

            if ("button" === t || "switchbutton" === t) {
              var _o73;

              var _i143 = new Tu(n);

              var _o72;

              return (_o73 = _o72 = "button" === t ? new nu(n) : new iu(n)).bind.apply(_o73, _toConsumableArray(Object.keys(e))).to(e), _o72.delegate("execute").to(_i143), _i143.children.add(_o72), _i143;
            }
          }), t.panelView.children.add(i), i.items.delegate("execute").to(t);
        }

        n(204);

        var Ou = /*#__PURE__*/function (_Pd14) {
          _inherits(Ou, _Pd14);

          var _super121 = _createSuper(Ou);

          function Ou(t) {
            var _this184;

            _classCallCheck(this, Ou);

            _this184 = _super121.call(this, t), _this184.body = new Zd(t);
            return _this184;
          }

          _createClass(Ou, [{
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(Ou.prototype), "render", this).call(this), this.body.attachToDom();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              return this.body.detachFromDom(), _get3(_getPrototypeOf(Ou.prototype), "destroy", this).call(this);
            }
          }]);

          return Ou;
        }(Pd);

        n(206);

        var Ru = /*#__PURE__*/function (_Pd15) {
          _inherits(Ru, _Pd15);

          var _super122 = _createSuper(Ru);

          function Ru(t) {
            var _this185;

            _classCallCheck(this, Ru);

            _this185 = _super122.call(this, t), _this185.set("text"), _this185.set("for"), _this185.id = "ck-editor__label_".concat(Object(Xo.a)());
            var e = _this185.bindTemplate;

            _this185.setTemplate({
              tag: "label",
              attributes: {
                "class": ["ck", "ck-label"],
                id: _this185.id,
                "for": e.to("for")
              },
              children: [{
                text: e.to("text")
              }]
            });

            return _this185;
          }

          return Ru;
        }(Pd);

        var Mu = /*#__PURE__*/function (_Ou) {
          _inherits(Mu, _Ou);

          var _super123 = _createSuper(Mu);

          function Mu(t) {
            var _this186;

            _classCallCheck(this, Mu);

            _this186 = _super123.call(this, t), _this186.top = _this186.createCollection(), _this186.main = _this186.createCollection(), _this186._voiceLabelView = _this186._createVoiceLabel(), _this186.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-reset", "ck-editor", "ck-rounded-corners"],
                role: "application",
                dir: t.uiLanguageDirection,
                lang: t.uiLanguage,
                "aria-labelledby": _this186._voiceLabelView.id
              },
              children: [_this186._voiceLabelView, {
                tag: "div",
                attributes: {
                  "class": ["ck", "ck-editor__top", "ck-reset_all"],
                  role: "presentation"
                },
                children: _this186.top
              }, {
                tag: "div",
                attributes: {
                  "class": ["ck", "ck-editor__main"],
                  role: "presentation"
                },
                children: _this186.main
              }]
            });
            return _this186;
          }

          _createClass(Mu, [{
            key: "_createVoiceLabel",
            value: function _createVoiceLabel() {
              var t = this.t,
                  e = new Ru();
              return e.text = t("Rich Text Editor"), e.extendTemplate({
                attributes: {
                  "class": "ck-voice-label"
                }
              }), e;
            }
          }]);

          return Mu;
        }(Ou);

        var Pu = /*#__PURE__*/function (_Pd16) {
          _inherits(Pu, _Pd16);

          var _super124 = _createSuper(Pu);

          function Pu(t, e, n) {
            var _this187;

            _classCallCheck(this, Pu);

            _this187 = _super124.call(this, t), _this187.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-content", "ck-editor__editable", "ck-rounded-corners"],
                lang: t.contentLanguage,
                dir: t.contentLanguageDirection
              }
            }), _this187.name = null, _this187.set("isFocused", !1), _this187._editableElement = n, _this187._hasExternalElement = !!_this187._editableElement, _this187._editingView = e;
            return _this187;
          }

          _createClass(Pu, [{
            key: "render",
            value: function render() {
              var _this188 = this;

              _get3(_getPrototypeOf(Pu.prototype), "render", this).call(this), this._hasExternalElement ? this.template.apply(this.element = this._editableElement) : this._editableElement = this.element, this.on("change:isFocused", function () {
                return _this188._updateIsFocusedClasses();
              }), this._updateIsFocusedClasses();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._hasExternalElement && this.template.revert(this._editableElement), _get3(_getPrototypeOf(Pu.prototype), "destroy", this).call(this);
            }
          }, {
            key: "_updateIsFocusedClasses",
            value: function _updateIsFocusedClasses() {
              var t = this._editingView;

              function e(e) {
                t.change(function (n) {
                  var i = t.document.getRoot(e.name);
                  n.addClass(e.isFocused ? "ck-focused" : "ck-blurred", i), n.removeClass(e.isFocused ? "ck-blurred" : "ck-focused", i);
                });
              }

              t.isRenderingInProgress ? function n(i) {
                t.once("change:isRenderingInProgress", function (t, o, r) {
                  r ? n(i) : e(i);
                });
              }(this) : e(this);
            }
          }]);

          return Pu;
        }(Pd);

        var Nu = /*#__PURE__*/function (_Pu) {
          _inherits(Nu, _Pu);

          var _super125 = _createSuper(Nu);

          function Nu(t, e, n) {
            var _this189;

            _classCallCheck(this, Nu);

            _this189 = _super125.call(this, t, e, n), _this189.extendTemplate({
              attributes: {
                role: "textbox",
                "class": "ck-editor__editable_inline"
              }
            });
            return _this189;
          }

          _createClass(Nu, [{
            key: "render",
            value: function render() {
              var _this190 = this;

              _get3(_getPrototypeOf(Nu.prototype), "render", this).call(this);

              var t = this._editingView,
                  e = this.t;
              t.change(function (n) {
                var i = t.document.getRoot(_this190.name);
                n.setAttribute("aria-label", e("Rich Text Editor, %0", _this190.name), i);
              });
            }
          }]);

          return Nu;
        }(Pu);

        n(208);
        n(210);

        var Du = /*#__PURE__*/function (_Pd17) {
          _inherits(Du, _Pd17);

          var _super126 = _createSuper(Du);

          function Du(t) {
            var _this191;

            _classCallCheck(this, Du);

            _this191 = _super126.call(this, t), _this191.set("value"), _this191.set("id"), _this191.set("placeholder"), _this191.set("isReadOnly", !1), _this191.set("hasError", !1), _this191.set("ariaDescribedById"), _this191.focusTracker = new Ss(), _this191.bind("isFocused").to(_this191.focusTracker), _this191.set("isEmpty", !0);
            var e = _this191.bindTemplate;

            _this191.setTemplate({
              tag: "input",
              attributes: {
                type: "text",
                "class": ["ck", "ck-input", "ck-input-text", e["if"]("isFocused", "ck-input_focused"), e["if"]("isEmpty", "ck-input-text_empty"), e["if"]("hasError", "ck-error")],
                id: e.to("id"),
                placeholder: e.to("placeholder"),
                readonly: e.to("isReadOnly"),
                "aria-invalid": e["if"]("hasError", !0),
                "aria-describedby": e.to("ariaDescribedById")
              },
              on: {
                input: e.to("input"),
                change: e.to(_this191._updateIsEmpty.bind(_assertThisInitialized(_this191)))
              }
            });

            return _this191;
          }

          _createClass(Du, [{
            key: "render",
            value: function render() {
              var _this192 = this;

              _get3(_getPrototypeOf(Du.prototype), "render", this).call(this), this.focusTracker.add(this.element), this._setDomElementValue(this.value), this._updateIsEmpty(), this.on("change:value", function (t, e, n) {
                _this192._setDomElementValue(n), _this192._updateIsEmpty();
              });
            }
          }, {
            key: "select",
            value: function select() {
              this.element.select();
            }
          }, {
            key: "focus",
            value: function focus() {
              this.element.focus();
            }
          }, {
            key: "_updateIsEmpty",
            value: function _updateIsEmpty() {
              this.isEmpty = function (t) {
                return !t.value;
              }(this.element);
            }
          }, {
            key: "_setDomElementValue",
            value: function _setDomElementValue(t) {
              this.element.value = t || 0 === t ? t : "";
            }
          }]);

          return Du;
        }(Pd);

        n(212);

        var ju = /*#__PURE__*/function (_Pd18) {
          _inherits(ju, _Pd18);

          var _super127 = _createSuper(ju);

          function ju(t, e) {
            var _this193;

            _classCallCheck(this, ju);

            _this193 = _super127.call(this, t);
            var n = "ck-labeled-field-view-".concat(Object(Xo.a)()),
                i = "ck-labeled-field-view-status-".concat(Object(Xo.a)());
            _this193.fieldView = e(_assertThisInitialized(_this193), n, i), _this193.set("label"), _this193.set("isEnabled", !0), _this193.set("isEmpty", !0), _this193.set("isFocused", !1), _this193.set("errorText", null), _this193.set("infoText", null), _this193.set("class"), _this193.set("placeholder"), _this193.labelView = _this193._createLabelView(n), _this193.statusView = _this193._createStatusView(i), _this193.bind("_statusText").to(_assertThisInitialized(_this193), "errorText", _assertThisInitialized(_this193), "infoText", function (t, e) {
              return t || e;
            });
            var o = _this193.bindTemplate;

            _this193.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-labeled-field-view", o.to("class"), o["if"]("isEnabled", "ck-disabled", function (t) {
                  return !t;
                }), o["if"]("isEmpty", "ck-labeled-field-view_empty"), o["if"]("isFocused", "ck-labeled-field-view_focused"), o["if"]("placeholder", "ck-labeled-field-view_placeholder"), o["if"]("errorText", "ck-error")]
              },
              children: [{
                tag: "div",
                attributes: {
                  "class": ["ck", "ck-labeled-field-view__input-wrapper"]
                },
                children: [_this193.fieldView, _this193.labelView]
              }, _this193.statusView]
            });

            return _this193;
          }

          _createClass(ju, [{
            key: "_createLabelView",
            value: function _createLabelView(t) {
              var e = new Ru(this.locale);
              return e["for"] = t, e.bind("text").to(this, "label"), e;
            }
          }, {
            key: "_createStatusView",
            value: function _createStatusView(t) {
              var e = new Pd(this.locale),
                  n = this.bindTemplate;
              return e.setTemplate({
                tag: "div",
                attributes: {
                  "class": ["ck", "ck-labeled-field-view__status", n["if"]("errorText", "ck-labeled-field-view__status_error"), n["if"]("_statusText", "ck-hidden", function (t) {
                    return !t;
                  })],
                  id: t,
                  role: n["if"]("errorText", "alert")
                },
                children: [{
                  text: n.to("_statusText")
                }]
              }), e;
            }
          }, {
            key: "focus",
            value: function focus() {
              this.fieldView.focus();
            }
          }]);

          return ju;
        }(Pd);

        function Bu(t, e, n) {
          var i = new Du(t.locale);
          return i.set({
            id: e,
            ariaDescribedById: n
          }), i.bind("isReadOnly").to(t, "isEnabled", function (t) {
            return !t;
          }), i.bind("hasError").to(t, "errorText", function (t) {
            return !!t;
          }), i.on("input", function () {
            t.errorText = null;
          }), t.bind("isEmpty", "isFocused", "placeholder").to(i), i;
        }

        var Lu = /*#__PURE__*/function (_gn2) {
          _inherits(Lu, _gn2);

          var _super128 = _createSuper(Lu);

          function Lu() {
            _classCallCheck(this, Lu);

            return _super128.apply(this, arguments);
          }

          _createClass(Lu, [{
            key: "init",
            value: function init() {
              this.on("show:warning", function (t, e) {
                window.alert(e.message);
              }, {
                priority: "lowest"
              });
            }
          }, {
            key: "showSuccess",
            value: function showSuccess(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

              this._showNotification({
                message: t,
                type: "success",
                namespace: e.namespace,
                title: e.title
              });
            }
          }, {
            key: "showInfo",
            value: function showInfo(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

              this._showNotification({
                message: t,
                type: "info",
                namespace: e.namespace,
                title: e.title
              });
            }
          }, {
            key: "showWarning",
            value: function showWarning(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

              this._showNotification({
                message: t,
                type: "warning",
                namespace: e.namespace,
                title: e.title
              });
            }
          }, {
            key: "_showNotification",
            value: function _showNotification(t) {
              var e = "show:".concat(t.type) + (t.namespace ? ":".concat(t.namespace) : "");
              this.fire(e, {
                message: t.message,
                type: t.type,
                title: t.title || ""
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Notification";
            }
          }]);

          return Lu;
        }(gn);

        var zu = function zu(t, e) {
          _classCallCheck(this, zu);

          e && Object(tr.a)(this, e), t && this.set(t);
        };

        Object(o["default"])(zu, i["default"]);
        n(214);
        var Fu = As("px"),
            Vu = Ho.document.body;

        var Uu = /*#__PURE__*/function (_Pd19) {
          _inherits(Uu, _Pd19);

          var _super129 = _createSuper(Uu);

          function Uu(t) {
            var _this194;

            _classCallCheck(this, Uu);

            _this194 = _super129.call(this, t);
            var e = _this194.bindTemplate;
            _this194.set("top", 0), _this194.set("left", 0), _this194.set("position", "arrow_nw"), _this194.set("isVisible", !1), _this194.set("withArrow", !0), _this194.set("class"), _this194.content = _this194.createCollection(), _this194.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-balloon-panel", e.to("position", function (t) {
                  return "ck-balloon-panel_".concat(t);
                }), e["if"]("isVisible", "ck-balloon-panel_visible"), e["if"]("withArrow", "ck-balloon-panel_with-arrow"), e.to("class")],
                style: {
                  top: e.to("top", Fu),
                  left: e.to("left", Fu)
                }
              },
              children: _this194.content
            });
            return _this194;
          }

          _createClass(Uu, [{
            key: "show",
            value: function show() {
              this.isVisible = !0;
            }
          }, {
            key: "hide",
            value: function hide() {
              this.isVisible = !1;
            }
          }, {
            key: "attachTo",
            value: function attachTo(t) {
              this.show();

              var e = Uu.defaultPositions,
                  n = Object.assign({}, {
                element: this.element,
                positions: [e.southArrowNorth, e.southArrowNorthMiddleWest, e.southArrowNorthMiddleEast, e.southArrowNorthWest, e.southArrowNorthEast, e.northArrowSouth, e.northArrowSouthMiddleWest, e.northArrowSouthMiddleEast, e.northArrowSouthWest, e.northArrowSouthEast, e.viewportStickyNorth],
                limiter: Vu,
                fitInViewport: !0
              }, t),
                  i = Uu._getOptimalPosition(n),
                  o = parseInt(i.left),
                  r = parseInt(i.top),
                  s = i.name,
                  _i$config = i.config,
                  a = _i$config === void 0 ? {} : _i$config,
                  _a$withArrow = a.withArrow,
                  c = _a$withArrow === void 0 ? !0 : _a$withArrow;

              Object.assign(this, {
                top: r,
                left: o,
                position: s,
                withArrow: c
              });
            }
          }, {
            key: "pin",
            value: function pin(t) {
              var _this195 = this;

              this.unpin(), this._pinWhenIsVisibleCallback = function () {
                _this195.isVisible ? _this195._startPinning(t) : _this195._stopPinning();
              }, this._startPinning(t), this.listenTo(this, "change:isVisible", this._pinWhenIsVisibleCallback);
            }
          }, {
            key: "unpin",
            value: function unpin() {
              this._pinWhenIsVisibleCallback && (this._stopPinning(), this.stopListening(this, "change:isVisible", this._pinWhenIsVisibleCallback), this._pinWhenIsVisibleCallback = null, this.hide());
            }
          }, {
            key: "_startPinning",
            value: function _startPinning(t) {
              var _this196 = this;

              this.attachTo(t);
              var e = Hu(t.target),
                  n = t.limiter ? Hu(t.limiter) : Vu;
              this.listenTo(Ho.document, "scroll", function (i, o) {
                var r = o.target,
                    s = e && r.contains(e),
                    a = n && r.contains(n);
                !s && !a && e && n || _this196.attachTo(t);
              }, {
                useCapture: !0
              }), this.listenTo(Ho.window, "resize", function () {
                _this196.attachTo(t);
              });
            }
          }, {
            key: "_stopPinning",
            value: function _stopPinning() {
              this.stopListening(Ho.document, "scroll"), this.stopListening(Ho.window, "resize");
            }
          }]);

          return Uu;
        }(Pd);

        function Hu(t) {
          return Ze(t) ? t : bs(t) ? t.commonAncestorContainer : "function" == typeof t ? Hu(t()) : null;
        }

        function qu(t, e) {
          return t.top - e.height - Uu.arrowVerticalOffset;
        }

        function Wu(t) {
          return t.bottom + Uu.arrowVerticalOffset;
        }

        Uu.arrowHorizontalOffset = 25, Uu.arrowVerticalOffset = 10, Uu.stickyVerticalOffset = 20, Uu._getOptimalPosition = fu, Uu.defaultPositions = {
          northWestArrowSouthWest: function northWestArrowSouthWest(t, e) {
            return {
              top: qu(t, e),
              left: t.left - Uu.arrowHorizontalOffset,
              name: "arrow_sw"
            };
          },
          northWestArrowSouthMiddleWest: function northWestArrowSouthMiddleWest(t, e) {
            return {
              top: qu(t, e),
              left: t.left - .25 * e.width - Uu.arrowHorizontalOffset,
              name: "arrow_smw"
            };
          },
          northWestArrowSouth: function northWestArrowSouth(t, e) {
            return {
              top: qu(t, e),
              left: t.left - e.width / 2,
              name: "arrow_s"
            };
          },
          northWestArrowSouthMiddleEast: function northWestArrowSouthMiddleEast(t, e) {
            return {
              top: qu(t, e),
              left: t.left - .75 * e.width + Uu.arrowHorizontalOffset,
              name: "arrow_sme"
            };
          },
          northWestArrowSouthEast: function northWestArrowSouthEast(t, e) {
            return {
              top: qu(t, e),
              left: t.left - e.width + Uu.arrowHorizontalOffset,
              name: "arrow_se"
            };
          },
          northArrowSouthWest: function northArrowSouthWest(t, e) {
            return {
              top: qu(t, e),
              left: t.left + t.width / 2 - Uu.arrowHorizontalOffset,
              name: "arrow_sw"
            };
          },
          northArrowSouthMiddleWest: function northArrowSouthMiddleWest(t, e) {
            return {
              top: qu(t, e),
              left: t.left + t.width / 2 - .25 * e.width - Uu.arrowHorizontalOffset,
              name: "arrow_smw"
            };
          },
          northArrowSouth: function northArrowSouth(t, e) {
            return {
              top: qu(t, e),
              left: t.left + t.width / 2 - e.width / 2,
              name: "arrow_s"
            };
          },
          northArrowSouthMiddleEast: function northArrowSouthMiddleEast(t, e) {
            return {
              top: qu(t, e),
              left: t.left + t.width / 2 - .75 * e.width + Uu.arrowHorizontalOffset,
              name: "arrow_sme"
            };
          },
          northArrowSouthEast: function northArrowSouthEast(t, e) {
            return {
              top: qu(t, e),
              left: t.left + t.width / 2 - e.width + Uu.arrowHorizontalOffset,
              name: "arrow_se"
            };
          },
          northEastArrowSouthWest: function northEastArrowSouthWest(t, e) {
            return {
              top: qu(t, e),
              left: t.right - Uu.arrowHorizontalOffset,
              name: "arrow_sw"
            };
          },
          northEastArrowSouthMiddleWest: function northEastArrowSouthMiddleWest(t, e) {
            return {
              top: qu(t, e),
              left: t.right - .25 * e.width - Uu.arrowHorizontalOffset,
              name: "arrow_smw"
            };
          },
          northEastArrowSouth: function northEastArrowSouth(t, e) {
            return {
              top: qu(t, e),
              left: t.right - e.width / 2,
              name: "arrow_s"
            };
          },
          northEastArrowSouthMiddleEast: function northEastArrowSouthMiddleEast(t, e) {
            return {
              top: qu(t, e),
              left: t.right - .75 * e.width + Uu.arrowHorizontalOffset,
              name: "arrow_sme"
            };
          },
          northEastArrowSouthEast: function northEastArrowSouthEast(t, e) {
            return {
              top: qu(t, e),
              left: t.right - e.width + Uu.arrowHorizontalOffset,
              name: "arrow_se"
            };
          },
          southWestArrowNorthWest: function southWestArrowNorthWest(t, e) {
            return {
              top: Wu(t),
              left: t.left - Uu.arrowHorizontalOffset,
              name: "arrow_nw"
            };
          },
          southWestArrowNorthMiddleWest: function southWestArrowNorthMiddleWest(t, e) {
            return {
              top: Wu(t),
              left: t.left - .25 * e.width - Uu.arrowHorizontalOffset,
              name: "arrow_nmw"
            };
          },
          southWestArrowNorth: function southWestArrowNorth(t, e) {
            return {
              top: Wu(t),
              left: t.left - e.width / 2,
              name: "arrow_n"
            };
          },
          southWestArrowNorthMiddleEast: function southWestArrowNorthMiddleEast(t, e) {
            return {
              top: Wu(t),
              left: t.left - .75 * e.width + Uu.arrowHorizontalOffset,
              name: "arrow_nme"
            };
          },
          southWestArrowNorthEast: function southWestArrowNorthEast(t, e) {
            return {
              top: Wu(t),
              left: t.left - e.width + Uu.arrowHorizontalOffset,
              name: "arrow_ne"
            };
          },
          southArrowNorthWest: function southArrowNorthWest(t, e) {
            return {
              top: Wu(t),
              left: t.left + t.width / 2 - Uu.arrowHorizontalOffset,
              name: "arrow_nw"
            };
          },
          southArrowNorthMiddleWest: function southArrowNorthMiddleWest(t, e) {
            return {
              top: Wu(t),
              left: t.left + t.width / 2 - .25 * e.width - Uu.arrowHorizontalOffset,
              name: "arrow_nmw"
            };
          },
          southArrowNorth: function southArrowNorth(t, e) {
            return {
              top: Wu(t),
              left: t.left + t.width / 2 - e.width / 2,
              name: "arrow_n"
            };
          },
          southArrowNorthMiddleEast: function southArrowNorthMiddleEast(t, e) {
            return {
              top: Wu(t),
              left: t.left + t.width / 2 - .75 * e.width + Uu.arrowHorizontalOffset,
              name: "arrow_nme"
            };
          },
          southArrowNorthEast: function southArrowNorthEast(t, e) {
            return {
              top: Wu(t),
              left: t.left + t.width / 2 - e.width + Uu.arrowHorizontalOffset,
              name: "arrow_ne"
            };
          },
          southEastArrowNorthWest: function southEastArrowNorthWest(t, e) {
            return {
              top: Wu(t),
              left: t.right - Uu.arrowHorizontalOffset,
              name: "arrow_nw"
            };
          },
          southEastArrowNorthMiddleWest: function southEastArrowNorthMiddleWest(t, e) {
            return {
              top: Wu(t),
              left: t.right - .25 * e.width - Uu.arrowHorizontalOffset,
              name: "arrow_nmw"
            };
          },
          southEastArrowNorth: function southEastArrowNorth(t, e) {
            return {
              top: Wu(t),
              left: t.right - e.width / 2,
              name: "arrow_n"
            };
          },
          southEastArrowNorthMiddleEast: function southEastArrowNorthMiddleEast(t, e) {
            return {
              top: Wu(t),
              left: t.right - .75 * e.width + Uu.arrowHorizontalOffset,
              name: "arrow_nme"
            };
          },
          southEastArrowNorthEast: function southEastArrowNorthEast(t, e) {
            return {
              top: Wu(t),
              left: t.right - e.width + Uu.arrowHorizontalOffset,
              name: "arrow_ne"
            };
          },
          viewportStickyNorth: function viewportStickyNorth(t, e, n) {
            return t.getIntersection(n) ? {
              top: n.top + Uu.stickyVerticalOffset,
              left: t.left + t.width / 2 - e.width / 2,
              name: "arrowless",
              config: {
                withArrow: !1
              }
            } : null;
          }
        };
        var $u = n(146),
            Yu = n.n($u),
            Ju = n(147),
            Gu = n.n(Ju);
        n(216), n(218);
        var Ku = As("px");

        var Qu = /*#__PURE__*/function (_r43) {
          _inherits(Qu, _r43);

          var _super130 = _createSuper(Qu);

          function Qu(t) {
            var _this197;

            _classCallCheck(this, Qu);

            _this197 = _super130.call(this, t), _this197.positionLimiter = function () {
              var t = _this197.editor.editing.view,
                  e = t.document.selection.editableElement;
              return e ? t.domConverter.mapViewToDom(e.root) : null;
            }, _this197.set("visibleView", null), _this197.view = new Uu(t.locale), t.ui.view.body.add(_this197.view), t.ui.focusTracker.add(_this197.view.element), _this197._viewToStack = new Map(), _this197._idToStack = new Map(), _this197.set("_numberOfStacks", 0), _this197.set("_singleViewMode", !1), _this197._rotatorView = _this197._createRotatorView(), _this197._fakePanelsView = _this197._createFakePanelsView();
            return _this197;
          }

          _createClass(Qu, [{
            key: "hasView",
            value: function hasView(t) {
              return Array.from(this._viewToStack.keys()).includes(t);
            }
          }, {
            key: "add",
            value: function add(t) {
              if (this.hasView(t.view)) throw new rn["default"]("contextualballoon-add-view-exist", [this, t]);
              var e = t.stackId || "main";
              if (!this._idToStack.has(e)) return this._idToStack.set(e, new Map([[t.view, t]])), this._viewToStack.set(t.view, this._idToStack.get(e)), this._numberOfStacks = this._idToStack.size, void (this._visibleStack && !t.singleViewMode || this.showStack(e));

              var n = this._idToStack.get(e);

              t.singleViewMode && this.showStack(e), n.set(t.view, t), this._viewToStack.set(t.view, n), n === this._visibleStack && this._showView(t);
            }
          }, {
            key: "remove",
            value: function remove(t) {
              if (!this.hasView(t)) throw new rn["default"]("contextualballoon-remove-view-not-exist", [this, t]);

              var e = this._viewToStack.get(t);

              this._singleViewMode && this.visibleView === t && (this._singleViewMode = !1), this.visibleView === t && (1 === e.size ? this._idToStack.size > 1 ? this._showNextStack() : (this.view.hide(), this.visibleView = null, this._rotatorView.hideView()) : this._showView(Array.from(e.values())[e.size - 2])), 1 === e.size ? (this._idToStack["delete"](this._getStackId(e)), this._numberOfStacks = this._idToStack.size) : e["delete"](t), this._viewToStack["delete"](t);
            }
          }, {
            key: "updatePosition",
            value: function updatePosition(t) {
              t && (this._visibleStack.get(this.visibleView).position = t), this.view.pin(this._getBalloonPosition()), this._fakePanelsView.updatePosition();
            }
          }, {
            key: "showStack",
            value: function showStack(t) {
              this.visibleStack = t;

              var e = this._idToStack.get(t);

              if (!e) throw new rn["default"]("contextualballoon-showstack-stack-not-exist", this);
              this._visibleStack !== e && this._showView(Array.from(e.values()).pop());
            }
          }, {
            key: "_visibleStack",
            get: function get() {
              return this._viewToStack.get(this.visibleView);
            }
          }, {
            key: "_getStackId",
            value: function _getStackId(t) {
              return Array.from(this._idToStack.entries()).find(function (e) {
                return e[1] === t;
              })[0];
            }
          }, {
            key: "_showNextStack",
            value: function _showNextStack() {
              var t = Array.from(this._idToStack.values());
              var e = t.indexOf(this._visibleStack) + 1;
              t[e] || (e = 0), this.showStack(this._getStackId(t[e]));
            }
          }, {
            key: "_showPrevStack",
            value: function _showPrevStack() {
              var t = Array.from(this._idToStack.values());
              var e = t.indexOf(this._visibleStack) - 1;
              t[e] || (e = t.length - 1), this.showStack(this._getStackId(t[e]));
            }
          }, {
            key: "_createRotatorView",
            value: function _createRotatorView() {
              var _this198 = this;

              var t = new Xu(this.editor.locale),
                  e = this.editor.locale.t;
              return this.view.content.add(t), t.bind("isNavigationVisible").to(this, "_numberOfStacks", this, "_singleViewMode", function (t, e) {
                return !e && t > 1;
              }), t.on("change:isNavigationVisible", function () {
                return _this198.updatePosition();
              }, {
                priority: "low"
              }), t.bind("counter").to(this, "visibleView", this, "_numberOfStacks", function (t, n) {
                if (n < 2) return "";
                var i = Array.from(_this198._idToStack.values()).indexOf(_this198._visibleStack) + 1;
                return e("%0 of %1", [i, n]);
              }), t.buttonNextView.on("execute", function () {
                t.focusTracker.isFocused && _this198.editor.editing.view.focus(), _this198._showNextStack();
              }), t.buttonPrevView.on("execute", function () {
                t.focusTracker.isFocused && _this198.editor.editing.view.focus(), _this198._showPrevStack();
              }), t;
            }
          }, {
            key: "_createFakePanelsView",
            value: function _createFakePanelsView() {
              var t = new Zu(this.editor.locale, this.view);
              return t.bind("numberOfPanels").to(this, "_numberOfStacks", this, "_singleViewMode", function (t, e) {
                return !e && t >= 2 ? Math.min(t - 1, 2) : 0;
              }), t.listenTo(this.view, "change:top", function () {
                return t.updatePosition();
              }), t.listenTo(this.view, "change:left", function () {
                return t.updatePosition();
              }), this.editor.ui.view.body.add(t), t;
            }
          }, {
            key: "_showView",
            value: function _showView(_ref39) {
              var t = _ref39.view,
                  _ref39$balloonClassNa = _ref39.balloonClassName,
                  e = _ref39$balloonClassNa === void 0 ? "" : _ref39$balloonClassNa,
                  _ref39$withArrow = _ref39.withArrow,
                  n = _ref39$withArrow === void 0 ? !0 : _ref39$withArrow,
                  _ref39$singleViewMode = _ref39.singleViewMode,
                  i = _ref39$singleViewMode === void 0 ? !1 : _ref39$singleViewMode;
              this.view["class"] = e, this.view.withArrow = n, this._rotatorView.showView(t), this.visibleView = t, this.view.pin(this._getBalloonPosition()), this._fakePanelsView.updatePosition(), i && (this._singleViewMode = !0);
            }
          }, {
            key: "_getBalloonPosition",
            value: function _getBalloonPosition() {
              var t = Array.from(this._visibleStack.values()).pop().position;
              return t && (t.limiter || (t = Object.assign({}, t, {
                limiter: this.positionLimiter
              })), t = Object.assign({}, t, {
                viewportOffsetConfig: this.editor.config.get("ui.viewportOffset")
              })), t;
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ContextualBalloon";
            }
          }]);

          return Qu;
        }(r);

        var Xu = /*#__PURE__*/function (_Pd20) {
          _inherits(Xu, _Pd20);

          var _super131 = _createSuper(Xu);

          function Xu(t) {
            var _this199;

            _classCallCheck(this, Xu);

            _this199 = _super131.call(this, t);
            var e = t.t,
                n = _this199.bindTemplate;
            _this199.set("isNavigationVisible", !0), _this199.focusTracker = new Ss(), _this199.buttonPrevView = _this199._createButtonView(e("Previous"), Yu.a), _this199.buttonNextView = _this199._createButtonView(e("Next"), Gu.a), _this199.content = _this199.createCollection(), _this199.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-balloon-rotator"],
                "z-index": "-1"
              },
              children: [{
                tag: "div",
                attributes: {
                  "class": ["ck-balloon-rotator__navigation", n.to("isNavigationVisible", function (t) {
                    return t ? "" : "ck-hidden";
                  })]
                },
                children: [_this199.buttonPrevView, {
                  tag: "span",
                  attributes: {
                    "class": ["ck-balloon-rotator__counter"]
                  },
                  children: [{
                    text: n.to("counter")
                  }]
                }, _this199.buttonNextView]
              }, {
                tag: "div",
                attributes: {
                  "class": "ck-balloon-rotator__content"
                },
                children: _this199.content
              }]
            });
            return _this199;
          }

          _createClass(Xu, [{
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(Xu.prototype), "render", this).call(this), this.focusTracker.add(this.element);
            }
          }, {
            key: "showView",
            value: function showView(t) {
              this.hideView(), this.content.add(t);
            }
          }, {
            key: "hideView",
            value: function hideView() {
              this.content.clear();
            }
          }, {
            key: "_createButtonView",
            value: function _createButtonView(t, e) {
              var n = new nu(this.locale);
              return n.set({
                label: t,
                icon: e,
                tooltip: !0
              }), n;
            }
          }]);

          return Xu;
        }(Pd);

        var Zu = /*#__PURE__*/function (_Pd21) {
          _inherits(Zu, _Pd21);

          var _super132 = _createSuper(Zu);

          function Zu(t, e) {
            var _this200;

            _classCallCheck(this, Zu);

            _this200 = _super132.call(this, t);
            var n = _this200.bindTemplate;
            _this200.set("top", 0), _this200.set("left", 0), _this200.set("height", 0), _this200.set("width", 0), _this200.set("numberOfPanels", 0), _this200.content = _this200.createCollection(), _this200._balloonPanelView = e, _this200.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck-fake-panel", n.to("numberOfPanels", function (t) {
                  return t ? "" : "ck-hidden";
                })],
                style: {
                  top: n.to("top", Ku),
                  left: n.to("left", Ku),
                  width: n.to("width", Ku),
                  height: n.to("height", Ku)
                }
              },
              children: _this200.content
            }), _this200.on("change:numberOfPanels", function (t, e, n, i) {
              n > i ? _this200._addPanels(n - i) : _this200._removePanels(i - n), _this200.updatePosition();
            });
            return _this200;
          }

          _createClass(Zu, [{
            key: "_addPanels",
            value: function _addPanels(t) {
              for (; t--;) {
                var _t221 = new Pd();

                _t221.setTemplate({
                  tag: "div"
                }), this.content.add(_t221), this.registerChild(_t221);
              }
            }
          }, {
            key: "_removePanels",
            value: function _removePanels(t) {
              for (; t--;) {
                var _t222 = this.content.last;
                this.content.remove(_t222), this.deregisterChild(_t222), _t222.destroy();
              }
            }
          }, {
            key: "updatePosition",
            value: function updatePosition() {
              if (this.numberOfPanels) {
                var _this$_balloonPanelVi = this._balloonPanelView,
                    _t223 = _this$_balloonPanelVi.top,
                    _e212 = _this$_balloonPanelVi.left,
                    _ws = new ws(this._balloonPanelView.element),
                    _n190 = _ws.width,
                    _i144 = _ws.height;

                Object.assign(this, {
                  top: _t223,
                  left: _e212,
                  width: _n190,
                  height: _i144
                });
              }
            }
          }]);

          return Zu;
        }(Pd);

        n(220);
        var th = As("px");

        var eh = /*#__PURE__*/function (_Pd22) {
          _inherits(eh, _Pd22);

          var _super133 = _createSuper(eh);

          function eh(t) {
            var _this201;

            _classCallCheck(this, eh);

            _this201 = _super133.call(this, t);
            var e = _this201.bindTemplate;
            _this201.set("isActive", !1), _this201.set("isSticky", !1), _this201.set("limiterElement", null), _this201.set("limiterBottomOffset", 50), _this201.set("viewportTopOffset", 0), _this201.set("_marginLeft", null), _this201.set("_isStickyToTheLimiter", !1), _this201.set("_hasViewportTopOffset", !1), _this201.content = _this201.createCollection(), _this201._contentPanelPlaceholder = new Dd({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-sticky-panel__placeholder"],
                style: {
                  display: e.to("isSticky", function (t) {
                    return t ? "block" : "none";
                  }),
                  height: e.to("isSticky", function (t) {
                    return t ? th(_this201._panelRect.height) : null;
                  })
                }
              }
            }).render(), _this201._contentPanel = new Dd({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-sticky-panel__content", e["if"]("isSticky", "ck-sticky-panel__content_sticky"), e["if"]("_isStickyToTheLimiter", "ck-sticky-panel__content_sticky_bottom-limit")],
                style: {
                  width: e.to("isSticky", function (t) {
                    return t ? th(_this201._contentPanelPlaceholder.getBoundingClientRect().width) : null;
                  }),
                  top: e.to("_hasViewportTopOffset", function (t) {
                    return t ? th(_this201.viewportTopOffset) : null;
                  }),
                  bottom: e.to("_isStickyToTheLimiter", function (t) {
                    return t ? th(_this201.limiterBottomOffset) : null;
                  }),
                  marginLeft: e.to("_marginLeft")
                }
              },
              children: _this201.content
            }).render(), _this201.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-sticky-panel"]
              },
              children: [_this201._contentPanelPlaceholder, _this201._contentPanel]
            });
            return _this201;
          }

          _createClass(eh, [{
            key: "render",
            value: function render() {
              var _this202 = this;

              _get3(_getPrototypeOf(eh.prototype), "render", this).call(this), this._checkIfShouldBeSticky(), this.listenTo(Ho.window, "scroll", function () {
                _this202._checkIfShouldBeSticky();
              }), this.listenTo(this, "change:isActive", function () {
                _this202._checkIfShouldBeSticky();
              });
            }
          }, {
            key: "_checkIfShouldBeSticky",
            value: function _checkIfShouldBeSticky() {
              var t = this._panelRect = this._contentPanel.getBoundingClientRect();

              var e;
              this.limiterElement ? (e = this._limiterRect = this.limiterElement.getBoundingClientRect(), this.isSticky = this.isActive && e.top < this.viewportTopOffset && this._panelRect.height + this.limiterBottomOffset < e.height) : this.isSticky = !1, this.isSticky ? (this._isStickyToTheLimiter = e.bottom < t.height + this.limiterBottomOffset + this.viewportTopOffset, this._hasViewportTopOffset = !this._isStickyToTheLimiter && !!this.viewportTopOffset, this._marginLeft = this._isStickyToTheLimiter ? null : th(-Ho.window.scrollX)) : (this._isStickyToTheLimiter = !1, this._hasViewportTopOffset = !1, this._marginLeft = null);
            }
          }]);

          return eh;
        }(Pd);

        As("px");
        n(222);
        As("px");
        As("px");
        n(224);
        var nh = new WeakMap();

        function ih(t) {
          var e = t.view,
              n = t.element,
              i = t.text,
              _t$isDirectHost = t.isDirectHost,
              o = _t$isDirectHost === void 0 ? !0 : _t$isDirectHost,
              _t$keepOnFocus = t.keepOnFocus,
              r = _t$keepOnFocus === void 0 ? !1 : _t$keepOnFocus,
              s = e.document;
          nh.has(s) || (nh.set(s, new Map()), s.registerPostFixer(function (t) {
            return rh(s, t);
          })), nh.get(s).set(n, {
            text: i,
            isDirectHost: o,
            keepOnFocus: r,
            hostElement: o ? n : null
          }), e.change(function (t) {
            return rh(s, t);
          });
        }

        function oh(t, e) {
          return !!e.hasClass("ck-placeholder") && (t.removeClass("ck-placeholder", e), !0);
        }

        function rh(t, e) {
          var n = nh.get(t),
              i = [];
          var o = !1;

          var _iterator300 = _createForOfIteratorHelper(n),
              _step300;

          try {
            for (_iterator300.s(); !(_step300 = _iterator300.n()).done;) {
              var _step300$value = _slicedToArray(_step300.value, 2),
                  _t224 = _step300$value[0],
                  _r44 = _step300$value[1];

              _r44.isDirectHost && (i.push(_t224), sh(e, _t224, _r44) && (o = !0));
            }
          } catch (err) {
            _iterator300.e(err);
          } finally {
            _iterator300.f();
          }

          var _iterator301 = _createForOfIteratorHelper(n),
              _step301;

          try {
            for (_iterator301.s(); !(_step301 = _iterator301.n()).done;) {
              var _step301$value = _slicedToArray(_step301.value, 2),
                  _t225 = _step301$value[0],
                  _r45 = _step301$value[1];

              if (_r45.isDirectHost) continue;

              var _n191 = ah(_t225);

              _n191 && (i.includes(_n191) || (_r45.hostElement = _n191, sh(e, _t225, _r45) && (o = !0)));
            }
          } catch (err) {
            _iterator301.e(err);
          } finally {
            _iterator301.f();
          }

          return o;
        }

        function sh(t, e, n) {
          var i = n.text,
              o = n.isDirectHost,
              r = n.hostElement;
          var s = !1;
          return r.getAttribute("data-placeholder") !== i && (t.setAttribute("data-placeholder", i, r), s = !0), (o || 1 == e.childCount) && function (t, e) {
            if (!t.isAttached()) return !1;
            if (Array.from(t.getChildren()).some(function (t) {
              return !t.is("uiElement");
            })) return !1;
            if (e) return !0;
            var n = t.document;
            if (!n.isFocused) return !0;
            var i = n.selection.anchor;
            return i && i.parent !== t;
          }(r, n.keepOnFocus) ? function (t, e) {
            return !e.hasClass("ck-placeholder") && (t.addClass("ck-placeholder", e), !0);
          }(t, r) && (s = !0) : oh(t, r) && (s = !0), s;
        }

        function ah(t) {
          if (t.childCount) {
            var _e213 = t.getChild(0);

            if (_e213.is("element") && !_e213.is("uiElement")) return _e213;
          }

          return null;
        }

        var ch = new Map();

        function lh(t, e, n) {
          var i = ch.get(t);
          i || (i = new Map(), ch.set(t, i)), i.set(e, n);
        }

        function dh(t) {
          return [t];
        }

        function uh(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

          var i = function (t, e) {
            var n = ch.get(t);
            return n && n.has(e) ? n.get(e) : dh;
          }(t.constructor, e.constructor);

          try {
            return i(t = t.clone(), e, n);
          } catch (t) {
            throw t;
          }
        }

        function hh(t, e, n) {
          t = t.slice(), e = e.slice();
          var i = new fh(n.document, n.useRelations, n.forceWeakRemove);
          i.setOriginalOperations(t), i.setOriginalOperations(e);
          var o = i.originalOperations;
          if (0 == t.length || 0 == e.length) return {
            operationsA: t,
            operationsB: e,
            originalOperations: o
          };
          var r = new WeakMap();

          var _iterator302 = _createForOfIteratorHelper(t),
              _step302;

          try {
            for (_iterator302.s(); !(_step302 = _iterator302.n()).done;) {
              var _e215 = _step302.value;
              r.set(_e215, 0);
            }
          } catch (err) {
            _iterator302.e(err);
          } finally {
            _iterator302.f();
          }

          var s = {
            nextBaseVersionA: t[t.length - 1].baseVersion + 1,
            nextBaseVersionB: e[e.length - 1].baseVersion + 1,
            originalOperationsACount: t.length,
            originalOperationsBCount: e.length
          };
          var a = 0;

          for (; a < t.length;) {
            var _t226, _e214;

            var _n192 = t[a],
                _o74 = r.get(_n192);

            if (_o74 == e.length) {
              a++;
              continue;
            }

            var _s24 = e[_o74],
                _c6 = uh(_n192, _s24, i.getContext(_n192, _s24, !0)),
                _l2 = uh(_s24, _n192, i.getContext(_s24, _n192, !1));

            i.updateRelation(_n192, _s24), i.setOriginalOperations(_c6, _n192), i.setOriginalOperations(_l2, _s24);

            var _iterator303 = _createForOfIteratorHelper(_c6),
                _step303;

            try {
              for (_iterator303.s(); !(_step303 = _iterator303.n()).done;) {
                var _t227 = _step303.value;
                r.set(_t227, _o74 + _l2.length);
              }
            } catch (err) {
              _iterator303.e(err);
            } finally {
              _iterator303.f();
            }

            (_t226 = t).splice.apply(_t226, [a, 1].concat(_toConsumableArray(_c6))), (_e214 = e).splice.apply(_e214, [_o74, 1].concat(_toConsumableArray(_l2)));
          }

          if (n.padWithNoOps) {
            var _n193 = t.length - s.originalOperationsACount,
                _i145 = e.length - s.originalOperationsBCount;

            mh(t, _i145 - _n193), mh(e, _n193 - _i145);
          }

          return gh(t, s.nextBaseVersionB), gh(e, s.nextBaseVersionA), {
            operationsA: t,
            operationsB: e,
            originalOperations: o
          };
        }

        var fh = /*#__PURE__*/function () {
          function fh(t, e) {
            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;

            _classCallCheck(this, fh);

            this.originalOperations = new Map(), this._history = t.history, this._useRelations = e, this._forceWeakRemove = !!n, this._relations = new Map();
          }

          _createClass(fh, [{
            key: "setOriginalOperations",
            value: function setOriginalOperations(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              var n = e ? this.originalOperations.get(e) : null;

              var _iterator304 = _createForOfIteratorHelper(t),
                  _step304;

              try {
                for (_iterator304.s(); !(_step304 = _iterator304.n()).done;) {
                  var _e216 = _step304.value;
                  this.originalOperations.set(_e216, n || _e216);
                }
              } catch (err) {
                _iterator304.e(err);
              } finally {
                _iterator304.f();
              }
            }
          }, {
            key: "updateRelation",
            value: function updateRelation(t, e) {
              switch (t.constructor) {
                case Cc:
                  switch (e.constructor) {
                    case Ic:
                      t.targetPosition.isEqual(e.sourcePosition) || e.movedRange.containsPosition(t.targetPosition) ? this._setRelation(t, e, "insertAtSource") : t.targetPosition.isEqual(e.deletionPosition) ? this._setRelation(t, e, "insertBetween") : t.targetPosition.isAfter(e.sourcePosition) && this._setRelation(t, e, "moveTargetAfter");
                      break;

                    case Cc:
                      t.targetPosition.isEqual(e.sourcePosition) || t.targetPosition.isBefore(e.sourcePosition) ? this._setRelation(t, e, "insertBefore") : this._setRelation(t, e, "insertAfter");
                  }

                  break;

                case Oc:
                  switch (e.constructor) {
                    case Ic:
                      t.splitPosition.isBefore(e.sourcePosition) && this._setRelation(t, e, "splitBefore");
                      break;

                    case Cc:
                      if (t.splitPosition.isEqual(e.sourcePosition) || t.splitPosition.isBefore(e.sourcePosition)) this._setRelation(t, e, "splitBefore");else {
                        var _n194 = ta._createFromPositionAndShift(e.sourcePosition, e.howMany);

                        if (t.splitPosition.hasSameParentAs(e.sourcePosition) && _n194.containsPosition(t.splitPosition)) {
                          var _i146 = _n194.end.offset - t.splitPosition.offset,
                              _o75 = t.splitPosition.offset - _n194.start.offset;

                          this._setRelation(t, e, {
                            howMany: _i146,
                            offset: _o75
                          });
                        }
                      }
                  }

                  break;

                case Ic:
                  switch (e.constructor) {
                    case Ic:
                      t.targetPosition.isEqual(e.sourcePosition) || this._setRelation(t, e, "mergeTargetNotMoved"), t.sourcePosition.isEqual(e.targetPosition) && this._setRelation(t, e, "mergeSourceNotMoved"), t.sourcePosition.isEqual(e.sourcePosition) && this._setRelation(t, e, "mergeSameElement");
                      break;

                    case Oc:
                      t.sourcePosition.isEqual(e.splitPosition) && this._setRelation(t, e, "splitAtSource");
                  }

                  break;

                case Ac:
                  {
                    var _n195 = t.newRange;
                    if (!_n195) return;

                    switch (e.constructor) {
                      case Cc:
                        {
                          var _i147 = ta._createFromPositionAndShift(e.sourcePosition, e.howMany),
                              _o76 = _i147.containsPosition(_n195.start) || _i147.start.isEqual(_n195.start),
                              _r46 = _i147.containsPosition(_n195.end) || _i147.end.isEqual(_n195.end);

                          !_o76 && !_r46 || _i147.containsRange(_n195) || this._setRelation(t, e, {
                            side: _o76 ? "left" : "right",
                            path: _o76 ? _n195.start.path.slice() : _n195.end.path.slice()
                          });
                          break;
                        }

                      case Ic:
                        {
                          var _i148 = _n195.start.isEqual(e.targetPosition),
                              _o77 = _n195.start.isEqual(e.deletionPosition),
                              _r47 = _n195.end.isEqual(e.deletionPosition),
                              _s25 = _n195.end.isEqual(e.sourcePosition);

                          (_i148 || _o77 || _r47 || _s25) && this._setRelation(t, e, {
                            wasInLeftElement: _i148,
                            wasStartBeforeMergedElement: _o77,
                            wasEndBeforeMergedElement: _r47,
                            wasInRightElement: _s25
                          });
                          break;
                        }
                    }

                    break;
                  }
              }
            }
          }, {
            key: "getContext",
            value: function getContext(t, e, n) {
              return {
                aIsStrong: n,
                aWasUndone: this._wasUndone(t),
                bWasUndone: this._wasUndone(e),
                abRelation: this._useRelations ? this._getRelation(t, e) : null,
                baRelation: this._useRelations ? this._getRelation(e, t) : null,
                forceWeakRemove: this._forceWeakRemove
              };
            }
          }, {
            key: "_wasUndone",
            value: function _wasUndone(t) {
              var e = this.originalOperations.get(t);
              return e.wasUndone || this._history.isUndoneOperation(e);
            }
          }, {
            key: "_getRelation",
            value: function _getRelation(t, e) {
              var n = this.originalOperations.get(e),
                  i = this._history.getUndoneOperation(n);

              if (!i) return null;

              var o = this.originalOperations.get(t),
                  r = this._relations.get(o);

              return r && r.get(i) || null;
            }
          }, {
            key: "_setRelation",
            value: function _setRelation(t, e, n) {
              var i = this.originalOperations.get(t),
                  o = this.originalOperations.get(e);

              var r = this._relations.get(i);

              r || (r = new Map(), this._relations.set(i, r)), r.set(o, n);
            }
          }]);

          return fh;
        }();

        function gh(t, e) {
          var _iterator305 = _createForOfIteratorHelper(t),
              _step305;

          try {
            for (_iterator305.s(); !(_step305 = _iterator305.n()).done;) {
              var _n196 = _step305.value;
              _n196.baseVersion = e++;
            }
          } catch (err) {
            _iterator305.e(err);
          } finally {
            _iterator305.f();
          }
        }

        function mh(t, e) {
          for (var _n197 = 0; _n197 < e; _n197++) {
            t.push(new Kc(0));
          }
        }

        function ph(t, e, n) {
          var i = t.nodes.getNode(0).getAttribute(e);
          if (i == n) return null;
          var o = new ta(t.position, t.position.getShiftedBy(t.howMany));
          return new yc(o, e, i, n, 0);
        }

        function bh(t, e) {
          return null === t.targetPosition._getTransformedByDeletion(e.sourcePosition, e.howMany);
        }

        function kh(t, e) {
          var n = [];

          for (var _i149 = 0; _i149 < t.length; _i149++) {
            var _o78 = t[_i149],
                _r48 = new Cc(_o78.start, _o78.end.offset - _o78.start.offset, e, 0);

            n.push(_r48);

            for (var _e217 = _i149 + 1; _e217 < t.length; _e217++) {
              t[_e217] = t[_e217]._getTransformedByMove(_r48.sourcePosition, _r48.targetPosition, _r48.howMany)[0];
            }

            e = e._getTransformedByMove(_r48.sourcePosition, _r48.targetPosition, _r48.howMany);
          }

          return n;
        }

        lh(yc, yc, function (t, e, n) {
          if (t.key === e.key && t.range.start.hasSameParentAs(e.range.start)) {
            var _i150 = t.range.getDifference(e.range).map(function (e) {
              return new yc(e, t.key, t.oldValue, t.newValue, 0);
            }),
                _o79 = t.range.getIntersection(e.range);

            return _o79 && n.aIsStrong && _i150.push(new yc(_o79, e.key, e.newValue, t.newValue, 0)), 0 == _i150.length ? [new Kc(0)] : _i150;
          }

          return [t];
        }), lh(yc, Tc, function (t, e) {
          if (t.range.start.hasSameParentAs(e.position) && t.range.containsPosition(e.position)) {
            var _n198 = t.range._getTransformedByInsertion(e.position, e.howMany, !e.shouldReceiveAttributes).map(function (e) {
              return new yc(e, t.key, t.oldValue, t.newValue, t.baseVersion);
            });

            if (e.shouldReceiveAttributes) {
              var _i151 = ph(e, t.key, t.oldValue);

              _i151 && _n198.unshift(_i151);
            }

            return _n198;
          }

          return t.range = t.range._getTransformedByInsertion(e.position, e.howMany, !1)[0], [t];
        }), lh(yc, Ic, function (t, e) {
          var n = [];
          t.range.start.hasSameParentAs(e.deletionPosition) && (t.range.containsPosition(e.deletionPosition) || t.range.start.isEqual(e.deletionPosition)) && n.push(ta._createFromPositionAndShift(e.graveyardPosition, 1));

          var i = t.range._getTransformedByMergeOperation(e);

          return i.isCollapsed || n.push(i), n.map(function (e) {
            return new yc(e, t.key, t.oldValue, t.newValue, t.baseVersion);
          });
        }), lh(yc, Cc, function (t, e) {
          return function (t, e) {
            var n = ta._createFromPositionAndShift(e.sourcePosition, e.howMany);

            var i = null,
                o = [];
            n.containsRange(t, !0) ? i = t : t.start.hasSameParentAs(n.start) ? (o = t.getDifference(n), i = t.getIntersection(n)) : o = [t];
            var r = [];

            var _iterator306 = _createForOfIteratorHelper(o),
                _step306;

            try {
              for (_iterator306.s(); !(_step306 = _iterator306.n()).done;) {
                var _t228 = _step306.value;
                _t228 = _t228._getTransformedByDeletion(e.sourcePosition, e.howMany);

                var _n199 = e.getMovedRangeStart(),
                    _i152 = _t228.start.hasSameParentAs(_n199);

                _t228 = _t228._getTransformedByInsertion(_n199, e.howMany, _i152), r.push.apply(r, _toConsumableArray(_t228));
              }
            } catch (err) {
              _iterator306.e(err);
            } finally {
              _iterator306.f();
            }

            i && r.push(i._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany, !1)[0]);
            return r;
          }(t.range, e).map(function (e) {
            return new yc(e, t.key, t.oldValue, t.newValue, t.baseVersion);
          });
        }), lh(yc, Oc, function (t, e) {
          if (t.range.end.isEqual(e.insertionPosition)) return e.graveyardPosition || t.range.end.offset++, [t];

          if (t.range.start.hasSameParentAs(e.splitPosition) && t.range.containsPosition(e.splitPosition)) {
            var _n200 = t.clone();

            return _n200.range = new ta(e.moveTargetPosition.clone(), t.range.end._getCombined(e.splitPosition, e.moveTargetPosition)), t.range.end = e.splitPosition.clone(), t.range.end.stickiness = "toPrevious", [t, _n200];
          }

          return t.range = t.range._getTransformedBySplitOperation(e), [t];
        }), lh(Tc, yc, function (t, e) {
          var n = [t];

          if (t.shouldReceiveAttributes && t.position.hasSameParentAs(e.range.start) && e.range.containsPosition(t.position)) {
            var _i153 = ph(t, e.key, e.newValue);

            _i153 && n.push(_i153);
          }

          return n;
        }), lh(Tc, Tc, function (t, e, n) {
          return t.position.isEqual(e.position) && n.aIsStrong ? [t] : (t.position = t.position._getTransformedByInsertOperation(e), [t]);
        }), lh(Tc, Cc, function (t, e) {
          return t.position = t.position._getTransformedByMoveOperation(e), [t];
        }), lh(Tc, Oc, function (t, e) {
          return t.position = t.position._getTransformedBySplitOperation(e), [t];
        }), lh(Tc, Ic, function (t, e) {
          return t.position = t.position._getTransformedByMergeOperation(e), [t];
        }), lh(Ac, Tc, function (t, e) {
          return t.oldRange && (t.oldRange = t.oldRange._getTransformedByInsertOperation(e)[0]), t.newRange && (t.newRange = t.newRange._getTransformedByInsertOperation(e)[0]), [t];
        }), lh(Ac, Ac, function (t, e, n) {
          if (t.name == e.name) {
            if (!n.aIsStrong) return [new Kc(0)];
            t.oldRange = e.newRange ? e.newRange.clone() : null;
          }

          return [t];
        }), lh(Ac, Ic, function (t, e) {
          return t.oldRange && (t.oldRange = t.oldRange._getTransformedByMergeOperation(e)), t.newRange && (t.newRange = t.newRange._getTransformedByMergeOperation(e)), [t];
        }), lh(Ac, Cc, function (t, e, n) {
          if (t.oldRange && (t.oldRange = ta._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))), t.newRange) {
            if (n.abRelation) {
              var _i154 = ta._createFromRanges(t.newRange._getTransformedByMoveOperation(e));

              if ("left" == n.abRelation.side && e.targetPosition.isEqual(t.newRange.start)) return t.newRange.start.path = n.abRelation.path, t.newRange.end = _i154.end, [t];
              if ("right" == n.abRelation.side && e.targetPosition.isEqual(t.newRange.end)) return t.newRange.start = _i154.start, t.newRange.end.path = n.abRelation.path, [t];
            }

            t.newRange = ta._createFromRanges(t.newRange._getTransformedByMoveOperation(e));
          }

          return [t];
        }), lh(Ac, Oc, function (t, e, n) {
          if (t.oldRange && (t.oldRange = t.oldRange._getTransformedBySplitOperation(e)), t.newRange) {
            if (n.abRelation) {
              var _i155 = t.newRange._getTransformedBySplitOperation(e);

              return t.newRange.start.isEqual(e.splitPosition) && n.abRelation.wasStartBeforeMergedElement ? t.newRange.start = Ks._createAt(e.insertionPosition) : t.newRange.start.isEqual(e.splitPosition) && !n.abRelation.wasInLeftElement && (t.newRange.start = Ks._createAt(e.moveTargetPosition)), t.newRange.end.isEqual(e.splitPosition) && n.abRelation.wasInRightElement ? t.newRange.end = Ks._createAt(e.moveTargetPosition) : t.newRange.end.isEqual(e.splitPosition) && n.abRelation.wasEndBeforeMergedElement ? t.newRange.end = Ks._createAt(e.insertionPosition) : t.newRange.end = _i155.end, [t];
            }

            t.newRange = t.newRange._getTransformedBySplitOperation(e);
          }

          return [t];
        }), lh(Ic, Tc, function (t, e) {
          return t.sourcePosition.hasSameParentAs(e.position) && (t.howMany += e.howMany), t.sourcePosition = t.sourcePosition._getTransformedByInsertOperation(e), t.targetPosition = t.targetPosition._getTransformedByInsertOperation(e), [t];
        }), lh(Ic, Ic, function (t, e, n) {
          if (t.sourcePosition.isEqual(e.sourcePosition) && t.targetPosition.isEqual(e.targetPosition)) {
            if (n.bWasUndone) {
              var _n201 = e.graveyardPosition.path.slice();

              return _n201.push(0), t.sourcePosition = new Ks(e.graveyardPosition.root, _n201), t.howMany = 0, [t];
            }

            return [new Kc(0)];
          }

          if (t.sourcePosition.isEqual(e.sourcePosition) && !t.targetPosition.isEqual(e.targetPosition) && !n.bWasUndone && "splitAtSource" != n.abRelation) {
            var _i156 = "$graveyard" == t.targetPosition.root.rootName,
                _o80 = "$graveyard" == e.targetPosition.root.rootName;

            if (_o80 && !_i156 || !(_i156 && !_o80) && n.aIsStrong) {
              var _n202 = e.targetPosition._getTransformedByMergeOperation(e),
                  _i157 = t.targetPosition._getTransformedByMergeOperation(e);

              return [new Cc(_n202, t.howMany, _i157, 0)];
            }

            return [new Kc(0)];
          }

          return t.sourcePosition.hasSameParentAs(e.targetPosition) && (t.howMany += e.howMany), t.sourcePosition = t.sourcePosition._getTransformedByMergeOperation(e), t.targetPosition = t.targetPosition._getTransformedByMergeOperation(e), t.graveyardPosition.isEqual(e.graveyardPosition) && n.aIsStrong || (t.graveyardPosition = t.graveyardPosition._getTransformedByMergeOperation(e)), [t];
        }), lh(Ic, Cc, function (t, e, n) {
          var i = ta._createFromPositionAndShift(e.sourcePosition, e.howMany);

          return "remove" == e.type && !n.bWasUndone && !n.forceWeakRemove && t.deletionPosition.hasSameParentAs(e.sourcePosition) && i.containsPosition(t.sourcePosition) ? [new Kc(0)] : (t.sourcePosition.hasSameParentAs(e.targetPosition) && (t.howMany += e.howMany), t.sourcePosition.hasSameParentAs(e.sourcePosition) && (t.howMany -= e.howMany), t.sourcePosition = t.sourcePosition._getTransformedByMoveOperation(e), t.targetPosition = t.targetPosition._getTransformedByMoveOperation(e), t.graveyardPosition.isEqual(e.targetPosition) || (t.graveyardPosition = t.graveyardPosition._getTransformedByMoveOperation(e)), [t]);
        }), lh(Ic, Oc, function (t, e, n) {
          if (e.graveyardPosition && (t.graveyardPosition = t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition, 1), t.deletionPosition.isEqual(e.graveyardPosition) && (t.howMany = e.howMany)), t.targetPosition.isEqual(e.splitPosition)) {
            var _i158 = 0 != e.howMany,
                _o81 = e.graveyardPosition && t.deletionPosition.isEqual(e.graveyardPosition);

            if (_i158 || _o81 || "mergeTargetNotMoved" == n.abRelation) return t.sourcePosition = t.sourcePosition._getTransformedBySplitOperation(e), [t];
          }

          if (t.sourcePosition.isEqual(e.splitPosition)) {
            if ("mergeSourceNotMoved" == n.abRelation) return t.howMany = 0, t.targetPosition = t.targetPosition._getTransformedBySplitOperation(e), [t];
            if ("mergeSameElement" == n.abRelation || t.sourcePosition.offset > 0) return t.sourcePosition = e.moveTargetPosition.clone(), t.targetPosition = t.targetPosition._getTransformedBySplitOperation(e), [t];
          }

          return t.sourcePosition.hasSameParentAs(e.splitPosition) && (t.howMany = e.splitPosition.offset), t.sourcePosition = t.sourcePosition._getTransformedBySplitOperation(e), t.targetPosition = t.targetPosition._getTransformedBySplitOperation(e), [t];
        }), lh(Cc, Tc, function (t, e) {
          var n = ta._createFromPositionAndShift(t.sourcePosition, t.howMany)._getTransformedByInsertOperation(e, !1)[0];

          return t.sourcePosition = n.start, t.howMany = n.end.offset - n.start.offset, t.targetPosition.isEqual(e.position) || (t.targetPosition = t.targetPosition._getTransformedByInsertOperation(e)), [t];
        }), lh(Cc, Cc, function (t, e, n) {
          var i = ta._createFromPositionAndShift(t.sourcePosition, t.howMany),
              o = ta._createFromPositionAndShift(e.sourcePosition, e.howMany);

          var r,
              s = n.aIsStrong,
              a = !n.aIsStrong;
          if ("insertBefore" == n.abRelation || "insertAfter" == n.baRelation ? a = !0 : "insertAfter" != n.abRelation && "insertBefore" != n.baRelation || (a = !1), r = t.targetPosition.isEqual(e.targetPosition) && a ? t.targetPosition._getTransformedByDeletion(e.sourcePosition, e.howMany) : t.targetPosition._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany), bh(t, e) && bh(e, t)) return [e.getReversed()];
          if (i.containsPosition(e.targetPosition) && i.containsRange(o, !0)) return i.start = i.start._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany), i.end = i.end._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany), kh([i], r);
          if (o.containsPosition(t.targetPosition) && o.containsRange(i, !0)) return i.start = i.start._getCombined(e.sourcePosition, e.getMovedRangeStart()), i.end = i.end._getCombined(e.sourcePosition, e.getMovedRangeStart()), kh([i], r);
          var c = mn(t.sourcePosition.getParentPath(), e.sourcePosition.getParentPath());
          if ("prefix" == c || "extension" == c) return i.start = i.start._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany), i.end = i.end._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany), kh([i], r);
          "remove" != t.type || "remove" == e.type || n.aWasUndone || n.forceWeakRemove ? "remove" == t.type || "remove" != e.type || n.bWasUndone || n.forceWeakRemove || (s = !1) : s = !0;
          var l = [],
              d = i.getDifference(o);

          var _iterator307 = _createForOfIteratorHelper(d),
              _step307;

          try {
            for (_iterator307.s(); !(_step307 = _iterator307.n()).done;) {
              var _t229 = _step307.value;
              _t229.start = _t229.start._getTransformedByDeletion(e.sourcePosition, e.howMany), _t229.end = _t229.end._getTransformedByDeletion(e.sourcePosition, e.howMany);

              var _n203 = "same" == mn(_t229.start.getParentPath(), e.getMovedRangeStart().getParentPath()),
                  _i159 = _t229._getTransformedByInsertion(e.getMovedRangeStart(), e.howMany, _n203);

              l.push.apply(l, _toConsumableArray(_i159));
            }
          } catch (err) {
            _iterator307.e(err);
          } finally {
            _iterator307.f();
          }

          var u = i.getIntersection(o);
          return null !== u && s && (u.start = u.start._getCombined(e.sourcePosition, e.getMovedRangeStart()), u.end = u.end._getCombined(e.sourcePosition, e.getMovedRangeStart()), 0 === l.length ? l.push(u) : 1 == l.length ? o.start.isBefore(i.start) || o.start.isEqual(i.start) ? l.unshift(u) : l.push(u) : l.splice(1, 0, u)), 0 === l.length ? [new Kc(t.baseVersion)] : kh(l, r);
        }), lh(Cc, Oc, function (t, e, n) {
          var i = t.targetPosition.clone();
          t.targetPosition.isEqual(e.insertionPosition) && e.graveyardPosition && "moveTargetAfter" != n.abRelation || (i = t.targetPosition._getTransformedBySplitOperation(e));

          var o = ta._createFromPositionAndShift(t.sourcePosition, t.howMany);

          if (o.end.isEqual(e.insertionPosition)) return e.graveyardPosition || t.howMany++, t.targetPosition = i, [t];

          if (o.start.hasSameParentAs(e.splitPosition) && o.containsPosition(e.splitPosition)) {
            var _t230 = new ta(e.splitPosition, o.end);

            return _t230 = _t230._getTransformedBySplitOperation(e), kh([new ta(o.start, e.splitPosition), _t230], i);
          }

          t.targetPosition.isEqual(e.splitPosition) && "insertAtSource" == n.abRelation && (i = e.moveTargetPosition), t.targetPosition.isEqual(e.insertionPosition) && "insertBetween" == n.abRelation && (i = t.targetPosition);
          var r = [o._getTransformedBySplitOperation(e)];

          if (e.graveyardPosition) {
            var _i160 = o.start.isEqual(e.graveyardPosition) || o.containsPosition(e.graveyardPosition);

            t.howMany > 1 && _i160 && !n.aWasUndone && r.push(ta._createFromPositionAndShift(e.insertionPosition, 1));
          }

          return kh(r, i);
        }), lh(Cc, Ic, function (t, e, n) {
          var i = ta._createFromPositionAndShift(t.sourcePosition, t.howMany);

          if (e.deletionPosition.hasSameParentAs(t.sourcePosition) && i.containsPosition(e.sourcePosition)) if ("remove" != t.type || n.forceWeakRemove) {
            if (1 == t.howMany) return n.bWasUndone ? (t.sourcePosition = e.graveyardPosition.clone(), t.targetPosition = t.targetPosition._getTransformedByMergeOperation(e), [t]) : [new Kc(0)];
          } else if (!n.aWasUndone) {
            var _n204 = [];

            var _i161 = e.graveyardPosition.clone(),
                _o82 = e.targetPosition._getTransformedByMergeOperation(e);

            t.howMany > 1 && (_n204.push(new Cc(t.sourcePosition, t.howMany - 1, t.targetPosition, 0)), _i161 = _i161._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany - 1), _o82 = _o82._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany - 1));

            var _r49 = e.deletionPosition._getCombined(t.sourcePosition, t.targetPosition),
                _s26 = new Cc(_i161, 1, _r49, 0),
                _a16 = _s26.getMovedRangeStart().path.slice();

            _a16.push(0);

            var _c7 = new Ks(_s26.targetPosition.root, _a16);

            _o82 = _o82._getTransformedByMove(_i161, _r49, 1);

            var _l3 = new Cc(_o82, e.howMany, _c7, 0);

            return _n204.push(_s26), _n204.push(_l3), _n204;
          }

          var o = ta._createFromPositionAndShift(t.sourcePosition, t.howMany)._getTransformedByMergeOperation(e);

          return t.sourcePosition = o.start, t.howMany = o.end.offset - o.start.offset, t.targetPosition = t.targetPosition._getTransformedByMergeOperation(e), [t];
        }), lh(Ec, Tc, function (t, e) {
          return t.position = t.position._getTransformedByInsertOperation(e), [t];
        }), lh(Ec, Ic, function (t, e) {
          return t.position.isEqual(e.deletionPosition) ? (t.position = e.graveyardPosition.clone(), t.position.stickiness = "toNext", [t]) : (t.position = t.position._getTransformedByMergeOperation(e), [t]);
        }), lh(Ec, Cc, function (t, e) {
          return t.position = t.position._getTransformedByMoveOperation(e), [t];
        }), lh(Ec, Ec, function (t, e, n) {
          if (t.position.isEqual(e.position)) {
            if (!n.aIsStrong) return [new Kc(0)];
            t.oldName = e.newName;
          }

          return [t];
        }), lh(Ec, Oc, function (t, e) {
          if ("same" == mn(t.position.path, e.splitPosition.getParentPath()) && !e.graveyardPosition) {
            return [t, new Ec(t.position.getShiftedBy(1), t.oldName, t.newName, 0)];
          }

          return t.position = t.position._getTransformedBySplitOperation(e), [t];
        }), lh(Sc, Sc, function (t, e, n) {
          if (t.root === e.root && t.key === e.key) {
            if (!n.aIsStrong || t.newValue === e.newValue) return [new Kc(0)];
            t.oldValue = e.newValue;
          }

          return [t];
        }), lh(Oc, Tc, function (t, e) {
          return t.splitPosition.hasSameParentAs(e.position) && t.splitPosition.offset < e.position.offset && (t.howMany += e.howMany), t.splitPosition = t.splitPosition._getTransformedByInsertOperation(e), t.insertionPosition = t.insertionPosition._getTransformedByInsertOperation(e), [t];
        }), lh(Oc, Ic, function (t, e, n) {
          if (!t.graveyardPosition && !n.bWasUndone && t.splitPosition.hasSameParentAs(e.sourcePosition)) {
            var _n205 = e.graveyardPosition.path.slice();

            _n205.push(0);

            var _i162 = new Ks(e.graveyardPosition.root, _n205),
                _o83 = Oc.getInsertionPosition(new Ks(e.graveyardPosition.root, _n205)),
                _r50 = new Oc(_i162, 0, _o83, null, 0);

            return t.splitPosition = t.splitPosition._getTransformedByMergeOperation(e), t.insertionPosition = Oc.getInsertionPosition(t.splitPosition), t.graveyardPosition = _r50.insertionPosition.clone(), t.graveyardPosition.stickiness = "toNext", [_r50, t];
          }

          return t.splitPosition.hasSameParentAs(e.deletionPosition) && !t.splitPosition.isAfter(e.deletionPosition) && t.howMany--, t.splitPosition.hasSameParentAs(e.targetPosition) && (t.howMany += e.howMany), t.splitPosition = t.splitPosition._getTransformedByMergeOperation(e), t.insertionPosition = Oc.getInsertionPosition(t.splitPosition), t.graveyardPosition && (t.graveyardPosition = t.graveyardPosition._getTransformedByMergeOperation(e)), [t];
        }), lh(Oc, Cc, function (t, e, n) {
          var i = ta._createFromPositionAndShift(e.sourcePosition, e.howMany);

          if (t.graveyardPosition) {
            var _o84 = i.start.isEqual(t.graveyardPosition) || i.containsPosition(t.graveyardPosition);

            if (!n.bWasUndone && _o84) {
              var _n206 = t.splitPosition._getTransformedByMoveOperation(e),
                  _i163 = t.graveyardPosition._getTransformedByMoveOperation(e),
                  _o85 = _i163.path.slice();

              _o85.push(0);

              var _r51 = new Ks(_i163.root, _o85);

              return [new Cc(_n206, t.howMany, _r51, 0)];
            }

            t.graveyardPosition = t.graveyardPosition._getTransformedByMoveOperation(e);
          }

          var o = t.splitPosition.isEqual(e.targetPosition);
          if (o && ("insertAtSource" == n.baRelation || "splitBefore" == n.abRelation)) return t.howMany += e.howMany, t.splitPosition = t.splitPosition._getTransformedByDeletion(e.sourcePosition, e.howMany), t.insertionPosition = Oc.getInsertionPosition(t.splitPosition), [t];

          if (o && n.abRelation && n.abRelation.howMany) {
            var _n$abRelation = n.abRelation,
                _e218 = _n$abRelation.howMany,
                _i164 = _n$abRelation.offset;
            return t.howMany += _e218, t.splitPosition = t.splitPosition.getShiftedBy(_i164), [t];
          }

          if (t.splitPosition.hasSameParentAs(e.sourcePosition) && i.containsPosition(t.splitPosition)) {
            var _n207 = e.howMany - (t.splitPosition.offset - e.sourcePosition.offset);

            return t.howMany -= _n207, t.splitPosition.hasSameParentAs(e.targetPosition) && t.splitPosition.offset < e.targetPosition.offset && (t.howMany += e.howMany), t.splitPosition = e.sourcePosition.clone(), t.insertionPosition = Oc.getInsertionPosition(t.splitPosition), [t];
          }

          return e.sourcePosition.isEqual(e.targetPosition) || (t.splitPosition.hasSameParentAs(e.sourcePosition) && t.splitPosition.offset <= e.sourcePosition.offset && (t.howMany -= e.howMany), t.splitPosition.hasSameParentAs(e.targetPosition) && t.splitPosition.offset < e.targetPosition.offset && (t.howMany += e.howMany)), t.splitPosition.stickiness = "toNone", t.splitPosition = t.splitPosition._getTransformedByMoveOperation(e), t.splitPosition.stickiness = "toNext", t.graveyardPosition ? t.insertionPosition = t.insertionPosition._getTransformedByMoveOperation(e) : t.insertionPosition = Oc.getInsertionPosition(t.splitPosition), [t];
        }), lh(Oc, Oc, function (t, e, n) {
          if (t.splitPosition.isEqual(e.splitPosition)) {
            if (!t.graveyardPosition && !e.graveyardPosition) return [new Kc(0)];
            if (t.graveyardPosition && e.graveyardPosition && t.graveyardPosition.isEqual(e.graveyardPosition)) return [new Kc(0)];
            if ("splitBefore" == n.abRelation) return t.howMany = 0, t.graveyardPosition = t.graveyardPosition._getTransformedBySplitOperation(e), [t];
          }

          if (t.graveyardPosition && e.graveyardPosition && t.graveyardPosition.isEqual(e.graveyardPosition)) {
            var _i165 = "$graveyard" == t.splitPosition.root.rootName,
                _o86 = "$graveyard" == e.splitPosition.root.rootName;

            if (_o86 && !_i165 || !(_i165 && !_o86) && n.aIsStrong) {
              var _n208 = [];
              return e.howMany && _n208.push(new Cc(e.moveTargetPosition, e.howMany, e.splitPosition, 0)), t.howMany && _n208.push(new Cc(t.splitPosition, t.howMany, t.moveTargetPosition, 0)), _n208;
            }

            return [new Kc(0)];
          }

          if (t.graveyardPosition && (t.graveyardPosition = t.graveyardPosition._getTransformedBySplitOperation(e)), t.splitPosition.isEqual(e.insertionPosition) && "splitBefore" == n.abRelation) return t.howMany++, [t];

          if (e.splitPosition.isEqual(t.insertionPosition) && "splitBefore" == n.baRelation) {
            var _n209 = e.insertionPosition.path.slice();

            _n209.push(0);

            var _i166 = new Ks(e.insertionPosition.root, _n209);

            return [t, new Cc(t.insertionPosition, 1, _i166, 0)];
          }

          return t.splitPosition.hasSameParentAs(e.splitPosition) && t.splitPosition.offset < e.splitPosition.offset && (t.howMany -= e.howMany), t.splitPosition = t.splitPosition._getTransformedBySplitOperation(e), t.insertionPosition = Oc.getInsertionPosition(t.splitPosition), [t];
        });

        var _h = /*#__PURE__*/function (_$r5) {
          _inherits(_h, _$r5);

          var _super134 = _createSuper(_h);

          function _h(t) {
            var _this203;

            _classCallCheck(this, _h);

            _this203 = _super134.call(this, t), _this203.domEventType = "click";
            return _this203;
          }

          _createClass(_h, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              this.fire(t.type, t);
            }
          }]);

          return _h;
        }($r);

        var wh = /*#__PURE__*/function (_$r6) {
          _inherits(wh, _$r6);

          var _super135 = _createSuper(wh);

          function wh(t) {
            var _this204;

            _classCallCheck(this, wh);

            _this204 = _super135.call(this, t), _this204.domEventType = ["mousedown", "mouseup", "mouseover", "mouseout"];
            return _this204;
          }

          _createClass(wh, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              this.fire(t.type, t);
            }
          }]);

          return wh;
        }($r);

        var vh = /*#__PURE__*/function () {
          function vh(t) {
            _classCallCheck(this, vh);

            this.document = t;
          }

          _createClass(vh, [{
            key: "createDocumentFragment",
            value: function createDocumentFragment(t) {
              return new ho(this.document, t);
            }
          }, {
            key: "createElement",
            value: function createElement(t, e, n) {
              return new vi(this.document, t, e, n);
            }
          }, {
            key: "createText",
            value: function createText(t) {
              return new wn(this.document, t);
            }
          }, {
            key: "clone",
            value: function clone(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              return t._clone(e);
            }
          }, {
            key: "appendChild",
            value: function appendChild(t, e) {
              return e._appendChild(t);
            }
          }, {
            key: "insertChild",
            value: function insertChild(t, e, n) {
              return n._insertChild(t, e);
            }
          }, {
            key: "removeChildren",
            value: function removeChildren(t, e, n) {
              return n._removeChildren(t, e);
            }
          }, {
            key: "remove",
            value: function remove(t) {
              var e = t.parent;
              return e ? this.removeChildren(e.getChildIndex(t), 1, e) : [];
            }
          }, {
            key: "replace",
            value: function replace(t, e) {
              var n = t.parent;

              if (n) {
                var _i167 = n.getChildIndex(t);

                return this.removeChildren(_i167, 1, n), this.insertChild(_i167, e, n), !0;
              }

              return !1;
            }
          }, {
            key: "unwrapElement",
            value: function unwrapElement(t) {
              var e = t.parent;

              if (e) {
                var _n210 = e.getChildIndex(t);

                this.remove(t), this.insertChild(_n210, t.getChildren(), e);
              }
            }
          }, {
            key: "rename",
            value: function rename(t, e) {
              var n = new vi(this.document, t, e.getAttributes(), e.getChildren());
              return this.replace(e, n) ? n : null;
            }
          }, {
            key: "setAttribute",
            value: function setAttribute(t, e, n) {
              n._setAttribute(t, e);
            }
          }, {
            key: "removeAttribute",
            value: function removeAttribute(t, e) {
              e._removeAttribute(t);
            }
          }, {
            key: "addClass",
            value: function addClass(t, e) {
              e._addClass(t);
            }
          }, {
            key: "removeClass",
            value: function removeClass(t, e) {
              e._removeClass(t);
            }
          }, {
            key: "setStyle",
            value: function setStyle(t, e, n) {
              _(t) && void 0 === n && (n = e), n._setStyle(t, e);
            }
          }, {
            key: "removeStyle",
            value: function removeStyle(t, e) {
              e._removeStyle(t);
            }
          }, {
            key: "setCustomProperty",
            value: function setCustomProperty(t, e, n) {
              n._setCustomProperty(t, e);
            }
          }, {
            key: "removeCustomProperty",
            value: function removeCustomProperty(t, e) {
              return e._removeCustomProperty(t);
            }
          }, {
            key: "createPositionAt",
            value: function createPositionAt(t, e) {
              return Ii._createAt(t, e);
            }
          }, {
            key: "createPositionAfter",
            value: function createPositionAfter(t) {
              return Ii._createAfter(t);
            }
          }, {
            key: "createPositionBefore",
            value: function createPositionBefore(t) {
              return Ii._createBefore(t);
            }
          }, {
            key: "createRange",
            value: function createRange(t, e) {
              return new Oi(t, e);
            }
          }, {
            key: "createRangeOn",
            value: function createRangeOn(t) {
              return Oi._createOn(t);
            }
          }, {
            key: "createRangeIn",
            value: function createRangeIn(t) {
              return Oi._createIn(t);
            }
          }, {
            key: "createSelection",
            value: function createSelection(t, e, n) {
              return new Pi(t, e, n);
            }
          }]);

          return vh;
        }();

        new Set(["black", "silver", "gray", "white", "maroon", "red", "purple", "fuchsia", "green", "lime", "olive", "yellow", "navy", "blue", "teal", "aqua", "orange", "aliceblue", "antiquewhite", "aquamarine", "azure", "beige", "bisque", "blanchedalmond", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkgrey", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkslategrey", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dimgrey", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "gainsboro", "ghostwhite", "gold", "goldenrod", "greenyellow", "grey", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightgrey", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightslategrey", "lightsteelblue", "lightyellow", "limegreen", "linen", "magenta", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "oldlace", "olivedrab", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "skyblue", "slateblue", "slategray", "slategrey", "snow", "springgreen", "steelblue", "tan", "thistle", "tomato", "turquoise", "violet", "wheat", "whitesmoke", "yellowgreen", "activeborder", "activecaption", "appworkspace", "background", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "captiontext", "graytext", "highlight", "highlighttext", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infobackground", "infotext", "menu", "menutext", "scrollbar", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "window", "windowframe", "windowtext", "rebeccapurple", "currentcolor", "transparent"]);
        var yh = /^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;

        function xh(t) {
          return yh.test(t);
        }

        var Ch = /^[+-]?[0-9]*([.][0-9]+)?%$/;

        var Th = /*#__PURE__*/function (_wl) {
          _inherits(Th, _wl);

          var _super136 = _createSuper(Th);

          function Th(t, e) {
            var _this205;

            _classCallCheck(this, Th);

            _this205 = _super136.call(this, t), _this205.view = e, _this205._toolbarConfig = _u(t.config.get("toolbar")), _this205._elementReplacer = new gs();
            return _this205;
          }

          _createClass(Th, [{
            key: "element",
            get: function get() {
              return this.view.element;
            }
          }, {
            key: "init",
            value: function init(t) {
              var e = this.editor,
                  n = this.view,
                  i = e.editing.view,
                  o = n.editable,
                  r = i.document.getRoot();
              o.name = r.rootName, n.render();
              var s = o.element;
              this.setEditableElement(o.name, s), this.focusTracker.add(s), n.editable.bind("isFocused").to(this.focusTracker), i.attachDomRoot(s), t && this._elementReplacer.replace(t, this.element), this._initPlaceholder(), this._initToolbar(), this.fire("ready");
            }
          }, {
            key: "destroy",
            value: function destroy() {
              var t = this.view,
                  e = this.editor.editing.view;
              this._elementReplacer.restore(), e.detachDomRoot(t.editable.name), t.destroy(), _get3(_getPrototypeOf(Th.prototype), "destroy", this).call(this);
            }
          }, {
            key: "_initToolbar",
            value: function _initToolbar() {
              var t = this.editor,
                  e = this.view,
                  n = t.editing.view;
              e.stickyPanel.bind("isActive").to(this.focusTracker, "isFocused"), e.stickyPanel.limiterElement = e.element, e.stickyPanel.bind("viewportTopOffset").to(this, "viewportOffset", function (_ref40) {
                var t = _ref40.top;
                return t;
              }), e.toolbar.fillFromConfig(this._toolbarConfig, this.componentFactory), function (_ref41) {
                var t = _ref41.origin,
                    e = _ref41.originKeystrokeHandler,
                    n = _ref41.originFocusTracker,
                    i = _ref41.toolbar,
                    o = _ref41.beforeFocus,
                    r = _ref41.afterBlur;
                n.add(i.element), e.set("Alt+F10", function (t, e) {
                  n.isFocused && !i.focusTracker.isFocused && (o && o(), i.focus(), e());
                }), i.keystrokes.set("Esc", function (e, n) {
                  i.focusTracker.isFocused && (t.focus(), r && r(), n());
                });
              }({
                origin: n,
                originFocusTracker: this.focusTracker,
                originKeystrokeHandler: t.keystrokes,
                toolbar: e.toolbar
              });
            }
          }, {
            key: "_initPlaceholder",
            value: function _initPlaceholder() {
              var t = this.editor,
                  e = t.editing.view,
                  n = e.document.getRoot(),
                  i = t.sourceElement,
                  o = t.config.get("placeholder") || i && "textarea" === i.tagName.toLowerCase() && i.getAttribute("placeholder");
              o && ih({
                view: e,
                element: n,
                text: o,
                isDirectHost: !1,
                keepOnFocus: !0
              });
            }
          }]);

          return Th;
        }(wl);

        n(226);

        var Ah = /*#__PURE__*/function (_Mu) {
          _inherits(Ah, _Mu);

          var _super137 = _createSuper(Ah);

          function Ah(t, e) {
            var _this206;

            var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

            _classCallCheck(this, Ah);

            _this206 = _super137.call(this, t), _this206.stickyPanel = new eh(t), _this206.toolbar = new wu(t, {
              shouldGroupWhenFull: n.shouldToolbarGroupWhenFull
            }), _this206.editable = new Nu(t, e);
            return _this206;
          }

          _createClass(Ah, [{
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(Ah.prototype), "render", this).call(this), this.stickyPanel.content.add(this.toolbar), this.top.add(this.stickyPanel), this.main.add(this.editable);
            }
          }]);

          return Ah;
        }(Mu);

        var Eh = /*#__PURE__*/function (_bl) {
          _inherits(Eh, _bl);

          var _super138 = _createSuper(Eh);

          function Eh(t, e) {
            var _this207;

            _classCallCheck(this, Eh);

            _this207 = _super138.call(this, e), Ze(t) && (_this207.sourceElement = t), _this207.model.document.createRoot();
            var n = !_this207.config.get("toolbar.shouldNotGroupWhenFull"),
                i = new Ah(_this207.locale, _this207.editing.view, {
              shouldToolbarGroupWhenFull: n
            });
            _this207.ui = new Th(_assertThisInitialized(_this207), i), function (t) {
              if (!Object(si.a)(t.updateSourceElement)) throw new rn["default"]("attachtoform-missing-elementapi-interface", t);
              var e = t.sourceElement;

              if (e && "textarea" === e.tagName.toLowerCase() && e.form) {
                var _n211;

                var _i168 = e.form,
                    _o87 = function _o87() {
                  return t.updateSourceElement();
                };

                Object(si.a)(_i168.submit) && (_n211 = _i168.submit, _i168.submit = function () {
                  _o87(), _n211.apply(_i168);
                }), _i168.addEventListener("submit", _o87), t.on("destroy", function () {
                  _i168.removeEventListener("submit", _o87), _n211 && (_i168.submit = _n211);
                });
              }
            }(_assertThisInitialized(_this207));
            return _this207;
          }

          _createClass(Eh, [{
            key: "destroy",
            value: function destroy() {
              return this.sourceElement && this.updateSourceElement(), this.ui.destroy(), _get3(_getPrototypeOf(Eh.prototype), "destroy", this).call(this);
            }
          }], [{
            key: "create",
            value: function create(t) {
              var _this208 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              return new Promise(function (n) {
                var i = new _this208(t, e);
                n(i.initPlugins().then(function () {
                  return i.ui.init(Ze(t) ? t : null);
                }).then(function () {
                  if (!Ze(t) && e.initialData) throw new rn["default"]("editor-create-initial-data", null);
                  var n = void 0 !== e.initialData ? e.initialData : function (t) {
                    return Ze(t) ? function (t) {
                      return t instanceof HTMLTextAreaElement ? t.value : t.innerHTML;
                    }(t) : t;
                  }(t);
                  return i.data.init(n);
                }).then(function () {
                  return i.fire("ready");
                }).then(function () {
                  return i;
                }));
              });
            }
          }]);

          return Eh;
        }(bl);

        Object(o["default"])(Eh, vl), Object(o["default"])(Eh, yl);

        var Sh = /*#__PURE__*/function () {
          function Sh(t) {
            _classCallCheck(this, Sh);

            this.files = function (t) {
              var e = Array.from(t.files || []),
                  n = Array.from(t.items || []);
              if (e.length) return e;
              return n.filter(function (t) {
                return "file" === t.kind;
              }).map(function (t) {
                return t.getAsFile();
              });
            }(t), this._native = t;
          }

          _createClass(Sh, [{
            key: "types",
            get: function get() {
              return this._native.types;
            }
          }, {
            key: "getData",
            value: function getData(t) {
              return this._native.getData(t);
            }
          }, {
            key: "setData",
            value: function setData(t, e) {
              this._native.setData(t, e);
            }
          }, {
            key: "effectAllowed",
            get: function get() {
              return this._native.effectAllowed;
            },
            set: function set(t) {
              this._native.effectAllowed = t;
            }
          }, {
            key: "dropEffect",
            get: function get() {
              return this._native.dropEffect;
            },
            set: function set(t) {
              this._native.dropEffect = t;
            }
          }, {
            key: "isCanceled",
            get: function get() {
              return "none" == this._native.dropEffect || !!this._native.mozUserCancelled;
            }
          }]);

          return Sh;
        }();

        var Ih = /*#__PURE__*/function (_$r7) {
          _inherits(Ih, _$r7);

          var _super139 = _createSuper(Ih);

          function Ih(t) {
            var _this209;

            _classCallCheck(this, Ih);

            _this209 = _super139.call(this, t);
            var e = _this209.document;

            function n(t) {
              return function (n, i) {
                i.preventDefault();
                var o = i.dropRange ? [i.dropRange] : null,
                    r = new Di.a(e, t);
                e.fire(r, {
                  dataTransfer: i.dataTransfer,
                  method: n.name,
                  targetRanges: o,
                  target: i.target
                }), r.stop.called && i.stopPropagation();
              };
            }

            _this209.domEventType = ["paste", "copy", "cut", "drop", "dragover", "dragstart", "dragend", "dragenter", "dragleave"], _this209.listenTo(e, "paste", n("clipboardInput"), {
              priority: "low"
            }), _this209.listenTo(e, "drop", n("clipboardInput"), {
              priority: "low"
            }), _this209.listenTo(e, "dragover", n("dragging"), {
              priority: "low"
            });
            return _this209;
          }

          _createClass(Ih, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              var e = {
                dataTransfer: new Sh(t.clipboardData ? t.clipboardData : t.dataTransfer)
              };
              "drop" != t.type && "dragover" != t.type || (e.dropRange = function (t, e) {
                var n = e.target.ownerDocument,
                    i = e.clientX,
                    o = e.clientY;
                var r;
                n.caretRangeFromPoint && n.caretRangeFromPoint(i, o) ? r = n.caretRangeFromPoint(i, o) : e.rangeParent && ((r = n.createRange()).setStart(e.rangeParent, e.rangeOffset), r.collapse(!0));
                if (r) return t.domConverter.domRangeToView(r);
                return null;
              }(this.view, t)), this.fire(t.type, t, e);
            }
          }]);

          return Ih;
        }($r);

        var Oh = ["figcaption", "li"];

        var Rh = /*#__PURE__*/function (_r52) {
          _inherits(Rh, _r52);

          var _super140 = _createSuper(Rh);

          function Rh() {
            _classCallCheck(this, Rh);

            return _super140.apply(this, arguments);
          }

          _createClass(Rh, [{
            key: "init",
            value: function init() {
              this.editor.editing.view.addObserver(Ih), this._setupPasteDrop(), this._setupCopyCut();
            }
          }, {
            key: "_setupPasteDrop",
            value: function _setupPasteDrop() {
              var _this210 = this;

              var t = this.editor,
                  e = t.model,
                  n = t.editing.view,
                  i = n.document;
              this.listenTo(i, "clipboardInput", function (e) {
                t.isReadOnly && e.stop();
              }, {
                priority: "highest"
              }), this.listenTo(i, "clipboardInput", function (t, e) {
                var i = e.dataTransfer;
                var o = e.content || "";
                o || (i.getData("text/html") ? o = function (t) {
                  return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g, function (t, e) {
                    return 1 == e.length ? " " : e;
                  }).replace(/<!--[\s\S]*?-->/g, "");
                }(i.getData("text/html")) : i.getData("text/plain") && (o = function (t) {
                  return ((t = t.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\r?\n\r?\n/g, "</p><p>").replace(/\r?\n/g, "<br>").replace(/^\s/, "&nbsp;").replace(/\s$/, "&nbsp;").replace(/\s\s/g, " &nbsp;")).includes("</p><p>") || t.includes("<br>")) && (t = "<p>".concat(t, "</p>")), t;
                }(i.getData("text/plain"))), o = _this210.editor.data.htmlProcessor.toView(o));
                var r = new Di.a(_this210, "inputTransformation");
                _this210.fire(r, {
                  content: o,
                  dataTransfer: i,
                  targetRanges: e.targetRanges,
                  method: e.method
                }), r.stop.called && t.stop(), n.scrollToTheSelection();
              }, {
                priority: "low"
              }), this.listenTo(this, "inputTransformation", function (t, n) {
                if (n.content.isEmpty) return;

                var i = _this210.editor.data.toModel(n.content, "$clipboardHolder");

                0 != i.childCount && (t.stop(), e.change(function () {
                  _this210.fire("contentInsertion", {
                    content: i,
                    method: n.method,
                    dataTransfer: n.dataTransfer,
                    targetRanges: n.targetRanges
                  });
                }));
              }, {
                priority: "low"
              }), this.listenTo(this, "contentInsertion", function (t, n) {
                n.resultRange = e.insertContent(n.content);
              }, {
                priority: "low"
              });
            }
          }, {
            key: "_setupCopyCut",
            value: function _setupCopyCut() {
              var _this211 = this;

              var t = this.editor,
                  e = t.model.document,
                  n = t.editing.view.document;

              function i(i, o) {
                var r = o.dataTransfer;
                o.preventDefault();
                var s = t.data.toView(t.model.getSelectedContent(e.selection));
                n.fire("clipboardOutput", {
                  dataTransfer: r,
                  content: s,
                  method: i.name
                });
              }

              this.listenTo(n, "copy", i, {
                priority: "low"
              }), this.listenTo(n, "cut", function (e, n) {
                t.isReadOnly ? n.preventDefault() : i(e, n);
              }, {
                priority: "low"
              }), this.listenTo(n, "clipboardOutput", function (n, i) {
                i.content.isEmpty || (i.dataTransfer.setData("text/html", _this211.editor.data.htmlProcessor.toData(i.content)), i.dataTransfer.setData("text/plain", function t(e) {
                  var n = "";
                  if (e.is("$text") || e.is("$textProxy")) n = e.data;else if (e.is("element", "img") && e.hasAttribute("alt")) n = e.getAttribute("alt");else if (e.is("element", "br")) n = "\n";else {
                    var _i169 = null;

                    var _iterator308 = _createForOfIteratorHelper(e.getChildren()),
                        _step308;

                    try {
                      for (_iterator308.s(); !(_step308 = _iterator308.n()).done;) {
                        var _o88 = _step308.value;

                        var _e219 = t(_o88);

                        _i169 && (_i169.is("containerElement") || _o88.is("containerElement")) && (Oh.includes(_i169.name) || Oh.includes(_o88.name) ? n += "\n" : n += "\n\n"), n += _e219, _i169 = _o88;
                      }
                    } catch (err) {
                      _iterator308.e(err);
                    } finally {
                      _iterator308.f();
                    }
                  }
                  return n;
                }(i.content))), "cut" == i.method && t.model.deleteContent(e.selection);
              }, {
                priority: "low"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ClipboardPipeline";
            }
          }]);

          return Rh;
        }(r);

        function Mh(t, e) {
          var _iterator309, _step309, _n212;

          return regeneratorRuntime.wrap(function Mh$(_context70) {
            while (1) {
              switch (_context70.prev = _context70.next) {
                case 0:
                  _iterator309 = _createForOfIteratorHelper(e);
                  _context70.prev = 1;

                  _iterator309.s();

                case 3:
                  if ((_step309 = _iterator309.n()).done) {
                    _context70.next = 11;
                    break;
                  }

                  _n212 = _step309.value;
                  _context70.t0 = _n212 && t.getAttributeProperties(_n212[0]).copyOnEnter;

                  if (!_context70.t0) {
                    _context70.next = 9;
                    break;
                  }

                  _context70.next = 9;
                  return _n212;

                case 9:
                  _context70.next = 3;
                  break;

                case 11:
                  _context70.next = 16;
                  break;

                case 13:
                  _context70.prev = 13;
                  _context70.t1 = _context70["catch"](1);

                  _iterator309.e(_context70.t1);

                case 16:
                  _context70.prev = 16;

                  _iterator309.f();

                  return _context70.finish(16);

                case 19:
                case "end":
                  return _context70.stop();
              }
            }
          }, _marked3, null, [[1, 13, 16, 19]]);
        }

        var Ph = /*#__PURE__*/function (_a17) {
          _inherits(Ph, _a17);

          var _super141 = _createSuper(Ph);

          function Ph() {
            _classCallCheck(this, Ph);

            return _super141.apply(this, arguments);
          }

          _createClass(Ph, [{
            key: "execute",
            value: function execute() {
              var _this212 = this;

              var t = this.editor.model,
                  e = t.document;
              t.change(function (n) {
                !function (t, e, n, i) {
                  var o = n.isCollapsed,
                      r = n.getFirstRange(),
                      s = r.start.parent,
                      a = r.end.parent;
                  if (i.isLimit(s) || i.isLimit(a)) return void (o || s != a || t.deleteContent(n));

                  if (o) {
                    var _t231 = Mh(e.model.schema, n.getAttributes());

                    Nh(e, r.start), e.setSelectionAttribute(_t231);
                  } else {
                    var _i170 = !(r.start.isAtStart && r.end.isAtEnd),
                        _o89 = s == a;

                    t.deleteContent(n, {
                      leaveUnmerged: _i170
                    }), _i170 && (_o89 ? Nh(e, n.focus) : e.setSelection(a, 0));
                  }
                }(_this212.editor.model, n, e.selection, t.schema), _this212.fire("afterExecute", {
                  writer: n
                });
              });
            }
          }]);

          return Ph;
        }(a);

        function Nh(t, e) {
          t.split(e), t.setSelection(e.parent.nextSibling, 0);
        }

        var Dh = /*#__PURE__*/function (_or6) {
          _inherits(Dh, _or6);

          var _super142 = _createSuper(Dh);

          function Dh(t) {
            var _this213;

            _classCallCheck(this, Dh);

            _this213 = _super142.call(this, t);
            var e = _this213.document;
            e.on("keydown", function (t, n) {
              if (_this213.isEnabled && n.keyCode == to.enter) {
                var _i171 = new ji(e, "enter", e.selection.getFirstRange());

                e.fire(_i171, new Wr(e, n.domEvent, {
                  isSoft: n.shiftKey
                })), _i171.stop.called && t.stop();
              }
            });
            return _this213;
          }

          _createClass(Dh, [{
            key: "observe",
            value: function observe() {}
          }]);

          return Dh;
        }(or);

        var jh = /*#__PURE__*/function (_r53) {
          _inherits(jh, _r53);

          var _super143 = _createSuper(jh);

          function jh() {
            _classCallCheck(this, jh);

            return _super143.apply(this, arguments);
          }

          _createClass(jh, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.editing.view,
                  n = e.document;
              e.addObserver(Dh), t.commands.add("enter", new Ph(t)), this.listenTo(n, "enter", function (n, i) {
                i.preventDefault(), i.isSoft || (t.execute("enter"), e.scrollToTheSelection());
              }, {
                priority: "low"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Enter";
            }
          }]);

          return jh;
        }(r);

        var Bh = /*#__PURE__*/function () {
          function Bh(t) {
            var _this214 = this;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;

            _classCallCheck(this, Bh);

            this.model = t, this.size = 0, this.limit = e, this.isLocked = !1, this._changeCallback = function (t, e) {
              "transparent" != e.type && e !== _this214._batch && _this214._reset(!0);
            }, this._selectionChangeCallback = function () {
              _this214._reset();
            }, this.model.document.on("change", this._changeCallback), this.model.document.selection.on("change:range", this._selectionChangeCallback), this.model.document.selection.on("change:attribute", this._selectionChangeCallback);
          }

          _createClass(Bh, [{
            key: "batch",
            get: function get() {
              return this._batch || (this._batch = this.model.createBatch()), this._batch;
            }
          }, {
            key: "input",
            value: function input(t) {
              this.size += t, this.size >= this.limit && this._reset(!0);
            }
          }, {
            key: "lock",
            value: function lock() {
              this.isLocked = !0;
            }
          }, {
            key: "unlock",
            value: function unlock() {
              this.isLocked = !1;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.model.document.off("change", this._changeCallback), this.model.document.selection.off("change:range", this._selectionChangeCallback), this.model.document.selection.off("change:attribute", this._selectionChangeCallback);
            }
          }, {
            key: "_reset",
            value: function _reset(t) {
              this.isLocked && !t || (this._batch = null, this.size = 0);
            }
          }]);

          return Bh;
        }();

        var Lh = /*#__PURE__*/function (_a18) {
          _inherits(Lh, _a18);

          var _super144 = _createSuper(Lh);

          function Lh(t, e) {
            var _this215;

            _classCallCheck(this, Lh);

            _this215 = _super144.call(this, t), _this215.direction = e, _this215._buffer = new Bh(t.model, t.config.get("typing.undoStep"));
            return _this215;
          }

          _createClass(Lh, [{
            key: "buffer",
            get: function get() {
              return this._buffer;
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this216 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document;
              e.enqueueChange(this._buffer.batch, function (i) {
                _this216._buffer.lock();

                var o = i.createSelection(t.selection || n.selection),
                    r = t.sequence || 1,
                    s = o.isCollapsed;
                if (o.isCollapsed && e.modifySelection(o, {
                  direction: _this216.direction,
                  unit: t.unit
                }), _this216._shouldEntireContentBeReplacedWithParagraph(r)) return void _this216._replaceEntireContentWithParagraph(i);
                if (_this216._shouldReplaceFirstBlockWithParagraph(o, r)) return void _this216.editor.execute("paragraph", {
                  selection: o
                });
                if (o.isCollapsed) return;
                var a = 0;
                o.getFirstRange().getMinimalFlatRanges().forEach(function (t) {
                  a += Mi(t.getWalker({
                    singleCharacters: !0,
                    ignoreElementEnd: !0,
                    shallow: !0
                  }));
                }), e.deleteContent(o, {
                  doNotResetEntireContent: s,
                  direction: _this216.direction
                }), _this216._buffer.input(a), i.setSelection(o), _this216._buffer.unlock();
              });
            }
          }, {
            key: "_shouldEntireContentBeReplacedWithParagraph",
            value: function _shouldEntireContentBeReplacedWithParagraph(t) {
              if (t > 1) return !1;
              var e = this.editor.model,
                  n = e.document.selection,
                  i = e.schema.getLimitElement(n);
              if (!(n.isCollapsed && n.containsEntireContent(i))) return !1;
              if (!e.schema.checkChild(i, "paragraph")) return !1;
              var o = i.getChild(0);
              return !o || "paragraph" !== o.name;
            }
          }, {
            key: "_replaceEntireContentWithParagraph",
            value: function _replaceEntireContentWithParagraph(t) {
              var e = this.editor.model,
                  n = e.document.selection,
                  i = e.schema.getLimitElement(n),
                  o = t.createElement("paragraph");
              t.remove(t.createRangeIn(i)), t.insert(o, i), t.setSelection(o, 0);
            }
          }, {
            key: "_shouldReplaceFirstBlockWithParagraph",
            value: function _shouldReplaceFirstBlockWithParagraph(t, e) {
              var n = this.editor.model;
              if (e > 1 || "backward" != this.direction) return !1;
              if (!t.isCollapsed) return !1;
              var i = t.getFirstPosition(),
                  o = n.schema.getLimitElement(i),
                  r = o.getChild(0);
              return i.parent == r && !!t.containsEntireContent(r) && !!n.schema.checkChild(o, "paragraph") && "paragraph" != r.name;
            }
          }]);

          return Lh;
        }(a);

        var zh = /*#__PURE__*/function (_or7) {
          _inherits(zh, _or7);

          var _super145 = _createSuper(zh);

          function zh(t) {
            var _this217;

            _classCallCheck(this, zh);

            _this217 = _super145.call(this, t);
            var e = t.document;
            var n = 0;

            function i(t, n, i) {
              var o = new ji(e, "delete", e.selection.getFirstRange());
              e.fire(o, new Wr(e, n, i)), o.stop.called && t.stop();
            }

            e.on("keyup", function (t, e) {
              e.keyCode != to["delete"] && e.keyCode != to.backspace || (n = 0);
            }), e.on("keydown", function (t, e) {
              var o = {};
              if (e.keyCode == to["delete"]) o.direction = "forward", o.unit = "character";else {
                if (e.keyCode != to.backspace) return;
                o.direction = "backward", o.unit = "codePoint";
              }
              var r = Qi.isMac ? e.altKey : e.ctrlKey;
              o.unit = r ? "word" : o.unit, o.sequence = ++n, i(t, e.domEvent, o);
            }), Qi.isAndroid && e.on("beforeinput", function (e, n) {
              if ("deleteContentBackward" != n.domEvent.inputType) return;
              var o = {
                unit: "codepoint",
                direction: "backward",
                sequence: 1
              },
                  r = n.domTarget.ownerDocument.defaultView.getSelection();
              r.anchorNode == r.focusNode && r.anchorOffset + 1 != r.focusOffset && (o.selectionToRemove = t.domConverter.domSelectionToView(r)), i(e, n.domEvent, o);
            });
            return _this217;
          }

          _createClass(zh, [{
            key: "observe",
            value: function observe() {}
          }]);

          return zh;
        }(or);

        var Fh = /*#__PURE__*/function (_r54) {
          _inherits(Fh, _r54);

          var _super146 = _createSuper(Fh);

          function Fh() {
            _classCallCheck(this, Fh);

            return _super146.apply(this, arguments);
          }

          _createClass(Fh, [{
            key: "init",
            value: function init() {
              var _this218 = this;

              var t = this.editor,
                  e = t.editing.view,
                  n = e.document,
                  i = t.model.document;
              e.addObserver(zh), this._undoOnBackspace = !1;
              var o = new Lh(t, "forward");

              if (t.commands.add("deleteForward", o), t.commands.add("forwardDelete", o), t.commands.add("delete", new Lh(t, "backward")), this.listenTo(n, "delete", function (n, i) {
                var o = {
                  unit: i.unit,
                  sequence: i.sequence
                };

                if (i.selectionToRemove) {
                  var _e220 = t.model.createSelection(),
                      _n213 = [];

                  var _iterator310 = _createForOfIteratorHelper(i.selectionToRemove.getRanges()),
                      _step310;

                  try {
                    for (_iterator310.s(); !(_step310 = _iterator310.n()).done;) {
                      var _e221 = _step310.value;

                      _n213.push(t.editing.mapper.toModelRange(_e221));
                    }
                  } catch (err) {
                    _iterator310.e(err);
                  } finally {
                    _iterator310.f();
                  }

                  _e220.setTo(_n213), o.selection = _e220;
                }

                t.execute("forward" == i.direction ? "deleteForward" : "delete", o), i.preventDefault(), e.scrollToTheSelection();
              }, {
                priority: "low"
              }), Qi.isAndroid) {
                var _t232 = null;
                this.listenTo(n, "delete", function (e, n) {
                  var i = n.domTarget.ownerDocument.defaultView.getSelection();
                  _t232 = {
                    anchorNode: i.anchorNode,
                    anchorOffset: i.anchorOffset,
                    focusNode: i.focusNode,
                    focusOffset: i.focusOffset
                  };
                }, {
                  priority: "lowest"
                }), this.listenTo(n, "keyup", function (e, n) {
                  if (_t232) {
                    var _e222 = n.domTarget.ownerDocument.defaultView.getSelection();

                    _e222.collapse(_t232.anchorNode, _t232.anchorOffset), _e222.extend(_t232.focusNode, _t232.focusOffset), _t232 = null;
                  }
                });
              }

              this.editor.plugins.has("UndoEditing") && (this.listenTo(n, "delete", function (e, n) {
                _this218._undoOnBackspace && "backward" == n.direction && 1 == n.sequence && "codePoint" == n.unit && (_this218._undoOnBackspace = !1, t.execute("undo"), n.preventDefault(), e.stop());
              }, {
                context: "$capture"
              }), this.listenTo(i, "change", function () {
                _this218._undoOnBackspace = !1;
              }));
            }
          }, {
            key: "requestUndoOnBackspace",
            value: function requestUndoOnBackspace() {
              this.editor.plugins.has("UndoEditing") && (this._undoOnBackspace = !0);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Delete";
            }
          }]);

          return Fh;
        }(r);

        var Vh = /*#__PURE__*/function () {
          function Vh() {
            _classCallCheck(this, Vh);

            this._stack = [];
          }

          _createClass(Vh, [{
            key: "add",
            value: function add(t, e) {
              var n = this._stack,
                  i = n[0];

              this._insertDescriptor(t);

              var o = n[0];
              i === o || Uh(i, o) || this.fire("change:top", {
                oldDescriptor: i,
                newDescriptor: o,
                writer: e
              });
            }
          }, {
            key: "remove",
            value: function remove(t, e) {
              var n = this._stack,
                  i = n[0];

              this._removeDescriptor(t);

              var o = n[0];
              i === o || Uh(i, o) || this.fire("change:top", {
                oldDescriptor: i,
                newDescriptor: o,
                writer: e
              });
            }
          }, {
            key: "_insertDescriptor",
            value: function _insertDescriptor(t) {
              var e = this._stack,
                  n = e.findIndex(function (e) {
                return e.id === t.id;
              });
              if (Uh(t, e[n])) return;
              n > -1 && e.splice(n, 1);
              var i = 0;

              for (; e[i] && Hh(e[i], t);) {
                i++;
              }

              e.splice(i, 0, t);
            }
          }, {
            key: "_removeDescriptor",
            value: function _removeDescriptor(t) {
              var e = this._stack,
                  n = e.findIndex(function (e) {
                return e.id === t;
              });
              n > -1 && e.splice(n, 1);
            }
          }]);

          return Vh;
        }();

        function Uh(t, e) {
          return t && e && t.priority == e.priority && qh(t.classes) == qh(e.classes);
        }

        function Hh(t, e) {
          return t.priority > e.priority || !(t.priority < e.priority) && qh(t.classes) > qh(e.classes);
        }

        function qh(t) {
          return Array.isArray(t) ? t.sort().join(",") : t;
        }

        Object(o["default"])(Vh, sn["default"]);
        var Wh = n(148),
            $h = n.n(Wh);
        var Yh = "ck-widget",
            Jh = "ck-widget_selected";

        function Gh(t) {
          return !!t.is("element") && !!t.getCustomProperty("widget");
        }

        function Kh(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          if (!t.is("containerElement")) throw new rn["default"]("widget-to-widget-wrong-element-type", null, {
            element: t
          });
          return e.setAttribute("contenteditable", "false", t), e.addClass(Yh, t), e.setCustomProperty("widget", !0, t), t.getFillerOffset = tf, n.label && function (t, e, n) {
            n.setCustomProperty("widgetLabel", e, t);
          }(t, n.label, e), n.hasSelectionHandle && function (t, e) {
            var n = e.createUIElement("div", {
              "class": "ck ck-widget__selection-handle"
            }, function (t) {
              var e = this.toDomElement(t),
                  n = new tu();
              return n.set("content", $h.a), n.render(), e.appendChild(n.element), e;
            });
            e.insert(e.createPositionAt(t, 0), n), e.addClass(["ck-widget_with-selection-handle"], t);
          }(t, e), Qh(t, e), t;
        }

        function Qh(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (t, e, n) {
            if (e.classes && n.addClass(cn(e.classes), t), e.attributes) for (var _i172 in e.attributes) {
              n.setAttribute(_i172, e.attributes[_i172], t);
            }
          };
          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function (t, e, n) {
            if (e.classes && n.removeClass(cn(e.classes), t), e.attributes) for (var _i173 in e.attributes) {
              n.removeAttribute(_i173, t);
            }
          };
          var o = new Vh();
          o.on("change:top", function (e, o) {
            o.oldDescriptor && i(t, o.oldDescriptor, o.writer), o.newDescriptor && n(t, o.newDescriptor, o.writer);
          }), e.setCustomProperty("addHighlight", function (t, e, n) {
            return o.add(e, n);
          }, t), e.setCustomProperty("removeHighlight", function (t, e, n) {
            return o.remove(e, n);
          }, t);
        }

        function Xh(t, e) {
          return e.addClass(["ck-editor__editable", "ck-editor__nested-editable"], t), e.setAttribute("contenteditable", t.isReadOnly ? "false" : "true", t), t.on("change:isReadOnly", function (n, i, o) {
            e.setAttribute("contenteditable", o ? "false" : "true", t);
          }), t.on("change:isFocused", function (n, i, o) {
            o ? e.addClass("ck-editor__nested-editable_focused", t) : e.removeClass("ck-editor__nested-editable_focused", t);
          }), Qh(t, e), t;
        }

        function Zh(t, e) {
          var n = t.getSelectedElement();

          if (n) {
            var _i174 = of(t);

            if (_i174) return e.createRange(e.createPositionAt(n, _i174));
            if (e.schema.isObject(n) && !e.schema.isInline(n)) return e.createRangeOn(n);
          }

          var i = t.getSelectedBlocks().next().value;

          if (i) {
            if (i.isEmpty) return e.createRange(e.createPositionAt(i, 0));

            var _n214 = e.createPositionAfter(i);

            return t.focus.isTouching(_n214) ? e.createRange(_n214) : e.createRange(e.createPositionBefore(i));
          }

          return e.createRange(t.focus);
        }

        function tf() {
          return null;
        }

        var ef = "widget-type-around";

        function nf(t, e, n) {
          return t && Gh(t) && !n.isInline(e);
        }

        function of(t) {
          return t.getAttribute(ef);
        }

        var rf = [no("arrowUp"), no("arrowRight"), no("arrowDown"), no("arrowLeft"), 9, 16, 17, 18, 19, 20, 27, 33, 34, 35, 36, 45, 91, 93, 144, 145, 173, 174, 175, 176, 177, 178, 179, 255];

        for (var _t233 = 112; _t233 <= 135; _t233++) {
          rf.push(_t233);
        }

        function sf(t) {
          return !(!t.ctrlKey && !t.metaKey) || rf.includes(t.keyCode);
        }

        var af = n(149),
            cf = n.n(af);
        n(228);
        var lf = ["before", "after"],
            df = new DOMParser().parseFromString(cf.a, "image/svg+xml").firstChild,
            uf = "ck-widget__type-around_disabled";

        var hf = /*#__PURE__*/function (_r55) {
          _inherits(hf, _r55);

          var _super147 = _createSuper(hf);

          function hf(t) {
            var _this219;

            _classCallCheck(this, hf);

            _this219 = _super147.call(this, t), _this219._currentFakeCaretModelElement = null;
            return _this219;
          }

          _createClass(hf, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.editing.view;
              this.on("change:isEnabled", function (n, i, o) {
                e.change(function (t) {
                  var _iterator311 = _createForOfIteratorHelper(e.document.roots),
                      _step311;

                  try {
                    for (_iterator311.s(); !(_step311 = _iterator311.n()).done;) {
                      var _n215 = _step311.value;
                      o ? t.removeClass(uf, _n215) : t.addClass(uf, _n215);
                    }
                  } catch (err) {
                    _iterator311.e(err);
                  } finally {
                    _iterator311.f();
                  }
                }), o || t.model.change(function (t) {
                  t.removeSelectionAttribute(ef);
                });
              }), this._enableTypeAroundUIInjection(), this._enableInsertingParagraphsOnButtonClick(), this._enableInsertingParagraphsOnEnterKeypress(), this._enableInsertingParagraphsOnTypingKeystroke(), this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(), this._enableDeleteIntegration(), this._enableInsertContentIntegration(), this._enableDeleteContentIntegration();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._currentFakeCaretModelElement = null;
            }
          }, {
            key: "_insertParagraph",
            value: function _insertParagraph(t, e) {
              var n = this.editor,
                  i = n.editing.view;
              n.execute("insertParagraph", {
                position: n.model.createPositionAt(t, e)
              }), i.focus(), i.scrollToTheSelection();
            }
          }, {
            key: "_listenToIfEnabled",
            value: function _listenToIfEnabled(t, e, n, i) {
              var _this220 = this;

              this.listenTo(t, e, function () {
                _this220.isEnabled && n.apply(void 0, arguments);
              }, i);
            }
          }, {
            key: "_insertParagraphAccordingToFakeCaretPosition",
            value: function _insertParagraphAccordingToFakeCaretPosition() {
              var t = this.editor.model.document.selection,
                  e = of(t);
              if (!e) return !1;
              var n = t.getSelectedElement();
              return this._insertParagraph(n, e), !0;
            }
          }, {
            key: "_enableTypeAroundUIInjection",
            value: function _enableTypeAroundUIInjection() {
              var t = this.editor,
                  e = t.model.schema,
                  n = t.locale.t,
                  i = {
                before: n("Insert paragraph before block"),
                after: n("Insert paragraph after block")
              };
              t.editing.downcastDispatcher.on("insert", function (t, n, o) {
                var r = o.mapper.toViewElement(n.item);
                nf(r, n.item, e) && function (t, e, n) {
                  var i = t.createUIElement("div", {
                    "class": "ck ck-reset_all ck-widget__type-around"
                  }, function (t) {
                    var n = this.toDomElement(t);
                    return function (t, e) {
                      var _iterator312 = _createForOfIteratorHelper(lf),
                          _step312;

                      try {
                        for (_iterator312.s(); !(_step312 = _iterator312.n()).done;) {
                          var _n216 = _step312.value;

                          var _i175 = new Dd({
                            tag: "div",
                            attributes: {
                              "class": ["ck", "ck-widget__type-around__button", "ck-widget__type-around__button_".concat(_n216)],
                              title: e[_n216]
                            },
                            children: [t.ownerDocument.importNode(df, !0)]
                          });

                          t.appendChild(_i175.render());
                        }
                      } catch (err) {
                        _iterator312.e(err);
                      } finally {
                        _iterator312.f();
                      }
                    }(n, e), function (t) {
                      var e = new Dd({
                        tag: "div",
                        attributes: {
                          "class": ["ck", "ck-widget__type-around__fake-caret"]
                        }
                      });
                      t.appendChild(e.render());
                    }(n), n;
                  });
                  t.insert(t.createPositionAt(n, "end"), i);
                }(o.writer, i, r);
              }, {
                priority: "low"
              });
            }
          }, {
            key: "_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",
            value: function _enableTypeAroundFakeCaretActivationUsingKeyboardArrows() {
              var _this221 = this;

              var t = this.editor,
                  e = t.model,
                  n = e.document.selection,
                  i = e.schema,
                  o = t.editing.view;

              function r(t) {
                return "ck-widget_type-around_show-fake-caret_".concat(t);
              }

              this._listenToIfEnabled(o.document, "arrowKey", function (t, e) {
                _this221._handleArrowKeyPress(t, e);
              }, {
                context: [Gh, "$text"],
                priority: "high"
              }), this._listenToIfEnabled(n, "change:range", function (e, n) {
                n.directChange && t.model.change(function (t) {
                  t.removeSelectionAttribute(ef);
                });
              }), this._listenToIfEnabled(e.document, "change:data", function () {
                var e = n.getSelectedElement();

                if (e) {
                  if (nf(t.editing.mapper.toViewElement(e), e, i)) return;
                }

                t.model.change(function (t) {
                  t.removeSelectionAttribute(ef);
                });
              }), this._listenToIfEnabled(t.editing.downcastDispatcher, "selection", function (t, e, n) {
                var o = n.writer;

                if (_this221._currentFakeCaretModelElement) {
                  var _t234 = n.mapper.toViewElement(_this221._currentFakeCaretModelElement);

                  _t234 && (o.removeClass(lf.map(r), _t234), _this221._currentFakeCaretModelElement = null);
                }

                var s = e.selection.getSelectedElement();
                if (!s) return;
                var a = n.mapper.toViewElement(s);
                if (!nf(a, s, i)) return;
                var c = of(e.selection);
                c && (o.addClass(r(c), a), _this221._currentFakeCaretModelElement = s);
              }), this._listenToIfEnabled(t.ui.focusTracker, "change:isFocused", function (e, n, i) {
                i || t.model.change(function (t) {
                  t.removeSelectionAttribute(ef);
                });
              });
            }
          }, {
            key: "_handleArrowKeyPress",
            value: function _handleArrowKeyPress(t, e) {
              var n = this.editor,
                  i = n.model,
                  o = i.document.selection,
                  r = i.schema,
                  s = n.editing.view,
                  a = function (t, e) {
                var n = ro(t, e);
                return "down" === n || "right" === n;
              }(e.keyCode, n.locale.contentLanguageDirection),
                  c = s.document.selection.getSelectedElement();

              var l;
              nf(c, n.editing.mapper.toModelElement(c), r) ? l = this._handleArrowKeyPressOnSelectedWidget(a) : o.isCollapsed ? l = this._handleArrowKeyPressWhenSelectionNextToAWidget(a) : e.shiftKey || (l = this._handleArrowKeyPressWhenNonCollapsedSelection(a)), l && (e.preventDefault(), t.stop());
            }
          }, {
            key: "_handleArrowKeyPressOnSelectedWidget",
            value: function _handleArrowKeyPressOnSelectedWidget(t) {
              var e = this.editor.model,
                  n = of(e.document.selection);
              return e.change(function (e) {
                if (!n) return e.setSelectionAttribute(ef, t ? "after" : "before"), !0;
                if (!(n === (t ? "after" : "before"))) return e.removeSelectionAttribute(ef), !0;
                return !1;
              });
            }
          }, {
            key: "_handleArrowKeyPressWhenSelectionNextToAWidget",
            value: function _handleArrowKeyPressWhenSelectionNextToAWidget(t) {
              var e = this.editor,
                  n = e.model,
                  i = n.schema,
                  o = e.plugins.get("Widget"),
                  r = o._getObjectElementNextToSelection(t);

              return !!nf(e.editing.mapper.toViewElement(r), r, i) && (n.change(function (e) {
                o._setSelectionOverElement(r), e.setSelectionAttribute(ef, t ? "before" : "after");
              }), !0);
            }
          }, {
            key: "_handleArrowKeyPressWhenNonCollapsedSelection",
            value: function _handleArrowKeyPressWhenNonCollapsedSelection(t) {
              var e = this.editor,
                  n = e.model,
                  i = n.schema,
                  o = e.editing.mapper,
                  r = n.document.selection,
                  s = t ? r.getLastPosition().nodeBefore : r.getFirstPosition().nodeAfter;
              return !!nf(o.toViewElement(s), s, i) && (n.change(function (e) {
                e.setSelection(s, "on"), e.setSelectionAttribute(ef, t ? "after" : "before");
              }), !0);
            }
          }, {
            key: "_enableInsertingParagraphsOnButtonClick",
            value: function _enableInsertingParagraphsOnButtonClick() {
              var _this222 = this;

              var t = this.editor,
                  e = t.editing.view;

              this._listenToIfEnabled(e.document, "mousedown", function (n, i) {
                var o = function (t) {
                  return t.closest(".ck-widget__type-around__button");
                }(i.domTarget);

                if (!o) return;

                var r = function (t) {
                  return t.classList.contains("ck-widget__type-around__button_before") ? "before" : "after";
                }(o),
                    s = function (t, e) {
                  var n = t.closest(".ck-widget");
                  return e.mapDomToView(n);
                }(o, e.domConverter),
                    a = t.editing.mapper.toModelElement(s);

                _this222._insertParagraph(a, r), i.preventDefault(), n.stop();
              });
            }
          }, {
            key: "_enableInsertingParagraphsOnEnterKeypress",
            value: function _enableInsertingParagraphsOnEnterKeypress() {
              var _this223 = this;

              var t = this.editor,
                  e = t.model.document.selection,
                  n = t.editing.view;

              this._listenToIfEnabled(n.document, "enter", function (n, i) {
                if ("atTarget" != n.eventPhase) return;
                var o = e.getSelectedElement(),
                    r = t.editing.mapper.toViewElement(o),
                    s = t.model.schema;
                var a;
                _this223._insertParagraphAccordingToFakeCaretPosition() ? a = !0 : nf(r, o, s) && (_this223._insertParagraph(o, i.isSoft ? "before" : "after"), a = !0), a && (i.preventDefault(), n.stop());
              }, {
                context: Gh
              });
            }
          }, {
            key: "_enableInsertingParagraphsOnTypingKeystroke",
            value: function _enableInsertingParagraphsOnTypingKeystroke() {
              var _this224 = this;

              var t = this.editor.editing.view,
                  e = [to.enter, to["delete"], to.backspace];

              this._listenToIfEnabled(t.document, "keydown", function (t, n) {
                e.includes(n.keyCode) || sf(n) || _this224._insertParagraphAccordingToFakeCaretPosition();
              }, {
                priority: "high"
              });
            }
          }, {
            key: "_enableDeleteIntegration",
            value: function _enableDeleteIntegration() {
              var t = this.editor,
                  e = t.editing.view,
                  n = t.model,
                  i = n.schema;

              this._listenToIfEnabled(e.document, "delete", function (e, o) {
                if ("atTarget" != e.eventPhase) return;
                var r = of(n.document.selection);
                if (!r) return;
                var s = o.direction,
                    a = n.document.selection.getSelectedElement(),
                    c = "forward" == s;
                if ("before" === r === c) t.execute("delete", {
                  selection: n.createSelection(a, "on")
                });else {
                  var _e223 = i.getNearestSelectionRange(n.createPositionAt(a, r), s);

                  if (_e223) if (_e223.isCollapsed) {
                    var _o90 = n.createSelection(_e223.start);

                    if (n.modifySelection(_o90, {
                      direction: s
                    }), _o90.focus.isEqual(_e223.start)) {
                      var _t235 = function (t, e) {
                        var n = e;

                        var _iterator313 = _createForOfIteratorHelper(e.getAncestors({
                          parentFirst: !0
                        })),
                            _step313;

                        try {
                          for (_iterator313.s(); !(_step313 = _iterator313.n()).done;) {
                            var _i176 = _step313.value;
                            if (_i176.childCount > 1 || t.isLimit(_i176)) break;
                            n = _i176;
                          }
                        } catch (err) {
                          _iterator313.e(err);
                        } finally {
                          _iterator313.f();
                        }

                        return n;
                      }(i, _e223.start.parent);

                      n.deleteContent(n.createSelection(_t235, "on"), {
                        doNotAutoparagraph: !0
                      });
                    } else n.change(function (n) {
                      n.setSelection(_e223), t.execute(c ? "deleteForward" : "delete");
                    });
                  } else n.change(function (n) {
                    n.setSelection(_e223), t.execute(c ? "deleteForward" : "delete");
                  });
                }
                o.preventDefault(), e.stop();
              }, {
                context: Gh
              });
            }
          }, {
            key: "_enableInsertContentIntegration",
            value: function _enableInsertContentIntegration() {
              var t = this.editor,
                  e = this.editor.model,
                  n = e.document.selection;

              this._listenToIfEnabled(t.model, "insertContent", function (t, _ref42) {
                var _ref43 = _slicedToArray(_ref42, 2),
                    i = _ref43[0],
                    o = _ref43[1];

                if (o && !o.is("documentSelection")) return;
                var r = of(n);
                return r ? (t.stop(), e.change(function (t) {
                  var o = n.getSelectedElement(),
                      s = e.createPositionAt(o, r),
                      a = t.createSelection(s),
                      c = e.insertContent(i, a);
                  return t.setSelection(a), c;
                })) : void 0;
              }, {
                priority: "high"
              });
            }
          }, {
            key: "_enableDeleteContentIntegration",
            value: function _enableDeleteContentIntegration() {
              var t = this.editor,
                  e = this.editor.model.document.selection;

              this._listenToIfEnabled(t.model, "deleteContent", function (t, _ref44) {
                var _ref45 = _slicedToArray(_ref44, 1),
                    n = _ref45[0];

                if (n && !n.is("documentSelection")) return;
                of(e) && t.stop();
              }, {
                priority: "high"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "WidgetTypeAround";
            }
          }, {
            key: "requires",
            get: function get() {
              return [jh, Fh];
            }
          }]);

          return hf;
        }(r);

        function ff(t) {
          var e = t.model;
          return function (n, i) {
            var o = i.keyCode == to.arrowup,
                r = i.keyCode == to.arrowdown,
                s = i.shiftKey,
                a = e.document.selection;
            if (!o && !r) return;
            var c = r;
            if (s && function (t, e) {
              return !t.isCollapsed && t.isBackward == e;
            }(a, c)) return;

            var l = function (t, e, n) {
              var i = t.model;

              if (n) {
                var _t236 = e.isCollapsed ? e.focus : e.getLastPosition(),
                    _n217 = gf(i, _t236, "forward");

                if (!_n217) return null;

                var _o91 = i.createRange(_t236, _n217),
                    _r56 = mf(i.schema, _o91, "backward");

                return _r56 ? i.createRange(_t236, _r56) : null;
              }

              {
                var _t237 = e.isCollapsed ? e.focus : e.getFirstPosition(),
                    _n218 = gf(i, _t237, "backward");

                if (!_n218) return null;

                var _o92 = i.createRange(_n218, _t237),
                    _r57 = mf(i.schema, _o92, "forward");

                return _r57 ? i.createRange(_r57, _t237) : null;
              }
            }(t, a, c);

            if (l) {
              if (l.isCollapsed) {
                if (a.isCollapsed) return;
                if (s) return;
              }

              (l.isCollapsed || function (t, e, n) {
                var i = t.model,
                    o = t.view.domConverter;

                if (n) {
                  var _t238 = i.createSelection(e.start);

                  i.modifySelection(_t238), _t238.focus.isAtEnd || e.start.isEqual(_t238.focus) || (e = i.createRange(_t238.focus, e.end));
                }

                var r = t.mapper.toViewRange(e),
                    s = o.viewRangeToDom(r),
                    a = ws.getDomRangeRects(s);
                var c;

                var _iterator314 = _createForOfIteratorHelper(a),
                    _step314;

                try {
                  for (_iterator314.s(); !(_step314 = _iterator314.n()).done;) {
                    var _t239 = _step314.value;

                    if (void 0 !== c) {
                      if (Math.round(_t239.top) >= c) return !1;
                      c = Math.max(c, Math.round(_t239.bottom));
                    } else c = Math.round(_t239.bottom);
                  }
                } catch (err) {
                  _iterator314.e(err);
                } finally {
                  _iterator314.f();
                }

                return !0;
              }(t, l, c)) && (e.change(function (t) {
                var n = c ? l.end : l.start;

                if (s) {
                  var _i177 = e.createSelection(a.anchor);

                  _i177.setFocus(n), t.setSelection(_i177);
                } else t.setSelection(n);
              }), n.stop(), i.preventDefault(), i.stopPropagation());
            }
          };
        }

        function gf(t, e, n) {
          var i = t.schema,
              o = t.createRangeIn(e.root),
              r = "forward" == n ? "elementStart" : "elementEnd";

          var _iterator315 = _createForOfIteratorHelper(o.getWalker({
            startPosition: e,
            direction: n
          })),
              _step315;

          try {
            for (_iterator315.s(); !(_step315 = _iterator315.n()).done;) {
              var _step315$value = _step315.value,
                  _t240 = _step315$value.previousPosition,
                  _s27 = _step315$value.item,
                  _a19 = _step315$value.type;
              if (i.isLimit(_s27) && !i.isInline(_s27)) return _t240;
              if (_a19 == r && i.isBlock(_s27)) return null;
            }
          } catch (err) {
            _iterator315.e(err);
          } finally {
            _iterator315.f();
          }

          return null;
        }

        function mf(t, e, n) {
          var i = "backward" == n ? e.end : e.start;
          if (t.checkChild(i, "$text")) return i;

          var _iterator316 = _createForOfIteratorHelper(e.getWalker({
            direction: n
          })),
              _step316;

          try {
            for (_iterator316.s(); !(_step316 = _iterator316.n()).done;) {
              var _i178 = _step316.value.nextPosition;
              if (t.checkChild(_i178, "$text")) return _i178;
            }
          } catch (err) {
            _iterator316.e(err);
          } finally {
            _iterator316.f();
          }

          return null;
        }

        n(230);

        var pf = /*#__PURE__*/function (_r58) {
          _inherits(pf, _r58);

          var _super148 = _createSuper(pf);

          function pf() {
            _classCallCheck(this, pf);

            return _super148.apply(this, arguments);
          }

          _createClass(pf, [{
            key: "init",
            value: function init() {
              var _this225 = this;

              var t = this.editor,
                  e = t.editing.view,
                  n = e.document;
              this._previouslySelected = new Set(), this.editor.editing.downcastDispatcher.on("selection", function (e, n, i) {
                var o = i.writer,
                    r = n.selection;
                if (r.isCollapsed) return;
                var s = r.getSelectedElement();
                if (!s) return;
                var a = t.editing.mapper.toViewElement(s);
                Gh(a) && i.consumable.consume(r, "selection") && o.setSelection(o.createRangeOn(a), {
                  fake: !0,
                  label: function (t) {
                    var e = t.getCustomProperty("widgetLabel");
                    return e ? "function" == typeof e ? e() : e : "";
                  }(a)
                });
              }), this.editor.editing.downcastDispatcher.on("selection", function (t, e, n) {
                _this225._clearPreviouslySelectedWidgets(n.writer);

                var i = n.writer,
                    o = i.document.selection;
                var r = null;

                var _iterator317 = _createForOfIteratorHelper(o.getRanges()),
                    _step317;

                try {
                  for (_iterator317.s(); !(_step317 = _iterator317.n()).done;) {
                    var _t241 = _step317.value;

                    var _iterator318 = _createForOfIteratorHelper(_t241),
                        _step318;

                    try {
                      for (_iterator318.s(); !(_step318 = _iterator318.n()).done;) {
                        var _e224 = _step318.value;
                        var _t242 = _e224.item;
                        Gh(_t242) && !bf(_t242, r) && (i.addClass(Jh, _t242), _this225._previouslySelected.add(_t242), r = _t242);
                      }
                    } catch (err) {
                      _iterator318.e(err);
                    } finally {
                      _iterator318.f();
                    }
                  }
                } catch (err) {
                  _iterator317.e(err);
                } finally {
                  _iterator317.f();
                }
              }, {
                priority: "low"
              }), e.addObserver(wh), this.listenTo(n, "mousedown", function () {
                return _this225._onMousedown.apply(_this225, arguments);
              }), this.listenTo(n, "arrowKey", function () {
                _this225._handleSelectionChangeOnArrowKeyPress.apply(_this225, arguments);
              }, {
                context: [Gh, "$text"]
              }), this.listenTo(n, "arrowKey", function () {
                _this225._preventDefaultOnArrowKeyPress.apply(_this225, arguments);
              }, {
                context: "$root"
              }), this.listenTo(n, "arrowKey", ff(this.editor.editing), {
                context: "$text"
              }), this.listenTo(n, "delete", function (t, e) {
                _this225._handleDelete("forward" == e.direction) && (e.preventDefault(), t.stop());
              }, {
                context: "$root"
              });
            }
          }, {
            key: "_onMousedown",
            value: function _onMousedown(t, e) {
              var n = this.editor,
                  i = n.editing.view,
                  o = i.document;
              var r = e.target;

              if (function (t) {
                for (; t;) {
                  if (t.is("editableElement") && !t.is("rootElement")) return !0;
                  if (Gh(t)) return !1;
                  t = t.parent;
                }

                return !1;
              }(r)) {
                if ((Qi.isSafari || Qi.isGecko) && e.domEvent.detail >= 3) {
                  var _t243 = n.editing.mapper,
                      _i179 = r.is("attributeElement") ? r.findAncestor(function (t) {
                    return !t.is("attributeElement");
                  }) : r,
                      _o93 = _t243.toModelElement(_i179);

                  e.preventDefault(), this.editor.model.change(function (t) {
                    t.setSelection(_o93, "in");
                  });
                }

                return;
              }

              if (!Gh(r) && !(r = r.findAncestor(Gh))) return;
              Qi.isAndroid && e.preventDefault(), o.isFocused || i.focus();
              var s = n.editing.mapper.toModelElement(r);

              this._setSelectionOverElement(s);
            }
          }, {
            key: "_handleSelectionChangeOnArrowKeyPress",
            value: function _handleSelectionChangeOnArrowKeyPress(t, e) {
              var n = e.keyCode,
                  i = this.editor.model,
                  o = i.schema,
                  r = i.document.selection,
                  s = r.getSelectedElement(),
                  a = ro(n, this.editor.locale.contentLanguageDirection),
                  c = "down" == a || "right" == a,
                  l = "up" == a || "down" == a;

              if (s && o.isObject(s)) {
                var _n219 = c ? r.getLastPosition() : r.getFirstPosition(),
                    _s28 = o.getNearestSelectionRange(_n219, c ? "forward" : "backward");

                return void (_s28 && (i.change(function (t) {
                  t.setSelection(_s28);
                }), e.preventDefault(), t.stop()));
              }

              if (!r.isCollapsed && !e.shiftKey) {
                var _n220 = r.getFirstPosition(),
                    _s29 = r.getLastPosition(),
                    _a20 = _n220.nodeAfter,
                    _l4 = _s29.nodeBefore;

                return void ((_a20 && o.isObject(_a20) || _l4 && o.isObject(_l4)) && (i.change(function (t) {
                  t.setSelection(c ? _s29 : _n220);
                }), e.preventDefault(), t.stop()));
              }

              if (!r.isCollapsed) return;

              var d = this._getObjectElementNextToSelection(c);

              if (d && o.isObject(d)) {
                if (o.isInline(d) && l) return;
                this._setSelectionOverElement(d), e.preventDefault(), t.stop();
              }
            }
          }, {
            key: "_preventDefaultOnArrowKeyPress",
            value: function _preventDefaultOnArrowKeyPress(t, e) {
              var n = this.editor.model,
                  i = n.schema,
                  o = n.document.selection.getSelectedElement();
              o && i.isObject(o) && (e.preventDefault(), t.stop());
            }
          }, {
            key: "_handleDelete",
            value: function _handleDelete(t) {
              var _this226 = this;

              if (this.editor.isReadOnly) return;
              var e = this.editor.model.document.selection;
              if (!e.isCollapsed) return;

              var n = this._getObjectElementNextToSelection(t);

              return n ? (this.editor.model.change(function (t) {
                var i = e.anchor.parent;

                for (; i.isEmpty;) {
                  var _e225 = i;
                  i = _e225.parent, t.remove(_e225);
                }

                _this226._setSelectionOverElement(n);
              }), !0) : void 0;
            }
          }, {
            key: "_setSelectionOverElement",
            value: function _setSelectionOverElement(t) {
              this.editor.model.change(function (e) {
                e.setSelection(e.createRangeOn(t));
              });
            }
          }, {
            key: "_getObjectElementNextToSelection",
            value: function _getObjectElementNextToSelection(t) {
              var e = this.editor.model,
                  n = e.schema,
                  i = e.document.selection,
                  o = e.createSelection(i);
              if (e.modifySelection(o, {
                direction: t ? "forward" : "backward"
              }), o.isEqual(i)) return null;
              var r = t ? o.focus.nodeBefore : o.focus.nodeAfter;
              return r && n.isObject(r) ? r : null;
            }
          }, {
            key: "_clearPreviouslySelectedWidgets",
            value: function _clearPreviouslySelectedWidgets(t) {
              var _iterator319 = _createForOfIteratorHelper(this._previouslySelected),
                  _step319;

              try {
                for (_iterator319.s(); !(_step319 = _iterator319.n()).done;) {
                  var _e226 = _step319.value;
                  t.removeClass(Jh, _e226);
                }
              } catch (err) {
                _iterator319.e(err);
              } finally {
                _iterator319.f();
              }

              this._previouslySelected.clear();
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Widget";
            }
          }, {
            key: "requires",
            get: function get() {
              return [hf, Fh];
            }
          }]);

          return pf;
        }(r);

        function bf(t, e) {
          return !!e && Array.from(t.getAncestors()).includes(e);
        }

        var kf = "Expected a function";

        var _f = function _f(t, e, n) {
          var i = !0,
              o = !0;
          if ("function" != typeof t) throw new TypeError(kf);
          return Object(Ae.a)(n) && (i = "leading" in n ? !!n.leading : i, o = "trailing" in n ? !!n.trailing : o), cs(t, e, {
            leading: i,
            maxWait: e,
            trailing: o
          });
        };

        n(232);

        var wf = /*#__PURE__*/function (_r59) {
          _inherits(wf, _r59);

          var _super149 = _createSuper(wf);

          function wf() {
            _classCallCheck(this, wf);

            return _super149.apply(this, arguments);
          }

          _createClass(wf, [{
            key: "init",
            value: function init() {
              var _this227 = this;

              var t = this.editor,
                  e = t.editing.view;
              this._draggedRange = null, this._draggingUid = "", this._draggableElement = null, this._updateDropMarkerThrottled = _f(function (t) {
                return _this227._updateDropMarker(t);
              }, 40), this._removeDropMarkerDelayed = xf(function () {
                return _this227._removeDropMarker();
              }, 40), this._clearDraggableAttributesDelayed = xf(function () {
                return _this227._clearDraggableAttributes();
              }, 40), e.addObserver(Ih), e.addObserver(wh), this._setupDragging(), this._setupContentInsertionIntegration(), this._setupClipboardInputIntegration(), this._setupDropMarker(), this._setupDraggableAttributeHandling(), this.listenTo(t, "change:isReadOnly", function (t, e, n) {
                n ? _this227.forceDisabled("readOnlyMode") : _this227.clearForceDisabled("readOnlyMode");
              }), this.on("change:isEnabled", function (t, e, n) {
                n || _this227._finalizeDragging(!1);
              }), Qi.isAndroid && this.forceDisabled("noAndroidSupport");
            }
          }, {
            key: "destroy",
            value: function destroy() {
              return this._draggedRange && (this._draggedRange.detach(), this._draggedRange = null), this._updateDropMarkerThrottled.cancel(), this._removeDropMarkerDelayed.cancel(), this._clearDraggableAttributesDelayed.cancel(), _get3(_getPrototypeOf(wf.prototype), "destroy", this).call(this);
            }
          }, {
            key: "_setupDragging",
            value: function _setupDragging() {
              var _this228 = this;

              var t = this.editor,
                  e = t.model,
                  n = e.document,
                  i = t.editing.view,
                  o = i.document;
              this.listenTo(o, "dragstart", function (i, r) {
                var s = n.selection;
                if (r.target && r.target.is("editableElement")) return void r.preventDefault();
                var a = r.target ? Cf(r.target) : null;

                if (a) {
                  var _n221 = t.editing.mapper.toModelElement(a);

                  _this228._draggedRange = fa.fromRange(e.createRangeOn(_n221)), t.plugins.has("WidgetToolbarRepository") && t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");
                } else if (!o.selection.isCollapsed) {
                  var _t244 = o.selection.getSelectedElement();

                  _t244 && Gh(_t244) || (_this228._draggedRange = fa.fromRange(s.getFirstRange()));
                }

                if (!_this228._draggedRange) return void r.preventDefault();
                _this228._draggingUid = Object(Xo.a)(), r.dataTransfer.effectAllowed = _this228.isEnabled ? "copyMove" : "copy", r.dataTransfer.setData("application/ckeditor5-dragging-uid", _this228._draggingUid);
                var c = e.createSelection(_this228._draggedRange.toRange()),
                    l = t.data.toView(e.getSelectedContent(c));
                o.fire("clipboardOutput", {
                  dataTransfer: r.dataTransfer,
                  content: l,
                  method: i.name
                }), _this228.isEnabled || (_this228._draggedRange.detach(), _this228._draggedRange = null, _this228._draggingUid = "");
              }, {
                priority: "low"
              }), this.listenTo(o, "dragend", function (t, e) {
                _this228._finalizeDragging(!e.dataTransfer.isCanceled && "move" == e.dataTransfer.dropEffect);
              }, {
                priority: "low"
              }), this.listenTo(o, "dragenter", function () {
                _this228.isEnabled && i.focus();
              }), this.listenTo(o, "dragleave", function () {
                _this228._removeDropMarkerDelayed();
              }), this.listenTo(o, "dragging", function (e, n) {
                if (!_this228.isEnabled) return void (n.dataTransfer.dropEffect = "none");

                _this228._removeDropMarkerDelayed.cancel();

                var i = vf(t, n.targetRanges, n.target);
                _this228._draggedRange || (n.dataTransfer.dropEffect = "copy"), Qi.isGecko || ("copy" == n.dataTransfer.effectAllowed ? n.dataTransfer.dropEffect = "copy" : ["all", "copyMove"].includes(n.dataTransfer.effectAllowed) && (n.dataTransfer.dropEffect = "move")), i && _this228._updateDropMarkerThrottled(i);
              }, {
                priority: "low"
              });
            }
          }, {
            key: "_setupClipboardInputIntegration",
            value: function _setupClipboardInputIntegration() {
              var _this229 = this;

              var t = this.editor,
                  e = t.editing.view.document;
              this.listenTo(e, "clipboardInput", function (e, n) {
                if ("drop" != n.method) return;
                var i = vf(t, n.targetRanges, n.target);
                return _this229._removeDropMarker(), i ? (_this229._draggedRange && _this229._draggingUid != n.dataTransfer.getData("application/ckeditor5-dragging-uid") && (_this229._draggedRange.detach(), _this229._draggedRange = null, _this229._draggingUid = ""), "move" == yf(n.dataTransfer) && _this229._draggedRange && _this229._draggedRange.containsRange(i, !0) ? (_this229._finalizeDragging(!1), void e.stop()) : void (n.targetRanges = [t.editing.mapper.toViewRange(i)])) : (_this229._finalizeDragging(!1), void e.stop());
              }, {
                priority: "high"
              });
            }
          }, {
            key: "_setupContentInsertionIntegration",
            value: function _setupContentInsertionIntegration() {
              var _this230 = this;

              var t = this.editor.plugins.get(Rh);
              t.on("contentInsertion", function (t, e) {
                if (!_this230.isEnabled || "drop" !== e.method) return;
                var n = e.targetRanges.map(function (t) {
                  return _this230.editor.editing.mapper.toModelRange(t);
                });

                _this230.editor.model.change(function (t) {
                  return t.setSelection(n);
                });
              }, {
                priority: "high"
              }), t.on("contentInsertion", function (t, e) {
                if (!_this230.isEnabled || "drop" !== e.method) return;
                var n = "move" == yf(e.dataTransfer),
                    i = !e.resultRange || !e.resultRange.isCollapsed;

                _this230._finalizeDragging(i && n);
              }, {
                priority: "lowest"
              });
            }
          }, {
            key: "_setupDraggableAttributeHandling",
            value: function _setupDraggableAttributeHandling() {
              var _this231 = this;

              var t = this.editor,
                  e = t.editing.view,
                  n = e.document;
              this.listenTo(n, "mousedown", function (i, o) {
                if (Qi.isAndroid || !o) return;

                _this231._clearDraggableAttributesDelayed.cancel();

                var r = Cf(o.target);

                if (Qi.isBlink && !t.isReadOnly && !r && !n.selection.isCollapsed) {
                  var _t245 = n.selection.getSelectedElement();

                  _t245 && Gh(_t245) || (r = n.selection.editableElement);
                }

                r && (e.change(function (t) {
                  t.setAttribute("draggable", "true", r);
                }), _this231._draggableElement = t.editing.mapper.toModelElement(r));
              }), this.listenTo(n, "mouseup", function () {
                Qi.isAndroid || _this231._clearDraggableAttributesDelayed();
              });
            }
          }, {
            key: "_clearDraggableAttributes",
            value: function _clearDraggableAttributes() {
              var _this232 = this;

              var t = this.editor.editing;
              t.view.change(function (e) {
                _this232._draggableElement && "$graveyard" != _this232._draggableElement.root.rootName && e.removeAttribute("draggable", t.mapper.toViewElement(_this232._draggableElement)), _this232._draggableElement = null;
              });
            }
          }, {
            key: "_setupDropMarker",
            value: function _setupDropMarker() {
              var t = this.editor;
              t.conversion["for"]("editingDowncast").markerToHighlight({
                model: "drop-target",
                view: {
                  classes: ["ck-clipboard-drop-target-range"]
                }
              }), t.conversion["for"]("editingDowncast").markerToElement({
                model: "drop-target",
                view: function view(e, _ref46) {
                  var n = _ref46.writer;
                  if (t.model.schema.checkChild(e.markerRange.start, "$text")) return n.createUIElement("span", {
                    "class": "ck ck-clipboard-drop-target-position"
                  }, function (t) {
                    var e = this.toDomElement(t);
                    return e.innerHTML = "&NoBreak;<span></span>&NoBreak;", e;
                  });
                }
              });
            }
          }, {
            key: "_updateDropMarker",
            value: function _updateDropMarker(t) {
              var e = this.editor,
                  n = e.model.markers;
              e.model.change(function (e) {
                n.has("drop-target") ? n.get("drop-target").getRange().isEqual(t) || e.updateMarker("drop-target", {
                  range: t
                }) : e.addMarker("drop-target", {
                  range: t,
                  usingOperation: !1,
                  affectsData: !1
                });
              });
            }
          }, {
            key: "_removeDropMarker",
            value: function _removeDropMarker() {
              var t = this.editor.model;
              this._removeDropMarkerDelayed.cancel(), this._updateDropMarkerThrottled.cancel(), t.markers.has("drop-target") && t.change(function (t) {
                t.removeMarker("drop-target");
              });
            }
          }, {
            key: "_finalizeDragging",
            value: function _finalizeDragging(t) {
              var e = this.editor,
                  n = e.model;
              this._removeDropMarker(), this._clearDraggableAttributes(), e.plugins.has("WidgetToolbarRepository") && e.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"), this._draggingUid = "", this._draggedRange && (t && this.isEnabled && n.deleteContent(n.createSelection(this._draggedRange), {
                doNotAutoparagraph: !0
              }), this._draggedRange.detach(), this._draggedRange = null);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "DragDrop";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Rh, pf];
            }
          }]);

          return wf;
        }(r);

        function vf(t, e, n) {
          var i = t.model,
              o = t.editing.mapper;
          var r = null;
          var s = e ? e[0].start : null;
          if (n.is("uiElement") && (n = n.parent), r = function (t, e) {
            var n = t.model,
                i = t.editing.mapper;
            if (Gh(e)) return n.createRangeOn(i.toModelElement(e));

            if (!e.is("editableElement")) {
              var _t246 = e.findAncestor(function (t) {
                return Gh(t) || t.is("editableElement");
              });

              if (Gh(_t246)) return n.createRangeOn(i.toModelElement(_t246));
            }

            return null;
          }(t, n)) return r;

          var a = function (t, e) {
            var n = t.editing.mapper,
                i = t.editing.view,
                o = n.toModelElement(e);
            if (o) return o;
            var r = i.createPositionBefore(e),
                s = n.findMappedViewAncestor(r);
            return n.toModelElement(s);
          }(t, n),
              c = s ? o.toModelPosition(s) : null;

          return c ? (r = function (t, e, n) {
            var i = t.model;
            if (!i.schema.checkChild(n, "$block")) return null;
            var o = i.createPositionAt(n, 0),
                r = e.path.slice(0, o.path.length),
                s = i.createPositionFromPath(e.root, r).nodeAfter;
            if (s && i.schema.isObject(s)) return i.createRangeOn(s);
            return null;
          }(t, c, a)) ? r : (r = i.schema.getNearestSelectionRange(c, Qi.isGecko ? "forward" : "backward")) || function (t, e) {
            var n = t.model;

            for (; e;) {
              if (n.schema.isObject(e)) return n.createRangeOn(e);
              e = e.parent;
            }
          }(t, c.parent) : function (t, e) {
            var n = t.model,
                i = n.schema,
                o = n.createPositionAt(e, 0);
            return i.getNearestSelectionRange(o, "forward");
          }(t, a);
        }

        function yf(t) {
          return Qi.isGecko ? t.dropEffect : ["all", "copyMove"].includes(t.effectAllowed) ? "move" : "copy";
        }

        function xf(t, e) {
          var n;

          function i() {
            for (var _len21 = arguments.length, o = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {
              o[_key21] = arguments[_key21];
            }

            i.cancel(), n = setTimeout(function () {
              return t.apply(void 0, o);
            }, e);
          }

          return i.cancel = function () {
            clearTimeout(n);
          }, i;
        }

        function Cf(t) {
          if (t.is("editableElement")) return null;
          if (t.hasClass("ck-widget__selection-handle")) return t.findAncestor(Gh);
          if (Gh(t)) return t;
          var e = t.findAncestor(function (t) {
            return Gh(t) || t.is("editableElement");
          });
          return Gh(e) ? e : null;
        }

        var Tf = /*#__PURE__*/function (_r60) {
          _inherits(Tf, _r60);

          var _super150 = _createSuper(Tf);

          function Tf() {
            _classCallCheck(this, Tf);

            return _super150.apply(this, arguments);
          }

          _createClass(Tf, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model,
                  n = t.editing.view,
                  i = n.document,
                  o = e.document.selection;
              var r = !1;
              n.addObserver(Ih), this.listenTo(i, "keydown", function (t, e) {
                r = e.shiftKey;
              }), t.plugins.get(Rh).on("contentInsertion", function (t, n) {
                (r || function (t, e) {
                  if (t.childCount > 1) return !1;
                  var n = t.getChild(0);
                  if (e.isObject(n)) return !1;
                  return 0 == _toConsumableArray(n.getAttributeKeys()).length;
                }(n.content, e.schema)) && e.change(function (t) {
                  var i = Array.from(o.getAttributes()).filter(function (_ref47) {
                    var _ref48 = _slicedToArray(_ref47, 1),
                        t = _ref48[0];

                    return e.schema.getAttributeProperties(t).isFormatting;
                  });
                  o.isCollapsed || e.deleteContent(o, {
                    doNotAutoparagraph: !0
                  }), i.push.apply(i, _toConsumableArray(o.getAttributes()));
                  var r = t.createRangeIn(n.content);

                  var _iterator320 = _createForOfIteratorHelper(r.getItems()),
                      _step320;

                  try {
                    for (_iterator320.s(); !(_step320 = _iterator320.n()).done;) {
                      var _e227 = _step320.value;
                      _e227.is("$textProxy") && t.setAttributes(i, _e227);
                    }
                  } catch (err) {
                    _iterator320.e(err);
                  } finally {
                    _iterator320.f();
                  }
                });
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "PastePlainText";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Rh];
            }
          }]);

          return Tf;
        }(r);

        var Af = /*#__PURE__*/function (_r61) {
          _inherits(Af, _r61);

          var _super151 = _createSuper(Af);

          function Af() {
            _classCallCheck(this, Af);

            return _super151.apply(this, arguments);
          }

          _createClass(Af, null, [{
            key: "pluginName",
            get: function get() {
              return "Clipboard";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Rh, wf, Tf];
            }
          }]);

          return Af;
        }(r);

        var Ef = /*#__PURE__*/function (_a21) {
          _inherits(Ef, _a21);

          var _super152 = _createSuper(Ef);

          function Ef() {
            _classCallCheck(this, Ef);

            return _super152.apply(this, arguments);
          }

          _createClass(Ef, [{
            key: "execute",
            value: function execute() {
              var _this233 = this;

              var t = this.editor.model,
                  e = t.document;
              t.change(function (n) {
                !function (t, e, n) {
                  var i = n.isCollapsed,
                      o = n.getFirstRange(),
                      r = o.start.parent,
                      s = o.end.parent,
                      a = r == s;

                  if (i) {
                    var _i180 = Mh(t.schema, n.getAttributes());

                    Sf(t, e, o.end), e.removeSelectionAttribute(n.getAttributeKeys()), e.setSelectionAttribute(_i180);
                  } else {
                    var _i181 = !(o.start.isAtStart && o.end.isAtEnd);

                    t.deleteContent(n, {
                      leaveUnmerged: _i181
                    }), a ? Sf(t, e, n.focus) : _i181 && e.setSelection(s, 0);
                  }
                }(t, n, e.selection), _this233.fire("afterExecute", {
                  writer: n
                });
              });
            }
          }, {
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document;

              this.isEnabled = function (t, e) {
                if (e.rangeCount > 1) return !1;
                var n = e.anchor;
                if (!n || !t.checkChild(n, "softBreak")) return !1;
                var i = e.getFirstRange(),
                    o = i.start.parent,
                    r = i.end.parent;
                if ((If(o, t) || If(r, t)) && o !== r) return !1;
                return !0;
              }(t.schema, e.selection);
            }
          }]);

          return Ef;
        }(a);

        function Sf(t, e, n) {
          var i = e.createElement("softBreak");
          t.insertContent(i, n), e.setSelection(i, "after");
        }

        function If(t, e) {
          return !t.is("rootElement") && (e.isLimit(t) || If(t.parent, e));
        }

        var Of = /*#__PURE__*/function (_r62) {
          _inherits(Of, _r62);

          var _super153 = _createSuper(Of);

          function Of() {
            _classCallCheck(this, Of);

            return _super153.apply(this, arguments);
          }

          _createClass(Of, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model.schema,
                  n = t.conversion,
                  i = t.editing.view,
                  o = i.document;
              e.register("softBreak", {
                allowWhere: "$text",
                isInline: !0
              }), n["for"]("upcast").elementToElement({
                model: "softBreak",
                view: "br"
              }), n["for"]("downcast").elementToElement({
                model: "softBreak",
                view: function view(t, _ref49) {
                  var e = _ref49.writer;
                  return e.createEmptyElement("br");
                }
              }), i.addObserver(Dh), t.commands.add("shiftEnter", new Ef(t)), this.listenTo(o, "enter", function (e, n) {
                n.preventDefault(), n.isSoft && (t.execute("shiftEnter"), i.scrollToTheSelection());
              }, {
                priority: "low"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ShiftEnter";
            }
          }]);

          return Of;
        }(r);

        var Rf = /*#__PURE__*/function (_a22) {
          _inherits(Rf, _a22);

          var _super154 = _createSuper(Rf);

          function Rf() {
            _classCallCheck(this, Rf);

            return _super154.apply(this, arguments);
          }

          _createClass(Rf, [{
            key: "execute",
            value: function execute() {
              var t = this.editor.model,
                  e = t.document.selection;
              var n = t.schema.getLimitElement(e);
              if (e.containsEntireContent(n) || !Mf(t.schema, n)) do {
                if (!(n = n.parent)) return;
              } while (!Mf(t.schema, n));
              t.change(function (t) {
                t.setSelection(n, "in");
              });
            }
          }]);

          return Rf;
        }(a);

        function Mf(t, e) {
          return t.isLimit(e) && (t.checkChild(e, "$text") || t.checkChild(e, "paragraph"));
        }

        var Pf = io("Ctrl+A");

        var Nf = /*#__PURE__*/function (_r63) {
          _inherits(Nf, _r63);

          var _super155 = _createSuper(Nf);

          function Nf() {
            _classCallCheck(this, Nf);

            return _super155.apply(this, arguments);
          }

          _createClass(Nf, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.editing.view.document;
              t.commands.add("selectAll", new Rf(t)), this.listenTo(e, "keydown", function (e, n) {
                no(n) === Pf && (t.execute("selectAll"), n.preventDefault());
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "SelectAllEditing";
            }
          }]);

          return Nf;
        }(r);

        var Df = n(150),
            jf = n.n(Df);

        var Bf = /*#__PURE__*/function (_r64) {
          _inherits(Bf, _r64);

          var _super156 = _createSuper(Bf);

          function Bf() {
            _classCallCheck(this, Bf);

            return _super156.apply(this, arguments);
          }

          _createClass(Bf, [{
            key: "init",
            value: function init() {
              var _this234 = this;

              var t = this.editor;
              t.ui.componentFactory.add("selectAll", function (e) {
                var n = t.commands.get("selectAll"),
                    i = new nu(e),
                    o = e.t;
                return i.set({
                  label: o("Select all"),
                  icon: jf.a,
                  keystroke: "Ctrl+A",
                  tooltip: !0
                }), i.bind("isOn", "isEnabled").to(n, "value", "isEnabled"), _this234.listenTo(i, "execute", function () {
                  t.execute("selectAll"), t.editing.view.focus();
                }), i;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "SelectAllUI";
            }
          }]);

          return Bf;
        }(r);

        var Lf = /*#__PURE__*/function (_r65) {
          _inherits(Lf, _r65);

          var _super157 = _createSuper(Lf);

          function Lf() {
            _classCallCheck(this, Lf);

            return _super157.apply(this, arguments);
          }

          _createClass(Lf, null, [{
            key: "requires",
            get: function get() {
              return [Nf, Bf];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "SelectAll";
            }
          }]);

          return Lf;
        }(r);

        var zf = /*#__PURE__*/function (_a23) {
          _inherits(zf, _a23);

          var _super158 = _createSuper(zf);

          function zf(t, e) {
            var _this235;

            _classCallCheck(this, zf);

            _this235 = _super158.call(this, t), _this235._buffer = new Bh(t.model, e), _this235._batches = new WeakSet();
            return _this235;
          }

          _createClass(zf, [{
            key: "buffer",
            get: function get() {
              return this._buffer;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(zf.prototype), "destroy", this).call(this), this._buffer.destroy();
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this236 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document,
                  i = t.text || "",
                  o = i.length,
                  r = t.range ? e.createSelection(t.range) : n.selection,
                  s = t.resultRange;
              e.enqueueChange(this._buffer.batch, function (t) {
                _this236._buffer.lock(), _this236._batches.add(_this236._buffer.batch), e.deleteContent(r), i && e.insertContent(t.createText(i, n.selection.getAttributes()), r), s ? t.setSelection(s) : r.is("documentSelection") || t.setSelection(r), _this236._buffer.unlock(), _this236._buffer.input(o);
              });
            }
          }]);

          return zf;
        }(a);

        function Ff(t) {
          if (t.newChildren.length - t.oldChildren.length != 1) return;

          var e = function (t, e) {
            var n = [];
            var i,
                o = 0;
            return t.forEach(function (t) {
              "equal" == t ? (r(), o++) : "insert" == t ? (s("insert") ? i.values.push(e[o]) : (r(), i = {
                type: "insert",
                index: o,
                values: [e[o]]
              }), o++) : s("delete") ? i.howMany++ : (r(), i = {
                type: "delete",
                index: o,
                howMany: 1
              });
            }), r(), n;

            function r() {
              i && (n.push(i), i = null);
            }

            function s(t) {
              return i && i.type == t;
            }
          }(jo(t.oldChildren, t.newChildren, Vf), t.newChildren);

          if (e.length > 1) return;
          var n = e[0];
          return n.values[0] && n.values[0].is("$text") ? n : void 0;
        }

        function Vf(t, e) {
          return t && t.is("$text") && e && e.is("$text") ? t.data === e.data : t === e;
        }

        var Uf = /*#__PURE__*/function () {
          function Uf(t) {
            _classCallCheck(this, Uf);

            this.editor = t, this.editing = this.editor.editing;
          }

          _createClass(Uf, [{
            key: "handle",
            value: function handle(t, e) {
              if (function (t) {
                if (0 == t.length) return !1;

                var _iterator321 = _createForOfIteratorHelper(t),
                    _step321;

                try {
                  for (_iterator321.s(); !(_step321 = _iterator321.n()).done;) {
                    var _e228 = _step321.value;
                    if ("children" === _e228.type && !Ff(_e228)) return !0;
                  }
                } catch (err) {
                  _iterator321.e(err);
                } finally {
                  _iterator321.f();
                }

                return !1;
              }(t)) this._handleContainerChildrenMutations(t, e);else {
                var _iterator322 = _createForOfIteratorHelper(t),
                    _step322;

                try {
                  for (_iterator322.s(); !(_step322 = _iterator322.n()).done;) {
                    var _n222 = _step322.value;
                    this._handleTextMutation(_n222, e), this._handleTextNodeInsertion(_n222);
                  }
                } catch (err) {
                  _iterator322.e(err);
                } finally {
                  _iterator322.f();
                }
              }
            }
          }, {
            key: "_handleContainerChildrenMutations",
            value: function _handleContainerChildrenMutations(t, e) {
              var n = function (t) {
                var e = t.map(function (t) {
                  return t.node;
                }).reduce(function (t, e) {
                  return t.getCommonAncestor(e, {
                    includeSelf: !0
                  });
                });
                if (!e) return;
                return e.getAncestors({
                  includeSelf: !0,
                  parentFirst: !0
                }).find(function (t) {
                  return t.is("containerElement") || t.is("rootElement");
                });
              }(t);

              if (!n) return;
              var i = this.editor.editing.view.domConverter.mapViewToDom(n),
                  o = new Go(this.editor.editing.view.document),
                  r = this.editor.data.toModel(o.domToView(i)).getChild(0),
                  s = this.editor.editing.mapper.toModelElement(n);
              if (!s) return;
              var a = Array.from(r.getChildren()),
                  c = Array.from(s.getChildren()),
                  l = a[a.length - 1],
                  d = c[c.length - 1],
                  u = l && l.is("element", "softBreak"),
                  h = d && !d.is("element", "softBreak");
              u && h && a.pop();
              var f = this.editor.model.schema;
              if (!Hf(a, f) || !Hf(c, f)) return;
              var g = a.map(function (t) {
                return t.is("$text") ? t.data : "@";
              }).join("").replace(/\u00A0/g, " "),
                  m = c.map(function (t) {
                return t.is("$text") ? t.data : "@";
              }).join("").replace(/\u00A0/g, " ");
              if (m === g) return;

              var p = jo(m, g),
                  _qf = qf(p),
                  b = _qf.firstChangeAt,
                  k = _qf.insertions,
                  _ = _qf.deletions;

              var w = null;
              e && (w = this.editing.mapper.toModelRange(e.getFirstRange()));
              var v = g.substr(b, k),
                  y = this.editor.model.createRange(this.editor.model.createPositionAt(s, b), this.editor.model.createPositionAt(s, b + _));
              this.editor.execute("input", {
                text: v,
                range: y,
                resultRange: w
              });
            }
          }, {
            key: "_handleTextMutation",
            value: function _handleTextMutation(t, e) {
              if ("text" != t.type) return;
              var n = t.newText.replace(/\u00A0/g, " "),
                  i = t.oldText.replace(/\u00A0/g, " ");
              if (i === n) return;

              var o = jo(i, n),
                  _qf2 = qf(o),
                  r = _qf2.firstChangeAt,
                  s = _qf2.insertions,
                  a = _qf2.deletions;

              var c = null;
              e && (c = this.editing.mapper.toModelRange(e.getFirstRange()));
              var l = this.editing.view.createPositionAt(t.node, r),
                  d = this.editing.mapper.toModelPosition(l),
                  u = this.editor.model.createRange(d, d.getShiftedBy(a)),
                  h = n.substr(r, s);
              this.editor.execute("input", {
                text: h,
                range: u,
                resultRange: c
              });
            }
          }, {
            key: "_handleTextNodeInsertion",
            value: function _handleTextNodeInsertion(t) {
              if ("children" != t.type) return;
              var e = Ff(t),
                  n = this.editing.view.createPositionAt(t.node, e.index),
                  i = this.editing.mapper.toModelPosition(n),
                  o = e.values[0].data;
              this.editor.execute("input", {
                text: o.replace(/\u00A0/g, " "),
                range: this.editor.model.createRange(i)
              });
            }
          }]);

          return Uf;
        }();

        function Hf(t, e) {
          return t.every(function (t) {
            return e.isInline(t);
          });
        }

        function qf(t) {
          var e = null,
              n = null;

          for (var _i182 = 0; _i182 < t.length; _i182++) {
            "equal" != t[_i182] && (e = null === e ? _i182 : e, n = _i182);
          }

          var i = 0,
              o = 0;

          for (var _r66 = e; _r66 <= n; _r66++) {
            "insert" != t[_r66] && i++, "delete" != t[_r66] && o++;
          }

          return {
            insertions: o,
            deletions: i,
            firstChangeAt: e
          };
        }

        var Wf = /*#__PURE__*/function (_r67) {
          _inherits(Wf, _r67);

          var _super159 = _createSuper(Wf);

          function Wf() {
            _classCallCheck(this, Wf);

            return _super159.apply(this, arguments);
          }

          _createClass(Wf, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = new zf(t, t.config.get("typing.undoStep") || 20);
              t.commands.add("input", e), function (t) {
                var e = null;
                var n = t.model,
                    i = t.editing.view,
                    o = t.commands.get("input");

                function r(t) {
                  var r = n.document,
                      a = i.document.isComposing,
                      c = e && e.isEqual(r.selection);
                  e = null, o.isEnabled && (sf(t) || r.selection.isCollapsed || a && 229 === t.keyCode || !a && 229 === t.keyCode && c || s());
                }

                function s() {
                  var t = o.buffer;
                  t.lock();
                  var e = t.batch;
                  o._batches.add(e), n.enqueueChange(e, function () {
                    n.deleteContent(n.document.selection);
                  }), t.unlock();
                }

                Qi.isAndroid ? i.document.on("beforeinput", function (t, e) {
                  return r(e);
                }, {
                  priority: "lowest"
                }) : i.document.on("keydown", function (t, e) {
                  return r(e);
                }, {
                  priority: "lowest"
                }), i.document.on("compositionstart", function () {
                  var t = n.document,
                      e = 1 !== t.selection.rangeCount || t.selection.getFirstRange().isFlat;
                  t.selection.isCollapsed || e || s();
                }, {
                  priority: "lowest"
                }), i.document.on("compositionend", function () {
                  e = n.createSelection(n.document.selection);
                }, {
                  priority: "lowest"
                });
              }(t), function (t) {
                t.editing.view.document.on("mutations", function (e, n, i) {
                  new Uf(t).handle(n, i);
                });
              }(t);
            }
          }, {
            key: "isInput",
            value: function isInput(t) {
              return this.editor.commands.get("input")._batches.has(t);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Input";
            }
          }]);

          return Wf;
        }(r);

        var $f = /*#__PURE__*/function (_r68) {
          _inherits($f, _r68);

          var _super160 = _createSuper($f);

          function $f() {
            _classCallCheck(this, $f);

            return _super160.apply(this, arguments);
          }

          _createClass($f, null, [{
            key: "requires",
            get: function get() {
              return [Wf, Fh];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Typing";
            }
          }]);

          return $f;
        }(r);

        function Yf(t, e) {
          var n = t.start;
          return {
            text: Array.from(t.getItems()).reduce(function (t, i) {
              return i.is("$text") || i.is("$textProxy") ? t + i.data : (n = e.createPositionAfter(i), "");
            }, ""),
            range: e.createRange(n, t.end)
          };
        }

        var Jf = /*#__PURE__*/function () {
          function Jf(t, e) {
            var _this237 = this;

            _classCallCheck(this, Jf);

            this.model = t, this.testCallback = e, this.hasMatch = !1, this.set("isEnabled", !0), this.on("change:isEnabled", function () {
              _this237.isEnabled ? _this237._startListening() : (_this237.stopListening(t.document.selection), _this237.stopListening(t.document));
            }), this._startListening();
          }

          _createClass(Jf, [{
            key: "_startListening",
            value: function _startListening() {
              var _this238 = this;

              var t = this.model.document;
              this.listenTo(t.selection, "change:range", function (e, _ref50) {
                var n = _ref50.directChange;
                n && (t.selection.isCollapsed ? _this238._evaluateTextBeforeSelection("selection") : _this238.hasMatch && (_this238.fire("unmatched"), _this238.hasMatch = !1));
              }), this.listenTo(t, "change:data", function (t, e) {
                "transparent" != e.type && _this238._evaluateTextBeforeSelection("data", {
                  batch: e
                });
              });
            }
          }, {
            key: "_evaluateTextBeforeSelection",
            value: function _evaluateTextBeforeSelection(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

              var n = this.model,
                  i = n.document.selection,
                  o = n.createRange(n.createPositionAt(i.focus.parent, 0), i.focus),
                  _Yf = Yf(o, n),
                  r = _Yf.text,
                  s = _Yf.range,
                  a = this.testCallback(r);

              if (!a && this.hasMatch && this.fire("unmatched"), this.hasMatch = !!a, a) {
                var _n223 = Object.assign(e, {
                  text: r,
                  range: s
                });

                "object" == typeof a && Object.assign(_n223, a), this.fire("matched:".concat(t), _n223);
              }
            }
          }]);

          return Jf;
        }();

        Object(o["default"])(Jf, i["default"]);

        var Gf = /*#__PURE__*/function (_r69) {
          _inherits(Gf, _r69);

          var _super161 = _createSuper(Gf);

          function Gf(t) {
            var _this239;

            _classCallCheck(this, Gf);

            _this239 = _super161.call(this, t), _this239.attributes = new Set(), _this239._overrideUid = null;
            return _this239;
          }

          _createClass(Gf, [{
            key: "init",
            value: function init() {
              var _this240 = this;

              var t = this.editor,
                  e = t.model,
                  n = t.editing.view,
                  i = t.locale,
                  o = e.document.selection;
              this.listenTo(n.document, "arrowKey", function (t, e) {
                if (!o.isCollapsed) return;
                if (e.shiftKey || e.altKey || e.ctrlKey) return;
                var n = e.keyCode == to.arrowright,
                    r = e.keyCode == to.arrowleft;
                if (!n && !r) return;
                var s = i.contentLanguageDirection;
                var a = !1;
                !0 === (a = "ltr" === s && n || "rtl" === s && r ? _this240._handleForwardMovement(e) : _this240._handleBackwardMovement(e)) && t.stop();
              }, {
                context: "$text",
                priority: "highest"
              }), this._isNextGravityRestorationSkipped = !1, this.listenTo(o, "change:range", function (t, e) {
                _this240._isNextGravityRestorationSkipped ? _this240._isNextGravityRestorationSkipped = !1 : _this240._isGravityOverridden && (!e.directChange && Zf(o.getFirstPosition(), _this240.attributes) || _this240._restoreGravity());
              });
            }
          }, {
            key: "registerAttribute",
            value: function registerAttribute(t) {
              this.attributes.add(t);
            }
          }, {
            key: "_handleForwardMovement",
            value: function _handleForwardMovement(t) {
              var e = this.attributes,
                  n = this.editor.model.document.selection,
                  i = n.getFirstPosition();
              return !this._isGravityOverridden && (!i.isAtStart || !Kf(n, e)) && (Zf(i, e) ? (Xf(t), this._overrideGravity(), !0) : void 0);
            }
          }, {
            key: "_handleBackwardMovement",
            value: function _handleBackwardMovement(t) {
              var e = this.attributes,
                  n = this.editor.model,
                  i = n.document.selection,
                  o = i.getFirstPosition();
              return this._isGravityOverridden ? (Xf(t), this._restoreGravity(), Qf(n, e, o), !0) : o.isAtStart ? !!Kf(i, e) && (Xf(t), Qf(n, e, o), !0) : function (t, e) {
                return Zf(t.getShiftedBy(-1), e);
              }(o, e) ? o.isAtEnd && !Kf(i, e) && Zf(o, e) ? (Xf(t), Qf(n, e, o), !0) : (this._isNextGravityRestorationSkipped = !0, this._overrideGravity(), !1) : void 0;
            }
          }, {
            key: "_isGravityOverridden",
            get: function get() {
              return !!this._overrideUid;
            }
          }, {
            key: "_overrideGravity",
            value: function _overrideGravity() {
              this._overrideUid = this.editor.model.change(function (t) {
                return t.overrideSelectionGravity();
              });
            }
          }, {
            key: "_restoreGravity",
            value: function _restoreGravity() {
              var _this241 = this;

              this.editor.model.change(function (t) {
                t.restoreSelectionGravity(_this241._overrideUid), _this241._overrideUid = null;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TwoStepCaretMovement";
            }
          }]);

          return Gf;
        }(r);

        function Kf(t, e) {
          var _iterator323 = _createForOfIteratorHelper(e),
              _step323;

          try {
            for (_iterator323.s(); !(_step323 = _iterator323.n()).done;) {
              var _n224 = _step323.value;
              if (t.hasAttribute(_n224)) return !0;
            }
          } catch (err) {
            _iterator323.e(err);
          } finally {
            _iterator323.f();
          }

          return !1;
        }

        function Qf(t, e, n) {
          var i = n.nodeBefore;
          t.change(function (t) {
            i ? t.setSelectionAttribute(i.getAttributes()) : t.removeSelectionAttribute(e);
          });
        }

        function Xf(t) {
          t.preventDefault();
        }

        function Zf(t, e) {
          var n = t.nodeBefore,
              i = t.nodeAfter;

          var _iterator324 = _createForOfIteratorHelper(e),
              _step324;

          try {
            for (_iterator324.s(); !(_step324 = _iterator324.n()).done;) {
              var _t247 = _step324.value;

              var _e229 = n ? n.getAttribute(_t247) : void 0;

              if ((i ? i.getAttribute(_t247) : void 0) !== _e229) return !0;
            }
          } catch (err) {
            _iterator324.e(err);
          } finally {
            _iterator324.f();
          }

          return !1;
        }

        var tg = /[\\^$.*+?()[\]{}|]/g;
        RegExp(tg.source);
        eg('"'), eg("'"), eg("'"), eg('"'), eg('"'), eg("'");

        function eg(t) {
          return new RegExp("(^|\\s)(".concat(t, ")([^").concat(t, "]*)(").concat(t, ")$"));
        }

        function ng(t, e, n, i) {
          return i.createRange(ig(t, e, n, !0, i), ig(t, e, n, !1, i));
        }

        function ig(t, e, n, i, o) {
          var r = t.textNode || (i ? t.nodeBefore : t.nodeAfter),
              s = null;

          for (; r && r.getAttribute(e) == n;) {
            s = r, r = i ? r.previousSibling : r.nextSibling;
          }

          return s ? o.createPositionAt(s, i ? "before" : "after") : t;
        }

        var og = /*#__PURE__*/function (_a24) {
          _inherits(og, _a24);

          var _super162 = _createSuper(og);

          function og(t) {
            var _this242;

            _classCallCheck(this, og);

            _this242 = _super162.call(this, t), _this242._stack = [], _this242._createdBatches = new WeakSet(), _this242.refresh(), _this242.listenTo(t.data, "set", function (t, e) {
              e[1] = _objectSpread({}, e[1]);
              var n = e[1];
              n.batchType || (n.batchType = "transparent");
            }, {
              priority: "high"
            }), _this242.listenTo(t.data, "set", function (t, e) {
              "transparent" === e[1].batchType && _this242.clearStack();
            });
            return _this242;
          }

          _createClass(og, [{
            key: "refresh",
            value: function refresh() {
              this.isEnabled = this._stack.length > 0;
            }
          }, {
            key: "addBatch",
            value: function addBatch(t) {
              var e = this.editor.model.document.selection,
                  n = {
                ranges: e.hasOwnRange ? Array.from(e.getRanges()) : [],
                isBackward: e.isBackward
              };
              this._stack.push({
                batch: t,
                selection: n
              }), this.refresh();
            }
          }, {
            key: "clearStack",
            value: function clearStack() {
              this._stack = [], this.refresh();
            }
          }, {
            key: "_restoreSelection",
            value: function _restoreSelection(t, e, n) {
              var i = this.editor.model,
                  o = i.document,
                  r = [],
                  s = t.map(function (t) {
                return t.getTransformedByOperations(n);
              }),
                  a = s.flat();

              var _iterator325 = _createForOfIteratorHelper(s),
                  _step325;

              try {
                for (_iterator325.s(); !(_step325 = _iterator325.n()).done;) {
                  var _t248 = _step325.value;

                  var _e230 = _t248.filter(function (t) {
                    return t.root != o.graveyard;
                  }).filter(function (t) {
                    return !sg(t, a);
                  });

                  _e230.length && (rg(_e230), r.push(_e230[0]));
                }
              } catch (err) {
                _iterator325.e(err);
              } finally {
                _iterator325.f();
              }

              r.length && i.change(function (t) {
                t.setSelection(r, {
                  backward: e
                });
              });
            }
          }, {
            key: "_undo",
            value: function _undo(t, e) {
              var n = this.editor.model,
                  i = n.document;

              this._createdBatches.add(e);

              var o = t.operations.slice().filter(function (t) {
                return t.isDocumentOperation;
              });
              o.reverse();

              var _iterator326 = _createForOfIteratorHelper(o),
                  _step326;

              try {
                for (_iterator326.s(); !(_step326 = _iterator326.n()).done;) {
                  var _t249 = _step326.value;

                  var _o94 = _t249.baseVersion + 1,
                      _r70 = Array.from(i.history.getOperations(_o94)),
                      _s30 = hh([_t249.getReversed()], _r70, {
                    useRelations: !0,
                    document: this.editor.model.document,
                    padWithNoOps: !1,
                    forceWeakRemove: !0
                  }).operationsA;

                  var _iterator327 = _createForOfIteratorHelper(_s30),
                      _step327;

                  try {
                    for (_iterator327.s(); !(_step327 = _iterator327.n()).done;) {
                      var _o95 = _step327.value;
                      e.addOperation(_o95), n.applyOperation(_o95), i.history.setOperationAsUndone(_t249, _o95);
                    }
                  } catch (err) {
                    _iterator327.e(err);
                  } finally {
                    _iterator327.f();
                  }
                }
              } catch (err) {
                _iterator326.e(err);
              } finally {
                _iterator326.f();
              }
            }
          }]);

          return og;
        }(a);

        function rg(t) {
          t.sort(function (t, e) {
            return t.start.isBefore(e.start) ? -1 : 1;
          });

          for (var _e231 = 1; _e231 < t.length; _e231++) {
            var _n225 = t[_e231 - 1].getJoined(t[_e231], !0);

            _n225 && (_e231--, t.splice(_e231, 2, _n225));
          }
        }

        function sg(t, e) {
          return e.some(function (e) {
            return e !== t && e.containsRange(t, !0);
          });
        }

        var ag = /*#__PURE__*/function (_og) {
          _inherits(ag, _og);

          var _super163 = _createSuper(ag);

          function ag() {
            _classCallCheck(this, ag);

            return _super163.apply(this, arguments);
          }

          _createClass(ag, [{
            key: "execute",
            value: function execute() {
              var _this243 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;

              var e = t ? this._stack.findIndex(function (e) {
                return e.batch == t;
              }) : this._stack.length - 1,
                  n = this._stack.splice(e, 1)[0],
                  i = this.editor.model.createBatch("transparent");

              this.editor.model.enqueueChange(i, function () {
                _this243._undo(n.batch, i);

                var t = _this243.editor.model.document.history.getOperations(n.batch.baseVersion);

                _this243._restoreSelection(n.selection.ranges, n.selection.isBackward, t), _this243.fire("revert", n.batch, i);
              }), this.refresh();
            }
          }]);

          return ag;
        }(og);

        var cg = /*#__PURE__*/function (_og2) {
          _inherits(cg, _og2);

          var _super164 = _createSuper(cg);

          function cg() {
            _classCallCheck(this, cg);

            return _super164.apply(this, arguments);
          }

          _createClass(cg, [{
            key: "execute",
            value: function execute() {
              var _this244 = this;

              var t = this._stack.pop(),
                  e = this.editor.model.createBatch("transparent");

              this.editor.model.enqueueChange(e, function () {
                var n = t.batch.operations[t.batch.operations.length - 1].baseVersion + 1,
                    i = _this244.editor.model.document.history.getOperations(n);

                _this244._restoreSelection(t.selection.ranges, t.selection.isBackward, i), _this244._undo(t.batch, e);
              }), this.refresh();
            }
          }]);

          return cg;
        }(og);

        var lg = /*#__PURE__*/function (_r71) {
          _inherits(lg, _r71);

          var _super165 = _createSuper(lg);

          function lg(t) {
            var _this245;

            _classCallCheck(this, lg);

            _this245 = _super165.call(this, t), _this245._batchRegistry = new WeakSet();
            return _this245;
          }

          _createClass(lg, [{
            key: "init",
            value: function init() {
              var _this246 = this;

              var t = this.editor;
              this._undoCommand = new ag(t), this._redoCommand = new cg(t), t.commands.add("undo", this._undoCommand), t.commands.add("redo", this._redoCommand), this.listenTo(t.model, "applyOperation", function (t, e) {
                var n = e[0];
                if (!n.isDocumentOperation) return;

                var i = n.batch,
                    o = _this246._redoCommand._createdBatches.has(i),
                    r = _this246._undoCommand._createdBatches.has(i);

                _this246._batchRegistry.has(i) || "transparent" == i.type && !o && !r || (o ? _this246._undoCommand.addBatch(i) : r || (_this246._undoCommand.addBatch(i), _this246._redoCommand.clearStack()), _this246._batchRegistry.add(i));
              }, {
                priority: "highest"
              }), this.listenTo(this._undoCommand, "revert", function (t, e, n) {
                _this246._redoCommand.addBatch(n);
              }), t.keystrokes.set("CTRL+Z", "undo"), t.keystrokes.set("CTRL+Y", "redo"), t.keystrokes.set("CTRL+SHIFT+Z", "redo");
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "UndoEditing";
            }
          }]);

          return lg;
        }(r);

        var dg = n(86),
            ug = n.n(dg),
            hg = n(87),
            fg = n.n(hg);

        var gg = /*#__PURE__*/function (_r72) {
          _inherits(gg, _r72);

          var _super166 = _createSuper(gg);

          function gg() {
            _classCallCheck(this, gg);

            return _super166.apply(this, arguments);
          }

          _createClass(gg, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.locale,
                  n = t.t,
                  i = "ltr" == e.uiLanguageDirection ? ug.a : fg.a,
                  o = "ltr" == e.uiLanguageDirection ? fg.a : ug.a;
              this._addButton("undo", n("Undo"), "CTRL+Z", i), this._addButton("redo", n("Redo"), "CTRL+Y", o);
            }
          }, {
            key: "_addButton",
            value: function _addButton(t, e, n, i) {
              var _this247 = this;

              var o = this.editor;
              o.ui.componentFactory.add(t, function (r) {
                var s = o.commands.get(t),
                    a = new nu(r);
                return a.set({
                  label: e,
                  icon: i,
                  keystroke: n,
                  tooltip: !0
                }), a.bind("isEnabled").to(s, "isEnabled"), _this247.listenTo(a, "execute", function () {
                  o.execute(t), o.editing.view.focus();
                }), a;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "UndoUI";
            }
          }]);

          return gg;
        }(r);

        var mg = /*#__PURE__*/function (_r73) {
          _inherits(mg, _r73);

          var _super167 = _createSuper(mg);

          function mg() {
            _classCallCheck(this, mg);

            return _super167.apply(this, arguments);
          }

          _createClass(mg, null, [{
            key: "requires",
            get: function get() {
              return [lg, gg];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Undo";
            }
          }]);

          return mg;
        }(r);

        var pg = /*#__PURE__*/function (_r74) {
          _inherits(pg, _r74);

          var _super168 = _createSuper(pg);

          function pg() {
            _classCallCheck(this, pg);

            return _super168.apply(this, arguments);
          }

          _createClass(pg, null, [{
            key: "requires",
            get: function get() {
              return [Af, jh, Lf, Of, $f, mg];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Essentials";
            }
          }]);

          return pg;
        }(r);

        var bg = /*#__PURE__*/function () {
          function bg() {
            var _this248 = this;

            _classCallCheck(this, bg);

            var t = new window.FileReader();
            this._reader = t, this._data = void 0, this.set("loaded", 0), t.onprogress = function (t) {
              _this248.loaded = t.loaded;
            };
          }

          _createClass(bg, [{
            key: "error",
            get: function get() {
              return this._reader.error;
            }
          }, {
            key: "data",
            get: function get() {
              return this._data;
            }
          }, {
            key: "read",
            value: function read(t) {
              var _this249 = this;

              var e = this._reader;
              return this.total = t.size, new Promise(function (n, i) {
                e.onload = function () {
                  var t = e.result;
                  _this249._data = t, n(t);
                }, e.onerror = function () {
                  i("error");
                }, e.onabort = function () {
                  i("aborted");
                }, _this249._reader.readAsDataURL(t);
              });
            }
          }, {
            key: "abort",
            value: function abort() {
              this._reader.abort();
            }
          }]);

          return bg;
        }();

        Object(o["default"])(bg, i["default"]);

        var kg = /*#__PURE__*/function (_r75) {
          _inherits(kg, _r75);

          var _super169 = _createSuper(kg);

          function kg() {
            _classCallCheck(this, kg);

            return _super169.apply(this, arguments);
          }

          _createClass(kg, [{
            key: "init",
            value: function init() {
              var _this250 = this;

              this.loaders = new on["default"](), this.loaders.on("add", function () {
                return _this250._updatePendingAction();
              }), this.loaders.on("remove", function () {
                return _this250._updatePendingAction();
              }), this._loadersMap = new Map(), this._pendingAction = null, this.set("uploaded", 0), this.set("uploadTotal", null), this.bind("uploadedPercent").to(this, "uploaded", this, "uploadTotal", function (t, e) {
                return e ? t / e * 100 : 0;
              });
            }
          }, {
            key: "getLoader",
            value: function getLoader(t) {
              return this._loadersMap.get(t) || null;
            }
          }, {
            key: "createLoader",
            value: function createLoader(t) {
              var _this251 = this;

              if (!this.createUploadAdapter) return Object(rn.logWarning)("filerepository-no-upload-adapter"), null;
              var e = new _g(Promise.resolve(t), this.createUploadAdapter);
              return this.loaders.add(e), this._loadersMap.set(t, e), t instanceof Promise && e.file.then(function (t) {
                _this251._loadersMap.set(t, e);
              })["catch"](function () {}), e.on("change:uploaded", function () {
                var t = 0;

                var _iterator328 = _createForOfIteratorHelper(_this251.loaders),
                    _step328;

                try {
                  for (_iterator328.s(); !(_step328 = _iterator328.n()).done;) {
                    var _e232 = _step328.value;
                    t += _e232.uploaded;
                  }
                } catch (err) {
                  _iterator328.e(err);
                } finally {
                  _iterator328.f();
                }

                _this251.uploaded = t;
              }), e.on("change:uploadTotal", function () {
                var t = 0;

                var _iterator329 = _createForOfIteratorHelper(_this251.loaders),
                    _step329;

                try {
                  for (_iterator329.s(); !(_step329 = _iterator329.n()).done;) {
                    var _e233 = _step329.value;
                    _e233.uploadTotal && (t += _e233.uploadTotal);
                  }
                } catch (err) {
                  _iterator329.e(err);
                } finally {
                  _iterator329.f();
                }

                _this251.uploadTotal = t;
              }), e;
            }
          }, {
            key: "destroyLoader",
            value: function destroyLoader(t) {
              var _this252 = this;

              var e = t instanceof _g ? t : this.getLoader(t);
              e._destroy(), this.loaders.remove(e), this._loadersMap.forEach(function (t, n) {
                t === e && _this252._loadersMap["delete"](n);
              });
            }
          }, {
            key: "_updatePendingAction",
            value: function _updatePendingAction() {
              var t = this.editor.plugins.get(xl);

              if (this.loaders.length) {
                if (!this._pendingAction) {
                  var _e234 = this.editor.t,
                      _n226 = function _n226(t) {
                    return "".concat(_e234("Upload in progress"), " ").concat(parseInt(t), "%.");
                  };

                  this._pendingAction = t.add(_n226(this.uploadedPercent)), this._pendingAction.bind("message").to(this, "uploadedPercent", _n226);
                }
              } else t.remove(this._pendingAction), this._pendingAction = null;
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "FileRepository";
            }
          }, {
            key: "requires",
            get: function get() {
              return [xl];
            }
          }]);

          return kg;
        }(r);

        Object(o["default"])(kg, i["default"]);

        var _g = /*#__PURE__*/function () {
          function _g(t, e) {
            _classCallCheck(this, _g);

            this.id = Object(Xo.a)(), this._filePromiseWrapper = this._createFilePromiseWrapper(t), this._adapter = e(this), this._reader = new bg(), this.set("status", "idle"), this.set("uploaded", 0), this.set("uploadTotal", null), this.bind("uploadedPercent").to(this, "uploaded", this, "uploadTotal", function (t, e) {
              return e ? t / e * 100 : 0;
            }), this.set("uploadResponse", null);
          }

          _createClass(_g, [{
            key: "file",
            get: function get() {
              var _this253 = this;

              return this._filePromiseWrapper ? this._filePromiseWrapper.promise.then(function (t) {
                return _this253._filePromiseWrapper ? t : null;
              }) : Promise.resolve(null);
            }
          }, {
            key: "data",
            get: function get() {
              return this._reader.data;
            }
          }, {
            key: "read",
            value: function read() {
              var _this254 = this;

              if ("idle" != this.status) throw new rn["default"]("filerepository-read-wrong-status", this);
              return this.status = "reading", this.file.then(function (t) {
                return _this254._reader.read(t);
              }).then(function (t) {
                if ("reading" !== _this254.status) throw _this254.status;
                return _this254.status = "idle", t;
              })["catch"](function (t) {
                if ("aborted" === t) throw _this254.status = "aborted", "aborted";
                throw _this254.status = "error", _this254._reader.error ? _this254._reader.error : t;
              });
            }
          }, {
            key: "upload",
            value: function upload() {
              var _this255 = this;

              if ("idle" != this.status) throw new rn["default"]("filerepository-upload-wrong-status", this);
              return this.status = "uploading", this.file.then(function () {
                return _this255._adapter.upload();
              }).then(function (t) {
                return _this255.uploadResponse = t, _this255.status = "idle", t;
              })["catch"](function (t) {
                if ("aborted" === _this255.status) throw "aborted";
                throw _this255.status = "error", t;
              });
            }
          }, {
            key: "abort",
            value: function abort() {
              var t = this.status;
              this.status = "aborted", this._filePromiseWrapper.isFulfilled ? "reading" == t ? this._reader.abort() : "uploading" == t && this._adapter.abort && this._adapter.abort() : (this._filePromiseWrapper.promise["catch"](function () {}), this._filePromiseWrapper.rejecter("aborted")), this._destroy();
            }
          }, {
            key: "_destroy",
            value: function _destroy() {
              this._filePromiseWrapper = void 0, this._reader = void 0, this._adapter = void 0, this.uploadResponse = void 0;
            }
          }, {
            key: "_createFilePromiseWrapper",
            value: function _createFilePromiseWrapper(t) {
              var e = {};
              return e.promise = new Promise(function (n, i) {
                e.rejecter = i, e.isFulfilled = !1, t.then(function (t) {
                  e.isFulfilled = !0, n(t);
                })["catch"](function (t) {
                  e.isFulfilled = !0, i(t);
                });
              }), e;
            }
          }]);

          return _g;
        }();

        Object(o["default"])(_g, i["default"]);

        var wg = /*#__PURE__*/function (_Pd23) {
          _inherits(wg, _Pd23);

          var _super170 = _createSuper(wg);

          function wg(t) {
            var _this256;

            _classCallCheck(this, wg);

            _this256 = _super170.call(this, t), _this256.buttonView = new nu(t), _this256._fileInputView = new vg(t), _this256._fileInputView.bind("acceptedType").to(_assertThisInitialized(_this256)), _this256._fileInputView.bind("allowMultipleFiles").to(_assertThisInitialized(_this256)), _this256._fileInputView.delegate("done").to(_assertThisInitialized(_this256)), _this256.setTemplate({
              tag: "span",
              attributes: {
                "class": "ck-file-dialog-button"
              },
              children: [_this256.buttonView, _this256._fileInputView]
            }), _this256.buttonView.on("execute", function () {
              _this256._fileInputView.open();
            });
            return _this256;
          }

          _createClass(wg, [{
            key: "focus",
            value: function focus() {
              this.buttonView.focus();
            }
          }]);

          return wg;
        }(Pd);

        var vg = /*#__PURE__*/function (_Pd24) {
          _inherits(vg, _Pd24);

          var _super171 = _createSuper(vg);

          function vg(t) {
            var _this257;

            _classCallCheck(this, vg);

            _this257 = _super171.call(this, t), _this257.set("acceptedType"), _this257.set("allowMultipleFiles", !1);
            var e = _this257.bindTemplate;

            _this257.setTemplate({
              tag: "input",
              attributes: {
                "class": ["ck-hidden"],
                type: "file",
                tabindex: "-1",
                accept: e.to("acceptedType"),
                multiple: e.to("allowMultipleFiles")
              },
              on: {
                change: e.to(function () {
                  _this257.element && _this257.element.files && _this257.element.files.length && _this257.fire("done", _this257.element.files), _this257.element.value = "";
                })
              }
            });

            return _this257;
          }

          _createClass(vg, [{
            key: "open",
            value: function open() {
              this.element.click();
            }
          }]);

          return vg;
        }(Pd);

        var yg = "ckCsrfToken",
            xg = 40,
            Cg = "abcdefghijklmnopqrstuvwxyz0123456789";

        function Tg() {
          var t = function (t) {
            t = t.toLowerCase();
            var e = document.cookie.split(";");

            var _iterator330 = _createForOfIteratorHelper(e),
                _step330;

            try {
              for (_iterator330.s(); !(_step330 = _iterator330.n()).done;) {
                var _n227 = _step330.value;

                var _e235 = _n227.split("="),
                    _i183 = decodeURIComponent(_e235[0].trim().toLowerCase());

                if (_i183 === t) return decodeURIComponent(_e235[1]);
              }
            } catch (err) {
              _iterator330.e(err);
            } finally {
              _iterator330.f();
            }

            return null;
          }(yg);

          return t && t.length == xg || (t = function (t) {
            var e = "";
            var n = new Uint8Array(t);
            window.crypto.getRandomValues(n);

            for (var _t250 = 0; _t250 < n.length; _t250++) {
              var _i184 = Cg.charAt(n[_t250] % Cg.length);

              e += Math.random() > .5 ? _i184.toUpperCase() : _i184;
            }

            return e;
          }(xg), function (t, e) {
            document.cookie = encodeURIComponent(t) + "=" + encodeURIComponent(e) + ";path=/";
          }(yg, t)), t;
        }

        var Ag = /*#__PURE__*/function () {
          function Ag(t, e, n) {
            _classCallCheck(this, Ag);

            this.loader = t, this.url = e, this.t = n;
          }

          _createClass(Ag, [{
            key: "upload",
            value: function upload() {
              var _this258 = this;

              return this.loader.file.then(function (t) {
                return new Promise(function (e, n) {
                  _this258._initRequest(), _this258._initListeners(e, n, t), _this258._sendRequest(t);
                });
              });
            }
          }, {
            key: "abort",
            value: function abort() {
              this.xhr && this.xhr.abort();
            }
          }, {
            key: "_initRequest",
            value: function _initRequest() {
              var t = this.xhr = new XMLHttpRequest();
              t.open("POST", this.url, !0), t.responseType = "json";
            }
          }, {
            key: "_initListeners",
            value: function _initListeners(t, e, n) {
              var i = this.xhr,
                  o = this.loader,
                  r = (0, this.t)("Cannot upload file:") + " ".concat(n.name, ".");
              i.addEventListener("error", function () {
                return e(r);
              }), i.addEventListener("abort", function () {
                return e();
              }), i.addEventListener("load", function () {
                var n = i.response;
                if (!n || !n.uploaded) return e(n && n.error && n.error.message ? n.error.message : r);
                t({
                  "default": n.url
                });
              }), i.upload && i.upload.addEventListener("progress", function (t) {
                t.lengthComputable && (o.uploadTotal = t.total, o.uploaded = t.loaded);
              });
            }
          }, {
            key: "_sendRequest",
            value: function _sendRequest(t) {
              var e = new FormData();
              e.append("upload", t), e.append("ckCsrfToken", Tg()), this.xhr.send(e);
            }
          }]);

          return Ag;
        }();

        function Eg(t, e, n, i) {
          var o,
              r = null;
          "function" == typeof i ? o = i : (r = t.commands.get(i), o = function o() {
            t.execute(i);
          }), t.model.document.on("change:data", function (s, a) {
            if (r && !r.isEnabled || !e.isEnabled) return;
            var c = Es(t.model.document.selection.getRanges());
            if (!c.isCollapsed) return;
            if ("transparent" == a.type) return;
            var l = Array.from(t.model.document.differ.getChanges()),
                d = l[0];
            if (1 != l.length || "insert" !== d.type || "$text" != d.name || 1 != d.length) return;
            var u = d.position.parent;
            if (u.is("element", "codeBlock")) return;
            if (u.is("element", "listItem") && "function" != typeof i && !["numberedList", "bulletedList", "todoList"].includes(i)) return;
            if (r && !0 === r.value) return;
            var h = u.getChild(0),
                f = t.model.createRangeOn(h);
            if (!f.containsRange(c) && !c.end.isEqual(f.end)) return;
            var g = n.exec(h.data.substr(0, c.end.offset));
            g && t.model.enqueueChange(function (e) {
              var n = e.createPositionAt(u, 0),
                  i = e.createPositionAt(u, g[0].length),
                  r = new fa(n, i);

              if (!1 !== o({
                match: g
              })) {
                e.remove(r);

                var _n228 = t.model.document.selection.getFirstRange(),
                    _i185 = e.createRangeIn(u);

                !u.isEmpty || _i185.isEqual(_n228) || _i185.containsRange(_n228, !0) || e.remove(u);
              }

              r.detach(), t.model.enqueueChange(function () {
                t.plugins.get("Delete").requestUndoOnBackspace();
              });
            });
          });
        }

        function Sg(t, e, n, i) {
          var o, r;
          n instanceof RegExp ? o = n : r = n, r = r || function (t) {
            var e;
            var n = [],
                i = [];

            for (; null !== (e = o.exec(t)) && !(e && e.length < 4);) {
              var _e236 = e,
                  _t251 = _e236.index,
                  _o96 = _e236[1],
                  _r76 = _e236[2],
                  _s31 = _e236[3];

              var _a25 = _o96 + _r76 + _s31,
                  _c8 = [_t251 += e[0].length - _a25.length, _t251 + _o96.length],
                  _l5 = [_t251 + _o96.length + _r76.length, _t251 + _o96.length + _r76.length + _s31.length];

              n.push(_c8), n.push(_l5), i.push([_t251 + _o96.length, _t251 + _o96.length + _r76.length]);
            }

            return {
              remove: n,
              format: i
            };
          }, t.model.document.on("change:data", function (n, o) {
            if ("transparent" == o.type || !e.isEnabled) return;
            var s = t.model,
                a = s.document.selection;
            if (!a.isCollapsed) return;
            var c = Array.from(s.document.differ.getChanges()),
                l = c[0];
            if (1 != c.length || "insert" !== l.type || "$text" != l.name || 1 != l.length) return;

            var d = a.focus,
                u = d.parent,
                _ref51 = function (t, e) {
              var n = t.start;
              return {
                text: Array.from(t.getItems()).reduce(function (t, i) {
                  return !i.is("$text") && !i.is("$textProxy") || i.getAttribute("code") ? (n = e.createPositionAfter(i), "") : t + i.data;
                }, ""),
                range: e.createRange(n, t.end)
              };
            }(s.createRange(s.createPositionAt(u, 0), d), s),
                h = _ref51.text,
                f = _ref51.range,
                g = r(h),
                m = Ig(f.start, g.format, s),
                p = Ig(f.start, g.remove, s);

            m.length && p.length && s.enqueueChange(function (e) {
              if (!1 !== i(e, m)) {
                var _iterator331 = _createForOfIteratorHelper(p.reverse()),
                    _step331;

                try {
                  for (_iterator331.s(); !(_step331 = _iterator331.n()).done;) {
                    var _t252 = _step331.value;
                    e.remove(_t252);
                  }
                } catch (err) {
                  _iterator331.e(err);
                } finally {
                  _iterator331.f();
                }

                s.enqueueChange(function () {
                  t.plugins.get("Delete").requestUndoOnBackspace();
                });
              }
            });
          });
        }

        function Ig(t, e, n) {
          return e.filter(function (t) {
            return void 0 !== t[0] && void 0 !== t[1];
          }).map(function (e) {
            return n.createRange(t.getShiftedBy(e[0]), t.getShiftedBy(e[1]));
          });
        }

        var Og = /*#__PURE__*/function (_r77) {
          _inherits(Og, _r77);

          var _super172 = _createSuper(Og);

          function Og() {
            _classCallCheck(this, Og);

            return _super172.apply(this, arguments);
          }

          _createClass(Og, [{
            key: "afterInit",
            value: function afterInit() {
              this._addListAutoformats(), this._addBasicStylesAutoformats(), this._addHeadingAutoformats(), this._addBlockQuoteAutoformats(), this._addCodeBlockAutoformats(), this._addHorizontalLineAutoformats();
            }
          }, {
            key: "_addListAutoformats",
            value: function _addListAutoformats() {
              var _this259 = this;

              var t = this.editor.commands;
              t.get("bulletedList") && Eg(this.editor, this, /^[*-]\s$/, "bulletedList"), t.get("numberedList") && Eg(this.editor, this, /^1[.|)]\s$/, "numberedList"), t.get("todoList") && Eg(this.editor, this, /^\[\s?\]\s$/, "todoList"), t.get("checkTodoList") && Eg(this.editor, this, /^\[\s?x\s?\]\s$/, function () {
                _this259.editor.execute("todoList"), _this259.editor.execute("checkTodoList");
              });
            }
          }, {
            key: "_addBasicStylesAutoformats",
            value: function _addBasicStylesAutoformats() {
              var t = this.editor.commands;

              if (t.get("bold")) {
                var _t253 = Rg(this.editor, "bold");

                Sg(this.editor, this, /(?:^|\s)(\*\*)([^*]+)(\*\*)$/g, _t253), Sg(this.editor, this, /(?:^|\s)(__)([^_]+)(__)$/g, _t253);
              }

              if (t.get("italic")) {
                var _t254 = Rg(this.editor, "italic");

                Sg(this.editor, this, /(?:^|\s)(\*)([^*_]+)(\*)$/g, _t254), Sg(this.editor, this, /(?:^|\s)(_)([^_]+)(_)$/g, _t254);
              }

              if (t.get("code")) {
                var _t255 = Rg(this.editor, "code");

                Sg(this.editor, this, /(`)([^`]+)(`)$/g, _t255);
              }

              if (t.get("strikethrough")) {
                var _t256 = Rg(this.editor, "strikethrough");

                Sg(this.editor, this, /(~~)([^~]+)(~~)$/g, _t256);
              }
            }
          }, {
            key: "_addHeadingAutoformats",
            value: function _addHeadingAutoformats() {
              var _this260 = this;

              var t = this.editor.commands.get("heading");
              t && t.modelElements.filter(function (t) {
                return t.match(/^heading[1-6]$/);
              }).forEach(function (e) {
                var n = e[7],
                    i = new RegExp("^(#{".concat(n, "})\\s$"));
                Eg(_this260.editor, _this260, i, function () {
                  if (!t.isEnabled || t.value === e) return !1;

                  _this260.editor.execute("heading", {
                    value: e
                  });
                });
              });
            }
          }, {
            key: "_addBlockQuoteAutoformats",
            value: function _addBlockQuoteAutoformats() {
              this.editor.commands.get("blockQuote") && Eg(this.editor, this, /^>\s$/, "blockQuote");
            }
          }, {
            key: "_addCodeBlockAutoformats",
            value: function _addCodeBlockAutoformats() {
              var _this261 = this;

              var t = this.editor,
                  e = t.model.document.selection;
              t.commands.get("codeBlock") && Eg(t, this, /^```$/, function () {
                if (e.getFirstPosition().parent.is("element", "listItem")) return !1;

                _this261.editor.execute("codeBlock", {
                  usePreviousLanguageChoice: !0
                });
              });
            }
          }, {
            key: "_addHorizontalLineAutoformats",
            value: function _addHorizontalLineAutoformats() {
              this.editor.commands.get("horizontalLine") && Eg(this.editor, this, /^---$/, "horizontalLine");
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Fh];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Autoformat";
            }
          }]);

          return Og;
        }(r);

        function Rg(t, e) {
          return function (n, i) {
            if (!t.commands.get(e).isEnabled) return !1;
            var o = t.model.schema.getValidRanges(i, e);

            var _iterator332 = _createForOfIteratorHelper(o),
                _step332;

            try {
              for (_iterator332.s(); !(_step332 = _iterator332.n()).done;) {
                var _t257 = _step332.value;
                n.setAttribute(e, !0, _t257);
              }
            } catch (err) {
              _iterator332.e(err);
            } finally {
              _iterator332.f();
            }

            n.removeSelectionAttribute(e);
          };
        }

        var Mg = /*#__PURE__*/function (_a26) {
          _inherits(Mg, _a26);

          var _super173 = _createSuper(Mg);

          function Mg(t, e) {
            var _this262;

            _classCallCheck(this, Mg);

            _this262 = _super173.call(this, t), _this262.attributeKey = e;
            return _this262;
          }

          _createClass(Mg, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document;
              this.value = this._getValueFromFirstAllowedNode(), this.isEnabled = t.schema.checkAttributeInSelection(e.selection, this.attributeKey);
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this263 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document.selection,
                  i = void 0 === t.forceValue ? !this.value : t.forceValue;
              e.change(function (t) {
                if (n.isCollapsed) i ? t.setSelectionAttribute(_this263.attributeKey, !0) : t.removeSelectionAttribute(_this263.attributeKey);else {
                  var _o97 = e.schema.getValidRanges(n.getRanges(), _this263.attributeKey);

                  var _iterator333 = _createForOfIteratorHelper(_o97),
                      _step333;

                  try {
                    for (_iterator333.s(); !(_step333 = _iterator333.n()).done;) {
                      var _e237 = _step333.value;
                      i ? t.setAttribute(_this263.attributeKey, i, _e237) : t.removeAttribute(_this263.attributeKey, _e237);
                    }
                  } catch (err) {
                    _iterator333.e(err);
                  } finally {
                    _iterator333.f();
                  }
                }
              });
            }
          }, {
            key: "_getValueFromFirstAllowedNode",
            value: function _getValueFromFirstAllowedNode() {
              var t = this.editor.model,
                  e = t.schema,
                  n = t.document.selection;
              if (n.isCollapsed) return n.hasAttribute(this.attributeKey);

              var _iterator334 = _createForOfIteratorHelper(n.getRanges()),
                  _step334;

              try {
                for (_iterator334.s(); !(_step334 = _iterator334.n()).done;) {
                  var _t258 = _step334.value;

                  var _iterator335 = _createForOfIteratorHelper(_t258.getItems()),
                      _step335;

                  try {
                    for (_iterator335.s(); !(_step335 = _iterator335.n()).done;) {
                      var _n229 = _step335.value;
                      if (e.checkAttribute(_n229, this.attributeKey)) return _n229.hasAttribute(this.attributeKey);
                    }
                  } catch (err) {
                    _iterator335.e(err);
                  } finally {
                    _iterator335.f();
                  }
                }
              } catch (err) {
                _iterator334.e(err);
              } finally {
                _iterator334.f();
              }

              return !1;
            }
          }]);

          return Mg;
        }(a);

        var Pg = "bold";

        var Ng = /*#__PURE__*/function (_r78) {
          _inherits(Ng, _r78);

          var _super174 = _createSuper(Ng);

          function Ng() {
            _classCallCheck(this, Ng);

            return _super174.apply(this, arguments);
          }

          _createClass(Ng, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: Pg
              }), t.model.schema.setAttributeProperties(Pg, {
                isFormatting: !0,
                copyOnEnter: !0
              }), t.conversion.attributeToElement({
                model: Pg,
                view: "strong",
                upcastAlso: ["b", function (t) {
                  var e = t.getStyle("font-weight");
                  return e ? "bold" == e || Number(e) >= 600 ? {
                    name: !0,
                    styles: ["font-weight"]
                  } : void 0 : null;
                }]
              }), t.commands.add(Pg, new Mg(t, Pg)), t.keystrokes.set("CTRL+B", Pg);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "BoldEditing";
            }
          }]);

          return Ng;
        }(r);

        var Dg = n(151),
            jg = n.n(Dg);
        var Bg = "bold";

        var Lg = /*#__PURE__*/function (_r79) {
          _inherits(Lg, _r79);

          var _super175 = _createSuper(Lg);

          function Lg() {
            _classCallCheck(this, Lg);

            return _super175.apply(this, arguments);
          }

          _createClass(Lg, [{
            key: "init",
            value: function init() {
              var _this264 = this;

              var t = this.editor,
                  e = t.t;
              t.ui.componentFactory.add(Bg, function (n) {
                var i = t.commands.get(Bg),
                    o = new nu(n);
                return o.set({
                  label: e("Bold"),
                  icon: jg.a,
                  keystroke: "CTRL+B",
                  tooltip: !0,
                  isToggleable: !0
                }), o.bind("isOn", "isEnabled").to(i, "value", "isEnabled"), _this264.listenTo(o, "execute", function () {
                  t.execute(Bg), t.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "BoldUI";
            }
          }]);

          return Lg;
        }(r);

        var zg = /*#__PURE__*/function (_r80) {
          _inherits(zg, _r80);

          var _super176 = _createSuper(zg);

          function zg() {
            _classCallCheck(this, zg);

            return _super176.apply(this, arguments);
          }

          _createClass(zg, null, [{
            key: "requires",
            get: function get() {
              return [Ng, Lg];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Bold";
            }
          }]);

          return zg;
        }(r);

        var Fg = "italic";

        var Vg = /*#__PURE__*/function (_r81) {
          _inherits(Vg, _r81);

          var _super177 = _createSuper(Vg);

          function Vg() {
            _classCallCheck(this, Vg);

            return _super177.apply(this, arguments);
          }

          _createClass(Vg, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: Fg
              }), t.model.schema.setAttributeProperties(Fg, {
                isFormatting: !0,
                copyOnEnter: !0
              }), t.conversion.attributeToElement({
                model: Fg,
                view: "i",
                upcastAlso: ["em", {
                  styles: {
                    "font-style": "italic"
                  }
                }]
              }), t.commands.add(Fg, new Mg(t, Fg)), t.keystrokes.set("CTRL+I", Fg);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ItalicEditing";
            }
          }]);

          return Vg;
        }(r);

        var Ug = n(152),
            Hg = n.n(Ug);
        var qg = "italic";

        var Wg = /*#__PURE__*/function (_r82) {
          _inherits(Wg, _r82);

          var _super178 = _createSuper(Wg);

          function Wg() {
            _classCallCheck(this, Wg);

            return _super178.apply(this, arguments);
          }

          _createClass(Wg, [{
            key: "init",
            value: function init() {
              var _this265 = this;

              var t = this.editor,
                  e = t.t;
              t.ui.componentFactory.add(qg, function (n) {
                var i = t.commands.get(qg),
                    o = new nu(n);
                return o.set({
                  label: e("Italic"),
                  icon: Hg.a,
                  keystroke: "CTRL+I",
                  tooltip: !0,
                  isToggleable: !0
                }), o.bind("isOn", "isEnabled").to(i, "value", "isEnabled"), _this265.listenTo(o, "execute", function () {
                  t.execute(qg), t.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ItalicUI";
            }
          }]);

          return Wg;
        }(r);

        var $g = /*#__PURE__*/function (_r83) {
          _inherits($g, _r83);

          var _super179 = _createSuper($g);

          function $g() {
            _classCallCheck(this, $g);

            return _super179.apply(this, arguments);
          }

          _createClass($g, null, [{
            key: "requires",
            get: function get() {
              return [Vg, Wg];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Italic";
            }
          }]);

          return $g;
        }(r);

        var Yg = /*#__PURE__*/function (_a27) {
          _inherits(Yg, _a27);

          var _super180 = _createSuper(Yg);

          function Yg() {
            _classCallCheck(this, Yg);

            return _super180.apply(this, arguments);
          }

          _createClass(Yg, [{
            key: "refresh",
            value: function refresh() {
              this.value = this._getValue(), this.isEnabled = this._checkEnabled();
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this266 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.schema,
                  i = e.document.selection,
                  o = Array.from(i.getSelectedBlocks()),
                  r = void 0 === t.forceValue ? !this.value : t.forceValue;
              e.change(function (t) {
                if (r) {
                  var _e238 = o.filter(function (t) {
                    return Jg(t) || Kg(n, t);
                  });

                  _this266._applyQuote(t, _e238);
                } else _this266._removeQuote(t, o.filter(Jg));
              });
            }
          }, {
            key: "_getValue",
            value: function _getValue() {
              var t = Es(this.editor.model.document.selection.getSelectedBlocks());
              return !(!t || !Jg(t));
            }
          }, {
            key: "_checkEnabled",
            value: function _checkEnabled() {
              if (this.value) return !0;
              var t = this.editor.model.document.selection,
                  e = this.editor.model.schema,
                  n = Es(t.getSelectedBlocks());
              return !!n && Kg(e, n);
            }
          }, {
            key: "_removeQuote",
            value: function _removeQuote(t, e) {
              Gg(t, e).reverse().forEach(function (e) {
                if (e.start.isAtStart && e.end.isAtEnd) return void t.unwrap(e.start.parent);

                if (e.start.isAtStart) {
                  var _n230 = t.createPositionBefore(e.start.parent);

                  return void t.move(e, _n230);
                }

                e.end.isAtEnd || t.split(e.end);
                var n = t.createPositionAfter(e.end.parent);
                t.move(e, n);
              });
            }
          }, {
            key: "_applyQuote",
            value: function _applyQuote(t, e) {
              var n = [];
              Gg(t, e).reverse().forEach(function (e) {
                var i = Jg(e.start);
                i || (i = t.createElement("blockQuote"), t.wrap(e, i)), n.push(i);
              }), n.reverse().reduce(function (e, n) {
                return e.nextSibling == n ? (t.merge(t.createPositionAfter(e)), e) : n;
              });
            }
          }]);

          return Yg;
        }(a);

        function Jg(t) {
          return "blockQuote" == t.parent.name ? t.parent : null;
        }

        function Gg(t, e) {
          var n,
              i = 0;
          var o = [];

          for (; i < e.length;) {
            var _r84 = e[i],
                _s32 = e[i + 1];
            n || (n = t.createPositionBefore(_r84)), _s32 && _r84.nextSibling == _s32 || (o.push(t.createRange(n, t.createPositionAfter(_r84))), n = null), i++;
          }

          return o;
        }

        function Kg(t, e) {
          var n = t.checkChild(e.parent, "blockQuote"),
              i = t.checkChild(["$root", "blockQuote"], e);
          return n && i;
        }

        var Qg = /*#__PURE__*/function (_r85) {
          _inherits(Qg, _r85);

          var _super181 = _createSuper(Qg);

          function Qg() {
            _classCallCheck(this, Qg);

            return _super181.apply(this, arguments);
          }

          _createClass(Qg, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model.schema;
              t.commands.add("blockQuote", new Yg(t)), e.register("blockQuote", {
                allowWhere: "$block",
                allowContentOf: "$root"
              }), t.conversion.elementToElement({
                model: "blockQuote",
                view: "blockquote"
              }), t.model.document.registerPostFixer(function (n) {
                var i = t.model.document.differ.getChanges();

                var _iterator336 = _createForOfIteratorHelper(i),
                    _step336;

                try {
                  for (_iterator336.s(); !(_step336 = _iterator336.n()).done;) {
                    var _t259 = _step336.value;

                    if ("insert" == _t259.type) {
                      var _i186 = _t259.position.nodeAfter;
                      if (!_i186) continue;
                      if (_i186.is("element", "blockQuote") && _i186.isEmpty) return n.remove(_i186), !0;
                      if (_i186.is("element", "blockQuote") && !e.checkChild(_t259.position, _i186)) return n.unwrap(_i186), !0;

                      if (_i186.is("element")) {
                        var _t260 = n.createRangeIn(_i186);

                        var _iterator337 = _createForOfIteratorHelper(_t260.getItems()),
                            _step337;

                        try {
                          for (_iterator337.s(); !(_step337 = _iterator337.n()).done;) {
                            var _i187 = _step337.value;
                            if (_i187.is("element", "blockQuote") && !e.checkChild(n.createPositionBefore(_i187), _i187)) return n.unwrap(_i187), !0;
                          }
                        } catch (err) {
                          _iterator337.e(err);
                        } finally {
                          _iterator337.f();
                        }
                      }
                    } else if ("remove" == _t259.type) {
                      var _e239 = _t259.position.parent;
                      if (_e239.is("element", "blockQuote") && _e239.isEmpty) return n.remove(_e239), !0;
                    }
                  }
                } catch (err) {
                  _iterator336.e(err);
                } finally {
                  _iterator336.f();
                }

                return !1;
              });
              var n = this.editor.editing.view.document,
                  i = t.model.document.selection,
                  o = t.commands.get("blockQuote");
              this.listenTo(n, "enter", function (e, n) {
                if (!i.isCollapsed || !o.value) return;
                i.getLastPosition().parent.isEmpty && (t.execute("blockQuote"), t.editing.view.scrollToTheSelection(), n.preventDefault(), e.stop());
              }, {
                context: "blockquote"
              }), this.listenTo(n, "delete", function (e, n) {
                if ("backward" != n.direction || !i.isCollapsed || !o.value) return;
                var r = i.getLastPosition().parent;
                r.isEmpty && !r.previousSibling && (t.execute("blockQuote"), t.editing.view.scrollToTheSelection(), n.preventDefault(), e.stop());
              }, {
                context: "blockquote"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "BlockQuoteEditing";
            }
          }, {
            key: "requires",
            get: function get() {
              return [jh, Fh];
            }
          }]);

          return Qg;
        }(r);

        n(234);

        var Xg = /*#__PURE__*/function (_r86) {
          _inherits(Xg, _r86);

          var _super182 = _createSuper(Xg);

          function Xg() {
            _classCallCheck(this, Xg);

            return _super182.apply(this, arguments);
          }

          _createClass(Xg, [{
            key: "init",
            value: function init() {
              var _this267 = this;

              var t = this.editor,
                  e = t.t;
              t.ui.componentFactory.add("blockQuote", function (n) {
                var i = t.commands.get("blockQuote"),
                    o = new nu(n);
                return o.set({
                  label: e("Block quote"),
                  icon: Sd.quote,
                  tooltip: !0,
                  isToggleable: !0
                }), o.bind("isOn", "isEnabled").to(i, "value", "isEnabled"), _this267.listenTo(o, "execute", function () {
                  t.execute("blockQuote"), t.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "BlockQuoteUI";
            }
          }]);

          return Xg;
        }(r);

        var Zg = n(153),
            tm = n.n(Zg);

        var em = /*#__PURE__*/function (_r87) {
          _inherits(em, _r87);

          var _super183 = _createSuper(em);

          function em() {
            _classCallCheck(this, em);

            return _super183.apply(this, arguments);
          }

          _createClass(em, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.ui.componentFactory,
                  n = t.t;
              e.add("ckfinder", function (e) {
                var i = t.commands.get("ckfinder"),
                    o = new nu(e);
                return o.set({
                  label: n("Insert image or file"),
                  icon: tm.a,
                  tooltip: !0
                }), o.bind("isEnabled").to(i), o.on("execute", function () {
                  t.execute("ckfinder"), t.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "CKFinderUI";
            }
          }]);

          return em;
        }(r);

        var nm = /*#__PURE__*/function (_a28) {
          _inherits(nm, _a28);

          var _super184 = _createSuper(nm);

          function nm(t) {
            var _this268;

            _classCallCheck(this, nm);

            _this268 = _super184.call(this, t), _this268.stopListening(_this268.editor.model.document, "change"), _this268.listenTo(_this268.editor.model.document, "change", function () {
              return _this268.refresh();
            }, {
              priority: "low"
            });
            return _this268;
          }

          _createClass(nm, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.commands.get("insertImage"),
                  e = this.editor.commands.get("link");
              this.isEnabled = t.isEnabled || e.isEnabled;
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor,
                  e = this.editor.config.get("ckfinder.openerMethod") || "modal";
              if ("popup" != e && "modal" != e) throw new rn["default"]("ckfinder-unknown-openermethod", t);
              var n = this.editor.config.get("ckfinder.options") || {};
              n.chooseFiles = !0;
              var i = n.onInit;
              n.language || (n.language = t.locale.uiLanguage), n.onInit = function (e) {
                i && i(e), e.on("files:choose", function (n) {
                  var i = n.data.files.toArray(),
                      o = i.filter(function (t) {
                    return !t.isImage();
                  }),
                      r = i.filter(function (t) {
                    return t.isImage();
                  });

                  var _iterator338 = _createForOfIteratorHelper(o),
                      _step338;

                  try {
                    for (_iterator338.s(); !(_step338 = _iterator338.n()).done;) {
                      var _e240 = _step338.value;
                      t.execute("link", _e240.getUrl());
                    }
                  } catch (err) {
                    _iterator338.e(err);
                  } finally {
                    _iterator338.f();
                  }

                  var s = [];

                  var _iterator339 = _createForOfIteratorHelper(r),
                      _step339;

                  try {
                    for (_iterator339.s(); !(_step339 = _iterator339.n()).done;) {
                      var _t261 = _step339.value;

                      var _n231 = _t261.getUrl();

                      s.push(_n231 || e.request("file:getProxyUrl", {
                        file: _t261
                      }));
                    }
                  } catch (err) {
                    _iterator339.e(err);
                  } finally {
                    _iterator339.f();
                  }

                  s.length && im(t, s);
                }), e.on("file:choose:resizedImage", function (e) {
                  var n = e.data.resizedUrl;
                  if (n) im(t, [n]);else {
                    var _e241 = t.plugins.get("Notification"),
                        _n232 = t.locale.t;

                    _e241.showWarning(_n232("Could not obtain resized image URL."), {
                      title: _n232("Selecting resized image failed"),
                      namespace: "ckfinder"
                    });
                  }
                });
              }, window.CKFinder[e](n);
            }
          }]);

          return nm;
        }(a);

        function im(t, e) {
          if (t.commands.get("insertImage").isEnabled) t.execute("insertImage", {
            source: e
          });else {
            var _e242 = t.plugins.get("Notification"),
                _n233 = t.locale.t;

            _e242.showWarning(_n233("Could not insert image at the current position."), {
              title: _n233("Inserting image failed"),
              namespace: "ckfinder"
            });
          }
        }

        var om = /*#__PURE__*/function (_r88) {
          _inherits(om, _r88);

          var _super185 = _createSuper(om);

          function om() {
            _classCallCheck(this, om);

            return _super185.apply(this, arguments);
          }

          _createClass(om, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              if (!t.plugins.has("ImageBlockEditing") && !t.plugins.has("ImageInlineEditing")) throw new rn["default"]("ckfinder-missing-image-plugin", t);
              t.commands.add("ckfinder", new nm(t));
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "CKFinderEditing";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Lu, "LinkEditing"];
            }
          }]);

          return om;
        }(r);

        var rm = /*#__PURE__*/function (_r89) {
          _inherits(rm, _r89);

          var _super186 = _createSuper(rm);

          function rm() {
            _classCallCheck(this, rm);

            return _super186.apply(this, arguments);
          }

          _createClass(rm, [{
            key: "init",
            value: function init() {
              var _this269 = this;

              var t = this.editor,
                  e = t.plugins.get("CloudServices"),
                  n = e.token,
                  i = e.uploadUrl;
              n && (this._uploadGateway = t.plugins.get("CloudServicesCore").createUploadGateway(n, i), t.plugins.get(kg).createUploadAdapter = function (t) {
                return new sm(_this269._uploadGateway, t);
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "CloudServicesUploadAdapter";
            }
          }, {
            key: "requires",
            get: function get() {
              return ["CloudServices", kg];
            }
          }]);

          return rm;
        }(r);

        var sm = /*#__PURE__*/function () {
          function sm(t, e) {
            _classCallCheck(this, sm);

            this.uploadGateway = t, this.loader = e;
          }

          _createClass(sm, [{
            key: "upload",
            value: function upload() {
              var _this270 = this;

              return this.loader.file.then(function (t) {
                return _this270.fileUploader = _this270.uploadGateway.upload(t), _this270.fileUploader.on("progress", function (t, e) {
                  _this270.loader.uploadTotal = e.total, _this270.loader.uploaded = e.uploaded;
                }), _this270.fileUploader.send();
              });
            }
          }, {
            key: "abort",
            value: function abort() {
              this.fileUploader.abort();
            }
          }]);

          return sm;
        }();

        var am = /*#__PURE__*/function (_a29) {
          _inherits(am, _a29);

          var _super187 = _createSuper(am);

          function am() {
            _classCallCheck(this, am);

            return _super187.apply(this, arguments);
          }

          _createClass(am, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = Es(t.document.selection.getSelectedBlocks());
              this.value = !!e && e.is("element", "paragraph"), this.isEnabled = !!e && cm(e, t.schema);
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document;
              e.change(function (i) {
                var o = (t.selection || n.selection).getSelectedBlocks();

                var _iterator340 = _createForOfIteratorHelper(o),
                    _step340;

                try {
                  for (_iterator340.s(); !(_step340 = _iterator340.n()).done;) {
                    var _t262 = _step340.value;
                    !_t262.is("element", "paragraph") && cm(_t262, e.schema) && i.rename(_t262, "paragraph");
                  }
                } catch (err) {
                  _iterator340.e(err);
                } finally {
                  _iterator340.f();
                }
              });
            }
          }]);

          return am;
        }(a);

        function cm(t, e) {
          return e.checkChild(t.parent, "paragraph") && !e.isObject(t);
        }

        var lm = /*#__PURE__*/function (_a30) {
          _inherits(lm, _a30);

          var _super188 = _createSuper(lm);

          function lm() {
            _classCallCheck(this, lm);

            return _super188.apply(this, arguments);
          }

          _createClass(lm, [{
            key: "execute",
            value: function execute(t) {
              var e = this.editor.model;
              var n = t.position;
              e.change(function (t) {
                var i = t.createElement("paragraph");

                if (!e.schema.checkChild(n.parent, i)) {
                  var _o98 = e.schema.findAllowedParent(n, i);

                  if (!_o98) return;
                  n = t.split(n, _o98).position;
                }

                e.insertContent(i, n), t.setSelection(i, "in");
              });
            }
          }]);

          return lm;
        }(a);

        var dm = /*#__PURE__*/function (_r90) {
          _inherits(dm, _r90);

          var _super189 = _createSuper(dm);

          function dm() {
            _classCallCheck(this, dm);

            return _super189.apply(this, arguments);
          }

          _createClass(dm, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model;
              t.commands.add("paragraph", new am(t)), t.commands.add("insertParagraph", new lm(t)), e.schema.register("paragraph", {
                inheritAllFrom: "$block"
              }), t.conversion.elementToElement({
                model: "paragraph",
                view: "p"
              }), t.conversion["for"]("upcast").elementToElement({
                model: function model(t, _ref52) {
                  var e = _ref52.writer;
                  return dm.paragraphLikeElements.has(t.name) ? t.isEmpty ? null : e.createElement("paragraph") : null;
                },
                view: /.+/,
                converterPriority: "low"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Paragraph";
            }
          }]);

          return dm;
        }(r);

        dm.paragraphLikeElements = new Set(["blockquote", "dd", "div", "dt", "h1", "h2", "h3", "h4", "h5", "h6", "li", "p", "td", "th"]);
        n(154);

        var um = /*#__PURE__*/function (_a31) {
          _inherits(um, _a31);

          var _super190 = _createSuper(um);

          function um(t, e) {
            var _this271;

            _classCallCheck(this, um);

            _this271 = _super190.call(this, t), _this271.modelElements = e;
            return _this271;
          }

          _createClass(um, [{
            key: "refresh",
            value: function refresh() {
              var _this272 = this;

              var t = Es(this.editor.model.document.selection.getSelectedBlocks());
              this.value = !!t && this.modelElements.includes(t.name) && t.name, this.isEnabled = !!t && this.modelElements.some(function (e) {
                return hm(t, e, _this272.editor.model.schema);
              });
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var e = this.editor.model,
                  n = e.document,
                  i = t.value;
              e.change(function (t) {
                var o = Array.from(n.selection.getSelectedBlocks()).filter(function (t) {
                  return hm(t, i, e.schema);
                });

                var _iterator341 = _createForOfIteratorHelper(o),
                    _step341;

                try {
                  for (_iterator341.s(); !(_step341 = _iterator341.n()).done;) {
                    var _e243 = _step341.value;
                    _e243.is("element", i) || t.rename(_e243, i);
                  }
                } catch (err) {
                  _iterator341.e(err);
                } finally {
                  _iterator341.f();
                }
              });
            }
          }]);

          return um;
        }(a);

        function hm(t, e, n) {
          return n.checkChild(t.parent, e) && !n.isObject(t);
        }

        var fm = "paragraph";

        var gm = /*#__PURE__*/function (_r91) {
          _inherits(gm, _r91);

          var _super191 = _createSuper(gm);

          function gm(t) {
            var _this273;

            _classCallCheck(this, gm);

            _this273 = _super191.call(this, t), t.config.define("heading", {
              options: [{
                model: "paragraph",
                title: "Paragraph",
                "class": "ck-heading_paragraph"
              }, {
                model: "heading1",
                view: "h2",
                title: "Heading 1",
                "class": "ck-heading_heading1"
              }, {
                model: "heading2",
                view: "h3",
                title: "Heading 2",
                "class": "ck-heading_heading2"
              }, {
                model: "heading3",
                view: "h4",
                title: "Heading 3",
                "class": "ck-heading_heading3"
              }]
            });
            return _this273;
          }

          _createClass(gm, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.config.get("heading.options"),
                  n = [];

              var _iterator342 = _createForOfIteratorHelper(e),
                  _step342;

              try {
                for (_iterator342.s(); !(_step342 = _iterator342.n()).done;) {
                  var _i188 = _step342.value;
                  _i188.model !== fm && (t.model.schema.register(_i188.model, {
                    inheritAllFrom: "$block"
                  }), t.conversion.elementToElement(_i188), n.push(_i188.model));
                }
              } catch (err) {
                _iterator342.e(err);
              } finally {
                _iterator342.f();
              }

              this._addDefaultH1Conversion(t), t.commands.add("heading", new um(t, n));
            }
          }, {
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor,
                  e = t.commands.get("enter"),
                  n = t.config.get("heading.options");
              e && this.listenTo(e, "afterExecute", function (e, i) {
                var o = t.model.document.selection.getFirstPosition().parent;
                n.some(function (t) {
                  return o.is("element", t.model);
                }) && !o.is("element", fm) && 0 === o.childCount && i.writer.rename(o, fm);
              });
            }
          }, {
            key: "_addDefaultH1Conversion",
            value: function _addDefaultH1Conversion(t) {
              t.conversion["for"]("upcast").elementToElement({
                model: "heading1",
                view: "h1",
                converterPriority: Os["default"].get("low") + 1
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "HeadingEditing";
            }
          }, {
            key: "requires",
            get: function get() {
              return [dm];
            }
          }]);

          return gm;
        }(r);

        n(88);

        var mm = /*#__PURE__*/function (_r92) {
          _inherits(mm, _r92);

          var _super192 = _createSuper(mm);

          function mm() {
            _classCallCheck(this, mm);

            return _super192.apply(this, arguments);
          }

          _createClass(mm, [{
            key: "init",
            value: function init() {
              var _this274 = this;

              var t = this.editor,
                  e = t.t,
                  n = function (t) {
                var e = t.t,
                    n = {
                  Paragraph: e("Paragraph"),
                  "Heading 1": e("Heading 1"),
                  "Heading 2": e("Heading 2"),
                  "Heading 3": e("Heading 3"),
                  "Heading 4": e("Heading 4"),
                  "Heading 5": e("Heading 5"),
                  "Heading 6": e("Heading 6")
                };
                return t.config.get("heading.options").map(function (t) {
                  var e = n[t.title];
                  return e && e != t.title && (t.title = e), t;
                });
              }(t),
                  i = e("Choose heading"),
                  o = e("Heading");

              t.ui.componentFactory.add("heading", function (e) {
                var r = {},
                    s = new on["default"](),
                    a = t.commands.get("heading"),
                    c = t.commands.get("paragraph"),
                    l = [a];

                var _iterator343 = _createForOfIteratorHelper(n),
                    _step343;

                try {
                  var _loop7 = function _loop7() {
                    var t = _step343.value;
                    var e = {
                      type: "button",
                      model: new zu({
                        label: t.title,
                        "class": t["class"],
                        withText: !0
                      })
                    };
                    "paragraph" === t.model ? (e.model.bind("isOn").to(c, "value"), e.model.set("commandName", "paragraph"), l.push(c)) : (e.model.bind("isOn").to(a, "value", function (e) {
                      return e === t.model;
                    }), e.model.set({
                      commandName: "heading",
                      commandValue: t.model
                    })), s.add(e), r[t.model] = t.title;
                  };

                  for (_iterator343.s(); !(_step343 = _iterator343.n()).done;) {
                    _loop7();
                  }
                } catch (err) {
                  _iterator343.e(err);
                } finally {
                  _iterator343.f();
                }

                var d = Eu(e);
                return Iu(d, s), d.buttonView.set({
                  isOn: !1,
                  withText: !0,
                  tooltip: o
                }), d.extendTemplate({
                  attributes: {
                    "class": ["ck-heading-dropdown"]
                  }
                }), d.bind("isEnabled").toMany(l, "isEnabled", function () {
                  for (var _len22 = arguments.length, t = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {
                    t[_key22] = arguments[_key22];
                  }

                  return t.some(function (t) {
                    return t;
                  });
                }), d.buttonView.bind("label").to(a, "value", c, "value", function (t, e) {
                  var n = t || e && "paragraph";
                  return r[n] ? r[n] : i;
                }), _this274.listenTo(d, "execute", function (e) {
                  t.execute(e.source.commandName, e.source.commandValue ? {
                    value: e.source.commandValue
                  } : void 0), t.editing.view.focus();
                }), d;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "HeadingUI";
            }
          }]);

          return mm;
        }(r);

        var pm = /*#__PURE__*/function (_r93) {
          _inherits(pm, _r93);

          var _super193 = _createSuper(pm);

          function pm() {
            _classCallCheck(this, pm);

            return _super193.apply(this, arguments);
          }

          _createClass(pm, [{
            key: "init",
            value: function init() {
              var _this275 = this;

              var t = this.editor;

              if (t.plugins.has("BalloonToolbar")) {
                var _e244 = t.plugins.get("BalloonToolbar");

                this.listenTo(_e244, "show", function (e) {
                  (function (t) {
                    var e = t.getSelectedElement();
                    return !(!e || !Gh(e));
                  })(t.editing.view.document.selection) && e.stop();
                }, {
                  priority: "high"
                });
              }

              this._toolbarDefinitions = new Map(), this._balloon = this.editor.plugins.get("ContextualBalloon"), this.on("change:isEnabled", function () {
                _this275._updateToolbarsVisibility();
              }), this.listenTo(t.ui, "update", function () {
                _this275._updateToolbarsVisibility();
              }), this.listenTo(t.ui.focusTracker, "change:isFocused", function () {
                _this275._updateToolbarsVisibility();
              }, {
                priority: "low"
              });
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(pm.prototype), "destroy", this).call(this);

              var _iterator344 = _createForOfIteratorHelper(this._toolbarDefinitions.values()),
                  _step344;

              try {
                for (_iterator344.s(); !(_step344 = _iterator344.n()).done;) {
                  var _t263 = _step344.value;

                  _t263.view.destroy();
                }
              } catch (err) {
                _iterator344.e(err);
              } finally {
                _iterator344.f();
              }
            }
          }, {
            key: "register",
            value: function register(t, _ref53) {
              var e = _ref53.ariaLabel,
                  n = _ref53.items,
                  i = _ref53.getRelatedElement,
                  _ref53$balloonClassNa = _ref53.balloonClassName,
                  o = _ref53$balloonClassNa === void 0 ? "ck-toolbar-container" : _ref53$balloonClassNa;
              if (!n.length) return void Object(rn.logWarning)("widget-toolbar-no-items", {
                toolbarId: t
              });
              var r = this.editor,
                  s = r.t,
                  a = new wu(r.locale);
              if (a.ariaLabel = e || s("Widget toolbar"), this._toolbarDefinitions.has(t)) throw new rn["default"]("widget-toolbar-duplicated", this, {
                toolbarId: t
              });
              a.fillFromConfig(n, r.ui.componentFactory), this._toolbarDefinitions.set(t, {
                view: a,
                getRelatedElement: i,
                balloonClassName: o
              });
            }
          }, {
            key: "_updateToolbarsVisibility",
            value: function _updateToolbarsVisibility() {
              var t = 0,
                  e = null,
                  n = null;

              var _iterator345 = _createForOfIteratorHelper(this._toolbarDefinitions.values()),
                  _step345;

              try {
                for (_iterator345.s(); !(_step345 = _iterator345.n()).done;) {
                  var _i189 = _step345.value;

                  var _o99 = _i189.getRelatedElement(this.editor.editing.view.document.selection);

                  if (this.isEnabled && _o99) {
                    if (this.editor.ui.focusTracker.isFocused) {
                      var _r94 = _o99.getAncestors().length;

                      _r94 > t && (t = _r94, e = _o99, n = _i189);
                    } else this._isToolbarVisible(_i189) && this._hideToolbar(_i189);
                  } else this._isToolbarInBalloon(_i189) && this._hideToolbar(_i189);
                }
              } catch (err) {
                _iterator345.e(err);
              } finally {
                _iterator345.f();
              }

              n && this._showToolbar(n, e);
            }
          }, {
            key: "_hideToolbar",
            value: function _hideToolbar(t) {
              this._balloon.remove(t.view), this.stopListening(this._balloon, "change:visibleView");
            }
          }, {
            key: "_showToolbar",
            value: function _showToolbar(t, e) {
              var _this276 = this;

              this._isToolbarVisible(t) ? bm(this.editor, e) : this._isToolbarInBalloon(t) || (this._balloon.add({
                view: t.view,
                position: km(this.editor, e),
                balloonClassName: t.balloonClassName
              }), this.listenTo(this._balloon, "change:visibleView", function () {
                var _iterator346 = _createForOfIteratorHelper(_this276._toolbarDefinitions.values()),
                    _step346;

                try {
                  for (_iterator346.s(); !(_step346 = _iterator346.n()).done;) {
                    var _t264 = _step346.value;

                    if (_this276._isToolbarVisible(_t264)) {
                      var _e245 = _t264.getRelatedElement(_this276.editor.editing.view.document.selection);

                      bm(_this276.editor, _e245);
                    }
                  }
                } catch (err) {
                  _iterator346.e(err);
                } finally {
                  _iterator346.f();
                }
              }));
            }
          }, {
            key: "_isToolbarVisible",
            value: function _isToolbarVisible(t) {
              return this._balloon.visibleView === t.view;
            }
          }, {
            key: "_isToolbarInBalloon",
            value: function _isToolbarInBalloon(t) {
              return this._balloon.hasView(t.view);
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Qu];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "WidgetToolbarRepository";
            }
          }]);

          return pm;
        }(r);

        function bm(t, e) {
          var n = t.plugins.get("ContextualBalloon"),
              i = km(t, e);
          n.updatePosition(i);
        }

        function km(t, e) {
          var n = t.editing.view,
              i = Uu.defaultPositions;
          return {
            target: n.domConverter.mapViewToDom(e),
            positions: [i.northArrowSouth, i.northArrowSouthWest, i.northArrowSouthEast, i.southArrowNorth, i.southArrowNorthWest, i.southArrowNorthEast, i.viewportStickyNorth]
          };
        }

        var _m = /*#__PURE__*/function () {
          function _m(t) {
            _classCallCheck(this, _m);

            this.set("activeHandlePosition", null), this.set("proposedWidthPercents", null), this.set("proposedWidth", null), this.set("proposedHeight", null), this.set("proposedHandleHostWidth", null), this.set("proposedHandleHostHeight", null), this._options = t, this._referenceCoordinates = null;
          }

          _createClass(_m, [{
            key: "begin",
            value: function begin(t, e, n) {
              var i = new ws(e);
              this.activeHandlePosition = function (t) {
                var e = ["top-left", "top-right", "bottom-right", "bottom-left"];

                for (var _i190 = 0, _e246 = e; _i190 < _e246.length; _i190++) {
                  var _n234 = _e246[_i190];
                  if (t.classList.contains(wm(_n234))) return _n234;
                }
              }(t), this._referenceCoordinates = function (t, e) {
                var n = new ws(t),
                    i = e.split("-"),
                    o = {
                  x: "right" == i[1] ? n.right : n.left,
                  y: "bottom" == i[0] ? n.bottom : n.top
                };
                return o.x += t.ownerDocument.defaultView.scrollX, o.y += t.ownerDocument.defaultView.scrollY, o;
              }(e, function (t) {
                var e = t.split("-"),
                    n = {
                  top: "bottom",
                  bottom: "top",
                  left: "right",
                  right: "left"
                };
                return "".concat(n[e[0]], "-").concat(n[e[1]]);
              }(this.activeHandlePosition)), this.originalWidth = i.width, this.originalHeight = i.height, this.aspectRatio = i.width / i.height;
              var o = n.style.width;
              o && o.match(/^\d+(\.\d*)?%$/) ? this.originalWidthPercents = parseFloat(o) : this.originalWidthPercents = function (t, e) {
                var n = t.parentElement,
                    i = parseFloat(n.ownerDocument.defaultView.getComputedStyle(n).width);
                return e.width / i * 100;
              }(n, i);
            }
          }, {
            key: "update",
            value: function update(t) {
              this.proposedWidth = t.width, this.proposedHeight = t.height, this.proposedWidthPercents = t.widthPercents, this.proposedHandleHostWidth = t.handleHostWidth, this.proposedHandleHostHeight = t.handleHostHeight;
            }
          }]);

          return _m;
        }();

        function wm(t) {
          return "ck-widget__resizer__handle-".concat(t);
        }

        Object(o["default"])(_m, i["default"]);

        var vm = /*#__PURE__*/function (_Pd25) {
          _inherits(vm, _Pd25);

          var _super194 = _createSuper(vm);

          function vm() {
            var _this277;

            _classCallCheck(this, vm);

            _this277 = _super194.call(this);
            var t = _this277.bindTemplate;

            _this277.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-size-view", t.to("_viewPosition", function (t) {
                  return t ? "ck-orientation-".concat(t) : "";
                })],
                style: {
                  display: t["if"]("_isVisible", "none", function (t) {
                    return !t;
                  })
                }
              },
              children: [{
                text: t.to("_label")
              }]
            });

            return _this277;
          }

          _createClass(vm, [{
            key: "_bindToState",
            value: function _bindToState(t, e) {
              this.bind("_isVisible").to(e, "proposedWidth", e, "proposedHeight", function (t, e) {
                return null !== t && null !== e;
              }), this.bind("_label").to(e, "proposedHandleHostWidth", e, "proposedHandleHostHeight", e, "proposedWidthPercents", function (e, n, i) {
                return "px" === t.unit ? "".concat(e, "\xD7").concat(n) : "".concat(i, "%");
              }), this.bind("_viewPosition").to(e, "activeHandlePosition", e, "proposedHandleHostWidth", e, "proposedHandleHostHeight", function (t, e, n) {
                return e < 50 || n < 50 ? "above-center" : t;
              });
            }
          }, {
            key: "_dismiss",
            value: function _dismiss() {
              this.unbind(), this._isVisible = !1;
            }
          }]);

          return vm;
        }(Pd);

        var ym = /*#__PURE__*/function () {
          function ym(t) {
            var _this278 = this;

            _classCallCheck(this, ym);

            this._options = t, this._viewResizerWrapper = null, this.set("isEnabled", !0), this.decorate("begin"), this.decorate("cancel"), this.decorate("commit"), this.decorate("updateSize"), this.on("commit", function (t) {
              _this278.state.proposedWidth || _this278.state.proposedWidthPercents || (_this278._cleanup(), t.stop());
            }, {
              priority: "high"
            }), this.on("change:isEnabled", function () {
              _this278.isEnabled && _this278.redraw();
            });
          }

          _createClass(ym, [{
            key: "attach",
            value: function attach() {
              var _this279 = this;

              var t = this,
                  e = this._options.viewElement;

              this._options.editor.editing.view.change(function (n) {
                var i = n.createUIElement("div", {
                  "class": "ck ck-reset_all ck-widget__resizer"
                }, function (e) {
                  var n = this.toDomElement(e);
                  return t._appendHandles(n), t._appendSizeUI(n), t.on("change:isEnabled", function (t, e, i) {
                    n.style.display = i ? "" : "none";
                  }), n.style.display = t.isEnabled ? "" : "none", n;
                });
                n.insert(n.createPositionAt(e, "end"), i), n.addClass("ck-widget_with-resizer", e), _this279._viewResizerWrapper = i;
              });
            }
          }, {
            key: "begin",
            value: function begin(t) {
              this.state = new _m(this._options), this._sizeView._bindToState(this._options, this.state), this._initialViewWidth = this._options.viewElement.getStyle("width"), this.state.begin(t, this._getHandleHost(), this._getResizeHost());
            }
          }, {
            key: "updateSize",
            value: function updateSize(t) {
              var _this280 = this;

              var e = this._proposeNewSize(t);

              this._options.editor.editing.view.change(function (t) {
                var n = _this280._options.unit || "%",
                    i = ("%" === n ? e.widthPercents : e.width) + n;
                t.setStyle("width", i, _this280._options.viewElement);
              });

              var n = this._getHandleHost(),
                  i = new ws(n);

              e.handleHostWidth = Math.round(i.width), e.handleHostHeight = Math.round(i.height);
              var o = new ws(n);
              e.width = Math.round(o.width), e.height = Math.round(o.height), this.redraw(i), this.state.update(e);
            }
          }, {
            key: "commit",
            value: function commit() {
              var _this281 = this;

              var t = this._options.unit || "%",
                  e = ("%" === t ? this.state.proposedWidthPercents : this.state.proposedWidth) + t;

              this._options.editor.editing.view.change(function () {
                _this281._cleanup(), _this281._options.onCommit(e);
              });
            }
          }, {
            key: "cancel",
            value: function cancel() {
              this._cleanup();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.cancel();
            }
          }, {
            key: "redraw",
            value: function redraw(t) {
              var e = this._domResizerWrapper;
              if (!function (t) {
                return t && t.ownerDocument && t.ownerDocument.contains(t);
              }(e)) return;

              var n = e.parentElement,
                  i = this._getHandleHost(),
                  o = this._viewResizerWrapper,
                  r = [o.getStyle("width"), o.getStyle("height"), o.getStyle("left"), o.getStyle("top")];

              var s;

              if (n.isSameNode(i)) {
                var _e247 = t || new ws(i);

                s = [_e247.width + "px", _e247.height + "px", void 0, void 0];
              } else s = [i.offsetWidth + "px", i.offsetHeight + "px", i.offsetLeft + "px", i.offsetTop + "px"];

              "same" !== mn(r, s) && this._options.editor.editing.view.change(function (t) {
                t.setStyle({
                  width: s[0],
                  height: s[1],
                  left: s[2],
                  top: s[3]
                }, o);
              });
            }
          }, {
            key: "containsHandle",
            value: function containsHandle(t) {
              return this._domResizerWrapper.contains(t);
            }
          }, {
            key: "_cleanup",
            value: function _cleanup() {
              var _this282 = this;

              this._sizeView._dismiss(), this._options.editor.editing.view.change(function (t) {
                t.setStyle("width", _this282._initialViewWidth, _this282._options.viewElement);
              });
            }
          }, {
            key: "_proposeNewSize",
            value: function _proposeNewSize(t) {
              var e = this.state,
                  n = function (t) {
                return {
                  x: t.pageX,
                  y: t.pageY
                };
              }(t),
                  i = !this._options.isCentered || this._options.isCentered(this),
                  o = {
                x: e._referenceCoordinates.x - (n.x + e.originalWidth),
                y: n.y - e.originalHeight - e._referenceCoordinates.y
              };

              i && e.activeHandlePosition.endsWith("-right") && (o.x = n.x - (e._referenceCoordinates.x + e.originalWidth)), i && (o.x *= 2);
              var r = {
                width: Math.abs(e.originalWidth + o.x),
                height: Math.abs(e.originalHeight + o.y)
              };
              r.dominant = r.width / e.aspectRatio > r.height ? "width" : "height", r.max = r[r.dominant];
              var s = {
                width: r.width,
                height: r.height
              };
              return "width" == r.dominant ? s.height = s.width / e.aspectRatio : s.width = s.height * e.aspectRatio, {
                width: Math.round(s.width),
                height: Math.round(s.height),
                widthPercents: Math.min(Math.round(e.originalWidthPercents / e.originalWidth * s.width * 100) / 100, 100)
              };
            }
          }, {
            key: "_getResizeHost",
            value: function _getResizeHost() {
              var t = this._domResizerWrapper.parentElement;
              return this._options.getResizeHost(t);
            }
          }, {
            key: "_getHandleHost",
            value: function _getHandleHost() {
              var t = this._domResizerWrapper.parentElement;
              return this._options.getHandleHost(t);
            }
          }, {
            key: "_domResizerWrapper",
            get: function get() {
              return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper);
            }
          }, {
            key: "_appendHandles",
            value: function _appendHandles(t) {
              var e = ["top-left", "top-right", "bottom-right", "bottom-left"];

              for (var _i191 = 0, _e248 = e; _i191 < _e248.length; _i191++) {
                var _n235 = _e248[_i191];
                t.appendChild(new Dd({
                  tag: "div",
                  attributes: {
                    "class": "ck-widget__resizer__handle ".concat(xm(_n235))
                  }
                }).render());
              }
            }
          }, {
            key: "_appendSizeUI",
            value: function _appendSizeUI(t) {
              this._sizeView = new vm(), this._sizeView.render(), t.appendChild(this._sizeView.element);
            }
          }], [{
            key: "isResizeHandle",
            value: function isResizeHandle(t) {
              return t.classList.contains("ck-widget__resizer__handle");
            }
          }]);

          return ym;
        }();

        function xm(t) {
          return "ck-widget__resizer__handle-".concat(t);
        }

        Object(o["default"])(ym, i["default"]);
        n(237);

        var Cm = /*#__PURE__*/function (_r95) {
          _inherits(Cm, _r95);

          var _super195 = _createSuper(Cm);

          function Cm() {
            _classCallCheck(this, Cm);

            return _super195.apply(this, arguments);
          }

          _createClass(Cm, [{
            key: "init",
            value: function init() {
              var _this283 = this;

              var t = this.editor.editing,
                  e = Ho.window.document;
              this.set("visibleResizer", null), this.set("_activeResizer", null), this._resizers = new Map(), t.view.addObserver(wh), this._observer = Object.create(er), this.listenTo(t.view.document, "mousedown", this._mouseDownListener.bind(this), {
                priority: "high"
              }), this._observer.listenTo(e, "mousemove", this._mouseMoveListener.bind(this)), this._observer.listenTo(e, "mouseup", this._mouseUpListener.bind(this));

              var n = function n() {
                _this283.visibleResizer && _this283.visibleResizer.redraw();
              };

              this._redrawFocusedResizerThrottled = _f(n, 200), this.on("change:visibleResizer", n), this.editor.ui.on("update", this._redrawFocusedResizerThrottled), this.editor.model.document.on("change", function () {
                var _iterator347 = _createForOfIteratorHelper(_this283._resizers),
                    _step347;

                try {
                  for (_iterator347.s(); !(_step347 = _iterator347.n()).done;) {
                    var _step347$value = _slicedToArray(_step347.value, 2),
                        _t265 = _step347$value[0],
                        _e249 = _step347$value[1];

                    _t265.isAttached() || (_this283._resizers["delete"](_t265), _e249.destroy());
                  }
                } catch (err) {
                  _iterator347.e(err);
                } finally {
                  _iterator347.f();
                }
              }, {
                priority: "lowest"
              }), this._observer.listenTo(Ho.window, "resize", this._redrawFocusedResizerThrottled);
              var i = this.editor.editing.view.document.selection;
              i.on("change", function () {
                var t = i.getSelectedElement();
                _this283.visibleResizer = _this283.getResizerByViewElement(t) || null;
              });
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this._observer.stopListening();

              var _iterator348 = _createForOfIteratorHelper(this._resizers.values()),
                  _step348;

              try {
                for (_iterator348.s(); !(_step348 = _iterator348.n()).done;) {
                  var _t266 = _step348.value;

                  _t266.destroy();
                }
              } catch (err) {
                _iterator348.e(err);
              } finally {
                _iterator348.f();
              }

              this._redrawFocusedResizerThrottled.cancel();
            }
          }, {
            key: "attachTo",
            value: function attachTo(t) {
              var e = new ym(t),
                  n = this.editor.plugins;

              if (e.attach(), n.has("WidgetToolbarRepository")) {
                var _t267 = n.get("WidgetToolbarRepository");

                e.on("begin", function () {
                  _t267.forceDisabled("resize");
                }, {
                  priority: "lowest"
                }), e.on("cancel", function () {
                  _t267.clearForceDisabled("resize");
                }, {
                  priority: "highest"
                }), e.on("commit", function () {
                  _t267.clearForceDisabled("resize");
                }, {
                  priority: "highest"
                });
              }

              this._resizers.set(t.viewElement, e);

              var i = this.editor.editing.view.document.selection.getSelectedElement();
              return this.getResizerByViewElement(i) == e && (this.visibleResizer = e), e;
            }
          }, {
            key: "getResizerByViewElement",
            value: function getResizerByViewElement(t) {
              return this._resizers.get(t);
            }
          }, {
            key: "_getResizerByHandle",
            value: function _getResizerByHandle(t) {
              var _iterator349 = _createForOfIteratorHelper(this._resizers.values()),
                  _step349;

              try {
                for (_iterator349.s(); !(_step349 = _iterator349.n()).done;) {
                  var _e250 = _step349.value;
                  if (_e250.containsHandle(t)) return _e250;
                }
              } catch (err) {
                _iterator349.e(err);
              } finally {
                _iterator349.f();
              }
            }
          }, {
            key: "_mouseDownListener",
            value: function _mouseDownListener(t, e) {
              var n = e.domTarget;
              ym.isResizeHandle(n) && (this._activeResizer = this._getResizerByHandle(n), this._activeResizer && (this._activeResizer.begin(n), t.stop(), e.preventDefault()));
            }
          }, {
            key: "_mouseMoveListener",
            value: function _mouseMoveListener(t, e) {
              this._activeResizer && this._activeResizer.updateSize(e);
            }
          }, {
            key: "_mouseUpListener",
            value: function _mouseUpListener() {
              this._activeResizer && (this._activeResizer.commit(), this._activeResizer = null);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "WidgetResize";
            }
          }]);

          return Cm;
        }(r);

        Object(o["default"])(Cm, i["default"]);

        var Tm = /*#__PURE__*/function (_a32) {
          _inherits(Tm, _a32);

          var _super196 = _createSuper(Tm);

          function Tm() {
            _classCallCheck(this, Tm);

            return _super196.apply(this, arguments);
          }

          _createClass(Tm, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);
              this.isEnabled = !!t, this.isEnabled && t.hasAttribute("alt") ? this.value = t.getAttribute("alt") : this.value = !1;
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var e = this.editor,
                  n = e.plugins.get("ImageUtils"),
                  i = e.model,
                  o = n.getClosestSelectedImageElement(i.document.selection);
              i.change(function (e) {
                e.setAttribute("alt", t.newValue, o);
              });
            }
          }]);

          return Tm;
        }(a);

        function Am(t, e) {
          var n = t.createEmptyElement("img"),
              i = "imageBlock" === e ? t.createContainerElement("figure", {
            "class": "image"
          }) : t.createContainerElement("span", {
            "class": "image-inline"
          }, {
            isAllowedInsideAttributeElement: !0
          });
          return t.insert(t.createPositionAt(i, 0), n), i;
        }

        function Em(t, e) {
          if (t.plugins.has("ImageInlineEditing") !== t.plugins.has("ImageBlockEditing")) return {
            name: "img"
          };
          var n = t.plugins.get("ImageUtils");
          return function (t) {
            if (!n.isInlineImageView(t)) return null;
            return (t.findAncestor(n.isBlockImageView) ? "imageBlock" : "imageInline") !== e ? null : {
              name: !0
            };
          };
        }

        function Sm(t, e) {
          var n = Es(e.getSelectedBlocks());
          return !n || t.isObject(n) ? "imageBlock" : n.isEmpty && "listItem" != n.name ? "imageBlock" : "imageInline";
        }

        var Im = /*#__PURE__*/function (_r96) {
          _inherits(Im, _r96);

          var _super197 = _createSuper(Im);

          function Im() {
            _classCallCheck(this, Im);

            return _super197.apply(this, arguments);
          }

          _createClass(Im, [{
            key: "isImage",
            value: function isImage(t) {
              return this.isInlineImage(t) || this.isBlockImage(t);
            }
          }, {
            key: "isInlineImageView",
            value: function isInlineImageView(t) {
              return !!t && t.is("element", "img");
            }
          }, {
            key: "isBlockImageView",
            value: function isBlockImageView(t) {
              return !!t && t.is("element", "figure") && t.hasClass("image");
            }
          }, {
            key: "insertImage",
            value: function insertImage() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
              var i = this.editor,
                  o = i.model,
                  r = o.document.selection;
              n = Om(i, e || r, n), t = _objectSpread(_objectSpread({}, Object.fromEntries(r.getAttributes())), t);

              for (var _e251 in t) {
                o.schema.checkAttribute(n, _e251) || delete t[_e251];
              }

              return o.change(function (i) {
                var s = i.createElement(n, t);
                return e || "imageInline" == n || (e = Zh(r, o)), o.insertContent(s, e), s.parent ? (i.setSelection(s, "on"), s) : null;
              });
            }
          }, {
            key: "getClosestSelectedImageWidget",
            value: function getClosestSelectedImageWidget(t) {
              var e = t.getSelectedElement();
              if (e && this.isImageWidget(e)) return e;
              var n = t.getFirstPosition().parent;

              for (; n;) {
                if (n.is("element") && this.isImageWidget(n)) return n;
                n = n.parent;
              }

              return null;
            }
          }, {
            key: "getClosestSelectedImageElement",
            value: function getClosestSelectedImageElement(t) {
              var e = t.getSelectedElement();
              return this.isImage(e) ? e : t.getFirstPosition().findAncestor("imageBlock");
            }
          }, {
            key: "isImageAllowed",
            value: function isImageAllowed() {
              var t = this.editor.model.document.selection;
              return function (t, e) {
                if ("imageBlock" == Om(t, e)) {
                  var _n236 = function (t, e) {
                    var n = Zh(t, e).start.parent;
                    if (n.isEmpty && !n.is("element", "$root")) return n.parent;
                    return n;
                  }(e, t.model);

                  if (t.model.schema.checkChild(_n236, "imageBlock")) return !0;
                } else if (t.model.schema.checkChild(e.focus, "imageInline")) return !0;

                return !1;
              }(this.editor, t) && function (t) {
                return _toConsumableArray(t.focus.getAncestors()).every(function (t) {
                  return !t.is("element", "imageBlock");
                });
              }(t);
            }
          }, {
            key: "toImageWidget",
            value: function toImageWidget(t, e, n) {
              var _this284 = this;

              e.setCustomProperty("image", !0, t);
              return Kh(t, e, {
                label: function label() {
                  var e = _this284.findViewImgElement(t).getAttribute("alt");

                  return e ? "".concat(e, " ").concat(n) : n;
                }
              });
            }
          }, {
            key: "isImageWidget",
            value: function isImageWidget(t) {
              return !!t.getCustomProperty("image") && Gh(t);
            }
          }, {
            key: "isBlockImage",
            value: function isBlockImage(t) {
              return !!t && t.is("element", "imageBlock");
            }
          }, {
            key: "isInlineImage",
            value: function isInlineImage(t) {
              return !!t && t.is("element", "imageInline");
            }
          }, {
            key: "findViewImgElement",
            value: function findViewImgElement(t) {
              if (this.isInlineImageView(t)) return t;
              var e = this.editor.editing.view;

              var _iterator350 = _createForOfIteratorHelper(e.createRangeIn(t)),
                  _step350;

              try {
                for (_iterator350.s(); !(_step350 = _iterator350.n()).done;) {
                  var _n237 = _step350.value.item;
                  if (this.isInlineImageView(_n237)) return _n237;
                }
              } catch (err) {
                _iterator350.e(err);
              } finally {
                _iterator350.f();
              }
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ImageUtils";
            }
          }]);

          return Im;
        }(r);

        function Om(t, e, n) {
          var i = t.model.schema,
              o = t.config.get("image.insert.type");
          return t.plugins.has("ImageBlockEditing") ? t.plugins.has("ImageInlineEditing") ? n || ("inline" === o ? "imageInline" : "block" === o ? "imageBlock" : e.is("selection") ? Sm(i, e) : i.checkChild(e, "imageInline") ? "imageInline" : "imageBlock") : "imageBlock" : "imageInline";
        }

        var Rm = /*#__PURE__*/function (_r97) {
          _inherits(Rm, _r97);

          var _super198 = _createSuper(Rm);

          function Rm() {
            _classCallCheck(this, Rm);

            return _super198.apply(this, arguments);
          }

          _createClass(Rm, [{
            key: "init",
            value: function init() {
              this.editor.commands.add("imageTextAlternative", new Tm(this.editor));
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Im];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageTextAlternativeEditing";
            }
          }]);

          return Rm;
        }(r);

        n(239), n(56);

        var Mm = /*#__PURE__*/function (_Pd26) {
          _inherits(Mm, _Pd26);

          var _super199 = _createSuper(Mm);

          function Mm(t) {
            var _this285;

            _classCallCheck(this, Mm);

            _this285 = _super199.call(this, t);
            var e = _this285.locale.t;
            _this285.focusTracker = new Ss(), _this285.keystrokes = new Is(), _this285.labeledInput = _this285._createLabeledInputView(), _this285.saveButtonView = _this285._createButton(e("Save"), Sd.check, "ck-button-save"), _this285.saveButtonView.type = "submit", _this285.cancelButtonView = _this285._createButton(e("Cancel"), Sd.cancel, "ck-button-cancel", "cancel"), _this285._focusables = new Md(), _this285._focusCycler = new su({
              focusables: _this285._focusables,
              focusTracker: _this285.focusTracker,
              keystrokeHandler: _this285.keystrokes,
              actions: {
                focusPrevious: "shift + tab",
                focusNext: "tab"
              }
            }), _this285.setTemplate({
              tag: "form",
              attributes: {
                "class": ["ck", "ck-text-alternative-form", "ck-responsive-form"],
                tabindex: "-1"
              },
              children: [_this285.labeledInput, _this285.saveButtonView, _this285.cancelButtonView]
            }), Od(_assertThisInitialized(_this285));
            return _this285;
          }

          _createClass(Mm, [{
            key: "render",
            value: function render() {
              var _this286 = this;

              _get3(_getPrototypeOf(Mm.prototype), "render", this).call(this), this.keystrokes.listenTo(this.element), Rd({
                view: this
              }), [this.labeledInput, this.saveButtonView, this.cancelButtonView].forEach(function (t) {
                _this286._focusables.add(t), _this286.focusTracker.add(t.element);
              });
            }
          }, {
            key: "_createButton",
            value: function _createButton(t, e, n, i) {
              var o = new nu(this.locale);
              return o.set({
                label: t,
                icon: e,
                tooltip: !0
              }), o.extendTemplate({
                attributes: {
                  "class": n
                }
              }), i && o.delegate("execute").to(this, i), o;
            }
          }, {
            key: "_createLabeledInputView",
            value: function _createLabeledInputView() {
              var t = this.locale.t,
                  e = new ju(this.locale, Bu);
              return e.label = t("Text alternative"), e;
            }
          }]);

          return Mm;
        }(Pd);

        function Pm(t) {
          var e = t.editing.view,
              n = Uu.defaultPositions,
              i = t.plugins.get("ImageUtils");
          return {
            target: e.domConverter.viewToDom(i.getClosestSelectedImageWidget(e.document.selection)),
            positions: [n.northArrowSouth, n.northArrowSouthWest, n.northArrowSouthEast, n.southArrowNorth, n.southArrowNorthWest, n.southArrowNorthEast, n.viewportStickyNorth]
          };
        }

        var Nm = /*#__PURE__*/function (_r98) {
          _inherits(Nm, _r98);

          var _super200 = _createSuper(Nm);

          function Nm() {
            _classCallCheck(this, Nm);

            return _super200.apply(this, arguments);
          }

          _createClass(Nm, [{
            key: "init",
            value: function init() {
              this._createButton(), this._createForm();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(Nm.prototype), "destroy", this).call(this), this._form.destroy();
            }
          }, {
            key: "_createButton",
            value: function _createButton() {
              var _this287 = this;

              var t = this.editor,
                  e = t.t;
              t.ui.componentFactory.add("imageTextAlternative", function (n) {
                var i = t.commands.get("imageTextAlternative"),
                    o = new nu(n);
                return o.set({
                  label: e("Change image text alternative"),
                  icon: Sd.lowVision,
                  tooltip: !0
                }), o.bind("isEnabled").to(i, "isEnabled"), _this287.listenTo(o, "execute", function () {
                  _this287._showForm();
                }), o;
              });
            }
          }, {
            key: "_createForm",
            value: function _createForm() {
              var _this288 = this;

              var t = this.editor,
                  e = t.editing.view.document,
                  n = t.plugins.get("ImageUtils");
              this._balloon = this.editor.plugins.get("ContextualBalloon"), this._form = new Mm(t.locale), this._form.render(), this.listenTo(this._form, "submit", function () {
                t.execute("imageTextAlternative", {
                  newValue: _this288._form.labeledInput.fieldView.element.value
                }), _this288._hideForm(!0);
              }), this.listenTo(this._form, "cancel", function () {
                _this288._hideForm(!0);
              }), this._form.keystrokes.set("Esc", function (t, e) {
                _this288._hideForm(!0), e();
              }), this.listenTo(t.ui, "update", function () {
                n.getClosestSelectedImageWidget(e.selection) ? _this288._isVisible && function (t) {
                  var e = t.plugins.get("ContextualBalloon");

                  if (t.plugins.get("ImageUtils").getClosestSelectedImageWidget(t.editing.view.document.selection)) {
                    var _n238 = Pm(t);

                    e.updatePosition(_n238);
                  }
                }(t) : _this288._hideForm(!0);
              }), Id({
                emitter: this._form,
                activator: function activator() {
                  return _this288._isVisible;
                },
                contextElements: [this._balloon.view.element],
                callback: function callback() {
                  return _this288._hideForm();
                }
              });
            }
          }, {
            key: "_showForm",
            value: function _showForm() {
              if (this._isVisible) return;
              var t = this.editor,
                  e = t.commands.get("imageTextAlternative"),
                  n = this._form.labeledInput;
              this._form.disableCssTransitions(), this._isInBalloon || this._balloon.add({
                view: this._form,
                position: Pm(t)
              }), n.fieldView.value = n.fieldView.element.value = e.value || "", this._form.labeledInput.fieldView.select(), this._form.enableCssTransitions();
            }
          }, {
            key: "_hideForm",
            value: function _hideForm(t) {
              this._isInBalloon && (this._form.focusTracker.isFocused && this._form.saveButtonView.focus(), this._balloon.remove(this._form), t && this.editor.editing.view.focus());
            }
          }, {
            key: "_isVisible",
            get: function get() {
              return this._balloon.visibleView === this._form;
            }
          }, {
            key: "_isInBalloon",
            get: function get() {
              return this._balloon.hasView(this._form);
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Qu];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageTextAlternativeUI";
            }
          }]);

          return Nm;
        }(r);

        var Dm = /*#__PURE__*/function (_r99) {
          _inherits(Dm, _r99);

          var _super201 = _createSuper(Dm);

          function Dm() {
            _classCallCheck(this, Dm);

            return _super201.apply(this, arguments);
          }

          _createClass(Dm, null, [{
            key: "requires",
            get: function get() {
              return [Rm, Nm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageTextAlternative";
            }
          }]);

          return Dm;
        }(r);

        function jm(t, e) {
          return function (t) {
            t.on("attribute:srcset:".concat(e), n);
          };

          function n(e, n, i) {
            if (!i.consumable.consume(n.item, e.name)) return;
            var o = i.writer,
                r = i.mapper.toViewElement(n.item),
                s = t.findViewImgElement(r);

            if (null === n.attributeNewValue) {
              var _t268 = n.attributeOldValue;
              _t268.data && (o.removeAttribute("srcset", s), o.removeAttribute("sizes", s), _t268.width && o.removeAttribute("width", s));
            } else {
              var _t269 = n.attributeNewValue;
              _t269.data && (o.setAttribute("srcset", _t269.data, s), o.setAttribute("sizes", "100vw", s), _t269.width && o.setAttribute("width", _t269.width, s));
            }
          }
        }

        function Bm(t, e, n) {
          return function (t) {
            t.on("attribute:".concat(n, ":").concat(e), i);
          };

          function i(e, n, i) {
            if (!i.consumable.consume(n.item, e.name)) return;
            var o = i.writer,
                r = i.mapper.toViewElement(n.item),
                s = t.findViewImgElement(r);
            o.setAttribute(n.attributeKey, n.attributeNewValue || "", s);
          }
        }

        var Lm = /*#__PURE__*/function (_or8) {
          _inherits(Lm, _or8);

          var _super202 = _createSuper(Lm);

          function Lm() {
            _classCallCheck(this, Lm);

            return _super202.apply(this, arguments);
          }

          _createClass(Lm, [{
            key: "observe",
            value: function observe(t) {
              var _this289 = this;

              this.listenTo(t, "load", function (t, e) {
                var n = e.target;
                _this289.checkShouldIgnoreEventFromTarget(n) || "IMG" == n.tagName && _this289._fireEvents(e);
              }, {
                useCapture: !0
              });
            }
          }, {
            key: "_fireEvents",
            value: function _fireEvents(t) {
              this.isEnabled && (this.document.fire("layoutChanged"), this.document.fire("imageLoaded", t));
            }
          }]);

          return Lm;
        }(or);

        var zm = /*#__PURE__*/function (_a33) {
          _inherits(zm, _a33);

          var _super203 = _createSuper(zm);

          function zm(t) {
            var _this290;

            _classCallCheck(this, zm);

            _this290 = _super203.call(this, t);
            var e = t.config.get("image.insert.type");
            t.plugins.has("ImageBlockEditing") || "block" === e && Object(rn.logWarning)("image-block-plugin-required"), t.plugins.has("ImageInlineEditing") || "inline" === e && Object(rn.logWarning)("image-inline-plugin-required");
            return _this290;
          }

          _createClass(zm, [{
            key: "refresh",
            value: function refresh() {
              this.isEnabled = this.editor.plugins.get("ImageUtils").isImageAllowed();
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var _this291 = this;

              var e = cn(t.source),
                  n = this.editor.model.document.selection,
                  i = this.editor.plugins.get("ImageUtils"),
                  o = Object.fromEntries(n.getAttributes());
              e.forEach(function (t, e) {
                var r = n.getSelectedElement();

                if ("string" == typeof t && (t = {
                  src: t
                }), e && r && i.isImage(r)) {
                  var _e252 = _this291.editor.model.createPositionAfter(r);

                  i.insertImage(_objectSpread(_objectSpread({}, t), o), _e252);
                } else i.insertImage(_objectSpread(_objectSpread({}, t), o));
              });
            }
          }]);

          return zm;
        }(a);

        var Fm = /*#__PURE__*/function (_r100) {
          _inherits(Fm, _r100);

          var _super204 = _createSuper(Fm);

          function Fm() {
            _classCallCheck(this, Fm);

            return _super204.apply(this, arguments);
          }

          _createClass(Fm, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.conversion;
              t.editing.view.addObserver(Lm), e["for"]("upcast").attributeToAttribute({
                view: {
                  name: "img",
                  key: "alt"
                },
                model: "alt"
              }).attributeToAttribute({
                view: {
                  name: "img",
                  key: "srcset"
                },
                model: {
                  key: "srcset",
                  value: function value(t) {
                    var e = {
                      data: t.getAttribute("srcset")
                    };
                    return t.hasAttribute("width") && (e.width = t.getAttribute("width")), e;
                  }
                }
              });
              var n = new zm(t);
              t.commands.add("insertImage", n), t.commands.add("imageInsert", n);
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Im];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageEditing";
            }
          }]);

          return Fm;
        }(r);

        var Vm = /*#__PURE__*/function (_a34) {
          _inherits(Vm, _a34);

          var _super205 = _createSuper(Vm);

          function Vm(t, e) {
            var _this292;

            _classCallCheck(this, Vm);

            _this292 = _super205.call(this, t), _this292._modelElementName = e;
            return _this292;
          }

          _createClass(Vm, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.plugins.get("ImageUtils"),
                  e = t.getClosestSelectedImageElement(this.editor.model.document.selection);
              "imageBlock" === this._modelElementName ? this.isEnabled = t.isInlineImage(e) : this.isEnabled = t.isBlockImage(e);
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this293 = this;

              var t = this.editor,
                  e = this.editor.model,
                  n = t.plugins.get("ImageUtils"),
                  i = n.getClosestSelectedImageElement(e.document.selection),
                  o = Object.fromEntries(i.getAttributes());
              return o.src || o.uploadId ? e.change(function (t) {
                var r = Array.from(e.markers).filter(function (t) {
                  return t.getRange().containsItem(i);
                }),
                    s = n.insertImage(o, e.createSelection(i, "on"), _this293._modelElementName);
                if (!s) return null;
                var a = t.createRangeOn(s);

                var _iterator351 = _createForOfIteratorHelper(r),
                    _step351;

                try {
                  for (_iterator351.s(); !(_step351 = _iterator351.n()).done;) {
                    var _e253 = _step351.value;

                    var _n239 = _e253.getRange(),
                        _i192 = "$graveyard" != _n239.root.rootName ? _n239.getJoined(a, !0) : a;

                    t.updateMarker(_e253, {
                      range: _i192
                    });
                  }
                } catch (err) {
                  _iterator351.e(err);
                } finally {
                  _iterator351.f();
                }

                return {
                  oldElement: i,
                  newElement: s
                };
              }) : null;
            }
          }]);

          return Vm;
        }(a);

        var Um = /*#__PURE__*/function (_r101) {
          _inherits(Um, _r101);

          var _super206 = _createSuper(Um);

          function Um() {
            _classCallCheck(this, Um);

            return _super206.apply(this, arguments);
          }

          _createClass(Um, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.register("imageBlock", {
                isObject: !0,
                isBlock: !0,
                allowWhere: "$block",
                allowAttributes: ["alt", "src", "srcset"]
              }), this._setupConversion(), t.plugins.has("ImageInlineEditing") && (t.commands.add("imageTypeBlock", new Vm(this.editor, "imageBlock")), this._setupClipboardIntegration());
            }
          }, {
            key: "_setupConversion",
            value: function _setupConversion() {
              var t = this.editor,
                  e = t.t,
                  n = t.conversion,
                  i = t.plugins.get("ImageUtils");
              n["for"]("dataDowncast").elementToElement({
                model: "imageBlock",
                view: function view(t, _ref54) {
                  var e = _ref54.writer;
                  return Am(e, "imageBlock");
                }
              }), n["for"]("editingDowncast").elementToElement({
                model: "imageBlock",
                view: function view(t, _ref55) {
                  var n = _ref55.writer;
                  return i.toImageWidget(Am(n, "imageBlock"), n, e("image widget"));
                }
              }), n["for"]("downcast").add(Bm(i, "imageBlock", "src")).add(Bm(i, "imageBlock", "alt")).add(jm(i, "imageBlock")), n["for"]("upcast").elementToElement({
                view: Em(t, "imageBlock"),
                model: function model(t, _ref56) {
                  var e = _ref56.writer;
                  return e.createElement("imageBlock", t.hasAttribute("src") ? {
                    src: t.getAttribute("src")
                  } : null);
                }
              }).add(function (t) {
                return function (t) {
                  t.on("element:figure", e);
                };

                function e(e, n, i) {
                  if (!i.consumable.test(n.viewItem, {
                    name: !0,
                    classes: "image"
                  })) return;
                  var o = t.findViewImgElement(n.viewItem);
                  if (!o || !i.consumable.test(o, {
                    name: !0
                  })) return;
                  var r = Es(i.convertItem(o, n.modelCursor).modelRange.getItems());
                  r && (i.consumable.consume(n.viewItem, {
                    name: !0,
                    classes: "image"
                  }), i.convertChildren(n.viewItem, r), i.updateConversionResult(r, n));
                }
              }(i));
            }
          }, {
            key: "_setupClipboardIntegration",
            value: function _setupClipboardIntegration() {
              var t = this.editor,
                  e = t.model,
                  n = t.editing.view,
                  i = t.plugins.get("ImageUtils");
              this.listenTo(t.plugins.get("ClipboardPipeline"), "inputTransformation", function (o, r) {
                var s = Array.from(r.content.getChildren());
                var a;
                if (!s.every(i.isInlineImageView)) return;
                a = r.targetRanges ? t.editing.mapper.toModelRange(r.targetRanges[0]) : e.document.selection.getFirstRange();
                var c = e.createSelection(a);

                if ("imageBlock" === Sm(e.schema, c)) {
                  var _t270 = new vh(n.document),
                      _e254 = s.map(function (e) {
                    return _t270.createElement("figure", {
                      "class": "image"
                    }, e);
                  });

                  r.content = _t270.createDocumentFragment(_e254);
                }
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Fm, Im, Rh];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageBlockEditing";
            }
          }]);

          return Um;
        }(r);

        n(70);

        var Hm = /*#__PURE__*/function (_r102) {
          _inherits(Hm, _r102);

          var _super207 = _createSuper(Hm);

          function Hm() {
            _classCallCheck(this, Hm);

            return _super207.apply(this, arguments);
          }

          _createClass(Hm, null, [{
            key: "requires",
            get: function get() {
              return [Um, pf, Dm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageBlock";
            }
          }]);

          return Hm;
        }(r);

        var qm = /*#__PURE__*/function (_r103) {
          _inherits(qm, _r103);

          var _super208 = _createSuper(qm);

          function qm() {
            _classCallCheck(this, qm);

            return _super208.apply(this, arguments);
          }

          _createClass(qm, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model.schema;
              e.register("imageInline", {
                isObject: !0,
                isInline: !0,
                allowWhere: "$text",
                allowAttributes: ["alt", "src", "srcset"]
              }), e.addChildCheck(function (t, e) {
                if (t.endsWith("caption") && "imageInline" === e.name) return !1;
              }), this._setupConversion(), t.plugins.has("ImageBlockEditing") && (t.commands.add("imageTypeInline", new Vm(this.editor, "imageInline")), this._setupClipboardIntegration());
            }
          }, {
            key: "_setupConversion",
            value: function _setupConversion() {
              var t = this.editor,
                  e = t.t,
                  n = t.conversion,
                  i = t.plugins.get("ImageUtils");
              n["for"]("dataDowncast").elementToElement({
                model: "imageInline",
                view: function view(t, _ref57) {
                  var e = _ref57.writer;
                  return e.createEmptyElement("img");
                }
              }), n["for"]("editingDowncast").elementToElement({
                model: "imageInline",
                view: function view(t, _ref58) {
                  var n = _ref58.writer;
                  return i.toImageWidget(Am(n, "imageInline"), n, e("image widget"));
                }
              }), n["for"]("downcast").add(Bm(i, "imageInline", "src")).add(Bm(i, "imageInline", "alt")).add(jm(i, "imageInline")), n["for"]("upcast").elementToElement({
                view: Em(t, "imageInline"),
                model: function model(t, _ref59) {
                  var e = _ref59.writer;
                  return e.createElement("imageInline", t.hasAttribute("src") ? {
                    src: t.getAttribute("src")
                  } : null);
                }
              });
            }
          }, {
            key: "_setupClipboardIntegration",
            value: function _setupClipboardIntegration() {
              var t = this.editor,
                  e = t.model,
                  n = t.editing.view,
                  i = t.plugins.get("ImageUtils");
              this.listenTo(t.plugins.get("ClipboardPipeline"), "inputTransformation", function (o, r) {
                var s = Array.from(r.content.getChildren());
                var a;
                if (!s.every(i.isBlockImageView)) return;
                a = r.targetRanges ? t.editing.mapper.toModelRange(r.targetRanges[0]) : e.document.selection.getFirstRange();
                var c = e.createSelection(a);

                if ("imageInline" === Sm(e.schema, c)) {
                  var _t271 = new vh(n.document),
                      _e255 = s.map(function (e) {
                    return 1 === e.childCount ? (Array.from(e.getAttributes()).forEach(function (n) {
                      return _t271.setAttribute.apply(_t271, _toConsumableArray(n).concat([i.findViewImgElement(e)]));
                    }), e.getChild(0)) : e;
                  });

                  r.content = _t271.createDocumentFragment(_e255);
                }
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Fm, Im, Rh];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageInlineEditing";
            }
          }]);

          return qm;
        }(r);

        var Wm = /*#__PURE__*/function (_r104) {
          _inherits(Wm, _r104);

          var _super209 = _createSuper(Wm);

          function Wm() {
            _classCallCheck(this, Wm);

            return _super209.apply(this, arguments);
          }

          _createClass(Wm, null, [{
            key: "requires",
            get: function get() {
              return [qm, pf, Dm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageInline";
            }
          }]);

          return Wm;
        }(r);

        function $m(t) {
          var _iterator352 = _createForOfIteratorHelper(t.getChildren()),
              _step352;

          try {
            for (_iterator352.s(); !(_step352 = _iterator352.n()).done;) {
              var _e256 = _step352.value;
              if (_e256 && _e256.is("element", "caption")) return _e256;
            }
          } catch (err) {
            _iterator352.e(err);
          } finally {
            _iterator352.f();
          }

          return null;
        }

        function Ym(t, e) {
          var n = e.getFirstPosition().findAncestor("caption");
          return n && t.isBlockImage(n.parent) ? n : null;
        }

        var Jm = /*#__PURE__*/function (_a35) {
          _inherits(Jm, _a35);

          var _super210 = _createSuper(Jm);

          function Jm() {
            _classCallCheck(this, Jm);

            return _super210.apply(this, arguments);
          }

          _createClass(Jm, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor,
                  e = t.plugins.get("ImageUtils");
              if (!t.plugins.has(Um)) return this.isEnabled = !1, void (this.value = !1);
              var n = t.model.document.selection,
                  i = n.getSelectedElement();

              if (!i) {
                var _t272 = Ym(e, n);

                return this.isEnabled = !!_t272, void (this.value = !!_t272);
              }

              this.isEnabled = this.editor.plugins.get("ImageUtils").isImage(i), this.isEnabled ? this.value = !!$m(i) : this.value = !1;
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this294 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = t.focusCaptionOnShow;
              this.editor.model.change(function (t) {
                _this294.value ? _this294._hideImageCaption(t) : _this294._showImageCaption(t, e);
              });
            }
          }, {
            key: "_showImageCaption",
            value: function _showImageCaption(t, e) {
              var n = this.editor.model.document.selection,
                  i = this.editor.plugins.get("ImageCaptionEditing");
              var o = n.getSelectedElement();

              var r = i._getSavedCaption(o);

              this.editor.plugins.get("ImageUtils").isInlineImage(o) && (this.editor.execute("imageTypeBlock"), o = n.getSelectedElement());
              var s = r || t.createElement("caption");
              t.append(s, o), e && t.setSelection(s, "in");
            }
          }, {
            key: "_hideImageCaption",
            value: function _hideImageCaption(t) {
              var e = this.editor,
                  n = e.model.document.selection,
                  i = e.plugins.get("ImageCaptionEditing"),
                  o = e.plugins.get("ImageUtils");
              var r,
                  s = n.getSelectedElement();
              s ? r = $m(s) : s = (r = Ym(o, n)).parent, i._saveCaption(s, r), t.setSelection(s, "on"), t.remove(r);
            }
          }]);

          return Jm;
        }(a);

        var Gm = /*#__PURE__*/function (_r105) {
          _inherits(Gm, _r105);

          var _super211 = _createSuper(Gm);

          function Gm(t) {
            var _this295;

            _classCallCheck(this, Gm);

            _this295 = _super211.call(this, t), _this295._savedCaptionsMap = new WeakMap();
            return _this295;
          }

          _createClass(Gm, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model.schema;
              e.isRegistered("caption") ? e.extend("caption", {
                allowIn: "imageBlock"
              }) : e.register("caption", {
                allowIn: "imageBlock",
                allowContentOf: "$block",
                isLimit: !0
              }), t.commands.add("toggleImageCaption", new Jm(this.editor)), this._setupConversion(), this._setupImageTypeCommandsIntegration();
            }
          }, {
            key: "_setupConversion",
            value: function _setupConversion() {
              var t = this.editor,
                  e = t.editing.view,
                  n = t.plugins.get("ImageUtils"),
                  i = t.t;
              t.conversion["for"]("upcast").elementToElement({
                view: function view(t) {
                  return function (t, e) {
                    return "figcaption" == e.name && t.isBlockImageView(e.parent) ? {
                      name: !0
                    } : null;
                  }(n, t);
                },
                model: "caption"
              }), t.conversion["for"]("dataDowncast").elementToElement({
                model: "caption",
                view: function view(t, _ref60) {
                  var e = _ref60.writer;
                  return n.isBlockImage(t.parent) ? e.createContainerElement("figcaption") : null;
                }
              }), t.conversion["for"]("editingDowncast").elementToElement({
                model: "caption",
                view: function view(t, _ref61) {
                  var o = _ref61.writer;
                  if (!n.isBlockImage(t.parent)) return null;
                  var r = o.createEditableElement("figcaption");
                  return o.setCustomProperty("imageCaption", !0, r), ih({
                    view: e,
                    element: r,
                    text: i("Enter image caption"),
                    keepOnFocus: !0
                  }), Xh(r, o);
                }
              }), t.editing.mapper.on("modelToViewPosition", Km(e)), t.data.mapper.on("modelToViewPosition", Km(e));
            }
          }, {
            key: "_setupImageTypeCommandsIntegration",
            value: function _setupImageTypeCommandsIntegration() {
              var _this296 = this;

              var t = this.editor,
                  e = t.plugins.get("ImageUtils"),
                  n = t.commands.get("imageTypeInline"),
                  i = t.commands.get("imageTypeBlock"),
                  o = function o(t) {
                if (!t["return"]) return;
                var _t$return = t["return"],
                    n = _t$return.oldElement,
                    i = _t$return.newElement;
                if (!n) return;

                if (e.isBlockImage(n)) {
                  var _t273 = $m(n);

                  if (_t273) return void _this296._saveCaption(i, _t273);
                }

                var o = _this296._getSavedCaption(n);

                o && _this296._saveCaption(i, o);
              };

              n && this.listenTo(n, "execute", o, {
                priority: "low"
              }), i && this.listenTo(i, "execute", o, {
                priority: "low"
              });
            }
          }, {
            key: "_getSavedCaption",
            value: function _getSavedCaption(t) {
              var e = this._savedCaptionsMap.get(t);

              return e ? Ys.fromJSON(e) : null;
            }
          }, {
            key: "_saveCaption",
            value: function _saveCaption(t, e) {
              this._savedCaptionsMap.set(t, e.toJSON());
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Im];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageCaptionEditing";
            }
          }]);

          return Gm;
        }(r);

        function Km(t) {
          return function (e, n) {
            var i = n.modelPosition,
                o = i.parent;
            if (!o.is("element", "imageBlock")) return;
            var r = n.mapper.toViewElement(o);
            n.viewPosition = t.createPositionAt(r, i.offset + 1);
          };
        }

        var Qm = /*#__PURE__*/function (_r106) {
          _inherits(Qm, _r106);

          var _super212 = _createSuper(Qm);

          function Qm() {
            _classCallCheck(this, Qm);

            return _super212.apply(this, arguments);
          }

          _createClass(Qm, [{
            key: "init",
            value: function init() {
              var _this297 = this;

              var t = this.editor,
                  e = t.editing.view,
                  n = t.plugins.get("ImageUtils"),
                  i = t.t;
              t.ui.componentFactory.add("toggleImageCaption", function (o) {
                var r = t.commands.get("toggleImageCaption"),
                    s = new nu(o);
                return s.set({
                  icon: Sd.caption,
                  tooltip: !0,
                  isToggleable: !0
                }), s.bind("isOn", "isEnabled").to(r, "value", "isEnabled"), s.bind("label").to(r, "value", function (t) {
                  return i(t ? "Toggle caption off" : "Toggle caption on");
                }), _this297.listenTo(s, "execute", function () {
                  t.execute("toggleImageCaption", {
                    focusCaptionOnShow: !0
                  });
                  var i = Ym(n, t.model.document.selection);

                  if (i) {
                    var _n240 = t.editing.mapper.toViewElement(i);

                    e.scrollToTheSelection(), e.change(function (t) {
                      t.addClass("image__caption_highlighted", _n240);
                    });
                  }
                }), s;
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Im];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageCaptionUI";
            }
          }]);

          return Qm;
        }(r);

        n(243);

        var Xm = /*#__PURE__*/function (_a36) {
          _inherits(Xm, _a36);

          var _super213 = _createSuper(Xm);

          function Xm() {
            _classCallCheck(this, Xm);

            return _super213.apply(this, arguments);
          }

          _createClass(Xm, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor,
                  e = t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);
              this.isEnabled = !!e, e && e.hasAttribute("width") ? this.value = {
                width: e.getAttribute("width"),
                height: null
              } : this.value = null;
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var e = this.editor,
                  n = e.model,
                  i = e.plugins.get("ImageUtils").getClosestSelectedImageElement(n.document.selection);
              this.value = {
                width: t.width,
                height: null
              }, i && n.change(function (e) {
                e.setAttribute("width", t.width, i);
              });
            }
          }]);

          return Xm;
        }(a);

        var Zm = /*#__PURE__*/function (_r107) {
          _inherits(Zm, _r107);

          var _super214 = _createSuper(Zm);

          function Zm(t) {
            var _this298;

            _classCallCheck(this, Zm);

            _this298 = _super214.call(this, t), t.config.define("image", {
              resizeUnit: "%",
              resizeOptions: [{
                name: "resizeImage:original",
                value: null,
                icon: "original"
              }, {
                name: "resizeImage:25",
                value: "25",
                icon: "small"
              }, {
                name: "resizeImage:50",
                value: "50",
                icon: "medium"
              }, {
                name: "resizeImage:75",
                value: "75",
                icon: "large"
              }]
            });
            return _this298;
          }

          _createClass(Zm, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = new Xm(t);
              this._registerSchema(), this._registerConverters("imageBlock"), this._registerConverters("imageInline"), t.commands.add("resizeImage", e), t.commands.add("imageResize", e);
            }
          }, {
            key: "_registerSchema",
            value: function _registerSchema() {
              this.editor.plugins.has("ImageBlockEditing") && this.editor.model.schema.extend("imageBlock", {
                allowAttributes: "width"
              }), this.editor.plugins.has("ImageInlineEditing") && this.editor.model.schema.extend("imageInline", {
                allowAttributes: "width"
              });
            }
          }, {
            key: "_registerConverters",
            value: function _registerConverters(t) {
              var e = this.editor;
              e.conversion["for"]("downcast").add(function (e) {
                return e.on("attribute:width:".concat(t), function (t, e, n) {
                  if (!n.consumable.consume(e.item, t.name)) return;
                  var i = n.writer,
                      o = n.mapper.toViewElement(e.item);
                  null !== e.attributeNewValue ? (i.setStyle("width", e.attributeNewValue, o), i.addClass("image_resized", o)) : (i.removeStyle("width", o), i.removeClass("image_resized", o));
                });
              }), e.conversion["for"]("upcast").attributeToAttribute({
                view: {
                  name: "imageBlock" === t ? "figure" : "img",
                  styles: {
                    width: /.+/
                  }
                },
                model: {
                  key: "width",
                  value: function value(t) {
                    return t.getStyle("width");
                  }
                }
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Im];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageResizeEditing";
            }
          }]);

          return Zm;
        }(r);

        var tp = {
          small: Sd.objectSizeSmall,
          medium: Sd.objectSizeMedium,
          large: Sd.objectSizeLarge,
          original: Sd.objectSizeFull
        };

        var ep = /*#__PURE__*/function (_r108) {
          _inherits(ep, _r108);

          var _super215 = _createSuper(ep);

          function ep(t) {
            var _this299;

            _classCallCheck(this, ep);

            _this299 = _super215.call(this, t), _this299._resizeUnit = t.config.get("image.resizeUnit");
            return _this299;
          }

          _createClass(ep, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.config.get("image.resizeOptions"),
                  n = t.commands.get("resizeImage");
              this.bind("isEnabled").to(n);

              var _iterator353 = _createForOfIteratorHelper(e),
                  _step353;

              try {
                for (_iterator353.s(); !(_step353 = _iterator353.n()).done;) {
                  var _t274 = _step353.value;

                  this._registerImageResizeButton(_t274);
                }
              } catch (err) {
                _iterator353.e(err);
              } finally {
                _iterator353.f();
              }

              this._registerImageResizeDropdown(e);
            }
          }, {
            key: "_registerImageResizeButton",
            value: function _registerImageResizeButton(t) {
              var _this300 = this;

              var e = this.editor,
                  n = t.name,
                  i = t.value,
                  o = t.icon,
                  r = i ? i + this._resizeUnit : null;
              e.ui.componentFactory.add(n, function (n) {
                var i = new nu(n),
                    s = e.commands.get("resizeImage"),
                    a = _this300._getOptionLabelValue(t, !0);

                if (!tp[o]) throw new rn["default"]("imageresizebuttons-missing-icon", e, t);
                return i.set({
                  label: a,
                  icon: tp[o],
                  tooltip: a,
                  isToggleable: !0
                }), i.bind("isEnabled").to(_this300), i.bind("isOn").to(s, "value", np(r)), _this300.listenTo(i, "execute", function () {
                  e.execute("resizeImage", {
                    width: r
                  });
                }), i;
              });
            }
          }, {
            key: "_registerImageResizeDropdown",
            value: function _registerImageResizeDropdown(t) {
              var _this301 = this;

              var e = this.editor,
                  n = e.t,
                  i = t.find(function (t) {
                return !t.value;
              }),
                  o = function (_o100) {
                function o(_x47) {
                  return _o100.apply(this, arguments);
                }

                o.toString = function () {
                  return _o100.toString();
                };

                return o;
              }(function (o) {
                var r = e.commands.get("resizeImage"),
                    s = Eu(o, du),
                    a = s.buttonView;
                return a.set({
                  tooltip: n("Resize image"),
                  commandValue: i.value,
                  icon: tp.medium,
                  isToggleable: !0,
                  label: _this301._getOptionLabelValue(i),
                  withText: !0,
                  "class": "ck-resize-image-button"
                }), a.bind("label").to(r, "value", function (t) {
                  return t && t.width ? t.width : _this301._getOptionLabelValue(i);
                }), s.bind("isOn").to(r), s.bind("isEnabled").to(_this301), Iu(s, _this301._getResizeDropdownListItemDefinitions(t, r)), s.listView.ariaLabel = n("Image resize list"), _this301.listenTo(s, "execute", function (t) {
                  e.execute(t.source.commandName, {
                    width: t.source.commandValue
                  }), e.editing.view.focus();
                }), s;
              });

              e.ui.componentFactory.add("resizeImage", o), e.ui.componentFactory.add("imageResize", o);
            }
          }, {
            key: "_getOptionLabelValue",
            value: function _getOptionLabelValue(t, e) {
              var n = this.editor.t;
              return t.label ? t.label : e ? t.value ? n("Resize image to %0", t.value + this._resizeUnit) : n("Resize image to the original size") : t.value ? t.value + this._resizeUnit : n("Original");
            }
          }, {
            key: "_getResizeDropdownListItemDefinitions",
            value: function _getResizeDropdownListItemDefinitions(t, e) {
              var _this302 = this;

              var n = new on["default"]();
              return t.map(function (t) {
                var i = t.value ? t.value + _this302._resizeUnit : null,
                    o = {
                  type: "button",
                  model: new zu({
                    commandName: "resizeImage",
                    commandValue: i,
                    label: _this302._getOptionLabelValue(t),
                    withText: !0,
                    icon: null
                  })
                };
                o.model.bind("isOn").to(e, "value", np(i)), n.add(o);
              }), n;
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Zm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageResizeButtons";
            }
          }]);

          return ep;
        }(r);

        function np(t) {
          return function (e) {
            return null === t && e === t || e && e.width === t;
          };
        }

        var ip = "figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",
            op = /(image|image-inline)/,
            rp = "image_resized";

        var sp = /*#__PURE__*/function (_r109) {
          _inherits(sp, _r109);

          var _super216 = _createSuper(sp);

          function sp() {
            _classCallCheck(this, sp);

            return _super216.apply(this, arguments);
          }

          _createClass(sp, [{
            key: "init",
            value: function init() {
              var t = this.editor.commands.get("resizeImage");
              this.bind("isEnabled").to(t), this._setupResizerCreator();
            }
          }, {
            key: "_setupResizerCreator",
            value: function _setupResizerCreator() {
              var _this303 = this;

              var t = this.editor,
                  e = t.editing.view;
              e.addObserver(Lm), this.listenTo(e.document, "imageLoaded", function (n, i) {
                if (!i.target.matches(ip)) return;
                var o = t.editing.view.domConverter,
                    r = o.domToView(i.target).findAncestor({
                  classes: op
                });

                var s = _this303.editor.plugins.get(Cm).getResizerByViewElement(r);

                if (s) return void s.redraw();
                var a = t.editing.mapper,
                    c = a.toModelElement(r);
                (s = t.plugins.get(Cm).attachTo({
                  unit: t.config.get("image.resizeUnit"),
                  modelElement: c,
                  viewElement: r,
                  editor: t,
                  getHandleHost: function getHandleHost(t) {
                    return t.querySelector("img");
                  },
                  getResizeHost: function getResizeHost() {
                    return o.viewToDom(a.toViewElement(c.parent));
                  },
                  isCentered: function isCentered() {
                    var t = c.getAttribute("imageStyle");
                    return !t || "block" == t || "alignCenter" == t;
                  },
                  onCommit: function onCommit(n) {
                    e.change(function (t) {
                      t.removeClass(rp, r);
                    }), t.execute("resizeImage", {
                      width: n
                    });
                  }
                })).on("updateSize", function () {
                  r.hasClass(rp) || e.change(function (t) {
                    t.addClass(rp, r);
                  });
                }), s.bind("isEnabled").to(_this303);
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Cm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageResizeHandles";
            }
          }]);

          return sp;
        }(r);

        n(245);

        var ap = /*#__PURE__*/function (_a37) {
          _inherits(ap, _a37);

          var _super217 = _createSuper(ap);

          function ap(t, e) {
            var _this304;

            _classCallCheck(this, ap);

            _this304 = _super217.call(this, t), _this304._defaultStyles = {
              imageBlock: !1,
              imageInline: !1
            }, _this304._styles = new Map(e.map(function (t) {
              if (t.isDefault) {
                var _iterator354 = _createForOfIteratorHelper(t.modelElements),
                    _step354;

                try {
                  for (_iterator354.s(); !(_step354 = _iterator354.n()).done;) {
                    var _e257 = _step354.value;
                    _this304._defaultStyles[_e257] = t.name;
                  }
                } catch (err) {
                  _iterator354.e(err);
                } finally {
                  _iterator354.f();
                }
              }

              return [t.name, t];
            }));
            return _this304;
          }

          _createClass(ap, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);
              this.isEnabled = !!t, this.isEnabled ? t.hasAttribute("imageStyle") ? this.value = t.getAttribute("imageStyle") : this.value = this._defaultStyles[t.name] : this.value = !1;
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this305 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor,
                  n = e.model,
                  i = e.plugins.get("ImageUtils");
              n.change(function (e) {
                var o = t.value;
                var r = i.getClosestSelectedImageElement(n.document.selection);
                o && _this305.shouldConvertImageType(o, r) && (_this305.editor.execute(i.isBlockImage(r) ? "imageTypeInline" : "imageTypeBlock"), r = i.getClosestSelectedImageElement(n.document.selection)), !o || _this305._styles.get(o).isDefault ? e.removeAttribute("imageStyle", r) : e.setAttribute("imageStyle", o, r);
              });
            }
          }, {
            key: "shouldConvertImageType",
            value: function shouldConvertImageType(t, e) {
              return !this._styles.get(t).modelElements.includes(e.name);
            }
          }]);

          return ap;
        }(a);

        var cp = Sd.objectFullWidth,
            lp = Sd.objectInline,
            dp = Sd.objectLeft,
            up = Sd.objectRight,
            hp = Sd.objectCenter,
            fp = Sd.objectBlockLeft,
            gp = Sd.objectBlockRight,
            mp = {
          inline: {
            name: "inline",
            title: "In line",
            icon: lp,
            modelElements: ["imageInline"],
            isDefault: !0
          },
          alignLeft: {
            name: "alignLeft",
            title: "Left aligned image",
            icon: dp,
            modelElements: ["imageBlock", "imageInline"],
            className: "image-style-align-left"
          },
          alignBlockLeft: {
            name: "alignBlockLeft",
            title: "Left aligned image",
            icon: fp,
            modelElements: ["imageBlock"],
            className: "image-style-block-align-left"
          },
          alignCenter: {
            name: "alignCenter",
            title: "Centered image",
            icon: hp,
            modelElements: ["imageBlock"],
            className: "image-style-align-center"
          },
          alignRight: {
            name: "alignRight",
            title: "Right aligned image",
            icon: up,
            modelElements: ["imageBlock", "imageInline"],
            className: "image-style-align-right"
          },
          alignBlockRight: {
            name: "alignBlockRight",
            title: "Right aligned image",
            icon: gp,
            modelElements: ["imageBlock"],
            className: "image-style-block-align-right"
          },
          block: {
            name: "block",
            title: "Centered image",
            icon: hp,
            modelElements: ["imageBlock"],
            isDefault: !0
          },
          side: {
            name: "side",
            title: "Side image",
            icon: up,
            modelElements: ["imageBlock"],
            className: "image-style-side"
          }
        },
            pp = {
          full: cp,
          left: fp,
          right: gp,
          center: hp,
          inlineLeft: dp,
          inlineRight: up,
          inline: lp
        },
            bp = [{
          name: "imageStyle:wrapText",
          title: "Wrap text",
          defaultItem: "imageStyle:alignLeft",
          items: ["imageStyle:alignLeft", "imageStyle:alignRight"]
        }, {
          name: "imageStyle:breakText",
          title: "Break text",
          defaultItem: "imageStyle:block",
          items: ["imageStyle:alignBlockLeft", "imageStyle:block", "imageStyle:alignBlockRight"]
        }];

        function kp(t) {
          Object(rn.logWarning)("image-style-configuration-definition-invalid", t);
        }

        var _p = {
          normalizeStyles: function normalizeStyles(t) {
            return (t.configuredStyles.options || []).map(function (t) {
              return function (t) {
                return "string" == typeof (t = "string" == typeof t ? mp[t] ? _objectSpread({}, mp[t]) : {
                  name: t
                } : function (t, e) {
                  var n = _objectSpread({}, e);

                  for (var _i193 in t) {
                    Object.prototype.hasOwnProperty.call(e, _i193) || (n[_i193] = t[_i193]);
                  }

                  return n;
                }(mp[t.name], t)).icon && (t.icon = pp[t.icon] || t.icon), t;
              }(t);
            }).filter(function (e) {
              return function (t, _ref62) {
                var e = _ref62.isBlockPluginLoaded,
                    n = _ref62.isInlinePluginLoaded;
                var i = t.modelElements,
                    o = t.name;
                if (!(i && i.length && o)) return kp({
                  style: t
                }), !1;
                {
                  var _o101 = [e ? "imageBlock" : null, n ? "imageInline" : null];
                  if (!i.some(function (t) {
                    return _o101.includes(t);
                  })) return Object(rn.logWarning)("image-style-missing-dependency", {
                    style: t,
                    missingPlugins: i.map(function (t) {
                      return "imageBlock" === t ? "ImageBlockEditing" : "ImageInlineEditing";
                    })
                  }), !1;
                }
                return !0;
              }(e, t);
            });
          },
          getDefaultStylesConfiguration: function getDefaultStylesConfiguration(t, e) {
            return t && e ? {
              options: ["inline", "alignLeft", "alignRight", "alignCenter", "alignBlockLeft", "alignBlockRight", "block", "side"]
            } : t ? {
              options: ["block", "side"]
            } : e ? {
              options: ["inline", "alignLeft", "alignRight"]
            } : {};
          },
          getDefaultDropdownDefinitions: function getDefaultDropdownDefinitions(t) {
            return t.has("ImageBlockEditing") && t.has("ImageInlineEditing") ? [].concat(bp) : [];
          },
          warnInvalidStyle: kp,
          DEFAULT_OPTIONS: mp,
          DEFAULT_ICONS: pp,
          DEFAULT_DROPDOWN_DEFINITIONS: bp
        };

        function wp(t, e) {
          var _iterator355 = _createForOfIteratorHelper(e),
              _step355;

          try {
            for (_iterator355.s(); !(_step355 = _iterator355.n()).done;) {
              var _n241 = _step355.value;
              if (_n241.name === t) return _n241;
            }
          } catch (err) {
            _iterator355.e(err);
          } finally {
            _iterator355.f();
          }
        }

        var vp = /*#__PURE__*/function (_r110) {
          _inherits(vp, _r110);

          var _super218 = _createSuper(vp);

          function vp() {
            _classCallCheck(this, vp);

            return _super218.apply(this, arguments);
          }

          _createClass(vp, [{
            key: "init",
            value: function init() {
              var t = _p.normalizeStyles,
                  e = _p.getDefaultStylesConfiguration,
                  n = this.editor,
                  i = n.plugins.has("ImageBlockEditing"),
                  o = n.plugins.has("ImageInlineEditing");
              n.config.define("image.styles", e(i, o)), this.normalizedStyles = t({
                configuredStyles: n.config.get("image.styles"),
                isBlockPluginLoaded: i,
                isInlinePluginLoaded: o
              }), this._setupConversion(i, o), this._setupPostFixer(), n.commands.add("imageStyle", new ap(n, this.normalizedStyles));
            }
          }, {
            key: "_setupConversion",
            value: function _setupConversion(t, e) {
              var n = this.editor,
                  i = n.model.schema,
                  o = function (t) {
                return function (e, n, i) {
                  if (!i.consumable.consume(n.item, e.name)) return;
                  var o = wp(n.attributeNewValue, t),
                      r = wp(n.attributeOldValue, t),
                      s = i.mapper.toViewElement(n.item),
                      a = i.writer;
                  r && a.removeClass(r.className, s), o && a.addClass(o.className, s);
                };
              }(this.normalizedStyles),
                  r = function (t) {
                var e = {
                  imageInline: t.filter(function (t) {
                    return !t.isDefault && t.modelElements.includes("imageInline");
                  }),
                  imageBlock: t.filter(function (t) {
                    return !t.isDefault && t.modelElements.includes("imageBlock");
                  })
                };
                return function (t, n, i) {
                  if (!n.modelRange) return;
                  var o = n.viewItem,
                      r = Es(n.modelRange.getItems());

                  if (r && i.schema.checkAttribute(r, "imageStyle")) {
                    var _iterator356 = _createForOfIteratorHelper(e[r.name]),
                        _step356;

                    try {
                      for (_iterator356.s(); !(_step356 = _iterator356.n()).done;) {
                        var _t275 = _step356.value;
                        i.consumable.consume(o, {
                          classes: _t275.className
                        }) && i.writer.setAttribute("imageStyle", _t275.name, r);
                      }
                    } catch (err) {
                      _iterator356.e(err);
                    } finally {
                      _iterator356.f();
                    }
                  }
                };
              }(this.normalizedStyles);

              n.editing.downcastDispatcher.on("attribute:imageStyle", o), n.data.downcastDispatcher.on("attribute:imageStyle", o), t && (i.extend("imageBlock", {
                allowAttributes: "imageStyle"
              }), n.data.upcastDispatcher.on("element:figure", r, {
                priority: "low"
              })), e && (i.extend("imageInline", {
                allowAttributes: "imageStyle"
              }), n.data.upcastDispatcher.on("element:img", r, {
                priority: "low"
              }));
            }
          }, {
            key: "_setupPostFixer",
            value: function _setupPostFixer() {
              var t = this.editor,
                  e = t.model.document,
                  n = t.plugins.get(Im),
                  i = new Map(this.normalizedStyles.map(function (t) {
                return [t.name, t];
              }));
              e.registerPostFixer(function (t) {
                var o = !1;

                var _iterator357 = _createForOfIteratorHelper(e.differ.getChanges()),
                    _step357;

                try {
                  for (_iterator357.s(); !(_step357 = _iterator357.n()).done;) {
                    var _r111 = _step357.value;

                    if ("insert" == _r111.type || "attribute" == _r111.type && "imageStyle" == _r111.attributeKey) {
                      var _e258 = "insert" == _r111.type ? _r111.position.nodeAfter : _r111.range.start.nodeAfter;

                      if (_e258 && _e258.is("element", "paragraph") && _e258.childCount > 0 && (_e258 = _e258.getChild(0)), !n.isImage(_e258)) continue;

                      var _s33 = _e258.getAttribute("imageStyle");

                      if (!_s33) continue;

                      var _a38 = i.get(_s33);

                      _a38 && _a38.modelElements.includes(_e258.name) || (t.removeAttribute("imageStyle", _e258), o = !0);
                    }
                  }
                } catch (err) {
                  _iterator357.e(err);
                } finally {
                  _iterator357.f();
                }

                return o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ImageStyleEditing";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Im];
            }
          }]);

          return vp;
        }(r);

        var yp = n(61);
        n(247);

        var xp = /*#__PURE__*/function (_r112) {
          _inherits(xp, _r112);

          var _super219 = _createSuper(xp);

          function xp() {
            _classCallCheck(this, xp);

            return _super219.apply(this, arguments);
          }

          _createClass(xp, [{
            key: "localizedDefaultStylesTitles",
            get: function get() {
              var t = this.editor.t;
              return {
                "Wrap text": t("Wrap text"),
                "Break text": t("Break text"),
                "In line": t("In line"),
                "Full size image": t("Full size image"),
                "Side image": t("Side image"),
                "Left aligned image": t("Left aligned image"),
                "Centered image": t("Centered image"),
                "Right aligned image": t("Right aligned image")
              };
            }
          }, {
            key: "init",
            value: function init() {
              var t = this.editor.plugins,
                  e = this.editor.config.get("image.toolbar") || [],
                  n = Cp(t.get("ImageStyleEditing").normalizedStyles, this.localizedDefaultStylesTitles);

              var _iterator358 = _createForOfIteratorHelper(n),
                  _step358;

              try {
                for (_iterator358.s(); !(_step358 = _iterator358.n()).done;) {
                  var _t276 = _step358.value;

                  this._createButton(_t276);
                }
              } catch (err) {
                _iterator358.e(err);
              } finally {
                _iterator358.f();
              }

              var i = Cp([].concat(_toConsumableArray(e.filter(Ae.a)), _toConsumableArray(_p.getDefaultDropdownDefinitions(t))), this.localizedDefaultStylesTitles);

              var _iterator359 = _createForOfIteratorHelper(i),
                  _step359;

              try {
                for (_iterator359.s(); !(_step359 = _iterator359.n()).done;) {
                  var _t277 = _step359.value;

                  this._createDropdown(_t277, n);
                }
              } catch (err) {
                _iterator359.e(err);
              } finally {
                _iterator359.f();
              }
            }
          }, {
            key: "_createDropdown",
            value: function _createDropdown(t, e) {
              var n = this.editor.ui.componentFactory;
              n.add(t.name, function (i) {
                var o;
                var r = t.defaultItem,
                    s = t.items,
                    a = t.title,
                    c = s.filter(function (t) {
                  return e.find(function (_ref63) {
                    var e = _ref63.name;
                    return Tp(e) === t;
                  });
                }).map(function (t) {
                  var e = n.create(t);
                  return t === r && (o = e), e;
                });
                s.length !== c.length && _p.warnInvalidStyle({
                  dropdown: t
                });
                var l = Eu(i, uu),
                    d = l.buttonView;
                return Su(l, c), d.set({
                  label: Ap(a, o.label),
                  "class": null,
                  tooltip: !0
                }), d.bind("icon").toMany(c, "isOn", function () {
                  for (var _len23 = arguments.length, t = new Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {
                    t[_key23] = arguments[_key23];
                  }

                  var e = t.findIndex(yp.a);
                  return e < 0 ? o.icon : c[e].icon;
                }), d.bind("label").toMany(c, "isOn", function () {
                  for (var _len24 = arguments.length, t = new Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {
                    t[_key24] = arguments[_key24];
                  }

                  var e = t.findIndex(yp.a);
                  return Ap(a, e < 0 ? o.label : c[e].label);
                }), d.bind("isOn").toMany(c, "isOn", function () {
                  for (var _len25 = arguments.length, t = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {
                    t[_key25] = arguments[_key25];
                  }

                  return t.some(yp.a);
                }), d.bind("class").toMany(c, "isOn", function () {
                  for (var _len26 = arguments.length, t = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {
                    t[_key26] = arguments[_key26];
                  }

                  return t.some(yp.a) ? "ck-splitbutton_flatten" : null;
                }), d.on("execute", function () {
                  c.some(function (_ref64) {
                    var t = _ref64.isOn;
                    return t;
                  }) ? l.isOpen = !l.isOpen : o.fire("execute");
                }), l.bind("isEnabled").toMany(c, "isEnabled", function () {
                  for (var _len27 = arguments.length, t = new Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {
                    t[_key27] = arguments[_key27];
                  }

                  return t.some(yp.a);
                }), l;
              });
            }
          }, {
            key: "_createButton",
            value: function _createButton(t) {
              var _this306 = this;

              var e = t.name;
              this.editor.ui.componentFactory.add(Tp(e), function (n) {
                var i = _this306.editor.commands.get("imageStyle"),
                    o = new nu(n);

                return o.set({
                  label: t.title,
                  icon: t.icon,
                  tooltip: !0,
                  isToggleable: !0
                }), o.bind("isEnabled").to(i, "isEnabled"), o.bind("isOn").to(i, "value", function (t) {
                  return t === e;
                }), o.on("execute", _this306._executeCommand.bind(_this306, e)), o;
              });
            }
          }, {
            key: "_executeCommand",
            value: function _executeCommand(t) {
              this.editor.execute("imageStyle", {
                value: t
              }), this.editor.editing.view.focus();
            }
          }], [{
            key: "requires",
            get: function get() {
              return [vp];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageStyleUI";
            }
          }]);

          return xp;
        }(r);

        function Cp(t, e) {
          var _iterator360 = _createForOfIteratorHelper(t),
              _step360;

          try {
            for (_iterator360.s(); !(_step360 = _iterator360.n()).done;) {
              var _n242 = _step360.value;
              e[_n242.title] && (_n242.title = e[_n242.title]);
            }
          } catch (err) {
            _iterator360.e(err);
          } finally {
            _iterator360.f();
          }

          return t;
        }

        function Tp(t) {
          return "imageStyle:".concat(t);
        }

        function Ap(t, e) {
          return (t ? t + ": " : "") + e;
        }

        function Ep(t) {
          var e = t.map(function (t) {
            return t.replace("+", "\\+");
          });
          return new RegExp("^image\\/(".concat(e.join("|"), ")$"));
        }

        function Sp(t) {
          return new Promise(function (e, n) {
            var i = t.getAttribute("src");
            fetch(i).then(function (t) {
              return t.blob();
            }).then(function (t) {
              var n = Ip(t, i),
                  o = "image.".concat(n.replace("image/", "")),
                  r = new File([t], o, {
                type: n
              });
              e(r);
            })["catch"](function (t) {
              return t && "TypeError" === t.name ? function (t) {
                return function (t) {
                  return new Promise(function (e, n) {
                    var i = Ho.document.createElement("img");
                    i.addEventListener("load", function () {
                      var t = Ho.document.createElement("canvas");
                      t.width = i.width, t.height = i.height;
                      var o = t.getContext("2d");
                      o.drawImage(i, 0, 0), t.toBlob(function (t) {
                        return t ? e(t) : n();
                      });
                    }), i.addEventListener("error", function () {
                      return n();
                    }), i.src = t;
                  });
                }(t).then(function (e) {
                  var n = Ip(e, t),
                      i = n.replace("image/", ""),
                      o = "image.".concat(i);
                  return new File([e], o, {
                    type: n
                  });
                });
              }(i).then(e)["catch"](n) : n(t);
            });
          });
        }

        function Ip(t, e) {
          return t.type ? t.type : e.match(/data:(image\/\w+);base64/) ? e.match(/data:(image\/\w+);base64/)[1].toLowerCase() : "image/jpeg";
        }

        var Op = /*#__PURE__*/function (_r113) {
          _inherits(Op, _r113);

          var _super220 = _createSuper(Op);

          function Op() {
            _classCallCheck(this, Op);

            return _super220.apply(this, arguments);
          }

          _createClass(Op, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.t,
                  n = function n(_n243) {
                var i = new wg(_n243),
                    o = t.commands.get("uploadImage"),
                    r = t.config.get("image.upload.types"),
                    s = Ep(r);
                return i.set({
                  acceptedType: r.map(function (t) {
                    return "image/".concat(t);
                  }).join(","),
                  allowMultipleFiles: !0
                }), i.buttonView.set({
                  label: e("Insert image"),
                  icon: Sd.image,
                  tooltip: !0
                }), i.buttonView.bind("isEnabled").to(o), i.on("done", function (e, n) {
                  var i = Array.from(n).filter(function (t) {
                    return s.test(t.type);
                  });
                  i.length && t.execute("uploadImage", {
                    file: i
                  });
                }), i;
              };

              t.ui.componentFactory.add("uploadImage", n), t.ui.componentFactory.add("imageUpload", n);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ImageUploadUI";
            }
          }]);

          return Op;
        }(r);

        var Rp = n(155),
            Mp = n.n(Rp);
        n(249), n(251), n(253);

        var Pp = /*#__PURE__*/function (_r114) {
          _inherits(Pp, _r114);

          var _super221 = _createSuper(Pp);

          function Pp(t) {
            var _this307;

            _classCallCheck(this, Pp);

            _this307 = _super221.call(this, t), _this307.placeholder = "data:image/svg+xml;utf8," + encodeURIComponent(Mp.a);
            return _this307;
          }

          _createClass(Pp, [{
            key: "init",
            value: function init() {
              var _this308 = this;

              var t = this.editor;
              t.plugins.has("ImageBlockEditing") && t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock", function () {
                return _this308.uploadStatusChange.apply(_this308, arguments);
              }), t.plugins.has("ImageInlineEditing") && t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline", function () {
                return _this308.uploadStatusChange.apply(_this308, arguments);
              });
            }
          }, {
            key: "uploadStatusChange",
            value: function uploadStatusChange(t, e, n) {
              var i = this.editor,
                  o = e.item,
                  r = o.getAttribute("uploadId");
              if (!n.consumable.consume(e.item, t.name)) return;
              var s = i.plugins.get("ImageUtils"),
                  a = i.plugins.get(kg),
                  c = r ? e.attributeNewValue : null,
                  l = this.placeholder,
                  d = i.editing.mapper.toViewElement(o),
                  u = n.writer;
              if ("reading" == c) return Np(d, u), void Dp(s, l, d, u);

              if ("uploading" == c) {
                var _t278 = a.loaders.get(r);

                return Np(d, u), void (_t278 ? (jp(d, u), function (t, e, n, i) {
                  var o = function (t) {
                    var e = t.createUIElement("div", {
                      "class": "ck-progress-bar"
                    });
                    return t.setCustomProperty("progressBar", !0, e), e;
                  }(e);

                  e.insert(e.createPositionAt(t, "end"), o), n.on("change:uploadedPercent", function (t, e, n) {
                    i.change(function (t) {
                      t.setStyle("width", n + "%", o);
                    });
                  });
                }(d, u, _t278, i.editing.view), function (t, e, n, i) {
                  if (i.data) {
                    var _o102 = t.findViewImgElement(e);

                    n.setAttribute("src", i.data, _o102);
                  }
                }(s, d, u, _t278)) : Dp(s, l, d, u));
              }

              "complete" == c && a.loaders.get(r) && function (t, e, n) {
                var i = e.createUIElement("div", {
                  "class": "ck-image-upload-complete-icon"
                });
                e.insert(e.createPositionAt(t, "end"), i), setTimeout(function () {
                  n.change(function (t) {
                    return t.remove(t.createRangeOn(i));
                  });
                }, 3e3);
              }(d, u, i.editing.view), function (t, e) {
                Lp(t, e, "progressBar");
              }(d, u), jp(d, u), function (t, e) {
                e.removeClass("ck-appear", t);
              }(d, u);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ImageUploadProgress";
            }
          }]);

          return Pp;
        }(r);

        function Np(t, e) {
          t.hasClass("ck-appear") || e.addClass("ck-appear", t);
        }

        function Dp(t, e, n, i) {
          n.hasClass("ck-image-upload-placeholder") || i.addClass("ck-image-upload-placeholder", n);
          var o = t.findViewImgElement(n);
          o.getAttribute("src") !== e && i.setAttribute("src", e, o), Bp(n, "placeholder") || i.insert(i.createPositionAfter(o), function (t) {
            var e = t.createUIElement("div", {
              "class": "ck-upload-placeholder-loader"
            });
            return t.setCustomProperty("placeholder", !0, e), e;
          }(i));
        }

        function jp(t, e) {
          t.hasClass("ck-image-upload-placeholder") && e.removeClass("ck-image-upload-placeholder", t), Lp(t, e, "placeholder");
        }

        function Bp(t, e) {
          var _iterator361 = _createForOfIteratorHelper(t.getChildren()),
              _step361;

          try {
            for (_iterator361.s(); !(_step361 = _iterator361.n()).done;) {
              var _n244 = _step361.value;
              if (_n244.getCustomProperty(e)) return _n244;
            }
          } catch (err) {
            _iterator361.e(err);
          } finally {
            _iterator361.f();
          }
        }

        function Lp(t, e, n) {
          var i = Bp(t, n);
          i && e.remove(e.createRangeOn(i));
        }

        var zp = /*#__PURE__*/function (_a39) {
          _inherits(zp, _a39);

          var _super222 = _createSuper(zp);

          function zp() {
            _classCallCheck(this, zp);

            return _super222.apply(this, arguments);
          }

          _createClass(zp, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor,
                  e = t.plugins.get("ImageUtils"),
                  n = t.model.document.selection.getSelectedElement();
              this.isEnabled = e.isImageAllowed() || e.isImage(n);
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var _this309 = this;

              var e = cn(t.file),
                  n = this.editor.model.document.selection,
                  i = this.editor.plugins.get("ImageUtils"),
                  o = Object.fromEntries(n.getAttributes());
              e.forEach(function (t, e) {
                var r = n.getSelectedElement();

                if (e && r && i.isImage(r)) {
                  var _e259 = _this309.editor.model.createPositionAfter(r);

                  _this309._uploadImage(t, o, _e259);
                } else _this309._uploadImage(t, o);
              });
            }
          }, {
            key: "_uploadImage",
            value: function _uploadImage(t, e, n) {
              var i = this.editor,
                  o = i.plugins.get(kg).createLoader(t),
                  r = i.plugins.get("ImageUtils");
              o && r.insertImage(_objectSpread(_objectSpread({}, e), {}, {
                uploadId: o.id
              }), n);
            }
          }]);

          return zp;
        }(a);

        var Fp = /*#__PURE__*/function (_r115) {
          _inherits(Fp, _r115);

          var _super223 = _createSuper(Fp);

          function Fp(t) {
            var _this310;

            _classCallCheck(this, Fp);

            _this310 = _super223.call(this, t), t.config.define("image", {
              upload: {
                types: ["jpeg", "png", "gif", "bmp", "webp", "tiff"]
              }
            }), _this310._uploadImageElements = new Map();
            return _this310;
          }

          _createClass(Fp, [{
            key: "init",
            value: function init() {
              var _this311 = this;

              var t = this.editor,
                  e = t.model.document,
                  n = t.conversion,
                  i = t.plugins.get(kg),
                  o = t.plugins.get("ImageUtils"),
                  r = Ep(t.config.get("image.upload.types")),
                  s = new zp(t);
              t.commands.add("uploadImage", s), t.commands.add("imageUpload", s), n["for"]("upcast").attributeToAttribute({
                view: {
                  name: "img",
                  key: "uploadId"
                },
                model: "uploadId"
              }), this.listenTo(t.editing.view.document, "clipboardInput", function (e, n) {
                if (function (t) {
                  return Array.from(t.types).includes("text/html") && "" !== t.getData("text/html");
                }(n.dataTransfer)) return;
                var i = Array.from(n.dataTransfer.files).filter(function (t) {
                  return !!t && r.test(t.type);
                });
                i.length && (e.stop(), t.model.change(function (e) {
                  n.targetRanges && e.setSelection(n.targetRanges.map(function (e) {
                    return t.editing.mapper.toModelRange(e);
                  })), t.model.enqueueChange("default", function () {
                    t.execute("uploadImage", {
                      file: i
                    });
                  });
                }));
              }), this.listenTo(t.plugins.get("ClipboardPipeline"), "inputTransformation", function (e, n) {
                var r = Array.from(t.editing.view.createRangeIn(n.content)).filter(function (t) {
                  return function (t, e) {
                    return !(!t.isInlineImageView(e) || !e.getAttribute("src")) && (e.getAttribute("src").match(/^data:image\/\w+;base64,/g) || e.getAttribute("src").match(/^blob:/g));
                  }(o, t.item) && !t.item.getAttribute("uploadProcessed");
                }).map(function (t) {
                  return {
                    promise: Sp(t.item),
                    imageElement: t.item
                  };
                });
                if (!r.length) return;
                var s = new vh(t.editing.view.document);

                var _iterator362 = _createForOfIteratorHelper(r),
                    _step362;

                try {
                  for (_iterator362.s(); !(_step362 = _iterator362.n()).done;) {
                    var _t279 = _step362.value;
                    s.setAttribute("uploadProcessed", !0, _t279.imageElement);

                    var _e260 = i.createLoader(_t279.promise);

                    _e260 && (s.setAttribute("src", "", _t279.imageElement), s.setAttribute("uploadId", _e260.id, _t279.imageElement));
                  }
                } catch (err) {
                  _iterator362.e(err);
                } finally {
                  _iterator362.f();
                }
              }), t.editing.view.document.on("dragover", function (t, e) {
                e.preventDefault();
              }), e.on("change", function () {
                var n = e.differ.getChanges({
                  includeChangesInGraveyard: !0
                }).reverse(),
                    o = new Set();

                var _iterator363 = _createForOfIteratorHelper(n),
                    _step363;

                try {
                  for (_iterator363.s(); !(_step363 = _iterator363.n()).done;) {
                    var _e261 = _step363.value;

                    if ("insert" == _e261.type && "$text" != _e261.name) {
                      var _n245 = _e261.position.nodeAfter,
                          _r116 = "$graveyard" == _e261.position.root.rootName;

                      var _iterator364 = _createForOfIteratorHelper(Vp(t, _n245)),
                          _step364;

                      try {
                        for (_iterator364.s(); !(_step364 = _iterator364.n()).done;) {
                          var _e262 = _step364.value;

                          var _t280 = _e262.getAttribute("uploadId");

                          if (!_t280) continue;

                          var _n246 = i.loaders.get(_t280);

                          _n246 && (_r116 ? o.has(_t280) || _n246.abort() : (o.add(_t280), _this311._uploadImageElements.set(_t280, _e262), "idle" == _n246.status && _this311._readAndUpload(_n246)));
                        }
                      } catch (err) {
                        _iterator364.e(err);
                      } finally {
                        _iterator364.f();
                      }
                    }
                  }
                } catch (err) {
                  _iterator363.e(err);
                } finally {
                  _iterator363.f();
                }
              }), this.on("uploadComplete", function (t, _ref65) {
                var e = _ref65.imageElement,
                    n = _ref65.data;
                var i = n.urls ? n.urls : n;

                _this311.editor.model.change(function (t) {
                  t.setAttribute("src", i["default"], e), _this311._parseAndSetSrcsetAttributeOnImage(i, e, t);
                });
              }, {
                priority: "low"
              });
            }
          }, {
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor.model.schema;
              this.editor.plugins.has("ImageBlockEditing") && t.extend("imageBlock", {
                allowAttributes: ["uploadId", "uploadStatus"]
              }), this.editor.plugins.has("ImageInlineEditing") && t.extend("imageInline", {
                allowAttributes: ["uploadId", "uploadStatus"]
              });
            }
          }, {
            key: "_readAndUpload",
            value: function _readAndUpload(t) {
              var _this312 = this;

              var e = this.editor,
                  n = e.model,
                  i = e.locale.t,
                  o = e.plugins.get(kg),
                  r = e.plugins.get(Lu),
                  s = e.plugins.get("ImageUtils"),
                  a = this._uploadImageElements;
              return n.enqueueChange("transparent", function (e) {
                e.setAttribute("uploadStatus", "reading", a.get(t.id));
              }), t.read().then(function () {
                var i = t.upload(),
                    o = a.get(t.id);

                if (Qi.isSafari) {
                  var _t281 = e.editing.mapper.toViewElement(o),
                      _n247 = s.findViewImgElement(_t281);

                  e.editing.view.once("render", function () {
                    if (!_n247.parent) return;
                    var t = e.editing.view.domConverter.mapViewToDom(_n247.parent);
                    if (!t) return;
                    var i = t.style.display;
                    t.style.display = "none", t._ckHack = t.offsetHeight, t.style.display = i;
                  });
                }

                return n.enqueueChange("transparent", function (t) {
                  t.setAttribute("uploadStatus", "uploading", o);
                }), i;
              }).then(function (e) {
                n.enqueueChange("transparent", function (n) {
                  var i = a.get(t.id);
                  n.setAttribute("uploadStatus", "complete", i), _this312.fire("uploadComplete", {
                    data: e,
                    imageElement: i
                  });
                }), c();
              })["catch"](function (e) {
                if ("error" !== t.status && "aborted" !== t.status) throw e;
                "error" == t.status && e && r.showWarning(e, {
                  title: i("Upload failed"),
                  namespace: "upload"
                }), n.enqueueChange("transparent", function (e) {
                  e.remove(a.get(t.id));
                }), c();
              });

              function c() {
                n.enqueueChange("transparent", function (e) {
                  var n = a.get(t.id);
                  e.removeAttribute("uploadId", n), e.removeAttribute("uploadStatus", n), a["delete"](t.id);
                }), o.destroyLoader(t);
              }
            }
          }, {
            key: "_parseAndSetSrcsetAttributeOnImage",
            value: function _parseAndSetSrcsetAttributeOnImage(t, e, n) {
              var i = 0;
              var o = Object.keys(t).filter(function (t) {
                var e = parseInt(t, 10);
                if (!isNaN(e)) return i = Math.max(i, e), !0;
              }).map(function (e) {
                return "".concat(t[e], " ").concat(e, "w");
              }).join(", ");
              "" != o && n.setAttribute("srcset", {
                data: o,
                width: i
              }, e);
            }
          }], [{
            key: "requires",
            get: function get() {
              return [kg, Lu, Rh, Im];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageUploadEditing";
            }
          }]);

          return Fp;
        }(r);

        function Vp(t, e) {
          var n = t.plugins.get("ImageUtils");
          return Array.from(t.model.createRangeOn(e)).filter(function (t) {
            return n.isImage(t.item);
          }).map(function (t) {
            return t.item;
          });
        }

        var Up = /*#__PURE__*/function () {
          function Up() {
            _classCallCheck(this, Up);

            this._definitions = new Set();
          }

          _createClass(Up, [{
            key: "length",
            get: function get() {
              return this._definitions.size;
            }
          }, {
            key: "add",
            value: function add(t) {
              var _this313 = this;

              Array.isArray(t) ? t.forEach(function (t) {
                return _this313._definitions.add(t);
              }) : this._definitions.add(t);
            }
          }, {
            key: "getDispatcher",
            value: function getDispatcher() {
              var _this314 = this;

              return function (t) {
                t.on("attribute:linkHref", function (t, e, n) {
                  if (!n.consumable.test(e.item, "attribute:linkHref")) return;
                  var i = n.writer,
                      o = i.document.selection;

                  var _iterator365 = _createForOfIteratorHelper(_this314._definitions),
                      _step365;

                  try {
                    for (_iterator365.s(); !(_step365 = _iterator365.n()).done;) {
                      var _t282 = _step365.value;

                      var _r117 = i.createAttributeElement("a", _t282.attributes, {
                        priority: 5
                      });

                      _t282.classes && i.addClass(_t282.classes, _r117);

                      for (var _e263 in _t282.styles) {
                        i.setStyle(_e263, _t282.styles[_e263], _r117);
                      }

                      i.setCustomProperty("link", !0, _r117), _t282.callback(e.attributeNewValue) ? e.item.is("selection") ? i.wrap(o.getFirstRange(), _r117) : i.wrap(n.mapper.toViewRange(e.range), _r117) : i.unwrap(n.mapper.toViewRange(e.range), _r117);
                    }
                  } catch (err) {
                    _iterator365.e(err);
                  } finally {
                    _iterator365.f();
                  }
                }, {
                  priority: "high"
                });
              };
            }
          }, {
            key: "getDispatcherForLinkedImage",
            value: function getDispatcherForLinkedImage() {
              var _this315 = this;

              return function (t) {
                t.on("attribute:linkHref:imageBlock", function (t, e, _ref66) {
                  var n = _ref66.writer,
                      i = _ref66.mapper;
                  var o = i.toViewElement(e.item),
                      r = Array.from(o.getChildren()).find(function (t) {
                    return "a" === t.name;
                  });

                  var _iterator366 = _createForOfIteratorHelper(_this315._definitions),
                      _step366;

                  try {
                    for (_iterator366.s(); !(_step366 = _iterator366.n()).done;) {
                      var _t283 = _step366.value;

                      var _i194 = xn(_t283.attributes);

                      if (_t283.callback(e.attributeNewValue)) {
                        var _iterator367 = _createForOfIteratorHelper(_i194),
                            _step367;

                        try {
                          for (_iterator367.s(); !(_step367 = _iterator367.n()).done;) {
                            var _step367$value = _slicedToArray(_step367.value, 2),
                                _t284 = _step367$value[0],
                                _e265 = _step367$value[1];

                            "class" === _t284 ? n.addClass(_e265, r) : n.setAttribute(_t284, _e265, r);
                          }
                        } catch (err) {
                          _iterator367.e(err);
                        } finally {
                          _iterator367.f();
                        }

                        _t283.classes && n.addClass(_t283.classes, r);

                        for (var _e264 in _t283.styles) {
                          n.setStyle(_e264, _t283.styles[_e264], r);
                        }
                      } else {
                        var _iterator368 = _createForOfIteratorHelper(_i194),
                            _step368;

                        try {
                          for (_iterator368.s(); !(_step368 = _iterator368.n()).done;) {
                            var _step368$value = _slicedToArray(_step368.value, 2),
                                _t285 = _step368$value[0],
                                _e267 = _step368$value[1];

                            "class" === _t285 ? n.removeClass(_e267, r) : n.removeAttribute(_t285, r);
                          }
                        } catch (err) {
                          _iterator368.e(err);
                        } finally {
                          _iterator368.f();
                        }

                        _t283.classes && n.removeClass(_t283.classes, r);

                        for (var _e266 in _t283.styles) {
                          n.removeStyle(_e266, r);
                        }
                      }
                    }
                  } catch (err) {
                    _iterator366.e(err);
                  } finally {
                    _iterator366.f();
                  }
                });
              };
            }
          }]);

          return Up;
        }();

        var Hp = function Hp(t, e, n) {
          var i = t.length;
          return n = void 0 === n ? i : n, !e && n >= i ? t : Kn(t, e, n);
        },
            qp = RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");

        var Wp = function Wp(t) {
          return qp.test(t);
        };

        var $p = function $p(t) {
          return t.split("");
        },
            Yp = "[\\ud800-\\udfff]",
            Jp = "[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",
            Gp = "\\ud83c[\\udffb-\\udfff]",
            Kp = "[^\\ud800-\\udfff]",
            Qp = "(?:\\ud83c[\\udde6-\\uddff]){2}",
            Xp = "[\\ud800-\\udbff][\\udc00-\\udfff]",
            Zp = "(?:" + Jp + "|" + Gp + ")" + "?",
            tb = "[\\ufe0e\\ufe0f]?" + Zp + ("(?:\\u200d(?:" + [Kp, Qp, Xp].join("|") + ")[\\ufe0e\\ufe0f]?" + Zp + ")*"),
            eb = "(?:" + [Kp + Jp + "?", Jp, Qp, Xp, Yp].join("|") + ")",
            nb = RegExp(Gp + "(?=" + Gp + ")|" + eb + tb, "g");

        var ib = function ib(t) {
          return t.match(nb) || [];
        };

        var ob = function ob(t) {
          return Wp(t) ? ib(t) : $p(t);
        };

        var rb = function (t) {
          return function (e) {
            e = qn(e);
            var n = Wp(e) ? ob(e) : void 0,
                i = n ? n[0] : e.charAt(0),
                o = n ? Hp(n, 1).join("") : e.slice(1);
            return i[t]() + o;
          };
        }("toUpperCase");

        var sb = /[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,
            ab = /^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,
            cb = /^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,
            lb = /^((\w+:(\/{2,})?)|(\W))/i,
            db = "Ctrl+K";

        function ub(t, _ref67) {
          var e = _ref67.writer;
          var n = e.createAttributeElement("a", {
            href: t
          }, {
            priority: 5
          });
          return e.setCustomProperty("link", !0, n), n;
        }

        function hb(t) {
          return function (t) {
            return t.replace(sb, "").match(ab);
          }(t = String(t)) ? t : "#";
        }

        function fb(t, e) {
          return !!t && e.checkAttribute(t.name, "linkHref");
        }

        function gb(t, e) {
          var n = function (t) {
            return cb.test(t);
          }(t) ? "mailto:" : e,
              i = !!n && !lb.test(t);
          return t && i ? n + t : t;
        }

        var mb = /*#__PURE__*/function (_a40) {
          _inherits(mb, _a40);

          var _super224 = _createSuper(mb);

          function mb(t) {
            var _this316;

            _classCallCheck(this, mb);

            _this316 = _super224.call(this, t), _this316.manualDecorators = new on["default"](), _this316.automaticDecorators = new Up();
            return _this316;
          }

          _createClass(mb, [{
            key: "restoreManualDecoratorStates",
            value: function restoreManualDecoratorStates() {
              var _iterator369 = _createForOfIteratorHelper(this.manualDecorators),
                  _step369;

              try {
                for (_iterator369.s(); !(_step369 = _iterator369.n()).done;) {
                  var _t286 = _step369.value;
                  _t286.value = this._getDecoratorStateFromModel(_t286.id);
                }
              } catch (err) {
                _iterator369.e(err);
              } finally {
                _iterator369.f();
              }
            }
          }, {
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document.selection,
                  n = e.getSelectedElement() || Es(e.getSelectedBlocks());
              fb(n, t.schema) ? (this.value = n.getAttribute("linkHref"), this.isEnabled = t.schema.checkAttribute(n, "linkHref")) : (this.value = e.getAttribute("linkHref"), this.isEnabled = t.schema.checkAttributeInSelection(e, "linkHref"));

              var _iterator370 = _createForOfIteratorHelper(this.manualDecorators),
                  _step370;

              try {
                for (_iterator370.s(); !(_step370 = _iterator370.n()).done;) {
                  var _t287 = _step370.value;
                  _t287.value = this._getDecoratorStateFromModel(_t287.id);
                }
              } catch (err) {
                _iterator370.e(err);
              } finally {
                _iterator370.f();
              }
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var _this317 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = this.editor.model,
                  i = n.document.selection,
                  o = [],
                  r = [];

              for (var _t288 in e) {
                e[_t288] ? o.push(_t288) : r.push(_t288);
              }

              n.change(function (e) {
                if (i.isCollapsed) {
                  var _s34 = i.getFirstPosition();

                  if (i.hasAttribute("linkHref")) {
                    var _a41 = ng(_s34, "linkHref", i.getAttribute("linkHref"), n);

                    e.setAttribute("linkHref", t, _a41), o.forEach(function (t) {
                      e.setAttribute(t, !0, _a41);
                    }), r.forEach(function (t) {
                      e.removeAttribute(t, _a41);
                    }), e.setSelection(e.createPositionAfter(_a41.end.nodeBefore));
                  } else if ("" !== t) {
                    var _r118 = xn(i.getAttributes());

                    _r118.set("linkHref", t), o.forEach(function (t) {
                      _r118.set(t, !0);
                    });

                    var _n$insertContent = n.insertContent(e.createText(t, _r118), _s34),
                        _a42 = _n$insertContent.end;

                    e.setSelection(_a42);
                  }

                  ["linkHref"].concat(o, r).forEach(function (t) {
                    e.removeSelectionAttribute(t);
                  });
                } else {
                  var _s35 = n.schema.getValidRanges(i.getRanges(), "linkHref"),
                      _a43 = [];

                  var _iterator371 = _createForOfIteratorHelper(i.getSelectedBlocks()),
                      _step371;

                  try {
                    for (_iterator371.s(); !(_step371 = _iterator371.n()).done;) {
                      var _t289 = _step371.value;
                      n.schema.checkAttribute(_t289, "linkHref") && _a43.push(e.createRangeOn(_t289));
                    }
                  } catch (err) {
                    _iterator371.e(err);
                  } finally {
                    _iterator371.f();
                  }

                  var _c9 = _a43.slice();

                  var _iterator372 = _createForOfIteratorHelper(_s35),
                      _step372;

                  try {
                    for (_iterator372.s(); !(_step372 = _iterator372.n()).done;) {
                      var _t290 = _step372.value;
                      _this317._isRangeToUpdate(_t290, _a43) && _c9.push(_t290);
                    }
                  } catch (err) {
                    _iterator372.e(err);
                  } finally {
                    _iterator372.f();
                  }

                  var _iterator373 = _createForOfIteratorHelper(_c9),
                      _step373;

                  try {
                    var _loop8 = function _loop8() {
                      var n = _step373.value;
                      e.setAttribute("linkHref", t, n), o.forEach(function (t) {
                        e.setAttribute(t, !0, n);
                      }), r.forEach(function (t) {
                        e.removeAttribute(t, n);
                      });
                    };

                    for (_iterator373.s(); !(_step373 = _iterator373.n()).done;) {
                      _loop8();
                    }
                  } catch (err) {
                    _iterator373.e(err);
                  } finally {
                    _iterator373.f();
                  }
                }
              });
            }
          }, {
            key: "_getDecoratorStateFromModel",
            value: function _getDecoratorStateFromModel(t) {
              var e = this.editor.model,
                  n = e.document.selection,
                  i = n.getSelectedElement();
              return fb(i, e.schema) ? i.getAttribute(t) : n.getAttribute(t);
            }
          }, {
            key: "_isRangeToUpdate",
            value: function _isRangeToUpdate(t, e) {
              var _iterator374 = _createForOfIteratorHelper(e),
                  _step374;

              try {
                for (_iterator374.s(); !(_step374 = _iterator374.n()).done;) {
                  var _n248 = _step374.value;
                  if (_n248.containsRange(t)) return !1;
                }
              } catch (err) {
                _iterator374.e(err);
              } finally {
                _iterator374.f();
              }

              return !0;
            }
          }]);

          return mb;
        }(a);

        var pb = /*#__PURE__*/function (_a44) {
          _inherits(pb, _a44);

          var _super225 = _createSuper(pb);

          function pb() {
            _classCallCheck(this, pb);

            return _super225.apply(this, arguments);
          }

          _createClass(pb, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document.selection,
                  n = e.getSelectedElement();
              fb(n, t.schema) ? this.isEnabled = t.schema.checkAttribute(n, "linkHref") : this.isEnabled = t.schema.checkAttributeInSelection(e, "linkHref");
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor,
                  e = this.editor.model,
                  n = e.document.selection,
                  i = t.commands.get("link");
              e.change(function (t) {
                var o = n.isCollapsed ? [ng(n.getFirstPosition(), "linkHref", n.getAttribute("linkHref"), e)] : e.schema.getValidRanges(n.getRanges(), "linkHref");

                var _iterator375 = _createForOfIteratorHelper(o),
                    _step375;

                try {
                  for (_iterator375.s(); !(_step375 = _iterator375.n()).done;) {
                    var _e268 = _step375.value;

                    if (t.removeAttribute("linkHref", _e268), i) {
                      var _iterator376 = _createForOfIteratorHelper(i.manualDecorators),
                          _step376;

                      try {
                        for (_iterator376.s(); !(_step376 = _iterator376.n()).done;) {
                          var _n249 = _step376.value;
                          t.removeAttribute(_n249.id, _e268);
                        }
                      } catch (err) {
                        _iterator376.e(err);
                      } finally {
                        _iterator376.f();
                      }
                    }
                  }
                } catch (err) {
                  _iterator375.e(err);
                } finally {
                  _iterator375.f();
                }
              });
            }
          }]);

          return pb;
        }(a);

        var bb = /*#__PURE__*/function () {
          function bb(_ref68) {
            var t = _ref68.id,
                e = _ref68.label,
                n = _ref68.attributes,
                i = _ref68.classes,
                o = _ref68.styles,
                r = _ref68.defaultValue;

            _classCallCheck(this, bb);

            this.id = t, this.set("value"), this.defaultValue = r, this.label = e, this.attributes = n, this.classes = i, this.styles = o;
          }

          _createClass(bb, [{
            key: "_createPattern",
            value: function _createPattern() {
              return {
                attributes: this.attributes,
                classes: this.classes,
                styles: this.styles
              };
            }
          }]);

          return bb;
        }();

        Object(o["default"])(bb, i["default"]);
        n(255);
        var kb = "ck-link_selected",
            _b = "automatic",
            wb = "manual",
            vb = /^(https?:)?\/\//;

        var yb = /*#__PURE__*/function (_r119) {
          _inherits(yb, _r119);

          var _super226 = _createSuper(yb);

          function yb(t) {
            var _this318;

            _classCallCheck(this, yb);

            _this318 = _super226.call(this, t), t.config.define("link", {
              addTargetToExternalLinks: !1
            });
            return _this318;
          }

          _createClass(yb, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: "linkHref"
              }), t.conversion["for"]("dataDowncast").attributeToElement({
                model: "linkHref",
                view: ub
              }), t.conversion["for"]("editingDowncast").attributeToElement({
                model: "linkHref",
                view: function view(t, e) {
                  return ub(hb(t), e);
                }
              }), t.conversion["for"]("upcast").elementToAttribute({
                view: {
                  name: "a",
                  attributes: {
                    href: !0
                  }
                },
                model: {
                  key: "linkHref",
                  value: function value(t) {
                    return t.getAttribute("href");
                  }
                }
              }), t.commands.add("link", new mb(t)), t.commands.add("unlink", new pb(t));

              var e = function (t, e) {
                var n = {
                  "Open in a new tab": t("Open in a new tab"),
                  Downloadable: t("Downloadable")
                };
                return e.forEach(function (t) {
                  return t.label && n[t.label] && (t.label = n[t.label]), t;
                }), e;
              }(t.t, function (t) {
                var e = [];
                if (t) for (var _i195 = 0, _Object$entries2 = Object.entries(t); _i195 < _Object$entries2.length; _i195++) {
                  var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i195], 2),
                      _n250 = _Object$entries2$_i[0],
                      _i196 = _Object$entries2$_i[1];

                  var _t291 = Object.assign({}, _i196, {
                    id: "link".concat(rb(_n250))
                  });

                  e.push(_t291);
                }
                return e;
              }(t.config.get("link.decorators")));

              this._enableAutomaticDecorators(e.filter(function (t) {
                return t.mode === _b;
              })), this._enableManualDecorators(e.filter(function (t) {
                return t.mode === wb;
              })), t.plugins.get(Gf).registerAttribute("linkHref"), function (t, e, n, i) {
                var o = t.editing.view,
                    r = new Set();
                o.document.registerPostFixer(function (o) {
                  var s = t.model.document.selection;
                  var a = !1;

                  if (s.hasAttribute(e)) {
                    var _c10 = ng(s.getFirstPosition(), e, s.getAttribute(e), t.model),
                        _l6 = t.editing.mapper.toViewRange(_c10);

                    var _iterator377 = _createForOfIteratorHelper(_l6.getItems()),
                        _step377;

                    try {
                      for (_iterator377.s(); !(_step377 = _iterator377.n()).done;) {
                        var _t292 = _step377.value;
                        _t292.is("element", n) && !_t292.hasClass(i) && (o.addClass(i, _t292), r.add(_t292), a = !0);
                      }
                    } catch (err) {
                      _iterator377.e(err);
                    } finally {
                      _iterator377.f();
                    }
                  }

                  return a;
                }), t.conversion["for"]("editingDowncast").add(function (t) {
                  function e() {
                    o.change(function (t) {
                      var _iterator378 = _createForOfIteratorHelper(r.values()),
                          _step378;

                      try {
                        for (_iterator378.s(); !(_step378 = _iterator378.n()).done;) {
                          var _e269 = _step378.value;
                          t.removeClass(i, _e269), r["delete"](_e269);
                        }
                      } catch (err) {
                        _iterator378.e(err);
                      } finally {
                        _iterator378.f();
                      }
                    });
                  }

                  t.on("insert", e, {
                    priority: "highest"
                  }), t.on("remove", e, {
                    priority: "highest"
                  }), t.on("attribute", e, {
                    priority: "highest"
                  }), t.on("selection", e, {
                    priority: "highest"
                  });
                });
              }(t, "linkHref", "a", kb), this._enableInsertContentSelectionAttributesFixer(), this._enableClickingAfterLink(), this._enableTypingOverLink(), this._handleDeleteContentAfterLink();
            }
          }, {
            key: "_enableAutomaticDecorators",
            value: function _enableAutomaticDecorators(t) {
              var e = this.editor,
                  n = e.commands.get("link").automaticDecorators;
              e.config.get("link.addTargetToExternalLinks") && n.add({
                id: "linkIsExternal",
                mode: _b,
                callback: function callback(t) {
                  return vb.test(t);
                },
                attributes: {
                  target: "_blank",
                  rel: "noopener noreferrer"
                }
              }), n.add(t), n.length && e.conversion["for"]("downcast").add(n.getDispatcher());
            }
          }, {
            key: "_enableManualDecorators",
            value: function _enableManualDecorators(t) {
              if (!t.length) return;
              var e = this.editor,
                  n = e.commands.get("link").manualDecorators;
              t.forEach(function (t) {
                e.model.schema.extend("$text", {
                  allowAttributes: t.id
                }), t = new bb(t), n.add(t), e.conversion["for"]("downcast").attributeToElement({
                  model: t.id,
                  view: function view(e, _ref69) {
                    var n = _ref69.writer;

                    if (e) {
                      var _e270 = n.createAttributeElement("a", t.attributes, {
                        priority: 5
                      });

                      t.classes && n.addClass(t.classes, _e270);

                      for (var _i197 in t.styles) {
                        n.setStyle(_i197, t.styles[_i197], _e270);
                      }

                      return n.setCustomProperty("link", !0, _e270), _e270;
                    }
                  }
                }), e.conversion["for"]("upcast").elementToAttribute({
                  view: _objectSpread({
                    name: "a"
                  }, t._createPattern()),
                  model: {
                    key: t.id
                  }
                });
              });
            }
          }, {
            key: "_enableInsertContentSelectionAttributesFixer",
            value: function _enableInsertContentSelectionAttributesFixer() {
              var t = this.editor.model,
                  e = t.document.selection;
              this.listenTo(t, "insertContent", function () {
                var n = e.anchor.nodeBefore,
                    i = e.anchor.nodeAfter;
                e.hasAttribute("linkHref") && n && n.hasAttribute("linkHref") && (i && i.hasAttribute("linkHref") || t.change(function (e) {
                  xb(e, Tb(t.schema));
                }));
              }, {
                priority: "low"
              });
            }
          }, {
            key: "_enableClickingAfterLink",
            value: function _enableClickingAfterLink() {
              var t = this.editor,
                  e = t.model;
              t.editing.view.addObserver(wh);
              var n = !1;
              this.listenTo(t.editing.view.document, "mousedown", function () {
                n = !0;
              }), this.listenTo(t.editing.view.document, "selectionChange", function () {
                if (!n) return;
                n = !1;
                var t = e.document.selection;
                if (!t.isCollapsed) return;
                if (!t.hasAttribute("linkHref")) return;
                var i = t.getFirstPosition(),
                    o = ng(i, "linkHref", t.getAttribute("linkHref"), e);
                (i.isTouching(o.start) || i.isTouching(o.end)) && e.change(function (t) {
                  xb(t, Tb(e.schema));
                });
              });
            }
          }, {
            key: "_enableTypingOverLink",
            value: function _enableTypingOverLink() {
              var t = this.editor,
                  e = t.editing.view;
              var n, i;
              this.listenTo(e.document, "delete", function () {
                i = !0;
              }, {
                priority: "high"
              }), this.listenTo(t.model, "deleteContent", function () {
                var e = t.model.document.selection;
                e.isCollapsed || (i ? i = !1 : Cb(t) && function (t) {
                  var e = t.document.selection,
                      n = e.getFirstPosition(),
                      i = e.getLastPosition(),
                      o = n.nodeAfter;
                  if (!o) return !1;
                  if (!o.is("$text")) return !1;
                  if (!o.hasAttribute("linkHref")) return !1;
                  var r = i.textNode || i.nodeBefore;
                  if (o === r) return !0;
                  return ng(n, "linkHref", o.getAttribute("linkHref"), t).containsRange(t.createRange(n, i), !0);
                }(t.model) && (n = e.getAttributes()));
              }, {
                priority: "high"
              }), this.listenTo(t.model, "insertContent", function (e, _ref70) {
                var _ref71 = _slicedToArray(_ref70, 1),
                    o = _ref71[0];

                i = !1, Cb(t) && n && (t.model.change(function (t) {
                  var _iterator379 = _createForOfIteratorHelper(n),
                      _step379;

                  try {
                    for (_iterator379.s(); !(_step379 = _iterator379.n()).done;) {
                      var _step379$value = _slicedToArray(_step379.value, 2),
                          _e271 = _step379$value[0],
                          _i198 = _step379$value[1];

                      t.setAttribute(_e271, _i198, o);
                    }
                  } catch (err) {
                    _iterator379.e(err);
                  } finally {
                    _iterator379.f();
                  }
                }), n = null);
              }, {
                priority: "high"
              });
            }
          }, {
            key: "_handleDeleteContentAfterLink",
            value: function _handleDeleteContentAfterLink() {
              var t = this.editor,
                  e = t.model,
                  n = e.document.selection,
                  i = t.editing.view;
              var o = !1,
                  r = !1;
              this.listenTo(i.document, "delete", function (t, e) {
                r = e.domEvent.keyCode === to.backspace;
              }, {
                priority: "high"
              }), this.listenTo(e, "deleteContent", function () {
                o = !1;
                var t = n.getFirstPosition(),
                    i = n.getAttribute("linkHref");
                if (!i) return;
                var r = ng(t, "linkHref", i, e);
                o = r.containsPosition(t) || r.end.isEqual(t);
              }, {
                priority: "high"
              }), this.listenTo(e, "deleteContent", function () {
                r && (r = !1, o || t.model.enqueueChange(function (t) {
                  xb(t, Tb(e.schema));
                }));
              }, {
                priority: "low"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "LinkEditing";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Gf, Wf, Rh];
            }
          }]);

          return yb;
        }(r);

        function xb(t, e) {
          t.removeSelectionAttribute("linkHref");

          var _iterator380 = _createForOfIteratorHelper(e),
              _step380;

          try {
            for (_iterator380.s(); !(_step380 = _iterator380.n()).done;) {
              var _n251 = _step380.value;
              t.removeSelectionAttribute(_n251);
            }
          } catch (err) {
            _iterator380.e(err);
          } finally {
            _iterator380.f();
          }
        }

        function Cb(t) {
          return t.plugins.get("Input").isInput(t.model.change(function (t) {
            return t.batch;
          }));
        }

        function Tb(t) {
          return t.getDefinition("$text").allowAttributes.filter(function (t) {
            return t.startsWith("link");
          });
        }

        n(257);

        var Ab = /*#__PURE__*/function (_Pd27) {
          _inherits(Ab, _Pd27);

          var _super227 = _createSuper(Ab);

          function Ab(t, e) {
            var _this319;

            _classCallCheck(this, Ab);

            _this319 = _super227.call(this, t);
            var n = t.t;
            _this319.focusTracker = new Ss(), _this319.keystrokes = new Is(), _this319.urlInputView = _this319._createUrlInput(), _this319.saveButtonView = _this319._createButton(n("Save"), Sd.check, "ck-button-save"), _this319.saveButtonView.type = "submit", _this319.cancelButtonView = _this319._createButton(n("Cancel"), Sd.cancel, "ck-button-cancel", "cancel"), _this319._manualDecoratorSwitches = _this319._createManualDecoratorSwitches(e), _this319.children = _this319._createFormChildren(e.manualDecorators), _this319._focusables = new Md(), _this319._focusCycler = new su({
              focusables: _this319._focusables,
              focusTracker: _this319.focusTracker,
              keystrokeHandler: _this319.keystrokes,
              actions: {
                focusPrevious: "shift + tab",
                focusNext: "tab"
              }
            });
            var i = ["ck", "ck-link-form", "ck-responsive-form"];
            e.manualDecorators.length && i.push("ck-link-form_layout-vertical", "ck-vertical-form"), _this319.setTemplate({
              tag: "form",
              attributes: {
                "class": i,
                tabindex: "-1"
              },
              children: _this319.children
            }), Od(_assertThisInitialized(_this319));
            return _this319;
          }

          _createClass(Ab, [{
            key: "getDecoratorSwitchesState",
            value: function getDecoratorSwitchesState() {
              return Array.from(this._manualDecoratorSwitches).reduce(function (t, e) {
                return t[e.name] = e.isOn, t;
              }, {});
            }
          }, {
            key: "render",
            value: function render() {
              var _this320 = this;

              _get3(_getPrototypeOf(Ab.prototype), "render", this).call(this), Rd({
                view: this
              }), [this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches), [this.saveButtonView, this.cancelButtonView]).forEach(function (t) {
                _this320._focusables.add(t), _this320.focusTracker.add(t.element);
              }), this.keystrokes.listenTo(this.element);
            }
          }, {
            key: "focus",
            value: function focus() {
              this._focusCycler.focusFirst();
            }
          }, {
            key: "_createUrlInput",
            value: function _createUrlInput() {
              var t = this.locale.t,
                  e = new ju(this.locale, Bu);
              return e.label = t("Link URL"), e;
            }
          }, {
            key: "_createButton",
            value: function _createButton(t, e, n, i) {
              var o = new nu(this.locale);
              return o.set({
                label: t,
                icon: e,
                tooltip: !0
              }), o.extendTemplate({
                attributes: {
                  "class": n
                }
              }), i && o.delegate("execute").to(this, i), o;
            }
          }, {
            key: "_createManualDecoratorSwitches",
            value: function _createManualDecoratorSwitches(t) {
              var _this321 = this;

              var e = this.createCollection();

              var _iterator381 = _createForOfIteratorHelper(t.manualDecorators),
                  _step381;

              try {
                var _loop9 = function _loop9() {
                  var n = _step381.value;
                  var i = new iu(_this321.locale);
                  i.set({
                    name: n.id,
                    label: n.label,
                    withText: !0
                  }), i.bind("isOn").toMany([n, t], "value", function (t, e) {
                    return void 0 === e && void 0 === t ? n.defaultValue : t;
                  }), i.on("execute", function () {
                    n.set("value", !i.isOn);
                  }), e.add(i);
                };

                for (_iterator381.s(); !(_step381 = _iterator381.n()).done;) {
                  _loop9();
                }
              } catch (err) {
                _iterator381.e(err);
              } finally {
                _iterator381.f();
              }

              return e;
            }
          }, {
            key: "_createFormChildren",
            value: function _createFormChildren(t) {
              var e = this.createCollection();

              if (e.add(this.urlInputView), t.length) {
                var _t293 = new Pd();

                _t293.setTemplate({
                  tag: "ul",
                  children: this._manualDecoratorSwitches.map(function (t) {
                    return {
                      tag: "li",
                      children: [t],
                      attributes: {
                        "class": ["ck", "ck-list__item"]
                      }
                    };
                  }),
                  attributes: {
                    "class": ["ck", "ck-reset", "ck-list"]
                  }
                }), e.add(_t293);
              }

              return e.add(this.saveButtonView), e.add(this.cancelButtonView), e;
            }
          }]);

          return Ab;
        }(Pd);

        n(259);
        var Eb = n(156),
            Sb = n.n(Eb);

        var Ib = /*#__PURE__*/function (_Pd28) {
          _inherits(Ib, _Pd28);

          var _super228 = _createSuper(Ib);

          function Ib(t) {
            var _this322;

            _classCallCheck(this, Ib);

            _this322 = _super228.call(this, t);
            var e = t.t;
            _this322.focusTracker = new Ss(), _this322.keystrokes = new Is(), _this322.previewButtonView = _this322._createPreviewButton(), _this322.unlinkButtonView = _this322._createButton(e("Unlink"), Sb.a, "unlink"), _this322.editButtonView = _this322._createButton(e("Edit link"), Sd.pencil, "edit"), _this322.set("href"), _this322._focusables = new Md(), _this322._focusCycler = new su({
              focusables: _this322._focusables,
              focusTracker: _this322.focusTracker,
              keystrokeHandler: _this322.keystrokes,
              actions: {
                focusPrevious: "shift + tab",
                focusNext: "tab"
              }
            }), _this322.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-link-actions", "ck-responsive-form"],
                tabindex: "-1"
              },
              children: [_this322.previewButtonView, _this322.editButtonView, _this322.unlinkButtonView]
            });
            return _this322;
          }

          _createClass(Ib, [{
            key: "render",
            value: function render() {
              var _this323 = this;

              _get3(_getPrototypeOf(Ib.prototype), "render", this).call(this), [this.previewButtonView, this.editButtonView, this.unlinkButtonView].forEach(function (t) {
                _this323._focusables.add(t), _this323.focusTracker.add(t.element);
              }), this.keystrokes.listenTo(this.element);
            }
          }, {
            key: "focus",
            value: function focus() {
              this._focusCycler.focusFirst();
            }
          }, {
            key: "_createButton",
            value: function _createButton(t, e, n) {
              var i = new nu(this.locale);
              return i.set({
                label: t,
                icon: e,
                tooltip: !0
              }), i.delegate("execute").to(this, n), i;
            }
          }, {
            key: "_createPreviewButton",
            value: function _createPreviewButton() {
              var t = new nu(this.locale),
                  e = this.bindTemplate,
                  n = this.t;
              return t.set({
                withText: !0,
                tooltip: n("Open link in new tab")
              }), t.extendTemplate({
                attributes: {
                  "class": ["ck", "ck-link-actions__preview"],
                  href: e.to("href", function (t) {
                    return t && hb(t);
                  }),
                  target: "_blank",
                  rel: "noopener noreferrer"
                }
              }), t.bind("label").to(this, "href", function (t) {
                return t || n("This link has no URL");
              }), t.bind("isEnabled").to(this, "href", function (t) {
                return !!t;
              }), t.template.tag = "a", t.template.eventListeners = {}, t;
            }
          }]);

          return Ib;
        }(Pd);

        var Ob = n(157),
            Rb = n.n(Ob);
        var Mb = "link-ui";

        var Pb = /*#__PURE__*/function (_r120) {
          _inherits(Pb, _r120);

          var _super229 = _createSuper(Pb);

          function Pb() {
            _classCallCheck(this, Pb);

            return _super229.apply(this, arguments);
          }

          _createClass(Pb, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.editing.view.addObserver(_h), this.actionsView = this._createActionsView(), this.formView = this._createFormView(), this._balloon = t.plugins.get(Qu), this._createToolbarLinkButton(), this._enableUserBalloonInteractions(), t.conversion["for"]("editingDowncast").markerToHighlight({
                model: Mb,
                view: {
                  classes: ["ck-fake-link-selection"]
                }
              }), t.conversion["for"]("editingDowncast").markerToElement({
                model: Mb,
                view: {
                  name: "span",
                  classes: ["ck-fake-link-selection", "ck-fake-link-selection_collapsed"]
                }
              });
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(Pb.prototype), "destroy", this).call(this), this.formView.destroy();
            }
          }, {
            key: "_createActionsView",
            value: function _createActionsView() {
              var _this324 = this;

              var t = this.editor,
                  e = new Ib(t.locale),
                  n = t.commands.get("link"),
                  i = t.commands.get("unlink");
              return e.bind("href").to(n, "value"), e.editButtonView.bind("isEnabled").to(n), e.unlinkButtonView.bind("isEnabled").to(i), this.listenTo(e, "edit", function () {
                _this324._addFormView();
              }), this.listenTo(e, "unlink", function () {
                t.execute("unlink"), _this324._hideUI();
              }), e.keystrokes.set("Esc", function (t, e) {
                _this324._hideUI(), e();
              }), e.keystrokes.set(db, function (t, e) {
                _this324._addFormView(), e();
              }), e;
            }
          }, {
            key: "_createFormView",
            value: function _createFormView() {
              var _this325 = this;

              var t = this.editor,
                  e = t.commands.get("link"),
                  n = t.config.get("link.defaultProtocol"),
                  i = new Ab(t.locale, e);
              return i.urlInputView.fieldView.bind("value").to(e, "value"), i.urlInputView.bind("isReadOnly").to(e, "isEnabled", function (t) {
                return !t;
              }), i.saveButtonView.bind("isEnabled").to(e), this.listenTo(i, "submit", function () {
                var e = i.urlInputView.fieldView.element.value,
                    o = gb(e, n);
                t.execute("link", o, i.getDecoratorSwitchesState()), _this325._closeFormView();
              }), this.listenTo(i, "cancel", function () {
                _this325._closeFormView();
              }), i.keystrokes.set("Esc", function (t, e) {
                _this325._closeFormView(), e();
              }), i;
            }
          }, {
            key: "_createToolbarLinkButton",
            value: function _createToolbarLinkButton() {
              var _this326 = this;

              var t = this.editor,
                  e = t.commands.get("link"),
                  n = t.t;
              t.keystrokes.set(db, function (t, n) {
                n(), e.isEnabled && _this326._showUI(!0);
              }), t.ui.componentFactory.add("link", function (t) {
                var i = new nu(t);
                return i.isEnabled = !0, i.label = n("Link"), i.icon = Rb.a, i.keystroke = db, i.tooltip = !0, i.isToggleable = !0, i.bind("isEnabled").to(e, "isEnabled"), i.bind("isOn").to(e, "value", function (t) {
                  return !!t;
                }), _this326.listenTo(i, "execute", function () {
                  return _this326._showUI(!0);
                }), i;
              });
            }
          }, {
            key: "_enableUserBalloonInteractions",
            value: function _enableUserBalloonInteractions() {
              var _this327 = this;

              var t = this.editor.editing.view.document;
              this.listenTo(t, "click", function () {
                _this327._getSelectedLinkElement() && _this327._showUI();
              }), this.editor.keystrokes.set("Tab", function (t, e) {
                _this327._areActionsVisible && !_this327.actionsView.focusTracker.isFocused && (_this327.actionsView.focus(), e());
              }, {
                priority: "high"
              }), this.editor.keystrokes.set("Esc", function (t, e) {
                _this327._isUIVisible && (_this327._hideUI(), e());
              }), Id({
                emitter: this.formView,
                activator: function activator() {
                  return _this327._isUIInPanel;
                },
                contextElements: [this._balloon.view.element],
                callback: function callback() {
                  return _this327._hideUI();
                }
              });
            }
          }, {
            key: "_addActionsView",
            value: function _addActionsView() {
              this._areActionsInPanel || this._balloon.add({
                view: this.actionsView,
                position: this._getBalloonPositionData()
              });
            }
          }, {
            key: "_addFormView",
            value: function _addFormView() {
              if (this._isFormInPanel) return;
              var t = this.editor.commands.get("link");
              this.formView.disableCssTransitions(), this._balloon.add({
                view: this.formView,
                position: this._getBalloonPositionData()
              }), this._balloon.visibleView === this.formView && this.formView.urlInputView.fieldView.select(), this.formView.enableCssTransitions(), this.formView.urlInputView.fieldView.element.value = t.value || "";
            }
          }, {
            key: "_closeFormView",
            value: function _closeFormView() {
              var t = this.editor.commands.get("link");
              t.restoreManualDecoratorStates(), void 0 !== t.value ? this._removeFormView() : this._hideUI();
            }
          }, {
            key: "_removeFormView",
            value: function _removeFormView() {
              this._isFormInPanel && (this.formView.saveButtonView.focus(), this._balloon.remove(this.formView), this.editor.editing.view.focus(), this._hideFakeVisualSelection());
            }
          }, {
            key: "_showUI",
            value: function _showUI() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
              this._getSelectedLinkElement() ? (this._areActionsVisible ? this._addFormView() : this._addActionsView(), t && this._balloon.showStack("main")) : (this._showFakeVisualSelection(), this._addActionsView(), t && this._balloon.showStack("main"), this._addFormView()), this._startUpdatingUI();
            }
          }, {
            key: "_hideUI",
            value: function _hideUI() {
              if (!this._isUIInPanel) return;
              var t = this.editor;
              this.stopListening(t.ui, "update"), this.stopListening(this._balloon, "change:visibleView"), t.editing.view.focus(), this._removeFormView(), this._balloon.remove(this.actionsView), this._hideFakeVisualSelection();
            }
          }, {
            key: "_startUpdatingUI",
            value: function _startUpdatingUI() {
              var _this328 = this;

              var t = this.editor,
                  e = t.editing.view.document;

              var n = this._getSelectedLinkElement(),
                  i = r();

              var o = function o() {
                var t = _this328._getSelectedLinkElement(),
                    e = r();

                n && !t || !n && e !== i ? _this328._hideUI() : _this328._isUIVisible && _this328._balloon.updatePosition(_this328._getBalloonPositionData()), n = t, i = e;
              };

              function r() {
                return e.selection.focus.getAncestors().reverse().find(function (t) {
                  return t.is("element");
                });
              }

              this.listenTo(t.ui, "update", o), this.listenTo(this._balloon, "change:visibleView", o);
            }
          }, {
            key: "_isFormInPanel",
            get: function get() {
              return this._balloon.hasView(this.formView);
            }
          }, {
            key: "_areActionsInPanel",
            get: function get() {
              return this._balloon.hasView(this.actionsView);
            }
          }, {
            key: "_areActionsVisible",
            get: function get() {
              return this._balloon.visibleView === this.actionsView;
            }
          }, {
            key: "_isUIInPanel",
            get: function get() {
              return this._isFormInPanel || this._areActionsInPanel;
            }
          }, {
            key: "_isUIVisible",
            get: function get() {
              return this._balloon.visibleView == this.formView || this._areActionsVisible;
            }
          }, {
            key: "_getBalloonPositionData",
            value: function _getBalloonPositionData() {
              var _this329 = this;

              var t = this.editor.editing.view,
                  e = this.editor.model,
                  n = t.document;
              var i = null;

              if (e.markers.has(Mb)) {
                var _e272 = Array.from(this.editor.editing.mapper.markerNameToElements(Mb)),
                    _n252 = t.createRange(t.createPositionBefore(_e272[0]), t.createPositionAfter(_e272[_e272.length - 1]));

                i = t.domConverter.viewRangeToDom(_n252);
              } else i = function i() {
                var e = _this329._getSelectedLinkElement();

                return e ? t.domConverter.mapViewToDom(e) : t.domConverter.viewRangeToDom(n.selection.getFirstRange());
              };

              return {
                target: i
              };
            }
          }, {
            key: "_getSelectedLinkElement",
            value: function _getSelectedLinkElement() {
              var t = this.editor.editing.view,
                  e = t.document.selection,
                  n = e.getSelectedElement();
              if (e.isCollapsed || n && Gh(n)) return Nb(e.getFirstPosition());
              {
                var _n253 = e.getFirstRange().getTrimmed(),
                    _i199 = Nb(_n253.start),
                    _o103 = Nb(_n253.end);

                return _i199 && _i199 == _o103 && t.createRangeIn(_i199).getTrimmed().isEqual(_n253) ? _i199 : null;
              }
            }
          }, {
            key: "_showFakeVisualSelection",
            value: function _showFakeVisualSelection() {
              var t = this.editor.model;
              t.change(function (e) {
                var n = t.document.selection.getFirstRange();
                if (t.markers.has(Mb)) e.updateMarker(Mb, {
                  range: n
                });else if (n.start.isAtEnd) {
                  var _i200 = n.start.getLastMatchingPosition(function (_ref72) {
                    var e = _ref72.item;
                    return !t.schema.isContent(e);
                  }, {
                    boundaries: n
                  });

                  e.addMarker(Mb, {
                    usingOperation: !1,
                    affectsData: !1,
                    range: e.createRange(_i200, n.end)
                  });
                } else e.addMarker(Mb, {
                  usingOperation: !1,
                  affectsData: !1,
                  range: n
                });
              });
            }
          }, {
            key: "_hideFakeVisualSelection",
            value: function _hideFakeVisualSelection() {
              var t = this.editor.model;
              t.markers.has(Mb) && t.change(function (t) {
                t.removeMarker(Mb);
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Qu];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "LinkUI";
            }
          }]);

          return Pb;
        }(r);

        function Nb(t) {
          return t.getAncestors().find(function (t) {
            return function (t) {
              return t.is("attributeElement") && !!t.getCustomProperty("link");
            }(t);
          });
        }

        var Db = 4,
            jb = new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$", "i"),
            Bb = 2;

        var Lb = /*#__PURE__*/function (_r121) {
          _inherits(Lb, _r121);

          var _super230 = _createSuper(Lb);

          function Lb() {
            _classCallCheck(this, Lb);

            return _super230.apply(this, arguments);
          }

          _createClass(Lb, [{
            key: "init",
            value: function init() {
              var _this330 = this;

              var t = this.editor.model.document.selection;
              t.on("change:range", function () {
                _this330.isEnabled = !t.anchor.parent.is("element", "codeBlock");
              }), this._enableTypingHandling();
            }
          }, {
            key: "afterInit",
            value: function afterInit() {
              this._enableEnterHandling(), this._enableShiftEnterHandling();
            }
          }, {
            key: "_enableTypingHandling",
            value: function _enableTypingHandling() {
              var _this331 = this;

              var t = this.editor,
                  e = new Jf(t.model, function (t) {
                if (!function (t) {
                  return t.length > Db && " " === t[t.length - 1] && " " !== t[t.length - 2];
                }(t)) return;
                var e = zb(t.substr(0, t.length - 1));
                return e ? {
                  url: e
                } : void 0;
              }),
                  n = t.plugins.get("Input");
              e.on("matched:data", function (e, i) {
                var o = i.batch,
                    r = i.range,
                    s = i.url;
                if (!n.isInput(o)) return;
                var a = r.end.getShiftedBy(-1),
                    c = a.getShiftedBy(-s.length),
                    l = t.model.createRange(c, a);

                _this331._applyAutoLink(s, l);
              }), e.bind("isEnabled").to(this);
            }
          }, {
            key: "_enableEnterHandling",
            value: function _enableEnterHandling() {
              var _this332 = this;

              var t = this.editor,
                  e = t.model,
                  n = t.commands.get("enter");
              n && n.on("execute", function () {
                var t = e.document.selection.getFirstPosition();
                if (!t.parent.previousSibling) return;
                var n = e.createRangeIn(t.parent.previousSibling);

                _this332._checkAndApplyAutoLinkOnRange(n);
              });
            }
          }, {
            key: "_enableShiftEnterHandling",
            value: function _enableShiftEnterHandling() {
              var _this333 = this;

              var t = this.editor,
                  e = t.model,
                  n = t.commands.get("shiftEnter");
              n && n.on("execute", function () {
                var t = e.document.selection.getFirstPosition(),
                    n = e.createRange(e.createPositionAt(t.parent, 0), t.getShiftedBy(-1));

                _this333._checkAndApplyAutoLinkOnRange(n);
              });
            }
          }, {
            key: "_checkAndApplyAutoLinkOnRange",
            value: function _checkAndApplyAutoLinkOnRange(t) {
              var e = this.editor.model,
                  _Yf2 = Yf(t, e),
                  n = _Yf2.text,
                  i = _Yf2.range,
                  o = zb(n);

              if (o) {
                var _t294 = e.createRange(i.end.getShiftedBy(-o.length), i.end);

                this._applyAutoLink(o, _t294);
              }
            }
          }, {
            key: "_applyAutoLink",
            value: function _applyAutoLink(t, e) {
              var _this334 = this;

              var n = this.editor.model,
                  i = this.editor.plugins.get("Delete");
              this.isEnabled && function (t, e) {
                return e.schema.checkAttributeInSelection(e.createSelection(t), "linkHref");
              }(e, n) && n.enqueueChange(function (o) {
                var r = _this334.editor.config.get("link.defaultProtocol"),
                    s = gb(t, r);

                o.setAttribute("linkHref", s, e), n.enqueueChange(function () {
                  i.requestUndoOnBackspace();
                });
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Fh];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "AutoLink";
            }
          }]);

          return Lb;
        }(r);

        function zb(t) {
          var e = jb.exec(t);
          return e ? e[Bb] : null;
        }

        var Fb = /*#__PURE__*/function (_a45) {
          _inherits(Fb, _a45);

          var _super231 = _createSuper(Fb);

          function Fb(t, e) {
            var _this335;

            _classCallCheck(this, Fb);

            _this335 = _super231.call(this, t), _this335.type = e;
            return _this335;
          }

          _createClass(Fb, [{
            key: "refresh",
            value: function refresh() {
              this.value = this._getValue(), this.isEnabled = this._checkEnabled();
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this336 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document,
                  i = Array.from(n.selection.getSelectedBlocks()).filter(function (t) {
                return Ub(t, e.schema);
              }),
                  o = void 0 !== t.forceValue ? !t.forceValue : this.value;
              e.change(function (t) {
                if (o) {
                  var _e273 = i[i.length - 1].nextSibling,
                      _n254 = Number.POSITIVE_INFINITY,
                      _o104 = [];

                  for (; _e273 && "listItem" == _e273.name && 0 !== _e273.getAttribute("listIndent");) {
                    var _t295 = _e273.getAttribute("listIndent");

                    _t295 < _n254 && (_n254 = _t295);

                    var _i201 = _t295 - _n254;

                    _o104.push({
                      element: _e273,
                      listIndent: _i201
                    }), _e273 = _e273.nextSibling;
                  }

                  _o104 = _o104.reverse();

                  var _iterator382 = _createForOfIteratorHelper(_o104),
                      _step382;

                  try {
                    for (_iterator382.s(); !(_step382 = _iterator382.n()).done;) {
                      var _e274 = _step382.value;
                      t.setAttribute("listIndent", _e274.listIndent, _e274.element);
                    }
                  } catch (err) {
                    _iterator382.e(err);
                  } finally {
                    _iterator382.f();
                  }
                }

                if (!o) {
                  var _t296 = Number.POSITIVE_INFINITY;

                  var _iterator383 = _createForOfIteratorHelper(i),
                      _step383;

                  try {
                    for (_iterator383.s(); !(_step383 = _iterator383.n()).done;) {
                      var _e275 = _step383.value;
                      _e275.is("element", "listItem") && _e275.getAttribute("listIndent") < _t296 && (_t296 = _e275.getAttribute("listIndent"));
                    }
                  } catch (err) {
                    _iterator383.e(err);
                  } finally {
                    _iterator383.f();
                  }

                  Vb(i, !0, _t296 = 0 === _t296 ? 1 : _t296), Vb(i, !1, _t296);
                }

                var _iterator384 = _createForOfIteratorHelper(i.reverse()),
                    _step384;

                try {
                  for (_iterator384.s(); !(_step384 = _iterator384.n()).done;) {
                    var _e276 = _step384.value;
                    o && "listItem" == _e276.name ? t.rename(_e276, "paragraph") : o || "listItem" == _e276.name ? o || "listItem" != _e276.name || _e276.getAttribute("listType") == _this336.type || t.setAttribute("listType", _this336.type, _e276) : (t.setAttributes({
                      listType: _this336.type,
                      listIndent: 0
                    }, _e276), t.rename(_e276, "listItem"));
                  }
                } catch (err) {
                  _iterator384.e(err);
                } finally {
                  _iterator384.f();
                }

                _this336.fire("_executeCleanup", i);
              });
            }
          }, {
            key: "_getValue",
            value: function _getValue() {
              var t = Es(this.editor.model.document.selection.getSelectedBlocks());
              return !!t && t.is("element", "listItem") && t.getAttribute("listType") == this.type;
            }
          }, {
            key: "_checkEnabled",
            value: function _checkEnabled() {
              if (this.value) return !0;
              var t = this.editor.model.document.selection,
                  e = this.editor.model.schema,
                  n = Es(t.getSelectedBlocks());
              return !!n && Ub(n, e);
            }
          }]);

          return Fb;
        }(a);

        function Vb(t, e, n) {
          var i = e ? t[0] : t[t.length - 1];

          if (i.is("element", "listItem")) {
            var _o105 = i[e ? "previousSibling" : "nextSibling"],
                _r122 = i.getAttribute("listIndent");

            for (; _o105 && _o105.is("element", "listItem") && _o105.getAttribute("listIndent") >= n;) {
              _r122 > _o105.getAttribute("listIndent") && (_r122 = _o105.getAttribute("listIndent")), _o105.getAttribute("listIndent") == _r122 && t[e ? "unshift" : "push"](_o105), _o105 = _o105[e ? "previousSibling" : "nextSibling"];
            }
          }
        }

        function Ub(t, e) {
          return e.checkChild(t.parent, "listItem") && !e.isObject(t);
        }

        var Hb = /*#__PURE__*/function (_a46) {
          _inherits(Hb, _a46);

          var _super232 = _createSuper(Hb);

          function Hb(t, e) {
            var _this337;

            _classCallCheck(this, Hb);

            _this337 = _super232.call(this, t), _this337._indentBy = "forward" == e ? 1 : -1;
            return _this337;
          }

          _createClass(Hb, [{
            key: "refresh",
            value: function refresh() {
              this.isEnabled = this._checkEnabled();
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this338 = this;

              var t = this.editor.model,
                  e = t.document;
              var n = Array.from(e.selection.getSelectedBlocks());
              t.change(function (t) {
                var e = n[n.length - 1];
                var i = e.nextSibling;

                for (; i && "listItem" == i.name && i.getAttribute("listIndent") > e.getAttribute("listIndent");) {
                  n.push(i), i = i.nextSibling;
                }

                _this338._indentBy < 0 && (n = n.reverse());

                var _iterator385 = _createForOfIteratorHelper(n),
                    _step385;

                try {
                  for (_iterator385.s(); !(_step385 = _iterator385.n()).done;) {
                    var _e277 = _step385.value;

                    var _n255 = _e277.getAttribute("listIndent") + _this338._indentBy;

                    _n255 < 0 ? t.rename(_e277, "paragraph") : t.setAttribute("listIndent", _n255, _e277);
                  }
                } catch (err) {
                  _iterator385.e(err);
                } finally {
                  _iterator385.f();
                }

                _this338.fire("_executeCleanup", n);
              });
            }
          }, {
            key: "_checkEnabled",
            value: function _checkEnabled() {
              var t = Es(this.editor.model.document.selection.getSelectedBlocks());
              if (!t || !t.is("element", "listItem")) return !1;

              if (this._indentBy > 0) {
                var _e278 = t.getAttribute("listIndent"),
                    _n256 = t.getAttribute("listType");

                var _i202 = t.previousSibling;

                for (; _i202 && _i202.is("element", "listItem") && _i202.getAttribute("listIndent") >= _e278;) {
                  if (_i202.getAttribute("listIndent") == _e278) return _i202.getAttribute("listType") == _n256;
                  _i202 = _i202.previousSibling;
                }

                return !1;
              }

              return !0;
            }
          }]);

          return Hb;
        }(a);

        function qb(t, e) {
          var n = e.mapper,
              i = e.writer,
              o = "numbered" == t.getAttribute("listType") ? "ol" : "ul",
              r = function (t) {
            var e = t.createContainerElement("li");
            return e.getFillerOffset = Kb, e;
          }(i),
              s = i.createContainerElement(o, null);

          return i.insert(i.createPositionAt(s, 0), r), n.bindElements(t, r), r;
        }

        function Wb(t, e, n, i) {
          var o = e.parent,
              r = n.mapper,
              s = n.writer;
          var a = r.toViewPosition(i.createPositionBefore(t));
          var c = Jb(t.previousSibling, {
            sameIndent: !0,
            smallerIndent: !0,
            listIndent: t.getAttribute("listIndent")
          }),
              l = t.previousSibling;

          if (c && c.getAttribute("listIndent") == t.getAttribute("listIndent")) {
            var _t297 = r.toViewElement(c);

            a = s.breakContainer(s.createPositionAfter(_t297));
          } else if (l && "listItem" == l.name) {
            a = r.toViewPosition(i.createPositionAt(l, "end"));

            var _t298 = r.findMappedViewAncestor(a),
                _e279 = function (t) {
              var _iterator386 = _createForOfIteratorHelper(t.getChildren()),
                  _step386;

              try {
                for (_iterator386.s(); !(_step386 = _iterator386.n()).done;) {
                  var _e280 = _step386.value;
                  if ("ul" == _e280.name || "ol" == _e280.name) return _e280;
                }
              } catch (err) {
                _iterator386.e(err);
              } finally {
                _iterator386.f();
              }

              return null;
            }(_t298);

            a = _e279 ? s.createPositionBefore(_e279) : s.createPositionAt(_t298, "end");
          } else a = r.toViewPosition(i.createPositionBefore(t));

          if (a = Yb(a), s.insert(a, o), l && "listItem" == l.name) {
            var _t299 = r.toViewElement(l),
                _n257 = s.createRange(s.createPositionAt(_t299, 0), a).getWalker({
              ignoreElementEnd: !0
            });

            var _iterator387 = _createForOfIteratorHelper(_n257),
                _step387;

            try {
              for (_iterator387.s(); !(_step387 = _iterator387.n()).done;) {
                var _t300 = _step387.value;

                if (_t300.item.is("element", "li")) {
                  var _i203 = s.breakContainer(s.createPositionBefore(_t300.item)),
                      _o106 = _t300.item.parent,
                      _r123 = s.createPositionAt(e, "end");

                  $b(s, _r123.nodeBefore, _r123.nodeAfter), s.move(s.createRangeOn(_o106), _r123), _n257.position = _i203;
                }
              }
            } catch (err) {
              _iterator387.e(err);
            } finally {
              _iterator387.f();
            }
          } else {
            var _n258 = o.nextSibling;

            if (_n258 && (_n258.is("element", "ul") || _n258.is("element", "ol"))) {
              var _i204 = null;

              var _iterator388 = _createForOfIteratorHelper(_n258.getChildren()),
                  _step388;

              try {
                for (_iterator388.s(); !(_step388 = _iterator388.n()).done;) {
                  var _e281 = _step388.value;

                  var _n259 = r.toModelElement(_e281);

                  if (!(_n259 && _n259.getAttribute("listIndent") > t.getAttribute("listIndent"))) break;
                  _i204 = _e281;
                }
              } catch (err) {
                _iterator388.e(err);
              } finally {
                _iterator388.f();
              }

              _i204 && (s.breakContainer(s.createPositionAfter(_i204)), s.move(s.createRangeOn(_i204.parent), s.createPositionAt(e, "end")));
            }
          }

          $b(s, o, o.nextSibling), $b(s, o.previousSibling, o);
        }

        function $b(t, e, n) {
          return !e || !n || "ul" != e.name && "ol" != e.name ? null : e.name != n.name || e.getAttribute("class") !== n.getAttribute("class") ? null : t.mergeContainers(t.createPositionAfter(e));
        }

        function Yb(t) {
          return t.getLastMatchingPosition(function (t) {
            return t.item.is("uiElement");
          });
        }

        function Jb(t, e) {
          var n = !!e.sameIndent,
              i = !!e.smallerIndent,
              o = e.listIndent;
          var r = t;

          for (; r && "listItem" == r.name;) {
            var _t301 = r.getAttribute("listIndent");

            if (n && o == _t301 || i && o > _t301) return r;
            r = "forward" === e.direction ? r.nextSibling : r.previousSibling;
          }

          return null;
        }

        function Gb(t, e, n, i) {
          t.ui.componentFactory.add(e, function (o) {
            var r = t.commands.get(e),
                s = new nu(o);
            return s.set({
              label: n,
              icon: i,
              tooltip: !0,
              isToggleable: !0
            }), s.bind("isOn", "isEnabled").to(r, "value", "isEnabled"), s.on("execute", function () {
              t.execute(e), t.editing.view.focus();
            }), s;
          });
        }

        function Kb() {
          var t = !this.isEmpty && ("ul" == this.getChild(0).name || "ol" == this.getChild(0).name);
          return this.isEmpty || t ? 0 : Ci.call(this);
        }

        function Qb(t) {
          return function (e, n, i) {
            var o = i.consumable;
            if (!o.test(n.item, "insert") || !o.test(n.item, "attribute:listType") || !o.test(n.item, "attribute:listIndent")) return;
            o.consume(n.item, "insert"), o.consume(n.item, "attribute:listType"), o.consume(n.item, "attribute:listIndent");
            var r = n.item;
            Wb(r, qb(r, i), i, t);
          };
        }

        function Xb(t, e, n) {
          if (!n.consumable.consume(e.item, "attribute:listType")) return;
          var i = n.mapper.toViewElement(e.item),
              o = n.writer;
          o.breakContainer(o.createPositionBefore(i)), o.breakContainer(o.createPositionAfter(i));
          var r = i.parent,
              s = "numbered" == e.attributeNewValue ? "ol" : "ul";
          o.rename(s, r);
        }

        function Zb(t, e, n) {
          var i = n.mapper.toViewElement(e.item).parent,
              o = n.writer;
          $b(o, i, i.nextSibling), $b(o, i.previousSibling, i);

          var _iterator389 = _createForOfIteratorHelper(e.item.getChildren()),
              _step389;

          try {
            for (_iterator389.s(); !(_step389 = _iterator389.n()).done;) {
              var _t302 = _step389.value;
              n.consumable.consume(_t302, "insert");
            }
          } catch (err) {
            _iterator389.e(err);
          } finally {
            _iterator389.f();
          }
        }

        function tk(t, e, n) {
          if ("listItem" != e.item.name) {
            var _t303 = n.mapper.toViewPosition(e.range.start);

            var _i205 = n.writer,
                _o107 = [];

            for (; ("ul" == _t303.parent.name || "ol" == _t303.parent.name) && "li" == (_t303 = _i205.breakContainer(_t303)).parent.name;) {
              var _e282 = _t303,
                  _n260 = _i205.createPositionAt(_t303.parent, "end");

              if (!_e282.isEqual(_n260)) {
                var _t304 = _i205.remove(_i205.createRange(_e282, _n260));

                _o107.push(_t304);
              }

              _t303 = _i205.createPositionAfter(_t303.parent);
            }

            if (_o107.length > 0) {
              for (var _e283 = 0; _e283 < _o107.length; _e283++) {
                var _n261 = _t303.nodeBefore;

                if (_t303 = _i205.insert(_t303, _o107[_e283]).end, _e283 > 0) {
                  var _e284 = $b(_i205, _n261, _n261.nextSibling);

                  _e284 && _e284.parent == _n261 && _t303.offset--;
                }
              }

              $b(_i205, _t303.nodeBefore, _t303.nodeAfter);
            }
          }
        }

        function ek(t, e, n) {
          var i = n.mapper.toViewPosition(e.position),
              o = i.nodeBefore,
              r = i.nodeAfter;
          $b(n.writer, o, r);
        }

        function nk(t, e, n) {
          if (n.consumable.consume(e.viewItem, {
            name: !0
          })) {
            var _t305 = n.writer,
                _i206 = _t305.createElement("listItem"),
                _o108 = function (t) {
              var e = 0,
                  n = t.parent;

              for (; n;) {
                if (n.is("element", "li")) e++;else {
                  var _t306 = n.previousSibling;
                  _t306 && _t306.is("element", "li") && e++;
                }
                n = n.parent;
              }

              return e;
            }(e.viewItem);

            _t305.setAttribute("listIndent", _o108, _i206);

            var _r124 = e.viewItem.parent && "ol" == e.viewItem.parent.name ? "numbered" : "bulleted";

            if (_t305.setAttribute("listType", _r124, _i206), !n.safeInsert(_i206, e.modelCursor)) return;

            var _s36 = function (t, e, n) {
              var i = n.writer,
                  o = n.schema;
              var r = i.createPositionAfter(t);

              var _iterator390 = _createForOfIteratorHelper(e),
                  _step390;

              try {
                for (_iterator390.s(); !(_step390 = _iterator390.n()).done;) {
                  var _s37 = _step390.value;
                  if ("ul" == _s37.name || "ol" == _s37.name) r = n.convertItem(_s37, r).modelCursor;else {
                    var _e285 = n.convertItem(_s37, i.createPositionAt(t, "end")),
                        _a47 = _e285.modelRange.start.nodeAfter,
                        _c11 = _a47 && _a47.is("element") && !o.checkChild(t, _a47.name);

                    _c11 && (t = _e285.modelCursor.parent.is("element", "listItem") ? _e285.modelCursor.parent : ak(_e285.modelCursor), r = i.createPositionAfter(t));
                  }
                }
              } catch (err) {
                _iterator390.e(err);
              } finally {
                _iterator390.f();
              }

              return r;
            }(_i206, e.viewItem.getChildren(), n);

            e.modelRange = _t305.createRange(e.modelCursor, _s36), n.updateConversionResult(_i206, e);
          }
        }

        function ik(t, e, n) {
          if (n.consumable.test(e.viewItem, {
            name: !0
          })) {
            var _t307 = Array.from(e.viewItem.getChildren());

            for (var _i207 = 0, _t308 = _t307; _i207 < _t308.length; _i207++) {
              var _e286 = _t308[_i207];
              !(_e286.is("element", "li") || lk(_e286)) && _e286._remove();
            }
          }
        }

        function ok(t, e, n) {
          if (n.consumable.test(e.viewItem, {
            name: !0
          })) {
            if (0 === e.viewItem.childCount) return;

            var _t309 = _toConsumableArray(e.viewItem.getChildren());

            var _n262 = !1;

            var _iterator391 = _createForOfIteratorHelper(_t309),
                _step391;

            try {
              for (_iterator391.s(); !(_step391 = _iterator391.n()).done;) {
                var _e287 = _step391.value;
                _n262 && !lk(_e287) && _e287._remove(), lk(_e287) && (_n262 = !0);
              }
            } catch (err) {
              _iterator391.e(err);
            } finally {
              _iterator391.f();
            }
          }
        }

        function rk(t) {
          return function (e, n) {
            if (n.isPhantom) return;
            var i = n.modelPosition.nodeBefore;

            if (i && i.is("element", "listItem")) {
              var _e288 = n.mapper.toViewElement(i),
                  _o109 = _e288.getAncestors().find(lk),
                  _r125 = t.createPositionAt(_e288, 0).getWalker();

              var _iterator392 = _createForOfIteratorHelper(_r125),
                  _step392;

              try {
                for (_iterator392.s(); !(_step392 = _iterator392.n()).done;) {
                  var _t310 = _step392.value;

                  if ("elementStart" == _t310.type && _t310.item.is("element", "li")) {
                    n.viewPosition = _t310.previousPosition;
                    break;
                  }

                  if ("elementEnd" == _t310.type && _t310.item == _o109) {
                    n.viewPosition = _t310.nextPosition;
                    break;
                  }
                }
              } catch (err) {
                _iterator392.e(err);
              } finally {
                _iterator392.f();
              }
            }
          };
        }

        function sk(t, _ref73) {
          var _ref74 = _slicedToArray(_ref73, 2),
              e = _ref74[0],
              n = _ref74[1];

          var i,
              o = e.is("documentFragment") ? e.getChild(0) : e;

          if (i = n ? this.createSelection(n) : this.document.selection, o && o.is("element", "listItem")) {
            var _t311 = i.getFirstPosition();

            var _e289 = null;

            if (_t311.parent.is("element", "listItem") ? _e289 = _t311.parent : _t311.nodeBefore && _t311.nodeBefore.is("element", "listItem") && (_e289 = _t311.nodeBefore), _e289) {
              var _t312 = _e289.getAttribute("listIndent");

              if (_t312 > 0) for (; o && o.is("element", "listItem");) {
                o._setAttribute("listIndent", o.getAttribute("listIndent") + _t312), o = o.nextSibling;
              }
            }
          }
        }

        function ak(t) {
          var e = new Js({
            startPosition: t
          });
          var n;

          do {
            n = e.next();
          } while (!n.value.item.is("element", "listItem"));

          return n.value.item;
        }

        function ck(t, e, n, i, o, r) {
          var s = Jb(e.nodeBefore, {
            sameIndent: !0,
            smallerIndent: !0,
            listIndent: t,
            foo: "b"
          }),
              a = o.mapper,
              c = o.writer,
              l = s ? s.getAttribute("listIndent") : null;
          var d;
          if (s) {
            if (l == t) {
              var _t313 = a.toViewElement(s).parent;
              d = c.createPositionAfter(_t313);
            } else {
              var _t314 = r.createPositionAt(s, "end");

              d = a.toViewPosition(_t314);
            }
          } else d = n;
          d = Yb(d);

          for (var _i208 = 0, _arr2 = _toConsumableArray(i.getChildren()); _i208 < _arr2.length; _i208++) {
            var _t315 = _arr2[_i208];
            lk(_t315) && (d = c.move(c.createRangeOn(_t315), d).end, $b(c, _t315, _t315.nextSibling), $b(c, _t315.previousSibling, _t315));
          }
        }

        function lk(t) {
          return t.is("element", "ol") || t.is("element", "ul");
        }

        var dk = /*#__PURE__*/function (_r126) {
          _inherits(dk, _r126);

          var _super233 = _createSuper(dk);

          function dk() {
            _classCallCheck(this, dk);

            return _super233.apply(this, arguments);
          }

          _createClass(dk, [{
            key: "init",
            value: function init() {
              var _this339 = this;

              var t = this.editor;
              t.model.schema.register("listItem", {
                inheritAllFrom: "$block",
                allowAttributes: ["listType", "listIndent"]
              });
              var e = t.data,
                  n = t.editing;
              t.model.document.registerPostFixer(function (e) {
                return function (t, e) {
                  var n = t.document.differ.getChanges(),
                      i = new Map();
                  var o = !1;

                  var _iterator393 = _createForOfIteratorHelper(n),
                      _step393;

                  try {
                    for (_iterator393.s(); !(_step393 = _iterator393.n()).done;) {
                      var _i210 = _step393.value;
                      if ("insert" == _i210.type && "listItem" == _i210.name) r(_i210.position);else if ("insert" == _i210.type && "listItem" != _i210.name) {
                        if ("$text" != _i210.name) {
                          var _n263 = _i210.position.nodeAfter;
                          _n263.hasAttribute("listIndent") && (e.removeAttribute("listIndent", _n263), o = !0), _n263.hasAttribute("listType") && (e.removeAttribute("listType", _n263), o = !0), _n263.hasAttribute("listStyle") && (e.removeAttribute("listStyle", _n263), o = !0);

                          var _iterator395 = _createForOfIteratorHelper(Array.from(t.createRangeIn(_n263)).filter(function (t) {
                            return t.item.is("element", "listItem");
                          })),
                              _step395;

                          try {
                            for (_iterator395.s(); !(_step395 = _iterator395.n()).done;) {
                              var _e292 = _step395.value;
                              r(_e292.previousPosition);
                            }
                          } catch (err) {
                            _iterator395.e(err);
                          } finally {
                            _iterator395.f();
                          }
                        }

                        r(_i210.position.getShiftedBy(_i210.length));
                      } else "remove" == _i210.type && "listItem" == _i210.name ? r(_i210.position) : "attribute" == _i210.type && "listIndent" == _i210.attributeKey ? r(_i210.range.start) : "attribute" == _i210.type && "listType" == _i210.attributeKey && r(_i210.range.start);
                    }
                  } catch (err) {
                    _iterator393.e(err);
                  } finally {
                    _iterator393.f();
                  }

                  var _iterator394 = _createForOfIteratorHelper(i.values()),
                      _step394;

                  try {
                    for (_iterator394.s(); !(_step394 = _iterator394.n()).done;) {
                      var _t317 = _step394.value;
                      s(_t317), a(_t317);
                    }
                  } catch (err) {
                    _iterator394.e(err);
                  } finally {
                    _iterator394.f();
                  }

                  return o;

                  function r(t) {
                    var e = t.nodeBefore;

                    if (e && e.is("element", "listItem")) {
                      var _t316 = e;
                      if (i.has(_t316)) return;

                      for (var _e290 = _t316.previousSibling; _e290 && _e290.is("element", "listItem"); _e290 = _t316.previousSibling) {
                        if (_t316 = _e290, i.has(_t316)) return;
                      }

                      i.set(e, _t316);
                    } else {
                      var _e291 = t.nodeAfter;
                      _e291 && _e291.is("element", "listItem") && i.set(_e291, _e291);
                    }
                  }

                  function s(t) {
                    var n = 0,
                        i = null;

                    for (; t && t.is("element", "listItem");) {
                      var _r127 = t.getAttribute("listIndent");

                      if (_r127 > n) {
                        var _s38 = void 0;

                        null === i ? (i = _r127 - n, _s38 = n) : (i > _r127 && (i = _r127), _s38 = _r127 - i), e.setAttribute("listIndent", _s38, t), o = !0;
                      } else i = null, n = t.getAttribute("listIndent") + 1;

                      t = t.nextSibling;
                    }
                  }

                  function a(t) {
                    var n = [],
                        i = null;

                    for (; t && t.is("element", "listItem");) {
                      var _r128 = t.getAttribute("listIndent");

                      if (i && i.getAttribute("listIndent") > _r128 && (n = n.slice(0, _r128 + 1)), 0 != _r128) if (n[_r128]) {
                        var _i209 = n[_r128];
                        t.getAttribute("listType") != _i209 && (e.setAttribute("listType", _i209, t), o = !0);
                      } else n[_r128] = t.getAttribute("listType");
                      i = t, t = t.nextSibling;
                    }
                  }
                }(t.model, e);
              }), n.mapper.registerViewToModelLength("li", uk), e.mapper.registerViewToModelLength("li", uk), n.mapper.on("modelToViewPosition", rk(n.view)), n.mapper.on("viewToModelPosition", function (t) {
                return function (e, n) {
                  var i = n.viewPosition,
                      o = i.parent,
                      r = n.mapper;

                  if ("ul" == o.name || "ol" == o.name) {
                    if (i.isAtEnd) {
                      var _e293 = r.toModelElement(i.nodeBefore),
                          _o110 = r.getModelLength(i.nodeBefore);

                      n.modelPosition = t.createPositionBefore(_e293).getShiftedBy(_o110);
                    } else {
                      var _e294 = r.toModelElement(i.nodeAfter);

                      n.modelPosition = t.createPositionBefore(_e294);
                    }

                    e.stop();
                  } else if ("li" == o.name && i.nodeBefore && ("ul" == i.nodeBefore.name || "ol" == i.nodeBefore.name)) {
                    var _s39 = r.toModelElement(o);

                    var _a48 = 1,
                        _c12 = i.nodeBefore;

                    for (; _c12 && lk(_c12);) {
                      _a48 += r.getModelLength(_c12), _c12 = _c12.previousSibling;
                    }

                    n.modelPosition = t.createPositionBefore(_s39).getShiftedBy(_a48), e.stop();
                  }
                };
              }(t.model)), e.mapper.on("modelToViewPosition", rk(n.view)), t.conversion["for"]("editingDowncast").add(function (e) {
                e.on("insert", tk, {
                  priority: "high"
                }), e.on("insert:listItem", Qb(t.model)), e.on("attribute:listType:listItem", Xb, {
                  priority: "high"
                }), e.on("attribute:listType:listItem", Zb, {
                  priority: "low"
                }), e.on("attribute:listIndent:listItem", function (t) {
                  return function (e, n, i) {
                    if (!i.consumable.consume(n.item, "attribute:listIndent")) return;
                    var o = i.mapper.toViewElement(n.item),
                        r = i.writer;
                    r.breakContainer(r.createPositionBefore(o)), r.breakContainer(r.createPositionAfter(o));
                    var s = o.parent,
                        a = s.previousSibling,
                        c = r.createRangeOn(s);
                    r.remove(c), a && a.nextSibling && $b(r, a, a.nextSibling), ck(n.attributeOldValue + 1, n.range.start, c.start, o, i, t), Wb(n.item, o, i, t);

                    var _iterator396 = _createForOfIteratorHelper(n.item.getChildren()),
                        _step396;

                    try {
                      for (_iterator396.s(); !(_step396 = _iterator396.n()).done;) {
                        var _t318 = _step396.value;
                        i.consumable.consume(_t318, "insert");
                      }
                    } catch (err) {
                      _iterator396.e(err);
                    } finally {
                      _iterator396.f();
                    }
                  };
                }(t.model)), e.on("remove:listItem", function (t) {
                  return function (e, n, i) {
                    var o = i.mapper.toViewPosition(n.position).getLastMatchingPosition(function (t) {
                      return !t.item.is("element", "li");
                    }).nodeAfter,
                        r = i.writer;
                    r.breakContainer(r.createPositionBefore(o)), r.breakContainer(r.createPositionAfter(o));
                    var s = o.parent,
                        a = s.previousSibling,
                        c = r.createRangeOn(s),
                        l = r.remove(c);
                    a && a.nextSibling && $b(r, a, a.nextSibling), ck(i.mapper.toModelElement(o).getAttribute("listIndent") + 1, n.position, c.start, o, i, t);

                    var _iterator397 = _createForOfIteratorHelper(r.createRangeIn(l).getItems()),
                        _step397;

                    try {
                      for (_iterator397.s(); !(_step397 = _iterator397.n()).done;) {
                        var _t319 = _step397.value;
                        i.mapper.unbindViewElement(_t319);
                      }
                    } catch (err) {
                      _iterator397.e(err);
                    } finally {
                      _iterator397.f();
                    }

                    e.stop();
                  };
                }(t.model)), e.on("remove", ek, {
                  priority: "low"
                });
              }), t.conversion["for"]("dataDowncast").add(function (e) {
                e.on("insert", tk, {
                  priority: "high"
                }), e.on("insert:listItem", Qb(t.model));
              }), t.conversion["for"]("upcast").add(function (t) {
                t.on("element:ul", ik, {
                  priority: "high"
                }), t.on("element:ol", ik, {
                  priority: "high"
                }), t.on("element:li", ok, {
                  priority: "high"
                }), t.on("element:li", nk);
              }), t.model.on("insertContent", sk, {
                priority: "high"
              }), t.commands.add("numberedList", new Fb(t, "numbered")), t.commands.add("bulletedList", new Fb(t, "bulleted")), t.commands.add("indentList", new Hb(t, "forward")), t.commands.add("outdentList", new Hb(t, "backward"));
              var i = n.view.document;
              this.listenTo(i, "enter", function (t, e) {
                var n = _this339.editor.model.document,
                    i = n.selection.getLastPosition().parent;
                n.selection.isCollapsed && "listItem" == i.name && i.isEmpty && (_this339.editor.execute("outdentList"), e.preventDefault(), t.stop());
              }, {
                context: "li"
              }), this.listenTo(i, "delete", function (t, e) {
                if ("backward" !== e.direction) return;
                var n = _this339.editor.model.document.selection;
                if (!n.isCollapsed) return;
                var i = n.getFirstPosition();
                if (!i.isAtStart) return;
                var o = i.parent;
                "listItem" === o.name && (o.previousSibling && "listItem" === o.previousSibling.name || (_this339.editor.execute("outdentList"), e.preventDefault(), t.stop()));
              }, {
                context: "li"
              });

              var o = function o(t) {
                return function (e, n) {
                  _this339.editor.commands.get(t).isEnabled && (_this339.editor.execute(t), n());
                };
              };

              t.keystrokes.set("Tab", o("indentList")), t.keystrokes.set("Shift+Tab", o("outdentList"));
            }
          }, {
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor.commands,
                  e = t.get("indent"),
                  n = t.get("outdent");
              e && e.registerChildCommand(t.get("indentList")), n && n.registerChildCommand(t.get("outdentList"));
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ListEditing";
            }
          }, {
            key: "requires",
            get: function get() {
              return [jh, Fh];
            }
          }]);

          return dk;
        }(r);

        function uk(t) {
          var e = 1;

          var _iterator398 = _createForOfIteratorHelper(t.getChildren()),
              _step398;

          try {
            for (_iterator398.s(); !(_step398 = _iterator398.n()).done;) {
              var _n264 = _step398.value;

              if ("ul" == _n264.name || "ol" == _n264.name) {
                var _iterator399 = _createForOfIteratorHelper(_n264.getChildren()),
                    _step399;

                try {
                  for (_iterator399.s(); !(_step399 = _iterator399.n()).done;) {
                    var _t320 = _step399.value;
                    e += uk(_t320);
                  }
                } catch (err) {
                  _iterator399.e(err);
                } finally {
                  _iterator399.f();
                }
              }
            }
          } catch (err) {
            _iterator398.e(err);
          } finally {
            _iterator398.f();
          }

          return e;
        }

        var hk = n(158),
            fk = n.n(hk),
            gk = n(159),
            mk = n.n(gk);

        var pk = /*#__PURE__*/function (_r129) {
          _inherits(pk, _r129);

          var _super234 = _createSuper(pk);

          function pk() {
            _classCallCheck(this, pk);

            return _super234.apply(this, arguments);
          }

          _createClass(pk, [{
            key: "init",
            value: function init() {
              var t = this.editor.t;
              Gb(this.editor, "numberedList", t("Numbered List"), fk.a), Gb(this.editor, "bulletedList", t("Bulleted List"), mk.a);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "ListUI";
            }
          }]);

          return pk;
        }(r);

        var bk = /*#__PURE__*/function (_r130) {
          _inherits(bk, _r130);

          var _super235 = _createSuper(bk);

          function bk() {
            _classCallCheck(this, bk);

            return _super235.apply(this, arguments);
          }

          _createClass(bk, null, [{
            key: "requires",
            get: function get() {
              return [dk, pk];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "List";
            }
          }]);

          return bk;
        }(r);

        function kk(t, e) {
          return function (t) {
            t.on("attribute:url:media", n);
          };

          function n(n, i, o) {
            if (!o.consumable.consume(i.item, n.name)) return;

            var r = i.attributeNewValue,
                s = o.writer,
                a = o.mapper.toViewElement(i.item),
                c = _toConsumableArray(a.getChildren()).find(function (t) {
              return t.getCustomProperty("media-content");
            });

            s.remove(c);
            var l = t.getMediaViewElement(s, r, e);
            s.insert(s.createPositionAt(a, 0), l);
          }
        }

        function _k(t, e, n, i) {
          var o = t.createContainerElement("figure", {
            "class": "media"
          });
          return t.insert(t.createPositionAt(o, 0), e.getMediaViewElement(t, n, i)), o;
        }

        function wk(t) {
          var e = t.getSelectedElement();
          return e && e.is("element", "media") ? e : null;
        }

        function vk(t, e, n) {
          t.change(function (i) {
            var o = i.createElement("media", {
              url: e
            });
            t.insertContent(o, n), i.setSelection(o, "on");
          });
        }

        var yk = /*#__PURE__*/function (_a49) {
          _inherits(yk, _a49);

          var _super236 = _createSuper(yk);

          function yk() {
            _classCallCheck(this, yk);

            return _super236.apply(this, arguments);
          }

          _createClass(yk, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document.selection,
                  n = wk(e);
              this.value = n ? n.getAttribute("url") : null, this.isEnabled = function (t) {
                var e = t.getSelectedElement();
                return !!e && "media" === e.name;
              }(e) || function (t, e) {
                var n = Zh(t, e).start.parent;
                n.isEmpty && !e.schema.isLimit(n) && (n = n.parent);
                return e.schema.checkChild(n, "media");
              }(e, t);
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var e = this.editor.model,
                  n = e.document.selection,
                  i = wk(n);
              i ? e.change(function (e) {
                e.setAttribute("url", t, i);
              }) : vk(e, t, Zh(n, e));
            }
          }]);

          return yk;
        }(a);

        var xk = n(160),
            Ck = n.n(xk);
        var Tk = "0 0 64 42";

        var Ak = /*#__PURE__*/function () {
          function Ak(t, e) {
            _classCallCheck(this, Ak);

            var n = e.providers,
                i = e.extraProviders || [],
                o = new Set(e.removeProviders),
                r = n.concat(i).filter(function (t) {
              var e = t.name;
              return e ? !o.has(e) : (Object(rn.logWarning)("media-embed-no-provider-name", {
                provider: t
              }), !1);
            });
            this.locale = t, this.providerDefinitions = r;
          }

          _createClass(Ak, [{
            key: "hasMedia",
            value: function hasMedia(t) {
              return !!this._getMedia(t);
            }
          }, {
            key: "getMediaViewElement",
            value: function getMediaViewElement(t, e, n) {
              return this._getMedia(e).getViewElement(t, n);
            }
          }, {
            key: "_getMedia",
            value: function _getMedia(t) {
              if (!t) return new Ek(this.locale);
              t = t.trim();

              var _iterator400 = _createForOfIteratorHelper(this.providerDefinitions),
                  _step400;

              try {
                for (_iterator400.s(); !(_step400 = _iterator400.n()).done;) {
                  var _e295 = _step400.value;

                  var _n265 = _e295.html,
                      _i211 = cn(_e295.url);

                  var _iterator401 = _createForOfIteratorHelper(_i211),
                      _step401;

                  try {
                    for (_iterator401.s(); !(_step401 = _iterator401.n()).done;) {
                      var _e296 = _step401.value;

                      var _i212 = this._getUrlMatches(t, _e296);

                      if (_i212) return new Ek(this.locale, t, _i212, _n265);
                    }
                  } catch (err) {
                    _iterator401.e(err);
                  } finally {
                    _iterator401.f();
                  }
                }
              } catch (err) {
                _iterator400.e(err);
              } finally {
                _iterator400.f();
              }

              return null;
            }
          }, {
            key: "_getUrlMatches",
            value: function _getUrlMatches(t, e) {
              var n = t.match(e);
              if (n) return n;
              var i = t.replace(/^https?:\/\//, "");
              return (n = i.match(e)) ? n : (n = (i = i.replace(/^www\./, "")).match(e)) || null;
            }
          }]);

          return Ak;
        }();

        var Ek = /*#__PURE__*/function () {
          function Ek(t, e, n, i) {
            _classCallCheck(this, Ek);

            this.url = this._getValidUrl(e), this._t = t.t, this._match = n, this._previewRenderer = i;
          }

          _createClass(Ek, [{
            key: "getViewElement",
            value: function getViewElement(t, e) {
              var n = {};
              var i;

              if (e.renderForEditingView || e.renderMediaPreview && this.url && this._previewRenderer) {
                this.url && (n["data-oembed-url"] = this.url), e.renderForEditingView && (n["class"] = "ck-media__wrapper");

                var _o111 = this._getPreviewHtml(e);

                i = t.createRawElement("div", n, function (t) {
                  t.innerHTML = _o111;
                });
              } else this.url && (n.url = this.url), i = t.createEmptyElement(e.elementName, n);

              return t.setCustomProperty("media-content", !0, i), i;
            }
          }, {
            key: "_getPreviewHtml",
            value: function _getPreviewHtml(t) {
              return this._previewRenderer ? this._previewRenderer(this._match) : this.url && t.renderForEditingView ? this._getPlaceholderHtml() : "";
            }
          }, {
            key: "_getPlaceholderHtml",
            value: function _getPlaceholderHtml() {
              var t = new eu(),
                  e = new tu();
              return t.text = this._t("Open media in new tab"), e.content = Ck.a, e.viewBox = Tk, new Dd({
                tag: "div",
                attributes: {
                  "class": "ck ck-reset_all ck-media__placeholder"
                },
                children: [{
                  tag: "div",
                  attributes: {
                    "class": "ck-media__placeholder__icon"
                  },
                  children: [e]
                }, {
                  tag: "a",
                  attributes: {
                    "class": "ck-media__placeholder__url",
                    target: "_blank",
                    rel: "noopener noreferrer",
                    href: this.url
                  },
                  children: [{
                    tag: "span",
                    attributes: {
                      "class": "ck-media__placeholder__url__text"
                    },
                    children: [this.url]
                  }, t]
                }]
              }).render().outerHTML;
            }
          }, {
            key: "_getValidUrl",
            value: function _getValidUrl(t) {
              return t ? t.match(/^https?/) ? t : "https://" + t : null;
            }
          }]);

          return Ek;
        }();

        n(261);

        var Sk = /*#__PURE__*/function (_r131) {
          _inherits(Sk, _r131);

          var _super237 = _createSuper(Sk);

          function Sk(t) {
            var _this340;

            _classCallCheck(this, Sk);

            _this340 = _super237.call(this, t), t.config.define("mediaEmbed", {
              elementName: "oembed",
              providers: [{
                name: "dailymotion",
                url: /^dailymotion\.com\/video\/(\w+)/,
                html: function html(t) {
                  return '<div style="position: relative; padding-bottom: 100%; height: 0; ">' + "<iframe src=\"https://www.dailymotion.com/embed/video/".concat(t[1], "\" ") + 'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>';
                }
              }, {
                name: "spotify",
                url: [/^open\.spotify\.com\/(artist\/\w+)/, /^open\.spotify\.com\/(album\/\w+)/, /^open\.spotify\.com\/(track\/\w+)/],
                html: function html(t) {
                  return '<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;">' + "<iframe src=\"https://open.spotify.com/embed/".concat(t[1], "\" ") + 'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>';
                }
              }, {
                name: "youtube",
                url: [/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/, /^(?:m\.)?youtube\.com\/v\/([\w-]+)/, /^youtube\.com\/embed\/([\w-]+)/, /^youtu\.be\/([\w-]+)/],
                html: function html(t) {
                  return '<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">' + "<iframe src=\"https://www.youtube.com/embed/".concat(t[1], "\" ") + 'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>';
                }
              }, {
                name: "vimeo",
                url: [/^vimeo\.com\/(\d+)/, /^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/, /^vimeo\.com\/album\/[^/]+\/video\/(\d+)/, /^vimeo\.com\/channels\/[^/]+\/(\d+)/, /^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/, /^vimeo\.com\/ondemand\/[^/]+\/(\d+)/, /^player\.vimeo\.com\/video\/(\d+)/],
                html: function html(t) {
                  return '<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">' + "<iframe src=\"https://player.vimeo.com/video/".concat(t[1], "\" ") + 'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>';
                }
              }, {
                name: "instagram",
                url: /^instagram\.com\/p\/(\w+)/
              }, {
                name: "twitter",
                url: /^twitter\.com/
              }, {
                name: "googleMaps",
                url: [/^google\.com\/maps/, /^goo\.gl\/maps/, /^maps\.google\.com/, /^maps\.app\.goo\.gl/]
              }, {
                name: "flickr",
                url: /^flickr\.com/
              }, {
                name: "facebook",
                url: /^facebook\.com/
              }]
            }), _this340.registry = new Ak(t.locale, t.config.get("mediaEmbed"));
            return _this340;
          }

          _createClass(Sk, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model.schema,
                  n = t.t,
                  i = t.conversion,
                  o = t.config.get("mediaEmbed.previewsInData"),
                  r = t.config.get("mediaEmbed.elementName"),
                  s = this.registry;
              t.commands.add("mediaEmbed", new yk(t)), e.register("media", {
                isObject: !0,
                isBlock: !0,
                allowWhere: "$block",
                allowAttributes: ["url"]
              }), i["for"]("dataDowncast").elementToElement({
                model: "media",
                view: function view(t, _ref75) {
                  var e = _ref75.writer;
                  var n = t.getAttribute("url");
                  return _k(e, s, n, {
                    elementName: r,
                    renderMediaPreview: n && o
                  });
                }
              }), i["for"]("dataDowncast").add(kk(s, {
                elementName: r,
                renderMediaPreview: o
              })), i["for"]("editingDowncast").elementToElement({
                model: "media",
                view: function view(t, _ref76) {
                  var e = _ref76.writer;
                  var i = t.getAttribute("url");
                  return function (t, e, n) {
                    return e.setCustomProperty("media", !0, t), Kh(t, e, {
                      label: n
                    });
                  }(_k(e, s, i, {
                    elementName: r,
                    renderForEditingView: !0
                  }), e, n("media widget"));
                }
              }), i["for"]("editingDowncast").add(kk(s, {
                elementName: r,
                renderForEditingView: !0
              })), i["for"]("upcast").elementToElement({
                view: function view(t) {
                  return ["oembed", r].includes(t.name) && t.getAttribute("url") ? {
                    name: !0
                  } : null;
                },
                model: function model(t, _ref77) {
                  var e = _ref77.writer;
                  var n = t.getAttribute("url");
                  if (s.hasMedia(n)) return e.createElement("media", {
                    url: n
                  });
                }
              }).elementToElement({
                view: {
                  name: "div",
                  attributes: {
                    "data-oembed-url": !0
                  }
                },
                model: function model(t, _ref78) {
                  var e = _ref78.writer;
                  var n = t.getAttribute("data-oembed-url");
                  if (s.hasMedia(n)) return e.createElement("media", {
                    url: n
                  });
                }
              }).add(function (t) {
                t.on("element:figure", function (t, e, n) {
                  if (!n.consumable.test(e.viewItem, {
                    name: !0,
                    classes: "media"
                  })) return;

                  var _n$convertChildren3 = n.convertChildren(e.viewItem, e.modelCursor),
                      i = _n$convertChildren3.modelRange,
                      o = _n$convertChildren3.modelCursor;

                  if (e.modelRange = i, e.modelCursor = o, !Es(i.getItems())) return;
                  n.consumable.consume(e.viewItem, {
                    name: !0,
                    classes: "media"
                  });
                });
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "MediaEmbedEditing";
            }
          }]);

          return Sk;
        }(r);

        var Ik = /^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;

        var Ok = /*#__PURE__*/function (_r132) {
          _inherits(Ok, _r132);

          var _super238 = _createSuper(Ok);

          function Ok(t) {
            var _this341;

            _classCallCheck(this, Ok);

            _this341 = _super238.call(this, t), _this341._timeoutId = null, _this341._positionToInsert = null;
            return _this341;
          }

          _createClass(Ok, [{
            key: "init",
            value: function init() {
              var _this342 = this;

              var t = this.editor,
                  e = t.model.document;
              this.listenTo(t.plugins.get("ClipboardPipeline"), "inputTransformation", function () {
                var t = e.selection.getFirstRange(),
                    n = Zc.fromPosition(t.start);
                n.stickiness = "toPrevious";
                var i = Zc.fromPosition(t.end);
                i.stickiness = "toNext", e.once("change:data", function () {
                  _this342._embedMediaBetweenPositions(n, i), n.detach(), i.detach();
                }, {
                  priority: "high"
                });
              }), t.commands.get("undo").on("execute", function () {
                _this342._timeoutId && (Ho.window.clearTimeout(_this342._timeoutId), _this342._positionToInsert.detach(), _this342._timeoutId = null, _this342._positionToInsert = null);
              }, {
                priority: "high"
              });
            }
          }, {
            key: "_embedMediaBetweenPositions",
            value: function _embedMediaBetweenPositions(t, e) {
              var _this343 = this;

              var n = this.editor,
                  i = n.plugins.get(Sk).registry,
                  o = new fa(t, e),
                  r = o.getWalker({
                ignoreElementEnd: !0
              });
              var s = "";

              var _iterator402 = _createForOfIteratorHelper(r),
                  _step402;

              try {
                for (_iterator402.s(); !(_step402 = _iterator402.n()).done;) {
                  var _t321 = _step402.value;
                  _t321.item.is("$textProxy") && (s += _t321.item.data);
                }
              } catch (err) {
                _iterator402.e(err);
              } finally {
                _iterator402.f();
              }

              if (!(s = s.trim()).match(Ik)) return void o.detach();
              if (!i.hasMedia(s)) return void o.detach();
              n.commands.get("mediaEmbed").isEnabled ? (this._positionToInsert = Zc.fromPosition(t), this._timeoutId = Ho.window.setTimeout(function () {
                n.model.change(function (t) {
                  var e;
                  _this343._timeoutId = null, t.remove(o), o.detach(), "$graveyard" !== _this343._positionToInsert.root.rootName && (e = _this343._positionToInsert), vk(n.model, s, e), _this343._positionToInsert.detach(), _this343._positionToInsert = null;
                }), n.plugins.get("Delete").requestUndoOnBackspace();
              }, 100)) : o.detach();
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Af, Fh, mg];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "AutoMediaEmbed";
            }
          }]);

          return Ok;
        }(r);

        n(263);

        var Rk = /*#__PURE__*/function (_Pd29) {
          _inherits(Rk, _Pd29);

          var _super239 = _createSuper(Rk);

          function Rk(t, e) {
            var _this344;

            _classCallCheck(this, Rk);

            _this344 = _super239.call(this, e);
            var n = e.t;
            _this344.focusTracker = new Ss(), _this344.keystrokes = new Is(), _this344.set("mediaURLInputValue", ""), _this344.urlInputView = _this344._createUrlInput(), _this344.saveButtonView = _this344._createButton(n("Save"), Sd.check, "ck-button-save"), _this344.saveButtonView.type = "submit", _this344.saveButtonView.bind("isEnabled").to(_assertThisInitialized(_this344), "mediaURLInputValue", function (t) {
              return !!t;
            }), _this344.cancelButtonView = _this344._createButton(n("Cancel"), Sd.cancel, "ck-button-cancel", "cancel"), _this344._focusables = new Md(), _this344._focusCycler = new su({
              focusables: _this344._focusables,
              focusTracker: _this344.focusTracker,
              keystrokeHandler: _this344.keystrokes,
              actions: {
                focusPrevious: "shift + tab",
                focusNext: "tab"
              }
            }), _this344._validators = t, _this344.setTemplate({
              tag: "form",
              attributes: {
                "class": ["ck", "ck-media-form", "ck-responsive-form"],
                tabindex: "-1"
              },
              children: [_this344.urlInputView, _this344.saveButtonView, _this344.cancelButtonView]
            }), Od(_assertThisInitialized(_this344));
            return _this344;
          }

          _createClass(Rk, [{
            key: "render",
            value: function render() {
              var _this345 = this;

              _get3(_getPrototypeOf(Rk.prototype), "render", this).call(this), Rd({
                view: this
              }), [this.urlInputView, this.saveButtonView, this.cancelButtonView].forEach(function (t) {
                _this345._focusables.add(t), _this345.focusTracker.add(t.element);
              }), this.keystrokes.listenTo(this.element);

              var t = function t(_t322) {
                return _t322.stopPropagation();
              };

              this.keystrokes.set("arrowright", t), this.keystrokes.set("arrowleft", t), this.keystrokes.set("arrowup", t), this.keystrokes.set("arrowdown", t), this.listenTo(this.urlInputView.element, "selectstart", function (t, e) {
                e.stopPropagation();
              }, {
                priority: "high"
              });
            }
          }, {
            key: "focus",
            value: function focus() {
              this._focusCycler.focusFirst();
            }
          }, {
            key: "url",
            get: function get() {
              return this.urlInputView.fieldView.element.value.trim();
            },
            set: function set(t) {
              this.urlInputView.fieldView.element.value = t.trim();
            }
          }, {
            key: "isValid",
            value: function isValid() {
              this.resetFormStatus();

              var _iterator403 = _createForOfIteratorHelper(this._validators),
                  _step403;

              try {
                for (_iterator403.s(); !(_step403 = _iterator403.n()).done;) {
                  var _t323 = _step403.value;

                  var _e297 = _t323(this);

                  if (_e297) return this.urlInputView.errorText = _e297, !1;
                }
              } catch (err) {
                _iterator403.e(err);
              } finally {
                _iterator403.f();
              }

              return !0;
            }
          }, {
            key: "resetFormStatus",
            value: function resetFormStatus() {
              this.urlInputView.errorText = null, this.urlInputView.infoText = this._urlInputViewInfoDefault;
            }
          }, {
            key: "_createUrlInput",
            value: function _createUrlInput() {
              var _this346 = this;

              var t = this.locale.t,
                  e = new ju(this.locale, Bu),
                  n = e.fieldView;
              return this._urlInputViewInfoDefault = t("Paste the media URL in the input."), this._urlInputViewInfoTip = t("Tip: Paste the URL into the content to embed faster."), e.label = t("Media URL"), e.infoText = this._urlInputViewInfoDefault, n.on("input", function () {
                e.infoText = n.element.value ? _this346._urlInputViewInfoTip : _this346._urlInputViewInfoDefault, _this346.mediaURLInputValue = n.element.value.trim();
              }), e;
            }
          }, {
            key: "_createButton",
            value: function _createButton(t, e, n, i) {
              var o = new nu(this.locale);
              return o.set({
                label: t,
                icon: e,
                tooltip: !0
              }), o.extendTemplate({
                attributes: {
                  "class": n
                }
              }), i && o.delegate("execute").to(this, i), o;
            }
          }]);

          return Rk;
        }(Pd);

        var Mk = n(161),
            Pk = n.n(Mk);

        var Nk = /*#__PURE__*/function (_r133) {
          _inherits(Nk, _r133);

          var _super240 = _createSuper(Nk);

          function Nk() {
            _classCallCheck(this, Nk);

            return _super240.apply(this, arguments);
          }

          _createClass(Nk, [{
            key: "init",
            value: function init() {
              var _this347 = this;

              var t = this.editor,
                  e = t.commands.get("mediaEmbed"),
                  n = t.plugins.get(Sk).registry;
              t.ui.componentFactory.add("mediaEmbed", function (i) {
                var o = Eu(i),
                    r = new Rk(function (t, e) {
                  return [function (e) {
                    if (!e.url.length) return t("The URL must not be empty.");
                  }, function (n) {
                    if (!e.hasMedia(n.url)) return t("This media URL is not supported.");
                  }];
                }(t.t, n), t.locale);
                return _this347._setUpDropdown(o, r, e, t), _this347._setUpForm(o, r, e), o;
              });
            }
          }, {
            key: "_setUpDropdown",
            value: function _setUpDropdown(t, e, n) {
              var i = this.editor,
                  o = i.t,
                  r = t.buttonView;

              function s() {
                i.editing.view.focus(), t.isOpen = !1;
              }

              t.bind("isEnabled").to(n), t.panelView.children.add(e), r.set({
                label: o("Insert media"),
                icon: Pk.a,
                tooltip: !0
              }), r.on("open", function () {
                e.disableCssTransitions(), e.url = n.value || "", e.urlInputView.fieldView.select(), e.focus(), e.enableCssTransitions();
              }, {
                priority: "low"
              }), t.on("submit", function () {
                e.isValid() && (i.execute("mediaEmbed", e.url), s());
              }), t.on("change:isOpen", function () {
                return e.resetFormStatus();
              }), t.on("cancel", function () {
                return s();
              });
            }
          }, {
            key: "_setUpForm",
            value: function _setUpForm(t, e, n) {
              e.delegate("submit", "cancel").to(t), e.urlInputView.bind("value").to(n, "value"), e.urlInputView.bind("isReadOnly").to(n, "isEnabled", function (t) {
                return !t;
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Sk];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "MediaEmbedUI";
            }
          }]);

          return Nk;
        }(r);

        n(265);

        function Dk(t, e) {
          if (!t.childCount) return;

          var n = new vh(t.document),
              i = function (t, e) {
            var n = e.createRangeIn(t),
                i = new Cn({
              name: /^p|h\d+$/,
              styles: {
                "mso-list": /.*/
              }
            }),
                o = [];

            var _iterator404 = _createForOfIteratorHelper(n),
                _step404;

            try {
              for (_iterator404.s(); !(_step404 = _iterator404.n()).done;) {
                var _t324 = _step404.value;

                if ("elementStart" === _t324.type && i.match(_t324.item)) {
                  var _e298 = Bk(_t324.item);

                  o.push({
                    element: _t324.item,
                    id: _e298.id,
                    order: _e298.order,
                    indent: _e298.indent
                  });
                }
              }
            } catch (err) {
              _iterator404.e(err);
            } finally {
              _iterator404.f();
            }

            return o;
          }(t, n);

          if (!i.length) return;
          var o = null,
              r = 1;
          i.forEach(function (t, s) {
            var a = function (t, e) {
              if (!t) return !0;
              if (t.id !== e.id) return e.indent - t.indent != 1;
              var n = e.element.previousSibling;
              if (!n) return !0;
              return !function (t) {
                return t.is("element", "ol") || t.is("element", "ul");
              }(n);
            }(i[s - 1], t),
                c = function (t, e) {
              return t ? e.indent - t.indent : e.indent - 1;
            }(a ? null : i[s - 1], t);

            if (a && (o = null, r = 1), !o || 0 !== c) {
              var _i213 = function (t, e) {
                var n = /mso-level-number-format:([^;]{0,100});/gi,
                    i = new RegExp("@list l".concat(t.id, ":level").concat(t.indent, "\\s*({[^}]*)"), "gi").exec(e);
                var o = "decimal",
                    r = "ol";

                if (i && i[1]) {
                  var _e299 = n.exec(i[1]);

                  if (_e299 && _e299[1] && (o = _e299[1].trim(), r = "bullet" !== o && "image" !== o ? "ol" : "ul"), "bullet" === o) {
                    var _e300 = function (t) {
                      var e = function (t) {
                        if (t.getChild(0).is("$text")) return null;

                        var _iterator405 = _createForOfIteratorHelper(t.getChildren()),
                            _step405;

                        try {
                          for (_iterator405.s(); !(_step405 = _iterator405.n()).done;) {
                            var _e301 = _step405.value;
                            if (!_e301.is("element", "span")) continue;

                            var _t325 = _e301.getChild(0);

                            return _t325.is("$text") ? _t325 : _t325.getChild(0);
                          }
                        } catch (err) {
                          _iterator405.e(err);
                        } finally {
                          _iterator405.f();
                        }
                      }(t);

                      if (!e) return null;
                      var n = e._data;
                      if ("o" === n) return "circle";
                      if ("·" === n) return "disc";
                      if ("§" === n) return "square";
                      return null;
                    }(t.element);

                    _e300 && (o = _e300);
                  }
                }

                return {
                  type: r,
                  style: function (t) {
                    switch (t) {
                      case "arabic-leading-zero":
                        return "decimal-leading-zero";

                      case "alpha-upper":
                        return "upper-alpha";

                      case "alpha-lower":
                        return "lower-alpha";

                      case "roman-upper":
                        return "upper-roman";

                      case "roman-lower":
                        return "lower-roman";

                      case "circle":
                      case "disc":
                      case "square":
                        return t;

                      default:
                        return null;
                    }
                  }(o)
                };
              }(t, e);

              if (o) {
                if (t.indent > r) {
                  var _t326 = o.getChild(o.childCount - 1),
                      _e302 = _t326.getChild(_t326.childCount - 1);

                  o = jk(_i213, _e302, n), r += 1;
                } else if (t.indent < r) {
                  var _e303 = r - t.indent;

                  o = function (t, e) {
                    var n = t.getAncestors({
                      parentFirst: !0
                    });
                    var i = null,
                        o = 0;

                    var _iterator406 = _createForOfIteratorHelper(n),
                        _step406;

                    try {
                      for (_iterator406.s(); !(_step406 = _iterator406.n()).done;) {
                        var _t327 = _step406.value;

                        if ("ul" !== _t327.name && "ol" !== _t327.name || o++, o === e) {
                          i = _t327;
                          break;
                        }
                      }
                    } catch (err) {
                      _iterator406.e(err);
                    } finally {
                      _iterator406.f();
                    }

                    return i;
                  }(o, _e303), r = parseInt(t.indent);
                }
              } else o = jk(_i213, t.element, n);

              t.indent <= r && (o.is("element", _i213.type) || (o = n.rename(_i213.type, o)));
            }

            var l = function (t, e) {
              return function (t, e) {
                var n = new Cn({
                  name: "span",
                  styles: {
                    "mso-list": "Ignore"
                  }
                }),
                    i = e.createRangeIn(t);

                var _iterator407 = _createForOfIteratorHelper(i),
                    _step407;

                try {
                  for (_iterator407.s(); !(_step407 = _iterator407.n()).done;) {
                    var _t328 = _step407.value;
                    "elementStart" === _t328.type && n.match(_t328.item) && e.remove(_t328.item);
                  }
                } catch (err) {
                  _iterator407.e(err);
                } finally {
                  _iterator407.f();
                }
              }(t, e), e.rename("li", t);
            }(t.element, n);

            n.appendChild(l, o);
          });
        }

        function jk(t, e, n) {
          var i = e.parent,
              o = n.createElement(t.type),
              r = i.getChildIndex(e) + 1;
          return n.insertChild(r, o, i), t.style && n.setStyle("list-style-type", t.style, o), o;
        }

        function Bk(t) {
          var e = {},
              n = t.getStyle("mso-list");

          if (n) {
            var _t329 = n.match(/(^|\s{1,100})l(\d+)/i),
                _i214 = n.match(/\s{0,100}lfo(\d+)/i),
                _o112 = n.match(/\s{0,100}level(\d+)/i);

            _t329 && _i214 && _o112 && (e.id = _t329[2], e.order = _i214[1], e.indent = _o112[1]);
          }

          return e;
        }

        var Lk = /id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;

        var zk = /*#__PURE__*/function () {
          function zk(t) {
            _classCallCheck(this, zk);

            this.document = t;
          }

          _createClass(zk, [{
            key: "isActive",
            value: function isActive(t) {
              return Lk.test(t);
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var e = new vh(this.document),
                  n = t._parsedData.body;
              !function (t, e) {
                var _iterator408 = _createForOfIteratorHelper(t.getChildren()),
                    _step408;

                try {
                  for (_iterator408.s(); !(_step408 = _iterator408.n()).done;) {
                    var _n266 = _step408.value;

                    if (_n266.is("element", "b") && "normal" === _n266.getStyle("font-weight")) {
                      var _i215 = t.getChildIndex(_n266);

                      e.remove(_n266), e.insertChild(_i215, _n266.getChildren(), t);
                    }
                  }
                } catch (err) {
                  _iterator408.e(err);
                } finally {
                  _iterator408.f();
                }
              }(n, e), function (t, e) {
                var _iterator409 = _createForOfIteratorHelper(e.createRangeIn(t)),
                    _step409;

                try {
                  for (_iterator409.s(); !(_step409 = _iterator409.n()).done;) {
                    var _n267 = _step409.value;
                    var _t330 = _n267.item;

                    if (_t330.is("element", "li")) {
                      var _n268 = _t330.getChild(0);

                      _n268 && _n268.is("element", "p") && e.unwrapElement(_n268);
                    }
                  }
                } catch (err) {
                  _iterator409.e(err);
                } finally {
                  _iterator409.f();
                }
              }(n, e), t.content = n;
            }
          }]);

          return zk;
        }();

        function Fk(t, e) {
          if (!t.childCount) return;
          var n = new vh();
          !function (t, e, n) {
            var i = n.createRangeIn(e),
                o = new Cn({
              name: "img"
            }),
                r = [];

            var _iterator410 = _createForOfIteratorHelper(i),
                _step410;

            try {
              for (_iterator410.s(); !(_step410 = _iterator410.n()).done;) {
                var _e304 = _step410.value;

                if (o.match(_e304.item)) {
                  var _n269 = _e304.item,
                      _i217 = _n269.getAttribute("v:shapes") ? _n269.getAttribute("v:shapes").split(" ") : [];

                  _i217.length && _i217.every(function (e) {
                    return t.indexOf(e) > -1;
                  }) ? r.push(_n269) : _n269.getAttribute("src") || r.push(_n269);
                }
              }
            } catch (err) {
              _iterator410.e(err);
            } finally {
              _iterator410.f();
            }

            for (var _i216 = 0, _r134 = r; _i216 < _r134.length; _i216++) {
              var _t331 = _r134[_i216];
              n.remove(_t331);
            }
          }(function (t, e) {
            var n = e.createRangeIn(t),
                i = new Cn({
              name: /v:(.+)/
            }),
                o = [];

            var _iterator411 = _createForOfIteratorHelper(n),
                _step411;

            try {
              for (_iterator411.s(); !(_step411 = _iterator411.n()).done;) {
                var _t332 = _step411.value;
                if ("elementStart" != _t332.type) continue;

                var _e305 = _t332.item,
                    _n270 = _e305.previousSibling && _e305.previousSibling.name || null;

                i.match(_e305) && _e305.getAttribute("o:gfxdata") && "v:shapetype" !== _n270 && o.push(_t332.item.getAttribute("id"));
              }
            } catch (err) {
              _iterator411.e(err);
            } finally {
              _iterator411.f();
            }

            return o;
          }(t, n), t, n), function (t, e) {
            var n = e.createRangeIn(t),
                i = new Cn({
              name: /v:(.+)/
            }),
                o = [];

            var _iterator412 = _createForOfIteratorHelper(n),
                _step412;

            try {
              for (_iterator412.s(); !(_step412 = _iterator412.n()).done;) {
                var _t334 = _step412.value;
                "elementStart" == _t334.type && i.match(_t334.item) && o.push(_t334.item);
              }
            } catch (err) {
              _iterator412.e(err);
            } finally {
              _iterator412.f();
            }

            for (var _i218 = 0, _o113 = o; _i218 < _o113.length; _i218++) {
              var _t333 = _o113[_i218];
              e.remove(_t333);
            }
          }(t, n);

          var i = function (t, e) {
            var n = e.createRangeIn(t),
                i = new Cn({
              name: "img"
            }),
                o = [];

            var _iterator413 = _createForOfIteratorHelper(n),
                _step413;

            try {
              for (_iterator413.s(); !(_step413 = _iterator413.n()).done;) {
                var _t335 = _step413.value;
                i.match(_t335.item) && _t335.item.getAttribute("src").startsWith("file://") && o.push(_t335.item);
              }
            } catch (err) {
              _iterator413.e(err);
            } finally {
              _iterator413.f();
            }

            return o;
          }(t, n);

          i.length && function (t, e, n) {
            if (t.length === e.length) for (var _i219 = 0; _i219 < t.length; _i219++) {
              var _o114 = "data:".concat(e[_i219].type, ";base64,").concat(Vk(e[_i219].hex));

              n.setAttribute("src", _o114, t[_i219]);
            }
          }(i, function (t) {
            if (!t) return [];
            var e = /{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,
                n = new RegExp("(?:(" + e.source + "))([\\da-fA-F\\s]+)\\}", "g"),
                i = t.match(n),
                o = [];

            if (i) {
              var _iterator414 = _createForOfIteratorHelper(i),
                  _step414;

              try {
                for (_iterator414.s(); !(_step414 = _iterator414.n()).done;) {
                  var _t336 = _step414.value;

                  var _n271 = !1;

                  _t336.includes("\\pngblip") ? _n271 = "image/png" : _t336.includes("\\jpegblip") && (_n271 = "image/jpeg"), _n271 && o.push({
                    hex: _t336.replace(e, "").replace(/[^\da-fA-F]/g, ""),
                    type: _n271
                  });
                }
              } catch (err) {
                _iterator414.e(err);
              } finally {
                _iterator414.f();
              }
            }

            return o;
          }(e), n);
        }

        function Vk(t) {
          return btoa(t.match(/\w{2}/g).map(function (t) {
            return String.fromCharCode(parseInt(t, 16));
          }).join(""));
        }

        var Uk = /<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,
            Hk = /xmlns:o="urn:schemas-microsoft-com/i;

        var qk = /*#__PURE__*/function () {
          function qk(t) {
            _classCallCheck(this, qk);

            this.document = t;
          }

          _createClass(qk, [{
            key: "isActive",
            value: function isActive(t) {
              return Uk.test(t) || Hk.test(t);
            }
          }, {
            key: "execute",
            value: function execute(t) {
              var _t$_parsedData = t._parsedData,
                  e = _t$_parsedData.body,
                  n = _t$_parsedData.stylesString;
              Dk(e, n), Fk(e, t.dataTransfer.getData("text/rtf")), t.content = e;
            }
          }]);

          return qk;
        }();

        function Wk(t) {
          return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g, function (t, e) {
            return 1 === e.length ? " " : Array(e.length + 1).join("  ").substr(0, e.length);
          });
        }

        function $k(t, e) {
          var n = new DOMParser(),
              i = function (t) {
            return Wk(Wk(t)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g, "$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g, "").replace(/ <\//g, " </").replace(/ <o:p><\/o:p>/g, " <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g, "").replace(/>([^\S\r\n]*[\r\n]\s*)</g, "><");
          }(function (t) {
            var e = t.indexOf("</body>");
            if (e < 0) return t;
            var n = t.indexOf("</html>", e + "</body>".length);
            return t.substring(0, e + "</body>".length) + (n >= 0 ? t.substring(n) : "");
          }(t = t.replace(/<!--\[if gte vml 1]>/g, ""))),
              o = n.parseFromString(i, "text/html");

          !function (t) {
            t.querySelectorAll("span[style*=spacerun]").forEach(function (t) {
              var e = t.innerText.length || 0;
              t.innerHTML = Array(e + 1).join("  ").substr(0, e);
            });
          }(o);

          var r = o.body.innerHTML,
              s = function (t, e) {
            var n = new Hi(e),
                i = new Go(n, {
              blockFillerMode: "nbsp"
            }),
                o = t.createDocumentFragment(),
                r = t.body.childNodes;

            for (; r.length > 0;) {
              o.appendChild(r[0]);
            }

            return i.domToView(o, {
              skipComments: !0
            });
          }(o, e),
              a = function (t) {
            var e = [],
                n = [],
                i = Array.from(t.getElementsByTagName("style"));

            for (var _i221 = 0, _i220 = i; _i221 < _i220.length; _i221++) {
              var _t337 = _i220[_i221];
              _t337.sheet && _t337.sheet.cssRules && _t337.sheet.cssRules.length && (e.push(_t337.sheet), n.push(_t337.innerHTML));
            }

            return {
              styles: e,
              stylesString: n.join(" ")
            };
          }(o);

          return {
            body: s,
            bodyString: r,
            styles: a.styles,
            stylesString: a.stylesString
          };
        }

        function Yk(t, e, n, i) {
          var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;
          e > o ? i.setAttribute(t, e, n) : i.removeAttribute(t, n);
        }

        function Jk(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
          var i = t.createElement("tableCell", n);
          return t.insertElement("paragraph", i), t.insert(i, e), i;
        }

        function Gk(t, e) {
          var n = e.parent.parent,
              i = parseInt(n.getAttribute("headingColumns") || 0),
              _t$getCellLocation = t.getCellLocation(e),
              o = _t$getCellLocation.column;

          return !!i && o < i;
        }

        function Kk() {
          return function (t) {
            t.on("element:table", function (t, e, n) {
              var i = e.viewItem;
              if (!n.consumable.test(i, {
                name: !0
              })) return;

              var _ref79 = function (t) {
                var e = {
                  headingRows: 0,
                  headingColumns: 0
                },
                    n = [],
                    i = [];
                var o;

                for (var _i222 = 0, _Array$from7 = Array.from(t.getChildren()); _i222 < _Array$from7.length; _i222++) {
                  var _r135 = _Array$from7[_i222];

                  if ("tbody" === _r135.name || "thead" === _r135.name || "tfoot" === _r135.name) {
                    "thead" !== _r135.name || o || (o = _r135);

                    var _t338 = Array.from(_r135.getChildren()).filter(function (t) {
                      return t.is("element", "tr");
                    });

                    var _iterator415 = _createForOfIteratorHelper(_t338),
                        _step415;

                    try {
                      for (_iterator415.s(); !(_step415 = _iterator415.n()).done;) {
                        var _r136 = _step415.value;
                        if ("thead" === _r136.parent.name && _r136.parent === o) e.headingRows++, n.push(_r136);else {
                          i.push(_r136);

                          var _t339 = Xk(_r136);

                          _t339 > e.headingColumns && (e.headingColumns = _t339);
                        }
                      }
                    } catch (err) {
                      _iterator415.e(err);
                    } finally {
                      _iterator415.f();
                    }
                  }
                }

                return e.rows = [].concat(n, i), e;
              }(i),
                  o = _ref79.rows,
                  r = _ref79.headingRows,
                  s = _ref79.headingColumns,
                  a = {};

              s && (a.headingColumns = s), r && (a.headingRows = r);
              var c = n.writer.createElement("table", a);

              if (n.safeInsert(c, e.modelCursor)) {
                if (n.consumable.consume(i, {
                  name: !0
                }), o.forEach(function (t) {
                  return n.convertItem(t, n.writer.createPositionAt(c, "end"));
                }), n.convertChildren(i, n.writer.createPositionAt(c, "end")), c.isEmpty) {
                  var _t340 = n.writer.createElement("tableRow");

                  n.writer.insert(_t340, n.writer.createPositionAt(c, "end")), Jk(n.writer, n.writer.createPositionAt(_t340, "end"));
                }

                n.updateConversionResult(c, e);
              }
            });
          };
        }

        function Qk(t) {
          return function (e) {
            e.on("element:".concat(t), function (t, e, n) {
              if (e.modelRange && e.viewItem.isEmpty) {
                var _t341 = e.modelRange.start.nodeAfter,
                    _i223 = n.writer.createPositionAt(_t341, 0);

                n.writer.insertElement("paragraph", _i223);
              }
            }, {
              priority: "low"
            });
          };
        }

        function Xk(t) {
          var e = 0,
              n = 0;
          var i = Array.from(t.getChildren()).filter(function (t) {
            return "th" === t.name || "td" === t.name;
          });

          for (; n < i.length && "th" === i[n].name;) {
            var _t342 = i[n];
            e += parseInt(_t342.getAttribute("colspan") || 1), n++;
          }

          return e;
        }

        var Zk = /*#__PURE__*/function (_Symbol$iterator14) {
          function Zk(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            _classCallCheck(this, Zk);

            this._table = t, this._startRow = void 0 !== e.row ? e.row : e.startRow || 0, this._endRow = void 0 !== e.row ? e.row : e.endRow, this._startColumn = void 0 !== e.column ? e.column : e.startColumn || 0, this._endColumn = void 0 !== e.column ? e.column : e.endColumn, this._includeAllSlots = !!e.includeAllSlots, this._skipRows = new Set(), this._row = 0, this._rowIndex = 0, this._column = 0, this._cellIndex = 0, this._spannedCells = new Map(), this._nextCellAtColumn = -1;
          }

          _createClass(Zk, [{
            key: _Symbol$iterator14,
            value: function value() {
              return this;
            }
          }, {
            key: "next",
            value: function next() {
              var t = this._table.getChild(this._rowIndex);

              if (!t || this._isOverEndRow()) return {
                done: !0
              };
              if (!t.is("element", "tableRow")) return this._rowIndex++, this.next();
              if (this._isOverEndColumn()) return this._advanceToNextRow();
              var e = null;

              var n = this._getSpanned();

              if (n) this._includeAllSlots && !this._shouldSkipSlot() && (e = this._formatOutValue(n.cell, n.row, n.column));else {
                var _n272 = t.getChild(this._cellIndex);

                if (!_n272) return this._advanceToNextRow();

                var _i224 = parseInt(_n272.getAttribute("colspan") || 1),
                    _o115 = parseInt(_n272.getAttribute("rowspan") || 1);

                (_i224 > 1 || _o115 > 1) && this._recordSpans(_n272, _o115, _i224), this._shouldSkipSlot() || (e = this._formatOutValue(_n272)), this._nextCellAtColumn = this._column + _i224;
              }
              return this._column++, this._column == this._nextCellAtColumn && this._cellIndex++, e || this.next();
            }
          }, {
            key: "skipRow",
            value: function skipRow(t) {
              this._skipRows.add(t);
            }
          }, {
            key: "_advanceToNextRow",
            value: function _advanceToNextRow() {
              return this._row++, this._rowIndex++, this._column = 0, this._cellIndex = 0, this._nextCellAtColumn = -1, this.next();
            }
          }, {
            key: "_isOverEndRow",
            value: function _isOverEndRow() {
              return void 0 !== this._endRow && this._row > this._endRow;
            }
          }, {
            key: "_isOverEndColumn",
            value: function _isOverEndColumn() {
              return void 0 !== this._endColumn && this._column > this._endColumn;
            }
          }, {
            key: "_formatOutValue",
            value: function _formatOutValue(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._row;
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this._column;
              return {
                done: !1,
                value: new t_(this, t, e, n)
              };
            }
          }, {
            key: "_shouldSkipSlot",
            value: function _shouldSkipSlot() {
              var t = this._skipRows.has(this._row),
                  e = this._row < this._startRow,
                  n = this._column < this._startColumn,
                  i = void 0 !== this._endColumn && this._column > this._endColumn;

              return t || e || n || i;
            }
          }, {
            key: "_getSpanned",
            value: function _getSpanned() {
              var t = this._spannedCells.get(this._row);

              return t && t.get(this._column) || null;
            }
          }, {
            key: "_recordSpans",
            value: function _recordSpans(t, e, n) {
              var i = {
                cell: t,
                row: this._row,
                column: this._column
              };

              for (var _t343 = this._row; _t343 < this._row + e; _t343++) {
                for (var _e306 = this._column; _e306 < this._column + n; _e306++) {
                  _t343 == this._row && _e306 == this._column || this._markSpannedCell(_t343, _e306, i);
                }
              }
            }
          }, {
            key: "_markSpannedCell",
            value: function _markSpannedCell(t, e, n) {
              this._spannedCells.has(t) || this._spannedCells.set(t, new Map()), this._spannedCells.get(t).set(e, n);
            }
          }]);

          return Zk;
        }(Symbol.iterator);

        var t_ = /*#__PURE__*/function () {
          function t_(t, e, n, i) {
            _classCallCheck(this, t_);

            this.cell = e, this.row = t._row, this.column = t._column, this.cellAnchorRow = n, this.cellAnchorColumn = i, this._cellIndex = t._cellIndex, this._rowIndex = t._rowIndex, this._table = t._table;
          }

          _createClass(t_, [{
            key: "isAnchor",
            get: function get() {
              return this.row === this.cellAnchorRow && this.column === this.cellAnchorColumn;
            }
          }, {
            key: "cellWidth",
            get: function get() {
              return parseInt(this.cell.getAttribute("colspan") || 1);
            }
          }, {
            key: "cellHeight",
            get: function get() {
              return parseInt(this.cell.getAttribute("rowspan") || 1);
            }
          }, {
            key: "rowIndex",
            get: function get() {
              return this._rowIndex;
            }
          }, {
            key: "getPositionBefore",
            value: function getPositionBefore() {
              return this._table.root.document.model.createPositionAt(this._table.getChild(this.row), this._cellIndex);
            }
          }]);

          return t_;
        }();

        function e_() {
          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
          return function (e) {
            return e.on("insert:table", function (e, n, i) {
              var o = n.item;
              if (!i.consumable.consume(o, "insert")) return;
              i.consumable.consume(o, "attribute:headingRows:table"), i.consumable.consume(o, "attribute:headingColumns:table");
              var r = t && t.asWidget,
                  s = i.writer.createContainerElement("figure", {
                "class": "table"
              }),
                  a = i.writer.createContainerElement("table");
              var c;
              i.writer.insert(i.writer.createPositionAt(s, 0), a), r && (c = function (t, e) {
                return e.setCustomProperty("table", !0, t), Kh(t, e, {
                  hasSelectionHandle: !0
                });
              }(s, i.writer));
              var l = new Zk(o),
                  d = {
                headingRows: o.getAttribute("headingRows") || 0,
                headingColumns: o.getAttribute("headingColumns") || 0
              },
                  u = new Map();

              var _iterator416 = _createForOfIteratorHelper(l),
                  _step416;

              try {
                for (_iterator416.s(); !(_step416 = _iterator416.n()).done;) {
                  var _e307 = _step416.value;

                  var _n273 = _e307.row,
                      _r137 = _e307.cell,
                      _s40 = o.getChild(_n273),
                      _c13 = u.get(_n273) || s_(a, _s40, _n273, d, i);

                  u.set(_n273, _c13), i.consumable.consume(_r137, "insert"), r_(_e307, d, i.writer.createPositionAt(_c13, "end"), i, t);
                }
              } catch (err) {
                _iterator416.e(err);
              } finally {
                _iterator416.f();
              }

              var _iterator417 = _createForOfIteratorHelper(o.getChildren()),
                  _step417;

              try {
                for (_iterator417.s(); !(_step417 = _iterator417.n()).done;) {
                  var _t344 = _step417.value;
                  var _e308 = _t344.index;
                  _t344.is("element", "tableRow") && !u.has(_e308) && u.set(_e308, s_(a, _t344, _e308, d, i));
                }
              } catch (err) {
                _iterator417.e(err);
              } finally {
                _iterator417.f();
              }

              var h = i.mapper.toViewPosition(n.range.start);
              i.mapper.bindElements(o, r ? c : s), i.writer.insert(h, r ? c : s);
            });
          };
        }

        function n_(t, e) {
          var n = e.writer;
          if (t.parent.is("element", "tableCell")) return i_(t) ? n.createContainerElement("span", {
            "class": "ck-table-bogus-paragraph"
          }) : n.createContainerElement("p");
        }

        function i_(t) {
          return 1 === t.parent.childCount && !d_(t);
        }

        function o_(t, e, n) {
          var i = t.cell,
              o = a_(t, e),
              r = n.mapper.toViewElement(i);
          r && r.name !== o && function (t, e, n) {
            var i = n.writer,
                o = n.mapper.toViewElement(t),
                r = Xh(i.createEditableElement(e, o.getAttributes()), i);
            i.insert(i.createPositionAfter(o), r), i.move(i.createRangeIn(o), i.createPositionAt(r, 0)), i.remove(i.createRangeOn(o)), n.mapper.unbindViewElement(o), n.mapper.bindElements(t, r);
          }(i, o, n);
        }

        function r_(t, e, n, i, o) {
          var r = o && o.asWidget,
              s = a_(t, e),
              a = r ? Xh(i.writer.createEditableElement(s), i.writer) : i.writer.createContainerElement(s),
              c = t.cell,
              l = c.getChild(0),
              d = 1 === c.childCount && "paragraph" === l.name;

          if (i.writer.insert(n, a), i.mapper.bindElements(c, a), !r && d && !d_(l)) {
            var _t345 = c.getChild(0);

            i.consumable.consume(_t345, "insert"), i.mapper.bindElements(_t345, a);
          }
        }

        function s_(t, e, n, i, o) {
          o.consumable.consume(e, "insert");
          var r = e.isEmpty ? o.writer.createEmptyElement("tr") : o.writer.createContainerElement("tr");
          o.mapper.bindElements(e, r);

          var s = i.headingRows,
              a = function (t, e, n) {
            var i = c_(t, e);
            return i || function (t, e, n) {
              var i = n.writer.createContainerElement(t),
                  o = n.writer.createPositionAt(e, "tbody" == t ? "end" : 0);
              return n.writer.insert(o, i), i;
            }(t, e, n);
          }(function (t, e) {
            return t < e.headingRows ? "thead" : "tbody";
          }(n, i), t, o),
              c = s > 0 && n >= s ? n - s : n,
              l = o.writer.createPositionAt(a, c);

          return o.writer.insert(l, r), r;
        }

        function a_(t, e) {
          var n = t.row,
              i = t.column,
              o = e.headingColumns,
              r = e.headingRows;
          return r && r > n ? "th" : o && o > i ? "th" : "td";
        }

        function c_(t, e) {
          var _iterator418 = _createForOfIteratorHelper(e.getChildren()),
              _step418;

          try {
            for (_iterator418.s(); !(_step418 = _iterator418.n()).done;) {
              var _n274 = _step418.value;
              if (_n274.name == t) return _n274;
            }
          } catch (err) {
            _iterator418.e(err);
          } finally {
            _iterator418.f();
          }
        }

        function l_(t, e, n) {
          var i = c_(t, e);
          i && 0 === i.childCount && n.writer.remove(n.writer.createRangeOn(i));
        }

        function d_(t) {
          return !!_toConsumableArray(t.getAttributeKeys()).length;
        }

        var u_ = /*#__PURE__*/function (_a50) {
          _inherits(u_, _a50);

          var _super241 = _createSuper(u_);

          function u_() {
            _classCallCheck(this, u_);

            return _super241.apply(this, arguments);
          }

          _createClass(u_, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document.selection,
                  n = t.schema;

              this.isEnabled = function (t, e) {
                var n = t.getFirstPosition().parent,
                    i = n === n.root ? n : n.parent;
                return e.checkChild(i, "table");
              }(e, n);
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document.selection,
                  i = this.editor.plugins.get("TableUtils"),
                  o = this.editor.config.get("table"),
                  r = Zh(n, e),
                  s = o.defaultHeadings.rows,
                  a = o.defaultHeadings.columns;
              void 0 === t.headingRows && s && (t.headingRows = s), void 0 === t.headingColumns && a && (t.headingColumns = a), e.change(function (n) {
                var o = i.createTable(n, t);
                e.insertContent(o, r), n.setSelection(n.createPositionAt(o.getNodeByPath([0, 0, 0]), 0));
              });
            }
          }]);

          return u_;
        }(a);

        function h_(t) {
          var e = [];

          var _iterator419 = _createForOfIteratorHelper(k_(t.getRanges())),
              _step419;

          try {
            for (_iterator419.s(); !(_step419 = _iterator419.n()).done;) {
              var _n275 = _step419.value;

              var _t346 = _n275.getContainedElement();

              _t346 && _t346.is("element", "tableCell") && e.push(_t346);
            }
          } catch (err) {
            _iterator419.e(err);
          } finally {
            _iterator419.f();
          }

          return e;
        }

        function f_(t) {
          var e = [];

          var _iterator420 = _createForOfIteratorHelper(t.getRanges()),
              _step420;

          try {
            for (_iterator420.s(); !(_step420 = _iterator420.n()).done;) {
              var _n276 = _step420.value;

              var _t347 = _n276.start.findAncestor("tableCell");

              _t347 && e.push(_t347);
            }
          } catch (err) {
            _iterator420.e(err);
          } finally {
            _iterator420.f();
          }

          return e;
        }

        function g_(t) {
          var e = h_(t);
          return e.length ? e : f_(t);
        }

        function m_(t) {
          return __(t.map(function (t) {
            return t.parent.index;
          }));
        }

        function p_(t) {
          var e = t[0].findAncestor("table");
          return __(_toConsumableArray(new Zk(e)).filter(function (e) {
            return t.includes(e.cell);
          }).map(function (t) {
            return t.column;
          }));
        }

        function b_(t, e) {
          if (t.length < 2 || !function (t) {
            var e = t[0].findAncestor("table"),
                n = m_(t),
                i = parseInt(e.getAttribute("headingRows") || 0);
            if (!v_(n, i)) return !1;
            var o = parseInt(e.getAttribute("headingColumns") || 0);
            return v_(p_(t), o);
          }(t)) return !1;
          var n = new Set(),
              i = new Set();
          var o = 0;

          var _iterator421 = _createForOfIteratorHelper(t),
              _step421;

          try {
            for (_iterator421.s(); !(_step421 = _iterator421.n()).done;) {
              var _r138 = _step421.value;

              var _e$getCellLocation = e.getCellLocation(_r138),
                  _t348 = _e$getCellLocation.row,
                  _s41 = _e$getCellLocation.column,
                  _a51 = parseInt(_r138.getAttribute("rowspan") || 1),
                  _c14 = parseInt(_r138.getAttribute("colspan") || 1);

              n.add(_t348), i.add(_s41), _a51 > 1 && n.add(_t348 + _a51 - 1), _c14 > 1 && i.add(_s41 + _c14 - 1), o += _a51 * _c14;
            }
          } catch (err) {
            _iterator421.e(err);
          } finally {
            _iterator421.f();
          }

          return function (t, e) {
            var n = Array.from(t.values()),
                i = Array.from(e.values()),
                o = Math.max.apply(Math, _toConsumableArray(n)),
                r = Math.min.apply(Math, _toConsumableArray(n)),
                s = Math.max.apply(Math, _toConsumableArray(i)),
                a = Math.min.apply(Math, _toConsumableArray(i));
            return (o - r + 1) * (s - a + 1);
          }(n, i) == o;
        }

        function k_(t) {
          return Array.from(t).sort(w_);
        }

        function __(t) {
          var e = t.sort(function (t, e) {
            return t - e;
          });
          return {
            first: e[0],
            last: e[e.length - 1]
          };
        }

        function w_(t, e) {
          var n = t.start,
              i = e.start;
          return n.isBefore(i) ? -1 : 1;
        }

        function v_(_ref80, n) {
          var t = _ref80.first,
              e = _ref80.last;
          return t < n === e < n;
        }

        var y_ = /*#__PURE__*/function (_a52) {
          _inherits(y_, _a52);

          var _super242 = _createSuper(y_);

          function y_(t) {
            var _this348;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            _classCallCheck(this, y_);

            _this348 = _super242.call(this, t), _this348.order = e.order || "below";
            return _this348;
          }

          _createClass(y_, [{
            key: "refresh",
            value: function refresh() {
              var t = !!g_(this.editor.model.document.selection).length;
              this.isEnabled = t;
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor,
                  e = t.model.document.selection,
                  n = t.plugins.get("TableUtils"),
                  i = "above" === this.order,
                  o = g_(e),
                  r = m_(o),
                  s = i ? r.first : r.last,
                  a = o[0].findAncestor("table");
              n.insertRows(a, {
                at: i ? s : s + 1,
                copyStructureFromAbove: !i
              });
            }
          }]);

          return y_;
        }(a);

        var x_ = /*#__PURE__*/function (_a53) {
          _inherits(x_, _a53);

          var _super243 = _createSuper(x_);

          function x_(t) {
            var _this349;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            _classCallCheck(this, x_);

            _this349 = _super243.call(this, t), _this349.order = e.order || "right";
            return _this349;
          }

          _createClass(x_, [{
            key: "refresh",
            value: function refresh() {
              var t = !!g_(this.editor.model.document.selection).length;
              this.isEnabled = t;
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor,
                  e = t.model.document.selection,
                  n = t.plugins.get("TableUtils"),
                  i = "left" === this.order,
                  o = g_(e),
                  r = p_(o),
                  s = i ? r.first : r.last,
                  a = o[0].findAncestor("table");
              n.insertColumns(a, {
                columns: 1,
                at: i ? s : s + 1
              });
            }
          }]);

          return x_;
        }(a);

        var C_ = /*#__PURE__*/function (_a54) {
          _inherits(C_, _a54);

          var _super244 = _createSuper(C_);

          function C_(t) {
            var _this350;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            _classCallCheck(this, C_);

            _this350 = _super244.call(this, t), _this350.direction = e.direction || "horizontally";
            return _this350;
          }

          _createClass(C_, [{
            key: "refresh",
            value: function refresh() {
              var t = g_(this.editor.model.document.selection);
              this.isEnabled = 1 === t.length;
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = g_(this.editor.model.document.selection)[0],
                  e = "horizontally" === this.direction,
                  n = this.editor.plugins.get("TableUtils");
              e ? n.splitCellHorizontally(t, 2) : n.splitCellVertically(t, 2);
            }
          }]);

          return C_;
        }(a);

        function T_(t, e, n) {
          var i = e.startRow,
              o = e.startColumn,
              r = e.endRow,
              s = e.endColumn,
              a = n.createElement("table"),
              c = r - i + 1;

          for (var _t349 = 0; _t349 < c; _t349++) {
            n.insertElement("tableRow", a, "end");
          }

          var l = _toConsumableArray(new Zk(t, {
            startRow: i,
            endRow: r,
            startColumn: o,
            endColumn: s,
            includeAllSlots: !0
          }));

          var _iterator422 = _createForOfIteratorHelper(l),
              _step422;

          try {
            for (_iterator422.s(); !(_step422 = _iterator422.n()).done;) {
              var _step422$value = _step422.value,
                  _t350 = _step422$value.row,
                  _e311 = _step422$value.column,
                  _c15 = _step422$value.cell,
                  _d3 = _step422$value.isAnchor,
                  _u3 = _step422$value.cellAnchorRow,
                  _h2 = _step422$value.cellAnchorColumn;

              var _l7 = _t350 - i,
                  _f2 = a.getChild(_l7);

              if (_d3) {
                var _i225 = n.cloneElement(_c15);

                n.append(_i225, _f2), O_(_i225, _t350, _e311, r, s, n);
              } else (_u3 < i || _h2 < o) && Jk(n, n.createPositionAt(_f2, "end"));
            }
          } catch (err) {
            _iterator422.e(err);
          } finally {
            _iterator422.f();
          }

          return function (t, e, n, i, o) {
            var r = parseInt(e.getAttribute("headingRows") || 0);

            if (r > 0) {
              var _e309 = r - n;

              Yk("headingRows", _e309, t, o, 0);
            }

            var s = parseInt(e.getAttribute("headingColumns") || 0);

            if (s > 0) {
              var _e310 = s - i;

              Yk("headingColumns", _e310, t, o, 0);
            }
          }(a, t, i, o, n), a;
        }

        function A_(t, e) {
          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
          var i = [],
              o = new Zk(t, {
            startRow: n,
            endRow: e - 1
          });

          var _iterator423 = _createForOfIteratorHelper(o),
              _step423;

          try {
            for (_iterator423.s(); !(_step423 = _iterator423.n()).done;) {
              var _t351 = _step423.value;
              var _n277 = _t351.row,
                  _o116 = _t351.cellHeight;
              _n277 < e && e <= _n277 + _o116 - 1 && i.push(_t351);
            }
          } catch (err) {
            _iterator423.e(err);
          } finally {
            _iterator423.f();
          }

          return i;
        }

        function E_(t, e, n) {
          var i = t.parent,
              o = i.parent,
              r = i.index,
              s = e - r,
              a = {},
              c = parseInt(t.getAttribute("rowspan")) - s;
          c > 1 && (a.rowspan = c);
          var l = parseInt(t.getAttribute("colspan") || 1);
          l > 1 && (a.colspan = l);

          var d = r + s,
              u = _toConsumableArray(new Zk(o, {
            startRow: r,
            endRow: d,
            includeAllSlots: !0
          }));

          var h,
              f = null;

          var _iterator424 = _createForOfIteratorHelper(u),
              _step424;

          try {
            for (_iterator424.s(); !(_step424 = _iterator424.n()).done;) {
              var _e312 = _step424.value;
              var _i226 = _e312.row,
                  _o117 = _e312.column,
                  _r139 = _e312.cell;
              _r139 === t && void 0 === h && (h = _o117), void 0 !== h && h === _o117 && _i226 === d && (f = Jk(n, _e312.getPositionBefore(), a));
            }
          } catch (err) {
            _iterator424.e(err);
          } finally {
            _iterator424.f();
          }

          return Yk("rowspan", s, t, n), f;
        }

        function S_(t, e) {
          var n = [],
              i = new Zk(t);

          var _iterator425 = _createForOfIteratorHelper(i),
              _step425;

          try {
            for (_iterator425.s(); !(_step425 = _iterator425.n()).done;) {
              var _t352 = _step425.value;
              var _i227 = _t352.column,
                  _o118 = _t352.cellWidth;
              _i227 < e && e <= _i227 + _o118 - 1 && n.push(_t352);
            }
          } catch (err) {
            _iterator425.e(err);
          } finally {
            _iterator425.f();
          }

          return n;
        }

        function I_(t, e, n, i) {
          var o = n - e,
              r = {},
              s = parseInt(t.getAttribute("colspan")) - o;
          s > 1 && (r.colspan = s);
          var a = parseInt(t.getAttribute("rowspan") || 1);
          a > 1 && (r.rowspan = a);
          var c = Jk(i, i.createPositionAfter(t), r);
          return Yk("colspan", o, t, i), c;
        }

        function O_(t, e, n, i, o, r) {
          var s = parseInt(t.getAttribute("colspan") || 1),
              a = parseInt(t.getAttribute("rowspan") || 1);

          if (n + s - 1 > o) {
            Yk("colspan", o - n + 1, t, r, 1);
          }

          if (e + a - 1 > i) {
            Yk("rowspan", i - e + 1, t, r, 1);
          }
        }

        function R_(t, e) {
          var n = e.getColumns(t),
              i = new Array(n).fill(0);

          var _iterator426 = _createForOfIteratorHelper(new Zk(t)),
              _step426;

          try {
            for (_iterator426.s(); !(_step426 = _iterator426.n()).done;) {
              var _e313 = _step426.value.column;
              i[_e313]++;
            }
          } catch (err) {
            _iterator426.e(err);
          } finally {
            _iterator426.f();
          }

          var o = i.reduce(function (t, e, n) {
            return e ? t : [].concat(_toConsumableArray(t), [n]);
          }, []);

          if (o.length > 0) {
            var _n278 = o[o.length - 1];
            return e.removeColumns(t, {
              at: _n278
            }), !0;
          }

          return !1;
        }

        function M_(t, e) {
          var n = [],
              i = e.getRows(t);

          for (var _e314 = 0; _e314 < i; _e314++) {
            t.getChild(_e314).isEmpty && n.push(_e314);
          }

          if (n.length > 0) {
            var _i228 = n[n.length - 1];
            return e.removeRows(t, {
              at: _i228
            }), !0;
          }

          return !1;
        }

        function P_(t, e) {
          R_(t, e) || M_(t, e);
        }

        function N_(t, e) {
          var n = Array.from(new Zk(t, {
            startColumn: e.firstColumn,
            endColumn: e.lastColumn,
            row: e.lastRow
          }));
          if (n.every(function (_ref81) {
            var t = _ref81.cellHeight;
            return 1 === t;
          })) return e.lastRow;
          var i = n[0].cellHeight - 1;
          return e.lastRow + i;
        }

        function D_(t, e) {
          var n = Array.from(new Zk(t, {
            startRow: e.firstRow,
            endRow: e.lastRow,
            column: e.lastColumn
          }));
          if (n.every(function (_ref82) {
            var t = _ref82.cellWidth;
            return 1 === t;
          })) return e.lastColumn;
          var i = n[0].cellWidth - 1;
          return e.lastColumn + i;
        }

        var j_ = /*#__PURE__*/function (_a55) {
          _inherits(j_, _a55);

          var _super245 = _createSuper(j_);

          function j_(t, e) {
            var _this351;

            _classCallCheck(this, j_);

            _this351 = _super245.call(this, t), _this351.direction = e.direction, _this351.isHorizontal = "right" == _this351.direction || "left" == _this351.direction;
            return _this351;
          }

          _createClass(j_, [{
            key: "refresh",
            value: function refresh() {
              var t = this._getMergeableCell();

              this.value = t, this.isEnabled = !!t;
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this352 = this;

              var t = this.editor.model,
                  e = f_(t.document.selection)[0],
                  n = this.value,
                  i = this.direction;
              t.change(function (t) {
                var o = "right" == i || "down" == i,
                    r = o ? e : n,
                    s = o ? n : e,
                    a = s.parent;
                !function (t, e, n) {
                  B_(t) || (B_(e) && n.remove(n.createRangeIn(e)), n.move(n.createRangeIn(t), n.createPositionAt(e, "end")));
                  n.remove(t);
                }(s, r, t);
                var c = _this352.isHorizontal ? "colspan" : "rowspan",
                    l = parseInt(e.getAttribute(c) || 1),
                    d = parseInt(n.getAttribute(c) || 1);
                t.setAttribute(c, l + d, r), t.setSelection(t.createRangeIn(r));

                var u = _this352.editor.plugins.get("TableUtils");

                P_(a.findAncestor("table"), u);
              });
            }
          }, {
            key: "_getMergeableCell",
            value: function _getMergeableCell() {
              var t = f_(this.editor.model.document.selection)[0];
              if (!t) return;
              var e = this.editor.plugins.get("TableUtils"),
                  n = this.isHorizontal ? function (t, e, n) {
                var i = t.parent.parent,
                    o = "right" == e ? t.nextSibling : t.previousSibling,
                    r = (i.getAttribute("headingColumns") || 0) > 0;
                if (!o) return;

                var s = "right" == e ? t : o,
                    a = "right" == e ? o : t,
                    _n$getCellLocation = n.getCellLocation(s),
                    c = _n$getCellLocation.column,
                    _n$getCellLocation2 = n.getCellLocation(a),
                    l = _n$getCellLocation2.column,
                    d = parseInt(s.getAttribute("colspan") || 1),
                    u = Gk(n, s),
                    h = Gk(n, a);

                if (r && u != h) return;
                return c + d === l ? o : void 0;
              }(t, this.direction, e) : function (t, e, n) {
                var i = t.parent,
                    o = i.parent,
                    r = o.getChildIndex(i);
                if ("down" == e && r === n.getRows(o) - 1 || "up" == e && 0 === r) return;
                var s = parseInt(t.getAttribute("rowspan") || 1),
                    a = o.getAttribute("headingRows") || 0;
                if (a && ("down" == e && r + s === a || "up" == e && r === a)) return;

                var c = parseInt(t.getAttribute("rowspan") || 1),
                    l = "down" == e ? r + c : r,
                    d = _toConsumableArray(new Zk(o, {
                  endRow: l
                })),
                    u = d.find(function (e) {
                  return e.cell === t;
                }).column,
                    h = d.find(function (_ref83) {
                  var t = _ref83.row,
                      n = _ref83.cellHeight,
                      i = _ref83.column;
                  return i === u && ("down" == e ? t === l : l === t + n);
                });

                return h && h.cell;
              }(t, this.direction, e);
              if (!n) return;
              var i = this.isHorizontal ? "rowspan" : "colspan",
                  o = parseInt(t.getAttribute(i) || 1);
              return parseInt(n.getAttribute(i) || 1) === o ? n : void 0;
            }
          }]);

          return j_;
        }(a);

        function B_(t) {
          return 1 == t.childCount && t.getChild(0).is("element", "paragraph") && t.getChild(0).isEmpty;
        }

        var L_ = /*#__PURE__*/function (_a56) {
          _inherits(L_, _a56);

          var _super246 = _createSuper(L_);

          function L_() {
            _classCallCheck(this, L_);

            return _super246.apply(this, arguments);
          }

          _createClass(L_, [{
            key: "refresh",
            value: function refresh() {
              var t = g_(this.editor.model.document.selection),
                  e = t[0];

              if (e) {
                var _n279 = e.findAncestor("table"),
                    _i229 = this.editor.plugins.get("TableUtils").getRows(_n279) - 1,
                    _o119 = m_(t),
                    _r140 = 0 === _o119.first && _o119.last === _i229;

                this.isEnabled = !_r140;
              } else this.isEnabled = !1;
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor.model,
                  e = this.editor.plugins.get("TableUtils"),
                  n = g_(t.document.selection),
                  i = m_(n),
                  o = n[0],
                  r = o.findAncestor("table"),
                  s = e.getCellLocation(o).column;
              t.change(function (t) {
                var n = i.last - i.first + 1;
                e.removeRows(r, {
                  at: i.first,
                  rows: n
                });

                var o = function (t, e, n, i) {
                  var o = t.getChild(Math.min(e, i - 1));
                  var r = o.getChild(0),
                      s = 0;

                  var _iterator427 = _createForOfIteratorHelper(o.getChildren()),
                      _step427;

                  try {
                    for (_iterator427.s(); !(_step427 = _iterator427.n()).done;) {
                      var _t353 = _step427.value;
                      if (s > n) return r;
                      r = _t353, s += parseInt(_t353.getAttribute("colspan") || 1);
                    }
                  } catch (err) {
                    _iterator427.e(err);
                  } finally {
                    _iterator427.f();
                  }

                  return r;
                }(r, i.first, s, e.getRows(r));

                t.setSelection(t.createPositionAt(o, 0));
              });
            }
          }]);

          return L_;
        }(a);

        var z_ = /*#__PURE__*/function (_a57) {
          _inherits(z_, _a57);

          var _super247 = _createSuper(z_);

          function z_() {
            _classCallCheck(this, z_);

            return _super247.apply(this, arguments);
          }

          _createClass(z_, [{
            key: "refresh",
            value: function refresh() {
              var t = g_(this.editor.model.document.selection),
                  e = t[0];

              if (e) {
                var _n280 = e.findAncestor("table"),
                    _i230 = this.editor.plugins.get("TableUtils").getColumns(_n280),
                    _p_ = p_(t),
                    _o120 = _p_.first,
                    _r141 = _p_.last;

                this.isEnabled = _r141 - _o120 < _i230 - 1;
              } else this.isEnabled = !1;
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this353 = this;

              var _ref84 = function (t) {
                var e = g_(t),
                    n = e[0],
                    i = e.pop(),
                    o = [n, i];
                return n.isBefore(i) ? o : o.reverse();
              }(this.editor.model.document.selection),
                  _ref85 = _slicedToArray(_ref84, 2),
                  t = _ref85[0],
                  e = _ref85[1],
                  n = t.parent.parent,
                  i = _toConsumableArray(new Zk(n)),
                  o = {
                first: i.find(function (e) {
                  return e.cell === t;
                }).column,
                last: i.find(function (t) {
                  return t.cell === e;
                }).column
              },
                  r = function (t, e, n, i) {
                return parseInt(n.getAttribute("colspan") || 1) > 1 ? n : e.previousSibling || n.nextSibling ? n.nextSibling || e.previousSibling : i.first ? t.reverse().find(function (_ref86) {
                  var t = _ref86.column;
                  return t < i.first;
                }).cell : t.reverse().find(function (_ref87) {
                  var t = _ref87.column;
                  return t > i.last;
                }).cell;
              }(i, t, e, o);

              this.editor.model.change(function (t) {
                var e = o.last - o.first + 1;
                _this353.editor.plugins.get("TableUtils").removeColumns(n, {
                  at: o.first,
                  columns: e
                }), t.setSelection(t.createPositionAt(r, 0));
              });
            }
          }]);

          return z_;
        }(a);

        var F_ = /*#__PURE__*/function (_a58) {
          _inherits(F_, _a58);

          var _super248 = _createSuper(F_);

          function F_() {
            _classCallCheck(this, F_);

            return _super248.apply(this, arguments);
          }

          _createClass(F_, [{
            key: "refresh",
            value: function refresh() {
              var _this354 = this;

              var t = g_(this.editor.model.document.selection),
                  e = t.length > 0;
              this.isEnabled = e, this.value = e && t.every(function (t) {
                return _this354._isInHeading(t, t.parent.parent);
              });
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              if (t.forceValue === this.value) return;

              var e = this.editor.model,
                  n = g_(e.document.selection),
                  i = n[0].findAncestor("table"),
                  _m_ = m_(n),
                  o = _m_.first,
                  r = _m_.last,
                  s = this.value ? o : r + 1,
                  a = i.getAttribute("headingRows") || 0;

              e.change(function (t) {
                if (s) {
                  var _e315 = A_(i, s, s > a ? a : 0);

                  var _iterator428 = _createForOfIteratorHelper(_e315),
                      _step428;

                  try {
                    for (_iterator428.s(); !(_step428 = _iterator428.n()).done;) {
                      var _n281 = _step428.value.cell;
                      E_(_n281, s, t);
                    }
                  } catch (err) {
                    _iterator428.e(err);
                  } finally {
                    _iterator428.f();
                  }
                }

                Yk("headingRows", s, i, t, 0);
              });
            }
          }, {
            key: "_isInHeading",
            value: function _isInHeading(t, e) {
              var n = parseInt(e.getAttribute("headingRows") || 0);
              return !!n && t.parent.index < n;
            }
          }]);

          return F_;
        }(a);

        var V_ = /*#__PURE__*/function (_a59) {
          _inherits(V_, _a59);

          var _super249 = _createSuper(V_);

          function V_() {
            _classCallCheck(this, V_);

            return _super249.apply(this, arguments);
          }

          _createClass(V_, [{
            key: "refresh",
            value: function refresh() {
              var t = g_(this.editor.model.document.selection),
                  e = this.editor.plugins.get("TableUtils"),
                  n = t.length > 0;
              this.isEnabled = n, this.value = n && t.every(function (t) {
                return Gk(e, t);
              });
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              if (t.forceValue === this.value) return;

              var e = this.editor.model,
                  n = g_(e.document.selection),
                  i = n[0].findAncestor("table"),
                  _p_2 = p_(n),
                  o = _p_2.first,
                  r = _p_2.last,
                  s = this.value ? o : r + 1;

              e.change(function (t) {
                if (s) {
                  var _e316 = S_(i, s);

                  var _iterator429 = _createForOfIteratorHelper(_e316),
                      _step429;

                  try {
                    for (_iterator429.s(); !(_step429 = _iterator429.n()).done;) {
                      var _step429$value = _step429.value,
                          _n282 = _step429$value.cell,
                          _i231 = _step429$value.column;
                      I_(_n282, _i231, s, t);
                    }
                  } catch (err) {
                    _iterator429.e(err);
                  } finally {
                    _iterator429.f();
                  }
                }

                Yk("headingColumns", s, i, t, 0);
              });
            }
          }]);

          return V_;
        }(a);

        var U_ = /*#__PURE__*/function (_r142) {
          _inherits(U_, _r142);

          var _super250 = _createSuper(U_);

          function U_() {
            _classCallCheck(this, U_);

            return _super250.apply(this, arguments);
          }

          _createClass(U_, [{
            key: "init",
            value: function init() {
              this.decorate("insertColumns"), this.decorate("insertRows");
            }
          }, {
            key: "getCellLocation",
            value: function getCellLocation(t) {
              var e = t.parent,
                  n = e.parent,
                  i = n.getChildIndex(e),
                  o = new Zk(n, {
                row: i
              });

              var _iterator430 = _createForOfIteratorHelper(o),
                  _step430;

              try {
                for (_iterator430.s(); !(_step430 = _iterator430.n()).done;) {
                  var _step430$value = _step430.value,
                      _e317 = _step430$value.cell,
                      _n283 = _step430$value.row,
                      _i232 = _step430$value.column;
                  if (_e317 === t) return {
                    row: _n283,
                    column: _i232
                  };
                }
              } catch (err) {
                _iterator430.e(err);
              } finally {
                _iterator430.f();
              }
            }
          }, {
            key: "createTable",
            value: function createTable(t, e) {
              var n = t.createElement("table"),
                  i = parseInt(e.rows) || 2,
                  o = parseInt(e.columns) || 2;
              return H_(t, n, 0, i, o), e.headingRows && Yk("headingRows", Math.min(e.headingRows, i), n, t, 0), e.headingColumns && Yk("headingColumns", Math.min(e.headingColumns, o), n, t, 0), n;
            }
          }, {
            key: "insertRows",
            value: function insertRows(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = this.editor.model,
                  i = e.at || 0,
                  o = e.rows || 1,
                  r = void 0 !== e.copyStructureFromAbove,
                  s = e.copyStructureFromAbove ? i - 1 : i,
                  a = this.getRows(t),
                  c = this.getColumns(t);
              if (i > a) throw new rn["default"]("tableutils-insertrows-insert-out-of-range", this, {
                options: e
              });
              n.change(function (e) {
                var n = t.getAttribute("headingRows") || 0;
                if (n > i && Yk("headingRows", n + o, t, e, 0), !r && (0 === i || i === a)) return void H_(e, t, i, o, c);
                var l = r ? Math.max(i, s) : i,
                    d = new Zk(t, {
                  endRow: l
                }),
                    u = new Array(c).fill(1);

                var _iterator431 = _createForOfIteratorHelper(d),
                    _step431;

                try {
                  for (_iterator431.s(); !(_step431 = _iterator431.n()).done;) {
                    var _step431$value = _step431.value,
                        _t355 = _step431$value.row,
                        _n286 = _step431$value.column,
                        _a60 = _step431$value.cellHeight,
                        _c16 = _step431$value.cellWidth,
                        _l8 = _step431$value.cell;

                    var _d4 = _t355 + _a60 - 1,
                        _h3 = _t355 <= s && s <= _d4;

                    _t355 < i && i <= _d4 ? (e.setAttribute("rowspan", _a60 + o, _l8), u[_n286] = -_c16) : r && _h3 && (u[_n286] = _c16);
                  }
                } catch (err) {
                  _iterator431.e(err);
                } finally {
                  _iterator431.f();
                }

                for (var _n284 = 0; _n284 < o; _n284++) {
                  var _n285 = e.createElement("tableRow");

                  e.insert(_n285, t, i);

                  for (var _t354 = 0; _t354 < u.length; _t354++) {
                    var _i233 = u[_t354],
                        _o121 = e.createPositionAt(_n285, "end");

                    _i233 > 0 && Jk(e, _o121, _i233 > 1 ? {
                      colspan: _i233
                    } : null), _t354 += Math.abs(_i233) - 1;
                  }
                }
              });
            }
          }, {
            key: "insertColumns",
            value: function insertColumns(t) {
              var _this355 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
              var n = this.editor.model,
                  i = e.at || 0,
                  o = e.columns || 1;
              n.change(function (e) {
                var n = t.getAttribute("headingColumns");
                i < n && e.setAttribute("headingColumns", n + o, t);

                var r = _this355.getColumns(t);

                if (0 === i || r === i) {
                  var _iterator432 = _createForOfIteratorHelper(t.getChildren()),
                      _step432;

                  try {
                    for (_iterator432.s(); !(_step432 = _iterator432.n()).done;) {
                      var _n287 = _step432.value;
                      _n287.is("element", "tableRow") && q_(o, e, e.createPositionAt(_n287, i ? "end" : 0));
                    }
                  } catch (err) {
                    _iterator432.e(err);
                  } finally {
                    _iterator432.f();
                  }

                  return;
                }

                var s = new Zk(t, {
                  column: i,
                  includeAllSlots: !0
                });

                var _iterator433 = _createForOfIteratorHelper(s),
                    _step433;

                try {
                  for (_iterator433.s(); !(_step433 = _iterator433.n()).done;) {
                    var _t356 = _step433.value;
                    var _n288 = _t356.row,
                        _r143 = _t356.cell,
                        _a61 = _t356.cellAnchorColumn,
                        _c17 = _t356.cellAnchorRow,
                        _l9 = _t356.cellWidth,
                        _d5 = _t356.cellHeight;

                    if (_a61 < i) {
                      e.setAttribute("colspan", _l9 + o, _r143);

                      var _t357 = _c17 + _d5 - 1;

                      for (var _e318 = _n288; _e318 <= _t357; _e318++) {
                        s.skipRow(_e318);
                      }
                    } else q_(o, e, _t356.getPositionBefore());
                  }
                } catch (err) {
                  _iterator433.e(err);
                } finally {
                  _iterator433.f();
                }
              });
            }
          }, {
            key: "removeRows",
            value: function removeRows(t, e) {
              var _this356 = this;

              var n = this.editor.model,
                  i = e.rows || 1,
                  o = this.getRows(t),
                  r = e.at,
                  s = r + i - 1;
              if (s > o - 1) throw new rn["default"]("tableutils-removerows-row-index-out-of-range", this, {
                table: t,
                options: e
              });
              n.change(function (e) {
                var _ref88 = function (t, e, n) {
                  var i = new Map(),
                      o = [];

                  var _iterator434 = _createForOfIteratorHelper(new Zk(t, {
                    endRow: n
                  })),
                      _step434;

                  try {
                    for (_iterator434.s(); !(_step434 = _iterator434.n()).done;) {
                      var _step434$value = _step434.value,
                          _r144 = _step434$value.row,
                          _s42 = _step434$value.column,
                          _a62 = _step434$value.cellHeight,
                          _c18 = _step434$value.cell;

                      var _t358 = _r144 + _a62 - 1,
                          _l10 = _r144 >= e && _r144 <= n && _t358 > n;

                      if (_l10) {
                        var _t359 = n - _r144 + 1,
                            _e319 = _a62 - _t359;

                        i.set(_s42, {
                          cell: _c18,
                          rowspan: _e319
                        });
                      }

                      var _d6 = _r144 < e && _t358 >= e;

                      if (_d6) {
                        var _i234 = void 0;

                        _i234 = _t358 >= n ? n - e + 1 : _t358 - e + 1, o.push({
                          cell: _c18,
                          rowspan: _a62 - _i234
                        });
                      }
                    }
                  } catch (err) {
                    _iterator434.e(err);
                  } finally {
                    _iterator434.f();
                  }

                  return {
                    cellsToMove: i,
                    cellsToTrim: o
                  };
                }(t, r, s),
                    n = _ref88.cellsToMove,
                    i = _ref88.cellsToTrim;

                if (n.size) {
                  !function (t, e, n, i) {
                    var o = _toConsumableArray(new Zk(t, {
                      includeAllSlots: !0,
                      row: e
                    })),
                        r = t.getChild(e);

                    var s;

                    var _iterator435 = _createForOfIteratorHelper(o),
                        _step435;

                    try {
                      for (_iterator435.s(); !(_step435 = _iterator435.n()).done;) {
                        var _step435$value = _step435.value,
                            _t360 = _step435$value.column,
                            _e320 = _step435$value.cell,
                            _a63 = _step435$value.isAnchor;

                        if (n.has(_t360)) {
                          var _n$get = n.get(_t360),
                              _e321 = _n$get.cell,
                              _o122 = _n$get.rowspan,
                              _a64 = s ? i.createPositionAfter(s) : i.createPositionAt(r, 0);

                          i.move(i.createRangeOn(_e321), _a64), Yk("rowspan", _o122, _e321, i), s = _e321;
                        } else _a63 && (s = _e320);
                      }
                    } catch (err) {
                      _iterator435.e(err);
                    } finally {
                      _iterator435.f();
                    }
                  }(t, s + 1, n, e);
                }

                for (var _n289 = s; _n289 >= r; _n289--) {
                  e.remove(t.getChild(_n289));
                }

                var _iterator436 = _createForOfIteratorHelper(i),
                    _step436;

                try {
                  for (_iterator436.s(); !(_step436 = _iterator436.n()).done;) {
                    var _step436$value = _step436.value,
                        _t361 = _step436$value.rowspan,
                        _n290 = _step436$value.cell;
                    Yk("rowspan", _t361, _n290, e);
                  }
                } catch (err) {
                  _iterator436.e(err);
                } finally {
                  _iterator436.f();
                }

                !function (t, e, n, i) {
                  var o = t.getAttribute("headingRows") || 0;

                  if (e < o) {
                    var _r145 = n < o ? o - (n - e + 1) : e;

                    Yk("headingRows", _r145, t, i, 0);
                  }
                }(t, r, s, e), R_(t, _this356) || M_(t, _this356);
              });
            }
          }, {
            key: "removeColumns",
            value: function removeColumns(t, e) {
              var _this357 = this;

              var n = this.editor.model,
                  i = e.at,
                  o = e.columns || 1,
                  r = e.at + o - 1;
              n.change(function (e) {
                !function (t, e, n) {
                  var i = t.getAttribute("headingColumns") || 0;

                  if (i && e.first < i) {
                    var _o123 = Math.min(i - 1, e.last) - e.first + 1;

                    n.setAttribute("headingColumns", i - _o123, t);
                  }
                }(t, {
                  first: i,
                  last: r
                }, e);

                for (var _n291 = r; _n291 >= i; _n291--) {
                  for (var _i235 = 0, _arr3 = _toConsumableArray(new Zk(t)); _i235 < _arr3.length; _i235++) {
                    var _arr3$_i = _arr3[_i235],
                        _i236 = _arr3$_i.cell,
                        _o124 = _arr3$_i.column,
                        _r146 = _arr3$_i.cellWidth;
                    _o124 <= _n291 && _r146 > 1 && _o124 + _r146 > _n291 ? Yk("colspan", _r146 - 1, _i236, e) : _o124 === _n291 && e.remove(_i236);
                  }
                }

                M_(t, _this357) || R_(t, _this357);
              });
            }
          }, {
            key: "splitCellVertically",
            value: function splitCellVertically(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
              var n = this.editor.model,
                  i = t.parent.parent,
                  o = parseInt(t.getAttribute("rowspan") || 1),
                  r = parseInt(t.getAttribute("colspan") || 1);
              n.change(function (n) {
                if (r > 1) {
                  var _W_ = W_(r, e),
                      _i237 = _W_.newCellsSpan,
                      _s43 = _W_.updatedSpan;

                  Yk("colspan", _s43, t, n);
                  var _a65 = {};
                  _i237 > 1 && (_a65.colspan = _i237), o > 1 && (_a65.rowspan = o), q_(r > e ? e - 1 : r - 1, n, n.createPositionAfter(t), _a65);
                }

                if (r < e) {
                  var _s44 = e - r,
                      _a66 = _toConsumableArray(new Zk(i)),
                      _a66$find = _a66.find(function (_ref89) {
                    var e = _ref89.cell;
                    return e === t;
                  }),
                      _c19 = _a66$find.column,
                      _l11 = _a66.filter(function (_ref90) {
                    var e = _ref90.cell,
                        n = _ref90.cellWidth,
                        i = _ref90.column;
                    return e !== t && i === _c19 || i < _c19 && i + n > _c19;
                  });

                  var _iterator437 = _createForOfIteratorHelper(_l11),
                      _step437;

                  try {
                    for (_iterator437.s(); !(_step437 = _iterator437.n()).done;) {
                      var _step437$value = _step437.value,
                          _t362 = _step437$value.cell,
                          _e322 = _step437$value.cellWidth;
                      n.setAttribute("colspan", _e322 + _s44, _t362);
                    }
                  } catch (err) {
                    _iterator437.e(err);
                  } finally {
                    _iterator437.f();
                  }

                  var _d7 = {};
                  o > 1 && (_d7.rowspan = o), q_(_s44, n, n.createPositionAfter(t), _d7);

                  var _u4 = i.getAttribute("headingColumns") || 0;

                  _u4 > _c19 && Yk("headingColumns", _u4 + _s44, i, n);
                }
              });
            }
          }, {
            key: "splitCellHorizontally",
            value: function splitCellHorizontally(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
              var n = this.editor.model,
                  i = t.parent,
                  o = i.parent,
                  r = o.getChildIndex(i),
                  s = parseInt(t.getAttribute("rowspan") || 1),
                  a = parseInt(t.getAttribute("colspan") || 1);
              n.change(function (n) {
                if (s > 1) {
                  var _i238 = _toConsumableArray(new Zk(o, {
                    startRow: r,
                    endRow: r + s - 1,
                    includeAllSlots: !0
                  })),
                      _W_2 = W_(s, e),
                      _c20 = _W_2.newCellsSpan,
                      _l12 = _W_2.updatedSpan;

                  Yk("rowspan", _l12, t, n);

                  var _i238$find = _i238.find(function (_ref91) {
                    var e = _ref91.cell;
                    return e === t;
                  }),
                      _d8 = _i238$find.column,
                      _u5 = {};

                  _c20 > 1 && (_u5.rowspan = _c20), a > 1 && (_u5.colspan = a);

                  for (var _i240 = 0, _i239 = _i238; _i240 < _i239.length; _i240++) {
                    var _t363 = _i239[_i240];
                    var _e323 = _t363.column,
                        _i241 = _t363.row;
                    _i241 >= r + _l12 && _e323 === _d8 && (_i241 + r + _l12) % _c20 == 0 && q_(1, n, _t363.getPositionBefore(), _u5);
                  }
                }

                if (s < e) {
                  var _i242 = e - s,
                      _c21 = _toConsumableArray(new Zk(o, {
                    startRow: 0,
                    endRow: r
                  }));

                  var _iterator438 = _createForOfIteratorHelper(_c21),
                      _step438;

                  try {
                    for (_iterator438.s(); !(_step438 = _iterator438.n()).done;) {
                      var _step438$value = _step438.value,
                          _e324 = _step438$value.cell,
                          _o125 = _step438$value.cellHeight,
                          _s45 = _step438$value.row;

                      if (_e324 !== t && _s45 + _o125 > r) {
                        var _t364 = _o125 + _i242;

                        n.setAttribute("rowspan", _t364, _e324);
                      }
                    }
                  } catch (err) {
                    _iterator438.e(err);
                  } finally {
                    _iterator438.f();
                  }

                  var _l13 = {};
                  a > 1 && (_l13.colspan = a), H_(n, o, r + 1, _i242, 1, _l13);

                  var _d9 = o.getAttribute("headingRows") || 0;

                  _d9 > r && Yk("headingRows", _d9 + _i242, o, n);
                }
              });
            }
          }, {
            key: "getColumns",
            value: function getColumns(t) {
              return _toConsumableArray(t.getChild(0).getChildren()).reduce(function (t, e) {
                return t + parseInt(e.getAttribute("colspan") || 1);
              }, 0);
            }
          }, {
            key: "getRows",
            value: function getRows(t) {
              return Array.from(t.getChildren()).reduce(function (t, e) {
                return e.is("element", "tableRow") ? t + 1 : t;
              }, 0);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TableUtils";
            }
          }]);

          return U_;
        }(r);

        function H_(t, e, n, i, o) {
          var r = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};

          for (var _s46 = 0; _s46 < i; _s46++) {
            var _i243 = t.createElement("tableRow");

            t.insert(_i243, e, n), q_(o, t, t.createPositionAt(_i243, "end"), r);
          }
        }

        function q_(t, e, n) {
          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

          for (var _o126 = 0; _o126 < t; _o126++) {
            Jk(e, n, i);
          }
        }

        function W_(t, e) {
          if (t < e) return {
            newCellsSpan: 1,
            updatedSpan: 1
          };
          var n = Math.floor(t / e);
          return {
            newCellsSpan: n,
            updatedSpan: t - n * e + n
          };
        }

        var $_ = /*#__PURE__*/function (_a67) {
          _inherits($_, _a67);

          var _super251 = _createSuper($_);

          function $_() {
            _classCallCheck(this, $_);

            return _super251.apply(this, arguments);
          }

          _createClass($_, [{
            key: "refresh",
            value: function refresh() {
              var t = h_(this.editor.model.document.selection);
              this.isEnabled = b_(t, this.editor.plugins.get(U_));
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor.model,
                  e = this.editor.plugins.get(U_);
              t.change(function (n) {
                var i = h_(t.document.selection),
                    o = i.shift(),
                    _ref92 = function (t, e, n) {
                  var i = 0,
                      o = 0;

                  var _iterator439 = _createForOfIteratorHelper(e),
                      _step439;

                  try {
                    for (_iterator439.s(); !(_step439 = _iterator439.n()).done;) {
                      var _t365 = _step439.value;

                      var _n$getCellLocation4 = n.getCellLocation(_t365),
                          _e325 = _n$getCellLocation4.row,
                          _r147 = _n$getCellLocation4.column;

                      i = G_(_t365, _r147, i, "colspan"), o = G_(_t365, _e325, o, "rowspan");
                    }
                  } catch (err) {
                    _iterator439.e(err);
                  } finally {
                    _iterator439.f();
                  }

                  var _n$getCellLocation3 = n.getCellLocation(t),
                      r = _n$getCellLocation3.row,
                      s = _n$getCellLocation3.column;

                  return {
                    mergeWidth: i - s,
                    mergeHeight: o - r
                  };
                }(o, i, e),
                    r = _ref92.mergeWidth,
                    s = _ref92.mergeHeight;

                Yk("colspan", r, o, n), Yk("rowspan", s, o, n);

                var _iterator440 = _createForOfIteratorHelper(i),
                    _step440;

                try {
                  for (_iterator440.s(); !(_step440 = _iterator440.n()).done;) {
                    var _t366 = _step440.value;
                    Y_(_t366, o, n);
                  }
                } catch (err) {
                  _iterator440.e(err);
                } finally {
                  _iterator440.f();
                }

                P_(o.findAncestor("table"), e), n.setSelection(o, "in");
              });
            }
          }]);

          return $_;
        }(a);

        function Y_(t, e, n) {
          J_(t) || (J_(e) && n.remove(n.createRangeIn(e)), n.move(n.createRangeIn(t), n.createPositionAt(e, "end"))), n.remove(t);
        }

        function J_(t) {
          return 1 == t.childCount && t.getChild(0).is("element", "paragraph") && t.getChild(0).isEmpty;
        }

        function G_(t, e, n, i) {
          var o = parseInt(t.getAttribute(i) || 1);
          return Math.max(n, e + o);
        }

        var K_ = /*#__PURE__*/function (_a68) {
          _inherits(K_, _a68);

          var _super252 = _createSuper(K_);

          function K_() {
            _classCallCheck(this, K_);

            return _super252.apply(this, arguments);
          }

          _createClass(K_, [{
            key: "refresh",
            value: function refresh() {
              var t = g_(this.editor.model.document.selection);
              this.isEnabled = t.length > 0;
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor.model,
                  e = g_(t.document.selection),
                  n = m_(e),
                  i = e[0].findAncestor("table"),
                  o = [];

              for (var _e326 = n.first; _e326 <= n.last; _e326++) {
                var _iterator441 = _createForOfIteratorHelper(i.getChild(_e326).getChildren()),
                    _step441;

                try {
                  for (_iterator441.s(); !(_step441 = _iterator441.n()).done;) {
                    var _n292 = _step441.value;
                    o.push(t.createRangeOn(_n292));
                  }
                } catch (err) {
                  _iterator441.e(err);
                } finally {
                  _iterator441.f();
                }
              }

              t.change(function (t) {
                t.setSelection(o);
              });
            }
          }]);

          return K_;
        }(a);

        var Q_ = /*#__PURE__*/function (_a69) {
          _inherits(Q_, _a69);

          var _super253 = _createSuper(Q_);

          function Q_() {
            _classCallCheck(this, Q_);

            return _super253.apply(this, arguments);
          }

          _createClass(Q_, [{
            key: "refresh",
            value: function refresh() {
              var t = g_(this.editor.model.document.selection);
              this.isEnabled = t.length > 0;
            }
          }, {
            key: "execute",
            value: function execute() {
              var t = this.editor.model,
                  e = g_(t.document.selection),
                  n = e[0],
                  i = e.pop(),
                  o = n.findAncestor("table"),
                  r = this.editor.plugins.get("TableUtils"),
                  s = r.getCellLocation(n),
                  a = r.getCellLocation(i),
                  c = Math.min(s.column, a.column),
                  l = Math.max(s.column, a.column),
                  d = [];

              var _iterator442 = _createForOfIteratorHelper(new Zk(o, {
                startColumn: c,
                endColumn: l
              })),
                  _step442;

              try {
                for (_iterator442.s(); !(_step442 = _iterator442.n()).done;) {
                  var _e327 = _step442.value;
                  d.push(t.createRangeOn(_e327.cell));
                }
              } catch (err) {
                _iterator442.e(err);
              } finally {
                _iterator442.f();
              }

              t.change(function (t) {
                t.setSelection(d);
              });
            }
          }]);

          return Q_;
        }(a);

        function X_(t) {
          t.document.registerPostFixer(function (e) {
            return function (t, e) {
              var n = e.document.differ.getChanges();
              var i = !1;
              var o = new Set();

              var _iterator443 = _createForOfIteratorHelper(n),
                  _step443;

              try {
                for (_iterator443.s(); !(_step443 = _iterator443.n()).done;) {
                  var _e328 = _step443.value;

                  var _n293 = void 0;

                  "table" == _e328.name && "insert" == _e328.type && (_n293 = _e328.position.nodeAfter), "tableRow" != _e328.name && "tableCell" != _e328.name || (_n293 = _e328.position.findAncestor("table")), ew(_e328) && (_n293 = _e328.range.start.findAncestor("table")), _n293 && !o.has(_n293) && (i = Z_(_n293, t) || i, i = tw(_n293, t) || i, o.add(_n293));
                }
              } catch (err) {
                _iterator443.e(err);
              } finally {
                _iterator443.f();
              }

              return i;
            }(e, t);
          });
        }

        function Z_(t, e) {
          var n = !1;

          var i = function (t) {
            var e = parseInt(t.getAttribute("headingRows") || 0),
                n = Array.from(t.getChildren()).reduce(function (t, e) {
              return e.is("element", "tableRow") ? t + 1 : t;
            }, 0),
                i = [];

            var _iterator444 = _createForOfIteratorHelper(new Zk(t)),
                _step444;

            try {
              for (_iterator444.s(); !(_step444 = _iterator444.n()).done;) {
                var _step444$value = _step444.value,
                    _o127 = _step444$value.row,
                    _r148 = _step444$value.cell,
                    _s47 = _step444$value.cellHeight;
                if (_s47 < 2) continue;

                var _t367 = _o127 < e,
                    _a70 = _t367 ? e : n;

                if (_o127 + _s47 > _a70) {
                  var _t368 = _a70 - _o127;

                  i.push({
                    cell: _r148,
                    rowspan: _t368
                  });
                }
              }
            } catch (err) {
              _iterator444.e(err);
            } finally {
              _iterator444.f();
            }

            return i;
          }(t);

          if (i.length) {
            n = !0;

            var _iterator445 = _createForOfIteratorHelper(i),
                _step445;

            try {
              for (_iterator445.s(); !(_step445 = _iterator445.n()).done;) {
                var _t369 = _step445.value;
                Yk("rowspan", _t369.rowspan, _t369.cell, e, 1);
              }
            } catch (err) {
              _iterator445.e(err);
            } finally {
              _iterator445.f();
            }
          }

          return n;
        }

        function tw(t, e) {
          var n = !1;

          var i = function (t) {
            var e = new Array(t.childCount).fill(0);

            var _iterator446 = _createForOfIteratorHelper(new Zk(t, {
              includeAllSlots: !0
            })),
                _step446;

            try {
              for (_iterator446.s(); !(_step446 = _iterator446.n()).done;) {
                var _n294 = _step446.value.rowIndex;
                e[_n294]++;
              }
            } catch (err) {
              _iterator446.e(err);
            } finally {
              _iterator446.f();
            }

            return e;
          }(t),
              o = [];

          var _iterator447 = _createForOfIteratorHelper(i.entries()),
              _step447;

          try {
            for (_iterator447.s(); !(_step447 = _iterator447.n()).done;) {
              var _step447$value = _slicedToArray(_step447.value, 2),
                  _e329 = _step447$value[0],
                  _n297 = _step447$value[1];

              !_n297 && t.getChild(_e329).is("element", "tableRow") && o.push(_e329);
            }
          } catch (err) {
            _iterator447.e(err);
          } finally {
            _iterator447.f();
          }

          if (o.length) {
            n = !0;

            var _iterator448 = _createForOfIteratorHelper(o.reverse()),
                _step448;

            try {
              for (_iterator448.s(); !(_step448 = _iterator448.n()).done;) {
                var _n295 = _step448.value;
                e.remove(t.getChild(_n295)), i.splice(_n295, 1);
              }
            } catch (err) {
              _iterator448.e(err);
            } finally {
              _iterator448.f();
            }
          }

          var r = i.filter(function (e, n) {
            return t.getChild(n).is("element", "tableRow");
          }),
              s = r[0];

          if (!r.every(function (t) {
            return t === s;
          })) {
            var _i244 = r.reduce(function (t, e) {
              return e > t ? e : t;
            }, 0);

            var _iterator449 = _createForOfIteratorHelper(r.entries()),
                _step449;

            try {
              for (_iterator449.s(); !(_step449 = _iterator449.n()).done;) {
                var _step449$value = _slicedToArray(_step449.value, 2),
                    _o128 = _step449$value[0],
                    _s48 = _step449$value[1];

                var _r149 = _i244 - _s48;

                if (_r149) {
                  for (var _n296 = 0; _n296 < _r149; _n296++) {
                    Jk(e, e.createPositionAt(t.getChild(_o128), "end"));
                  }

                  n = !0;
                }
              }
            } catch (err) {
              _iterator449.e(err);
            } finally {
              _iterator449.f();
            }
          }

          return n;
        }

        function ew(t) {
          var e = "attribute" === t.type,
              n = t.attributeKey;
          return e && ("headingRows" === n || "colspan" === n || "rowspan" === n);
        }

        function nw(t) {
          t.document.registerPostFixer(function (e) {
            return function (t, e) {
              var n = e.document.differ.getChanges();
              var i = !1;

              var _iterator450 = _createForOfIteratorHelper(n),
                  _step450;

              try {
                for (_iterator450.s(); !(_step450 = _iterator450.n()).done;) {
                  var _e330 = _step450.value;
                  "insert" == _e330.type && "table" == _e330.name && (i = iw(_e330.position.nodeAfter, t) || i), "insert" == _e330.type && "tableRow" == _e330.name && (i = ow(_e330.position.nodeAfter, t) || i), "insert" == _e330.type && "tableCell" == _e330.name && (i = rw(_e330.position.nodeAfter, t) || i), sw(_e330) && (i = rw(_e330.position.parent, t) || i);
                }
              } catch (err) {
                _iterator450.e(err);
              } finally {
                _iterator450.f();
              }

              return i;
            }(e, t);
          });
        }

        function iw(t, e) {
          var n = !1;

          var _iterator451 = _createForOfIteratorHelper(t.getChildren()),
              _step451;

          try {
            for (_iterator451.s(); !(_step451 = _iterator451.n()).done;) {
              var _i245 = _step451.value;
              _i245.is("element", "tableRow") && (n = ow(_i245, e) || n);
            }
          } catch (err) {
            _iterator451.e(err);
          } finally {
            _iterator451.f();
          }

          return n;
        }

        function ow(t, e) {
          var n = !1;

          var _iterator452 = _createForOfIteratorHelper(t.getChildren()),
              _step452;

          try {
            for (_iterator452.s(); !(_step452 = _iterator452.n()).done;) {
              var _i246 = _step452.value;
              n = rw(_i246, e) || n;
            }
          } catch (err) {
            _iterator452.e(err);
          } finally {
            _iterator452.f();
          }

          return n;
        }

        function rw(t, e) {
          if (0 == t.childCount) return e.insertElement("paragraph", t), !0;
          var n = Array.from(t.getChildren()).filter(function (t) {
            return t.is("$text");
          });

          var _iterator453 = _createForOfIteratorHelper(n),
              _step453;

          try {
            for (_iterator453.s(); !(_step453 = _iterator453.n()).done;) {
              var _t370 = _step453.value;
              e.wrap(e.createRangeOn(_t370), "paragraph");
            }
          } catch (err) {
            _iterator453.e(err);
          } finally {
            _iterator453.f();
          }

          return !!n.length;
        }

        function sw(t) {
          return !(!t.position || !t.position.parent.is("element", "tableCell")) && ("insert" == t.type && "$text" == t.name || "remove" == t.type);
        }

        function aw(t, e) {
          t.document.registerPostFixer(function () {
            return function (t, e) {
              var n = new Set();

              var _iterator454 = _createForOfIteratorHelper(t.getChanges()),
                  _step454;

              try {
                for (_iterator454.s(); !(_step454 = _iterator454.n()).done;) {
                  var _e331 = _step454.value;

                  var _t371 = "attribute" == _e331.type ? _e331.range.start.parent : _e331.position.parent;

                  _t371.is("element", "tableCell") && n.add(_t371);
                }
              } catch (err) {
                _iterator454.e(err);
              } finally {
                _iterator454.f();
              }

              var _iterator455 = _createForOfIteratorHelper(n.values()),
                  _step455;

              try {
                for (_iterator455.s(); !(_step455 = _iterator455.n()).done;) {
                  var _i247 = _step455.value;

                  var _iterator456 = _createForOfIteratorHelper(_toConsumableArray(_i247.getChildren()).filter(function (t) {
                    return cw(t, e);
                  })),
                      _step456;

                  try {
                    for (_iterator456.s(); !(_step456 = _iterator456.n()).done;) {
                      var _n298 = _step456.value;
                      t.refreshItem(_n298);
                    }
                  } catch (err) {
                    _iterator456.e(err);
                  } finally {
                    _iterator456.f();
                  }
                }
              } catch (err) {
                _iterator455.e(err);
              } finally {
                _iterator455.f();
              }

              return !1;
            }(t.document.differ, e);
          });
        }

        function cw(t, e) {
          if (!t.is("element", "paragraph")) return !1;
          var n = e.toViewElement(t);
          return !!n && i_(t) !== n.is("element", "span");
        }

        function lw(t) {
          t.document.registerPostFixer(function () {
            return function (t) {
              var e = t.document.differ,
                  n = new Set();

              var _iterator457 = _createForOfIteratorHelper(e.getChanges()),
                  _step457;

              try {
                for (_iterator457.s(); !(_step457 = _iterator457.n()).done;) {
                  var _t373 = _step457.value;

                  if ("attribute" === _t373.type) {
                    var _e332 = _t373.range.start.nodeAfter;
                    _e332 && _e332.is("element", "table") && "headingRows" === _t373.attributeKey && n.add(_e332);
                  } else if ("insert" === _t373.type || "remove" === _t373.type) if ("tableRow" === _t373.name) {
                    var _e333 = _t373.position.findAncestor("table"),
                        _i248 = _e333.getAttribute("headingRows") || 0;

                    _t373.position.offset < _i248 && n.add(_e333);
                  } else if ("tableCell" === _t373.name) {
                    var _e334 = _t373.position.findAncestor("table"),
                        _i249 = _e334.getAttribute("headingColumns") || 0;

                    _t373.position.offset < _i249 && n.add(_e334);
                  }
                }
              } catch (err) {
                _iterator457.e(err);
              } finally {
                _iterator457.f();
              }

              if (n.size) {
                var _iterator458 = _createForOfIteratorHelper(n.values()),
                    _step458;

                try {
                  for (_iterator458.s(); !(_step458 = _iterator458.n()).done;) {
                    var _t372 = _step458.value;
                    e.refreshItem(_t372);
                  }
                } catch (err) {
                  _iterator458.e(err);
                } finally {
                  _iterator458.f();
                }

                return !0;
              }

              return !1;
            }(t);
          });
        }

        n(267);

        var dw = /*#__PURE__*/function (_r150) {
          _inherits(dw, _r150);

          var _super254 = _createSuper(dw);

          function dw() {
            _classCallCheck(this, dw);

            return _super254.apply(this, arguments);
          }

          _createClass(dw, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.model,
                  n = e.schema,
                  i = t.conversion;
              n.register("table", {
                allowWhere: "$block",
                allowAttributes: ["headingRows", "headingColumns"],
                isObject: !0,
                isBlock: !0
              }), n.register("tableRow", {
                allowIn: "table",
                isLimit: !0
              }), n.register("tableCell", {
                allowIn: "tableRow",
                allowChildren: "$block",
                allowAttributes: ["colspan", "rowspan"],
                isLimit: !0,
                isSelectable: !0
              }), i["for"]("upcast").add(function (t) {
                t.on("element:figure", function (t, e, n) {
                  if (!n.consumable.test(e.viewItem, {
                    name: !0,
                    classes: "table"
                  })) return;

                  var i = function (t) {
                    var _iterator459 = _createForOfIteratorHelper(t.getChildren()),
                        _step459;

                    try {
                      for (_iterator459.s(); !(_step459 = _iterator459.n()).done;) {
                        var _e335 = _step459.value;
                        if (_e335.is("element", "table")) return _e335;
                      }
                    } catch (err) {
                      _iterator459.e(err);
                    } finally {
                      _iterator459.f();
                    }
                  }(e.viewItem);

                  if (!i || !n.consumable.test(i, {
                    name: !0
                  })) return;
                  var o = Es(n.convertItem(i, e.modelCursor).modelRange.getItems());
                  o && (n.consumable.consume(e.viewItem, {
                    name: !0,
                    classes: "table"
                  }), n.convertChildren(e.viewItem, n.writer.createPositionAt(o, "end")), n.updateConversionResult(o, e));
                });
              }), i["for"]("upcast").add(Kk()), i["for"]("editingDowncast").add(e_({
                asWidget: !0
              })), i["for"]("dataDowncast").add(e_()), i["for"]("upcast").elementToElement({
                model: "tableRow",
                view: "tr"
              }), i["for"]("upcast").add(function (t) {
                t.on("element:tr", function (t, e) {
                  e.viewItem.isEmpty && 0 == e.modelCursor.index && t.stop();
                }, {
                  priority: "high"
                });
              }), i["for"]("editingDowncast").add(function (t) {
                return t.on("insert:tableRow", function (t, e, n) {
                  var i = e.item;
                  if (!n.consumable.consume(i, "insert")) return;

                  var o = i.parent,
                      r = function (t) {
                    var _iterator460 = _createForOfIteratorHelper(t.getChildren()),
                        _step460;

                    try {
                      for (_iterator460.s(); !(_step460 = _iterator460.n()).done;) {
                        var _e336 = _step460.value;
                        if ("table" === _e336.name) return _e336;
                      }
                    } catch (err) {
                      _iterator460.e(err);
                    } finally {
                      _iterator460.f();
                    }
                  }(n.mapper.toViewElement(o)),
                      s = o.getChildIndex(i),
                      a = new Zk(o, {
                    row: s
                  }),
                      c = {
                    headingRows: o.getAttribute("headingRows") || 0,
                    headingColumns: o.getAttribute("headingColumns") || 0
                  },
                      l = new Map();

                  var _iterator461 = _createForOfIteratorHelper(a),
                      _step461;

                  try {
                    for (_iterator461.s(); !(_step461 = _iterator461.n()).done;) {
                      var _t374 = _step461.value;

                      var _e337 = l.get(s) || s_(r, i, s, c, n);

                      l.set(s, _e337), n.consumable.consume(_t374.cell, "insert"), r_(_t374, c, n.writer.createPositionAt(_e337, "end"), n, {
                        asWidget: !0
                      });
                    }
                  } catch (err) {
                    _iterator461.e(err);
                  } finally {
                    _iterator461.f();
                  }
                });
              }), i["for"]("editingDowncast").add(function (t) {
                return t.on("remove:tableRow", function (t, e, n) {
                  t.stop();
                  var i = n.writer,
                      o = n.mapper,
                      r = o.toViewPosition(e.position).getLastMatchingPosition(function (t) {
                    return !t.item.is("element", "tr");
                  }).nodeAfter,
                      s = r.parent.parent,
                      a = i.createRangeOn(r),
                      c = i.remove(a);

                  var _iterator462 = _createForOfIteratorHelper(i.createRangeIn(c).getItems()),
                      _step462;

                  try {
                    for (_iterator462.s(); !(_step462 = _iterator462.n()).done;) {
                      var _t375 = _step462.value;
                      o.unbindViewElement(_t375);
                    }
                  } catch (err) {
                    _iterator462.e(err);
                  } finally {
                    _iterator462.f();
                  }

                  l_("thead", s, n), l_("tbody", s, n);
                }, {
                  priority: "higher"
                });
              }), i["for"]("upcast").elementToElement({
                model: "tableCell",
                view: "td"
              }), i["for"]("upcast").elementToElement({
                model: "tableCell",
                view: "th"
              }), i["for"]("upcast").add(Qk("td")), i["for"]("upcast").add(Qk("th")), i["for"]("editingDowncast").add(function (t) {
                return t.on("insert:tableCell", function (t, e, n) {
                  var i = e.item;
                  if (!n.consumable.consume(i, "insert")) return;
                  var o = i.parent,
                      r = o.parent,
                      s = r.getChildIndex(o),
                      a = new Zk(r, {
                    row: s
                  }),
                      c = {
                    headingRows: r.getAttribute("headingRows") || 0,
                    headingColumns: r.getAttribute("headingColumns") || 0
                  };

                  var _iterator463 = _createForOfIteratorHelper(a),
                      _step463;

                  try {
                    for (_iterator463.s(); !(_step463 = _iterator463.n()).done;) {
                      var _t376 = _step463.value;

                      if (_t376.cell === i) {
                        var _e338 = n.mapper.toViewElement(o);

                        return void r_(_t376, c, n.writer.createPositionAt(_e338, o.getChildIndex(i)), n, {
                          asWidget: !0
                        });
                      }
                    }
                  } catch (err) {
                    _iterator463.e(err);
                  } finally {
                    _iterator463.f();
                  }
                });
              }), i["for"]("editingDowncast").elementToElement({
                model: "paragraph",
                view: n_,
                converterPriority: "high"
              }), i["for"]("downcast").attributeToAttribute({
                model: "colspan",
                view: "colspan"
              }), i["for"]("upcast").attributeToAttribute({
                model: {
                  key: "colspan",
                  value: uw("colspan")
                },
                view: "colspan"
              }), i["for"]("downcast").attributeToAttribute({
                model: "rowspan",
                view: "rowspan"
              }), i["for"]("upcast").attributeToAttribute({
                model: {
                  key: "rowspan",
                  value: uw("rowspan")
                },
                view: "rowspan"
              }), i["for"]("editingDowncast").add(function (t) {
                return t.on("attribute:headingColumns:table", function (t, e, n) {
                  var i = e.item;
                  if (!n.consumable.consume(e.item, t.name)) return;
                  var o = {
                    headingRows: i.getAttribute("headingRows") || 0,
                    headingColumns: i.getAttribute("headingColumns") || 0
                  },
                      r = e.attributeOldValue,
                      s = e.attributeNewValue,
                      a = (r > s ? r : s) - 1;

                  var _iterator464 = _createForOfIteratorHelper(new Zk(i, {
                    endColumn: a
                  })),
                      _step464;

                  try {
                    for (_iterator464.s(); !(_step464 = _iterator464.n()).done;) {
                      var _t377 = _step464.value;
                      o_(_t377, o, n);
                    }
                  } catch (err) {
                    _iterator464.e(err);
                  } finally {
                    _iterator464.f();
                  }
                });
              }), t.data.mapper.on("modelToViewPosition", function (t, e) {
                var n = e.modelPosition.parent,
                    i = e.modelPosition.nodeBefore;
                if (!n.is("element", "tableCell")) return;
                if (!i || !i.is("element", "paragraph")) return;
                var o = e.mapper.toViewElement(i),
                    r = e.mapper.toViewElement(n);
                o === r && (e.viewPosition = e.mapper.findPositionIn(r, i.maxOffset));
              }), t.config.define("table.defaultHeadings.rows", 0), t.config.define("table.defaultHeadings.columns", 0), t.commands.add("insertTable", new u_(t)), t.commands.add("insertTableRowAbove", new y_(t, {
                order: "above"
              })), t.commands.add("insertTableRowBelow", new y_(t, {
                order: "below"
              })), t.commands.add("insertTableColumnLeft", new x_(t, {
                order: "left"
              })), t.commands.add("insertTableColumnRight", new x_(t, {
                order: "right"
              })), t.commands.add("removeTableRow", new L_(t)), t.commands.add("removeTableColumn", new z_(t)), t.commands.add("splitTableCellVertically", new C_(t, {
                direction: "vertically"
              })), t.commands.add("splitTableCellHorizontally", new C_(t, {
                direction: "horizontally"
              })), t.commands.add("mergeTableCells", new $_(t)), t.commands.add("mergeTableCellRight", new j_(t, {
                direction: "right"
              })), t.commands.add("mergeTableCellLeft", new j_(t, {
                direction: "left"
              })), t.commands.add("mergeTableCellDown", new j_(t, {
                direction: "down"
              })), t.commands.add("mergeTableCellUp", new j_(t, {
                direction: "up"
              })), t.commands.add("setTableColumnHeader", new V_(t)), t.commands.add("setTableRowHeader", new F_(t)), t.commands.add("selectTableRow", new K_(t)), t.commands.add("selectTableColumn", new Q_(t)), lw(e), X_(e), aw(e, t.editing.mapper), nw(e);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TableEditing";
            }
          }, {
            key: "requires",
            get: function get() {
              return [U_];
            }
          }]);

          return dw;
        }(r);

        function uw(t) {
          return function (e) {
            var n = parseInt(e.getAttribute(t));
            return Number.isNaN(n) || n <= 0 ? null : n;
          };
        }

        n(269);

        var hw = /*#__PURE__*/function (_Pd30) {
          _inherits(hw, _Pd30);

          var _super255 = _createSuper(hw);

          function hw(t) {
            var _this358;

            _classCallCheck(this, hw);

            _this358 = _super255.call(this, t);
            var e = _this358.bindTemplate;
            _this358.items = _this358._createGridCollection(), _this358.set("rows", 0), _this358.set("columns", 0), _this358.bind("label").to(_assertThisInitialized(_this358), "columns", _assertThisInitialized(_this358), "rows", function (t, e) {
              return "".concat(e, " \xD7 ").concat(t);
            }), _this358.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck"]
              },
              children: [{
                tag: "div",
                attributes: {
                  "class": ["ck-insert-table-dropdown__grid"]
                },
                on: {
                  "mouseover@.ck-insert-table-dropdown-grid-box": e.to("boxover")
                },
                children: _this358.items
              }, {
                tag: "div",
                attributes: {
                  "class": ["ck-insert-table-dropdown__label"]
                },
                children: [{
                  text: e.to("label")
                }]
              }],
              on: {
                mousedown: e.to(function (t) {
                  t.preventDefault();
                }),
                click: e.to(function () {
                  _this358.fire("execute");
                })
              }
            }), _this358.on("boxover", function (t, e) {
              var _e$target$dataset = e.target.dataset,
                  n = _e$target$dataset.row,
                  i = _e$target$dataset.column;

              _this358.set({
                rows: parseInt(n),
                columns: parseInt(i)
              });
            }), _this358.on("change:columns", function () {
              _this358._highlightGridBoxes();
            }), _this358.on("change:rows", function () {
              _this358._highlightGridBoxes();
            });
            return _this358;
          }

          _createClass(hw, [{
            key: "focus",
            value: function focus() {}
          }, {
            key: "focusLast",
            value: function focusLast() {}
          }, {
            key: "_highlightGridBoxes",
            value: function _highlightGridBoxes() {
              var t = this.rows,
                  e = this.columns;
              this.items.map(function (n, i) {
                var o = Math.floor(i / 10) < t && i % 10 < e;
                n.set("isOn", o);
              });
            }
          }, {
            key: "_createGridCollection",
            value: function _createGridCollection() {
              var t = [];

              for (var _e339 = 0; _e339 < 100; _e339++) {
                var _n299 = Math.floor(_e339 / 10),
                    _i250 = _e339 % 10;

                t.push(new fw(this.locale, _n299 + 1, _i250 + 1));
              }

              return this.createCollection(t);
            }
          }]);

          return hw;
        }(Pd);

        var fw = /*#__PURE__*/function (_Pd31) {
          _inherits(fw, _Pd31);

          var _super256 = _createSuper(fw);

          function fw(t, e, n) {
            var _this359;

            _classCallCheck(this, fw);

            _this359 = _super256.call(this, t);
            var i = _this359.bindTemplate;
            _this359.set("isOn", !1), _this359.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck-insert-table-dropdown-grid-box", i["if"]("isOn", "ck-on")],
                "data-row": e,
                "data-column": n
              }
            });
            return _this359;
          }

          return fw;
        }(Pd);

        var gw = n(162),
            mw = n.n(gw),
            pw = n(163),
            bw = n.n(pw),
            kw = n(164),
            _w = n.n(kw),
            ww = n(165),
            vw = n.n(ww);

        var yw = /*#__PURE__*/function (_r151) {
          _inherits(yw, _r151);

          var _super257 = _createSuper(yw);

          function yw() {
            _classCallCheck(this, yw);

            return _super257.apply(this, arguments);
          }

          _createClass(yw, [{
            key: "init",
            value: function init() {
              var _this360 = this;

              var t = this.editor,
                  e = this.editor.t,
                  n = "ltr" === t.locale.contentLanguageDirection;
              t.ui.componentFactory.add("insertTable", function (n) {
                var i = t.commands.get("insertTable"),
                    o = Eu(n);
                var r;
                return o.bind("isEnabled").to(i), o.buttonView.set({
                  icon: mw.a,
                  label: e("Insert table"),
                  tooltip: !0
                }), o.on("change:isOpen", function () {
                  r || (r = new hw(n), o.panelView.children.add(r), r.delegate("execute").to(o), o.buttonView.on("open", function () {
                    r.rows = 0, r.columns = 0;
                  }), o.on("execute", function () {
                    t.execute("insertTable", {
                      rows: r.rows,
                      columns: r.columns
                    }), t.editing.view.focus();
                  }));
                }), o;
              }), t.ui.componentFactory.add("tableColumn", function (t) {
                var i = [{
                  type: "switchbutton",
                  model: {
                    commandName: "setTableColumnHeader",
                    label: e("Header column"),
                    bindIsOn: !0
                  }
                }, {
                  type: "separator"
                }, {
                  type: "button",
                  model: {
                    commandName: n ? "insertTableColumnLeft" : "insertTableColumnRight",
                    label: e("Insert column left")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: n ? "insertTableColumnRight" : "insertTableColumnLeft",
                    label: e("Insert column right")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: "removeTableColumn",
                    label: e("Delete column")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: "selectTableColumn",
                    label: e("Select column")
                  }
                }];
                return _this360._prepareDropdown(e("Column"), bw.a, i, t);
              }), t.ui.componentFactory.add("tableRow", function (t) {
                var n = [{
                  type: "switchbutton",
                  model: {
                    commandName: "setTableRowHeader",
                    label: e("Header row"),
                    bindIsOn: !0
                  }
                }, {
                  type: "separator"
                }, {
                  type: "button",
                  model: {
                    commandName: "insertTableRowAbove",
                    label: e("Insert row above")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: "insertTableRowBelow",
                    label: e("Insert row below")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: "removeTableRow",
                    label: e("Delete row")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: "selectTableRow",
                    label: e("Select row")
                  }
                }];
                return _this360._prepareDropdown(e("Row"), _w.a, n, t);
              }), t.ui.componentFactory.add("mergeTableCells", function (t) {
                var i = [{
                  type: "button",
                  model: {
                    commandName: "mergeTableCellUp",
                    label: e("Merge cell up")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: n ? "mergeTableCellRight" : "mergeTableCellLeft",
                    label: e("Merge cell right")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: "mergeTableCellDown",
                    label: e("Merge cell down")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: n ? "mergeTableCellLeft" : "mergeTableCellRight",
                    label: e("Merge cell left")
                  }
                }, {
                  type: "separator"
                }, {
                  type: "button",
                  model: {
                    commandName: "splitTableCellVertically",
                    label: e("Split cell vertically")
                  }
                }, {
                  type: "button",
                  model: {
                    commandName: "splitTableCellHorizontally",
                    label: e("Split cell horizontally")
                  }
                }];
                return _this360._prepareMergeSplitButtonDropdown(e("Merge cells"), vw.a, i, t);
              });
            }
          }, {
            key: "_prepareDropdown",
            value: function _prepareDropdown(t, e, n, i) {
              var o = this.editor,
                  r = Eu(i),
                  s = this._fillDropdownWithListOptions(r, n);

              return r.buttonView.set({
                label: t,
                icon: e,
                tooltip: !0
              }), r.bind("isEnabled").toMany(s, "isEnabled", function () {
                for (var _len28 = arguments.length, t = new Array(_len28), _key28 = 0; _key28 < _len28; _key28++) {
                  t[_key28] = arguments[_key28];
                }

                return t.some(function (t) {
                  return t;
                });
              }), this.listenTo(r, "execute", function (t) {
                o.execute(t.source.commandName), o.editing.view.focus();
              }), r;
            }
          }, {
            key: "_prepareMergeSplitButtonDropdown",
            value: function _prepareMergeSplitButtonDropdown(t, e, n, i) {
              var o = this.editor,
                  r = Eu(i, uu),
                  s = o.commands.get("mergeTableCells"),
                  a = this._fillDropdownWithListOptions(r, n);

              return r.buttonView.set({
                label: t,
                icon: e,
                tooltip: !0,
                isEnabled: !0
              }), r.bind("isEnabled").toMany([s].concat(_toConsumableArray(a)), "isEnabled", function () {
                for (var _len29 = arguments.length, t = new Array(_len29), _key29 = 0; _key29 < _len29; _key29++) {
                  t[_key29] = arguments[_key29];
                }

                return t.some(function (t) {
                  return t;
                });
              }), this.listenTo(r.buttonView, "execute", function () {
                o.execute("mergeTableCells"), o.editing.view.focus();
              }), this.listenTo(r, "execute", function (t) {
                o.execute(t.source.commandName), o.editing.view.focus();
              }), r;
            }
          }, {
            key: "_fillDropdownWithListOptions",
            value: function _fillDropdownWithListOptions(t, e) {
              var n = this.editor,
                  i = [],
                  o = new on["default"]();

              var _iterator465 = _createForOfIteratorHelper(e),
                  _step465;

              try {
                for (_iterator465.s(); !(_step465 = _iterator465.n()).done;) {
                  var _t378 = _step465.value;
                  xw(_t378, n, i, o);
                }
              } catch (err) {
                _iterator465.e(err);
              } finally {
                _iterator465.f();
              }

              return Iu(t, o, n.ui.componentFactory), i;
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TableUI";
            }
          }]);

          return yw;
        }(r);

        function xw(t, e, n, i) {
          var o = t.model = new zu(t.model),
              _t$model2 = t.model,
              r = _t$model2.commandName,
              s = _t$model2.bindIsOn;

          if ("button" === t.type || "switchbutton" === t.type) {
            var _t379 = e.commands.get(r);

            n.push(_t379), o.set({
              commandName: r
            }), o.bind("isEnabled").to(_t379), s && o.bind("isOn").to(_t379, "value");
          }

          o.set({
            withText: !0
          }), i.add(t);
        }

        n(271);

        var Cw = /*#__PURE__*/function (_r152) {
          _inherits(Cw, _r152);

          var _super258 = _createSuper(Cw);

          function Cw() {
            _classCallCheck(this, Cw);

            return _super258.apply(this, arguments);
          }

          _createClass(Cw, [{
            key: "init",
            value: function init() {
              var _this361 = this;

              var t = this.editor.model;
              this.listenTo(t, "deleteContent", function (t, e) {
                return _this361._handleDeleteContent(t, e);
              }, {
                priority: "high"
              }), this._defineSelectionConverter(), this._enablePluginDisabling();
            }
          }, {
            key: "getSelectedTableCells",
            value: function getSelectedTableCells() {
              var t = h_(this.editor.model.document.selection);
              return 0 == t.length ? null : t;
            }
          }, {
            key: "getSelectionAsFragment",
            value: function getSelectionAsFragment() {
              var _this362 = this;

              var t = this.getSelectedTableCells();
              return t ? this.editor.model.change(function (e) {
                var n = e.createDocumentFragment(),
                    i = _this362.editor.plugins.get("TableUtils"),
                    _p_3 = p_(t),
                    o = _p_3.first,
                    r = _p_3.last,
                    _m_2 = m_(t),
                    s = _m_2.first,
                    a = _m_2.last,
                    c = t[0].findAncestor("table");

                var l = a,
                    d = r;

                if (b_(t, i)) {
                  var _t380 = {
                    firstColumn: o,
                    lastColumn: r,
                    firstRow: s,
                    lastRow: a
                  };
                  l = N_(c, _t380), d = D_(c, _t380);
                }

                var u = T_(c, {
                  startRow: s,
                  startColumn: o,
                  endRow: l,
                  endColumn: d
                }, e);
                return e.insert(u, n, 0), n;
              }) : null;
            }
          }, {
            key: "setCellSelection",
            value: function setCellSelection(t, e) {
              var n = this._getCellsToSelect(t, e);

              this.editor.model.change(function (t) {
                t.setSelection(n.cells.map(function (e) {
                  return t.createRangeOn(e);
                }), {
                  backward: n.backward
                });
              });
            }
          }, {
            key: "getFocusCell",
            value: function getFocusCell() {
              var t = _toConsumableArray(this.editor.model.document.selection.getRanges()).pop().getContainedElement();

              return t && t.is("element", "tableCell") ? t : null;
            }
          }, {
            key: "getAnchorCell",
            value: function getAnchorCell() {
              var t = Es(this.editor.model.document.selection.getRanges()).getContainedElement();
              return t && t.is("element", "tableCell") ? t : null;
            }
          }, {
            key: "_defineSelectionConverter",
            value: function _defineSelectionConverter() {
              var _this363 = this;

              var t = this.editor,
                  e = new Set();
              t.conversion["for"]("editingDowncast").add(function (t) {
                return t.on("selection", function (t, n, i) {
                  var o = i.writer;
                  !function (t) {
                    var _iterator466 = _createForOfIteratorHelper(e),
                        _step466;

                    try {
                      for (_iterator466.s(); !(_step466 = _iterator466.n()).done;) {
                        var _n300 = _step466.value;
                        t.removeClass("ck-editor__editable_selected", _n300);
                      }
                    } catch (err) {
                      _iterator466.e(err);
                    } finally {
                      _iterator466.f();
                    }

                    e.clear();
                  }(o);

                  var r = _this363.getSelectedTableCells();

                  if (!r) return;

                  var _iterator467 = _createForOfIteratorHelper(r),
                      _step467;

                  try {
                    for (_iterator467.s(); !(_step467 = _iterator467.n()).done;) {
                      var _t381 = _step467.value;

                      var _n301 = i.mapper.toViewElement(_t381);

                      o.addClass("ck-editor__editable_selected", _n301), e.add(_n301);
                    }
                  } catch (err) {
                    _iterator467.e(err);
                  } finally {
                    _iterator467.f();
                  }

                  var s = i.mapper.toViewElement(r[r.length - 1]);
                  o.setSelection(s, 0);
                }, {
                  priority: "lowest"
                });
              });
            }
          }, {
            key: "_enablePluginDisabling",
            value: function _enablePluginDisabling() {
              var _this364 = this;

              var t = this.editor;
              this.on("change:isEnabled", function () {
                if (!_this364.isEnabled) {
                  var _e340 = _this364.getSelectedTableCells();

                  if (!_e340) return;
                  t.model.change(function (n) {
                    var i = n.createPositionAt(_e340[0], 0),
                        o = t.model.schema.getNearestSelectionRange(i);
                    n.setSelection(o);
                  });
                }
              });
            }
          }, {
            key: "_handleDeleteContent",
            value: function _handleDeleteContent(t, e) {
              var _e341 = _slicedToArray(e, 2),
                  n = _e341[0],
                  i = _e341[1],
                  o = this.editor.model,
                  r = !i || "backward" == i.direction,
                  s = h_(n);

              s.length && (t.stop(), o.change(function (t) {
                var e = s[r ? s.length - 1 : 0];
                o.change(function (t) {
                  var _iterator468 = _createForOfIteratorHelper(s),
                      _step468;

                  try {
                    for (_iterator468.s(); !(_step468 = _iterator468.n()).done;) {
                      var _e342 = _step468.value;
                      o.deleteContent(t.createSelection(_e342, "in"));
                    }
                  } catch (err) {
                    _iterator468.e(err);
                  } finally {
                    _iterator468.f();
                  }
                });
                var i = o.schema.getNearestSelectionRange(t.createPositionAt(e, 0));
                n.is("documentSelection") ? t.setSelection(i) : n.setTo(i);
              }));
            }
          }, {
            key: "_getCellsToSelect",
            value: function _getCellsToSelect(t, e) {
              var n = this.editor.plugins.get("TableUtils"),
                  i = n.getCellLocation(t),
                  o = n.getCellLocation(e),
                  r = Math.min(i.row, o.row),
                  s = Math.max(i.row, o.row),
                  a = Math.min(i.column, o.column),
                  c = Math.max(i.column, o.column),
                  l = new Array(s - r + 1).fill(null).map(function () {
                return [];
              }),
                  d = {
                startRow: r,
                endRow: s,
                startColumn: a,
                endColumn: c
              };

              var _iterator469 = _createForOfIteratorHelper(new Zk(t.findAncestor("table"), d)),
                  _step469;

              try {
                for (_iterator469.s(); !(_step469 = _iterator469.n()).done;) {
                  var _step469$value = _step469.value,
                      _e343 = _step469$value.row,
                      _n302 = _step469$value.cell;

                  l[_e343 - r].push(_n302);
                }
              } catch (err) {
                _iterator469.e(err);
              } finally {
                _iterator469.f();
              }

              var u = o.row < i.row,
                  h = o.column < i.column;
              return u && l.reverse(), h && l.forEach(function (t) {
                return t.reverse();
              }), {
                cells: l.flat(),
                backward: u || h
              };
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TableSelection";
            }
          }, {
            key: "requires",
            get: function get() {
              return [U_];
            }
          }]);

          return Cw;
        }(r);

        var Tw = /*#__PURE__*/function (_r153) {
          _inherits(Tw, _r153);

          var _super259 = _createSuper(Tw);

          function Tw() {
            _classCallCheck(this, Tw);

            return _super259.apply(this, arguments);
          }

          _createClass(Tw, [{
            key: "init",
            value: function init() {
              var _this365 = this;

              var t = this.editor,
                  e = t.editing.view.document;
              this.listenTo(e, "copy", function (t, e) {
                return _this365._onCopyCut(t, e);
              }), this.listenTo(e, "cut", function (t, e) {
                return _this365._onCopyCut(t, e);
              }), this.listenTo(t.model, "insertContent", function (t, e) {
                return _this365._onInsertContent.apply(_this365, [t].concat(_toConsumableArray(e)));
              }, {
                priority: "high"
              }), this.decorate("_replaceTableSlotCell");
            }
          }, {
            key: "_onCopyCut",
            value: function _onCopyCut(t, e) {
              var n = this.editor.plugins.get(Cw);
              if (!n.getSelectedTableCells()) return;
              if ("cut" == t.name && this.editor.isReadOnly) return;
              e.preventDefault(), t.stop();
              var i = this.editor.data,
                  o = this.editor.editing.view.document,
                  r = i.toView(n.getSelectionAsFragment());
              o.fire("clipboardOutput", {
                dataTransfer: e.dataTransfer,
                content: r,
                method: t.name
              });
            }
          }, {
            key: "_onInsertContent",
            value: function _onInsertContent(t, e, n) {
              var _this366 = this;

              if (n && !n.is("documentSelection")) return;
              var i = this.editor.model,
                  o = this.editor.plugins.get(U_);
              var r = Aw(e, i);
              if (!r) return;
              var s = g_(i.document.selection);
              s.length ? (t.stop(), i.change(function (t) {
                var e = {
                  width: o.getColumns(r),
                  height: o.getRows(r)
                },
                    n = function (t, e, n, i) {
                  var o = t[0].findAncestor("table"),
                      r = p_(t),
                      s = m_(t),
                      a = {
                    firstColumn: r.first,
                    lastColumn: r.last,
                    firstRow: s.first,
                    lastRow: s.last
                  },
                      c = 1 === t.length;
                  c && (a.lastRow += e.height - 1, a.lastColumn += e.width - 1, function (t, e, n, i) {
                    var o = i.getColumns(t),
                        r = i.getRows(t);
                    n > o && i.insertColumns(t, {
                      at: o,
                      columns: n - o
                    });
                    e > r && i.insertRows(t, {
                      at: r,
                      rows: e - r
                    });
                  }(o, a.lastRow + 1, a.lastColumn + 1, i));
                  c || !b_(t, i) ? function (t, e, n) {
                    var i = e.firstRow,
                        o = e.lastRow,
                        r = e.firstColumn,
                        s = e.lastColumn,
                        a = {
                      first: i,
                      last: o
                    },
                        c = {
                      first: r,
                      last: s
                    };
                    Sw(t, r, a, n), Sw(t, s + 1, a, n), Ew(t, i, c, n), Ew(t, o + 1, c, n, i);
                  }(o, a, n) : (a.lastRow = N_(o, a), a.lastColumn = D_(o, a));
                  return a;
                }(s, e, t, o),
                    i = n.lastRow - n.firstRow + 1,
                    a = n.lastColumn - n.firstColumn + 1,
                    c = {
                  startRow: 0,
                  startColumn: 0,
                  endRow: Math.min(i, e.height) - 1,
                  endColumn: Math.min(a, e.width) - 1
                };

                r = T_(r, c, t);

                var l = s[0].findAncestor("table"),
                    d = _this366._replaceSelectedCellsWithPasted(r, e, l, n, t);

                if (_this366.editor.plugins.get("TableSelection").isEnabled) {
                  var _e344 = k_(d.map(function (e) {
                    return t.createRangeOn(e);
                  }));

                  t.setSelection(_e344);
                } else t.setSelection(d[0], 0);
              })) : P_(r, o);
            }
          }, {
            key: "_replaceSelectedCellsWithPasted",
            value: function _replaceSelectedCellsWithPasted(t, e, n, i, o) {
              var r = e.width,
                  s = e.height,
                  a = function (t, e, n) {
                var i = new Array(n).fill(null).map(function () {
                  return new Array(e).fill(null);
                });

                var _iterator470 = _createForOfIteratorHelper(new Zk(t)),
                    _step470;

                try {
                  for (_iterator470.s(); !(_step470 = _iterator470.n()).done;) {
                    var _step470$value = _step470.value,
                        _e345 = _step470$value.column,
                        _n303 = _step470$value.row,
                        _o129 = _step470$value.cell;
                    i[_n303][_e345] = _o129;
                  }
                } catch (err) {
                  _iterator470.e(err);
                } finally {
                  _iterator470.f();
                }

                return i;
              }(t, r, s),
                  c = _toConsumableArray(new Zk(n, {
                startRow: i.firstRow,
                endRow: i.lastRow,
                startColumn: i.firstColumn,
                endColumn: i.lastColumn,
                includeAllSlots: !0
              })),
                  l = [];

              var d;

              for (var _i251 = 0, _c22 = c; _i251 < _c22.length; _i251++) {
                var _t382 = _c22[_i251];
                var _e346 = _t382.row,
                    _n304 = _t382.column;
                _n304 === i.firstColumn && (d = _t382.getPositionBefore());

                var _c23 = _e346 - i.firstRow,
                    _u6 = _n304 - i.firstColumn,
                    _h4 = a[_c23 % s][_u6 % r],
                    _f3 = _h4 ? o.cloneElement(_h4) : null,
                    _g2 = this._replaceTableSlotCell(_t382, _f3, d, o);

                _g2 && (O_(_g2, _e346, _n304, i.lastRow, i.lastColumn, o), l.push(_g2), d = o.createPositionAfter(_g2));
              }

              var u = parseInt(n.getAttribute("headingRows") || 0),
                  h = parseInt(n.getAttribute("headingColumns") || 0),
                  f = i.firstRow < u && u <= i.lastRow,
                  g = i.firstColumn < h && h <= i.lastColumn;

              if (f) {
                var _t383 = Ew(n, u, {
                  first: i.firstColumn,
                  last: i.lastColumn
                }, o, i.firstRow);

                l.push.apply(l, _toConsumableArray(_t383));
              }

              if (g) {
                var _t384 = Sw(n, h, {
                  first: i.firstRow,
                  last: i.lastRow
                }, o);

                l.push.apply(l, _toConsumableArray(_t384));
              }

              return l;
            }
          }, {
            key: "_replaceTableSlotCell",
            value: function _replaceTableSlotCell(t, e, n, i) {
              var o = t.cell,
                  r = t.isAnchor;
              return r && i.remove(o), e ? (i.insert(e, n), e) : null;
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TableClipboard";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Cw, U_];
            }
          }]);

          return Tw;
        }(r);

        function Aw(t, e) {
          if (!t.is("documentFragment") && !t.is("element")) return null;
          if (t.is("element", "table")) return t;
          if (1 == t.childCount && t.getChild(0).is("element", "table")) return t.getChild(0);
          var n = e.createRangeIn(t);

          var _iterator471 = _createForOfIteratorHelper(n.getItems()),
              _step471;

          try {
            for (_iterator471.s(); !(_step471 = _iterator471.n()).done;) {
              var _t385 = _step471.value;

              if (_t385.is("element", "table")) {
                var _i252 = e.createRange(n.start, e.createPositionBefore(_t385));

                if (e.hasContent(_i252, {
                  ignoreWhitespaces: !0
                })) return null;

                var _o130 = e.createRange(e.createPositionAfter(_t385), n.end);

                return e.hasContent(_o130, {
                  ignoreWhitespaces: !0
                }) ? null : _t385;
              }
            }
          } catch (err) {
            _iterator471.e(err);
          } finally {
            _iterator471.f();
          }

          return null;
        }

        function Ew(t, e, n, i) {
          var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;
          if (e < 1) return;
          return A_(t, e, o).filter(function (_ref93) {
            var t = _ref93.column,
                e = _ref93.cellWidth;
            return Iw(t, e, n);
          }).map(function (_ref94) {
            var t = _ref94.cell;
            return E_(t, e, i);
          });
        }

        function Sw(t, e, n, i) {
          if (e < 1) return;
          return S_(t, e).filter(function (_ref95) {
            var t = _ref95.row,
                e = _ref95.cellHeight;
            return Iw(t, e, n);
          }).map(function (_ref96) {
            var t = _ref96.cell,
                n = _ref96.column;
            return I_(t, n, e, i);
          });
        }

        function Iw(t, e, n) {
          var i = t + e - 1,
              o = n.first,
              r = n.last;
          return t >= o && t <= r || t < o && i >= o;
        }

        var Ow = /*#__PURE__*/function (_r154) {
          _inherits(Ow, _r154);

          var _super260 = _createSuper(Ow);

          function Ow() {
            _classCallCheck(this, Ow);

            return _super260.apply(this, arguments);
          }

          _createClass(Ow, [{
            key: "init",
            value: function init() {
              var _this367 = this;

              var t = this.editor.editing.view.document;
              this.editor.keystrokes.set("Tab", function () {
                return _this367._handleTabOnSelectedTable.apply(_this367, arguments);
              }, {
                priority: "low"
              }), this.editor.keystrokes.set("Tab", this._getTabHandler(!0), {
                priority: "low"
              }), this.editor.keystrokes.set("Shift+Tab", this._getTabHandler(!1), {
                priority: "low"
              }), this.listenTo(t, "arrowKey", function () {
                return _this367._onArrowKey.apply(_this367, arguments);
              }, {
                context: "table"
              });
            }
          }, {
            key: "_handleTabOnSelectedTable",
            value: function _handleTabOnSelectedTable(t, e) {
              var n = this.editor,
                  i = n.model.document.selection.getSelectedElement();
              i && i.is("element", "table") && (e(), n.model.change(function (t) {
                t.setSelection(t.createRangeIn(i.getChild(0).getChild(0)));
              }));
            }
          }, {
            key: "_getTabHandler",
            value: function _getTabHandler(t) {
              var _this368 = this;

              var e = this.editor;
              return function (n, i) {
                var o = f_(e.model.document.selection)[0];
                if (o || (o = _this368.editor.plugins.get("TableSelection").getFocusCell()), !o) return;
                i();
                var r = o.parent,
                    s = r.parent,
                    a = s.getChildIndex(r),
                    c = r.getChildIndex(o),
                    l = 0 === c;
                if (!t && l && 0 === a) return void e.model.change(function (t) {
                  t.setSelection(t.createRangeOn(s));
                });

                var d = _this368.editor.plugins.get("TableUtils"),
                    u = c === r.childCount - 1,
                    h = a === d.getRows(s) - 1;

                if (t && h && u && (e.execute("insertTableRowBelow"), a === d.getRows(s) - 1)) return void e.model.change(function (t) {
                  t.setSelection(t.createRangeOn(s));
                });
                var f;

                if (t && u) {
                  var _t386 = s.getChild(a + 1);

                  f = _t386.getChild(0);
                } else if (!t && l) {
                  var _t387 = s.getChild(a - 1);

                  f = _t387.getChild(_t387.childCount - 1);
                } else f = r.getChild(c + (t ? 1 : -1));

                e.model.change(function (t) {
                  t.setSelection(t.createRangeIn(f));
                });
              };
            }
          }, {
            key: "_onArrowKey",
            value: function _onArrowKey(t, e) {
              var n = this.editor,
                  i = ro(e.keyCode, n.locale.contentLanguageDirection);
              this._handleArrowKeys(i, e.shiftKey) && (e.preventDefault(), e.stopPropagation(), t.stop());
            }
          }, {
            key: "_handleArrowKeys",
            value: function _handleArrowKeys(t, e) {
              var n = this.editor.model,
                  i = n.document.selection,
                  o = ["right", "down"].includes(t),
                  r = h_(i);

              if (r.length) {
                var _n305;

                return _n305 = e ? this.editor.plugins.get("TableSelection").getFocusCell() : o ? r[r.length - 1] : r[0], this._navigateFromCellInDirection(_n305, t, e), !0;
              }

              var s = i.focus.findAncestor("tableCell");
              if (!s) return !1;
              if (!i.isCollapsed) if (e) {
                if (i.isBackward == o && !i.containsEntireContent(s)) return !1;
              } else {
                var _t388 = i.getSelectedElement();

                if (!_t388 || !n.schema.isObject(_t388)) return !1;
              }
              return !!this._isSelectionAtCellEdge(i, s, o) && (this._navigateFromCellInDirection(s, t, e), !0);
            }
          }, {
            key: "_isSelectionAtCellEdge",
            value: function _isSelectionAtCellEdge(t, e, n) {
              var i = this.editor.model,
                  o = this.editor.model.schema,
                  r = n ? t.getLastPosition() : t.getFirstPosition();

              if (!o.getLimitElement(r).is("element", "tableCell")) {
                return i.createPositionAt(e, n ? "end" : 0).isTouching(r);
              }

              var s = i.createSelection(r);
              return i.modifySelection(s, {
                direction: n ? "forward" : "backward"
              }), r.isEqual(s.focus);
            }
          }, {
            key: "_navigateFromCellInDirection",
            value: function _navigateFromCellInDirection(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;

              var i = this.editor.model,
                  o = t.findAncestor("table"),
                  r = _toConsumableArray(new Zk(o, {
                includeAllSlots: !0
              })),
                  _r155 = r[r.length - 1],
                  s = _r155.row,
                  a = _r155.column,
                  c = r.find(function (_ref97) {
                var e = _ref97.cell;
                return e == t;
              });

              var l = c.row,
                  d = c.column;

              switch (e) {
                case "left":
                  d--;
                  break;

                case "up":
                  l--;
                  break;

                case "right":
                  d += c.cellWidth;
                  break;

                case "down":
                  l += c.cellHeight;
              }

              if (l < 0 || l > s || d < 0 && l <= 0 || d > a && l >= s) return void i.change(function (t) {
                t.setSelection(t.createRangeOn(o));
              });
              d < 0 ? (d = n ? 0 : a, l--) : d > a && (d = n ? a : 0, l++);
              var u = r.find(function (t) {
                return t.row == l && t.column == d;
              }).cell,
                  h = ["right", "down"].includes(e),
                  f = this.editor.plugins.get("TableSelection");

              if (n && f.isEnabled) {
                var _e347 = f.getAnchorCell() || t;

                f.setCellSelection(_e347, u);
              } else {
                var _t389 = i.createPositionAt(u, h ? 0 : "end");

                i.change(function (e) {
                  e.setSelection(_t389);
                });
              }
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TableKeyboard";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Cw];
            }
          }]);

          return Ow;
        }(r);

        var Rw = /*#__PURE__*/function (_$r8) {
          _inherits(Rw, _$r8);

          var _super261 = _createSuper(Rw);

          function Rw(t) {
            var _this369;

            _classCallCheck(this, Rw);

            _this369 = _super261.call(this, t), _this369.domEventType = ["mousemove", "mouseleave"];
            return _this369;
          }

          _createClass(Rw, [{
            key: "onDomEvent",
            value: function onDomEvent(t) {
              this.fire(t.type, t);
            }
          }]);

          return Rw;
        }($r);

        var Mw = /*#__PURE__*/function (_r156) {
          _inherits(Mw, _r156);

          var _super262 = _createSuper(Mw);

          function Mw() {
            _classCallCheck(this, Mw);

            return _super262.apply(this, arguments);
          }

          _createClass(Mw, [{
            key: "init",
            value: function init() {
              this.editor.editing.view.addObserver(Rw), this._enableShiftClickSelection(), this._enableMouseDragSelection();
            }
          }, {
            key: "_enableShiftClickSelection",
            value: function _enableShiftClickSelection() {
              var _this370 = this;

              var t = this.editor;
              var e = !1;
              var n = t.plugins.get(Cw);
              this.listenTo(t.editing.view.document, "mousedown", function (i, o) {
                if (!_this370.isEnabled || !n.isEnabled) return;
                if (!o.domEvent.shiftKey) return;
                var r = n.getAnchorCell() || f_(t.model.document.selection)[0];
                if (!r) return;

                var s = _this370._getModelTableCellFromDomEvent(o);

                s && Pw(r, s) && (e = !0, n.setCellSelection(r, s), o.preventDefault());
              }), this.listenTo(t.editing.view.document, "mouseup", function () {
                e = !1;
              }), this.listenTo(t.editing.view.document, "selectionChange", function (t) {
                e && t.stop();
              }, {
                priority: "highest"
              });
            }
          }, {
            key: "_enableMouseDragSelection",
            value: function _enableMouseDragSelection() {
              var _this371 = this;

              var t = this.editor;
              var e,
                  n,
                  i = !1,
                  o = !1;
              var r = t.plugins.get(Cw);
              this.listenTo(t.editing.view.document, "mousedown", function (t, n) {
                _this371.isEnabled && r.isEnabled && (n.domEvent.shiftKey || n.domEvent.ctrlKey || n.domEvent.altKey || (e = _this371._getModelTableCellFromDomEvent(n)));
              }), this.listenTo(t.editing.view.document, "mousemove", function (t, s) {
                if (!s.domEvent.buttons) return;
                if (!e) return;

                var a = _this371._getModelTableCellFromDomEvent(s);

                a && Pw(e, a) && (n = a, i || n == e || (i = !0)), i && (o = !0, r.setCellSelection(e, n), s.preventDefault());
              }), this.listenTo(t.editing.view.document, "mouseup", function () {
                i = !1, o = !1, e = null, n = null;
              }), this.listenTo(t.editing.view.document, "selectionChange", function (t) {
                o && t.stop();
              }, {
                priority: "highest"
              });
            }
          }, {
            key: "_getModelTableCellFromDomEvent",
            value: function _getModelTableCellFromDomEvent(t) {
              var e = t.target,
                  n = this.editor.editing.view.createPositionAt(e, 0);
              return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell", {
                includeSelf: !0
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "TableMouse";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Cw];
            }
          }]);

          return Mw;
        }(r);

        function Pw(t, e) {
          return t.parent.parent == e.parent.parent;
        }

        n(273);

        function Nw(t) {
          var e = t.getSelectedElement();
          return e && jw(e) ? e : null;
        }

        function Dw(t) {
          var e = t.getFirstPosition().parent;

          for (; e;) {
            if (e.is("element") && jw(e)) return e;
            e = e.parent;
          }

          return null;
        }

        function jw(t) {
          return !!t.getCustomProperty("table") && Gh(t);
        }

        var Bw = ["left", "right", "center", "justify"];

        function Lw(t) {
          return Bw.includes(t);
        }

        function zw(t, e) {
          return "rtl" == e.contentLanguageDirection ? "right" === t : "left" === t;
        }

        function Fw(t) {
          var e = t.map(function (t) {
            var e;
            return e = "string" == typeof t ? {
              name: t
            } : t;
          }).filter(function (t) {
            var e = !!Bw.includes(t.name);
            return e || Object(rn.logWarning)("alignment-config-name-not-recognized", {
              option: t
            }), e;
          }),
              n = e.filter(function (t) {
            return !!t.className;
          }).length;
          if (n && n < e.length) throw new rn["default"]("alignment-config-classnames-are-missing", {
            configuredOptions: t
          });
          return e.forEach(function (e, n, i) {
            var o = i.slice(n + 1);
            if (o.some(function (t) {
              return t.name == e.name;
            })) throw new rn["default"]("alignment-config-name-already-defined", {
              option: e,
              configuredOptions: t
            });

            if (e.className) {
              if (o.some(function (t) {
                return t.className == e.className;
              })) throw new rn["default"]("alignment-config-classname-already-defined", {
                option: e,
                configuredOptions: t
              });
            }
          }), e;
        }

        var Vw = "alignment";

        var Uw = /*#__PURE__*/function (_a71) {
          _inherits(Uw, _a71);

          var _super263 = _createSuper(Uw);

          function Uw() {
            _classCallCheck(this, Uw);

            return _super263.apply(this, arguments);
          }

          _createClass(Uw, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.locale,
                  e = Es(this.editor.model.document.selection.getSelectedBlocks());
              this.isEnabled = !!e && this._canBeAligned(e), this.isEnabled && e.hasAttribute("alignment") ? this.value = e.getAttribute("alignment") : this.value = "rtl" === t.contentLanguageDirection ? "right" : "left";
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this372 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor,
                  n = e.locale,
                  i = e.model,
                  o = i.document,
                  r = t.value;
              i.change(function (t) {
                var e = Array.from(o.selection.getSelectedBlocks()).filter(function (t) {
                  return _this372._canBeAligned(t);
                }),
                    i = e[0].getAttribute("alignment");
                zw(r, n) || i === r || !r ? function (t, e) {
                  var _iterator472 = _createForOfIteratorHelper(t),
                      _step472;

                  try {
                    for (_iterator472.s(); !(_step472 = _iterator472.n()).done;) {
                      var _n306 = _step472.value;
                      e.removeAttribute(Vw, _n306);
                    }
                  } catch (err) {
                    _iterator472.e(err);
                  } finally {
                    _iterator472.f();
                  }
                }(e, t) : function (t, e, n) {
                  var _iterator473 = _createForOfIteratorHelper(t),
                      _step473;

                  try {
                    for (_iterator473.s(); !(_step473 = _iterator473.n()).done;) {
                      var _i253 = _step473.value;
                      e.setAttribute(Vw, n, _i253);
                    }
                  } catch (err) {
                    _iterator473.e(err);
                  } finally {
                    _iterator473.f();
                  }
                }(e, t, r);
              });
            }
          }, {
            key: "_canBeAligned",
            value: function _canBeAligned(t) {
              return this.editor.model.schema.checkAttribute(t, Vw);
            }
          }]);

          return Uw;
        }(a);

        var Hw = /*#__PURE__*/function (_r157) {
          _inherits(Hw, _r157);

          var _super264 = _createSuper(Hw);

          function Hw(t) {
            var _this373;

            _classCallCheck(this, Hw);

            _this373 = _super264.call(this, t), t.config.define("alignment", {
              options: _toConsumableArray(Bw.map(function (t) {
                return {
                  name: t
                };
              }))
            });
            return _this373;
          }

          _createClass(Hw, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.locale,
                  n = t.model.schema,
                  i = Fw(t.config.get("alignment.options")).filter(function (t) {
                return Lw(t.name) && !zw(t.name, e);
              }),
                  o = i.some(function (t) {
                return !!t.className;
              });
              n.extend("$block", {
                allowAttributes: "alignment"
              }), t.model.schema.setAttributeProperties("alignment", {
                isFormatting: !0
              }), o ? t.conversion.attributeToAttribute(function (t) {
                var e = {
                  model: {
                    key: "alignment",
                    values: t.map(function (t) {
                      return t.name;
                    })
                  },
                  view: {}
                };

                var _iterator474 = _createForOfIteratorHelper(t),
                    _step474;

                try {
                  for (_iterator474.s(); !(_step474 = _iterator474.n()).done;) {
                    var _n307 = _step474.value;
                    e.view[_n307.name] = {
                      key: "class",
                      value: _n307.className
                    };
                  }
                } catch (err) {
                  _iterator474.e(err);
                } finally {
                  _iterator474.f();
                }

                return e;
              }(i)) : t.conversion["for"]("downcast").attributeToAttribute(function (t) {
                var e = {
                  model: {
                    key: "alignment",
                    values: t.map(function (t) {
                      return t.name;
                    })
                  },
                  view: {}
                };

                var _iterator475 = _createForOfIteratorHelper(t),
                    _step475;

                try {
                  for (_iterator475.s(); !(_step475 = _iterator475.n()).done;) {
                    var _n308 = _step475.value.name;
                    e.view[_n308] = {
                      key: "style",
                      value: {
                        "text-align": _n308
                      }
                    };
                  }
                } catch (err) {
                  _iterator475.e(err);
                } finally {
                  _iterator475.f();
                }

                return e;
              }(i));

              var r = function (t) {
                var e = [];

                var _iterator476 = _createForOfIteratorHelper(t),
                    _step476;

                try {
                  for (_iterator476.s(); !(_step476 = _iterator476.n()).done;) {
                    var _n309 = _step476.value.name;
                    e.push({
                      view: {
                        key: "style",
                        value: {
                          "text-align": _n309
                        }
                      },
                      model: {
                        key: "alignment",
                        value: _n309
                      }
                    });
                  }
                } catch (err) {
                  _iterator476.e(err);
                } finally {
                  _iterator476.f();
                }

                return e;
              }(i);

              var _iterator477 = _createForOfIteratorHelper(r),
                  _step477;

              try {
                for (_iterator477.s(); !(_step477 = _iterator477.n()).done;) {
                  var _e348 = _step477.value;
                  t.conversion["for"]("upcast").attributeToAttribute(_e348);
                }
              } catch (err) {
                _iterator477.e(err);
              } finally {
                _iterator477.f();
              }

              var s = function (t) {
                var e = [];

                var _iterator478 = _createForOfIteratorHelper(t),
                    _step478;

                try {
                  for (_iterator478.s(); !(_step478 = _iterator478.n()).done;) {
                    var _n310 = _step478.value.name;
                    e.push({
                      view: {
                        key: "align",
                        value: _n310
                      },
                      model: {
                        key: "alignment",
                        value: _n310
                      }
                    });
                  }
                } catch (err) {
                  _iterator478.e(err);
                } finally {
                  _iterator478.f();
                }

                return e;
              }(i);

              var _iterator479 = _createForOfIteratorHelper(s),
                  _step479;

              try {
                for (_iterator479.s(); !(_step479 = _iterator479.n()).done;) {
                  var _e349 = _step479.value;
                  t.conversion["for"]("upcast").attributeToAttribute(_e349);
                }
              } catch (err) {
                _iterator479.e(err);
              } finally {
                _iterator479.f();
              }

              t.commands.add("alignment", new Uw(t));
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "AlignmentEditing";
            }
          }]);

          return Hw;
        }(r);

        var qw = new Map([["left", Sd.alignLeft], ["right", Sd.alignRight], ["center", Sd.alignCenter], ["justify", Sd.alignJustify]]);

        var Ww = /*#__PURE__*/function (_r158) {
          _inherits(Ww, _r158);

          var _super265 = _createSuper(Ww);

          function Ww() {
            _classCallCheck(this, Ww);

            return _super265.apply(this, arguments);
          }

          _createClass(Ww, [{
            key: "localizedOptionTitles",
            get: function get() {
              var t = this.editor.t;
              return {
                left: t("Align left"),
                right: t("Align right"),
                center: t("Align center"),
                justify: t("Justify")
              };
            }
          }, {
            key: "init",
            value: function init() {
              var _this374 = this;

              var t = this.editor,
                  e = t.ui.componentFactory,
                  n = t.t,
                  i = Fw(t.config.get("alignment.options"));
              i.map(function (t) {
                return t.name;
              }).filter(Lw).forEach(function (t) {
                return _this374._addButton(t);
              }), e.add("alignment", function (t) {
                var o = Eu(t),
                    r = i.map(function (t) {
                  return e.create("alignment:".concat(t.name));
                });
                Su(o, r), o.buttonView.set({
                  label: n("Text alignment"),
                  tooltip: !0
                }), o.toolbarView.isVertical = !0, o.toolbarView.ariaLabel = n("Text alignment toolbar"), o.extendTemplate({
                  attributes: {
                    "class": "ck-alignment-dropdown"
                  }
                });
                var s = "rtl" === t.contentLanguageDirection ? qw.get("right") : qw.get("left");
                return o.buttonView.bind("icon").toMany(r, "isOn", function () {
                  for (var _len30 = arguments.length, t = new Array(_len30), _key30 = 0; _key30 < _len30; _key30++) {
                    t[_key30] = arguments[_key30];
                  }

                  var e = t.findIndex(function (t) {
                    return t;
                  });
                  return e < 0 ? s : r[e].icon;
                }), o.bind("isEnabled").toMany(r, "isEnabled", function () {
                  for (var _len31 = arguments.length, t = new Array(_len31), _key31 = 0; _key31 < _len31; _key31++) {
                    t[_key31] = arguments[_key31];
                  }

                  return t.some(function (t) {
                    return t;
                  });
                }), o;
              });
            }
          }, {
            key: "_addButton",
            value: function _addButton(t) {
              var _this375 = this;

              var e = this.editor;
              e.ui.componentFactory.add("alignment:".concat(t), function (n) {
                var i = e.commands.get("alignment"),
                    o = new nu(n);
                return o.set({
                  label: _this375.localizedOptionTitles[t],
                  icon: qw.get(t),
                  tooltip: !0,
                  isToggleable: !0
                }), o.bind("isEnabled").to(i), o.bind("isOn").to(i, "value", function (e) {
                  return e === t;
                }), _this375.listenTo(o, "execute", function () {
                  e.execute("alignment", {
                    value: t
                  }), e.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "AlignmentUI";
            }
          }]);

          return Ww;
        }(r);

        var $w = /*#__PURE__*/function (_a72) {
          _inherits($w, _a72);

          var _super266 = _createSuper($w);

          function $w(t, e) {
            var _this376;

            _classCallCheck(this, $w);

            _this376 = _super266.call(this, t), _this376.attributeKey = e;
            return _this376;
          }

          _createClass($w, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document;
              this.value = e.selection.getAttribute(this.attributeKey), this.isEnabled = t.schema.checkAttributeInSelection(e.selection, this.attributeKey);
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this377 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document.selection,
                  i = t.value;
              e.change(function (t) {
                if (n.isCollapsed) i ? t.setSelectionAttribute(_this377.attributeKey, i) : t.removeSelectionAttribute(_this377.attributeKey);else {
                  var _o131 = e.schema.getValidRanges(n.getRanges(), _this377.attributeKey);

                  var _iterator480 = _createForOfIteratorHelper(_o131),
                      _step480;

                  try {
                    for (_iterator480.s(); !(_step480 = _iterator480.n()).done;) {
                      var _e350 = _step480.value;
                      i ? t.setAttribute(_this377.attributeKey, i, _e350) : t.removeAttribute(_this377.attributeKey, _e350);
                    }
                  } catch (err) {
                    _iterator480.e(err);
                  } finally {
                    _iterator480.f();
                  }
                }
              });
            }
          }]);

          return $w;
        }(a);

        var Yw = /*#__PURE__*/function (_on$default2) {
          _inherits(Yw, _on$default2);

          var _super267 = _createSuper(Yw);

          function Yw(t) {
            var _this378;

            _classCallCheck(this, Yw);

            _this378 = _super267.call(this, t), _this378.set("isEmpty", !0), _this378.on("change", function () {
              _this378.set("isEmpty", 0 === _this378.length);
            });
            return _this378;
          }

          _createClass(Yw, [{
            key: "add",
            value: function add(t, e) {
              this.find(function (e) {
                return e.color === t.color;
              }) || _get3(_getPrototypeOf(Yw.prototype), "add", this).call(this, t, e);
            }
          }, {
            key: "hasColor",
            value: function hasColor(t) {
              return !!this.find(function (e) {
                return e.color === t;
              });
            }
          }]);

          return Yw;
        }(on["default"]);

        Object(o["default"])(Yw, i["default"]);
        n(275);
        var Jw = "fontSize",
            Gw = "fontFamily";

        function Kw(t, e) {
          var n = {
            model: {
              key: t,
              values: []
            },
            view: {},
            upcastAlso: {}
          };

          var _iterator481 = _createForOfIteratorHelper(e),
              _step481;

          try {
            for (_iterator481.s(); !(_step481 = _iterator481.n()).done;) {
              var _t390 = _step481.value;
              n.model.values.push(_t390.model), n.view[_t390.model] = _t390.view, _t390.upcastAlso && (n.upcastAlso[_t390.model] = _t390.upcastAlso);
            }
          } catch (err) {
            _iterator481.e(err);
          } finally {
            _iterator481.f();
          }

          return n;
        }

        var Qw = /*#__PURE__*/function (_$w) {
          _inherits(Qw, _$w);

          var _super268 = _createSuper(Qw);

          function Qw(t) {
            _classCallCheck(this, Qw);

            return _super268.call(this, t, Jw);
          }

          return Qw;
        }($w);

        function Xw(t) {
          return t.map(function (t) {
            return function (t) {
              if (function (t) {
                return "object" == typeof t && t.title && t.model && t.view;
              }(t)) return tv(t);

              var e = function (t) {
                return Zw[t] || Zw[t.model];
              }(t);

              if (e) return tv(e);
              if ("default" === t) return {
                model: void 0,
                title: "Default"
              };
              if (function (t) {
                var e;

                if ("object" == typeof t) {
                  if (!t.model) throw new rn["default"]("font-size-invalid-definition", null, t);
                  e = parseFloat(t.model);
                } else e = parseFloat(t);

                return isNaN(e);
              }(t)) return;
              return function (t) {
                "number" != typeof t && "string" != typeof t || (t = {
                  title: String(t),
                  model: "".concat(parseFloat(t), "px")
                });
                return t.view = {
                  name: "span",
                  styles: {
                    "font-size": t.model
                  }
                }, tv(t);
              }(t);
            }(t);
          }).filter(function (t) {
            return !!t;
          });
        }

        var Zw = {
          get tiny() {
            return {
              title: "Tiny",
              model: "tiny",
              view: {
                name: "span",
                classes: "text-tiny",
                priority: 7
              }
            };
          },

          get small() {
            return {
              title: "Small",
              model: "small",
              view: {
                name: "span",
                classes: "text-small",
                priority: 7
              }
            };
          },

          get big() {
            return {
              title: "Big",
              model: "big",
              view: {
                name: "span",
                classes: "text-big",
                priority: 7
              }
            };
          },

          get huge() {
            return {
              title: "Huge",
              model: "huge",
              view: {
                name: "span",
                classes: "text-huge",
                priority: 7
              }
            };
          }

        };

        function tv(t) {
          return t.view.priority || (t.view.priority = 7), t;
        }

        var ev = ["x-small", "x-small", "small", "medium", "large", "x-large", "xx-large", "xxx-large"];

        var nv = /*#__PURE__*/function (_r159) {
          _inherits(nv, _r159);

          var _super269 = _createSuper(nv);

          function nv(t) {
            var _this379;

            _classCallCheck(this, nv);

            _this379 = _super269.call(this, t), t.config.define(Jw, {
              options: ["tiny", "small", "default", "big", "huge"],
              supportAllValues: !1
            });
            return _this379;
          }

          _createClass(nv, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: Jw
              }), t.model.schema.setAttributeProperties(Jw, {
                isFormatting: !0,
                copyOnEnter: !0
              });
              var e = t.config.get("fontSize.supportAllValues"),
                  n = Xw(this.editor.config.get("fontSize.options")).filter(function (t) {
                return t.model;
              }),
                  i = Kw(Jw, n);
              e ? (this._prepareAnyValueConverters(i), this._prepareCompatibilityConverter()) : t.conversion.attributeToElement(i), t.commands.add(Jw, new Qw(t));
            }
          }, {
            key: "_prepareAnyValueConverters",
            value: function _prepareAnyValueConverters(t) {
              var e = this.editor,
                  n = t.model.values.filter(function (t) {
                return !xh(String(t)) && !function (t) {
                  return Ch.test(t);
                }(String(t));
              });
              if (n.length) throw new rn["default"]("font-size-invalid-use-of-named-presets", null, {
                presets: n
              });
              e.conversion["for"]("downcast").attributeToElement({
                model: Jw,
                view: function view(t, _ref98) {
                  var e = _ref98.writer;
                  if (t) return e.createAttributeElement("span", {
                    style: "font-size:" + t
                  }, {
                    priority: 7
                  });
                }
              }), e.conversion["for"]("upcast").elementToAttribute({
                model: {
                  key: Jw,
                  value: function value(t) {
                    return t.getStyle("font-size");
                  }
                },
                view: {
                  name: "span",
                  styles: {
                    "font-size": /.*/
                  }
                }
              });
            }
          }, {
            key: "_prepareCompatibilityConverter",
            value: function _prepareCompatibilityConverter() {
              this.editor.conversion["for"]("upcast").elementToAttribute({
                view: {
                  name: "font",
                  attributes: {
                    size: /^[+-]?\d{1,3}$/
                  }
                },
                model: {
                  key: Jw,
                  value: function value(t) {
                    var e = t.getAttribute("size"),
                        n = "-" === e[0] || "+" === e[0];
                    var i = parseInt(e, 10);
                    n && (i = 3 + i);
                    var o = ev.length - 1,
                        r = Math.min(Math.max(i, 0), o);
                    return ev[r];
                  }
                }
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "FontSizeEditing";
            }
          }]);

          return nv;
        }(r);

        var iv = n(166),
            ov = n.n(iv);
        n(277);

        var rv = /*#__PURE__*/function (_r160) {
          _inherits(rv, _r160);

          var _super270 = _createSuper(rv);

          function rv() {
            _classCallCheck(this, rv);

            return _super270.apply(this, arguments);
          }

          _createClass(rv, [{
            key: "init",
            value: function init() {
              var _this380 = this;

              var t = this.editor,
                  e = t.t,
                  n = this._getLocalizedOptions(),
                  i = t.commands.get(Jw);

              t.ui.componentFactory.add(Jw, function (o) {
                var r = Eu(o);
                return Iu(r, function (t, e) {
                  var n = new on["default"]();

                  var _iterator482 = _createForOfIteratorHelper(t),
                      _step482;

                  try {
                    var _loop10 = function _loop10() {
                      var i = _step482.value;
                      var t = {
                        type: "button",
                        model: new zu({
                          commandName: Jw,
                          commandParam: i.model,
                          label: i.title,
                          "class": "ck-fontsize-option",
                          withText: !0
                        })
                      };
                      i.view && i.view.styles && t.model.set("labelStyle", "font-size:".concat(i.view.styles["font-size"])), i.view && i.view.classes && t.model.set("class", "".concat(t.model["class"], " ").concat(i.view.classes)), t.model.bind("isOn").to(e, "value", function (t) {
                        return t === i.model;
                      }), n.add(t);
                    };

                    for (_iterator482.s(); !(_step482 = _iterator482.n()).done;) {
                      _loop10();
                    }
                  } catch (err) {
                    _iterator482.e(err);
                  } finally {
                    _iterator482.f();
                  }

                  return n;
                }(n, i)), r.buttonView.set({
                  label: e("Font Size"),
                  icon: ov.a,
                  tooltip: !0
                }), r.extendTemplate({
                  attributes: {
                    "class": ["ck-font-size-dropdown"]
                  }
                }), r.bind("isEnabled").to(i), _this380.listenTo(r, "execute", function (e) {
                  t.execute(e.source.commandName, {
                    value: e.source.commandParam
                  }), t.editing.view.focus();
                }), r;
              });
            }
          }, {
            key: "_getLocalizedOptions",
            value: function _getLocalizedOptions() {
              var t = this.editor,
                  e = t.t,
                  n = {
                Default: e("Default"),
                Tiny: e("Tiny"),
                Small: e("Small"),
                Big: e("Big"),
                Huge: e("Huge")
              };
              return Xw(t.config.get(Jw).options).map(function (t) {
                var e = n[t.title];
                return e && e != t.title && (t = Object.assign({}, t, {
                  title: e
                })), t;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "FontSizeUI";
            }
          }]);

          return rv;
        }(r);

        var sv = /*#__PURE__*/function (_$w2) {
          _inherits(sv, _$w2);

          var _super271 = _createSuper(sv);

          function sv(t) {
            _classCallCheck(this, sv);

            return _super271.call(this, t, Gw);
          }

          return sv;
        }($w);

        function av(t) {
          return t.map(cv).filter(function (t) {
            return !!t;
          });
        }

        function cv(t) {
          return "object" == typeof t ? t : "default" === t ? {
            title: "Default",
            model: void 0
          } : "string" == typeof t ? function (t) {
            var e = t.replace(/"|'/g, "").split(","),
                n = e[0],
                i = e.map(lv).join(", ");
            return {
              title: n,
              model: i,
              view: {
                name: "span",
                styles: {
                  "font-family": i
                },
                priority: 7
              }
            };
          }(t) : void 0;
        }

        function lv(t) {
          return (t = t.trim()).indexOf(" ") > 0 && (t = "'".concat(t, "'")), t;
        }

        var dv = /*#__PURE__*/function (_r161) {
          _inherits(dv, _r161);

          var _super272 = _createSuper(dv);

          function dv(t) {
            var _this381;

            _classCallCheck(this, dv);

            _this381 = _super272.call(this, t), t.config.define(Gw, {
              options: ["default", "Arial, Helvetica, sans-serif", "Courier New, Courier, monospace", "Georgia, serif", "Lucida Sans Unicode, Lucida Grande, sans-serif", "Tahoma, Geneva, sans-serif", "Times New Roman, Times, serif", "Trebuchet MS, Helvetica, sans-serif", "Verdana, Geneva, sans-serif"],
              supportAllValues: !1
            });
            return _this381;
          }

          _createClass(dv, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: Gw
              }), t.model.schema.setAttributeProperties(Gw, {
                isFormatting: !0,
                copyOnEnter: !0
              });
              var e = av(t.config.get("fontFamily.options")).filter(function (t) {
                return t.model;
              }),
                  n = Kw(Gw, e);
              t.config.get("fontFamily.supportAllValues") ? (this._prepareAnyValueConverters(), this._prepareCompatibilityConverter()) : t.conversion.attributeToElement(n), t.commands.add(Gw, new sv(t));
            }
          }, {
            key: "_prepareAnyValueConverters",
            value: function _prepareAnyValueConverters() {
              var t = this.editor;
              t.conversion["for"]("downcast").attributeToElement({
                model: Gw,
                view: function view(t, _ref99) {
                  var e = _ref99.writer;
                  return e.createAttributeElement("span", {
                    style: "font-family:" + t
                  }, {
                    priority: 7
                  });
                }
              }), t.conversion["for"]("upcast").elementToAttribute({
                model: {
                  key: Gw,
                  value: function value(t) {
                    return t.getStyle("font-family");
                  }
                },
                view: {
                  name: "span",
                  styles: {
                    "font-family": /.*/
                  }
                }
              });
            }
          }, {
            key: "_prepareCompatibilityConverter",
            value: function _prepareCompatibilityConverter() {
              this.editor.conversion["for"]("upcast").elementToAttribute({
                view: {
                  name: "font",
                  attributes: {
                    face: /.*/
                  }
                },
                model: {
                  key: Gw,
                  value: function value(t) {
                    return t.getAttribute("face");
                  }
                }
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "FontFamilyEditing";
            }
          }]);

          return dv;
        }(r);

        var uv = n(167),
            hv = n.n(uv);

        var fv = /*#__PURE__*/function (_r162) {
          _inherits(fv, _r162);

          var _super273 = _createSuper(fv);

          function fv() {
            _classCallCheck(this, fv);

            return _super273.apply(this, arguments);
          }

          _createClass(fv, [{
            key: "init",
            value: function init() {
              var _this382 = this;

              var t = this.editor,
                  e = t.t,
                  n = this._getLocalizedOptions(),
                  i = t.commands.get(Gw);

              t.ui.componentFactory.add(Gw, function (o) {
                var r = Eu(o);
                return Iu(r, function (t, e) {
                  var n = new on["default"]();

                  var _iterator483 = _createForOfIteratorHelper(t),
                      _step483;

                  try {
                    var _loop11 = function _loop11() {
                      var i = _step483.value;
                      var t = {
                        type: "button",
                        model: new zu({
                          commandName: Gw,
                          commandParam: i.model,
                          label: i.title,
                          withText: !0
                        })
                      };
                      t.model.bind("isOn").to(e, "value", function (t) {
                        return t === i.model || !(!t || !i.model) && t.split(",")[0].replace(/'/g, "").toLowerCase() === i.model.toLowerCase();
                      }), i.view && i.view.styles && t.model.set("labelStyle", "font-family: ".concat(i.view.styles["font-family"])), n.add(t);
                    };

                    for (_iterator483.s(); !(_step483 = _iterator483.n()).done;) {
                      _loop11();
                    }
                  } catch (err) {
                    _iterator483.e(err);
                  } finally {
                    _iterator483.f();
                  }

                  return n;
                }(n, i)), r.buttonView.set({
                  label: e("Font Family"),
                  icon: hv.a,
                  tooltip: !0
                }), r.extendTemplate({
                  attributes: {
                    "class": "ck-font-family-dropdown"
                  }
                }), r.bind("isEnabled").to(i), _this382.listenTo(r, "execute", function (e) {
                  t.execute(e.source.commandName, {
                    value: e.source.commandParam
                  }), t.editing.view.focus();
                }), r;
              });
            }
          }, {
            key: "_getLocalizedOptions",
            value: function _getLocalizedOptions() {
              var t = this.editor,
                  e = t.t;
              return av(t.config.get(Gw).options).map(function (t) {
                return "Default" === t.title && (t.title = e("Default")), t;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "FontFamilyUI";
            }
          }]);

          return fv;
        }(r);

        var gv = /*#__PURE__*/function (_a73) {
          _inherits(gv, _a73);

          var _super274 = _createSuper(gv);

          function gv() {
            _classCallCheck(this, gv);

            return _super274.apply(this, arguments);
          }

          _createClass(gv, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model,
                  e = t.document;
              this.value = e.selection.getAttribute("highlight"), this.isEnabled = t.schema.checkAttributeInSelection(e.selection, "highlight");
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this383 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              var e = this.editor.model,
                  n = e.document.selection,
                  i = t.value;
              e.change(function (t) {
                if (n.isCollapsed) {
                  var _e351 = n.getFirstPosition();

                  if (n.hasAttribute("highlight")) {
                    var _n311 = function _n311(t) {
                      return t.item.hasAttribute("highlight") && t.item.getAttribute("highlight") === _this383.value;
                    },
                        _o132 = _e351.getLastMatchingPosition(_n311, {
                      direction: "backward"
                    }),
                        _r163 = _e351.getLastMatchingPosition(_n311),
                        _s49 = t.createRange(_o132, _r163);

                    i && _this383.value !== i ? (_e351.isEqual(_r163) || t.setAttribute("highlight", i, _s49), t.setSelectionAttribute("highlight", i)) : (_e351.isEqual(_r163) || t.removeAttribute("highlight", _s49), t.removeSelectionAttribute("highlight"));
                  } else i && t.setSelectionAttribute("highlight", i);
                } else {
                  var _o133 = e.schema.getValidRanges(n.getRanges(), "highlight");

                  var _iterator484 = _createForOfIteratorHelper(_o133),
                      _step484;

                  try {
                    for (_iterator484.s(); !(_step484 = _iterator484.n()).done;) {
                      var _e352 = _step484.value;
                      i ? t.setAttribute("highlight", i, _e352) : t.removeAttribute("highlight", _e352);
                    }
                  } catch (err) {
                    _iterator484.e(err);
                  } finally {
                    _iterator484.f();
                  }
                }
              });
            }
          }]);

          return gv;
        }(a);

        var mv = /*#__PURE__*/function (_r164) {
          _inherits(mv, _r164);

          var _super275 = _createSuper(mv);

          function mv(t) {
            var _this384;

            _classCallCheck(this, mv);

            _this384 = _super275.call(this, t), t.config.define("highlight", {
              options: [{
                model: "yellowMarker",
                "class": "marker-yellow",
                title: "Yellow marker",
                color: "var(--ck-highlight-marker-yellow)",
                type: "marker"
              }, {
                model: "greenMarker",
                "class": "marker-green",
                title: "Green marker",
                color: "var(--ck-highlight-marker-green)",
                type: "marker"
              }, {
                model: "pinkMarker",
                "class": "marker-pink",
                title: "Pink marker",
                color: "var(--ck-highlight-marker-pink)",
                type: "marker"
              }, {
                model: "blueMarker",
                "class": "marker-blue",
                title: "Blue marker",
                color: "var(--ck-highlight-marker-blue)",
                type: "marker"
              }, {
                model: "redPen",
                "class": "pen-red",
                title: "Red pen",
                color: "var(--ck-highlight-pen-red)",
                type: "pen"
              }, {
                model: "greenPen",
                "class": "pen-green",
                title: "Green pen",
                color: "var(--ck-highlight-pen-green)",
                type: "pen"
              }]
            });
            return _this384;
          }

          _createClass(mv, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: "highlight"
              });
              var e = t.config.get("highlight.options");
              t.conversion.attributeToElement(function (t) {
                var e = {
                  model: {
                    key: "highlight",
                    values: []
                  },
                  view: {}
                };

                var _iterator485 = _createForOfIteratorHelper(t),
                    _step485;

                try {
                  for (_iterator485.s(); !(_step485 = _iterator485.n()).done;) {
                    var _n312 = _step485.value;
                    e.model.values.push(_n312.model), e.view[_n312.model] = {
                      name: "mark",
                      classes: _n312["class"]
                    };
                  }
                } catch (err) {
                  _iterator485.e(err);
                } finally {
                  _iterator485.f();
                }

                return e;
              }(e)), t.commands.add("highlight", new gv(t));
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "HighlightEditing";
            }
          }]);

          return mv;
        }(r);

        var pv = n(168),
            bv = n.n(pv),
            kv = n(169),
            _v = n.n(kv);

        n(279);

        var wv = /*#__PURE__*/function (_r165) {
          _inherits(wv, _r165);

          var _super276 = _createSuper(wv);

          function wv() {
            _classCallCheck(this, wv);

            return _super276.apply(this, arguments);
          }

          _createClass(wv, [{
            key: "localizedOptionTitles",
            get: function get() {
              var t = this.editor.t;
              return {
                "Yellow marker": t("Yellow marker"),
                "Green marker": t("Green marker"),
                "Pink marker": t("Pink marker"),
                "Blue marker": t("Blue marker"),
                "Red pen": t("Red pen"),
                "Green pen": t("Green pen")
              };
            }
          }, {
            key: "init",
            value: function init() {
              var t = this.editor.config.get("highlight.options");

              var _iterator486 = _createForOfIteratorHelper(t),
                  _step486;

              try {
                for (_iterator486.s(); !(_step486 = _iterator486.n()).done;) {
                  var _e353 = _step486.value;

                  this._addHighlighterButton(_e353);
                }
              } catch (err) {
                _iterator486.e(err);
              } finally {
                _iterator486.f();
              }

              this._addRemoveHighlightButton(), this._addDropdown(t);
            }
          }, {
            key: "_addRemoveHighlightButton",
            value: function _addRemoveHighlightButton() {
              var t = this.editor.t,
                  e = this.editor.commands.get("highlight");

              this._addButton("removeHighlight", t("Remove highlight"), Sd.eraser, null, function (t) {
                t.bind("isEnabled").to(e, "isEnabled");
              });
            }
          }, {
            key: "_addHighlighterButton",
            value: function _addHighlighterButton(t) {
              var e = this.editor.commands.get("highlight");

              this._addButton("highlight:" + t.model, t.title, vv(t.type), t.model, function (n) {
                n.bind("isEnabled").to(e, "isEnabled"), n.bind("isOn").to(e, "value", function (e) {
                  return e === t.model;
                }), n.iconView.fillColor = t.color, n.isToggleable = !0;
              });
            }
          }, {
            key: "_addButton",
            value: function _addButton(t, e, n, i, o) {
              var _this385 = this;

              var r = this.editor;
              r.ui.componentFactory.add(t, function (t) {
                var s = new nu(t),
                    a = _this385.localizedOptionTitles[e] ? _this385.localizedOptionTitles[e] : e;
                return s.set({
                  label: a,
                  icon: n,
                  tooltip: !0
                }), s.on("execute", function () {
                  r.execute("highlight", {
                    value: i
                  }), r.editing.view.focus();
                }), o(s), s;
              });
            }
          }, {
            key: "_addDropdown",
            value: function _addDropdown(t) {
              var _this386 = this;

              var e = this.editor,
                  n = e.t,
                  i = e.ui.componentFactory,
                  o = t[0],
                  r = t.reduce(function (t, e) {
                return t[e.model] = e, t;
              }, {});
              i.add("highlight", function (s) {
                var a = e.commands.get("highlight"),
                    c = Eu(s, uu),
                    l = c.buttonView;
                l.set({
                  tooltip: n("Highlight"),
                  lastExecuted: o.model,
                  commandValue: o.model,
                  isToggleable: !0
                }), l.bind("icon").to(a, "value", function (t) {
                  return vv(u(t, "type"));
                }), l.bind("color").to(a, "value", function (t) {
                  return u(t, "color");
                }), l.bind("commandValue").to(a, "value", function (t) {
                  return u(t, "model");
                }), l.bind("isOn").to(a, "value", function (t) {
                  return !!t;
                }), l.delegate("execute").to(c);
                var d = t.map(function (t) {
                  var e = i.create("highlight:" + t.model);
                  return _this386.listenTo(e, "execute", function () {
                    return c.buttonView.set({
                      lastExecuted: t.model
                    });
                  }), e;
                });

                function u(t, e) {
                  var n = t && t !== l.lastExecuted ? t : l.lastExecuted;
                  return r[n][e];
                }

                return c.bind("isEnabled").toMany(d, "isEnabled", function () {
                  for (var _len32 = arguments.length, t = new Array(_len32), _key32 = 0; _key32 < _len32; _key32++) {
                    t[_key32] = arguments[_key32];
                  }

                  return t.some(function (t) {
                    return t;
                  });
                }), d.push(new bu()), d.push(i.create("removeHighlight")), Su(c, d), function (t) {
                  t.buttonView.actionView.iconView.bind("fillColor").to(t.buttonView, "color");
                }(c), c.toolbarView.ariaLabel = n("Text highlight toolbar"), l.on("execute", function () {
                  e.execute("highlight", {
                    value: l.commandValue
                  }), e.editing.view.focus();
                }), c;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "HighlightUI";
            }
          }]);

          return wv;
        }(r);

        function vv(t) {
          return "marker" === t ? bv.a : _v.a;
        }

        var yv = n(170),
            xv = n.n(yv);
        var Cv = "removeFormat";

        var Tv = /*#__PURE__*/function (_r166) {
          _inherits(Tv, _r166);

          var _super277 = _createSuper(Tv);

          function Tv() {
            _classCallCheck(this, Tv);

            return _super277.apply(this, arguments);
          }

          _createClass(Tv, [{
            key: "init",
            value: function init() {
              var _this387 = this;

              var t = this.editor,
                  e = t.t;
              t.ui.componentFactory.add(Cv, function (n) {
                var i = t.commands.get(Cv),
                    o = new nu(n);
                return o.set({
                  label: e("Remove Format"),
                  icon: xv.a,
                  tooltip: !0
                }), o.bind("isOn", "isEnabled").to(i, "value", "isEnabled"), _this387.listenTo(o, "execute", function () {
                  t.execute(Cv), t.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "RemoveFormatUI";
            }
          }]);

          return Tv;
        }(r);

        var Av = /*#__PURE__*/function (_a74) {
          _inherits(Av, _a74);

          var _super278 = _createSuper(Av);

          function Av() {
            _classCallCheck(this, Av);

            return _super278.apply(this, arguments);
          }

          _createClass(Av, [{
            key: "refresh",
            value: function refresh() {
              var t = this.editor.model;
              this.isEnabled = !!Es(this._getFormattingItems(t.document.selection, t.schema));
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this388 = this;

              var t = this.editor.model,
                  e = t.schema;
              t.change(function (n) {
                var _iterator487 = _createForOfIteratorHelper(_this388._getFormattingItems(t.document.selection, e)),
                    _step487;

                try {
                  for (_iterator487.s(); !(_step487 = _iterator487.n()).done;) {
                    var _i254 = _step487.value;

                    if (_i254.is("selection")) {
                      var _iterator488 = _createForOfIteratorHelper(_this388._getFormattingAttributes(_i254, e)),
                          _step488;

                      try {
                        for (_iterator488.s(); !(_step488 = _iterator488.n()).done;) {
                          var _t391 = _step488.value;
                          n.removeSelectionAttribute(_t391);
                        }
                      } catch (err) {
                        _iterator488.e(err);
                      } finally {
                        _iterator488.f();
                      }
                    } else {
                      var _t392 = n.createRangeOn(_i254);

                      var _iterator489 = _createForOfIteratorHelper(_this388._getFormattingAttributes(_i254, e)),
                          _step489;

                      try {
                        for (_iterator489.s(); !(_step489 = _iterator489.n()).done;) {
                          var _o134 = _step489.value;
                          n.removeAttribute(_o134, _t392);
                        }
                      } catch (err) {
                        _iterator489.e(err);
                      } finally {
                        _iterator489.f();
                      }
                    }
                  }
                } catch (err) {
                  _iterator487.e(err);
                } finally {
                  _iterator487.f();
                }
              });
            }
          }, {
            key: "_getFormattingItems",
            value: /*#__PURE__*/regeneratorRuntime.mark(function _getFormattingItems(t, e) {
              var _this389 = this;

              var n, _iterator490, _step490, _i255, _iterator492, _step492, _t393, _iterator491, _step491, _e354;

              return regeneratorRuntime.wrap(function _getFormattingItems$(_context71) {
                while (1) {
                  switch (_context71.prev = _context71.next) {
                    case 0:
                      n = function n(t) {
                        return !!Es(_this389._getFormattingAttributes(t, e));
                      };

                      _iterator490 = _createForOfIteratorHelper(t.getRanges());
                      _context71.prev = 2;

                      _iterator490.s();

                    case 4:
                      if ((_step490 = _iterator490.n()).done) {
                        _context71.next = 27;
                        break;
                      }

                      _i255 = _step490.value;
                      _iterator492 = _createForOfIteratorHelper(_i255.getItems());
                      _context71.prev = 7;

                      _iterator492.s();

                    case 9:
                      if ((_step492 = _iterator492.n()).done) {
                        _context71.next = 17;
                        break;
                      }

                      _t393 = _step492.value;
                      _context71.t0 = !e.isBlock(_t393) && n(_t393);

                      if (!_context71.t0) {
                        _context71.next = 15;
                        break;
                      }

                      _context71.next = 15;
                      return _t393;

                    case 15:
                      _context71.next = 9;
                      break;

                    case 17:
                      _context71.next = 22;
                      break;

                    case 19:
                      _context71.prev = 19;
                      _context71.t1 = _context71["catch"](7);

                      _iterator492.e(_context71.t1);

                    case 22:
                      _context71.prev = 22;

                      _iterator492.f();

                      return _context71.finish(22);

                    case 25:
                      _context71.next = 4;
                      break;

                    case 27:
                      _context71.next = 32;
                      break;

                    case 29:
                      _context71.prev = 29;
                      _context71.t2 = _context71["catch"](2);

                      _iterator490.e(_context71.t2);

                    case 32:
                      _context71.prev = 32;

                      _iterator490.f();

                      return _context71.finish(32);

                    case 35:
                      _iterator491 = _createForOfIteratorHelper(t.getSelectedBlocks());
                      _context71.prev = 36;

                      _iterator491.s();

                    case 38:
                      if ((_step491 = _iterator491.n()).done) {
                        _context71.next = 46;
                        break;
                      }

                      _e354 = _step491.value;
                      _context71.t3 = n(_e354);

                      if (!_context71.t3) {
                        _context71.next = 44;
                        break;
                      }

                      _context71.next = 44;
                      return _e354;

                    case 44:
                      _context71.next = 38;
                      break;

                    case 46:
                      _context71.next = 51;
                      break;

                    case 48:
                      _context71.prev = 48;
                      _context71.t4 = _context71["catch"](36);

                      _iterator491.e(_context71.t4);

                    case 51:
                      _context71.prev = 51;

                      _iterator491.f();

                      return _context71.finish(51);

                    case 54:
                      _context71.t5 = n(t);

                      if (!_context71.t5) {
                        _context71.next = 58;
                        break;
                      }

                      _context71.next = 58;
                      return t;

                    case 58:
                    case "end":
                      return _context71.stop();
                  }
                }
              }, _getFormattingItems, null, [[2, 29, 32, 35], [7, 19, 22, 25], [36, 48, 51, 54]]);
            })
          }, {
            key: "_getFormattingAttributes",
            value: /*#__PURE__*/regeneratorRuntime.mark(function _getFormattingAttributes(t, e) {
              var _iterator493, _step493, _step493$value, _n313, _t394;

              return regeneratorRuntime.wrap(function _getFormattingAttributes$(_context72) {
                while (1) {
                  switch (_context72.prev = _context72.next) {
                    case 0:
                      _iterator493 = _createForOfIteratorHelper(t.getAttributes());
                      _context72.prev = 1;

                      _iterator493.s();

                    case 3:
                      if ((_step493 = _iterator493.n()).done) {
                        _context72.next = 12;
                        break;
                      }

                      _step493$value = _slicedToArray(_step493.value, 1), _n313 = _step493$value[0];
                      _t394 = e.getAttributeProperties(_n313);
                      _context72.t0 = _t394 && _t394.isFormatting;

                      if (!_context72.t0) {
                        _context72.next = 10;
                        break;
                      }

                      _context72.next = 10;
                      return _n313;

                    case 10:
                      _context72.next = 3;
                      break;

                    case 12:
                      _context72.next = 17;
                      break;

                    case 14:
                      _context72.prev = 14;
                      _context72.t1 = _context72["catch"](1);

                      _iterator493.e(_context72.t1);

                    case 17:
                      _context72.prev = 17;

                      _iterator493.f();

                      return _context72.finish(17);

                    case 20:
                    case "end":
                      return _context72.stop();
                  }
                }
              }, _getFormattingAttributes, null, [[1, 14, 17, 20]]);
            })
          }]);

          return Av;
        }(a);

        var Ev = /*#__PURE__*/function (_r167) {
          _inherits(Ev, _r167);

          var _super279 = _createSuper(Ev);

          function Ev() {
            _classCallCheck(this, Ev);

            return _super279.apply(this, arguments);
          }

          _createClass(Ev, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.commands.add("removeFormat", new Av(t));
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "RemoveFormatEditing";
            }
          }]);

          return Ev;
        }(r);

        var Sv = "strikethrough";

        var Iv = /*#__PURE__*/function (_r168) {
          _inherits(Iv, _r168);

          var _super280 = _createSuper(Iv);

          function Iv() {
            _classCallCheck(this, Iv);

            return _super280.apply(this, arguments);
          }

          _createClass(Iv, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: Sv
              }), t.model.schema.setAttributeProperties(Sv, {
                isFormatting: !0,
                copyOnEnter: !0
              }), t.conversion.attributeToElement({
                model: Sv,
                view: "s",
                upcastAlso: ["del", "strike", {
                  styles: {
                    "text-decoration": "line-through"
                  }
                }]
              }), t.commands.add(Sv, new Mg(t, Sv)), t.keystrokes.set("CTRL+SHIFT+X", "strikethrough");
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "StrikethroughEditing";
            }
          }]);

          return Iv;
        }(r);

        var Ov = n(171),
            Rv = n.n(Ov);
        var Mv = "strikethrough";

        var Pv = /*#__PURE__*/function (_r169) {
          _inherits(Pv, _r169);

          var _super281 = _createSuper(Pv);

          function Pv() {
            _classCallCheck(this, Pv);

            return _super281.apply(this, arguments);
          }

          _createClass(Pv, [{
            key: "init",
            value: function init() {
              var _this390 = this;

              var t = this.editor,
                  e = t.t;
              t.ui.componentFactory.add(Mv, function (n) {
                var i = t.commands.get(Mv),
                    o = new nu(n);
                return o.set({
                  label: e("Strikethrough"),
                  icon: Rv.a,
                  keystroke: "CTRL+SHIFT+X",
                  tooltip: !0,
                  isToggleable: !0
                }), o.bind("isOn", "isEnabled").to(i, "value", "isEnabled"), _this390.listenTo(o, "execute", function () {
                  t.execute(Mv), t.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "StrikethroughUI";
            }
          }]);

          return Pv;
        }(r);

        var Nv = "underline";

        var Dv = /*#__PURE__*/function (_r170) {
          _inherits(Dv, _r170);

          var _super282 = _createSuper(Dv);

          function Dv() {
            _classCallCheck(this, Dv);

            return _super282.apply(this, arguments);
          }

          _createClass(Dv, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.model.schema.extend("$text", {
                allowAttributes: Nv
              }), t.model.schema.setAttributeProperties(Nv, {
                isFormatting: !0,
                copyOnEnter: !0
              }), t.conversion.attributeToElement({
                model: Nv,
                view: "u",
                upcastAlso: {
                  styles: {
                    "text-decoration": "underline"
                  }
                }
              }), t.commands.add(Nv, new Mg(t, Nv)), t.keystrokes.set("CTRL+U", "underline");
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "UnderlineEditing";
            }
          }]);

          return Dv;
        }(r);

        var jv = n(172),
            Bv = n.n(jv);
        var Lv = "underline";

        var zv = /*#__PURE__*/function (_r171) {
          _inherits(zv, _r171);

          var _super283 = _createSuper(zv);

          function zv() {
            _classCallCheck(this, zv);

            return _super283.apply(this, arguments);
          }

          _createClass(zv, [{
            key: "init",
            value: function init() {
              var _this391 = this;

              var t = this.editor,
                  e = t.t;
              t.ui.componentFactory.add(Lv, function (n) {
                var i = t.commands.get(Lv),
                    o = new nu(n);
                return o.set({
                  label: e("Underline"),
                  icon: Bv.a,
                  keystroke: "CTRL+U",
                  tooltip: !0,
                  isToggleable: !0
                }), o.bind("isOn", "isEnabled").to(i, "value", "isEnabled"), _this391.listenTo(o, "execute", function () {
                  t.execute(Lv), t.editing.view.focus();
                }), o;
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "UnderlineUI";
            }
          }]);

          return zv;
        }(r);

        var Fv = n(39),
            Vv = n.n(Fv);
        var Uv = {
          autoRefresh: !0
        },
            Hv = 36e5;

        var qv = /*#__PURE__*/function () {
          function qv(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Uv;

            _classCallCheck(this, qv);

            if (!t) throw new rn["default"]("token-missing-token-url", this);
            e.initValue && this._validateTokenValue(e.initValue), this.set("value", e.initValue), this._refresh = "function" == typeof t ? t : function () {
              return function (t) {
                return new Promise(function (e, n) {
                  var i = new XMLHttpRequest();
                  i.open("GET", t), i.addEventListener("load", function () {
                    var t = i.status,
                        o = i.response;
                    return t < 200 || t > 299 ? n(new rn["default"]("token-cannot-download-new-token", null)) : e(o);
                  }), i.addEventListener("error", function () {
                    return n(new Error("Network Error"));
                  }), i.addEventListener("abort", function () {
                    return n(new Error("Abort"));
                  }), i.send();
                });
              }(t);
            }, this._options = Object.assign({}, Uv, e);
          }

          _createClass(qv, [{
            key: "init",
            value: function init() {
              var _this392 = this;

              return new Promise(function (t, e) {
                _this392.value ? (_this392._options.autoRefresh && _this392._registerRefreshTokenTimeout(), t(_this392)) : _this392.refreshToken().then(t)["catch"](e);
              });
            }
          }, {
            key: "refreshToken",
            value: function refreshToken() {
              var _this393 = this;

              return this._refresh().then(function (t) {
                _this393._validateTokenValue(t), _this393.set("value", t), _this393._options.autoRefresh && _this393._registerRefreshTokenTimeout();
              }).then(function () {
                return _this393;
              });
            }
          }, {
            key: "destroy",
            value: function destroy() {
              clearTimeout(this._tokenRefreshTimeout);
            }
          }, {
            key: "_validateTokenValue",
            value: function _validateTokenValue(t) {
              var e = "string" == typeof t,
                  n = !/^".*"$/.test(t),
                  i = e && 3 === t.split(".").length;
              if (!n || !i) throw new rn["default"]("token-not-in-jwt-format", this);
            }
          }, {
            key: "_registerRefreshTokenTimeout",
            value: function _registerRefreshTokenTimeout() {
              var _this394 = this;

              var t = this._getTokenRefreshTimeoutTime();

              clearTimeout(this._tokenRefreshTimeout), this._tokenRefreshTimeout = setTimeout(function () {
                _this394.refreshToken();
              }, t);
            }
          }, {
            key: "_getTokenRefreshTimeoutTime",
            value: function _getTokenRefreshTimeoutTime() {
              try {
                var _this$value$split = this.value.split("."),
                    _this$value$split2 = _slicedToArray(_this$value$split, 2),
                    _t395 = _this$value$split2[1],
                    _JSON$parse = JSON.parse(atob(_t395)),
                    _e355 = _JSON$parse.exp;

                return _e355 ? Math.floor((1e3 * _e355 - Date.now()) / 2) : Hv;
              } catch (t) {
                return Hv;
              }
            }
          }], [{
            key: "create",
            value: function create(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Uv;
              return new qv(t, e).init();
            }
          }]);

          return qv;
        }();

        Object(o["default"])(qv, i["default"]);
        var Wv = qv;
        var $v = /^data:(\S*?);base64,/;

        var Yv = /*#__PURE__*/function () {
          function Yv(t, e, n) {
            _classCallCheck(this, Yv);

            if (!t) throw new rn["default"]("fileuploader-missing-file", null);
            if (!e) throw new rn["default"]("fileuploader-missing-token", null);
            if (!n) throw new rn["default"]("fileuploader-missing-api-address", null);
            this.file = function (t) {
              if ("string" != typeof t) return !1;
              var e = t.match($v);
              return !(!e || !e.length);
            }(t) ? function (t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 512;

              try {
                var _n314 = t.match($v)[1],
                    _i256 = atob(t.replace($v, "")),
                    _o135 = [];

                for (var _t396 = 0; _t396 < _i256.length; _t396 += e) {
                  var _n315 = _i256.slice(_t396, _t396 + e),
                      _r172 = new Array(_n315.length);

                  for (var _t397 = 0; _t397 < _n315.length; _t397++) {
                    _r172[_t397] = _n315.charCodeAt(_t397);
                  }

                  _o135.push(new Uint8Array(_r172));
                }

                return new Blob(_o135, {
                  type: _n314
                });
              } catch (t) {
                throw new rn["default"]("fileuploader-decoding-image-data-error", null);
              }
            }(t) : t, this._token = e, this._apiAddress = n;
          }

          _createClass(Yv, [{
            key: "onProgress",
            value: function onProgress(t) {
              return this.on("progress", function (e, n) {
                return t(n);
              }), this;
            }
          }, {
            key: "onError",
            value: function onError(t) {
              return this.once("error", function (e, n) {
                return t(n);
              }), this;
            }
          }, {
            key: "abort",
            value: function abort() {
              this.xhr.abort();
            }
          }, {
            key: "send",
            value: function send() {
              return this._prepareRequest(), this._attachXHRListeners(), this._sendRequest();
            }
          }, {
            key: "_prepareRequest",
            value: function _prepareRequest() {
              var t = new XMLHttpRequest();
              t.open("POST", this._apiAddress), t.setRequestHeader("Authorization", this._token.value), t.responseType = "json", this.xhr = t;
            }
          }, {
            key: "_attachXHRListeners",
            value: function _attachXHRListeners() {
              var _this395 = this;

              var t = this,
                  e = this.xhr;

              function n(e) {
                return function () {
                  return t.fire("error", e);
                };
              }

              e.addEventListener("error", n("Network Error")), e.addEventListener("abort", n("Abort")), e.upload && e.upload.addEventListener("progress", function (t) {
                t.lengthComputable && _this395.fire("progress", {
                  total: t.total,
                  uploaded: t.loaded
                });
              }), e.addEventListener("load", function () {
                var t = e.status,
                    n = e.response;
                if (t < 200 || t > 299) return _this395.fire("error", n.message || n.error);
              });
            }
          }, {
            key: "_sendRequest",
            value: function _sendRequest() {
              var _this396 = this;

              var t = new FormData(),
                  e = this.xhr;
              return t.append("file", this.file), new Promise(function (n, i) {
                e.addEventListener("load", function () {
                  var t = e.status,
                      o = e.response;
                  return t < 200 || t > 299 ? o.message ? i(new rn["default"]("fileuploader-uploading-data-failed", _this396, {
                    message: o.message
                  })) : i(o.error) : n(o);
                }), e.addEventListener("error", function () {
                  return i(new Error("Network Error"));
                }), e.addEventListener("abort", function () {
                  return i(new Error("Abort"));
                }), e.send(t);
              });
            }
          }]);

          return Yv;
        }();

        Object(o["default"])(Yv, sn["default"]);

        var Jv = /*#__PURE__*/function () {
          function Jv(t, e) {
            _classCallCheck(this, Jv);

            if (!t) throw new rn["default"]("uploadgateway-missing-token", null);
            if (!e) throw new rn["default"]("uploadgateway-missing-api-address", null);
            this._token = t, this._apiAddress = e;
          }

          _createClass(Jv, [{
            key: "upload",
            value: function upload(t) {
              return new Yv(t, this._token, this._apiAddress);
            }
          }]);

          return Jv;
        }();

        var Gv = /*#__PURE__*/function (_gn3) {
          _inherits(Gv, _gn3);

          var _super284 = _createSuper(Gv);

          function Gv() {
            _classCallCheck(this, Gv);

            return _super284.apply(this, arguments);
          }

          _createClass(Gv, [{
            key: "createToken",
            value: function createToken(t, e) {
              return new Wv(t, e);
            }
          }, {
            key: "createUploadGateway",
            value: function createUploadGateway(t, e) {
              return new Jv(t, e);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "CloudServicesCore";
            }
          }]);

          return Gv;
        }(gn);

        var Kv = /*#__PURE__*/function (_gn4) {
          _inherits(Kv, _gn4);

          var _super285 = _createSuper(Kv);

          function Kv() {
            _classCallCheck(this, Kv);

            return _super285.apply(this, arguments);
          }

          _createClass(Kv, [{
            key: "init",
            value: function init() {
              var t = this.context.config.get("cloudServices") || {};

              for (var _e356 in t) {
                this[_e356] = t[_e356];
              }

              if (this._tokens = new Map(), this.tokenUrl) return this.token = this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl), this._tokens.set(this.tokenUrl, this.token), this.token.init();
              this.token = null;
            }
          }, {
            key: "registerTokenUrl",
            value: function registerTokenUrl(t) {
              if (this._tokens.has(t)) return Promise.resolve(this.getTokenFor(t));
              var e = this.context.plugins.get("CloudServicesCore").createToken(t);
              return this._tokens.set(t, e), e.init();
            }
          }, {
            key: "getTokenFor",
            value: function getTokenFor(t) {
              var e = this._tokens.get(t);

              if (!e) throw new rn["default"]("cloudservices-token-not-registered", this);
              return e;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(Kv.prototype), "destroy", this).call(this);

              var _iterator494 = _createForOfIteratorHelper(this._tokens.values()),
                  _step494;

              try {
                for (_iterator494.s(); !(_step494 = _iterator494.n()).done;) {
                  var _t398 = _step494.value;

                  _t398.destroy();
                }
              } catch (err) {
                _iterator494.e(err);
              } finally {
                _iterator494.f();
              }
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "CloudServices";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Gv];
            }
          }]);

          return Kv;
        }(gn);

        var Qv = ["connected", "webSocketUrl", "from", "change:me", "disconnect", "connection", "constructor", "Connected users limit exceeded", "initialReconnectionInterval", "disconnected", "The limit of maximum concurrent connections that the collaboration server can handle has been reached. Try opening the document again in a few minutes. Please contact your system administrator if the problem persists.", "reconnect", "destroy", "context", "cloudservices-reconnection-error", "_reconnect", "get", "state", "_domEmitter", "then", "WebSocketGateway", "isInReconnectionStack", "catch", "cloudservices-init", "offline", "real-time-collaboration", "websocketgateway-plugin-already-registered", "limitExceeded", "delete", "error", "init", "_reconnectionStack", "connect", "websocketgateway-invalid-plugin-interface", "removeFromReconnectionStack", "set", "_isBrowserOffline", "function", "requires", "addToReconnectionStack", "listenTo", "connecting", "token", "websocketgateway-missing-token", "_isReconnectPlugins", "all", "plugins", "pluginName", "websocketgateway-missing-websocket-url", "stopListening"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Qv, 111);

        var Xv = function Xv(t, e) {
          return Qv[t -= 0];
        };

        var Zv = /*#__PURE__*/function (_gn5, _Xv, _Xv2, _Xv3, _Xv4, _Xv5, _Xv6, _Xv7) {
          _inherits(Zv, _gn5);

          var _super286 = _createSuper(Zv);

          function Zv() {
            _classCallCheck(this, Zv);

            return _super286.apply(this, arguments);
          }

          _createClass(Zv, [{
            key: _Xv3,
            value: function value() {
              var _this397 = this;

              var t = this[Xv("0x2")],
                  e = t.plugins[Xv("0x5")](Kv),
                  n = t[Xv("0x23")][Xv("0x5")](Lu);
              if (!e[Xv("0x1f")]) throw new rn["default"](Xv("0x20"), this);
              if (!e.webSocketUrl) throw new rn["default"](Xv("0x25"), this);
              return this[Xv("0x18")](Xv("0x6"), Xv("0x1e")), this[Xv("0x18")](Xv("0x19"), !1), this[Xv("0x14")] = new Set(), this[Xv("0x21")] = !1, this[Xv("0x7")] = Object.create(er), this[Xv("0x7")].listenTo(window, Xv("0xd"), function () {
                return _this397[Xv("0x19")] = !0;
              }), this[Xv("0x7")][Xv("0x1d")](window, "online", function () {
                return _this397[Xv("0x19")] = !1;
              }), Zv.WebSocketGateway[Xv("0x15")](e[Xv("0x1f")], e[Xv("0x28")], {
                disconnectOnUnload: !1
              })[Xv("0x8")](function (t) {
                if (_this397.connection = t, _this397.bind(Xv("0x6")).to(t, Xv("0x6"), _this397, Xv("0x19"), function (t, e) {
                  return "connected" !== t && (_this397[Xv("0x21")] = !0), e || Xv("0x27") !== t ? Xv("0x30") : "disconnected" == _this397[Xv("0x6")] && _this397[Xv("0x21")] ? (_this397[Xv("0x21")] = !1, _this397[Xv("0x4")](), Xv("0x1e")) : Xv("0x27");
                }), _this397[Xv("0x2c")].on(Xv("0x12"), function (t, e) {
                  if (Xv("0x10") !== e.code) throw console.error(e), new rn["default"](Xv("0xc"), null, {
                    originalError: e
                  });
                  n.showWarning(Xv("0x31"), {
                    title: Xv("0x2e"),
                    namespace: Xv("0xe")
                  });
                }), !t.me) return new Promise(function (e) {
                  return t.on(Xv("0x2a"), e);
                });
              })[Xv("0xb")](function (t) {
                throw console.error(t), new rn["default"](Xv("0xc"), null, {
                  originalError: t
                });
              });
            }
          }, {
            key: _Xv4,
            value: function value(t) {
              if (Xv("0x1a") != typeof t[Xv("0x0")]) throw new rn["default"](Xv("0x16"), this);
              if (this.isInReconnectionStack(t)) throw new rn["default"](Xv("0xf"), this, {
                name: t[Xv("0x2d")][Xv("0x24")]
              });

              this._reconnectionStack.add(t);
            }
          }, {
            key: _Xv5,
            value: function value(t) {
              this[Xv("0x14")][Xv("0x11")](t);
            }
          }, {
            key: _Xv6,
            value: function value(t) {
              return this._reconnectionStack.has(t);
            }
          }, {
            key: _Xv7,
            value: function value() {
              var _this398 = this;

              return this.connection[Xv("0x0")]()[Xv("0x8")](function () {
                return Promise[Xv("0x22")](Array[Xv("0x29")](_this398[Xv("0x14")], function (t) {
                  return t[Xv("0x0")]();
                }));
              })[Xv("0x8")](function () {
                return _this398[Xv("0x6")] = Xv("0x27");
              })[Xv("0xb")](function (t) {
                throw console[Xv("0x12")](t), new rn["default"](Xv("0x3"), _this398.context);
              });
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this[Xv("0x2c")] && this[Xv("0x2c")][Xv("0x2b")](), this[Xv("0x6")] = Xv("0x30"), this[Xv("0x7")][Xv("0x26")](), _get3(_getPrototypeOf(Zv.prototype), Xv("0x1"), this).call(this);
            }
          }], [{
            key: _Xv,
            get: function get() {
              return [Kv, Lu];
            }
          }, {
            key: _Xv2,
            get: function get() {
              return Xv("0x9");
            }
          }]);

          return Zv;
        }(gn, Xv("0x1b"), Xv("0x24"), Xv("0x13"), Xv("0x1c"), Xv("0x17"), Xv("0xa"), Xv("0x4"));

        Zv[Xv("0x9")] = Vv.a, Zv[Xv("0x2f")] = 1e3;
        var ty = ["addCommentThread", "pluginName", "has", "config", "editors", "noPermissions", "setAdminPermissions", "isReadOnly", "Permissions", "document:write", "comment:write", "context", "get", "collaboration.channelId", "permissions-set-permissions-invalid-channel-id", "switchReadOnly", "forceDisabled", "commands", "clearForceDisabled", "CommentsOnly", "find", "CommentsRepository", "plugins", "setPermissions", "includes"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(ty, 456);

        var ey = function ey(t, e) {
          return ty[t -= 0];
        };

        var ny = /*#__PURE__*/function (_gn6, _ey, _ey2) {
          _inherits(ny, _gn6);

          var _super287 = _createSuper(ny);

          function ny() {
            _classCallCheck(this, ny);

            return _super287.apply(this, arguments);
          }

          _createClass(ny, [{
            key: _ey2,
            value: function value(t, e) {
              var n;
              if (e || (e = this[ey("0x5")][ey("0x16")][ey("0x6")](ey("0x7"))), this[ey("0x5")][ey("0x16")].get(ey("0x7")) == e ? n = this.context : this[ey("0x5")].editors && (n = this[ey("0x5")][ey("0x17")][ey("0xe")](function (t) {
                return t[ey("0x16")].get(ey("0x7")) == e;
              })), !n) throw new rn["default"](ey("0x8"), null);
              var i = n[ey("0x10")],
                  o = n instanceof bl,
                  r = i[ey("0x15")](ey("0xf")) && i.get("CommentsRepository"),
                  s = i[ey("0x15")](ey("0xd")) && i[ey("0x6")](ey("0xd")),
                  a = t[ey("0x12")](ey("0x3")),
                  c = t[ey("0x12")]("comment:admin"),
                  l = t[ey("0x12")](ey("0x4")) || c;

              if (s && (s.isEnabled = !a && l), o && (n[ey("0x1")] = !(a || l && r)), r) {
                r[ey("0x9")](!l, e), r[ey("0x0")](c, e);

                var _t399 = o && n[ey("0xb")].get(ey("0x13"));

                _t399 && (l ? _t399[ey("0xc")](ey("0x18")) : _t399[ey("0xa")]("noPermissions"));
              }
            }
          }], [{
            key: _ey,
            get: function get() {
              return ey("0x2");
            }
          }]);

          return ny;
        }(gn, ey("0x14"), ey("0x11"));

        n(353);

        var iy = /*#__PURE__*/function (_gn7) {
          _inherits(iy, _gn7);

          var _super288 = _createSuper(iy);

          function iy(t) {
            var _this399;

            _classCallCheck(this, iy);

            _this399 = _super288.call(this, t), t.config.define("users.anonymousUserId", "anonymous-user"), t.config.define("users.colorsCount", 8), _this399.users = new on["default"](), _this399._locale = t.locale, _this399._licenseKeyCheckInterval = null, _this399._lastColor = 0, _this399._myId = null, _this399.decorate("getOperationAuthor");
            return _this399;
          }

          _createClass(iy, [{
            key: "init",
            value: function init() {
              var _this400 = this;

              var t = this.context;
              this.licenseKey = t.config.get("licenseKey"), this._licenseKeyCheckInterval = setInterval(function () {
                var e;

                for (var _n316 in t) {
                  var _i257 = t[_n316];

                  if ("licenseKeyTrial" === _i257 || "licenseKeyInvalid" === _i257 || "licenseKeyValid" === _i257 || "licenseKeyTrialLimit" == _i257) {
                    delete t[_n316], e = _i257;
                    break;
                  }
                }

                if ("licenseKeyInvalid" === e) throw clearInterval(_this400._licenseKeyCheckInterval), new rn["default"]("invalid-license-key", null);
                if ("licenseKeyTrial" === e && console.info("You are using the trial version of CKEditor 5 collaboration plugin with limited usage. Make sure you will not use it in the production environment."), "licenseKeyTrialLimit" === e) throw clearInterval(_this400._licenseKeyCheckInterval), new rn["default"]("trial-license-key-reached-limit", null);
                "licenseKeyValid" === e && clearInterval(_this400._licenseKeyCheckInterval);
              }, 1e3);
            }
          }, {
            key: "me",
            get: function get() {
              return null == this._myId ? null : this.getUser(this._myId);
            }
          }, {
            key: "addUser",
            value: function addUser(t) {
              if (!(t = Object.assign({}, t, {
                color: this._getNextColor()
              })).id || "string" != typeof t.id) throw new rn["default"]("users-add-invalid-id");
              if (this.users.has(t.id)) throw new rn["default"]("users-add-duplicated-id", null, {
                id: t.id
              });

              t.name = function (t) {
                var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
                var n = t.t;
                return "" == (e = e.trim()) ? n("Anonymous") : e;
              }(this._locale, t.name);

              var e = new oy(t);
              return this.users.add(e), e;
            }
          }, {
            key: "getUser",
            value: function getUser(t) {
              return this.users.get(t);
            }
          }, {
            key: "useAnonymousUser",
            value: function useAnonymousUser() {
              var t = this.context.config.get("users.anonymousUserId"),
                  e = this._locale.t;
              this.users.has(t) || (this.addUser({
                id: t,
                name: e("Anonymous")
              })._isAnonymous = !0, this.defineMe(t));
            }
          }, {
            key: "defineMe",
            value: function defineMe(t) {
              if (this._myId) throw new rn["default"]("users-me-already-defined", null);
              if (!this.getUser(t)) throw new rn["default"]("users-me-missing-user", null);
              this._myId = t;
            }
          }, {
            key: "getOperationAuthor",
            value: function getOperationAuthor() {
              return this.me;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(iy.prototype), "destroy", this).call(this), clearInterval(this._licenseKeyCheckInterval);
            }
          }, {
            key: "_getNextColor",
            value: function _getNextColor() {
              var t = this.context.config.get("users.colorsCount");
              return this._lastColor >= t && (this._lastColor = 0), new ry(this._lastColor++);
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Users";
            }
          }, {
            key: "requires",
            get: function get() {
              return [ny];
            }
          }]);

          return iy;
        }(gn);

        var oy = /*#__PURE__*/function () {
          function oy(t) {
            _classCallCheck(this, oy);

            this.id = t.id, this.color = t.color, this.name = t.name, this.avatar = t.avatar, this._isAnonymous = !1;
          }

          _createClass(oy, [{
            key: "isAnonymous",
            get: function get() {
              return this._isAnonymous;
            }
          }, {
            key: "initials",
            get: function get() {
              var t = this.name.split(" ");
              return 1 === t.length ? this._getInitial(t[0]) : this._getInitial(t[0]) + this._getInitial(t[t.length - 1]);
            }
          }, {
            key: "_getInitial",
            value: function _getInitial(t) {
              return t.charAt(0).toUpperCase();
            }
          }]);

          return oy;
        }();

        var ry = /*#__PURE__*/function () {
          function ry(t) {
            _classCallCheck(this, ry);

            this._id = t;
          }

          _createClass(ry, [{
            key: "getBackgroundColorClass",
            value: function getBackgroundColorClass() {
              return "ck-user__bg-color--" + this._id;
            }
          }, {
            key: "getSelectionClass",
            value: function getSelectionClass() {
              return "ck-user__selection--" + this._id;
            }
          }, {
            key: "getMarkerClass",
            value: function getMarkerClass() {
              return "ck-user__marker--" + this._id;
            }
          }]);

          return ry;
        }();

        var sy = ["sessionId", "role", "values", "assign", "_uniqueUsersCount", "requires", "connection", "sessions-unregister-not-exist", "remove", "register", "_handleSessionRemove", "allConnectedUsers", "context", "listenTo", "change:state", "mySessionId", "getUser", "_handleSessionAdd", "fire", "connected", "getUserSessions", "init", "forEach", "pluginName", "channelConnectedUsers", "size", "Sessions", "_createUser", "delete", "sessionAdd:", "defineMe", "get", "plugins", "set", "user", "_registeredSessions", "clear", "add", "channelSessions", "_users", "state", "has"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(sy, 335);

        var ay = function ay(t, e) {
          return sy[t -= 0];
        };

        var cy = /*#__PURE__*/function (_gn8, _ay, _ay2, _ay3, _ay4, _ay5, _ay6) {
          _inherits(cy, _gn8);

          var _super289 = _createSuper(cy);

          function cy() {
            _classCallCheck(this, cy);

            return _super289.apply(this, arguments);
          }

          _createClass(cy, [{
            key: _ay3,
            value: function value() {
              var _this401 = this;

              var t = this[ay("0xd")],
                  e = t[ay("0x21")][ay("0x20")](Zv);
              this.channelSessions = new Map(), this[ay("0x19")] = new Map(), this[ay("0xc")] = new on["default"](), this[ay("0x24")] = new Map(), this[ay("0x5")] = 0, this[ay("0x28")] = t[ay("0x21")][ay("0x20")](iy), this[ay("0xe")](e, ay("0xf"), function (t, e, n) {
                if (ay("0x14") !== n) _this401[ay("0x27")][ay("0x17")](function (t) {
                  return t[ay("0x25")]();
                }), _this401[ay("0x19")][ay("0x17")](function (t) {
                  return t[ay("0x25")]();
                }), _this401[ay("0xc")].clear();else {
                  var _iterator495 = _createForOfIteratorHelper(_this401._registeredSessions),
                      _step495;

                  try {
                    for (_iterator495.s(); !(_step495 = _iterator495.n()).done;) {
                      var _step495$value = _slicedToArray(_step495.value, 2),
                          _t400 = _step495$value[0],
                          _e357 = _step495$value[1];

                      var _iterator496 = _createForOfIteratorHelper(_e357),
                          _step496;

                      try {
                        for (_iterator496.s(); !(_step496 = _iterator496.n()).done;) {
                          var _n317 = _step496.value;

                          _this401[ay("0x12")](_t400, _n317);
                        }
                      } catch (err) {
                        _iterator496.e(err);
                      } finally {
                        _iterator496.f();
                      }
                    }
                  } catch (err) {
                    _iterator495.e(err);
                  } finally {
                    _iterator495.f();
                  }
                }
              }), this[ay("0x1c")](e.connection.me, !0);
            }
          }, {
            key: _ay4,
            value: function value(t, e) {
              var _this402 = this;

              if (this[ay("0x24")][ay("0x0")](t)) throw new rn["default"]("sessions-register-already-registered", null, {
                channelId: t
              });
              this[ay("0x24")][ay("0x22")](t, e), this[ay("0x27")][ay("0x22")](t, new on["default"]()), this[ay("0x19")].set(t, new on["default"]()), this[ay("0xe")](e, ay("0x26"), function (e, n) {
                return _this402._handleSessionAdd(t, n);
              }), this[ay("0xe")](e, ay("0x9"), function (e, n) {
                return _this402[ay("0xb")](t, n);
              });

              var _iterator497 = _createForOfIteratorHelper(e),
                  _step497;

              try {
                for (_iterator497.s(); !(_step497 = _iterator497.n()).done;) {
                  var _n318 = _step497.value;

                  this._handleSessionAdd(t, _n318);
                }
              } catch (err) {
                _iterator497.e(err);
              } finally {
                _iterator497.f();
              }
            }
          }, {
            key: "unregister",
            value: function unregister(t) {
              if (!this[ay("0x24")][ay("0x0")](t)) throw new rn["default"](ay("0x8"), null, {
                channelId: t
              });
              var e = this[ay("0x24")][ay("0x20")](t);
              this.stopListening(e);

              var _iterator498 = _createForOfIteratorHelper(e),
                  _step498;

              try {
                for (_iterator498.s(); !(_step498 = _iterator498.n()).done;) {
                  var _n319 = _step498.value;
                  ay("0x14") === this[ay("0xd")][ay("0x21")][ay("0x20")](Zv)[ay("0x29")] && this[ay("0xb")](t, _n319);
                }
              } catch (err) {
                _iterator498.e(err);
              } finally {
                _iterator498.f();
              }

              this[ay("0x24")][ay("0x1d")](t), this[ay("0x27")][ay("0x1d")](t), this[ay("0x19")][ay("0x1d")](t);
            }
          }, {
            key: _ay5,
            get: function get() {
              return this[ay("0xd")][ay("0x21")][ay("0x20")](Zv)[ay("0x7")][ay("0x1")];
            }
          }, {
            key: "getUserBySessionId",
            value: function getUserBySessionId(t) {
              var _iterator499 = _createForOfIteratorHelper(this[ay("0x27")].values()),
                  _step499;

              try {
                for (_iterator499.s(); !(_step499 = _iterator499.n()).done;) {
                  var _e358 = _step499.value;

                  var _iterator500 = _createForOfIteratorHelper(_e358),
                      _step500;

                  try {
                    for (_iterator500.s(); !(_step500 = _iterator500.n()).done;) {
                      var _n320 = _step500.value;
                      if (_n320.id === t) return _n320.user;
                    }
                  } catch (err) {
                    _iterator500.e(err);
                  } finally {
                    _iterator500.f();
                  }
                }
              } catch (err) {
                _iterator499.e(err);
              } finally {
                _iterator499.f();
              }
            }
          }, {
            key: _ay6,
            value: function value(t, e) {
              var n = e ? [this[ay("0x27")][ay("0x20")](e)] : this[ay("0x27")][ay("0x3")](),
                  i = new Set();

              var _iterator501 = _createForOfIteratorHelper(n),
                  _step501;

              try {
                for (_iterator501.s(); !(_step501 = _iterator501.n()).done;) {
                  var _e359 = _step501.value;

                  var _iterator502 = _createForOfIteratorHelper(_e359),
                      _step502;

                  try {
                    for (_iterator502.s(); !(_step502 = _iterator502.n()).done;) {
                      var _n321 = _step502.value;
                      _n321[ay("0x23")].id === t.id && i[ay("0x26")](_n321.id);
                    }
                  } catch (err) {
                    _iterator502.e(err);
                  } finally {
                    _iterator502.f();
                  }
                }
              } catch (err) {
                _iterator501.e(err);
              } finally {
                _iterator501.f();
              }

              return i;
            }
          }, {
            key: "getUserRole",
            value: function getUserRole(t) {
              var _iterator503 = _createForOfIteratorHelper(this[ay("0x27")][ay("0x3")]()),
                  _step503;

              try {
                for (_iterator503.s(); !(_step503 = _iterator503.n()).done;) {
                  var _e360 = _step503.value;

                  var _iterator504 = _createForOfIteratorHelper(_e360),
                      _step504;

                  try {
                    for (_iterator504.s(); !(_step504 = _iterator504.n()).done;) {
                      var _n322 = _step504.value;
                      if (_n322[ay("0x23")] === t) return _n322[ay("0x2")];
                    }
                  } catch (err) {
                    _iterator504.e(err);
                  } finally {
                    _iterator504.f();
                  }
                }
              } catch (err) {
                _iterator503.e(err);
              } finally {
                _iterator503.f();
              }
            }
          }, {
            key: "_handleSessionAdd",
            value: function _handleSessionAdd(t, e) {
              if (ay("0x14") !== this[ay("0xd")][ay("0x21")][ay("0x20")](Zv)[ay("0x29")]) return;
              var n = e[ay("0x23")],
                  i = this[ay("0x28")][ay("0x11")](n.id) || this[ay("0x1c")](n),
                  o = Object[ay("0x4")]({}, e, {
                user: i
              });
              this[ay("0x27")][ay("0x20")](t)[ay("0x26")](o);
              var r = this[ay("0x19")].get(t);
              r.has(i.id) || r[ay("0x26")](i), this.allConnectedUsers[ay("0x0")](i.id) || this.allConnectedUsers[ay("0x26")](i), this[ay("0x13")](ay("0x1e") + t, {
                channelId: t,
                session: o
              });
            }
          }, {
            key: "_handleSessionRemove",
            value: function _handleSessionRemove(t, e) {
              if ("connected" !== this[ay("0xd")][ay("0x21")].get(Zv)[ay("0x29")]) return;
              var n = this[ay("0x19")][ay("0x20")](t),
                  i = e.user;
              this.channelSessions[ay("0x20")](t)[ay("0x9")](e.id), n[ay("0x0")](i.id) && !this.getUserSessions(i, t)[ay("0x1a")] && n[ay("0x9")](i.id), this[ay("0xc")][ay("0x20")](i.id) && !this[ay("0x15")](i)[ay("0x1a")] && this[ay("0xc")][ay("0x9")](i.id);
            }
          }, {
            key: "_createUser",
            value: function _createUser(t, e) {
              var n = this[ay("0x28")].addUser(t);
              return e && this._users[ay("0x1f")](t.id), n.orderNumber = this[ay("0x5")]++, n;
            }
          }], [{
            key: _ay,
            get: function get() {
              return ay("0x1b");
            }
          }, {
            key: _ay2,
            get: function get() {
              return [Zv, iy];
            }
          }]);

          return cy;
        }(gn, ay("0x18"), ay("0x6"), ay("0x16"), ay("0xa"), ay("0x10"), ay("0x15"));

        n(355);
        var ly = ["orderNumber", "end", "detach", "view", "size", "render", "user:", "start", "editingDowncast", "isObject", "markerToElement", "createRange", "createUIElement", "toDomElement", "user:position:", "ck-user__selection", "root", "toRange", "set", "addMarker", "has", "element", "getPositions", "hasContent", "startsWith", "markerName", "document", "isInline", "get", "change:range", "isSimilar", "user:position", "markerRange", "user:range:", "marker", "conversion", "delete", "plugins", "newRange", "$graveyard", "innerHTML", "type", "getMarkerClass", "rootName", "markers", "deletionPosition", "name", "editor", "data-session-id", "clear", "oldRange", "removeMarker", "span", "createUserMarkerOperations", "ck-user__marker ", "getContainedElement", "parent", "afterInit", "undo", "for", "checkChild", "init", "isCollapsed", "setCustomProperty", "getNearestSelectionRange", "transparent", "updateMarker", "user:range", "getAttribute", "change", "getRange", "applyOperation", "_createdBatches", "getCustomProperty", "markerToHighlight", "batch", "update:user:range", "model", "contenteditable", "$text", "userPositionMarker", "schema", "mySessionId", "split"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(ly, 377);

        var dy = function dy(t, e) {
          return ly[t -= 0];
        };

        var uy = /*#__PURE__*/function (_r173, _dy, _dy2, _dy3) {
          _inherits(uy, _r173);

          var _super290 = _createSuper(uy);

          function uy() {
            _classCallCheck(this, uy);

            return _super290.apply(this, arguments);
          }

          _createClass(uy, [{
            key: _dy,
            value: function value() {
              var t = this.editor,
                  e = t[dy("0x50")][dy("0x47")](cy);
              t[dy("0x4e")][dy("0x12")](dy("0x33"))[dy("0x35")]({
                model: dy("0x4a"),
                view: function view(n, _ref100) {
                  var i = _ref100.writer;
                  return function (t, e, n, i) {
                    var o = t.markerName[dy("0x2a")](":")[2],
                        r = n.getUserBySessionId(o);
                    if (!r || o === n[dy("0x29")]) return;
                    if (!i.model[dy("0x28")][dy("0x13")](t[dy("0x4b")].start, dy("0x26"))) return;
                    var s = {
                      "class": dy("0xd") + r.color[dy("0x1")](),
                      "data-name": r.name,
                      "data-session-id": o
                    },
                        a = i[dy("0x24")].markers[dy("0x47")](t[dy("0x44")]).getStart(),
                        c = a.nodeAfter,
                        l = i.model[dy("0x28")];
                    if (c && l[dy("0x34")](c) && l[dy("0x46")](c) && !i.model[dy("0x3")][dy("0x47")](dy("0x4c") + o)[dy("0x1d")]()[dy("0x15")]) return;
                    var d = a[dy("0xf")];
                    i[dy("0x24")][dy("0x28")].isLimit(d) && !i[dy("0x24")][dy("0x42")](d) && (s[dy("0x25")] = !1);

                    var u = function (t, e) {
                      var n = t[dy("0x37")](dy("0xb"), e);
                      return t[dy("0x16")]("userPositionMarker", !0, n), n[dy("0x30")] = function (t) {
                        var e = this[dy("0x38")](t);
                        return e[dy("0x53")] = '&#8203;<span class="ck-user__marker-line"><span class="ck-user__marker-dot"></span></span>', e;
                      }, n[dy("0x49")] = function (t) {
                        return this[dy("0x20")](dy("0x27")) && t[dy("0x20")](dy("0x27")) && this[dy("0x1b")](dy("0x7")) == t[dy("0x1b")]("data-session-id");
                      }, n;
                    }(e, s);

                    return u.priority = 1e3 + r[dy("0x2b")], u;
                  }(n, i, e, t);
                }
              }), t[dy("0x4e")]["for"](dy("0x33"))[dy("0x21")]({
                model: dy("0x1a"),
                view: function view(t) {
                  return function (e, n) {
                    var i = t.markerName[dy("0x2a")](":")[2];
                    if (i === n[dy("0x29")]) return;
                    var o = n.getUserBySessionId(i);
                    return o ? {
                      id: i,
                      classes: [dy("0x3a"), o.color.getSelectionClass()],
                      attributes: {
                        "data-session-id": i
                      },
                      priority: 2e3 + o.orderNumber
                    } : {
                      id: i
                    };
                  }(0, e);
                }
              }), function (t) {
                var e = t[dy("0x24")],
                    n = new Map(),
                    i = t[dy("0x50")][dy("0x47")](cy);
                e.markers.on(dy("0x23"), function (t, o, r, s) {
                  if (!s && n[dy("0x47")](o[dy("0x5")])) return n[dy("0x47")](o[dy("0x5")]).detach(), void n[dy("0x4f")](o.name);
                  var a = o[dy("0x5")][dy("0x2a")](":")[2];
                  if (a === i[dy("0x29")]) return;
                  var c = "user:position:" + a;
                  e.markers[dy("0x3f")](c) && e[dy("0x1c")](function (t) {
                    return t[dy("0x19")](c);
                  }), o.on(dy("0x48"), function (t, i, r) {
                    if (dy("0x52") != i.root.rootName && dy("0x52") == o.getRange()[dy("0x3b")][dy("0x2")] && !n[dy("0x3f")](o[dy("0x5")])) {
                      var _t401 = e[dy("0x28")][dy("0x17")](r[dy("0x4")]);

                      if (_t401) {
                        var _i258 = fa.fromRange(_t401);

                        n[dy("0x3d")](o.name, _i258), _i258.on(dy("0x48"), function (t, r, s) {
                          if (dy("0x52") == _i258[dy("0x3b")][dy("0x2")]) {
                            var _t402 = e[dy("0x28")][dy("0x17")](s[dy("0x4")]);

                            _t402 ? (_i258[dy("0x32")] = _t402.start, _i258[dy("0x2c")] = _t402[dy("0x2c")]) : (n[dy("0x4f")](o[dy("0x5")]), _i258[dy("0x2d")]());
                          }
                        });
                      }
                    }
                  });
                }), e[dy("0x45")].on(dy("0x1c"), function () {
                  n[dy("0x2f")] > 0 && e.enqueueChange(dy("0x18"), function (t) {
                    var _iterator505 = _createForOfIteratorHelper(n),
                        _step505;

                    try {
                      for (_iterator505.s(); !(_step505 = _iterator505.n()).done;) {
                        var _step505$value = _slicedToArray(_step505.value, 2),
                            _i259 = _step505$value[0],
                            _o136 = _step505$value[1];

                        dy("0x52") == e.markers[dy("0x47")](_i259)[dy("0x1d")]()[dy("0x3b")].rootName && (hy(_i259[dy("0x2a")](":")[2], _o136[dy("0x3c")](), e, t), _o136[dy("0x2d")]());
                      }
                    } catch (err) {
                      _iterator505.e(err);
                    } finally {
                      _iterator505.f();
                    }

                    n[dy("0x8")]();
                  });
                });
              }(t);
            }
          }, {
            key: _dy2,
            value: function value() {
              var t = this.editor,
                  e = t.commands[dy("0x47")](dy("0x11"));
              e && t[dy("0x24")].on(dy("0x1e"), function (n, i) {
                var o = i[0];
                if (dy("0x4d") != o[dy("0x0")] || !o[dy("0x5")][dy("0x43")](dy("0x31"))) return;
                var r = o[dy("0x22")];
                e[dy("0x1f")].has(r) && (o[dy("0x51")] = o[dy("0x9")] ? t[dy("0x24")][dy("0x36")](o.oldRange[dy("0x32")], o[dy("0x9")].end) : null);
              }, {
                priority: "highest"
              });
            }
          }, {
            key: _dy3,
            value: function value() {
              var t = this[dy("0x6")],
                  e = t[dy("0x24")][dy("0x45")],
                  n = t[dy("0x50")][dy("0x47")](cy);
              t.model.enqueueChange("transparent", function (i) {
                var o = dy("0x4c") + n[dy("0x29")],
                    r = dy("0x39") + n[dy("0x29")],
                    s = t[dy("0x24")][dy("0x3")][dy("0x3f")](o);
                t.editing[dy("0x2e")].hasDomSelection ? hy(n[dy("0x29")], e.selection.getFirstRange(), t.model, i) : s && (i[dy("0xa")](o), i.removeMarker(r));
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [cy];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "UserMarkers";
            }
          }]);

          return uy;
        }(r, dy("0x14"), dy("0x10"), dy("0xc"));

        function hy(t, e, n, i) {
          var o = dy("0x4c") + t,
              r = dy("0x39") + t,
              s = e[dy("0xe")]();
          var a = e.start;
          s && s.is(dy("0x40"), "tableCell") && (a = function (t, e) {
            var _iterator506 = _createForOfIteratorHelper(t[dy("0x41")]()),
                _step506;

            try {
              for (_iterator506.s(); !(_step506 = _iterator506.n()).done;) {
                var _n323 = _step506.value;
                if (e[dy("0x28")][dy("0x13")](_n323, dy("0x26"))) return _n323;
              }
            } catch (err) {
              _iterator506.e(err);
            } finally {
              _iterator506.f();
            }
          }(e, n), e = i[dy("0x36")](a)), a = i[dy("0x36")](a), n[dy("0x3")][dy("0x3f")](o) ? (i[dy("0x19")](o, {
            range: e
          }), i.updateMarker(r, {
            range: a
          })) : (i[dy("0x3e")](o, {
            range: e,
            usingOperation: !0
          }), i.addMarker(r, {
            range: a,
            usingOperation: !0
          }));
        }

        var fy = n(85),
            gy = n.n(fy);
        var my = ["nested", "getDescriptor", "_description", "compress", "lookupType", "verify", "Root", "registerDescriptor", "encode", "build", "protobuffactory-cannot-get-descriptor-before-build", "create", "_protobuf", "toObject", "_protobufRoot"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(my, 303);

        var py = function py(t, e) {
          return my[t -= 0];
        };

        var by = /*#__PURE__*/function (_py, _py2, _py3) {
          function by() {
            _classCallCheck(this, by);

            this._description = {
              nested: {}
            };
          }

          _createClass(by, [{
            key: _py,
            value: function value(t, e) {
              this._description[py("0xc")][t] = va(e);
            }
          }, {
            key: _py2,
            value: function value() {
              this[py("0xb")] = gy.a[py("0x3")].fromJSON(this[py("0xe")]);
            }
          }, {
            key: _py3,
            value: function value(t) {
              if (!this[py("0xb")]) throw new rn["default"](py("0x7"), this);
              return new ky(this[py("0xb")][py("0x1")](t));
            }
          }]);

          return by;
        }(py("0x4"), py("0x6"), py("0xd"));

        var ky = /*#__PURE__*/function (_py4) {
          function ky(t) {
            _classCallCheck(this, ky);

            this._protobuf = t;
          }

          _createClass(ky, [{
            key: _py4,
            value: function value(t) {
              var e = this[py("0x9")][py("0x2")](t);
              if (e) throw Error(e);
              return this[py("0x9")][py("0x5")](this[py("0x9")][py("0x8")](t)).finish();
            }
          }, {
            key: "decompress",
            value: function decompress(t) {
              return this[py("0x9")][py("0xa")](this[py("0x9")].decode(t), {
                oneofs: !0
              });
            }
          }]);

          return ky;
        }(py("0x0"));

        var _y = ["repeated", "uint32", "string", "bool", "Position"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(_y, 480);

        var wy = function wy(t, e) {
          return _y[t -= 0];
        },
            vy = {
          Position: {
            fields: {
              root: {
                type: wy("0x2"),
                id: 1
              },
              rootMain: {
                type: wy("0x3"),
                id: 2
              },
              rootGraveyard: {
                type: wy("0x3"),
                id: 3
              },
              path: {
                rule: wy("0x0"),
                type: wy("0x1"),
                id: 4
              },
              stickiness: {
                type: wy("0x2"),
                id: 5
              }
            }
          },
          Range: {
            fields: {
              start: {
                type: wy("0x4"),
                id: 1
              },
              end: {
                type: wy("0x4"),
                id: 2
              }
            }
          },
          Element: {
            fields: {
              name: {
                type: wy("0x2"),
                id: 1
              },
              children: {
                rule: wy("0x0"),
                type: "Element",
                id: 2
              },
              data: {
                type: "string",
                id: 3
              },
              attributesBoolean: {
                keyType: wy("0x2"),
                type: wy("0x3"),
                id: 4
              },
              attributesJson: {
                type: "string",
                id: 5
              }
            }
          }
        };

        var yy = ["rootGraveyard", "nodes", "length", "root", "$graveyard", "main", "rootMain", "path"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(yy, 404);

        var xy = function xy(t, e) {
          return yy[t -= 0];
        };

        function Cy(t, e) {
          var n = va(t);
          return n[xy("0x3")][n[xy("0x3")][xy("0x6")] - 1] += e, n;
        }

        function Ty(t, e) {
          return t.root === e[xy("0x7")] && vc(t[xy("0x3")], e[xy("0x3")]);
        }

        function Ay(t) {
          Sy(t, function (t) {
            return "main" == t[xy("0x7")] ? (t[xy("0x2")] = !0, delete t[xy("0x7")]) : xy("0x0") == t[xy("0x7")] && (t[xy("0x4")] = !0, delete t[xy("0x7")]), t;
          });
        }

        function Ey(t) {
          Sy(t, function (t) {
            return t[xy("0x2")] ? (t[xy("0x7")] = xy("0x1"), delete t[xy("0x2")]) : t[xy("0x4")] && (t.root = xy("0x0"), delete t.rootGraveyard), t;
          });
        }

        function Sy(t, e) {
          for (var _n324 in t) {
            var _i260 = t[_n324];
            xy("0x5") !== _n324 && Object(Ae.a)(_i260) && (_i260[xy("0x3")] && (_i260[xy("0x7")] || _i260[xy("0x2")] || _i260[xy("0x4")]) ? t[_n324] = e(_i260) : Sy(_i260, e));
          }

          return t;
        }

        var Iy = ["types", "shift", "compress", "operationName", "__className", "_protobufDescriptor", "buffers", "decompress", "push"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Iy, 431);

        var Oy = function Oy(t, e) {
          return Iy[t -= 0];
        };

        var Ry = /*#__PURE__*/function (_Oy, _Oy2) {
          function Ry(t, e, n) {
            _classCallCheck(this, Ry);

            this.id = t, this.operationName = e, this[Oy("0x6")] = n;
          }

          _createClass(Ry, [{
            key: _Oy,
            value: function value(t, e) {
              var n = e[Oy("0x2")]();
              Ay(n), t[Oy("0x7")][Oy("0x0")](this[Oy("0x6")][Oy("0x3")](n)), t[Oy("0x1")][Oy("0x0")](this.id);
            }
          }, {
            key: _Oy2,
            value: function value(t, e) {
              e.types.shift();

              var n = this._protobufDescriptor[Oy("0x8")](e.buffers[Oy("0x2")]());

              Ey(n), n[Oy("0x5")] = this[Oy("0x4")], t.push(n);
            }
          }]);

          return Ry;
        }(Oy("0x3"), Oy("0x8"));

        var My = ["decompress", "oldValue", "parse", "newValue", "Boolean", "buffers", "_protobufDescriptor", "compress", "shift", "__className", "string", "bool", "push", "stringify", "description", "Json", "boolean"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(My, 168);

        var Py = function Py(t, e) {
          return My[t -= 0];
        };

        var Ny = /*#__PURE__*/function (_Ry, _Py, _Py2) {
          _inherits(Ny, _Ry);

          var _super291 = _createSuper(Ny);

          function Ny() {
            _classCallCheck(this, Ny);

            return _super291.apply(this, arguments);
          }

          _createClass(Ny, [{
            key: _Py2,
            value: function value(t, e) {
              var n = e[Py("0xa")]();
              Dy(Py("0x3"), n), Dy(Py("0x5"), n), Ay(n), t[Py("0x7")][Py("0xe")](this[Py("0x8")][Py("0x9")](n)), t.types[Py("0xe")](this.id);
            }
          }, {
            key: "decompress",
            value: function decompress(t, e) {
              var n = e.types,
                  i = e.buffers,
                  o = this[Py("0x8")][Py("0x2")](i.shift());
              n.shift(), jy("oldValue", o), jy(Py("0x5"), o), Ey(o), o[Py("0xb")] = this.operationName, t.push(o);
            }
          }], [{
            key: _Py,
            get: function get() {
              return {
                fields: {
                  range: {
                    type: "Range",
                    id: 1
                  },
                  key: {
                    type: Py("0xc"),
                    id: 2
                  },
                  oldValueBoolean: {
                    type: Py("0xd"),
                    id: 3
                  },
                  oldValueJson: {
                    type: Py("0xc"),
                    id: 4
                  },
                  newValueBoolean: {
                    type: Py("0xd"),
                    id: 5
                  },
                  newValueJson: {
                    type: Py("0xc"),
                    id: 6
                  },
                  wasUndone: {
                    type: Py("0xd"),
                    id: 7
                  }
                }
              };
            }
          }]);

          return Ny;
        }(Ry, Py("0x10"), Py("0x9"));

        function Dy(t, e) {
          var n = e[t];
          Py("0x1") == typeof n ? e[t + Py("0x6")] = n : e[t + Py("0x0")] = JSON[Py("0xf")](n);
        }

        function jy(t, e) {
          var n = t + Py("0x0");
          e[n] ? (e[t] = JSON[Py("0x4")](e[n]), delete e[n]) : (e[t] = e[t + Py("0x6")], delete e[t + "Boolean"]);
        }

        var By = ["description", "types", "boolean", "attributesJson", "children", "bool", "attributes", "every", "attributesBoolean", "push", "nodes", "parse", "repeated", "compress", "keys", "shift", "stringify", "decompress", "_protobufDescriptor"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(By, 479);

        var Ly = function Ly(t, e) {
          return By[t -= 0];
        };

        var zy = /*#__PURE__*/function (_Ry2, _Ly, _Ly2) {
          _inherits(zy, _Ry2);

          var _super292 = _createSuper(zy);

          function zy() {
            _classCallCheck(this, zy);

            return _super292.apply(this, arguments);
          }

          _createClass(zy, [{
            key: "compress",
            value: function compress(t, e) {
              var n = e[Ly("0xb")]();
              (function t(e) {
                var _iterator507 = _createForOfIteratorHelper(e),
                    _step507;

                try {
                  for (_iterator507.s(); !(_step507 = _iterator507.n()).done;) {
                    var _n325 = _step507.value;

                    if (_n325.attributes) {
                      var _t403 = _n325[Ly("0x2")];

                      Fy(_t403) ? _n325.attributesBoolean = _t403 : _n325[Ly("0x12")] = JSON[Ly("0xc")](_t403);
                    }

                    _n325[Ly("0x0")] && t(_n325[Ly("0x0")]);
                  }
                } catch (err) {
                  _iterator507.e(err);
                } finally {
                  _iterator507.f();
                }
              })(n[Ly("0x6")]), Ay(n), t.buffers[Ly("0x5")](this[Ly("0xe")][Ly("0x9")](n)), t[Ly("0x10")][Ly("0x5")](this.id);
            }
          }, {
            key: _Ly2,
            value: function value(t, e) {
              var n = e.types,
                  i = e.buffers,
                  o = this[Ly("0xe")].decompress(i[Ly("0xb")]());
              n[Ly("0xb")](), o[Ly("0x6")] || (o[Ly("0x6")] = []), function t(e) {
                var _iterator508 = _createForOfIteratorHelper(e),
                    _step508;

                try {
                  for (_iterator508.s(); !(_step508 = _iterator508.n()).done;) {
                    var _n326 = _step508.value;
                    (_n326.attributesBoolean || _n326[Ly("0x12")]) && (_n326[Ly("0x4")] ? (_n326[Ly("0x2")] = _n326[Ly("0x4")], delete _n326[Ly("0x4")]) : (_n326.attributes = JSON[Ly("0x7")](_n326[Ly("0x12")]), delete _n326[Ly("0x12")])), _n326[Ly("0x0")] && t(_n326[Ly("0x0")]);
                  }
                } catch (err) {
                  _iterator508.e(err);
                } finally {
                  _iterator508.f();
                }
              }(o.nodes), Ey(o), o.__className = this.operationName, t[Ly("0x5")](o);
            }
          }], [{
            key: _Ly,
            get: function get() {
              return {
                fields: {
                  position: {
                    type: "Position",
                    id: 1
                  },
                  nodes: {
                    rule: Ly("0x8"),
                    type: "Element",
                    id: 2
                  },
                  shouldReceiveAttributes: {
                    type: Ly("0x1"),
                    id: 3
                  },
                  wasUndone: {
                    type: Ly("0x1"),
                    id: 4
                  }
                }
              };
            }
          }]);

          return zy;
        }(Ry, Ly("0xf"), Ly("0xd"));

        function Fy(t) {
          return Object[Ly("0xa")](t)[Ly("0x3")](function (e) {
            return Ly("0x11") == typeof t[e];
          });
        }

        var Vy = ["bool", "newRange", "Range", "length", "description", "oldRange", "decompress"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Vy, 283);

        var Uy = function Uy(t, e) {
          return Vy[t -= 0];
        };

        var Hy = /*#__PURE__*/function (_Ry3, _Uy, _Uy2) {
          _inherits(Hy, _Ry3);

          var _super293 = _createSuper(Hy);

          function Hy() {
            _classCallCheck(this, Hy);

            return _super293.apply(this, arguments);
          }

          _createClass(Hy, [{
            key: _Uy2,
            value: function value(t, e) {
              _get3(_getPrototypeOf(Hy.prototype), "decompress", this).call(this, t, e);

              var n = t[t[Uy("0x0")] - 1];
              n[Uy("0x2")] || (n.oldRange = null), n[Uy("0x5")] || (n[Uy("0x5")] = null);
            }
          }], [{
            key: _Uy,
            get: function get() {
              return {
                fields: {
                  name: {
                    type: "string",
                    id: 1
                  },
                  oldRange: {
                    type: Uy("0x6"),
                    id: 2
                  },
                  newRange: {
                    type: Uy("0x6"),
                    id: 3
                  },
                  affectsData: {
                    type: Uy("0x4"),
                    id: 4
                  },
                  wasUndone: {
                    type: Uy("0x4"),
                    id: 5
                  }
                }
              };
            }
          }]);

          return Hy;
        }(Ry, Uy("0x1"), Uy("0x3"));

        var qy = ["Position", "bool", "uint32"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(qy, 316);

        var Wy = function Wy(t, e) {
          return qy[t -= 0];
        };

        var $y = /*#__PURE__*/function (_Ry4) {
          _inherits($y, _Ry4);

          var _super294 = _createSuper($y);

          function $y() {
            _classCallCheck(this, $y);

            return _super294.apply(this, arguments);
          }

          _createClass($y, null, [{
            key: "description",
            get: function get() {
              return {
                fields: {
                  sourcePosition: {
                    type: "Position",
                    id: 1
                  },
                  targetPosition: {
                    type: "Position",
                    id: 2
                  },
                  graveyardPosition: {
                    type: Wy("0x2"),
                    id: 3
                  },
                  howMany: {
                    type: Wy("0x1"),
                    id: 4
                  },
                  wasUndone: {
                    type: Wy("0x0"),
                    id: 5
                  }
                }
              };
            }
          }]);

          return $y;
        }(Ry);

        var Yy = ["uint32", "Position"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Yy, 406);

        var Jy = function Jy(t, e) {
          return Yy[t -= 0];
        };

        var Gy = /*#__PURE__*/function (_Ry5) {
          _inherits(Gy, _Ry5);

          var _super295 = _createSuper(Gy);

          function Gy() {
            _classCallCheck(this, Gy);

            return _super295.apply(this, arguments);
          }

          _createClass(Gy, null, [{
            key: "description",
            get: function get() {
              return {
                fields: {
                  sourcePosition: {
                    type: Jy("0x1"),
                    id: 1
                  },
                  howMany: {
                    type: Jy("0x0"),
                    id: 2
                  },
                  targetPosition: {
                    type: Jy("0x1"),
                    id: 3
                  },
                  wasUndone: {
                    type: "bool",
                    id: 4
                  }
                }
              };
            }
          }]);

          return Gy;
        }(Ry);

        var Ky = ["Position", "bool", "string"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Ky, 393);

        var Qy = function Qy(t, e) {
          return Ky[t -= 0];
        };

        var Xy = /*#__PURE__*/function (_Ry6) {
          _inherits(Xy, _Ry6);

          var _super296 = _createSuper(Xy);

          function Xy() {
            _classCallCheck(this, Xy);

            return _super296.apply(this, arguments);
          }

          _createClass(Xy, null, [{
            key: "description",
            get: function get() {
              return {
                fields: {
                  position: {
                    type: Qy("0x0"),
                    id: 1
                  },
                  oldName: {
                    type: Qy("0x2"),
                    id: 2
                  },
                  newName: {
                    type: "string",
                    id: 3
                  },
                  wasUndone: {
                    type: Qy("0x1"),
                    id: 4
                  }
                }
              };
            }
          }]);

          return Xy;
        }(Ry);

        var Zy = ["root", "fields", "range", "string", "description"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Zy, 286);

        var tx = function tx(t, e) {
          return Zy[t -= 0];
        };

        var ex = /*#__PURE__*/function (_Ny) {
          _inherits(ex, _Ny);

          var _super297 = _createSuper(ex);

          function ex() {
            _classCallCheck(this, ex);

            return _super297.apply(this, arguments);
          }

          _createClass(ex, null, [{
            key: "description",
            get: function get() {
              var t = Ny[tx("0x3")];
              return delete t[tx("0x0")][tx("0x1")], t[tx("0x0")][tx("0x4")] = {
                type: tx("0x2"),
                id: 1
              }, t;
            }
          }]);

          return ex;
        }(Ny);

        var nx = ["bool", "uint32", "Position", "description"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(nx, 109);

        var ix = function ix(t, e) {
          return nx[t -= 0];
        };

        var ox = /*#__PURE__*/function (_Ry7, _ix) {
          _inherits(ox, _Ry7);

          var _super298 = _createSuper(ox);

          function ox() {
            _classCallCheck(this, ox);

            return _super298.apply(this, arguments);
          }

          _createClass(ox, null, [{
            key: _ix,
            get: function get() {
              return {
                fields: {
                  splitPosition: {
                    type: ix("0x1"),
                    id: 1
                  },
                  graveyardPosition: {
                    type: "Position",
                    id: 2
                  },
                  howMany: {
                    type: ix("0x0"),
                    id: 3
                  },
                  insertionPosition: {
                    type: "Position",
                    id: 4
                  },
                  wasUndone: {
                    type: ix("0x3"),
                    id: 5
                  }
                }
              };
            }
          }]);

          return ox;
        }(Ry, ix("0x2"));

        var rx = ["types", "push", "operationName", "compress"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(rx, 328);

        var sx = function sx(t, e) {
          return rx[t -= 0];
        };

        var ax = /*#__PURE__*/function (_Ry8, _sx) {
          _inherits(ax, _Ry8);

          var _super299 = _createSuper(ax);

          function ax() {
            _classCallCheck(this, ax);

            return _super299.apply(this, arguments);
          }

          _createClass(ax, [{
            key: _sx,
            value: function value(t, e) {
              e.shift(), t.types.push(this.id);
            }
          }, {
            key: "decompress",
            value: function decompress(t, e) {
              e[sx("0x0")].shift(), t[sx("0x1")]({
                __className: this[sx("0x2")]
              });
            }
          }]);

          return ax;
        }(Ry, sx("0x3"));

        var cx = ["MarkerOperation", "startsWith", "compress", "_omittedNamespace", "name", "replace", "length", "decompress"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(cx, 385);

        var lx = function lx(t, e) {
          return cx[t -= 0];
        };

        var dx = /*#__PURE__*/function (_Hy, _lx, _lx2) {
          _inherits(dx, _Hy);

          var _super300 = _createSuper(dx);

          function dx(t, e, n, i) {
            var _this403;

            _classCallCheck(this, dx);

            _this403 = _super300.call(this, t, e, n), _this403._omittedNamespace = i + ":";
            return _this403;
          }

          _createClass(dx, [{
            key: _lx,
            value: function value(t, e) {
              return !(lx("0x7") != e[0].__className || !e[0].name[lx("0x0")](this[lx("0x2")]) || (e[0][lx("0x3")] = e[0][lx("0x3")][lx("0x4")](new RegExp("^" + this._omittedNamespace), ""), _get3(_getPrototypeOf(dx.prototype), lx("0x1"), this).call(this, t, e), 0));
            }
          }, {
            key: _lx2,
            value: function value(t, e) {
              _get3(_getPrototypeOf(dx.prototype), lx("0x6"), this).call(this, t, e);

              var n = t[t[lx("0x5")] - 1];
              n[lx("0x3")] = this[lx("0x2")] + n[lx("0x3")];
            }
          }]);

          return dx;
        }(Hy, lx("0x1"), lx("0x6"));

        var ux = ["_compressSingleOperation", "shift", "decompress", "_context", "_decompressSingleOperation", "_splitCurrent", "_combineNext", "buffers", "length", "types", "push", "compress"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(ux, 450);

        var hx = function hx(t, e) {
          return ux[t -= 0];
        };

        var fx = /*#__PURE__*/function (_hx, _hx2) {
          function fx(t, e) {
            _classCallCheck(this, fx);

            this.id = t, this[hx("0x9")] = e;
          }

          _createClass(fx, [{
            key: _hx,
            value: function value(t, e) {
              var n;

              for (; e[hx("0x2")] > 1 && this._compareOperations(e[0], e[1]);) {
                n ? (n = this[hx("0x0")](e[hx("0x7")](), n), t.types.push(0)) : (n = va(e[hx("0x7")]()), t[hx("0x3")].push(this.id));
              }

              return !!n && (n = this._combineNext(e[hx("0x7")](), n), t[hx("0x3")][hx("0x4")](0), t[hx("0x1")][hx("0x4")](this[hx("0x6")](n)), !0);
            }
          }, {
            key: _hx2,
            value: function value(t, e) {
              var n = this[hx("0xa")](e);

              for (; 0 == e[hx("0x3")][0];) {
                e[hx("0x3")].shift(), t.push(this[hx("0xb")](n));
              }

              t[hx("0x4")](n);
            }
          }]);

          return fx;
        }(hx("0x5"), hx("0x8"));

        var gx = ["_splitCurrent", "length", "from", "_compareOperations", "_context", "_decompressSingleOperation", "_getCompressorByName", "keys", "data", "attributes", "every", "position", "InsertOperation", "substr", "nodes", "wasUndone", "decompress"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(gx, 332);

        var mx = function mx(t, e) {
          return gx[t -= 0];
        };

        var px = /*#__PURE__*/function (_fx, _mx, _mx2, _mx3) {
          _inherits(px, _fx);

          var _super301 = _createSuper(px);

          function px() {
            _classCallCheck(this, px);

            return _super301.apply(this, arguments);
          }

          _createClass(px, [{
            key: "_combineNext",
            value: function _combineNext(t, e) {
              return e[mx("0x5")][0][mx("0x10")] += t.nodes[0][mx("0x10")], e;
            }
          }, {
            key: _mx,
            value: function value(t) {
              var e = va(t),
                  n = e[mx("0x5")][0],
                  i = t[mx("0x5")][0],
                  o = Array[mx("0xa")](i.data)[0],
                  r = o[mx("0x9")];
              return n[mx("0x10")] = o, i[mx("0x10")] = i[mx("0x10")][mx("0x4")](r), t[mx("0x2")] = Cy(t[mx("0x2")], r), e;
            }
          }, {
            key: _mx2,
            value: function value(t, e) {
              if (bx(t) && bx(e)) {
                var _n327 = t.nodes[0][mx("0x10")].length,
                    _i261 = Ty(Cy(t[mx("0x2")], _n327), e[mx("0x2")]),
                    _o137 = t.nodes[0],
                    _r174 = e[mx("0x5")][0];

                return _i261 && function (t, e) {
                  var n = Object[mx("0xf")](t[mx("0x0")] || {}),
                      i = Object[mx("0xf")](e[mx("0x0")] || {});
                  return n.length === i[mx("0x9")] && n[mx("0x1")](function (n) {
                    return e[mx("0x0")][n] && e[mx("0x0")][n] === t[mx("0x0")][n];
                  });
                }(_o137, _r174);
              }

              return !1;
            }
          }, {
            key: "_compressSingleOperation",
            value: function _compressSingleOperation(t) {
              var e = {
                types: [],
                buffers: [],
                baseVersion: 0
              };
              return this[mx("0xc")][mx("0xe")]("InsertOperation").compress(e, [t]), e.buffers[0];
            }
          }, {
            key: _mx3,
            value: function value(t) {
              var e = [];
              return this._context._getCompressorByName(mx("0x3"))[mx("0x7")](e, t), e[0];
            }
          }]);

          return px;
        }(fx, mx("0x8"), mx("0xb"), mx("0xd"));

        function bx(t) {
          return mx("0x3") == t.__className && 1 == t[mx("0x5")].length && t[mx("0x5")][0][mx("0x10")] && !t[mx("0x6")] && 1 == Array[mx("0xa")](t.nodes[0][mx("0x10")])[mx("0x9")];
        }

        var kx = ["MoveOperation", "sourcePosition", "_getCompressorByName", "_compressSingleOperation", "root", "targetPosition", "$graveyard", "_combineNext", "buffers", "howMany", "_splitCurrent", "decompress", "_context"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(kx, 263);

        var _x = function _x(t, e) {
          return kx[t -= 0];
        };

        var wx = /*#__PURE__*/function (_fx2, _x48, _x49, _x50) {
          _inherits(wx, _fx2);

          var _super302 = _createSuper(wx);

          function wx() {
            _classCallCheck(this, wx);

            return _super302.apply(this, arguments);
          }

          _createClass(wx, [{
            key: _x48,
            value: function value(t, e) {
              return e[_x("0x6")]++, e.sourcePosition = va(t[_x("0xb")]), e;
            }
          }, {
            key: _x49,
            value: function value(t) {
              var e = va(t);
              return t[_x("0x6")]--, e[_x("0x6")] = 1, e.sourcePosition = Cy(e[_x("0xb")], t[_x("0x6")]), e;
            }
          }, {
            key: "_compareOperations",
            value: function _compareOperations(t, e) {
              return !(!vx(t) || !vx(e)) && Ty(Cy(t[_x("0xb")], -1), e.sourcePosition) && Ty(t.targetPosition, e.targetPosition);
            }
          }, {
            key: _x50,
            value: function value(t) {
              var e = {
                types: [],
                buffers: [],
                baseVersion: 0
              };
              return this[_x("0x9")][_x("0xc")](_x("0xa")).compress(e, [t]), e[_x("0x5")][0];
            }
          }, {
            key: "_decompressSingleOperation",
            value: function _decompressSingleOperation(t) {
              var e = [];
              return this[_x("0x9")]._getCompressorByName(_x("0xa"))[_x("0x8")](e, t), e[0];
            }
          }]);

          return wx;
        }(fx, _x("0x4"), _x("0x7"), _x("0x0"));

        function vx(t) {
          return _x("0xa") == t.__className && _x("0x3") == t[_x("0x2")][_x("0x1")] && 1 == t.howMany && !t.wasUndone;
        }

        var yx = ["howMany", "root", "_compressSingleOperation", "decompress", "buffers", "__className", "_decompressSingleOperation", "targetPosition", "wasUndone", "_splitCurrent", "_getCompressorByName", "MoveOperation", "$graveyard", "sourcePosition", "_compareOperations"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(yx, 102);

        var xx = function xx(t, e) {
          return yx[t -= 0];
        };

        var Cx = /*#__PURE__*/function (_fx3, _xx, _xx2, _xx3, _xx4) {
          _inherits(Cx, _fx3);

          var _super303 = _createSuper(Cx);

          function Cx() {
            _classCallCheck(this, Cx);

            return _super303.apply(this, arguments);
          }

          _createClass(Cx, [{
            key: "_combineNext",
            value: function _combineNext(t, e) {
              return e[xx("0x3")]++, e;
            }
          }, {
            key: _xx,
            value: function value(t) {
              var e = va(t);
              return e[xx("0x3")] = 1, t.howMany--, e;
            }
          }, {
            key: _xx2,
            value: function value(t, e) {
              return !(!Tx(t) || !Tx(e)) && Ty(t.sourcePosition, e[xx("0x1")]) && Ty(t[xx("0xa")], e.targetPosition);
            }
          }, {
            key: _xx3,
            value: function value(t) {
              var e = {
                types: [],
                buffers: [],
                baseVersion: 0
              };
              return this._context[xx("0xd")](xx("0xe")).compress(e, [t]), e[xx("0x7")][0];
            }
          }, {
            key: _xx4,
            value: function value(t) {
              var e = [];
              return this._context._getCompressorByName(xx("0xe"))[xx("0x6")](e, t), e[0];
            }
          }]);

          return Cx;
        }(fx, xx("0xc"), xx("0x2"), xx("0x5"), xx("0x9"));

        function Tx(t) {
          return xx("0xe") == t[xx("0x8")] && xx("0x0") == t[xx("0xa")][xx("0x4")] && 1 == t[xx("0x3")] && !t[xx("0xb")];
        }

        var Ax = ["name", "decompress", "MarkerOperation", "split", "_getCompressorByName", "end", "toNone", "buffers", "_context", "stickiness", "types", "_decompressSingleOperation", "push", "start", "startsWith", "newRange", "user:", "shift", "_compressSingleOperation", "__className", "compress", "oldRange"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Ax, 239);

        var Ex = function Ex(t, e) {
          return Ax[t -= 0];
        };

        var Sx = /*#__PURE__*/function (_fx4, _Ex, _Ex2) {
          _inherits(Sx, _fx4);

          var _super304 = _createSuper(Sx);

          function Sx() {
            _classCallCheck(this, Sx);

            return _super304.apply(this, arguments);
          }

          _createClass(Sx, [{
            key: _Ex,
            value: function value(t, e) {
              if (!function (t, e) {
                return !(!t || !e) && Ex("0x5") == t[Ex("0x0")] && Ex("0x5") == e[Ex("0x0")] && !(!t[Ex("0x3")].startsWith(Ex("0x13")) || !e[Ex("0x3")][Ex("0x11")]("user:") || t[Ex("0x3")] == e[Ex("0x3")]);
              }(e[0], e[1])) return !1;
              var n = e[Ex("0x14")]();
              return n[Ex("0x2")] = null, n[Ex("0x12")] && Ty(n[Ex("0x12")][Ex("0x10")], n[Ex("0x12")][Ex("0x8")]) && (n[Ex("0x12")][Ex("0x8")] = null), e[Ex("0x14")](), t[Ex("0xd")][Ex("0xf")](this.id), t[Ex("0xd")].push(0), t.buffers[Ex("0xf")](this[Ex("0x15")](n)), !0;
            }
          }, {
            key: "decompress",
            value: function decompress(t, e) {
              var n = this[Ex("0xe")](e);
              n[Ex("0x12")] && !n.newRange[Ex("0x8")] && (n[Ex("0x12")][Ex("0x8")] = va(n[Ex("0x12")][Ex("0x10")]));
              var i = va(n);
              i[Ex("0x12")] && (i[Ex("0x12")].start[Ex("0xc")] = Ex("0x9"), i[Ex("0x12")][Ex("0x8")] = va(i[Ex("0x12")].start)), i.name = "user:position:" + i[Ex("0x3")][Ex("0x6")](":")[2], e.types[Ex("0x14")](), t[Ex("0xf")](n), t[Ex("0xf")](i);
            }
          }, {
            key: "_compressSingleOperation",
            value: function _compressSingleOperation(t) {
              var e = {
                types: [],
                buffers: [],
                baseVersion: 0
              };
              return this[Ex("0xb")][Ex("0x7")](Ex("0x5"))[Ex("0x1")](e, [t]), e[Ex("0xa")][0];
            }
          }, {
            key: _Ex2,
            value: function value(t) {
              var e = [];
              return this[Ex("0xb")][Ex("0x7")]("MarkerOperation")[Ex("0x4")](e, t), e[0];
            }
          }]);

          return Sx;
        }(fx, Ex("0x1"), Ex("0xe"));

        var Ix = ["UserSelectionAction", "RootAttributeOperation", "NoOperation", "_registerActionCompressor", "Element", "description", "_registerCompressor", "MarkerOperation", "ForwardDeletingAction", "types", "InsertOperation", "SuggestionMarkerOperation", "comment", "_getCompressorByName", "TypingAction", "length", "DeletingAction", "set", "SplitOperation", "AttributeOperation", "baseVersion", "MergeOperation", "registerDescriptor", "RenameOperation", "Position", "getDescriptor", "_compressorById", "Range", "MoveOperation", "decompress", "_compressorByName", "CommentMarkerOperation", "_protobufFactory", "compress", "_registerOperationCompressor", "suggestion"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Ix, 469);

        var Ox = function Ox(t, e) {
          return Ix[t -= 0];
        };

        var Rx = /*#__PURE__*/function (_Ox, _Ox2, _Ox3, _Ox4, _Ox5, _Ox6) {
          function Rx() {
            _classCallCheck(this, Rx);

            this[Ox("0x19")] = new Map(), this[Ox("0x1d")] = new Map(), this._protobufFactory = new by(), this._protobufFactory.registerDescriptor(Ox("0x17"), vy[Ox("0x17")]), this[Ox("0x1f")][Ox("0x15")](Ox("0x1a"), vy[Ox("0x1a")]), this[Ox("0x1f")][Ox("0x15")](Ox("0x3"), vy[Ox("0x3")]), this[Ox("0x1f")][Ox("0x15")]("AttributeOperation", Ny[Ox("0x4")]), this[Ox("0x1f")][Ox("0x15")](Ox("0x9"), zy[Ox("0x4")]), this._protobufFactory[Ox("0x15")]("MarkerOperation", Hy[Ox("0x4")]), this[Ox("0x1f")][Ox("0x15")]("MergeOperation", $y[Ox("0x4")]), this._protobufFactory[Ox("0x15")](Ox("0x1b"), Gy.description), this._protobufFactory.registerDescriptor(Ox("0x16"), Xy[Ox("0x4")]), this[Ox("0x1f")][Ox("0x15")]("RootAttributeOperation", ex[Ox("0x4")]), this[Ox("0x1f")].registerDescriptor(Ox("0x11"), ox[Ox("0x4")]), this[Ox("0x1f")].build(), this[Ox("0x5")](1, Ox("0x1"), new ax(1, "NoOperation")), this._registerOperationCompressor(10, Ox("0x12"), Ny), this._registerOperationCompressor(11, "InsertOperation", zy), this[Ox("0x21")](12, Ox("0x6"), Hy), this[Ox("0x21")](13, Ox("0x14"), $y), this[Ox("0x21")](14, Ox("0x1b"), Gy), this._registerOperationCompressor(15, "RenameOperation", Xy), this._registerOperationCompressor(16, Ox("0x0"), ex), this[Ox("0x21")](17, Ox("0x11"), ox);
            var t = this[Ox("0x1f")][Ox("0x18")](Ox("0x6"));
            this[Ox("0x5")](18, Ox("0x1e"), new dx(18, Ox("0x6"), t, Ox("0xb"))), this[Ox("0x5")](19, Ox("0xa"), new dx(19, "MarkerOperation", t, Ox("0x22"))), this[Ox("0x2")](100, "TypingAction", px), this._registerActionCompressor(101, Ox("0xf"), wx), this._registerActionCompressor(102, Ox("0x7"), Cx), this[Ox("0x2")](103, Ox("0x23"), Sx);
          }

          _createClass(Rx, [{
            key: _Ox,
            value: function value(t, e, n) {
              var i = new n(t, e, this._protobufFactory[Ox("0x18")](e));

              this._registerCompressor(t, e, i);
            }
          }, {
            key: _Ox2,
            value: function value(t, e, n) {
              var i = new n(t, this);

              this._registerCompressor(t, e, i);
            }
          }, {
            key: _Ox3,
            value: function value(t, e, n) {
              this[Ox("0x19")][Ox("0x10")](t, n), this[Ox("0x1d")].set(e, n);
            }
          }, {
            key: _Ox4,
            value: function value(t) {
              return this._compressorByName.get(t);
            }
          }, {
            key: _Ox5,
            value: function value(t) {
              if (!t || !t[0]) throw new rn["default"]("no-operations-provided", this);
              var e = {
                types: [],
                buffers: [],
                baseVersion: t[0][Ox("0x13")]
              };

              for (; t[Ox("0xe")];) {
                this[Ox("0xc")](Ox("0x23"))[Ox("0x20")](e, t) || this[Ox("0xc")](Ox("0xd"))[Ox("0x20")](e, t) || this._getCompressorByName(Ox("0xf"))[Ox("0x20")](e, t) || this[Ox("0xc")]("ForwardDeletingAction")[Ox("0x20")](e, t) || this._getCompressorByName(Ox("0x1e"))[Ox("0x20")](e, t) || this[Ox("0xc")](Ox("0xa"))[Ox("0x20")](e, t) || this._getCompressorByName(t[0].__className)[Ox("0x20")](e, t);
              }

              return e;
            }
          }, {
            key: _Ox6,
            value: function value(t) {
              var e = [];

              for (; t[Ox("0x8")][Ox("0xe")];) {
                this[Ox("0x19")].get(t[Ox("0x8")][0])[Ox("0x1c")](e, t);
              }

              return e.forEach(function (e, n) {
                return e[Ox("0x13")] = t.baseVersion + n;
              }), e;
            }
          }]);

          return Rx;
        }(Ox("0x21"), Ox("0x2"), Ox("0x5"), Ox("0xc"), Ox("0x20"), Ox("0x1c"));

        var Mx = n(173),
            Px = n.n(Mx);
        var Nx = 1;

        var Dx = /*#__PURE__*/function (_r175) {
          _inherits(Dx, _r175);

          var _super305 = _createSuper(Dx);

          function Dx() {
            _classCallCheck(this, Dx);

            return _super305.apply(this, arguments);
          }

          _createClass(Dx, [{
            key: "cloudDocumentVersion",
            get: function get() {
              return this.lastSyncVersion + this.offset;
            }
          }, {
            key: "init",
            value: function init() {
              var _this404 = this;

              var t = this.editor,
                  e = t.plugins.get(iy),
                  n = t.plugins.get(Zv);
              if (this.lastSyncVersion = 0, this.offset = 0, this._channelId = t.config.get("collaboration.channelId"), !this._channelId) throw new rn["default"]("collaboration-missing-channelid", this);
              this.listenTo(e, "getOperationAuthor", function (t, n) {
                var i = n[0];
                i._authorId && (t["return"] = e.getUser(i._authorId), t.stop()), null === i._authorId && (t["return"] = null, t.stop());
              }, {
                priority: "high"
              });
              var i = t.config.get("cloudServices.bundleVersion") || kn.a;
              this._service = new Dx.CollaborativeEditingService(i, this._channelId), this._document = this.editor.model.document, this._compressor = new Rx(), this._bufferedOperations = new Set(), this._knownOperations = new WeakSet(), this.set("_isPendingUpdate", !1), this._pendingAction = null, this._hasSelectionChanged = !1, this._sendBufferedOperationsDelayId = null, this.listenTo(t.model.document.selection, "change:range", function (t, e) {
                e.directChange && _this404._refreshUserSelectionMarkers();
              }), this.listenTo(t.editing.view, "change:hasDomSelection", function () {
                _this404._refreshUserSelectionMarkers();
              }), Dx.CollaborativeEditingService.getConnectedSessions(n.connection, this._channelId).then(function (t) {
                return _this404._initSessionsHandling(t);
              })["catch"](function (t) {
                _this404._crash("realtimecollaborationclient-init-session-connection-error", t);
              }), this._initThrowingOnDataSet(), this._initService(), t.plugins.get(Zv).addToReconnectionStack(this), t.model.on("applyOperation", function (t, e) {
                var n = e[0];
                n.isDocumentOperation && (_this404._saveOperationInBuffer(n), _this404._shouldSendUpdate() && _this404._sendBufferedOperationsDelayed());
              }), this._setUpDataInit(), this.editor.bind("isReadOnly").to(n, "state", function (t) {
                return "connected" !== t;
              });
            }
          }, {
            key: "reconnect",
            value: function () {
              var _reconnect2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee36() {
                var t, e, n, i;
                return regeneratorRuntime.wrap(function _callee36$(_context73) {
                  while (1) {
                    switch (_context73.prev = _context73.next) {
                      case 0:
                        t = this.editor.plugins.get(cy), e = this.editor.plugins.get(Zv);
                        t.unregister(this._channelId);
                        _context73.next = 4;
                        return this._service.reconnect(e.connection, this.lastSyncVersion);

                      case 4:
                        n = _context73.sent;

                        this._handleServerResponse([], Object.assign({}, n, {
                          data: n.data,
                          wereChangesApplied: !1
                        }), "reconnect");

                        _context73.next = 8;
                        return Dx.CollaborativeEditingService.getConnectedSessions(e.connection, this._channelId);

                      case 8:
                        i = _context73.sent;
                        t.register(this._channelId, i), this._isPendingUpdate = !1;

                      case 10:
                      case "end":
                        return _context73.stop();
                    }
                  }
                }, _callee36, this);
              }));

              function reconnect() {
                return _reconnect2.apply(this, arguments);
              }

              return reconnect;
            }()
          }, {
            key: "destroy",
            value: function destroy() {
              var t = this.editor.plugins.get(Zv),
                  e = this.editor.plugins.get(cy);
              this.editor.isReadOnly = !0, e.channelSessions.has(this._channelId) && e.unregister(this._channelId), _get3(_getPrototypeOf(Dx.prototype), "destroy", this).call(this), t.removeFromReconnectionStack(this), clearTimeout(this._sendBufferedOperationsDelayId);
            }
          }, {
            key: "_initSessionsHandling",
            value: function _initSessionsHandling(t) {
              var _this405 = this;

              var e = this.editor.plugins.get(cy);
              this.listenTo(e, "sessionAdd:" + this._channelId, function (t, _ref101) {
                var n = _ref101.session;

                if (n.id === e.mySessionId) {
                  t.off();

                  var _e361 = _this405.editor.plugins.has("CommentsOnly") && _this405.editor.plugins.get("CommentsOnly");

                  var _i262 = n.permissions;
                  _e361 && _e361.isEnabled && (_i262 = _i262.filter(function (t) {
                    return "document:write" !== t;
                  })), _this405.editor.plugins.get("Permissions").setPermissions(_i262, _this405._channelId);
                }
              }), e.register(this._channelId, t);
            }
          }, {
            key: "_initThrowingOnDataSet",
            value: function _initThrowingOnDataSet() {
              var _this406 = this;

              var t = this.editor.data.set;

              this.editor.data.set = function () {
                for (var _len33 = arguments.length, e = new Array(_len33), _key33 = 0; _key33 < _len33; _key33++) {
                  e[_key33] = arguments[_key33];
                }

                if (!e[e.length - 1].suppressErrorInCollaboration) throw new rn["default"]("realtimecollaborationclient-editor-setdata-and-editor-data-set-are-forbidden-in-real-time-collaboration", _this406);
                t.apply(_this406.editor.data, e);
              };
            }
          }, {
            key: "_initService",
            value: function _initService() {
              var _this407 = this;

              this.listenTo(this._service, "operationsReceived", function (t, e, n, i) {
                if (!_this407._isPendingUpdate && _this407._document.version == e) {
                  var _t404 = _this407._decompressOperations(n);

                  _this407._assignOperationAuthors(_t404, i), _this407.lastSyncVersion = e + _t404.length, _this407._handleExternalOperations(_t404) || _this407._crash("realtimecollaborationclient-initservice-incorrect-server-operation");
                }
              }), this.listenTo(this._service, "error", function (t, e) {
                _this407._crash("realtimecollaborationclient-initservice-internal-error", e);
              });
            }
          }, {
            key: "_setUpDataInit",
            value: function _setUpDataInit() {
              var _this408 = this;

              var _this$editor$plugins$ = this.editor.plugins.get(Zv),
                  t = _this$editor$plugins$.connection;

              this.editor.data.on("init", function (e, _ref102) {
                var _ref103 = _slicedToArray(_ref102, 1),
                    n = _ref103[0];

                if (_this408._document.version) throw new rn["default"]("realtimecollaborationclient-init-document-already-initialized", _this408);
                e.stop();

                var i = _this408._getOperationsFromInitData(n);

                _this408._setPendingAction(), e["return"] = _this408._service.connect(t, _this408._compressOperations(i)).then(function (t) {
                  _this408._clearPendingAction(), _this408._handleConnectionData(t, i);

                  var e = _this408.editor.plugins.get(cy),
                      n = e.channelSessions.get(_this408._channelId);

                  n && n.length > 1 ? (_this408._hasSelectionChanged = !0, _this408._sendBufferedOperationsDelayed()) : e.on("sessionAdd:" + _this408._channelId, function (t) {
                    e.channelSessions.get(_this408._channelId).length > 1 && (_this408._hasSelectionChanged = !0, _this408._sendBufferedOperationsDelayed(), t.off());
                  }), _this408.editor.data.fire("ready");
                })["catch"](function (t) {
                  return _this408._crash("realtimecollaborationclient-init-connection-failed", t);
                });
              }, {
                priority: "high"
              });
            }
          }, {
            key: "_getOperationsFromInitData",
            value: function _getOperationsFromInitData(t) {
              var e = this.editor.model,
                  n = [];
              var i = 0;
              var o = "string" == typeof t ? {
                main: t
              } : t;

              for (var _i263 = 0, _Object$keys5 = Object.keys(o); _i263 < _Object$keys5.length; _i263++) {
                var _t405 = _Object$keys5[_i263];
                if (!this._document.roots.has(_t405)) throw new rn["default"]("realtimecollaborationclient-init-non-existent-root", this);

                var _r176 = this.editor.data.parse(o[_t405]),
                    _s50 = this._document.getRoot(_t405),
                    _a75 = new Tc(e.createPositionAt(_s50, 0), _r176, i++);

                n.push(_a75);

                var _iterator509 = _createForOfIteratorHelper(_r176.markers),
                    _step509;

                try {
                  for (_iterator509.s(); !(_step509 = _iterator509.n()).done;) {
                    var _step509$value = _slicedToArray(_step509.value, 2),
                        _t406 = _step509$value[0],
                        _o138 = _step509$value[1];

                    var _r177 = e.createRange(e.createPositionFromPath(_s50, _o138.start.path.slice()), e.createPositionFromPath(_s50, _o138.end.path.slice())),
                        _a76 = new Ac(_t406, null, _r177, e.markers, !0, i++);

                    n.push(_a76);
                  }
                } catch (err) {
                  _iterator509.e(err);
                } finally {
                  _iterator509.f();
                }
              }

              return n;
            }
          }, {
            key: "_handleConnectionData",
            value: function _handleConnectionData(t, e) {
              var n;
              this.offset = t.offset;
              var i = t.wereChangesApplied && !t.initData;
              if (i) n = e;else {
                if (t.initData) {
                  var _e362 = this._getOperationsFromInitData(t.initData);

                  this._document.version = -_e362.length, _e362.forEach(function (t) {
                    t.baseVersion -= _e362.length;
                  }), this._applyOperationsSet(_e362, !0);
                }

                this._document.version = t.data.baseVersion, n = this._decompressOperations(t.data), this._assignOperationAuthors(n, t.metadata);
              }
              this.lastSyncVersion = t.version, this._applyOperationsSet(n, i);
            }
          }, {
            key: "_crash",
            value: function _crash(t, e) {
              throw this._isPendingUpdate = !0, e && console.error(e), new rn["default"](t, this.editor);
            }
          }, {
            key: "_saveOperationInBuffer",
            value: function _saveOperationInBuffer(t) {
              this._knownOperations.has(t) || (this._knownOperations.add(t), this._bufferedOperations.add(t), this._pendingAction || "marker" == t.type && !t.affectsData || this._setPendingAction());
            }
          }, {
            key: "_refreshUserSelectionMarkers",
            value: function _refreshUserSelectionMarkers() {
              this._hasSelectionChanged = !0, this._shouldSendSelectionUpdate() && this._sendBufferedOperationsDelayed();
            }
          }, {
            key: "_shouldSendSelectionUpdate",
            value: function _shouldSendSelectionUpdate() {
              var t = this.editor.plugins.get(cy).channelSessions.get(this._channelId);
              return !this.editor.isReadOnly && t && t.length > 1 && this._hasSelectionChanged;
            }
          }, {
            key: "_shouldSendUpdate",
            value: function _shouldSendUpdate() {
              return this._bufferedOperations.size > 0 || this._shouldSendSelectionUpdate();
            }
          }, {
            key: "_sendBufferedOperations",
            value: function () {
              var _sendBufferedOperations2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee37() {
                var t, e, _i264, _e363, _t407, n, i;

                return regeneratorRuntime.wrap(function _callee37$(_context74) {
                  while (1) {
                    switch (_context74.prev = _context74.next) {
                      case 0:
                        t = this.editor.plugins.get(uy);

                        if (!(this._shouldSendSelectionUpdate() && (t.createUserMarkerOperations(), this._hasSelectionChanged = !1), !this._shouldSendUpdate())) {
                          _context74.next = 3;
                          break;
                        }

                        return _context74.abrupt("return", Promise.resolve(!0));

                      case 3:
                        e = Array.from(this._bufferedOperations);

                        for (_i264 = 0, _e363 = e; _i264 < _e363.length; _i264++) {
                          _t407 = _e363[_i264];
                          _t407.wasUndone = this._document.history.isUndoneOperation(_t407);
                        }

                        n = Nx++;
                        _context74.next = 8;
                        return this._service.sendOperations(this._compressOperations(e), this.lastSyncVersion);

                      case 8:
                        i = _context74.sent;
                        _context74.prev = 9;
                        return _context74.abrupt("return", this._handleServerResponse(e, i, n));

                      case 13:
                        _context74.prev = 13;
                        _context74.t0 = _context74["catch"](9);
                        return _context74.abrupt("return", this._crash("realtimecollaborationclient-sendbufferedoperations", _context74.t0));

                      case 16:
                      case "end":
                        return _context74.stop();
                    }
                  }
                }, _callee37, this, [[9, 13]]);
              }));

              function _sendBufferedOperations() {
                return _sendBufferedOperations2.apply(this, arguments);
              }

              return _sendBufferedOperations;
            }()
          }, {
            key: "_sendBufferedOperationsDelayed",
            value: function _sendBufferedOperationsDelayed() {
              var _this409 = this;

              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
              !t && this._isPendingUpdate || (this._isPendingUpdate = !0, clearTimeout(this._sendBufferedOperationsDelayId), this._sendBufferedOperationsDelayId = setTimeout(function () {
                _this409._sendBufferedOperations().then(function (t) {
                  t && (_this409._clearPendingAction(), _this409._isPendingUpdate = !1);
                })["catch"](function (t) {
                  throw _this409._clearPendingAction(), _this409._isPendingUpdate = !1, t;
                });
              }, 300));
            }
          }, {
            key: "_handleServerResponse",
            value: function _handleServerResponse(t, e, n) {
              if (e.error) throw e.error;
              var i = !1;

              if (e.wereChangesApplied) {
                var _iterator510 = _createForOfIteratorHelper(t),
                    _step510;

                try {
                  for (_iterator510.s(); !(_step510 = _iterator510.n()).done;) {
                    var _e364 = _step510.value;
                    this._bufferedOperations["delete"](_e364), delete _e364.wasUndone;
                  }
                } catch (err) {
                  _iterator510.e(err);
                } finally {
                  _iterator510.f();
                }

                i = !0;
              } else {
                var _t408 = this._decompressOperations(e.data);

                this._assignOperationAuthors(_t408, e.metadata), i = this._handleExternalOperations(_t408, e.version);
              }

              return i ? (this.lastSyncVersion = e.version, !this._shouldSendUpdate() || (this._sendBufferedOperationsDelayed(!0), !1)) : this._crash("realtimecollaborationclient-handleserverresponse");
            }
          }, {
            key: "_handleExternalOperations",
            value: function _handleExternalOperations(t, e) {
              try {
                var _n328 = Array.from(this._bufferedOperations),
                    _i265 = {
                  document: this._document,
                  useRelations: !1,
                  padWithNoOps: !0
                },
                    _hh = hh(t, _n328, _i265),
                    _o139 = _hh.operationsA,
                    _r178 = _hh.operationsB,
                    _s51 = _hh.originalOperations;

                jx(_o139, this._document.version), jx(_r178, e);

                var _iterator511 = _createForOfIteratorHelper(_o139),
                    _step511;

                try {
                  for (_iterator511.s(); !(_step511 = _iterator511.n()).done;) {
                    var _t409 = _step511.value;

                    var _e365 = _s51.get(_t409);

                    _t409._authorId = _e365 ? _e365._authorId : null;
                  }
                } catch (err) {
                  _iterator511.e(err);
                } finally {
                  _iterator511.f();
                }

                this._bufferedOperations = new Set(_r178), this._applyOperationsSet(_o139);
              } catch (t) {
                return console.error(t), !1;
              }

              return !0;
            }
          }, {
            key: "_applyOperationsSet",
            value: function _applyOperationsSet(t) {
              var _this410 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
              this.editor.model.enqueueChange("transparent", function (e) {
                var _iterator512 = _createForOfIteratorHelper(t),
                    _step512;

                try {
                  for (_iterator512.s(); !(_step512 = _iterator512.n()).done;) {
                    var _n329 = _step512.value;
                    _this410._knownOperations.add(_n329), e.batch.addOperation(_n329), _this410.editor.model.applyOperation(_n329);
                  }
                } catch (err) {
                  _iterator512.e(err);
                } finally {
                  _iterator512.f();
                }
              });
            }
          }, {
            key: "_setPendingAction",
            value: function _setPendingAction() {
              var t = this.editor.locale.t;
              this._pendingAction = this.editor.plugins.get(xl).add(t({
                string: "Sending data to the server.",
                id: "PENDING_ACTION_SENDING_DATA"
              }));
            }
          }, {
            key: "_clearPendingAction",
            value: function _clearPendingAction() {
              this._pendingAction && (this.editor.plugins.get(xl).remove(this._pendingAction), this._pendingAction = null);
            }
          }, {
            key: "_compressOperations",
            value: function _compressOperations(t) {
              return this._compressor.compress(t.map(function (t) {
                return t.toJSON();
              }));
            }
          }, {
            key: "_decompressOperations",
            value: function _decompressOperations(t) {
              var _this411 = this;

              return this._compressor.decompress(t).map(function (t) {
                var e = Xc.fromJSON(t, _this411._document);
                return e.wasUndone = t.wasUndone, e;
              });
            }
          }, {
            key: "_assignOperationAuthors",
            value: function _assignOperationAuthors(t, e) {
              for (var _n330 = 0; _n330 < t.length; _n330++) {
                "init" != e[_n330].type ? t[_n330]._authorId = e[_n330].userId : t[_n330]._authorId = null;
              }
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Zv, cy, uy, xl, iy];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "RealTimeCollaborationClient";
            }
          }]);

          return Dx;
        }(r);

        function jx(t, e) {
          var _iterator513 = _createForOfIteratorHelper(t),
              _step513;

          try {
            for (_iterator513.s(); !(_step513 = _iterator513.n()).done;) {
              var _n331 = _step513.value;
              _n331.baseVersion = e++;
            }
          } catch (err) {
            _iterator513.e(err);
          } finally {
            _iterator513.f();
          }
        }

        Dx.CollaborativeEditingService = Px.a;
        var Bx = ["RealTimeCollaborativeEditing", "pluginName", "requires"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Bx, 270);

        var Lx = function Lx(t, e) {
          return Bx[t -= 0];
        };

        var zx = /*#__PURE__*/function (_r179, _Lx, _Lx2) {
          _inherits(zx, _r179);

          var _super306 = _createSuper(zx);

          function zx() {
            _classCallCheck(this, zx);

            return _super306.apply(this, arguments);
          }

          _createClass(zx, null, [{
            key: _Lx,
            get: function get() {
              return [Dx];
            }
          }, {
            key: _Lx2,
            get: function get() {
              return Lx("0x0");
            }
          }]);

          return zx;
        }(r, Lx("0x2"), Lx("0x1"));

        var Fx = n(174),
            Vx = n.n(Fx),
            Ux = ["view", "_localUser", "removeComment", "stopListening", "listenTo", "removeCommentThread", "remove", "updateComment", "destroy", "model", "update", "addComment"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(Ux, 288);

        var Hx = function Hx(t, e) {
          return Ux[t -= 0];
        };

        var qx = /*#__PURE__*/function (_Hx, _Hx2, _Hx3) {
          function qx(t, e) {
            var _this412 = this;

            _classCallCheck(this, qx);

            this[Hx("0x9")] = t, this[Hx("0x9")]._isAttached = !0, this[Hx("0x0")] = e, this[Hx("0x4")](e, Hx("0x5"), function () {
              return _this412[Hx("0x6")]();
            }), this.listenTo(e, Hx("0xb"), function (t, e) {
              return _this412[Hx("0xb")](e);
            }), this.listenTo(e, Hx("0x7"), function (t, e, n) {
              return _this412[Hx("0x7")](e, n);
            }), this[Hx("0x4")](e, Hx("0x2"), function (t, e) {
              return _this412[Hx("0x2")](e);
            });
          }

          _createClass(qx, [{
            key: "remove",
            value: function remove() {
              this[Hx("0x9")][Hx("0x6")]();
            }
          }, {
            key: _Hx,
            value: function value(t) {
              this[Hx("0x9")][Hx("0xb")]({
                content: t,
                authorId: this[Hx("0x0")][Hx("0x1")].id
              });
            }
          }, {
            key: "updateComment",
            value: function updateComment(t, e) {
              this.model.getComment(t)[Hx("0xa")]({
                content: e
              });
            }
          }, {
            key: _Hx2,
            value: function value(t) {
              this.model.getComment(t)[Hx("0x6")]();
            }
          }, {
            key: _Hx3,
            value: function value() {
              this[Hx("0x3")](), this[Hx("0x9")]._isAttached = !1;
            }
          }]);

          return qx;
        }(Hx("0xb"), Hx("0x2"), Hx("0x8"));

        function Wx(t, e) {
          if (e.length < t) throw new TypeError(t + " argument" + (t > 1 ? "s" : "") + " required, but only " + e.length + " present");
        }

        function $x(t) {
          Wx(1, arguments);
          var e = Object.prototype.toString.call(t);
          return t instanceof Date || "object" == typeof t && "[object Date]" === e ? new Date(t.getTime()) : "number" == typeof t || "[object Number]" === e ? new Date(t) : ("string" != typeof t && "[object String]" !== e || "undefined" == typeof console || (console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"), console.warn(new Error().stack)), new Date(NaN));
        }

        function Yx(t) {
          if (Wx(1, arguments), !function (t) {
            return Wx(1, arguments), t instanceof Date || "object" == typeof t && "[object Date]" === Object.prototype.toString.call(t);
          }(t) && "number" != typeof t) return !1;
          var e = $x(t);
          return !isNaN(Number(e));
        }

        Object(o["default"])(qx, i["default"]);
        var Jx = {
          lessThanXSeconds: {
            one: "less than a second",
            other: "less than {{count}} seconds"
          },
          xSeconds: {
            one: "1 second",
            other: "{{count}} seconds"
          },
          halfAMinute: "half a minute",
          lessThanXMinutes: {
            one: "less than a minute",
            other: "less than {{count}} minutes"
          },
          xMinutes: {
            one: "1 minute",
            other: "{{count}} minutes"
          },
          aboutXHours: {
            one: "about 1 hour",
            other: "about {{count}} hours"
          },
          xHours: {
            one: "1 hour",
            other: "{{count}} hours"
          },
          xDays: {
            one: "1 day",
            other: "{{count}} days"
          },
          aboutXWeeks: {
            one: "about 1 week",
            other: "about {{count}} weeks"
          },
          xWeeks: {
            one: "1 week",
            other: "{{count}} weeks"
          },
          aboutXMonths: {
            one: "about 1 month",
            other: "about {{count}} months"
          },
          xMonths: {
            one: "1 month",
            other: "{{count}} months"
          },
          aboutXYears: {
            one: "about 1 year",
            other: "about {{count}} years"
          },
          xYears: {
            one: "1 year",
            other: "{{count}} years"
          },
          overXYears: {
            one: "over 1 year",
            other: "over {{count}} years"
          },
          almostXYears: {
            one: "almost 1 year",
            other: "almost {{count}} years"
          }
        };

        function Gx(t) {
          return function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                n = e.width ? String(e.width) : t.defaultWidth;
            return t.formats[n] || t.formats[t.defaultWidth];
          };
        }

        var Kx = {
          lastWeek: "'last' eeee 'at' p",
          yesterday: "'yesterday at' p",
          today: "'today at' p",
          tomorrow: "'tomorrow at' p",
          nextWeek: "eeee 'at' p",
          other: "P"
        };

        function Qx(t) {
          return function (e, n) {
            var i,
                o = n || {};

            if ("formatting" === (o.context ? String(o.context) : "standalone") && t.formattingValues) {
              var r = t.defaultFormattingWidth || t.defaultWidth,
                  s = o.width ? String(o.width) : r;
              i = t.formattingValues[s] || t.formattingValues[r];
            } else {
              var a = t.defaultWidth,
                  c = o.width ? String(o.width) : t.defaultWidth;
              i = t.values[c] || t.values[a];
            }

            return i[t.argumentCallback ? t.argumentCallback(e) : e];
          };
        }

        function Xx(t) {
          return function (e) {
            var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                i = n.width,
                o = i && t.matchPatterns[i] || t.matchPatterns[t.defaultMatchWidth],
                r = e.match(o);
            if (!r) return null;
            var s,
                a = r[0],
                c = i && t.parsePatterns[i] || t.parsePatterns[t.defaultParseWidth],
                l = Array.isArray(c) ? function (t, e) {
              for (var n = 0; n < t.length; n++) {
                if (e(t[n])) return n;
              }

              return;
            }(c, function (t) {
              return t.test(a);
            }) : function (t, e) {
              for (var n in t) {
                if (t.hasOwnProperty(n) && e(t[n])) return n;
              }

              return;
            }(c, function (t) {
              return t.test(a);
            });
            return s = t.valueCallback ? t.valueCallback(l) : l, {
              value: s = n.valueCallback ? n.valueCallback(s) : s,
              rest: e.slice(a.length)
            };
          };
        }

        var Zx = {
          code: "en-US",
          formatDistance: function formatDistance(t, e, n) {
            var i,
                o = Jx[t];
            return i = "string" == typeof o ? o : 1 === e ? o.one : o.other.replace("{{count}}", e.toString()), null !== n && void 0 !== n && n.addSuffix ? n.comparison && n.comparison > 0 ? "in " + i : i + " ago" : i;
          },
          formatLong: {
            date: Gx({
              formats: {
                full: "EEEE, MMMM do, y",
                "long": "MMMM do, y",
                medium: "MMM d, y",
                "short": "MM/dd/yyyy"
              },
              defaultWidth: "full"
            }),
            time: Gx({
              formats: {
                full: "h:mm:ss a zzzz",
                "long": "h:mm:ss a z",
                medium: "h:mm:ss a",
                "short": "h:mm a"
              },
              defaultWidth: "full"
            }),
            dateTime: Gx({
              formats: {
                full: "{{date}} 'at' {{time}}",
                "long": "{{date}} 'at' {{time}}",
                medium: "{{date}}, {{time}}",
                "short": "{{date}}, {{time}}"
              },
              defaultWidth: "full"
            })
          },
          formatRelative: function formatRelative(t, e, n, i) {
            return Kx[t];
          },
          localize: {
            ordinalNumber: function ordinalNumber(t, e) {
              var n = Number(t),
                  i = n % 100;
              if (i > 20 || i < 10) switch (i % 10) {
                case 1:
                  return n + "st";

                case 2:
                  return n + "nd";

                case 3:
                  return n + "rd";
              }
              return n + "th";
            },
            era: Qx({
              values: {
                narrow: ["B", "A"],
                abbreviated: ["BC", "AD"],
                wide: ["Before Christ", "Anno Domini"]
              },
              defaultWidth: "wide"
            }),
            quarter: Qx({
              values: {
                narrow: ["1", "2", "3", "4"],
                abbreviated: ["Q1", "Q2", "Q3", "Q4"],
                wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
              },
              defaultWidth: "wide",
              argumentCallback: function argumentCallback(t) {
                return t - 1;
              }
            }),
            month: Qx({
              values: {
                narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
                abbreviated: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                wide: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
              },
              defaultWidth: "wide"
            }),
            day: Qx({
              values: {
                narrow: ["S", "M", "T", "W", "T", "F", "S"],
                "short": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                wide: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
              },
              defaultWidth: "wide"
            }),
            dayPeriod: Qx({
              values: {
                narrow: {
                  am: "a",
                  pm: "p",
                  midnight: "mi",
                  noon: "n",
                  morning: "morning",
                  afternoon: "afternoon",
                  evening: "evening",
                  night: "night"
                },
                abbreviated: {
                  am: "AM",
                  pm: "PM",
                  midnight: "midnight",
                  noon: "noon",
                  morning: "morning",
                  afternoon: "afternoon",
                  evening: "evening",
                  night: "night"
                },
                wide: {
                  am: "a.m.",
                  pm: "p.m.",
                  midnight: "midnight",
                  noon: "noon",
                  morning: "morning",
                  afternoon: "afternoon",
                  evening: "evening",
                  night: "night"
                }
              },
              defaultWidth: "wide",
              formattingValues: {
                narrow: {
                  am: "a",
                  pm: "p",
                  midnight: "mi",
                  noon: "n",
                  morning: "in the morning",
                  afternoon: "in the afternoon",
                  evening: "in the evening",
                  night: "at night"
                },
                abbreviated: {
                  am: "AM",
                  pm: "PM",
                  midnight: "midnight",
                  noon: "noon",
                  morning: "in the morning",
                  afternoon: "in the afternoon",
                  evening: "in the evening",
                  night: "at night"
                },
                wide: {
                  am: "a.m.",
                  pm: "p.m.",
                  midnight: "midnight",
                  noon: "noon",
                  morning: "in the morning",
                  afternoon: "in the afternoon",
                  evening: "in the evening",
                  night: "at night"
                }
              },
              defaultFormattingWidth: "wide"
            })
          },
          match: {
            ordinalNumber: function (t) {
              return function (e) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                    i = e.match(t.matchPattern);
                if (!i) return null;
                var o = i[0],
                    r = e.match(t.parsePattern);
                if (!r) return null;
                var s = t.valueCallback ? t.valueCallback(r[0]) : r[0];
                return {
                  value: s = n.valueCallback ? n.valueCallback(s) : s,
                  rest: e.slice(o.length)
                };
              };
            }({
              matchPattern: /^(\d+)(th|st|nd|rd)?/i,
              parsePattern: /\d+/i,
              valueCallback: function valueCallback(t) {
                return parseInt(t, 10);
              }
            }),
            era: Xx({
              matchPatterns: {
                narrow: /^(b|a)/i,
                abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
                wide: /^(before christ|before common era|anno domini|common era)/i
              },
              defaultMatchWidth: "wide",
              parsePatterns: {
                any: [/^b/i, /^(a|c)/i]
              },
              defaultParseWidth: "any"
            }),
            quarter: Xx({
              matchPatterns: {
                narrow: /^[1234]/i,
                abbreviated: /^q[1234]/i,
                wide: /^[1234](th|st|nd|rd)? quarter/i
              },
              defaultMatchWidth: "wide",
              parsePatterns: {
                any: [/1/i, /2/i, /3/i, /4/i]
              },
              defaultParseWidth: "any",
              valueCallback: function valueCallback(t) {
                return t + 1;
              }
            }),
            month: Xx({
              matchPatterns: {
                narrow: /^[jfmasond]/i,
                abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
                wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
              },
              defaultMatchWidth: "wide",
              parsePatterns: {
                narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
                any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
              },
              defaultParseWidth: "any"
            }),
            day: Xx({
              matchPatterns: {
                narrow: /^[smtwf]/i,
                "short": /^(su|mo|tu|we|th|fr|sa)/i,
                abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
                wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
              },
              defaultMatchWidth: "wide",
              parsePatterns: {
                narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
                any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
              },
              defaultParseWidth: "any"
            }),
            dayPeriod: Xx({
              matchPatterns: {
                narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
                any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
              },
              defaultMatchWidth: "any",
              parsePatterns: {
                any: {
                  am: /^a/i,
                  pm: /^p/i,
                  midnight: /^mi/i,
                  noon: /^no/i,
                  morning: /morning/i,
                  afternoon: /afternoon/i,
                  evening: /evening/i,
                  night: /night/i
                }
              },
              defaultParseWidth: "any"
            })
          },
          options: {
            weekStartsOn: 0,
            firstWeekContainsDate: 1
          }
        };

        function tC(t) {
          if (null === t || !0 === t || !1 === t) return NaN;
          var e = Number(t);
          return isNaN(e) ? e : e < 0 ? Math.ceil(e) : Math.floor(e);
        }

        function eC(t, e) {
          return Wx(2, arguments), function (t, e) {
            Wx(2, arguments);
            var n = $x(t).getTime(),
                i = tC(e);
            return new Date(n + i);
          }(t, -tC(e));
        }

        function nC(t, e) {
          for (var n = t < 0 ? "-" : "", i = Math.abs(t).toString(); i.length < e;) {
            i = "0" + i;
          }

          return n + i;
        }

        var iC = {
          y: function y(t, e) {
            var n = t.getUTCFullYear(),
                i = n > 0 ? n : 1 - n;
            return nC("yy" === e ? i % 100 : i, e.length);
          },
          M: function M(t, e) {
            var n = t.getUTCMonth();
            return "M" === e ? String(n + 1) : nC(n + 1, 2);
          },
          d: function d(t, e) {
            return nC(t.getUTCDate(), e.length);
          },
          a: function a(t, e) {
            var n = t.getUTCHours() / 12 >= 1 ? "pm" : "am";

            switch (e) {
              case "a":
              case "aa":
                return n.toUpperCase();

              case "aaa":
                return n;

              case "aaaaa":
                return n[0];

              case "aaaa":
              default:
                return "am" === n ? "a.m." : "p.m.";
            }
          },
          h: function h(t, e) {
            return nC(t.getUTCHours() % 12 || 12, e.length);
          },
          H: function H(t, e) {
            return nC(t.getUTCHours(), e.length);
          },
          m: function m(t, e) {
            return nC(t.getUTCMinutes(), e.length);
          },
          s: function s(t, e) {
            return nC(t.getUTCSeconds(), e.length);
          },
          S: function S(t, e) {
            var n = e.length,
                i = t.getUTCMilliseconds();
            return nC(Math.floor(i * Math.pow(10, n - 3)), e.length);
          }
        },
            oC = 864e5;

        function rC(t) {
          Wx(1, arguments);
          var e = $x(t),
              n = e.getUTCDay(),
              i = (n < 1 ? 7 : 0) + n - 1;
          return e.setUTCDate(e.getUTCDate() - i), e.setUTCHours(0, 0, 0, 0), e;
        }

        function sC(t) {
          Wx(1, arguments);
          var e = $x(t),
              n = e.getUTCFullYear(),
              i = new Date(0);
          i.setUTCFullYear(n + 1, 0, 4), i.setUTCHours(0, 0, 0, 0);
          var o = rC(i),
              r = new Date(0);
          r.setUTCFullYear(n, 0, 4), r.setUTCHours(0, 0, 0, 0);
          var s = rC(r);
          return e.getTime() >= o.getTime() ? n + 1 : e.getTime() >= s.getTime() ? n : n - 1;
        }

        var aC = 6048e5;

        function cC(t) {
          Wx(1, arguments);

          var e = $x(t),
              n = rC(e).getTime() - function (t) {
            Wx(1, arguments);
            var e = sC(t),
                n = new Date(0);
            return n.setUTCFullYear(e, 0, 4), n.setUTCHours(0, 0, 0, 0), rC(n);
          }(e).getTime();

          return Math.round(n / aC) + 1;
        }

        function lC(t, e) {
          Wx(1, arguments);
          var n = e || {},
              i = n.locale,
              o = i && i.options && i.options.weekStartsOn,
              r = null == o ? 0 : tC(o),
              s = null == n.weekStartsOn ? r : tC(n.weekStartsOn);
          if (!(s >= 0 && s <= 6)) throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
          var a = $x(t),
              c = a.getUTCDay(),
              l = (c < s ? 7 : 0) + c - s;
          return a.setUTCDate(a.getUTCDate() - l), a.setUTCHours(0, 0, 0, 0), a;
        }

        function dC(t, e) {
          Wx(1, arguments);
          var n = $x(t, e),
              i = n.getUTCFullYear(),
              o = e || {},
              r = o.locale,
              s = r && r.options && r.options.firstWeekContainsDate,
              a = null == s ? 1 : tC(s),
              c = null == o.firstWeekContainsDate ? a : tC(o.firstWeekContainsDate);
          if (!(c >= 1 && c <= 7)) throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
          var l = new Date(0);
          l.setUTCFullYear(i + 1, 0, c), l.setUTCHours(0, 0, 0, 0);
          var d = lC(l, e),
              u = new Date(0);
          u.setUTCFullYear(i, 0, c), u.setUTCHours(0, 0, 0, 0);
          var h = lC(u, e);
          return n.getTime() >= d.getTime() ? i + 1 : n.getTime() >= h.getTime() ? i : i - 1;
        }

        var uC = 6048e5;

        function hC(t, e) {
          Wx(1, arguments);

          var n = $x(t),
              i = lC(n, e).getTime() - function (t, e) {
            Wx(1, arguments);
            var n = e || {},
                i = n.locale,
                o = i && i.options && i.options.firstWeekContainsDate,
                r = null == o ? 1 : tC(o),
                s = null == n.firstWeekContainsDate ? r : tC(n.firstWeekContainsDate),
                a = dC(t, e),
                c = new Date(0);
            return c.setUTCFullYear(a, 0, s), c.setUTCHours(0, 0, 0, 0), lC(c, e);
          }(n, e).getTime();

          return Math.round(i / uC) + 1;
        }

        var fC = "midnight",
            gC = "noon",
            mC = "morning",
            pC = "afternoon",
            bC = "evening",
            kC = "night";

        function _C(t, e) {
          var n = t > 0 ? "-" : "+",
              i = Math.abs(t),
              o = Math.floor(i / 60),
              r = i % 60;
          if (0 === r) return n + String(o);
          var s = e || "";
          return n + String(o) + s + nC(r, 2);
        }

        function wC(t, e) {
          return t % 60 == 0 ? (t > 0 ? "-" : "+") + nC(Math.abs(t) / 60, 2) : vC(t, e);
        }

        function vC(t, e) {
          var n = e || "",
              i = t > 0 ? "-" : "+",
              o = Math.abs(t);
          return i + nC(Math.floor(o / 60), 2) + n + nC(o % 60, 2);
        }

        var yC = {
          G: function G(t, e, n) {
            var i = t.getUTCFullYear() > 0 ? 1 : 0;

            switch (e) {
              case "G":
              case "GG":
              case "GGG":
                return n.era(i, {
                  width: "abbreviated"
                });

              case "GGGGG":
                return n.era(i, {
                  width: "narrow"
                });

              case "GGGG":
              default:
                return n.era(i, {
                  width: "wide"
                });
            }
          },
          y: function y(t, e, n) {
            if ("yo" === e) {
              var i = t.getUTCFullYear(),
                  o = i > 0 ? i : 1 - i;
              return n.ordinalNumber(o, {
                unit: "year"
              });
            }

            return iC.y(t, e);
          },
          Y: function Y(t, e, n, i) {
            var o = dC(t, i),
                r = o > 0 ? o : 1 - o;
            return "YY" === e ? nC(r % 100, 2) : "Yo" === e ? n.ordinalNumber(r, {
              unit: "year"
            }) : nC(r, e.length);
          },
          R: function R(t, e) {
            return nC(sC(t), e.length);
          },
          u: function u(t, e) {
            return nC(t.getUTCFullYear(), e.length);
          },
          Q: function Q(t, e, n) {
            var i = Math.ceil((t.getUTCMonth() + 1) / 3);

            switch (e) {
              case "Q":
                return String(i);

              case "QQ":
                return nC(i, 2);

              case "Qo":
                return n.ordinalNumber(i, {
                  unit: "quarter"
                });

              case "QQQ":
                return n.quarter(i, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "QQQQQ":
                return n.quarter(i, {
                  width: "narrow",
                  context: "formatting"
                });

              case "QQQQ":
              default:
                return n.quarter(i, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          q: function q(t, e, n) {
            var i = Math.ceil((t.getUTCMonth() + 1) / 3);

            switch (e) {
              case "q":
                return String(i);

              case "qq":
                return nC(i, 2);

              case "qo":
                return n.ordinalNumber(i, {
                  unit: "quarter"
                });

              case "qqq":
                return n.quarter(i, {
                  width: "abbreviated",
                  context: "standalone"
                });

              case "qqqqq":
                return n.quarter(i, {
                  width: "narrow",
                  context: "standalone"
                });

              case "qqqq":
              default:
                return n.quarter(i, {
                  width: "wide",
                  context: "standalone"
                });
            }
          },
          M: function M(t, e, n) {
            var i = t.getUTCMonth();

            switch (e) {
              case "M":
              case "MM":
                return iC.M(t, e);

              case "Mo":
                return n.ordinalNumber(i + 1, {
                  unit: "month"
                });

              case "MMM":
                return n.month(i, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "MMMMM":
                return n.month(i, {
                  width: "narrow",
                  context: "formatting"
                });

              case "MMMM":
              default:
                return n.month(i, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          L: function L(t, e, n) {
            var i = t.getUTCMonth();

            switch (e) {
              case "L":
                return String(i + 1);

              case "LL":
                return nC(i + 1, 2);

              case "Lo":
                return n.ordinalNumber(i + 1, {
                  unit: "month"
                });

              case "LLL":
                return n.month(i, {
                  width: "abbreviated",
                  context: "standalone"
                });

              case "LLLLL":
                return n.month(i, {
                  width: "narrow",
                  context: "standalone"
                });

              case "LLLL":
              default:
                return n.month(i, {
                  width: "wide",
                  context: "standalone"
                });
            }
          },
          w: function w(t, e, n, i) {
            var o = hC(t, i);
            return "wo" === e ? n.ordinalNumber(o, {
              unit: "week"
            }) : nC(o, e.length);
          },
          I: function I(t, e, n) {
            var i = cC(t);
            return "Io" === e ? n.ordinalNumber(i, {
              unit: "week"
            }) : nC(i, e.length);
          },
          d: function d(t, e, n) {
            return "do" === e ? n.ordinalNumber(t.getUTCDate(), {
              unit: "date"
            }) : iC.d(t, e);
          },
          D: function D(t, e, n) {
            var i = function (t) {
              Wx(1, arguments);
              var e = $x(t),
                  n = e.getTime();
              e.setUTCMonth(0, 1), e.setUTCHours(0, 0, 0, 0);
              var i = n - e.getTime();
              return Math.floor(i / oC) + 1;
            }(t);

            return "Do" === e ? n.ordinalNumber(i, {
              unit: "dayOfYear"
            }) : nC(i, e.length);
          },
          E: function E(t, e, n) {
            var i = t.getUTCDay();

            switch (e) {
              case "E":
              case "EE":
              case "EEE":
                return n.day(i, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "EEEEE":
                return n.day(i, {
                  width: "narrow",
                  context: "formatting"
                });

              case "EEEEEE":
                return n.day(i, {
                  width: "short",
                  context: "formatting"
                });

              case "EEEE":
              default:
                return n.day(i, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          e: function e(t, _e366, n, i) {
            var o = t.getUTCDay(),
                r = (o - i.weekStartsOn + 8) % 7 || 7;

            switch (_e366) {
              case "e":
                return String(r);

              case "ee":
                return nC(r, 2);

              case "eo":
                return n.ordinalNumber(r, {
                  unit: "day"
                });

              case "eee":
                return n.day(o, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "eeeee":
                return n.day(o, {
                  width: "narrow",
                  context: "formatting"
                });

              case "eeeeee":
                return n.day(o, {
                  width: "short",
                  context: "formatting"
                });

              case "eeee":
              default:
                return n.day(o, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          c: function c(t, e, n, i) {
            var o = t.getUTCDay(),
                r = (o - i.weekStartsOn + 8) % 7 || 7;

            switch (e) {
              case "c":
                return String(r);

              case "cc":
                return nC(r, e.length);

              case "co":
                return n.ordinalNumber(r, {
                  unit: "day"
                });

              case "ccc":
                return n.day(o, {
                  width: "abbreviated",
                  context: "standalone"
                });

              case "ccccc":
                return n.day(o, {
                  width: "narrow",
                  context: "standalone"
                });

              case "cccccc":
                return n.day(o, {
                  width: "short",
                  context: "standalone"
                });

              case "cccc":
              default:
                return n.day(o, {
                  width: "wide",
                  context: "standalone"
                });
            }
          },
          i: function i(t, e, n) {
            var i = t.getUTCDay(),
                o = 0 === i ? 7 : i;

            switch (e) {
              case "i":
                return String(o);

              case "ii":
                return nC(o, e.length);

              case "io":
                return n.ordinalNumber(o, {
                  unit: "day"
                });

              case "iii":
                return n.day(i, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "iiiii":
                return n.day(i, {
                  width: "narrow",
                  context: "formatting"
                });

              case "iiiiii":
                return n.day(i, {
                  width: "short",
                  context: "formatting"
                });

              case "iiii":
              default:
                return n.day(i, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          a: function a(t, e, n) {
            var i = t.getUTCHours() / 12 >= 1 ? "pm" : "am";

            switch (e) {
              case "a":
              case "aa":
                return n.dayPeriod(i, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "aaa":
                return n.dayPeriod(i, {
                  width: "abbreviated",
                  context: "formatting"
                }).toLowerCase();

              case "aaaaa":
                return n.dayPeriod(i, {
                  width: "narrow",
                  context: "formatting"
                });

              case "aaaa":
              default:
                return n.dayPeriod(i, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          b: function b(t, e, n) {
            var i,
                o = t.getUTCHours();

            switch (i = 12 === o ? gC : 0 === o ? fC : o / 12 >= 1 ? "pm" : "am", e) {
              case "b":
              case "bb":
                return n.dayPeriod(i, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "bbb":
                return n.dayPeriod(i, {
                  width: "abbreviated",
                  context: "formatting"
                }).toLowerCase();

              case "bbbbb":
                return n.dayPeriod(i, {
                  width: "narrow",
                  context: "formatting"
                });

              case "bbbb":
              default:
                return n.dayPeriod(i, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          B: function B(t, e, n) {
            var i,
                o = t.getUTCHours();

            switch (i = o >= 17 ? bC : o >= 12 ? pC : o >= 4 ? mC : kC, e) {
              case "B":
              case "BB":
              case "BBB":
                return n.dayPeriod(i, {
                  width: "abbreviated",
                  context: "formatting"
                });

              case "BBBBB":
                return n.dayPeriod(i, {
                  width: "narrow",
                  context: "formatting"
                });

              case "BBBB":
              default:
                return n.dayPeriod(i, {
                  width: "wide",
                  context: "formatting"
                });
            }
          },
          h: function h(t, e, n) {
            if ("ho" === e) {
              var i = t.getUTCHours() % 12;
              return 0 === i && (i = 12), n.ordinalNumber(i, {
                unit: "hour"
              });
            }

            return iC.h(t, e);
          },
          H: function H(t, e, n) {
            return "Ho" === e ? n.ordinalNumber(t.getUTCHours(), {
              unit: "hour"
            }) : iC.H(t, e);
          },
          K: function K(t, e, n) {
            var i = t.getUTCHours() % 12;
            return "Ko" === e ? n.ordinalNumber(i, {
              unit: "hour"
            }) : nC(i, e.length);
          },
          k: function k(t, e, n) {
            var i = t.getUTCHours();
            return 0 === i && (i = 24), "ko" === e ? n.ordinalNumber(i, {
              unit: "hour"
            }) : nC(i, e.length);
          },
          m: function m(t, e, n) {
            return "mo" === e ? n.ordinalNumber(t.getUTCMinutes(), {
              unit: "minute"
            }) : iC.m(t, e);
          },
          s: function s(t, e, n) {
            return "so" === e ? n.ordinalNumber(t.getUTCSeconds(), {
              unit: "second"
            }) : iC.s(t, e);
          },
          S: function S(t, e) {
            return iC.S(t, e);
          },
          X: function X(t, e, n, i) {
            var o = (i._originalDate || t).getTimezoneOffset();
            if (0 === o) return "Z";

            switch (e) {
              case "X":
                return wC(o);

              case "XXXX":
              case "XX":
                return vC(o);

              case "XXXXX":
              case "XXX":
              default:
                return vC(o, ":");
            }
          },
          x: function x(t, e, n, i) {
            var o = (i._originalDate || t).getTimezoneOffset();

            switch (e) {
              case "x":
                return wC(o);

              case "xxxx":
              case "xx":
                return vC(o);

              case "xxxxx":
              case "xxx":
              default:
                return vC(o, ":");
            }
          },
          O: function O(t, e, n, i) {
            var o = (i._originalDate || t).getTimezoneOffset();

            switch (e) {
              case "O":
              case "OO":
              case "OOO":
                return "GMT" + _C(o, ":");

              case "OOOO":
              default:
                return "GMT" + vC(o, ":");
            }
          },
          z: function z(t, e, n, i) {
            var o = (i._originalDate || t).getTimezoneOffset();

            switch (e) {
              case "z":
              case "zz":
              case "zzz":
                return "GMT" + _C(o, ":");

              case "zzzz":
              default:
                return "GMT" + vC(o, ":");
            }
          },
          t: function t(_t410, e, n, i) {
            var o = i._originalDate || _t410;
            return nC(Math.floor(o.getTime() / 1e3), e.length);
          },
          T: function T(t, e, n, i) {
            return nC((i._originalDate || t).getTime(), e.length);
          }
        };

        function xC(t, e) {
          switch (t) {
            case "P":
              return e.date({
                width: "short"
              });

            case "PP":
              return e.date({
                width: "medium"
              });

            case "PPP":
              return e.date({
                width: "long"
              });

            case "PPPP":
            default:
              return e.date({
                width: "full"
              });
          }
        }

        function CC(t, e) {
          switch (t) {
            case "p":
              return e.time({
                width: "short"
              });

            case "pp":
              return e.time({
                width: "medium"
              });

            case "ppp":
              return e.time({
                width: "long"
              });

            case "pppp":
            default:
              return e.time({
                width: "full"
              });
          }
        }

        var TC = {
          p: CC,
          P: function P(t, e) {
            var n,
                i = t.match(/(P+)(p+)?/),
                o = i[1],
                r = i[2];
            if (!r) return xC(t, e);

            switch (o) {
              case "P":
                n = e.dateTime({
                  width: "short"
                });
                break;

              case "PP":
                n = e.dateTime({
                  width: "medium"
                });
                break;

              case "PPP":
                n = e.dateTime({
                  width: "long"
                });
                break;

              case "PPPP":
              default:
                n = e.dateTime({
                  width: "full"
                });
            }

            return n.replace("{{date}}", xC(o, e)).replace("{{time}}", CC(r, e));
          }
        };

        function AC(t) {
          var e = new Date(Date.UTC(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours(), t.getMinutes(), t.getSeconds(), t.getMilliseconds()));
          return e.setUTCFullYear(t.getFullYear()), t.getTime() - e.getTime();
        }

        var EC = ["D", "DD"],
            SC = ["YY", "YYYY"];

        function IC(t, e, n) {
          if ("YYYY" === t) throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e, "`) for formatting years to the input `").concat(n, "`; see: https://git.io/fxCyr"));
          if ("YY" === t) throw new RangeError("Use `yy` instead of `YY` (in `".concat(e, "`) for formatting years to the input `").concat(n, "`; see: https://git.io/fxCyr"));
          if ("D" === t) throw new RangeError("Use `d` instead of `D` (in `".concat(e, "`) for formatting days of the month to the input `").concat(n, "`; see: https://git.io/fxCyr"));
          if ("DD" === t) throw new RangeError("Use `dd` instead of `DD` (in `".concat(e, "`) for formatting days of the month to the input `").concat(n, "`; see: https://git.io/fxCyr"));
        }

        var OC = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,
            RC = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,
            MC = /^'([^]*?)'?$/,
            PC = /''/g,
            NC = /[a-zA-Z]/;

        function DC(t, e, n) {
          Wx(2, arguments);
          var i = String(e),
              o = n || {},
              r = o.locale || Zx,
              s = r.options && r.options.firstWeekContainsDate,
              a = null == s ? 1 : tC(s),
              c = null == o.firstWeekContainsDate ? a : tC(o.firstWeekContainsDate);
          if (!(c >= 1 && c <= 7)) throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
          var l = r.options && r.options.weekStartsOn,
              d = null == l ? 0 : tC(l),
              u = null == o.weekStartsOn ? d : tC(o.weekStartsOn);
          if (!(u >= 0 && u <= 6)) throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
          if (!r.localize) throw new RangeError("locale must contain localize property");
          if (!r.formatLong) throw new RangeError("locale must contain formatLong property");
          var h = $x(t);
          if (!Yx(h)) throw new RangeError("Invalid time value");
          var f = eC(h, AC(h)),
              g = {
            firstWeekContainsDate: c,
            weekStartsOn: u,
            locale: r,
            _originalDate: h
          };
          return i.match(RC).map(function (t) {
            var e = t[0];
            return "p" === e || "P" === e ? (0, TC[e])(t, r.formatLong, g) : t;
          }).join("").match(OC).map(function (n) {
            if ("''" === n) return "'";
            var i = n[0];
            if ("'" === i) return function (t) {
              return t.match(MC)[1].replace(PC, "'");
            }(n);
            var s = yC[i];
            if (s) return !o.useAdditionalWeekYearTokens && function (t) {
              return -1 !== SC.indexOf(t);
            }(n) && IC(n, e, t), !o.useAdditionalDayOfYearTokens && function (t) {
              return -1 !== EC.indexOf(t);
            }(n) && IC(n, e, t), s(f, n, r.localize, g);
            if (i.match(NC)) throw new RangeError("Format string contains an unescaped latin alphabet character `" + i + "`");
            return n;
          }).join("");
        }

        var jC = 36e5,
            BC = 6e4,
            LC = 2,
            zC = {
          dateTimeDelimiter: /[T ]/,
          timeZoneDelimiter: /[Z ]/i,
          timezone: /([Z+-].*)$/
        },
            FC = /^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,
            VC = /^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,
            UC = /^([+-])(\d{2})(?::?(\d{2}))?$/;

        function HC(t, e) {
          Wx(1, arguments);
          var n = e || {},
              i = null == n.additionalDigits ? LC : tC(n.additionalDigits);
          if (2 !== i && 1 !== i && 0 !== i) throw new RangeError("additionalDigits must be 0, 1 or 2");
          if ("string" != typeof t && "[object String]" !== Object.prototype.toString.call(t)) return new Date(NaN);

          var o,
              r = function (t) {
            var e,
                n = {},
                i = t.split(zC.dateTimeDelimiter);
            if (i.length > 2) return n;
            /:/.test(i[0]) ? (n.date = null, e = i[0]) : (n.date = i[0], e = i[1], zC.timeZoneDelimiter.test(n.date) && (n.date = t.split(zC.timeZoneDelimiter)[0], e = t.substr(n.date.length, t.length)));

            if (e) {
              var o = zC.timezone.exec(e);
              o ? (n.time = e.replace(o[1], ""), n.timezone = o[1]) : n.time = e;
            }

            return n;
          }(t);

          if (r.date) {
            var s = function (t, e) {
              var n = new RegExp("^(?:(\\d{4}|[+-]\\d{" + (4 + e) + "})|(\\d{2}|[+-]\\d{" + (2 + e) + "})$)"),
                  i = t.match(n);
              if (!i) return {
                year: null
              };
              var o = i[1] && parseInt(i[1]),
                  r = i[2] && parseInt(i[2]);
              return {
                year: null == r ? o : 100 * r,
                restDateString: t.slice((i[1] || i[2]).length)
              };
            }(r.date, i);

            o = function (t, e) {
              if (null === e) return null;
              var n = t.match(FC);
              if (!n) return null;
              var i = !!n[4],
                  o = qC(n[1]),
                  r = qC(n[2]) - 1,
                  s = qC(n[3]),
                  a = qC(n[4]),
                  c = qC(n[5]) - 1;
              if (i) return function (t, e, n) {
                return e >= 1 && e <= 53 && n >= 0 && n <= 6;
              }(0, a, c) ? function (t, e, n) {
                var i = new Date(0);
                i.setUTCFullYear(t, 0, 4);
                var o = i.getUTCDay() || 7,
                    r = 7 * (e - 1) + n + 1 - o;
                return i.setUTCDate(i.getUTCDate() + r), i;
              }(e, a, c) : new Date(NaN);
              var l = new Date(0);
              return function (t, e, n) {
                return e >= 0 && e <= 11 && n >= 1 && n <= ($C[e] || (YC(t) ? 29 : 28));
              }(e, r, s) && function (t, e) {
                return e >= 1 && e <= (YC(t) ? 366 : 365);
              }(e, o) ? (l.setUTCFullYear(e, r, Math.max(o, s)), l) : new Date(NaN);
            }(s.restDateString, s.year);
          }

          if (isNaN(o) || !o) return new Date(NaN);
          var a,
              c = o.getTime(),
              l = 0;
          if (r.time && (l = function (t) {
            var e = t.match(VC);
            if (!e) return null;
            var n = WC(e[1]),
                i = WC(e[2]),
                o = WC(e[3]);
            if (!function (t, e, n) {
              if (24 === t) return 0 === e && 0 === n;
              return n >= 0 && n < 60 && e >= 0 && e < 60 && t >= 0 && t < 25;
            }(n, i, o)) return NaN;
            return n * jC + i * BC + 1e3 * o;
          }(r.time), isNaN(l) || null === l)) return new Date(NaN);

          if (!r.timezone) {
            var d = new Date(c + l),
                u = new Date(0);
            return u.setFullYear(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()), u.setHours(d.getUTCHours(), d.getUTCMinutes(), d.getUTCSeconds(), d.getUTCMilliseconds()), u;
          }

          return a = function (t) {
            if ("Z" === t) return 0;
            var e = t.match(UC);
            if (!e) return 0;
            var n = "+" === e[1] ? -1 : 1,
                i = parseInt(e[2]),
                o = e[3] && parseInt(e[3]) || 0;
            if (!function (t, e) {
              return e >= 0 && e <= 59;
            }(0, o)) return NaN;
            return n * (i * jC + o * BC);
          }(r.timezone), isNaN(a) ? new Date(NaN) : new Date(c + l + a);
        }

        function qC(t) {
          return t ? parseInt(t) : 1;
        }

        function WC(t) {
          return t && parseFloat(t.replace(",", ".")) || 0;
        }

        var $C = [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

        function YC(t) {
          return t % 400 == 0 || t % 4 == 0 && t % 100;
        }

        function JC(t) {
          Wx(1, arguments);
          var e = $x(t);
          return e.setHours(0, 0, 0, 0), e;
        }

        var GC = 864e5;
        var KC = ["dateTimeFormat", "'Last' EEEE hh:mma", "function", "string", "'Yesterday' hh:mma", "'Today' hh:mma", "MM-dd-yyyy hh:mma", "invalid-date-time-format"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(KC, 247);

        var QC = function QC(t, e) {
          return KC[t -= 0];
        };

        function XC() {
          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
          if (void 0 !== t.dateTimeFormat && QC("0x3") != typeof t.dateTimeFormat) throw new rn["default"](QC("0x0"));
          return function (e) {
            var n = QC("0x4") == typeof e ? HC(e) : e,
                i = function (t, e) {
              Wx(2, arguments);
              var n = JC(t),
                  i = JC(e),
                  o = n.getTime() - AC(n),
                  r = i.getTime() - AC(i);
              return Math.round((o - r) / GC);
            }(new Date(), n);

            return t[QC("0x1")] ? t[QC("0x1")](n) : DC(n, QC(0 === i ? "0x6" : 1 === i ? "0x5" : i < 7 ? "0x2" : "0x7"));
          };
        }

        var ZC = /*#__PURE__*/function (_Ou2) {
          _inherits(ZC, _Ou2);

          var _super307 = _createSuper(ZC);

          function ZC(t, e) {
            var _this413;

            _classCallCheck(this, ZC);

            _this413 = _super307.call(this, t);
            var n = Object(Xo.a)();
            _this413.main = _this413.createCollection(), _this413.editable = new Nu(t, e), _this413._voiceLabelView = _this413._createVoiceLabel(n, t), _this413.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck-reset", "ck-editor", "ck-rounded-corners", "ck-comment__input"],
                role: "comment",
                dir: t.uiLanguageDirection,
                lang: t.uiLanguage,
                "aria-labelledby": "cke-editor__aria-label_" + n
              },
              children: [_this413._voiceLabelView, {
                tag: "div",
                attributes: {
                  "class": "ck-editor__main",
                  role: "presentation"
                },
                children: _this413.main
              }]
            });
            return _this413;
          }

          _createClass(ZC, [{
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(ZC.prototype), "render", this).call(this), this.main.add(this.editable);
            }
          }, {
            key: "focus",
            value: function focus() {
              this.editable.element.focus();
            }
          }, {
            key: "_createVoiceLabel",
            value: function _createVoiceLabel(t, e) {
              var n = new Ru(),
                  i = e.t;
              return n.text = i("Comment editor"), n.extendTemplate({
                attributes: {
                  id: "ck-editor__aria-label_" + t,
                  "class": "ck-voice-label"
                }
              }), n;
            }
          }]);

          return ZC;
        }(Ou);

        var tT = ["document", "bind", "attachDomRoot", "locale", "destroy", "element", "init", "view", "setEditableElement", "render", "fire", "name", "focusTracker", "editable", "rootName", "editing"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(tT, 440);

        var eT = function eT(t, e) {
          return tT[t -= 0];
        };

        var nT = /*#__PURE__*/function (_wl2, _eT, _eT2, _eT3) {
          _inherits(nT, _wl2);

          var _super308 = _createSuper(nT);

          function nT(t) {
            var _this414;

            _classCallCheck(this, nT);

            _this414 = _super308.call(this, t), _this414[eT("0xf")] = new ZC(t[eT("0xb")], t[eT("0x7")].view);
            return _this414;
          }

          _createClass(nT, [{
            key: _eT,
            get: function get() {
              return this[eT("0xf")][eT("0xd")];
            }
          }, {
            key: _eT2,
            value: function value() {
              var t = this.editor[eT("0x7")][eT("0xf")],
                  e = this[eT("0xf")][eT("0x5")],
                  n = t[eT("0x8")].getRoot();
              e.name = n[eT("0x6")], this[eT("0xf")][eT("0x1")]();
              var i = e[eT("0xd")];
              this[eT("0x0")](e[eT("0x3")], i), this[eT("0x4")].add(i), this[eT("0xf")][eT("0x5")][eT("0x9")]("isFocused").to(this[eT("0x4")]), t[eT("0xa")](i), this[eT("0x2")]("ready");
            }
          }, {
            key: _eT3,
            value: function value() {
              this.view[eT("0xc")](), _get3(_getPrototypeOf(nT.prototype), eT("0xc"), this).call(this);
            }
          }]);

          return nT;
        }(wl, eT("0xd"), eT("0xe"), eT("0xc"));

        var iT = ["placeholder", "init", "get", "change", "createRoot", "focus", "editing", "assign", "defaultPlugins", "fire", "childCount", "getChild", "set", "then", "document", "_updatePlaceholder", "placeholderElement", "view", "destroy", "setSelection", "config", "end", "data", "plugins", "initialData", "name", "model", "create"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(iT, 253);

        var oT = function oT(t, e) {
          return iT[t -= 0];
        };

        var rT = /*#__PURE__*/function (_bl2, _oT, _oT2, _oT3, _oT4) {
          _inherits(rT, _bl2);

          var _super309 = _createSuper(rT);

          function rT() {
            var _this415;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

            _classCallCheck(this, rT);

            (t = Object[oT("0x6")]({}, t))[oT("0x16")] || (t[oT("0x16")] = rT[oT("0x7")]), _this415 = _super309.call(this, t), _this415.ui = new nT(_assertThisInitialized(_this415)), _this415[oT("0xb")]("placeholder", ""), _this415[oT("0x19")][oT("0xd")].on(oT("0x2"), function () {
              return _this415._updatePlaceholder();
            }, {
              priority: "low"
            }), _this415.on("change:placeholder", function () {
              return _this415[oT("0xe")]();
            }), _this415.model.document[oT("0x3")]();
            return _this415;
          }

          _createClass(rT, [{
            key: _oT,
            value: function value() {
              var _this416 = this;

              var t = this[oT("0x13")][oT("0x1")](oT("0x17")) || "";
              return this.initPlugins().then(function () {
                return _this416.ui[oT("0x0")]();
              })[oT("0xc")](function () {
                return _this416[oT("0x15")].init(t);
              })[oT("0xc")](function () {
                return _this416[oT("0x8")]("ready");
              });
            }
          }, {
            key: _oT2,
            value: function value() {
              var _this417 = this;

              return _get3(_getPrototypeOf(rT.prototype), oT("0x11"), this).call(this)[oT("0xc")](function () {
                return _this417.ui[oT("0x11")]();
              });
            }
          }, {
            key: _oT3,
            value: function value() {
              var _this418 = this;

              this[oT("0x19")][oT("0x2")](function (t) {
                var e = _this418[oT("0x19")][oT("0xd")].getRoot(),
                    n = e[oT("0xa")](e[oT("0x9")] - 1);

                t[oT("0x12")](n, oT("0x14")), _this418.editing.view[oT("0x4")]();
              });
            }
          }, {
            key: _oT4,
            value: function value() {
              var t = this[oT("0x5")][oT("0x10")],
                  e = t[oT("0xd")].getRoot(),
                  n = e[oT("0xa")](0);
              e.childCount > 1 || !n || "p" != n[oT("0x18")] ? this[oT("0xf")] && (function (t, e) {
                var n = e.document;
                t.change(function (t) {
                  if (!nh.has(n)) return;
                  var i = nh.get(n),
                      o = i.get(e);
                  t.removeAttribute("data-placeholder", o.hostElement), oh(t, o.hostElement), i["delete"](e);
                });
              }(t, this.placeholderElement), this.placeholderElement = void 0) : (ih({
                view: t,
                element: n,
                text: this[oT("0x1b")],
                keepOnFocus: !0
              }), this[oT("0xf")] = n);
            }
          }]);

          return rT;
        }(bl, oT("0x1a"), oT("0x11"), oT("0x4"), oT("0xe"));

        Object(o["default"])(rT, i["default"]), Object(o["default"])(rT, vl), rT[oT("0x7")] = [pg, Og, dm, zg, $g, bk];

        var sT = /*#__PURE__*/function (_Pd32) {
          _inherits(sT, _Pd32);

          var _super310 = _createSuper(sT);

          function sT(t) {
            var _this419;

            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            _classCallCheck(this, sT);

            _this419 = _super310.call(this, t);
            var n = t.t;
            _this419.editor = new rT(e), _this419.keystrokes = new Is(), _this419.focusTracker = new Ss(), _this419.set("value", e.initialData || ""), _this419.set("disabledSubmit", !1), _this419.set("showButtons", !0), _this419.set("placeholder", n("Reply...")), _this419.submitButtonView = _this419._createSubmitButton(), _this419.cancelButtonView = _this419._createCancelButton(), _this419.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck-comment__input-wrapper"]
              },
              children: [{
                tag: "div",
                attributes: {
                  "class": ["ck-comment__input-actions", _this419.bindTemplate["if"]("showButtons", "ck-comment__input-actions--active")]
                },
                children: [_this419.submitButtonView, _this419.cancelButtonView]
              }]
            }), _this419.keystrokes.set("Esc", function (t, e) {
              _this419.cancelButtonView.fire("execute"), e();
            }), _this419.on("submit", function (t, e) {
              e.length > 65e3 ? (alert(n({
                string: "Comment content is too long. Your comment has %0 characters but the limit is %1 characters.",
                id: "TOO_LONG_COMMENT_ALERT"
              }, [e.length, 65e3])), t.stop()) : _this419.editor.setData("");
            }, {
              priority: "high"
            });
            return _this419;
          }

          _createClass(sT, [{
            key: "render",
            value: function render() {
              var _this420 = this;

              _get3(_getPrototypeOf(sT.prototype), "render", this).call(this);

              var t = this.editor,
                  e = this.element;
              this.keystrokes.listenTo(e), this.focusTracker.add(e), this._editorCreationPromise = t.create().then(function () {
                e.insertBefore(t.ui.element, e.firstChild), t.model.document.on("change", function () {
                  return _this420.value = t.getData();
                }), t.bind("placeholder").to(_this420), _this420._initializeFocusCycling(t), _this420.fire("editorReady");
              });
            }
          }, {
            key: "focus",
            value: function focus() {
              this.editor.focus();
            }
          }, {
            key: "destroy",
            value: function () {
              var _destroy2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee38() {
                return regeneratorRuntime.wrap(function _callee38$(_context75) {
                  while (1) {
                    switch (_context75.prev = _context75.next) {
                      case 0:
                        _context75.t0 = this._isDestroyed;

                        if (_context75.t0) {
                          _context75.next = 11;
                          break;
                        }

                        this._isDestroyed = !0;
                        _context75.t1 = this.isRendered;

                        if (!_context75.t1) {
                          _context75.next = 9;
                          break;
                        }

                        _context75.next = 7;
                        return this._editorCreationPromise;

                      case 7:
                        _context75.next = 9;
                        return this.editor.destroy();

                      case 9:
                        _context75.next = 11;
                        return _get3(_getPrototypeOf(sT.prototype), "destroy", this).call(this);

                      case 11:
                      case "end":
                        return _context75.stop();
                    }
                  }
                }, _callee38, this);
              }));

              function destroy() {
                return _destroy2.apply(this, arguments);
              }

              return destroy;
            }()
          }, {
            key: "_createSubmitButton",
            value: function _createSubmitButton() {
              var _this421 = this;

              var t = new nu(this.locale),
                  e = this.locale.t;
              return t.extendTemplate({
                attributes: {
                  "class": ["ck-comment__input-actions--submit"]
                }
              }), t.label = e("Submit"), t.icon = Sd.check, t.on("execute", function () {
                _this421.fire("submit", _this421.value);
              }), t.bind("isEnabled").to(this, "value", this, "disabledSubmit", function (t, e) {
                return !e && !!t.trim();
              }), t;
            }
          }, {
            key: "_createCancelButton",
            value: function _createCancelButton() {
              var _this422 = this;

              var t = new nu(this.locale),
                  e = this.locale.t;
              return t.extendTemplate({
                attributes: {
                  "class": ["ck-comment__input-actions--cancel"]
                }
              }), t.label = e("Cancel"), t.icon = Sd.cancel, t.on("execute", function () {
                _this422.editor.setData(""), _this422.fire("cancel");
              }), t;
            }
          }, {
            key: "_initializeFocusCycling",
            value: function _initializeFocusCycling(t) {
              var e = this.focusTracker,
                  n = new Md();
              [t.ui.view, this.submitButtonView, this.cancelButtonView].forEach(function (t) {
                n.add(t), e.add(t.element);
              });
              var i = new su({
                focusables: n,
                focusTracker: e
              });
              this.keystrokes.set("tab", function (t, e) {
                i.focusNext(), e();
              }, {
                priority: "low"
              }), this.keystrokes.set("shift + tab", function (t, e) {
                i.focusPrevious(), e();
              }, {
                priority: "low"
              });
            }
          }]);

          return sT;
        }(Pd);

        n(378);
        var aT = ["ck-user", "ck-user__avatar", "push", "setTemplate", "avatar", "div", "name", "ck-user__img", "initials", "ck-user__anonymous", "url('", "isAnonymous"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(aT, 333);

        var cT = function cT(t, e) {
          return aT[t -= 0];
        };

        var lT = /*#__PURE__*/function (_Pd33) {
          _inherits(lT, _Pd33);

          var _super311 = _createSuper(lT);

          function lT(t, e) {
            var _this423;

            _classCallCheck(this, lT);

            _this423 = _super311.call(this, t), _this423.name = e[cT("0x9")];
            var n = ["ck", cT("0xa")];
            e[cT("0x2")] && n.push(cT("0x0")), e[cT("0x7")] && n[cT("0x5")](cT("0x4")), _this423[cT("0x6")]({
              tag: cT("0x8"),
              attributes: {
                "class": ["ck", cT("0x3")],
                "data-user-id": e.id
              },
              children: [{
                tag: cT("0x8"),
                attributes: {
                  "class": n,
                  style: {
                    "background-image": e[cT("0x7")] ? cT("0x1") + e[cT("0x7")] + "')" : ""
                  }
                }
              }, {
                tag: "div",
                attributes: {
                  "class": e[cT("0x7")] ? "ck ck-user__name ck-user__name--hidden" : "ck ck-user__name"
                },
                children: [{
                  text: e[cT("0xb")]
                }]
              }]
            });
            return _this423;
          }

          return lT;
        }(Pd);

        var dT = ["destroy", "ck-thread__input", "bindTemplate", "showInput", "extendTemplate", "showButtons", "commentInputView", "bind", "div", "ck-thread__user", "isFocused", "value", "userView", "set", "ck-comment__input-container--active", "focusTracker", "setTemplate", "ck-comment__input-container"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(dT, 218);

        var uT = function uT(t, e) {
          return dT[t -= 0];
        };

        var hT = /*#__PURE__*/function (_Pd34) {
          _inherits(hT, _Pd34);

          var _super312 = _createSuper(hT);

          function hT(t, e, n) {
            var _this424;

            _classCallCheck(this, hT);

            _this424 = _super312.call(this, t), _this424[uT("0x4")] = new sT(t, n), _this424.commentInputView[uT("0x5")](uT("0x3")).to(_this424[uT("0x4")][uT("0xd")], uT("0x8"), _this424.commentInputView, uT("0x9"), function (t, e) {
              return t || !!e;
            }), _this424[uT("0xb")](uT("0x1"), !1), _this424.userView = new lT(t, e), _this424[uT("0xa")][uT("0x2")]({
              attributes: {
                "class": uT("0x7")
              }
            }), _this424[uT("0x4")].extendTemplate({
              attributes: {
                "class": uT("0x11")
              }
            }), _this424[uT("0xe")]({
              tag: uT("0x6"),
              attributes: {
                "class": [uT("0xf"), _this424[uT("0x0")]["if"](uT("0x1"), uT("0xc"))]
              },
              children: [_this424.userView, _this424[uT("0x4")]]
            });
            return _this424;
          }

          _createClass(hT, [{
            key: "destroy",
            value: function destroy() {
              var _this425 = this;

              return this[uT("0x4")][uT("0x10")]().then(function () {
                return _get3(_getPrototypeOf(hT.prototype), uT("0x10"), _this425).call(_this425);
              });
            }
          }]);

          return hT;
        }(Pd);

        var fT = /*#__PURE__*/function (_Pd35) {
          _inherits(fT, _Pd35);

          var _super313 = _createSuper(fT);

          function fT(t) {
            var _this426;

            _classCallCheck(this, fT);

            _this426 = _super313.call(this, t);
            var e = t.t,
                n = _this426.bindTemplate;
            _this426.set("count"), _this426.setTemplate({
              tag: "li",
              attributes: {
                "class": "ck-thread__comment-count"
              },
              children: [{
                text: n.to("count", function (t) {
                  return e({
                    string: "%0 Comment",
                    plural: "%0 Comments",
                    id: "NUMBER_OF_COMMENTS"
                  }, t);
                })
              }]
            });
            return _this426;
          }

          return fT;
        }(Pd);

        var gT = ["_rearrangeExpand", "refreshVisibleViews", "maxCommentsWhenCollapsed", "insert", "weight", "isEditMode", "stopListening", "_updateHasDirtyComment", "formatDateTime", "_handleNewCommentModel", "commentViews", "count", "_handleRemoveCommentModel", "comments", "_rearrangeCollapse", "hasDirtyComment", "change:isActive", "visibleViews", "bind", "some", "isActive", "_model", "add", "change:hasDirtyComment", "listenTo", "delegate", "removeComment", "length", "locale", "_config", "_collapsedCommentsView", "delete", "set", "remove", "equal", "maxThreadTotalWeight", "createCollection", "get", "maxCommentCharsWhenCollapsed", "collapse", "ck-thread__comments", "destroy", "from", "focus", "editorConfig", "updateComment", "commentUpdated"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(gT, 326);

        var mT = function mT(t, e) {
          return gT[t -= 0];
        };

        var pT = /*#__PURE__*/function (_Pd36, _mT, _mT2, _mT3, _mT4, _mT5, _mT6, _mT7) {
          _inherits(pT, _Pd36);

          var _super314 = _createSuper(pT);

          function pT(t, e, n) {
            var _this427;

            _classCallCheck(this, pT);

            _this427 = _super314.call(this, t), _this427.set(mT("0x12"), !1), _this427[mT("0x23")]("length", e[mT("0x10")].length), _this427[mT("0x23")]("isActive", !1), _this427[mT("0x18")] = e, _this427[mT("0x20")] = n, _this427.commentViews = _this427[mT("0x27")](), _this427[mT("0x14")] = _this427[mT("0x27")](), _this427[mT("0x21")] = new fT(t), _this427._collapsedCommentsView[mT("0x15")]("count").to(_assertThisInitialized(_this427), mT("0x1e"), function (t) {
              return t - _this427[mT("0x20")][mT("0x5")];
            });

            var _iterator514 = _createForOfIteratorHelper(e.comments),
                _step514;

            try {
              for (_iterator514.s(); !(_step514 = _iterator514.n()).done;) {
                var _t411 = _step514.value;

                _this427[mT("0xc")](_t411);
              }
            } catch (err) {
              _iterator514.e(err);
            } finally {
              _iterator514.f();
            }

            _this427[mT("0x1b")](e[mT("0x10")], mT("0x19"), function (t, e) {
              _this427[mT("0x1e")]++, _this427._handleNewCommentModel(e), _this427[mT("0x4")]();
            }), _this427.listenTo(e[mT("0x10")], "remove", function (t, e) {
              _this427[mT("0x1e")]--, _this427[mT("0xf")](e), _this427[mT("0x4")]();
            }), _this427[mT("0x1b")](e, mT("0x2"), function () {
              return _this427[mT("0x4")]();
            }), _this427.on(mT("0x13"), function () {
              return _this427[mT("0x4")]();
            }), _this427.on(mT("0x1a"), function () {
              return _this427[mT("0x4")]();
            }), _this427.setTemplate({
              tag: "ul",
              attributes: {
                "class": [mT("0x2b")]
              },
              children: _this427[mT("0x14")]
            });
            return _this427;
          }

          _createClass(pT, [{
            key: "_shouldCollapse",
            get: function get() {
              return this[mT("0x18")][mT("0x7")] > this._config[mT("0x26")] && !this[mT("0x17")] && !this[mT("0x12")];
            }
          }, {
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(pT.prototype), "render", this).call(this), this.refreshVisibleViews();
            }
          }, {
            key: _mT,
            value: function value() {
              this.element[mT("0x2e")]();
            }
          }, {
            key: _mT2,
            value: function value() {
              this[mT("0x21")][mT("0x2c")]();

              var _iterator515 = _createForOfIteratorHelper(this[mT("0xd")]),
                  _step515;

              try {
                for (_iterator515.s(); !(_step515 = _iterator515.n()).done;) {
                  var _t412 = _step515.value;

                  _t412.destroy();
                }
              } catch (err) {
                _iterator515.e(err);
              } finally {
                _iterator515.f();
              }

              _get3(_getPrototypeOf(pT.prototype), "destroy", this).call(this);
            }
          }, {
            key: _mT3,
            value: function value() {
              this._shouldCollapse ? this[mT("0x11")]() : this[mT("0x3")]();
            }
          }, {
            key: _mT4,
            value: function value(t) {
              var _this428 = this;

              var e = new this[mT("0x20")].CommentView(this[mT("0x1f")], t, {
                maxCommentCharsWhenCollapsed: this[mT("0x20")][mT("0x29")],
                formatDateTime: this._config[mT("0xb")],
                editorConfig: this[mT("0x20")][mT("0x0")]
              });
              e.viewUid = t.id, e.delegate(mT("0x1d")).to(this), e[mT("0x1c")](mT("0x1")).to(this), this[mT("0x1b")](e, "change:isEditMode", function () {
                return _this428[mT("0xa")]();
              }), this[mT("0xd")][mT("0x19")](e);
            }
          }, {
            key: "_handleRemoveCommentModel",
            value: function _handleRemoveCommentModel(t) {
              var e = this.commentViews[mT("0x24")](t.id);
              this[mT("0x9")](e), e[mT("0x8")] && this[mT("0xa")](), e.destroy();
            }
          }, {
            key: _mT5,
            value: function value() {
              this.hasDirtyComment = Array.from(this[mT("0xd")])[mT("0x16")](function (t) {
                return t[mT("0x8")];
              });
            }
          }, {
            key: _mT6,
            value: function value() {
              var t = function (t) {
                var e = new on["default"]();

                var _iterator516 = _createForOfIteratorHelper(t),
                    _step516;

                try {
                  for (_iterator516.s(); !(_step516 = _iterator516.n()).done;) {
                    var _n332 = _step516.value;
                    e[mT("0x19")](_n332);
                  }
                } catch (err) {
                  _iterator516.e(err);
                } finally {
                  _iterator516.f();
                }

                return e;
              }(this[mT("0xd")]),
                  e = this[mT("0x21")][mT("0xe")];

              for (var _n333 = 1; _n333 <= e; _n333++) {
                t[mT("0x24")](1);
              }

              var _iterator517 = _createForOfIteratorHelper(t),
                  _step517;

              try {
                for (_iterator517.s(); !(_step517 = _iterator517.n()).done;) {
                  var _e367 = _step517.value;

                  _e367[mT("0x2a")]();
                }
              } catch (err) {
                _iterator517.e(err);
              } finally {
                _iterator517.f();
              }

              e > 0 && t[mT("0x19")](this[mT("0x21")], 1), bT(jo(Array[mT("0x2d")](this.visibleViews), Array.from(t)), this[mT("0x14")], t);
            }
          }, {
            key: _mT7,
            value: function value() {
              bT(jo(Array[mT("0x2d")](this[mT("0x14")]), Array[mT("0x2d")](this[mT("0xd")])), this[mT("0x14")], this[mT("0xd")]);

              var _iterator518 = _createForOfIteratorHelper(this.visibleViews),
                  _step518;

              try {
                for (_iterator518.s(); !(_step518 = _iterator518.n()).done;) {
                  var _t413 = _step518.value;

                  _t413.expand();
                }
              } catch (err) {
                _iterator518.e(err);
              } finally {
                _iterator518.f();
              }
            }
          }]);

          return pT;
        }(Pd, mT("0x2e"), mT("0x2c"), mT("0x4"), mT("0xc"), mT("0xa"), mT("0x11"), mT("0x3"));

        function bT(t, e, n) {
          var i = 0;

          var _iterator519 = _createForOfIteratorHelper(t),
              _step519;

          try {
            for (_iterator519.s(); !(_step519 = _iterator519.n()).done;) {
              var _o140 = _step519.value;

              switch (_o140) {
                case mT("0x6"):
                  e[mT("0x19")](n[mT("0x28")](i), i), i++;
                  break;

                case mT("0x22"):
                  e[mT("0x24")](i);
                  break;

                case mT("0x25"):
                  i++;
              }
            }
          } catch (err) {
            _iterator519.e(err);
          } finally {
            _iterator519.f();
          }
        }

        var kT = /*#__PURE__*/function (_Pd37) {
          _inherits(kT, _Pd37);

          var _super315 = _createSuper(kT);

          function kT(t, e, n, i) {
            var _this429;

            _classCallCheck(this, kT);

            _this429 = _super315.call(this, t), _this429.set("isActive", !1), _this429.set("isDirty", !1), _this429._model = e, _this429._localUser = n, _this429._config = i, _this429.commentsListView = new pT(t, e, Object.assign({
              CommentView: _this429._config.CommentView
            }, i)), _this429.commentsListView.delegate("removeComment").to(_assertThisInitialized(_this429)), _this429.commentsListView.delegate("updateComment").to(_assertThisInitialized(_this429)), _this429.commentsListView.bind("isActive").to(_assertThisInitialized(_this429)), _this429.set("length", _this429.commentsListView.length), _this429.bind("length").to(_this429.commentsListView, "length"), _this429.commentThreadInputView = _this429._createCommentThreadInputView(), _this429.on("removeComment", function () {
              return _this429.focus();
            }), _this429.bind("isDirty").to(_this429.commentsListView, "hasDirtyComment", _this429.commentThreadInputView.commentInputView, "value", function (t, e) {
              return t || !!e;
            });
            return _this429;
          }

          _createClass(kT, [{
            key: "focus",
            value: function focus() {
              this.element.focus();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.isDirty = !1, this.commentsListView.destroy(), this.commentThreadInputView.destroy(), _get3(_getPrototypeOf(kT.prototype), "destroy", this).call(this);
            }
          }, {
            key: "_createCommentThreadInputView",
            value: function _createCommentThreadInputView() {
              var _this430 = this;

              var t = this.locale.t,
                  e = new hT(this.locale, this._localUser, this._config.editorConfig),
                  n = e.commentInputView;
              return e.bind("showInput").to(this, "isActive", this._model, "isReadOnly", n, "value", function (t, e, n) {
                return !!n || t && !e;
              }), n.bind("placeholder").to(this, "length", function (e) {
                return t(e ? "Reply..." : "Write a comment...");
              }), n.on("submit", function (t, e) {
                _this430.fire("addComment", e);
              }), n.on("cancel", function () {
                _this430.focus();
              }), n.bind("disabledSubmit").to(this._model, "isReadOnly"), n.on("cancel", function (t) {
                0 == _this430.length && (_this430.fire("removeCommentThread"), t.stop());
              }), this.on("change:isActive", function (t, e, i) {
                i || _this430.length || n.value || _this430.fire("removeCommentThread");
              }), e;
            }
          }]);

          return kT;
        }(Pd);

        var _T = ["element", "deregisterChild", "message", "destroy", "once", "fire", "isConfirm", "render", "cancel", "_removeConfirm", "confirmView", "set", "submit", "registerChild", "locale", "remove"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(_T, 362);

        var wT = function wT(t, e) {
          return _T[t -= 0];
        },
            vT = {
          showConfirm: function showConfirm(t, e) {
            var _this433 = this;

            return this[wT("0x0")] = new ( /*#__PURE__*/function (_Pd38) {
              _inherits(_class10, _Pd38);

              var _super316 = _createSuper(_class10);

              function _class10(t) {
                var _this431;

                _classCallCheck(this, _class10);

                _this431 = _super316.call(this, t);
                var e = t.t,
                    n = _this431.bindTemplate;
                _this431.submitView = _this431._createButtonView(t, e("Yes"), Sd.check, "submit"), _this431.cancelView = _this431._createButtonView(t, e("No"), Sd.cancel, "cancel"), _this431.set("message", e("Are you sure?")), _this431.setTemplate({
                  tag: "div",
                  attributes: {
                    "class": ["ck-thread__remove-confirm"]
                  },
                  children: [{
                    tag: "div",
                    attributes: {
                      "class": "ck-thread__remove-confirm-inner"
                    },
                    children: [{
                      tag: "p",
                      children: [{
                        text: n.to("message")
                      }]
                    }, {
                      tag: "div",
                      attributes: {
                        "class": "ck-thread__remove-confirm-actions"
                      },
                      children: [_this431.submitView, _this431.cancelView]
                    }]
                  }]
                });
                return _this431;
              }

              _createClass(_class10, [{
                key: "_createButtonView",
                value: function _createButtonView(t, e, n, i) {
                  var _this432 = this;

                  var o = new nu(t);
                  return o.label = e, o.icon = n, o.extendTemplate({
                    attributes: {
                      "class": "ck-thread__remove-confirm-" + i
                    }
                  }), o.on("execute", function () {
                    return _this432.fire(i);
                  }), o;
                }
              }]);

              return _class10;
            }(Pd))(this[wT("0x4")]), this.confirmView[wT("0xd")](), this[wT("0x0")][wT("0x8")] = t, this[wT("0x0")][wT("0xa")](wT("0xe"), function () {
              _this433[wT("0xf")]();
            }), this[wT("0x0")][wT("0xa")](wT("0x2"), function () {
              _this433[wT("0xf")]();
            }), e.appendChild(this.confirmView[wT("0x6")]), this[wT("0x3")](this[wT("0x0")]), this[wT("0x1")]("isConfirm", !0), new Promise(function (t) {
              return _this433.confirmView.on(wT("0x2"), t);
            });
          },
          cancelConfirm: function cancelConfirm() {
            this[wT("0xc")] && this[wT("0x0")][wT("0xb")](wT("0xe"));
          },
          _removeConfirm: function _removeConfirm() {
            this[wT("0x0")][wT("0x6")][wT("0x5")](), this[wT("0x7")](this.confirmView), this[wT("0xc")] = !1, this[wT("0x0")][wT("0x9")](), delete this[wT("0x0")];
          }
        };

        var yT = /*#__PURE__*/function (_kT) {
          _inherits(yT, _kT);

          var _super317 = _createSuper(yT);

          function yT(t, e, n, i) {
            var _this434;

            _classCallCheck(this, yT);

            _this434 = _super317.call(this, t, e, n, i), _this434.set("actionIndicator", null), _this434.containerElement = null, _this434.locale = t, _this434.setTemplate(_this434._getTemplate()), _this434.on("change:isActive", function (t, e, n) {
              n || _this434._cancelAllConfirms();
            }), _this434.listenTo(_this434._model, "change:isReadOnly", function (t, e, n) {
              n && _this434._cancelAllConfirms();
            }), _this434.length > 0 ? _this434._bindFirstCommentView() : _this434.listenTo(_this434.commentsListView.commentViews, "add", function (t) {
              _this434._bindFirstCommentView(), t.off();
            });
            return _this434;
          }

          _createClass(yT, [{
            key: "_getTemplate",
            value: function _getTemplate() {
              var t = this.bindTemplate;
              return {
                tag: "div",
                attributes: {
                  "class": ["ck-thread", t["if"]("isActive", "ck-thread--active"), t["if"]("isConfirm", "ck-thread--remove-confirmation"), t.to("actionIndicator", function (t) {
                    return t ? "ck-thread--" + t : "";
                  })],
                  "data-thread-id": this._model.id,
                  tabindex: -1
                },
                children: [{
                  tag: "div",
                  attributes: {
                    "class": "ck-thread__container"
                  },
                  children: [this.commentsListView, this.commentThreadInputView]
                }]
              };
            }
          }, {
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(yT.prototype), "render", this).call(this), this.containerElement = this.element.querySelector(".ck-thread__container");
            }
          }, {
            key: "_cancelAllConfirms",
            value: function _cancelAllConfirms() {
              this.cancelConfirm();

              var _iterator520 = _createForOfIteratorHelper(this.commentsListView.commentViews),
                  _step520;

              try {
                for (_iterator520.s(); !(_step520 = _iterator520.n()).done;) {
                  var _t414 = _step520.value;

                  _t414.cancelConfirm();
                }
              } catch (err) {
                _iterator520.e(err);
              } finally {
                _iterator520.f();
              }
            }
          }, {
            key: "_bindFirstCommentView",
            value: function _bindFirstCommentView() {
              var _this435 = this;

              var t = this.locale.t,
                  e = this.commentsListView.commentViews.get(0);
              this.bind("actionIndicator").to(e, "actionIndicator", function (t) {
                return "remove" === t ? "remove" : null;
              }), e.placeholder = t("Write a comment..."), e.removeButton.on("execute", function (e) {
                e.stop(), _this435.showConfirm(t("Delete comment thread?"), _this435.containerElement).then(function () {
                  _this435.fire("removeCommentThread");
                });
              }, {
                priority: "high"
              });
            }
          }]);

          return yT;
        }(kT);

        Object(o["default"])(yT, vT);
        var xT = ["ck-comment__content", "render", "content", "change:content", "innerHTML", "div", "setTemplate", "ck-annotation__content", "element"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(xT, 276);

        var CT = function CT(t, e) {
          return xT[t -= 0];
        };

        var TT = /*#__PURE__*/function (_Pd39, _CT) {
          _inherits(TT, _Pd39);

          var _super318 = _createSuper(TT);

          function TT(t) {
            var _this436;

            _classCallCheck(this, TT);

            _this436 = _super318.call(this, t), _this436.set("content", ""), _this436[CT("0x0")]({
              tag: CT("0x8"),
              attributes: {
                "class": [CT("0x3"), CT("0x1")]
              }
            });
            return _this436;
          }

          _createClass(TT, [{
            key: _CT,
            value: function value() {
              var _this437 = this;

              _get3(_getPrototypeOf(TT.prototype), CT("0x4"), this).call(this), this.on(CT("0x6"), function (t, e, n) {
                _this437[CT("0x2")].innerHTML = n;
              }), this[CT("0x2")][CT("0x7")] = this[CT("0x5")];
            }
          }]);

          return TT;
        }(Pd, CT("0x4"));

        var AT = ["push", "startsWith", "match", "indexOf", "...", "pop", "join", "replace", "slice", "length", "split"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(AT, 400);

        var ET = function ET(t, e) {
          return AT[t -= 0];
        };

        function ST(t, _ref104) {
          var e = _ref104.limit,
              _ref104$suffix = _ref104.suffix,
              n = _ref104$suffix === void 0 ? ET("0x0") : _ref104$suffix;
          var i = [];
          var o = 0;
          var r = t[ET("0x3")](/</g, "\n<")[ET("0x3")](/>/g, ">\n").replace(/^\n/g, "")[ET("0x3")](/\n$/g, "")[ET("0x6")]("\n");

          for (var _t415 = 0; _t415 < r[ET("0x5")]; _t415++) {
            var _s52 = r[_t415];

            var _a77 = IT(_s52);

            if (_s52[ET("0x8")]("<")) {
              if (o >= e) {
                var _t416 = _s52[ET("0x9")](/[a-zA-Z]+/)[0];

                _s52[ET("0x8")]("</") ? (i.length && (_s52 = ""), i[ET("0x1")]()) : (i.push(_t416), _s52 = "");
              }
            } else if (o >= e) _s52 = "";else if (o + _a77[ET("0x5")] >= e) {
              var _t417 = e - o;

              if (" " === _a77[_t417 - 1]) _t417--;else {
                var _e368 = _a77[ET("0x4")](_t417)[ET("0xa")](" ");

                -1 !== _e368 ? _t417 += _e368 : _t417 = _s52.length;
              }
              _s52 = _a77[ET("0x4")](0, _t417)[ET("0x2")]("") + n, o = e;
            } else o += _a77[ET("0x5")];

            r[_t415] = _s52;
          }

          return r[ET("0x2")]("\n")[ET("0x3")](/\n/g, "");
        }

        function IT(t) {
          var e = [];

          for (var _n334 = 0; _n334 < t.length; _n334++) {
            var _i266 = t.substring(_n334)[ET("0x9")](/^&[a-z0-9#]+;/);

            if (_i266) {
              var _t418 = _i266[0];
              e.push(_t418), _n334 += _t418.length - 1;
            } else e[ET("0x7")](t[_n334]);
          }

          return e;
        }

        var OT = ["switchToDisplayMode", "once", "isCollapsed", "get", "value", "_createCommentInputView", "_config", "bind", "editorReady", "element", "_createCommentContentView", "collapse", "updateComment", "_model", "add", "content", "createCollection", "visibleView", "isEditMode", "isReadOnly", "remove", "editorConfig", "focus", "submit", "destroy", "set", "locale"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(OT, 312);

        var RT = function RT(t, e) {
          return OT[t -= 0];
        };

        var MT = /*#__PURE__*/function (_Pd40, _RT, _RT2, _RT3, _RT4, _RT5) {
          _inherits(MT, _Pd40);

          var _super319 = _createSuper(MT);

          function MT(t, e, n) {
            var _this438;

            _classCallCheck(this, MT);

            _this438 = _super319.call(this, t), _this438[RT("0x19")] = e, _this438[RT("0x12")] = n, _this438.set(RT("0x3"), !1), _this438[RT("0xa")](RT("0xe"), !0), _this438[RT("0x2")] = _this438[RT("0x1")](), _this438[RT("0x2")][RT("0x1a")](_this438[RT("0x16")]());
            return _this438;
          }

          _createClass(MT, [{
            key: "expand",
            value: function expand() {
              this[RT("0xe")] = !1;
            }
          }, {
            key: _RT,
            value: function value() {
              this.isEditMode || (this[RT("0xe")] = !0);
            }
          }, {
            key: _RT2,
            value: function value() {
              this[RT("0x15")][RT("0x7")]();
            }
          }, {
            key: _RT3,
            value: function () {
              var _value = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee39() {
                return regeneratorRuntime.wrap(function _callee39$(_context76) {
                  while (1) {
                    switch (_context76.prev = _context76.next) {
                      case 0:
                        _context76.next = 2;
                        return this[RT("0x2")][RT("0xf")](0)[RT("0x9")]();

                      case 2:
                        _get3(_getPrototypeOf(MT.prototype), "destroy", this).call(this);

                      case 3:
                      case "end":
                        return _context76.stop();
                    }
                  }
                }, _callee39, this);
              }));

              function value() {
                return _value.apply(this, arguments);
              }

              return value;
            }()
          }, {
            key: "switchToEditMode",
            value: function switchToEditMode() {
              this[RT("0x3")] || (this[RT("0x3")] = !0, this[RT("0x2")][RT("0x5")](0)[RT("0x9")](), this[RT("0x2")][RT("0x1a")](this[RT("0x11")]()));
            }
          }, {
            key: "switchToDisplayMode",
            value: function switchToDisplayMode() {
              this[RT("0x3")] && (this.isEditMode = !1, this[RT("0x2")].remove(0)[RT("0x9")](), this.visibleView[RT("0x1a")](this[RT("0x16")]()));
            }
          }, {
            key: _RT4,
            value: function value() {
              var _this439 = this;

              var t = new TT(this[RT("0xb")]);
              return t[RT("0x13")](RT("0x0")).to(this[RT("0x19")], RT("0x0"), this, RT("0xe"), function (t, e) {
                return e ? ST(t, {
                  limit: _this439[RT("0x12")].maxCommentCharsWhenCollapsed
                }) : t;
              }), t;
            }
          }, {
            key: _RT5,
            value: function value() {
              var _this440 = this;

              this[RT("0x12")][RT("0x6")] || (this[RT("0x12")][RT("0x6")] = {}), this[RT("0x12")][RT("0x6")].initialData = this[RT("0x19")][RT("0x0")];
              var t = new sT(this.locale, this[RT("0x12")][RT("0x6")]);
              return t[RT("0x10")] = this._model[RT("0x0")], t[RT("0x13")]("disabledSubmit").to(this[RT("0x19")], RT("0x4")), t.on(RT("0x8"), function (t, e) {
                _this440.fire(RT("0x18"), _this440._model.id, e), _this440[RT("0xc")](), _this440[RT("0x7")]();
              }), t.on("cancel", function () {
                _this440[RT("0xc")](), _this440.focus();
              }), t[RT("0xd")](RT("0x14"), function () {
                t[RT("0x7")]();
              }), t;
            }
          }]);

          return MT;
        }(Pd, RT("0x17"), RT("0x7"), RT("0x9"), RT("0x16"), RT("0x11"));

        var PT = n(175),
            NT = n.n(PT);

        var DT = /*#__PURE__*/function (_MT) {
          _inherits(DT, _MT);

          var _super320 = _createSuper(DT);

          function DT(t, e, n) {
            var _this441;

            _classCallCheck(this, DT);

            _this441 = _super320.call(this, t, e, n);
            var i = _this441.locale.t;
            _this441.set("actionIndicator", null), _this441.set("placeholder", i("Reply...")), _this441.set("createdAt", null), _this441.bind("createdAt").to(e), _this441.editButton = _this441._createEditButton(), _this441.removeButton = _this441._createRemoveButton(), _this441.userView = new lT(t, e.author), _this441.userView.extendTemplate({
              attributes: {
                "class": ["ck-comment__user", "ck-annotation__user"]
              }
            }), _this441.listenTo(e, "change:isRemovable", function () {
              return _this441.cancelConfirm();
            }), _this441.setTemplate(_this441._getTemplate());
            return _this441;
          }

          _createClass(DT, [{
            key: "_getTemplate",
            value: function _getTemplate() {
              var _this442 = this;

              var t = this.bindTemplate;
              return {
                tag: "li",
                attributes: {
                  "class": ["ck-comment__wrapper", t["if"]("isConfirm", "ck-comment--remove-confirmation")],
                  tabindex: -1
                },
                children: [{
                  tag: "div",
                  attributes: {
                    "class": ["ck-comment", "ck-annotation", t["if"]("isEditMode", "ck-comment--edit"), t.to("actionIndicator", function (t) {
                      return t ? "ck-comment--" + t : "";
                    })],
                    "data-author-id": this._model.author.id,
                    "data-comment-id": this._model.id
                  },
                  children: [this.userView, {
                    tag: "div",
                    attributes: {
                      "class": ["ck-comment__main", "ck-annotation__main"]
                    },
                    children: [{
                      tag: "div",
                      attributes: {
                        "class": ["ck-comment__info", "ck-annotation__info"]
                      },
                      children: [{
                        tag: "span",
                        children: [{
                          text: this.userView.name
                        }],
                        attributes: {
                          "class": ["ck-comment__info-name", "ck-annotation__info-name"]
                        }
                      }, {
                        tag: "time",
                        attributes: {
                          datetime: t.to("createdAt"),
                          "class": ["ck-comment__info-time", "ck-annotation__info-time"]
                        },
                        children: [{
                          text: t.to("createdAt", function (t) {
                            return _this442._config.formatDateTime(t);
                          })
                        }]
                      }]
                    }, {
                      tag: "div",
                      attributes: {
                        "class": ["ck-comment__actions", "ck-annotation__actions", t["if"]("isEditMode", "ck-comment__actions--hidden"), t["if"]("isEditMode", "ck-annotation__actions--hidden")]
                      },
                      children: [this.editButton, this.removeButton]
                    }, {
                      tag: "div",
                      attributes: {
                        "class": ["ck-annotation__content-wrapper"]
                      },
                      children: this.visibleView
                    }]
                  }]
                }]
              };
            }
          }, {
            key: "_createEditButton",
            value: function _createEditButton() {
              var _this443 = this;

              var t = this.locale.t,
                  e = new nu(this.locale);
              return e.label = t("Edit"), e.icon = Sd.pencil, e.extendTemplate({
                attributes: {
                  "class": "ck-comment--edit"
                }
              }), e.bind("isEnabled").to(this._model, "isReadOnly", function (t) {
                return !t;
              }), e.bind("isVisible").to(this._model, "isEditable"), e.on("execute", function () {
                return _this443.switchToEditMode();
              }), e;
            }
          }, {
            key: "_createRemoveButton",
            value: function _createRemoveButton() {
              var _this444 = this;

              var t = this.locale.t,
                  e = new nu(this.locale);
              return e.label = t("Remove"), e.icon = NT.a, e.extendTemplate({
                attributes: {
                  "class": "ck-comment--remove"
                }
              }), e.bind("isEnabled").to(this._model, "isReadOnly", function (t) {
                return !t;
              }), e.bind("isVisible").to(this._model, "isRemovable"), e.on("execute", function () {
                _this444.showConfirm(t("Delete comment?"), _this444.element).then(function () {
                  _this444.fire("removeComment", _this444._model.id);
                });
              }), e;
            }
          }, {
            key: "_attachActions",
            value: function _attachActions(t, e) {
              var _this445 = this;

              this.listenTo(t, "mouseenter", function () {
                return _this445.actionIndicator = e;
              }), this.listenTo(t, "focus", function () {
                return _this445.actionIndicator = e;
              }), this.listenTo(t, "mouseleave", function () {
                return _this445.actionIndicator = null;
              }), this.listenTo(t, "blur", function () {
                return _this445.actionIndicator = null;
              });
            }
          }, {
            key: "_createCommentInputView",
            value: function _createCommentInputView() {
              var t = _get3(_getPrototypeOf(DT.prototype), "_createCommentInputView", this).call(this);

              return t.bind("placeholder").to(this), t;
            }
          }, {
            key: "render",
            value: function render() {
              _get3(_getPrototypeOf(DT.prototype), "render", this).call(this), this._attachActions(this.editButton.element, "edit"), this._attachActions(this.removeButton.element, "remove");
            }
          }]);

          return DT;
        }(MT);

        function jT(t, e) {
          var n = t.t;
          if ("PENDING_ACTION_COMMENT_THREAD" == e) return n({
            string: "Unsaved change in comment thread.",
            id: "PENDING_ACTION_COMMENT_THREAD"
          });
        }

        Object(o["default"])(DT, vT);
        n(380), n(382), n(384);
        var BT = ["attributeName", "disconnect", "type", "childList"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(BT, 374);

        var LT = function LT(t, e) {
          return BT[t -= 0];
        };

        function zT(t) {
          var e = _f(t, 30),
              n = new MutationObserver(function (t) {
            var _iterator521 = _createForOfIteratorHelper(t),
                _step521;

            try {
              for (_iterator521.s(); !(_step521 = _iterator521.n()).done;) {
                var _n335 = _step521.value;
                ("attributes" == _n335[LT("0x0")] && "class" == _n335[LT("0x2")] || LT("0x1") == _n335.type) && e();
              }
            } catch (err) {
              _iterator521.e(err);
            } finally {
              _iterator521.f();
            }
          });

          return {
            attach: function attach(t) {
              n.observe(t, {
                attributes: !0,
                childList: !0,
                subtree: !0
              });
            },
            detach: function detach() {
              n[LT("0x3")](), e.cancel();
            }
          };
        }

        n(386);
        var FT = ["setTemplate", "ck-rounded-corners", "div", "length", "bindTemplate", "fire", "_updateHeight", "set", "render", "detach", "mainView", "_mutationObserver", "clientHeight", "ck-annotation-wrapper", "attach", "isDirty", "isActive", "focus", "focusTracker", "destroy", "content", "type", "height", "createCollection", "keystrokes", "add", "targetRect", "listenTo", "ck-annotation-wrapper--active", "Esc", "element"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(FT, 294);

        var VT = function VT(t, e) {
          return FT[t -= 0];
        };

        var UT = /*#__PURE__*/function (_Pd41, _VT, _VT2) {
          _inherits(UT, _Pd41);

          var _super321 = _createSuper(UT);

          function UT(t, e) {
            var _this446;

            _classCallCheck(this, UT);

            _this446 = _super321.call(this, t), _this446.id = Object(Xo.a)(), _this446[VT("0x3")] = new Ss(), _this446.keystrokes = new Is(), _this446.keystrokes[VT("0x17")](VT("0xe"), function (t, e) {
              return _this446[VT("0x15")](VT("0xe"), e);
            }), _this446[VT("0x17")](VT("0xb"), {
              top: 0,
              right: 0,
              bottom: 0,
              left: 0
            }), _this446[VT("0x17")](VT("0x7"), 0), _this446[VT("0x17")](VT("0x1"), !1), _this446.set(VT("0x0"), !1), _this446[VT("0x17")](VT("0x13"), 0), _this446[VT("0x17")](VT("0x6"), ""), _this446[VT("0x1b")] = zT(function () {
              return _this446[VT("0x16")]();
            }), _this446[VT("0x5")] = _this446[VT("0x8")](), _this446[VT("0x5")][VT("0xa")](e), _this446[VT("0x1a")] = e;

            var n = _this446[VT("0x14")];

            _this446[VT("0x10")]({
              tag: VT("0x12"),
              attributes: {
                "class": ["ck", VT("0x1d"), VT("0x11"), n["if"](VT("0x1"), VT("0xd"))],
                tabindex: -1
              },
              children: _this446[VT("0x5")]
            });

            return _this446;
          }

          _createClass(UT, [{
            key: _VT,
            value: function value() {
              _get3(_getPrototypeOf(UT.prototype), VT("0x18"), this).call(this), this[VT("0x3")][VT("0xa")](this[VT("0xf")]), this[VT("0x9")][VT("0xc")](this[VT("0xf")]), this._mutationObserver[VT("0x1e")](this.element);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this[VT("0x5")].clear(), this[VT("0x9")][VT("0x4")](), this[VT("0x3")][VT("0x4")](), this[VT("0x1b")][VT("0x19")](), _get3(_getPrototypeOf(UT.prototype), VT("0x4"), this).call(this);
            }
          }, {
            key: _VT2,
            value: function value() {
              this.element[VT("0x2")]();
            }
          }, {
            key: "_updateHeight",
            value: function _updateHeight() {
              var t = this[VT("0xf")][VT("0x1c")];
              t && (this[VT("0x7")] = t);
            }
          }]);

          return UT;
        }(Pd, VT("0x18"), VT("0x2"));

        var HT = ["render", "add", "stopListening", "function", "remove", "mainView", "target", "isActive", "annotation-invalid-target", "_id", "element", "view", "targetRect", "focusableElements", "_assertCorrectTarget", "focusTracker", "updateTargetRect", "_type", "clear", "_target"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(HT, 110);

        var qT = function qT(t, e) {
          return HT[t -= 0];
        };

        var WT = /*#__PURE__*/function (_qT, _qT2, _qT3, _qT4, _qT5, _qT6) {
          function WT(_ref105) {
            var _this447 = this;

            var t = _ref105.view,
                e = _ref105.target,
                n = _ref105.type;

            _classCallCheck(this, WT);

            this[qT("0x1")] = t, this[qT("0x1")][qT("0x0")] || this[qT("0x1")][qT("0xa")](), this._type = n, this[qT("0x9")] = e, this._assertCorrectTarget(), this.focusableElements = new on["default"]([this[qT("0x1")].element], {
              idProperty: qT("0x13")
            }), this.focusableElements.on("add", function (t, e) {
              _this447[qT("0x1")][qT("0x5")][qT("0xb")](e);
            }), this[qT("0x3")].on(qT("0xe"), function (t, e) {
              _this447[qT("0x1")].focusTracker[qT("0xe")](e);
            });
          }

          _createClass(WT, [{
            key: "type",
            get: function get() {
              return qT("0xd") == typeof this[qT("0x7")] ? this[qT("0x7")]() : this[qT("0x7")];
            }
          }, {
            key: "innerView",
            get: function get() {
              return this[qT("0x1")][qT("0xf")];
            }
          }, {
            key: _qT,
            get: function get() {
              return "function" == typeof this[qT("0x9")] ? this._target() : this[qT("0x9")];
            }
          }, {
            key: _qT2,
            get: function get() {
              var t = this[qT("0x10")];
              return this[qT("0x4")](), null === t ? null : new ws(t);
            }
          }, {
            key: _qT3,
            get: function get() {
              return this[qT("0x1")][qT("0x11")];
            }
          }, {
            key: _qT4,
            set: function set(t) {
              this[qT("0x1")][qT("0x11")] = t, this[qT("0x1")][qT("0xf")][qT("0x11")] = t;
            }
          }, {
            key: _qT5,
            value: function value() {
              this[qT("0x1")][qT("0x2")] = this[qT("0x2")];
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this[qT("0x3")][qT("0xc")](), this[qT("0x3")][qT("0x8")]();
            }
          }, {
            key: _qT6,
            value: function value() {
              var t = this[qT("0x10")];
              if (!(null === t || t instanceof ws || Ze(t))) throw new rn["default"](qT("0x12"), null, {
                target: t
              });
            }
          }]);

          return WT;
        }(qT("0x10"), qT("0x2"), qT("0x11"), qT("0x11"), qT("0x6"), qT("0x4"));

        var $T = ["_sort", "_getOrderInContent", "get", "delete", "focus", "destroy", "top", "listenTo", "isFocused", "from", "innerView", "getByInnerView", "clear", "fire", "left", "length", "focusTracker", "annotationcollection-not-existing-item", "getByView", "targetRect", "focusableElements", "add", "_innerViewToAnnotation", "set", "has", "updateTargetRect", "getIndex", "_viewToAnnotation", "blur", "target", "change:isFocused", "view", "remove", "_focusTracker", "stopListening"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }($T, 336);

        var YT = function YT(t, e) {
          return $T[t -= 0];
        };

        var JT = /*#__PURE__*/function (_on$default3, _YT, _YT2, _YT3, _YT4, _YT5, _YT6, _YT7) {
          _inherits(JT, _on$default3);

          var _super322 = _createSuper(JT);

          function JT() {
            var _this448;

            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            _classCallCheck(this, JT);

            _this448 = _super322.call(this), _this448[YT("0x1")] = new Map(), _this448._viewToAnnotation = new Map(), _this448[YT("0xc")] = new Ss(), _this448._focusTracker.on("change:isFocused", function (t, e, n) {
              n || _this448[YT("0x1b")](YT("0x7"));
            });

            var _iterator522 = _createForOfIteratorHelper(t),
                _step522;

            try {
              for (_iterator522.s(); !(_step522 = _iterator522.n()).done;) {
                var _e369 = _step522.value;

                _this448[YT("0x0")](_e369);
              }
            } catch (err) {
              _iterator522.e(err);
            } finally {
              _iterator522.f();
            }

            return _this448;
          }

          _createClass(JT, [{
            key: _YT,
            get: function get() {
              return this._focusTracker[YT("0x16")];
            }
          }, {
            key: _YT2,
            value: function value(t) {
              var _this449 = this;

              if (this[YT("0x3")](t)) throw new rn["default"]("annotationcollection-duplicated-item", null);
              this[YT("0x1")][YT("0x2")](t[YT("0x18")], t), this._viewToAnnotation.set(t[YT("0xa")], t);

              var _iterator523 = _createForOfIteratorHelper(t[YT("0x22")]),
                  _step523;

              try {
                for (_iterator523.s(); !(_step523 = _iterator523.n()).done;) {
                  var _e370 = _step523.value;
                  this[YT("0xc")][YT("0x0")](_e370);
                }
              } catch (err) {
                _iterator523.e(err);
              } finally {
                _iterator523.f();
              }

              this[YT("0x15")](t[YT("0x22")], YT("0x0"), function (t, e) {
                _this449[YT("0xc")][YT("0x0")](e);
              }), this.listenTo(t.focusableElements, "remove", function (t, e) {
                _this449[YT("0xc")][YT("0xb")](e);
              }), this[YT("0x15")](t[YT("0xa")][YT("0x1e")], YT("0x9"), function (e, n, i) {
                i && _this449[YT("0x1b")](YT("0x12"), t);
              });
              var e = this[YT("0xf")](t);
              _get3(_getPrototypeOf(JT.prototype), YT("0x0"), this).call(this, t, e), t[YT("0x4")]();
            }
          }, {
            key: _YT3,
            value: function value(t) {
              if (!this.has(t)) throw new rn["default"](YT("0x1f"), null);
              this.stopListening(t.view[YT("0x1e")]), this[YT("0xd")](t[YT("0x22")]);

              var _iterator524 = _createForOfIteratorHelper(t[YT("0x22")]),
                  _step524;

              try {
                for (_iterator524.s(); !(_step524 = _iterator524.n()).done;) {
                  var _e371 = _step524.value;
                  this[YT("0xc")].remove(_e371);
                }
              } catch (err) {
                _iterator524.e(err);
              } finally {
                _iterator524.f();
              }

              this[YT("0x6")][YT("0x11")](t[YT("0xa")]), this[YT("0x1")][YT("0x11")](t[YT("0x18")]), _get3(_getPrototypeOf(JT.prototype), YT("0xb"), this).call(this, t);
            }
          }, {
            key: _YT4,
            value: function value(t) {
              return this[YT("0x1")][YT("0x10")](t);
            }
          }, {
            key: _YT5,
            value: function value(t) {
              return this[YT("0x6")][YT("0x10")](t);
            }
          }, {
            key: _YT6,
            value: function value() {
              _get3(_getPrototypeOf(JT.prototype), YT("0x1a"), this).call(this), this[YT("0xd")](), this[YT("0x1")] = null, this[YT("0x6")] = null, this._focusTracker[YT("0x13")]();
            }
          }, {
            key: "refreshPositioning",
            value: function refreshPositioning() {
              var _iterator525 = _createForOfIteratorHelper(this),
                  _step525;

              try {
                for (_iterator525.s(); !(_step525 = _iterator525.n()).done;) {
                  var _t419 = _step525.value;

                  _t419[YT("0x4")]();
                }
              } catch (err) {
                _iterator525.e(err);
              } finally {
                _iterator525.f();
              }

              this[YT("0xe")]();
            }
          }, {
            key: _YT7,
            value: function value() {
              var t = Array[YT("0x17")](this).sort(function (t, e) {
                return GT(t[YT("0x21")], e[YT("0x21")]);
              });

              for (var _e372 = t[YT("0x1d")] - 1; _e372 > 0; _e372--) {
                var _n336 = t[_e372];
                _e372 !== this[YT("0x5")](_n336) && (this[YT("0xb")](_n336), this[YT("0x0")](_n336, _e372));
              }
            }
          }, {
            key: "_getOrderInContent",
            value: function _getOrderInContent(t) {
              var e = 0;
              var n = t[YT("0x21")];

              var _iterator526 = _createForOfIteratorHelper(this),
                  _step526;

              try {
                for (_iterator526.s(); !(_step526 = _iterator526.n()).done;) {
                  var _t420 = _step526.value;

                  var _i267 = _t420[YT("0x8")];

                  if (_i267) {
                    if (GT(n, new ws(_i267)) < 0) return e;
                    e++;
                  }
                }
              } catch (err) {
                _iterator526.e(err);
              } finally {
                _iterator526.f();
              }

              return Math.max(0, e);
            }
          }]);

          return JT;
        }(on["default"], YT("0x16"), YT("0x0"), YT("0xb"), YT("0x19"), YT("0x20"), YT("0x13"), YT("0xe"));

        function GT(t, e) {
          var n = t.top - e[YT("0x14")];
          return 0 == n ? t[YT("0x1c")] - e[YT("0x1c")] : n;
        }

        var KT = ["_activateAnnotation", "destroy", "collection", "Annotations", "getByInnerView", "activate", "remove", "_addActiveAnnotation", "_removeActiveAnnotation", "add", "activeAnnotations", "fire", "deactivateAll", "delete", "_deactivateAllAnnotations", "set"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(KT, 470);

        var QT = function QT(t, e) {
          return KT[t -= 0];
        };

        var XT = /*#__PURE__*/function (_gn9, _QT, _QT2, _QT3, _QT4, _QT5, _QT6, _QT7, _QT8) {
          _inherits(XT, _gn9);

          var _super323 = _createSuper(XT);

          function XT(t) {
            var _this450;

            _classCallCheck(this, XT);

            _this450 = _super323.call(this, t), _this450.collection = new JT(), _this450[QT("0x9")](QT("0x4"), new Set());
            return _this450;
          }

          _createClass(XT, [{
            key: _QT,
            value: function value(t) {
              this.collection[QT("0x3")](t);
            }
          }, {
            key: _QT2,
            value: function value(t) {
              this[QT("0xc")][QT("0x0")](t), t.destroy();
            }
          }, {
            key: _QT3,
            value: function value(t) {
              return this[QT("0xc")][QT("0xe")](t);
            }
          }, {
            key: _QT4,
            value: function value() {
              this[QT("0x5")](QT("0x8"));
            }
          }, {
            key: _QT5,
            value: function value() {
              var _iterator527 = _createForOfIteratorHelper(this[QT("0xc")]),
                  _step527;

              try {
                for (_iterator527.s(); !(_step527 = _iterator527.n()).done;) {
                  var _t421 = _step527.value;

                  _t421[QT("0xb")]();
                }
              } catch (err) {
                _iterator527.e(err);
              } finally {
                _iterator527.f();
              }

              _get3(_getPrototypeOf(XT.prototype), QT("0xb"), this).call(this);
            }
          }, {
            key: _QT6,
            value: function value(t) {
              this.fire(QT("0xa"), t);
            }
          }, {
            key: _QT7,
            value: function value(t) {
              var e = new Set(this.activeAnnotations);
              e[QT("0x3")](t), this[QT("0x4")] = e;
            }
          }, {
            key: _QT8,
            value: function value(t) {
              var e = new Set(this[QT("0x4")]);
              e[QT("0x7")](t), this[QT("0x4")] = e;
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return QT("0xd");
            }
          }]);

          return XT;
        }(gn, QT("0x3"), QT("0x0"), QT("0xe"), QT("0x6"), QT("0xb"), QT("0xf"), QT("0x1"), QT("0x2"));

        var ZT = ["parse", "commentsrepository-add-comment-user-not-exists", "requires", "content", "from", "commentsrepository-add-comment-to-missing-comment-thread", "commentThreadInputView", "commentsrepository-update-missing-comment", "change:isDirty", "comments", "view", "get", "model", "length", "comments.editorConfig", "add", "_addComment", "change:activeAnnotations", "getIndex", "_repository", "_removeCommentThread", "getCommentThreads", "slice", "innerView", "getByInnerView", "CommentView", "comment", "then", "_addCommentThread", "join", "_adapter", "commentsrepository-missing-target", "Users", "_threads", "setAdminPermissions", "removeComment", "charCodeAt", "setAttribute", "commentsrepository-active-not-attached", "function", "activeCommentThread", "deactivateAll", "catch", "set", "updateComment", "commentsrepository-adapter-already-set", "activate", "listenTo", "weight", "isRemovable", "delete", "isEditable", "once", "lowest", "filter", "removeCommentThread", "adapter", "plugins", "attachTo", "getCommentThread", "getTime", "indexOf", "commentsrepository-remove-missing-comment-thread", "define", "bind", "_createCommentThreadView", "max", "CommentThreadView", "channelId", "innerHTML", "comments.maxCommentsWhenCollapsed", "commentsrepository-duplicated-comment-thread-id", "toJSON", "_removeComment", "_viewToController", "createdAt", "find", "comments.CommentView", "commentsrepository-invalid-comment-content", "getComment", "_attachCommentThread", "string", "_findOptimalIndex", "addComment", "commentsrepository-add-comment-internal-error", "commentsrepository-update-comment-internal-error", "commentsrepository-active-missing-comment-thread", "afterInit", "removeAttribute", "attributes", "fetchCommentThread", "_add", "fire", "_nonAdminChannels", "fromCharCode", "commentsrepository-fetch-comment-thread", "textContent", "_readOnlyChannels", "addCommentThread", "comments.maxThreadTotalWeight", "commentsrepository-remove-comment-missing-comment-thread", "commentsrepository-missing-thread-and-adapter-method", "values", "pop", "commentsrepository-invalid-commentid", "isReadOnly", "commentsrepository-update-comment-missing-comment-thread", "commentsrepository-remove-comment-internal-error", "charAt", "update", "map", "locale", "commentsrepository-remove-comment-thread-internal-error", "error", "commentsrepository-missing-thread-and-adapter", "createElement", "_isAttached", "focus", "commentsrepository-invalid-comment-thread-id", "comments.CommentThreadView", "isAttached", "remove", "_threadToController", "comments.maxCommentCharsWhenCollapsed", "commentsrepository-attach-missing-comment-thread", "div", "replace", "context", "author", "_detachCommentThread", "has", "commentsrepository-invalid-comment-authorid", "isActive", "push", "setActiveCommentThread", "PendingActions", "assign", "stopListening", "threadId", "PENDING_ACTION_COMMENT_THREAD", "CommentsRepository", "resolve", "_remove", "hasCommentThread", "config", "_updateComment", "destroy", "substring"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(ZT, 216);

        var tA = function tA(t, e) {
          return ZT[t -= 0];
        },
            eA = Symbol("noChannel");

        var nA = /*#__PURE__*/function (_gn10, _tA, _tA2, _tA3, _tA4, _tA5, _tA6, _tA7, _tA8, _tA9, _tA10, _tA11, _tA12, _tA13, _tA14, _tA15, _tA16, _tA17) {
          _inherits(nA, _gn10);

          var _super324 = _createSuper(nA);

          function nA(t) {
            var _this451;

            _classCallCheck(this, nA);

            _this451 = _super324.call(this, t), _this451[tA("0x71")] = new Map(), _this451._threadToController = new Map(), _this451[tA("0x6")] = new Map(), _this451[tA("0x1d")] = new Set(), _this451[tA("0x7b")](tA("0x19"), new Set()), _this451.licenseKey = _this451[tA("0x3b")][tA("0x4c")][tA("0x5b")]("licenseKey");
            var e = _this451.context.config;
            e.define(tA("0x2"), 2), e[tA("0x8f")](tA("0x1f"), 500), e[tA("0x8f")](tA("0x37"), 140), e[tA("0x8f")](tA("0x33"), yT), e[tA("0x8f")](tA("0x9"), DT);
            return _this451;
          }

          _createClass(nA, [{
            key: "init",
            value: function init() {
              var _this452 = this;

              var t = this.context[tA("0x89")].get(XT);
              this.set("activeCommentThread", null), this.on("addCommentThread", function (t, e) {
                return _this452[tA("0x6c")](e);
              }), this.on(tA("0x87"), function (t, e) {
                return _this452[tA("0x64")](e);
              }), this.on("addComment", function (t, e) {
                return _this452[tA("0x60")](e);
              }), this.on("updateComment", function (t, e) {
                return _this452[tA("0x4d")](e);
              }), this.on("removeComment", function (t, e) {
                return _this452[tA("0x5")](e);
              }), this.on(tA("0xf"), function (t, _ref106) {
                var e = _ref106.threadId,
                    n = _ref106.isFromAdapter;
                if (n) return;

                var i = _this452.getCommentThread(e),
                    o = _this452[tA("0x36")].get(i);

                o && o[tA("0x5a")][tA("0x31")]();
              }, {
                priority: tA("0x85")
              }), this[tA("0x7f")](t, tA("0x61"), function (t, e, n) {
                var i = Array[tA("0x54")](n)[tA("0x2a")](function (t) {
                  return _this452._viewToController[tA("0x5b")](t[tA("0x67")]);
                })[tA("0x86")](Boolean)[0];
                _this452.activeCommentThread = i ? i[tA("0x5c")] : null;
              });
            }
          }, {
            key: _tA2,
            value: function value() {
              !function (t) {
                var e = t instanceof fn,
                    n = [1, 85, 78, 115, 198, 255, 50, 112, 83, 87, 161],
                    i = u([52, 48, 52, 50, 49, 56, 53, 56]),
                    o = [127, 34, 6, 211, 167, 86, 146, 199, 132, 160, 18],
                    r = u([65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57]),
                    s = function (e) {
                  if (t[u([112, 108, 117, 103, 105, 110, 115])][u([104, 97, 115])](u([87, 101, 98, 83, 111, 99, 107, 101, 116, 71, 97, 116, 101, 119, 97, 121])) && t[u([112, 108, 117, 103, 105, 110, 115])][u([103, 101, 116])](u([87, 101, 98, 83, 111, 99, 107, 101, 116, 71, 97, 116, 101, 119, 97, 121]))[u([115, 116, 97, 116, 101])] == u([99, 111, 110, 110, 101, 99, 116, 101, 100])) return a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 86, 97, 108, 105, 100]));
                  if (t[u([112, 108, 117, 103, 105, 110, 115])][u([104, 97, 115])](u([84, 114, 97, 99, 107, 67, 104, 97, 110, 103, 101, 115, 68, 97, 116, 97, 71, 101, 116, 116, 101, 114])) && t[u([112, 108, 117, 103, 105, 110, 115])][u([103, 101, 116])](u([84, 114, 97, 99, 107, 67, 104, 97, 110, 103, 101, 115, 68, 97, 116, 97, 71, 101, 116, 116, 101, 114]))[u([114, 101, 115, 117, 108, 116])] == u([101, 110, 100])) return a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 86, 97, 108, 105, 100]));

                  try {
                    var _s53 = function (t) {
                      return function (t, e) {
                        var n = function (t) {
                          var e = r + u([43, 47, 61]);
                          if (t = String(t)[tA("0x3a")](/[\t\n\f\r ]+/g, ""), !/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/.test(t)) throw new TypeError(u([70, 97, 105, 108, 101, 100, 32, 116, 111, 32, 112, 97, 114, 115, 101, 32, 98, 97, 115, 101, 54, 52, 32, 116, 111, 32, 115, 116, 114, 105, 110, 103, 46]));
                          t += u([61, 61]).slice(2 - (3 & t[tA("0x5d")]));
                          var n,
                              i,
                              o,
                              s = "";

                          for (var _r180 = 0; _r180 < t.length;) {
                            n = e[tA("0x8d")](t.charAt(_r180++)) << 18 | e[tA("0x8d")](t[tA("0x28")](_r180++)) << 12 | (i = e.indexOf(t.charAt(_r180++))) << 6 | (o = e.indexOf(t[tA("0x28")](_r180++))), s += 64 === i ? String[tA("0x1a")](n >> 16 & 255) : 64 === o ? String[tA("0x1a")](n >> 16 & 255, n >> 8 & 255) : String[tA("0x1a")](n >> 16 & 255, n >> 8 & 255, 255 & n);
                          }

                          return s;
                        }(t),
                            i = Array[tA("0x54")](function (t) {
                          var e = new Uint8Array(t[tA("0x5d")]);

                          for (var _n337 = 0; _n337 < t[tA("0x5d")]; _n337++) {
                            e[_n337] = t[tA("0x74")](_n337);
                          }

                          return e;
                        }(n)),
                            o = i[tA("0x23")](),
                            s = i[tA("0x23")]();

                        return function (t) {
                          var e = "";

                          var _iterator528 = _createForOfIteratorHelper(t),
                              _step528;

                          try {
                            for (_iterator528.s(); !(_step528 = _iterator528.n()).done;) {
                              var _n338 = _step528.value;
                              e += String[tA("0x1a")](_n338);
                            }
                          } catch (err) {
                            _iterator528.e(err);
                          } finally {
                            _iterator528.f();
                          }

                          return e;
                        }(function (t, e, n) {
                          var i = {};
                          i[u([110, 117, 109, 98, 101, 114, 79, 102, 82, 111, 117, 110, 100, 115])] = {
                            16: 10,
                            24: 12,
                            32: 14
                          }, i[u([114, 99, 111, 110])] = [1, 2, 4, 8, 16, 32, 64, 128, 27, 54, 108, 216, 171, 77, 154, 47, 94, 188, 99, 198, 151, 53, 106, 212, 179, 125, 250, 239, 197, 145], i[u([83])] = [99, 124, 119, 123, 242, 107, 111, 197, 48, 1, 103, 43, 254, 215, 171, 118, 202, 130, 201, 125, 250, 89, 71, 240, 173, 212, 162, 175, 156, 164, 114, 192, 183, 253, 147, 38, 54, 63, 247, 204, 52, 165, 229, 241, 113, 216, 49, 21, 4, 199, 35, 195, 24, 150, 5, 154, 7, 18, 128, 226, 235, 39, 178, 117, 9, 131, 44, 26, 27, 110, 90, 160, 82, 59, 214, 179, 41, 227, 47, 132, 83, 209, 0, 237, 32, 252, 177, 91, 106, 203, 190, 57, 74, 76, 88, 207, 208, 239, 170, 251, 67, 77, 51, 133, 69, 249, 2, 127, 80, 60, 159, 168, 81, 163, 64, 143, 146, 157, 56, 245, 188, 182, 218, 33, 16, 255, 243, 210, 205, 12, 19, 236, 95, 151, 68, 23, 196, 167, 126, 61, 100, 93, 25, 115, 96, 129, 79, 220, 34, 42, 144, 136, 70, 238, 184, 20, 222, 94, 11, 219, 224, 50, 58, 10, 73, 6, 36, 92, 194, 211, 172, 98, 145, 149, 228, 121, 231, 200, 55, 109, 141, 213, 78, 169, 108, 86, 244, 234, 101, 122, 174, 8, 186, 120, 37, 46, 28, 166, 180, 198, 232, 221, 116, 31, 75, 189, 139, 138, 112, 62, 181, 102, 72, 3, 246, 14, 97, 53, 87, 185, 134, 193, 29, 158, 225, 248, 152, 17, 105, 217, 142, 148, 155, 30, 135, 233, 206, 85, 40, 223, 140, 161, 137, 13, 191, 230, 66, 104, 65, 153, 45, 15, 176, 84, 187, 22], i[u([84, 49])] = [3328402341, 4168907908, 4000806809, 4135287693, 4294111757, 3597364157, 3731845041, 2445657428, 1613770832, 33620227, 3462883241, 1445669757, 3892248089, 3050821474, 1303096294, 3967186586, 2412431941, 528646813, 2311702848, 4202528135, 4026202645, 2992200171, 2387036105, 4226871307, 1101901292, 3017069671, 1604494077, 1169141738, 597466303, 1403299063, 3832705686, 2613100635, 1974974402, 3791519004, 1033081774, 1277568618, 1815492186, 2118074177, 4126668546, 2211236943, 1748251740, 1369810420, 3521504564, 4193382664, 3799085459, 2883115123, 1647391059, 706024767, 134480908, 2512897874, 1176707941, 2646852446, 806885416, 932615841, 168101135, 798661301, 235341577, 605164086, 461406363, 3756188221, 3454790438, 1311188841, 2142417613, 3933566367, 302582043, 495158174, 1479289972, 874125870, 907746093, 3698224818, 3025820398, 1537253627, 2756858614, 1983593293, 3084310113, 2108928974, 1378429307, 3722699582, 1580150641, 327451799, 2790478837, 3117535592, 0, 3253595436, 1075847264, 3825007647, 2041688520, 3059440621, 3563743934, 2378943302, 1740553945, 1916352843, 2487896798, 2555137236, 2958579944, 2244988746, 3151024235, 3320835882, 1336584933, 3992714006, 2252555205, 2588757463, 1714631509, 293963156, 2319795663, 3925473552, 67240454, 4269768577, 2689618160, 2017213508, 631218106, 1269344483, 2723238387, 1571005438, 2151694528, 93294474, 1066570413, 563977660, 1882732616, 4059428100, 1673313503, 2008463041, 2950355573, 1109467491, 537923632, 3858759450, 4260623118, 3218264685, 2177748300, 403442708, 638784309, 3287084079, 3193921505, 899127202, 2286175436, 773265209, 2479146071, 1437050866, 4236148354, 2050833735, 3362022572, 3126681063, 840505643, 3866325909, 3227541664, 427917720, 2655997905, 2749160575, 1143087718, 1412049534, 999329963, 193497219, 2353415882, 3354324521, 1807268051, 672404540, 2816401017, 3160301282, 369822493, 2916866934, 3688947771, 1681011286, 1949973070, 336202270, 2454276571, 201721354, 1210328172, 3093060836, 2680341085, 3184776046, 1135389935, 3294782118, 965841320, 831886756, 3554993207, 4068047243, 3588745010, 2345191491, 1849112409, 3664604599, 26054028, 2983581028, 2622377682, 1235855840, 3630984372, 2891339514, 4092916743, 3488279077, 3395642799, 4101667470, 1202630377, 268961816, 1874508501, 4034427016, 1243948399, 1546530418, 941366308, 1470539505, 1941222599, 2546386513, 3421038627, 2715671932, 3899946140, 1042226977, 2521517021, 1639824860, 227249030, 260737669, 3765465232, 2084453954, 1907733956, 3429263018, 2420656344, 100860677, 4160157185, 470683154, 3261161891, 1781871967, 2924959737, 1773779408, 394692241, 2579611992, 974986535, 664706745, 3655459128, 3958962195, 731420851, 571543859, 3530123707, 2849626480, 126783113, 865375399, 765172662, 1008606754, 361203602, 3387549984, 2278477385, 2857719295, 1344809080, 2782912378, 59542671, 1503764984, 160008576, 437062935, 1707065306, 3622233649, 2218934982, 3496503480, 2185314755, 697932208, 1512910199, 504303377, 2075177163, 2824099068, 1841019862, 739644986], i[u([84, 50])] = [2781242211, 2230877308, 2582542199, 2381740923, 234877682, 3184946027, 2984144751, 1418839493, 1348481072, 50462977, 2848876391, 2102799147, 434634494, 1656084439, 3863849899, 2599188086, 1167051466, 2636087938, 1082771913, 2281340285, 368048890, 3954334041, 3381544775, 201060592, 3963727277, 1739838676, 4250903202, 3930435503, 3206782108, 4149453988, 2531553906, 1536934080, 3262494647, 484572669, 2923271059, 1783375398, 1517041206, 1098792767, 49674231, 1334037708, 1550332980, 4098991525, 886171109, 150598129, 2481090929, 1940642008, 1398944049, 1059722517, 201851908, 1385547719, 1699095331, 1587397571, 674240536, 2704774806, 252314885, 3039795866, 151914247, 908333586, 2602270848, 1038082786, 651029483, 1766729511, 3447698098, 2682942837, 454166793, 2652734339, 1951935532, 775166490, 758520603, 3000790638, 4004797018, 4217086112, 4137964114, 1299594043, 1639438038, 3464344499, 2068982057, 1054729187, 1901997871, 2534638724, 4121318227, 1757008337, 0, 750906861, 1614815264, 535035132, 3363418545, 3988151131, 3201591914, 1183697867, 3647454910, 1265776953, 3734260298, 3566750796, 3903871064, 1250283471, 1807470800, 717615087, 3847203498, 384695291, 3313910595, 3617213773, 1432761139, 2484176261, 3481945413, 283769337, 100925954, 2180939647, 4037038160, 1148730428, 3123027871, 3813386408, 4087501137, 4267549603, 3229630528, 2315620239, 2906624658, 3156319645, 1215313976, 82966005, 3747855548, 3245848246, 1974459098, 1665278241, 807407632, 451280895, 251524083, 1841287890, 1283575245, 337120268, 891687699, 801369324, 3787349855, 2721421207, 3431482436, 959321879, 1469301956, 4065699751, 2197585534, 1199193405, 2898814052, 3887750493, 724703513, 2514908019, 2696962144, 2551808385, 3516813135, 2141445340, 1715741218, 2119445034, 2872807568, 2198571144, 3398190662, 700968686, 3547052216, 1009259540, 2041044702, 3803995742, 487983883, 1991105499, 1004265696, 1449407026, 1316239930, 504629770, 3683797321, 168560134, 1816667172, 3837287516, 1570751170, 1857934291, 4014189740, 2797888098, 2822345105, 2754712981, 936633572, 2347923833, 852879335, 1133234376, 1500395319, 3084545389, 2348912013, 1689376213, 3533459022, 3762923945, 3034082412, 4205598294, 133428468, 634383082, 2949277029, 2398386810, 3913789102, 403703816, 3580869306, 2297460856, 1867130149, 1918643758, 607656988, 4049053350, 3346248884, 1368901318, 600565992, 2090982877, 2632479860, 557719327, 3717614411, 3697393085, 2249034635, 2232388234, 2430627952, 1115438654, 3295786421, 2865522278, 3633334344, 84280067, 33027830, 303828494, 2747425121, 1600795957, 4188952407, 3496589753, 2434238086, 1486471617, 658119965, 3106381470, 953803233, 334231800, 3005978776, 857870609, 3151128937, 1890179545, 2298973838, 2805175444, 3056442267, 574365214, 2450884487, 550103529, 1233637070, 4289353045, 2018519080, 2057691103, 2399374476, 4166623649, 2148108681, 387583245, 3664101311, 836232934, 3330556482, 3100665960, 3280093505, 2955516313, 2002398509, 287182607, 3413881008, 4238890068, 3597515707, 975967766], i[u([84, 51])] = [1671808611, 2089089148, 2006576759, 2072901243, 4061003762, 1807603307, 1873927791, 3310653893, 810573872, 16974337, 1739181671, 729634347, 4263110654, 3613570519, 2883997099, 1989864566, 3393556426, 2191335298, 3376449993, 2106063485, 4195741690, 1508618841, 1204391495, 4027317232, 2917941677, 3563566036, 2734514082, 2951366063, 2629772188, 2767672228, 1922491506, 3227229120, 3082974647, 4246528509, 2477669779, 644500518, 911895606, 1061256767, 4144166391, 3427763148, 878471220, 2784252325, 3845444069, 4043897329, 1905517169, 3631459288, 827548209, 356461077, 67897348, 3344078279, 593839651, 3277757891, 405286936, 2527147926, 84871685, 2595565466, 118033927, 305538066, 2157648768, 3795705826, 3945188843, 661212711, 2999812018, 1973414517, 152769033, 2208177539, 745822252, 439235610, 455947803, 1857215598, 1525593178, 2700827552, 1391895634, 994932283, 3596728278, 3016654259, 695947817, 3812548067, 795958831, 2224493444, 1408607827, 3513301457, 0, 3979133421, 543178784, 4229948412, 2982705585, 1542305371, 1790891114, 3410398667, 3201918910, 961245753, 1256100938, 1289001036, 1491644504, 3477767631, 3496721360, 4012557807, 2867154858, 4212583931, 1137018435, 1305975373, 861234739, 2241073541, 1171229253, 4178635257, 33948674, 2139225727, 1357946960, 1011120188, 2679776671, 2833468328, 1374921297, 2751356323, 1086357568, 2408187279, 2460827538, 2646352285, 944271416, 4110742005, 3168756668, 3066132406, 3665145818, 560153121, 271589392, 4279952895, 4077846003, 3530407890, 3444343245, 202643468, 322250259, 3962553324, 1608629855, 2543990167, 1154254916, 389623319, 3294073796, 2817676711, 2122513534, 1028094525, 1689045092, 1575467613, 422261273, 1939203699, 1621147744, 2174228865, 1339137615, 3699352540, 577127458, 712922154, 2427141008, 2290289544, 1187679302, 3995715566, 3100863416, 339486740, 3732514782, 1591917662, 186455563, 3681988059, 3762019296, 844522546, 978220090, 169743370, 1239126601, 101321734, 611076132, 1558493276, 3260915650, 3547250131, 2901361580, 1655096418, 2443721105, 2510565781, 3828863972, 2039214713, 3878868455, 3359869896, 928607799, 1840765549, 2374762893, 3580146133, 1322425422, 2850048425, 1823791212, 1459268694, 4094161908, 3928346602, 1706019429, 2056189050, 2934523822, 135794696, 3134549946, 2022240376, 628050469, 779246638, 472135708, 2800834470, 3032970164, 3327236038, 3894660072, 3715932637, 1956440180, 522272287, 1272813131, 3185336765, 2340818315, 2323976074, 1888542832, 1044544574, 3049550261, 1722469478, 1222152264, 50660867, 4127324150, 236067854, 1638122081, 895445557, 1475980887, 3117443513, 2257655686, 3243809217, 489110045, 2662934430, 3778599393, 4162055160, 2561878936, 288563729, 1773916777, 3648039385, 2391345038, 2493985684, 2612407707, 505560094, 2274497927, 3911240169, 3460925390, 1442818645, 678973480, 3749357023, 2358182796, 2717407649, 2306869641, 219617805, 3218761151, 3862026214, 1120306242, 1756942440, 1103331905, 2578459033, 762796589, 252780047, 2966125488, 1425844308, 3151392187, 372911126], i[u([84, 52])] = [1667474886, 2088535288, 2004326894, 2071694838, 4075949567, 1802223062, 1869591006, 3318043793, 808472672, 16843522, 1734846926, 724270422, 4278065639, 3621216949, 2880169549, 1987484396, 3402253711, 2189597983, 3385409673, 2105378810, 4210693615, 1499065266, 1195886990, 4042263547, 2913856577, 3570689971, 2728590687, 2947541573, 2627518243, 2762274643, 1920112356, 3233831835, 3082273397, 4261223649, 2475929149, 640051788, 909531756, 1061110142, 4160160501, 3435941763, 875846760, 2779116625, 3857003729, 4059105529, 1903268834, 3638064043, 825316194, 353713962, 67374088, 3351728789, 589522246, 3284360861, 404236336, 2526454071, 84217610, 2593830191, 117901582, 303183396, 2155911963, 3806477791, 3958056653, 656894286, 2998062463, 1970642922, 151591698, 2206440989, 741110872, 437923380, 454765878, 1852748508, 1515908788, 2694904667, 1381168804, 993742198, 3604373943, 3014905469, 690584402, 3823320797, 791638366, 2223281939, 1398011302, 3520161977, 0, 3991743681, 538992704, 4244381667, 2981218425, 1532751286, 1785380564, 3419096717, 3200178535, 960056178, 1246420628, 1280103576, 1482221744, 3486468741, 3503319995, 4025428677, 2863326543, 4227536621, 1128514950, 1296947098, 859002214, 2240123921, 1162203018, 4193849577, 33687044, 2139062782, 1347481760, 1010582648, 2678045221, 2829640523, 1364325282, 2745433693, 1077985408, 2408548869, 2459086143, 2644360225, 943212656, 4126475505, 3166494563, 3065430391, 3671750063, 555836226, 269496352, 4294908645, 4092792573, 3537006015, 3452783745, 202118168, 320025894, 3974901699, 1600119230, 2543297077, 1145359496, 387397934, 3301201811, 2812801621, 2122220284, 1027426170, 1684319432, 1566435258, 421079858, 1936954854, 1616945344, 2172753945, 1330631070, 3705438115, 572679748, 707427924, 2425400123, 2290647819, 1179044492, 4008585671, 3099120491, 336870440, 3739122087, 1583276732, 185277718, 3688593069, 3772791771, 842159716, 976899700, 168435220, 1229577106, 101059084, 606366792, 1549591736, 3267517855, 3553849021, 2897014595, 1650632388, 2442242105, 2509612081, 3840161747, 2038008818, 3890688725, 3368567691, 926374254, 1835907034, 2374863873, 3587531953, 1313788572, 2846482505, 1819063512, 1448540844, 4109633523, 3941213647, 1701162954, 2054852340, 2930698567, 134748176, 3132806511, 2021165296, 623210314, 774795868, 471606328, 2795958615, 3031746419, 3334885783, 3907527627, 3722280097, 1953799400, 522133822, 1263263126, 3183336545, 2341176845, 2324333839, 1886425312, 1044267644, 3048588401, 1718004428, 1212733584, 50529542, 4143317495, 235803164, 1633788866, 892690282, 1465383342, 3115962473, 2256965911, 3250673817, 488449850, 2661202215, 3789633753, 4177007595, 2560144171, 286339874, 1768537042, 3654906025, 2391705863, 2492770099, 2610673197, 505291324, 2273808917, 3924369609, 3469625735, 1431699370, 673740880, 3755965093, 2358021891, 2711746649, 2307489801, 218961690, 3217021541, 3873845719, 1111672452, 1751693520, 1094828930, 2576986153, 757954394, 252645662, 2964376443, 1414855848, 3149649517, 370555436], i[u([85, 49])] = [0, 235474187, 470948374, 303765277, 941896748, 908933415, 607530554, 708780849, 1883793496, 2118214995, 1817866830, 1649639237, 1215061108, 1181045119, 1417561698, 1517767529, 3767586992, 4003061179, 4236429990, 4069246893, 3635733660, 3602770327, 3299278474, 3400528769, 2430122216, 2664543715, 2362090238, 2193862645, 2835123396, 2801107407, 3035535058, 3135740889, 3678124923, 3576870512, 3341394285, 3374361702, 3810496343, 3977675356, 4279080257, 4043610186, 2876494627, 2776292904, 3076639029, 3110650942, 2472011535, 2640243204, 2403728665, 2169303058, 1001089995, 899835584, 666464733, 699432150, 59727847, 226906860, 530400753, 294930682, 1273168787, 1172967064, 1475418501, 1509430414, 1942435775, 2110667444, 1876241833, 1641816226, 2910219766, 2743034109, 2976151520, 3211623147, 2505202138, 2606453969, 2302690252, 2269728455, 3711829422, 3543599269, 3240894392, 3475313331, 3843699074, 3943906441, 4178062228, 4144047775, 1306967366, 1139781709, 1374988112, 1610459739, 1975683434, 2076935265, 1775276924, 1742315127, 1034867998, 866637845, 566021896, 800440835, 92987698, 193195065, 429456164, 395441711, 1984812685, 2017778566, 1784663195, 1683407248, 1315562145, 1080094634, 1383856311, 1551037884, 101039829, 135050206, 437757123, 337553864, 1042385657, 807962610, 573804783, 742039012, 2531067453, 2564033334, 2328828971, 2227573024, 2935566865, 2700099354, 3001755655, 3168937228, 3868552805, 3902563182, 4203181171, 4102977912, 3736164937, 3501741890, 3265478751, 3433712980, 1106041591, 1340463100, 1576976609, 1408749034, 2043211483, 2009195472, 1708848333, 1809054150, 832877231, 1068351396, 766945465, 599762354, 159417987, 126454664, 361929877, 463180190, 2709260871, 2943682380, 3178106961, 3009879386, 2572697195, 2538681184, 2236228733, 2336434550, 3509871135, 3745345300, 3441850377, 3274667266, 3910161971, 3877198648, 4110568485, 4211818798, 2597806476, 2497604743, 2261089178, 2295101073, 2733856160, 2902087851, 3202437046, 2968011453, 3936291284, 3835036895, 4136440770, 4169408201, 3535486456, 3702665459, 3467192302, 3231722213, 2051518780, 1951317047, 1716890410, 1750902305, 1113818384, 1282050075, 1584504582, 1350078989, 168810852, 67556463, 371049330, 404016761, 841739592, 1008918595, 775550814, 540080725, 3969562369, 3801332234, 4035489047, 4269907996, 3569255213, 3669462566, 3366754619, 3332740144, 2631065433, 2463879762, 2160117071, 2395588676, 2767645557, 2868897406, 3102011747, 3069049960, 202008497, 33778362, 270040487, 504459436, 875451293, 975658646, 675039627, 641025152, 2084704233, 1917518562, 1615861247, 1851332852, 1147550661, 1248802510, 1484005843, 1451044056, 933301370, 967311729, 733156972, 632953703, 260388950, 25965917, 328671808, 496906059, 1206477858, 1239443753, 1543208500, 1441952575, 2144161806, 1908694277, 1675577880, 1842759443, 3610369226, 3644379585, 3408119516, 3307916247, 4011190502, 3776767469, 4077384432, 4245618683, 2809771154, 2842737049, 3144396420, 3043140495, 2673705150, 2438237621, 2203032232, 2370213795], i[u([85, 50])] = [0, 185469197, 370938394, 487725847, 741876788, 657861945, 975451694, 824852259, 1483753576, 1400783205, 1315723890, 1164071807, 1950903388, 2135319889, 1649704518, 1767536459, 2967507152, 3152976349, 2801566410, 2918353863, 2631447780, 2547432937, 2328143614, 2177544179, 3901806776, 3818836405, 4270639778, 4118987695, 3299409036, 3483825537, 3535072918, 3652904859, 2077965243, 1893020342, 1841768865, 1724457132, 1474502543, 1559041666, 1107234197, 1257309336, 598438867, 681933534, 901210569, 1052338372, 261314535, 77422314, 428819965, 310463728, 3409685355, 3224740454, 3710368113, 3593056380, 3875770207, 3960309330, 4045380933, 4195456072, 2471224067, 2554718734, 2237133081, 2388260884, 3212035895, 3028143674, 2842678573, 2724322336, 4138563181, 4255350624, 3769721975, 3955191162, 3667219033, 3516619604, 3431546947, 3347532110, 2933734917, 2782082824, 3099667487, 3016697106, 2196052529, 2313884476, 2499348523, 2683765030, 1179510461, 1296297904, 1347548327, 1533017514, 1786102409, 1635502980, 2087309459, 2003294622, 507358933, 355706840, 136428751, 53458370, 839224033, 957055980, 605657339, 790073846, 2373340630, 2256028891, 2607439820, 2422494913, 2706270690, 2856345839, 3075636216, 3160175349, 3573941694, 3725069491, 3273267108, 3356761769, 4181598602, 4063242375, 4011996048, 3828103837, 1033297158, 915985419, 730517276, 545572369, 296679730, 446754879, 129166120, 213705253, 1709610350, 1860738147, 1945798516, 2029293177, 1239331162, 1120974935, 1606591296, 1422699085, 4148292826, 4233094615, 3781033664, 3931371469, 3682191598, 3497509347, 3446004468, 3328955385, 2939266226, 2755636671, 3106780840, 2988687269, 2198438022, 2282195339, 2501218972, 2652609425, 1201765386, 1286567175, 1371368976, 1521706781, 1805211710, 1620529459, 2105887268, 1988838185, 533804130, 350174575, 164439672, 46346101, 870912086, 954669403, 636813900, 788204353, 2358957921, 2274680428, 2592523643, 2441661558, 2695033685, 2880240216, 3065962831, 3182487618, 3572145929, 3756299780, 3270937875, 3388507166, 4174560061, 4091327024, 4006521127, 3854606378, 1014646705, 930369212, 711349675, 560487590, 272786309, 457992840, 106852767, 223377554, 1678381017, 1862534868, 1914052035, 2031621326, 1211247597, 1128014560, 1580087799, 1428173050, 32283319, 182621114, 401639597, 486441376, 768917123, 651868046, 1003007129, 818324884, 1503449823, 1385356242, 1333838021, 1150208456, 1973745387, 2125135846, 1673061617, 1756818940, 2970356327, 3120694122, 2802849917, 2887651696, 2637442643, 2520393566, 2334669897, 2149987652, 3917234703, 3799141122, 4284502037, 4100872472, 3309594171, 3460984630, 3545789473, 3629546796, 2050466060, 1899603969, 1814803222, 1730525723, 1443857720, 1560382517, 1075025698, 1260232239, 575138148, 692707433, 878443390, 1062597235, 243256656, 91341917, 409198410, 325965383, 3403100636, 3252238545, 3704300486, 3620022987, 3874428392, 3990953189, 4042459122, 4227665663, 2460449204, 2578018489, 2226875310, 2411029155, 3198115200, 3046200461, 2827177882, 2743944855], i[u([85, 51])] = [0, 218828297, 437656594, 387781147, 875313188, 958871085, 775562294, 590424639, 1750626376, 1699970625, 1917742170, 2135253587, 1551124588, 1367295589, 1180849278, 1265195639, 3501252752, 3720081049, 3399941250, 3350065803, 3835484340, 3919042237, 4270507174, 4085369519, 3102249176, 3051593425, 2734591178, 2952102595, 2361698556, 2177869557, 2530391278, 2614737639, 3145456443, 3060847922, 2708326185, 2892417312, 2404901663, 2187128086, 2504130317, 2555048196, 3542330227, 3727205754, 3375740769, 3292445032, 3876557655, 3926170974, 4246310725, 4027744588, 1808481195, 1723872674, 1910319033, 2094410160, 1608975247, 1391201670, 1173430173, 1224348052, 59984867, 244860394, 428169201, 344873464, 935293895, 984907214, 766078933, 547512796, 1844882806, 1627235199, 2011214180, 2062270317, 1507497298, 1423022939, 1137477952, 1321699145, 95345982, 145085239, 532201772, 313773861, 830661914, 1015671571, 731183368, 648017665, 3175501286, 2957853679, 2807058932, 2858115069, 2305455554, 2220981195, 2474404304, 2658625497, 3575528878, 3625268135, 3473416636, 3254988725, 3778151818, 3963161475, 4213447064, 4130281361, 3599595085, 3683022916, 3432737375, 3247465558, 3802222185, 4020912224, 4172763771, 4122762354, 3201631749, 3017672716, 2764249623, 2848461854, 2331590177, 2280796200, 2431590963, 2648976442, 104699613, 188127444, 472615631, 287343814, 840019705, 1058709744, 671593195, 621591778, 1852171925, 1668212892, 1953757831, 2037970062, 1514790577, 1463996600, 1080017571, 1297403050, 3673637356, 3623636965, 3235995134, 3454686199, 4007360968, 3822090177, 4107101658, 4190530515, 2997825956, 3215212461, 2830708150, 2779915199, 2256734592, 2340947849, 2627016082, 2443058075, 172466556, 122466165, 273792366, 492483431, 1047239e3, 861968209, 612205898, 695634755, 1646252340, 1863638845, 2013908262, 1963115311, 1446242576, 1530455833, 1277555970, 1093597963, 1636604631, 1820824798, 2073724613, 1989249228, 1436590835, 1487645946, 1337376481, 1119727848, 164948639, 81781910, 331544205, 516552836, 1039717051, 821288114, 669961897, 719700128, 2973530695, 3157750862, 2871682645, 2787207260, 2232435299, 2283490410, 2667994737, 2450346104, 3647212047, 3564045318, 3279033885, 3464042516, 3980931627, 3762502690, 4150144569, 4199882800, 3070356634, 3121275539, 2904027272, 2686254721, 2200818878, 2384911031, 2570832044, 2486224549, 3747192018, 3528626907, 3310321856, 3359936201, 3950355702, 3867060991, 4049844452, 4234721005, 1739656202, 1790575107, 2108100632, 1890328081, 1402811438, 1586903591, 1233856572, 1149249077, 266959938, 48394827, 369057872, 418672217, 1002783846, 919489135, 567498868, 752375421, 209336225, 24197544, 376187827, 459744698, 945164165, 895287692, 574624663, 793451934, 1679968233, 1764313568, 2117360635, 1933530610, 1343127501, 1560637892, 1243112415, 1192455638, 3704280881, 3519142200, 3336358691, 3419915562, 3907448597, 3857572124, 4075877127, 4294704398, 3029510009, 3113855344, 2927934315, 2744104290, 2159976285, 2377486676, 2594734927, 2544078150], i[u([85, 52])] = [0, 151849742, 303699484, 454499602, 607398968, 758720310, 908999204, 1059270954, 1214797936, 1097159550, 1517440620, 1400849762, 1817998408, 1699839814, 2118541908, 2001430874, 2429595872, 2581445614, 2194319100, 2345119218, 3034881240, 3186202582, 2801699524, 2951971274, 3635996816, 3518358430, 3399679628, 3283088770, 4237083816, 4118925222, 4002861748, 3885750714, 1002142683, 850817237, 698445255, 548169417, 529487843, 377642221, 227885567, 77089521, 1943217067, 2061379749, 1640576439, 1757691577, 1474760595, 1592394909, 1174215055, 1290801793, 2875968315, 2724642869, 3111247143, 2960971305, 2405426947, 2253581325, 2638606623, 2487810577, 3808662347, 3926825029, 4044981591, 4162096729, 3342319475, 3459953789, 3576539503, 3693126241, 1986918061, 2137062819, 1685577905, 1836772287, 1381620373, 1532285339, 1078185097, 1229899655, 1040559837, 923313619, 740276417, 621982671, 439452389, 322734571, 137073913, 19308535, 3871163981, 4021308739, 4104605777, 4255800159, 3263785589, 3414450555, 3499326569, 3651041127, 2933202493, 2815956275, 3167684641, 3049390895, 2330014213, 2213296395, 2566595609, 2448830231, 1305906550, 1155237496, 1607244650, 1455525988, 1776460110, 1626319424, 2079897426, 1928707164, 96392454, 213114376, 396673818, 514443284, 562755902, 679998e3, 865136418, 983426092, 3708173718, 3557504664, 3474729866, 3323011204, 4180808110, 4030667424, 3945269170, 3794078908, 2507040230, 2623762152, 2272556026, 2390325492, 2975484382, 3092726480, 2738905026, 2857194700, 3973773121, 3856137295, 4274053469, 4157467219, 3371096953, 3252932727, 3673476453, 3556361835, 2763173681, 2915017791, 3064510765, 3215307299, 2156299017, 2307622919, 2459735317, 2610011675, 2081048481, 1963412655, 1846563261, 1729977011, 1480485785, 1362321559, 1243905413, 1126790795, 878845905, 1030690015, 645401037, 796197571, 274084841, 425408743, 38544885, 188821243, 3613494426, 3731654548, 3313212038, 3430322568, 4082475170, 4200115116, 3780097726, 3896688048, 2668221674, 2516901860, 2366882550, 2216610296, 3141400786, 2989552604, 2837966542, 2687165888, 1202797690, 1320957812, 1437280870, 1554391400, 1669664834, 1787304780, 1906247262, 2022837584, 265905162, 114585348, 499347990, 349075736, 736970802, 585122620, 972512814, 821712160, 2595684844, 2478443234, 2293045232, 2174754046, 3196267988, 3079546586, 2895723464, 2777952454, 3537852828, 3687994002, 3234156416, 3385345166, 4142626212, 4293295786, 3841024952, 3992742070, 174567692, 57326082, 410887952, 292596766, 777231668, 660510266, 1011452712, 893681702, 1108339068, 1258480242, 1343618912, 1494807662, 1715193156, 1865862730, 1948373848, 2100090966, 2701949495, 2818666809, 3004591147, 3122358053, 2235061775, 2352307457, 2535604243, 2653899549, 3915653703, 3764988233, 4219352155, 4067639125, 3444575871, 3294430577, 3746175075, 3594982253, 836553431, 953270745, 600235211, 718002117, 367585007, 484830689, 133361907, 251657213, 2041877159, 1891211689, 1806599355, 1654886325, 1568718495, 1418573201, 1335535747, 1184342925];
                          var o = new Uint8Array(16);

                          for (var _t422 = 15; _t422 >= 0; --_t422) {
                            o[_t422] = n % 256, n = parseInt(n / 256);
                          }

                          var r = null,
                              s = 16;
                          var a = new Uint8Array(e),
                              c = [],
                              l = [];
                          !function () {
                            var t = i[u([110, 117, 109, 98, 101, 114, 79, 102, 82, 111, 117, 110, 100, 115])][a[tA("0x5d")]];

                            for (var _e373 = 0; _e373 <= t; _e373++) {
                              c[tA("0x41")]([0, 0, 0, 0]), l[tA("0x41")]([0, 0, 0, 0]);
                            }

                            var e = 4 * (t + 1),
                                n = a[tA("0x5d")] / 4,
                                o = d(a);
                            var r;

                            for (var _e374 = 0; _e374 < n; _e374++) {
                              c[r = _e374 >> 2][_e374 % 4] = o[_e374], l[t - r][_e374 % 4] = o[_e374];
                            }

                            var s,
                                h = 0,
                                f = n;

                            for (; f < e;) {
                              s = o[n - 1], o[0] ^= i[u([83])][s >> 16 & 255] << 24 ^ i[u([83])][s >> 8 & 255] << 16 ^ i[u([83])][255 & s] << 8 ^ i[u([83])][s >> 24 & 255] ^ i[u([114, 99, 111, 110])][h] << 24, h += 1;

                              for (var _t423 = 1; _t423 < n / 2; _t423++) {
                                o[_t423] ^= o[_t423 - 1];
                              }

                              s = o[n / 2 - 1], o[n / 2] ^= i[u([83])][255 & s] ^ i[u([83])][s >> 8 & 255] << 8 ^ i[u([83])][s >> 16 & 255] << 16 ^ i[u([83])][s >> 24 & 255] << 24;

                              for (var _t424 = n / 2 + 1; _t424 < n; _t424++) {
                                o[_t424] ^= o[_t424 - 1];
                              }

                              var _r181 = void 0,
                                  _a78 = void 0,
                                  _d11 = 0;

                              for (; _d11 < n && f < e;) {
                                _a78 = f % 4, c[_r181 = f >> 2][_a78] = o[_d11], l[t - _r181][_a78] = o[_d11++], f++;
                              }
                            }

                            for (var _e375 = 1; _e375 < t; _e375++) {
                              for (var _t425 = 0; _t425 < 4; _t425++) {
                                s = l[_e375][_t425], l[_e375][_t425] = i[u([85, 49])][s >> 24 & 255] ^ i[u([85, 50])][s >> 16 & 255] ^ i[u([85, 51])][s >> 8 & 255] ^ i[u([85, 52])][255 & s];
                              }
                            }
                          }();

                          for (var _e376 = 0; _e376 < t.length; _e376++) {
                            16 === s && (r = f(o), s = 0, h(o)), t[_e376] ^= r[s++];
                          }

                          return t;

                          function d(t) {
                            var e = [];

                            for (var _n339 = 0; _n339 < t.length; _n339 += 4) {
                              e[tA("0x41")](t[_n339] << 24 | t[_n339 + 1] << 16 | t[_n339 + 2] << 8 | t[_n339 + 3]);
                            }

                            return e;
                          }

                          function h(t) {
                            for (var _e377 = 15; _e377 >= 0; _e377--) {
                              if (255 !== t[_e377]) {
                                t[_e377]++;
                                break;
                              }

                              t[_e377] = 0;
                            }
                          }

                          function f(t) {
                            var e = c[tA("0x5d")] - 1,
                                n = [0, 0, 0, 0];
                            var o = d(t);

                            for (var _t426 = 0; _t426 < 4; _t426++) {
                              o[_t426] ^= c[0][_t426];
                            }

                            for (var _t427 = 1; _t427 < e; _t427++) {
                              for (var _e378 = 0; _e378 < 4; _e378++) {
                                n[_e378] = i[u([84, 49])][o[_e378] >> 24 & 255] ^ i[u([84, 50])][o[(_e378 + 1) % 4] >> 16 & 255] ^ i[u([84, 51])][o[(_e378 + 2) % 4] >> 8 & 255] ^ i[u([84, 52])][255 & o[(_e378 + 3) % 4]] ^ c[_t427][_e378];
                              }

                              o = n[tA("0x66")]();
                            }

                            var r = new Uint8Array(16);
                            var s;

                            for (var _t428 = 0; _t428 < 4; _t428++) {
                              s = c[e][_t428], r[4 * _t428] = 255 & (i[u([83])][o[_t428] >> 24 & 255] ^ s >> 24), r[4 * _t428 + 1] = 255 & (i[u([83])][o[(_t428 + 1) % 4] >> 16 & 255] ^ s >> 16), r[4 * _t428 + 2] = 255 & (i[u([83])][o[(_t428 + 2) % 4] >> 8 & 255] ^ s >> 8), r[4 * _t428 + 3] = 255 & (i[u([83])][255 & o[(_t428 + 3) % 4]] ^ s);
                            }

                            return r;
                          }
                        }(i, e, s + 256 * o));
                      }(t, new window[u([85, 105, 110, 116, 56, 65, 114, 114, 97, 121])]([].concat(n, [29, 221, 175, 90, 231, 133, 239, 240, 75, 180], o)));
                    }(e),
                        _c24 = JSON[tA("0x50")](_s53),
                        _l14 = parseInt(_c24[u([49])]),
                        _d10 = parseInt(_c24[u([51])]),
                        _h5 = parseInt(_c24[u([52])]) || 0,
                        _f4 = parseInt(_c24[u([53])]) || 0,
                        _g3 = 2;

                    if (!(1 & _h5) || t[u([112, 108, 117, 103, 105, 110, 115])][u([104, 97, 115])](u([84, 114, 97, 99, 107, 67, 104, 97, 110, 103, 101, 115, 69, 100, 105, 116, 105, 110, 103])) && !(_h5 & _g3)) return a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]));
                    if (_f4 && !window[u([111, 112, 101, 110])][u([99, 108, 111, 115, 101, 100])]) return a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]));
                    if (parseInt(i) / 2 > _l14) return a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]));

                    if (t[u([112, 108, 117, 103, 105, 110, 115])][u([104, 97, 115])](u([84, 114, 97, 99, 107, 67, 104, 97, 110, 103, 101, 115, 69, 100, 105, 116, 105, 110, 103]))) {
                      var _e379 = t[u([112, 108, 117, 103, 105, 110, 115])][u([103, 101, 116])](u([84, 114, 97, 99, 107, 67, 104, 97, 110, 103, 101, 115, 69, 100, 105, 116, 105, 110, 103]));

                      if (parseInt(_e379[u([95, 101, 120, 101, 99, 117, 116, 101, 83, 117, 103, 103, 101, 115, 116, 105, 111, 110])]) / 2 > _l14) return a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]));
                    }

                    return a(u(_d10 ? [108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 84, 114, 105, 97, 108] : [108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 86, 97, 108, 105, 100]));
                  } catch (t) {
                    return a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]));
                  }
                }(t[tA("0x4c")][tA("0x5b")](u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121])));

                function a(e) {
                  var n = function () {
                    var t = String(window[u([112, 101, 114, 102, 111, 114, 109, 97, 110, 99, 101])][u([110, 111, 119])]())[tA("0x3a")](u([46]), "");
                    var e = "";

                    for (var _n340 = 0; _n340 < t[tA("0x5d")]; _n340 += 2) {
                      var _i268 = parseInt(t[tA("0x4f")](_n340, _n340 + 2));

                      _i268 >= r[tA("0x5d")] && (_i268 -= r.length), e += r[_i268];
                    }

                    return e;
                  }();

                  return t[n] = e, e;
                }

                function c(t) {
                  var _iterator529 = _createForOfIteratorHelper(t[u([101, 100, 105, 116, 111, 114, 115])]),
                      _step529;

                  try {
                    for (_iterator529.s(); !(_step529 = _iterator529.n()).done;) {
                      var _e380 = _step529.value;
                      l(_e380);
                    }
                  } catch (err) {
                    _iterator529.e(err);
                  } finally {
                    _iterator529.f();
                  }

                  t[u([112, 108, 117, 103, 105, 110, 115])][u([103, 101, 116])](u([67, 111, 109, 109, 101, 110, 116, 115, 82, 101, 112, 111, 115, 105, 116, 111, 114, 121]))[u([115, 119, 105, 116, 99, 104, 82, 101, 97, 100, 79, 110, 108, 121])](!0), t[u([112, 108, 117, 103, 105, 110, 115])][u([103, 101, 116])](u([67, 111, 109, 109, 101, 110, 116, 115, 82, 101, 112, 111, 115, 105, 116, 111, 114, 121]))[u([115, 119, 105, 116, 99, 104, 82, 101, 97, 100, 79, 110, 108, 121])] = d;
                }

                function l(t) {
                  function e() {
                    t[u([109, 111, 100, 101, 108])][u([99, 104, 97, 110, 103, 101])] = d, t[u([109, 111, 100, 101, 108])][u([101, 110, 113, 117, 101, 117, 101, 67, 104, 97, 110, 103, 101])] = d, t[u([105, 115, 82, 101, 97, 100, 79, 110, 108, 121])] = !0;
                  }

                  t[u([115, 116, 97, 116, 101])] == u([114, 101, 97, 100, 121]) ? e() : t[u([111, 110, 99, 101])](u([114, 101, 97, 100, 121]), function () {
                    return e();
                  });
                }

                function d() {
                  return null;
                }

                function u(t) {
                  return t.map(function (t) {
                    return String[tA("0x1a")](t);
                  })[tA("0x6d")]("");
                }

                e ? (s == u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]) ? c(t) : s == u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 84, 114, 105, 97, 108]) && window[u([115, 101, 116, 84, 105, 109, 101, 111, 117, 116])](function () {
                  c(t), a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 84, 114, 105, 97, 108, 76, 105, 109, 105, 116]));
                }, o[6] * n[8] * n[6]), t[u([101, 100, 105, 116, 111, 114, 115])][u([111, 110])](u([97, 100, 100]), function (t, e) {
                  s != u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]) && s != u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 84, 114, 105, 97, 108, 76, 105, 109, 105, 116]) || l(e);
                })) : s == u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 73, 110, 118, 97, 108, 105, 100]) ? l(t) : s == u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 84, 114, 105, 97, 108]) && t[u([111, 110])](u([114, 101, 97, 100, 121]), function () {
                  var e = 0;
                  t[u([109, 111, 100, 101, 108])][u([111, 110])](u([97, 112, 112, 108, 121, 79, 112, 101, 114, 97, 116, 105, 111, 110]), function (n, i) {
                    i[0][u([105, 115, 68, 111, 99, 117, 109, 101, 110, 116, 79, 112, 101, 114, 97, 116, 105, 111, 110])] && e++, 504 === e && (l(t), a(u([108, 105, 99, 101, 110, 115, 101, 75, 101, 121, 84, 114, 105, 97, 108, 76, 105, 109, 105, 116])), n[u([111, 102, 102])]());
                  }, {
                    priority: u([104, 105, 103, 104, 101, 115, 116])
                  });
                });
              }(this.context);
            }
          }, {
            key: _tA3,
            set: function set(t) {
              if (this[tA("0x6e")]) throw new rn["default"](tA("0x7d"));
              this[tA("0x6e")] = t;
            }
          }, {
            key: _tA4,
            get: function get() {
              return this._adapter;
            }
          }, {
            key: "addCommentThread",
            value: function addCommentThread() {
              var _ref107 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                  _ref107$channelId = _ref107.channelId,
                  t = _ref107$channelId === void 0 ? eA : _ref107$channelId,
                  _ref107$threadId = _ref107.threadId,
                  e = _ref107$threadId === void 0 ? Object(Xo.a)() : _ref107$threadId,
                  _ref107$comments = _ref107.comments,
                  n = _ref107$comments === void 0 ? [] : _ref107$comments,
                  i = _ref107.target,
                  o = _ref107.isFromAdapter;

              return this[tA("0x18")](rA("addCommentThread", t), {
                channelId: t,
                threadId: e,
                comments: n,
                target: i,
                isFromAdapter: o
              }), this[tA("0x8b")](e);
            }
          }, {
            key: "openNewCommentThread",
            value: function openNewCommentThread(_ref108) {
              var _ref108$channelId = _ref108.channelId,
                  t = _ref108$channelId === void 0 ? eA : _ref108$channelId,
                  _ref108$threadId = _ref108.threadId,
                  e = _ref108$threadId === void 0 ? Object(Xo.a)() : _ref108$threadId,
                  n = _ref108.target;
              if (this[tA("0x1d")][tA("0x3e")](t) || this[tA("0x1d")][tA("0x3e")](void 0)) return;
              if (!n) throw new rn["default"](tA("0x6f"));
              var i = this[tA("0x1e")]({
                channelId: t,
                threadId: e,
                target: n
              });
              if (!i) return null;
              var o = this[tA("0x36")][tA("0x5b")](i),
                  r = o[tA("0x5a")][tA("0x56")].commentInputView,
                  s = this[tA("0x3b")][tA("0x89")].get(XT),
                  a = s[tA("0x68")](o[tA("0x5a")]);
              return s[tA("0x7e")](a), r[tA("0x84")]("editorReady", function () {
                return r[tA("0x31")]();
              }), i;
            }
          }, {
            key: _tA5,
            value: function value(t) {
              if (tA("0xd") != typeof t) throw new rn["default"](tA("0x32"));
              return this[tA("0x71")][tA("0x3e")](t);
            }
          }, {
            key: "getCommentThread",
            value: function getCommentThread(t) {
              if ("string" != typeof t) throw new rn["default"](tA("0x32"));
              return this._threads[tA("0x5b")](t);
            }
          }, {
            key: _tA6,
            value: function value() {
              var _this453 = this;

              var _ref109 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                  t = _ref109.channelId,
                  e = _ref109.threadId;

              var n = this[tA("0x8b")](e);
              if (n) return Promise[tA("0x49")](n);
              if (!this[tA("0x88")]) throw new rn["default"](tA("0x2e"), this[tA("0x3b")]);
              if ("function" != typeof this[tA("0x88")].getCommentThread) throw new rn["default"](tA("0x21"), this[tA("0x3b")]);
              return this.adapter.getCommentThread({
                channelId: t,
                threadId: e
              })[tA("0x6b")](function (n) {
                return _this453[tA("0x4b")](e) ? _this453[tA("0x8b")](e) : n ? _this453[tA("0x1e")](Object.assign({
                  isFromAdapter: !0,
                  channelId: t
                }, n)) : void 0;
              })[tA("0x7a")](function (t) {
                throw console[tA("0x2d")](t), new rn["default"](tA("0x1b"), _this453[tA("0x3b")]);
              });
            }
          }, {
            key: _tA7,
            value: function value() {
              var _ref110 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                  t = _ref110.channelId,
                  _ref110$skipNotAttach = _ref110.skipNotAttached,
                  e = _ref110$skipNotAttach === void 0 ? !1 : _ref110$skipNotAttach,
                  _ref110$skipEmpty = _ref110.skipEmpty,
                  n = _ref110$skipEmpty === void 0 ? !1 : _ref110$skipEmpty,
                  _ref110$toJSON = _ref110.toJSON,
                  i = _ref110$toJSON === void 0 ? !1 : _ref110$toJSON;

              var o = [];

              var _iterator530 = _createForOfIteratorHelper(this[tA("0x71")][tA("0x22")]()),
                  _step530;

              try {
                for (_iterator530.s(); !(_step530 = _iterator530.n()).done;) {
                  var _i269 = _step530.value;
                  t && _i269[tA("0x0")] !== t || e && !_i269[tA("0x34")] || n && 0 === _i269[tA("0x5d")] || o[tA("0x41")](_i269);
                }
              } catch (err) {
                _iterator530.e(err);
              } finally {
                _iterator530.f();
              }

              return i ? o[tA("0x2a")](function (t) {
                return t[tA("0x4")]();
              }) : o;
            }
          }, {
            key: _tA8,
            value: function value(t) {
              var e = this[tA("0x3b")][tA("0x89")][tA("0x5b")](XT);
              if (!t) return void (this[tA("0x78")] && e[tA("0x79")]());
              var n = this[tA("0x8b")](t);
              if (!n) throw new rn["default"](tA("0x12"), null, {
                threadId: t
              });
              if (!this[tA("0x36")].has(n)) throw new rn["default"](tA("0x76"), null, {
                threadId: t
              });
              var i = e.getByInnerView(this._threadToController.get(n)[tA("0x5a")]);
              e[tA("0x7e")](i);
            }
          }, {
            key: "switchReadOnly",
            value: function switchReadOnly(t, e) {
              t ? this[tA("0x1d")][tA("0x5f")](e) : this[tA("0x1d")][tA("0x82")](e);

              var _iterator531 = _createForOfIteratorHelper(this[tA("0x65")]({
                channelId: e
              })),
                  _step531;

              try {
                for (_iterator531.s(); !(_step531 = _iterator531.n()).done;) {
                  var _n341 = _step531.value;
                  _n341[tA("0x25")] = !!t;
                }
              } catch (err) {
                _iterator531.e(err);
              } finally {
                _iterator531.f();
              }
            }
          }, {
            key: _tA9,
            value: function value(t) {
              return this._readOnlyChannels[tA("0x3e")](t) || this[tA("0x1d")][tA("0x3e")](void 0);
            }
          }, {
            key: _tA10,
            value: function value(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : eA;
              var n = !this[tA("0x19")][tA("0x3e")](e),
                  i = new Set(this._nonAdminChannels);
              n && !t && (i[tA("0x5f")](e), this[tA("0x19")] = i), !n && t && (i["delete"](e), this[tA("0x19")] = i);
            }
          }, {
            key: _tA11,
            value: function value(_ref111) {
              var t = _ref111.channelId,
                  e = _ref111.threadId,
                  n = _ref111.comments,
                  i = _ref111.target,
                  o = _ref111.isFromAdapter;
              if ("string" != typeof e) throw new rn["default"]("commentsrepository-invalid-comment-thread-id", null, {
                threadId: e
              });
              if (this[tA("0x4b")](e)) throw new rn["default"](tA("0x3"), null, {
                threadId: e
              });
              var r = new iA(this, {
                channelId: t,
                id: e
              });
              (this[tA("0x1d")][tA("0x3e")](t) || this[tA("0x1d")].has(void 0)) && (r[tA("0x25")] = !0), this._threads[tA("0x7b")](e, r);

              var _iterator532 = _createForOfIteratorHelper(n),
                  _step532;

              try {
                for (_iterator532.s(); !(_step532 = _iterator532.n()).done;) {
                  var _t429 = _step532.value;
                  r[tA("0xf")](Object[tA("0x44")]({
                    isFromAdapter: o
                  }, _t429));
                }
              } catch (err) {
                _iterator532.e(err);
              } finally {
                _iterator532.f();
              }

              i && r.attachTo(i);
            }
          }, {
            key: _tA12,
            value: function value(_ref112) {
              var _this454 = this;

              var t = _ref112.threadId,
                  e = _ref112.target;
              var n = this.getCommentThread(t);
              if (!n) throw new rn["default"](tA("0x38"), this);
              var i = this[tA("0x3b")][tA("0x89")].get("PendingActions"),
                  o = this[tA("0x3b")].plugins[tA("0x5b")](XT),
                  r = this[tA("0x91")](n),
                  s = new qx(n, r);
              var a = null;
              r.on(tA("0x58"), function (t, e, n) {
                n ? a = i[tA("0x5f")](jT(_this454[tA("0x3b")][tA("0x2b")], "PENDING_ACTION_COMMENT_THREAD")) : (i[tA("0x35")](a), a = null);
              }), this[tA("0x36")][tA("0x7b")](n, s), this[tA("0x6")].set(r, s);
              var c = new UT(this[tA("0x3b")][tA("0x2b")], r);
              c[tA("0x90")]("length").to(r), c[tA("0x90")]("isDirty").to(r, "isDirty", r, "length", function (t, e) {
                return t || !e;
              }), c[tA("0x90")](tA("0x40")).to(r), c.type = tA("0x6a");
              var l = new WT({
                view: c,
                target: e,
                type: tA("0x6a")
              });
              o.add(l);
            }
          }, {
            key: "_createCommentThreadView",
            value: function _createCommentThreadView(t) {
              var e = this[tA("0x3b")][tA("0x89")][tA("0x5b")](tA("0x70")),
                  _this$tA = this[tA("0x3b")],
                  n = _this$tA.config,
                  i = _this$tA.locale,
                  o = XC(n[tA("0x5b")]("locale"));
              return new (0, n.get(tA("0x59"))[tA("0x93")])(i, t, e.me, {
                editorConfig: n.get(tA("0x5e")),
                maxCommentsWhenCollapsed: n[tA("0x5b")](tA("0x2")),
                maxThreadTotalWeight: n.get("comments.maxThreadTotalWeight"),
                maxCommentCharsWhenCollapsed: n[tA("0x5b")]("comments.maxCommentCharsWhenCollapsed"),
                formatDateTime: o,
                CommentView: n[tA("0x5b")](tA("0x59"))[tA("0x69")]
              });
            }
          }, {
            key: _tA13,
            value: function value(_ref113) {
              var _this455 = this;

              var t = _ref113.threadId,
                  e = _ref113.isFromAdapter;
              var n = this[tA("0x8b")](t);
              if (!n) throw new rn["default"](tA("0x8e"), this);
              if (this._detachCommentThread(t), this[tA("0x71")][tA("0x82")](t), !n.length || e || !this.adapter || tA("0x77") != typeof this[tA("0x88")][tA("0x87")]) return Promise[tA("0x49")]();
              var i = this[tA("0x3b")].plugins.get(tA("0x43")),
                  o = n.channelId,
                  r = i[tA("0x5f")](jT(this.context.locale, tA("0x47")));
              return this.adapter[tA("0x87")]({
                channelId: o,
                threadId: t
              })[tA("0x6b")](function () {
                return i[tA("0x35")](r);
              })[tA("0x7a")](function (t) {
                throw console[tA("0x2d")](t), new rn["default"](tA("0x2c"), _this455);
              });
            }
          }, {
            key: _tA14,
            value: function value(t) {
              var e = this[tA("0x3b")][tA("0x89")][tA("0x5b")](XT),
                  n = this[tA("0x8b")](t);

              if (this[tA("0x36")][tA("0x3e")](n)) {
                var _t430 = this._threadToController[tA("0x5b")](n),
                    _i270 = _t430.view,
                    _o141 = e[tA("0x68")](_i270);

                this[tA("0x36")][tA("0x82")](n), this[tA("0x6")][tA("0x82")](_i270), e[tA("0x35")](_o141), _t430[tA("0x4e")](), _i270[tA("0x4e")]();
              }
            }
          }, {
            key: _tA15,
            value: function value(_ref114) {
              var _this456 = this;

              var t = _ref114.threadId,
                  _ref114$commentId = _ref114.commentId,
                  e = _ref114$commentId === void 0 ? Object(Xo.a)() : _ref114$commentId,
                  n = _ref114.content,
                  i = _ref114.authorId,
                  o = _ref114.createdAt,
                  r = _ref114.attributes,
                  s = _ref114.isFromAdapter;
              if (tA("0xd") != typeof e) throw new rn["default"](tA("0x24"));
              if ("string" != typeof i) throw new rn["default"](tA("0x3f"));
              if (tA("0xd") != typeof n || !n.trim()) throw new rn["default"](tA("0xa"));
              var a = this[tA("0x8b")](t);
              if (!a) throw new rn["default"](tA("0x55"), this);
              var c = this[tA("0x3b")][tA("0x89")][tA("0x5b")](iy).getUser(i);
              if (!c) throw new rn["default"](tA("0x51"), null, {
                authorId: i
              });
              var l = new oA(this, {
                threadId: t,
                id: e,
                author: c,
                content: n,
                createdAt: o,
                attributes: r
              });
              if (a[tA("0x17")](l), s || !this[tA("0x88")] || tA("0x77") != typeof this[tA("0x88")][tA("0xf")]) return Promise[tA("0x49")]();
              var d = this[tA("0x3b")][tA("0x89")][tA("0x5b")](tA("0x43")),
                  u = a.channelId,
                  h = d.add(jT(this[tA("0x3b")].locale, tA("0x47")));
              return r || (r = {}), this[tA("0x88")][tA("0xf")]({
                channelId: u,
                threadId: t,
                commentId: e,
                content: n,
                attributes: r
              })[tA("0x6b")](function (i) {
                if (d[tA("0x35")](h), _this456.hasCommentThread(t)) i && i[tA("0x7")] && _this456[tA("0x4d")]({
                  threadId: t,
                  commentId: e,
                  createdAt: i[tA("0x7")],
                  isFromAdapter: !0
                });else {
                  var _s54 = {
                    threadId: t,
                    commentId: e,
                    content: n,
                    attributes: r,
                    createdAt: i && i[tA("0x7")] ? i[tA("0x7")] : o,
                    authorId: c.id
                  };

                  _this456[tA("0x1e")]({
                    channelId: u,
                    threadId: t,
                    comments: [_s54],
                    isFromAdapter: !0
                  });
                }
              })[tA("0x7a")](function (t) {
                throw console.error(t), new rn["default"](tA("0x10"), _this456);
              });
            }
          }, {
            key: _tA16,
            value: function value(_ref115) {
              var _this457 = this;

              var t = _ref115.threadId,
                  e = _ref115.commentId,
                  n = _ref115.content,
                  i = _ref115.createdAt,
                  o = _ref115.attributes,
                  r = _ref115.isFromAdapter;
              if (void 0 !== n && (tA("0xd") != typeof n || !n.trim()[tA("0x5d")])) throw new rn["default"]("commentsrepository-update-comment-invalid-content");
              var s = this[tA("0x8b")](t),
                  a = s[tA("0xb")](e);
              if (!a) throw new rn["default"](tA("0x57"), this);
              var c = !1;
              if (n && n !== a.content && a.isEditable && (a[tA("0x53")] = n, c = !0), i && i !== a[tA("0x7")] && (a[tA("0x7")] = i, c = !0), o && !vc(o, a[tA("0x15")]) && (a[tA("0x15")] = o, c = !0), !c) return Promise[tA("0x49")]();
              if (s[tA("0x18")]("commentUpdated"), r || !this[tA("0x88")] || tA("0x77") != typeof this[tA("0x88")][tA("0x7c")]) return Promise[tA("0x49")]();

              var l = this[tA("0x3b")].plugins[tA("0x5b")]("PendingActions"),
                  _this$tA2 = this[tA("0x8b")](a[tA("0x46")]),
                  d = _this$tA2.channelId,
                  u = l[tA("0x5f")](jT(this[tA("0x3b")][tA("0x2b")], tA("0x47")));

              return this[tA("0x88")][tA("0x7c")]({
                channelId: d,
                threadId: t,
                commentId: e,
                content: n,
                attributes: o
              }).then(function () {
                return l.remove(u);
              })[tA("0x7a")](function (t) {
                throw console[tA("0x2d")](t), new rn["default"](tA("0x11"), _this457);
              });
            }
          }, {
            key: _tA17,
            value: function value(_ref116) {
              var _this458 = this;

              var t = _ref116.threadId,
                  e = _ref116.commentId,
                  n = _ref116.isFromAdapter;
              var i = this.getCommentThread(t),
                  o = i[tA("0xb")](e);
              if (!o) throw new rn["default"]("commentsrepository-remove-missing-comment", this);
              if (i._remove(o), n || !this[tA("0x88")] || tA("0x77") != typeof this.adapter[tA("0x73")]) return Promise[tA("0x49")]();
              var r = this.context[tA("0x89")].get(tA("0x43")),
                  s = i.channelId,
                  a = r[tA("0x5f")](jT(this[tA("0x3b")][tA("0x2b")], tA("0x47")));
              return this.adapter[tA("0x73")]({
                channelId: s,
                threadId: t,
                commentId: e
              })[tA("0x6b")](function () {
                return r[tA("0x35")](a);
              })[tA("0x7a")](function (t) {
                throw console[tA("0x2d")](t), new rn["default"](tA("0x27"), _this458);
              });
            }
          }], [{
            key: _tA,
            get: function get() {
              return [XT, iy, xl];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return tA("0x48");
            }
          }]);

          return nA;
        }(gn, tA("0x52"), tA("0x13"), tA("0x88"), tA("0x88"), tA("0x4b"), tA("0x16"), tA("0x65"), tA("0x42"), tA("0x25"), tA("0x72"), tA("0x6c"), tA("0xc"), tA("0x64"), tA("0x3d"), tA("0x60"), tA("0x4d"), tA("0x5"));

        var iA = /*#__PURE__*/function (_tA18, _tA19, _tA20, _tA21, _tA22, _tA23) {
          function iA(t, e) {
            var _this459 = this;

            _classCallCheck(this, iA);

            this[tA("0x0")] = e[tA("0x0")], this.id = e.id, this[tA("0x7b")](tA("0x25"), !1), this[tA("0x90")](tA("0x81")).to(t, tA("0x19"), function (t) {
              return !t[tA("0x3e")](_this459.channelId);
            }), this[tA("0x59")] = new on["default"](), this._repository = t, this[tA("0x30")] = !1;
          }

          _createClass(iA, [{
            key: _tA18,
            get: function get() {
              return Array.from(this.comments).reduce(function (t, e) {
                return t + e[tA("0x80")];
              }, 0);
            }
          }, {
            key: "length",
            get: function get() {
              return this[tA("0x59")][tA("0x5d")];
            }
          }, {
            key: _tA19,
            get: function get() {
              return this[tA("0x30")];
            }
          }, {
            key: "remove",
            value: function remove() {
              var _ref117 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                  _ref117$isFromAdapter = _ref117.isFromAdapter,
                  t = _ref117$isFromAdapter === void 0 ? !1 : _ref117$isFromAdapter;

              var e = this.channelId,
                  n = this.id;
              this[tA("0x63")][tA("0x18")](rA(tA("0x87"), e), {
                channelId: e,
                threadId: n,
                isFromAdapter: t
              });
            }
          }, {
            key: _tA20,
            value: function value(t) {
              this[tA("0x63")][tA("0xc")]({
                threadId: this.id,
                target: t
              });
            }
          }, {
            key: _tA21,
            value: function value(t) {
              var e = this.channelId,
                  n = this.id;

              this._repository.fire(rA(tA("0xf"), e, n), Object[tA("0x44")]({
                channelId: e,
                threadId: n
              }, t));
            }
          }, {
            key: "getComment",
            value: function getComment(t) {
              if (tA("0xd") != typeof t) throw new rn["default"]("commentsrepository-get-comment-invalid-id", null, {
                commentId: t
              });
              return this.comments[tA("0x5b")](t);
            }
          }, {
            key: _tA22,
            value: function value() {
              return {
                threadId: this.id,
                comments: this[tA("0x59")][tA("0x2a")](function (t) {
                  return t[tA("0x4")]();
                })
              };
            }
          }, {
            key: _tA23,
            value: function value(t) {
              var _this460 = this;

              return this.listenTo(t, "change:createdAt", function () {
                var e = _this460[tA("0xe")](t),
                    n = _this460[tA("0x59")];

                e - 1 != n[tA("0x62")](t) && e + 1 != n[tA("0x62")](t) && (_this460[tA("0x4a")](t), _this460[tA("0x17")](t));
              }), t[tA("0x7")] ? this[tA("0x59")][tA("0x5f")](t, this._findOptimalIndex(t)) : this[tA("0x59")][tA("0x5f")](t);
            }
          }, {
            key: "_remove",
            value: function _remove(t) {
              return this[tA("0x45")](t), t.destroy(), this[tA("0x59")][tA("0x35")](t);
            }
          }, {
            key: "_findOptimalIndex",
            value: function _findOptimalIndex(t) {
              var e = this[tA("0x59")][tA("0x8")](function (e) {
                return new Date(e[tA("0x7")]).getTime() > new Date(t.createdAt)[tA("0x8c")]();
              });
              return e ? this[tA("0x59")][tA("0x62")](e) : this[tA("0x5d")];
            }
          }]);

          return iA;
        }(tA("0x80"), tA("0x34"), tA("0x8a"), tA("0xf"), tA("0x4"), tA("0x17"));

        Object(o["default"])(iA, i["default"]);

        var oA = /*#__PURE__*/function (_tA24, _tA25, _tA26, _tA27, _tA28, _tA29) {
          function oA(t, e) {
            _classCallCheck(this, oA);

            var n = t[tA("0x3b")][tA("0x89")][tA("0x5b")](tA("0x70")).me,
                i = t[tA("0x8b")](e[tA("0x46")]),
                o = 0 === i.comments.length,
                r = n === e[tA("0x3c")];
            this.id = e.id, this.threadId = e[tA("0x46")], this[tA("0x3c")] = e[tA("0x3c")], this[tA("0x7b")]("content", e[tA("0x53")]), this.set(tA("0x7"), e[tA("0x7")] || new Date()), this[tA("0x7b")](tA("0x15"), e.attributes || {}), this[tA("0x7b")](tA("0x83"), r), this.bind("isRemovable").to(i, tA("0x81"), function (t) {
              return t && o || r;
            }), this[tA("0x90")](tA("0x25")).to(i, "isReadOnly"), this[tA("0x63")] = t;
          }

          _createClass(oA, [{
            key: _tA24,
            get: function get() {
              return Math[tA("0x92")](function (t) {
                var e = document[tA("0x2f")](tA("0x39"));
                return e[tA("0x1")] = t, e[tA("0x1c")][tA("0x5d")];
              }(this[tA("0x53")]), 200);
            }
          }, {
            key: _tA25,
            value: function value(t) {
              var e = this.threadId,
                  n = this.id;
              if (!this[tA("0x63")][tA("0x4b")](e)) throw new rn["default"](tA("0x26"), this);

              var _this$tA$tA = this[tA("0x63")][tA("0x8b")](e),
                  i = _this$tA$tA.channelId;

              this[tA("0x63")][tA("0x18")](rA(tA("0x7c"), i, e), Object[tA("0x44")]({
                channelId: i,
                threadId: e,
                commentId: n
              }, t));
            }
          }, {
            key: _tA26,
            value: function value(t, e) {
              var n = va(this[tA("0x15")]);
              pi(n, t, e), this.update({
                attributes: n
              });
            }
          }, {
            key: _tA27,
            value: function value(t) {
              var e = va(this[tA("0x15")]);
              Zn(e, t), this[tA("0x29")]({
                attributes: e
              });
            }
          }, {
            key: _tA28,
            value: function value() {
              var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
              if (!t.isFromAdapter && !this.isRemovable) return;
              var e = this.threadId,
                  n = this.id;
              if (!this[tA("0x63")].hasCommentThread(e)) throw new rn["default"](tA("0x20"), this);

              var _this$tA$tA2 = this[tA("0x63")][tA("0x8b")](e),
                  i = _this$tA$tA2.channelId;

              this._repository[tA("0x18")](rA("removeComment", i, e), Object[tA("0x44")]({
                channelId: i,
                threadId: e,
                commentId: n
              }, t));
            }
          }, {
            key: "toJSON",
            value: function toJSON() {
              return {
                commentId: this.id,
                content: this[tA("0x53")],
                createdAt: this[tA("0x7")],
                authorId: this[tA("0x3c")].id,
                attributes: this[tA("0x15")]
              };
            }
          }, {
            key: _tA29,
            value: function value() {
              this[tA("0x45")]();
            }
          }]);

          return oA;
        }(tA("0x80"), tA("0x29"), tA("0x75"), tA("0x14"), tA("0x35"), tA("0x4e"));

        function rA(t) {
          for (var _len34 = arguments.length, e = new Array(_len34 > 1 ? _len34 - 1 : 0), _key34 = 1; _key34 < _len34; _key34++) {
            e[_key34 - 1] = arguments[_key34];
          }

          for (var _i271 = 0, _e381 = e; _i271 < _e381.length; _i271++) {
            var _n342 = _e381[_i271];
            tA("0xd") == typeof _n342 && (t += ":" + _n342);
          }

          return t;
        }

        Object(o["default"])(oA, i["default"]);
        var sA = n(40),
            aA = n.n(sA);
        var cA = ["getUser", "getComment", "_connectService", "commentAdded", "addToReconnectionStack", "add", "cloudservicescommentsadapter-service-not-exist", "setPermissions", "connect", "_fetchMissingUsersForThreads", "assign", "delete", "update", "_terminateService", "commentId", "sessionAdd:", "commentThreadId", "all", "removeCommentThread", "config", "listenTo", "userId", "plugins", "register", "context", "map", "_getService", "catch", "commentRemoved", "_services", "addUser", "get", "getCommentThreads", "getConnectedSessions", "destroy", "off", "adapter", "addCommentThread", "remove", "CommentsService", "404", "unregister", "cloudservicescommentsadapter-connect-already-connected", "init", "hasCommentThread", "from", "addComment", "Permissions", "collaboration.channelId", "removeComment", "comments", "commentUpdated", "disconnect", "code", "getCommentThread", "content", "requires", "has"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(cA, 282);

        var lA = function lA(t, e) {
          return cA[t -= 0];
        };

        var dA = /*#__PURE__*/function (_gn11, _lA, _lA2, _lA3, _lA4, _lA5, _lA6, _lA7) {
          _inherits(dA, _gn11);

          var _super325 = _createSuper(dA);

          function dA(t) {
            var _this461;

            _classCallCheck(this, dA);

            _this461 = _super325.call(this, t), _this461[lA("0x25")] = new Map();
            return _this461;
          }

          _createClass(dA, [{
            key: _lA2,
            value: function () {
              var _value2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee41() {
                var _this462 = this;

                var t, e, _e382, _n343, _i272;

                return regeneratorRuntime.wrap(function _callee41$(_context78) {
                  while (1) {
                    switch (_context78.prev = _context78.next) {
                      case 0:
                        t = this[lA("0x20")], e = t[lA("0x1e")][lA("0x27")](nA);

                        if (!(t.plugins[lA("0x27")](Zv)[lA("0xc")](this), e[lA("0x2c")] = {
                          getCommentThread: function () {
                            var _getCommentThread2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee40(_ref118) {
                              var t, e, n;
                              return regeneratorRuntime.wrap(function _callee40$(_context77) {
                                while (1) {
                                  switch (_context77.prev = _context77.next) {
                                    case 0:
                                      t = _ref118.channelId, e = _ref118.threadId;
                                      _context77.next = 3;
                                      return _this462._getService(t)[lA("0x4")](e);

                                    case 3:
                                      n = _context77.sent;
                                      _context77.next = 6;
                                      return _this462._fetchMissingUsersForThreads([n]);

                                    case 6:
                                      return _context77.abrupt("return", {
                                        threadId: n[lA("0x18")],
                                        comments: n[lA("0x0")][lA("0x21")](hA)
                                      });

                                    case 7:
                                    case "end":
                                      return _context77.stop();
                                  }
                                }
                              }, _callee40);
                            }));

                            function getCommentThread(_x51) {
                              return _getCommentThread2.apply(this, arguments);
                            }

                            return getCommentThread;
                          }(),
                          removeCommentThread: function removeCommentThread(_ref119) {
                            var t = _ref119.channelId,
                                e = _ref119.threadId;
                            return _this462._getService(t)[lA("0x1a")](e)[lA("0x23")](uA);
                          },
                          addComment: function addComment(_ref120) {
                            var t = _ref120.channelId,
                                e = _ref120.threadId,
                                n = _ref120.commentId,
                                i = _ref120.content,
                                o = _ref120.attributes;
                            return _this462[lA("0x22")](t)[lA("0x36")](e, n, i, o);
                          },
                          updateComment: function updateComment(_ref121) {
                            var t = _ref121.channelId,
                                e = _ref121.threadId,
                                n = _ref121.commentId,
                                i = _ref121.content,
                                o = _ref121.attributes;
                            return _this462[lA("0x22")](t).updateComment(e, n, i, o)["catch"](uA);
                          },
                          removeComment: function removeComment(_ref122) {
                            var t = _ref122.channelId,
                                e = _ref122.threadId,
                                n = _ref122.commentId;
                            return _this462[lA("0x22")](t)[lA("0x39")](e, n)[lA("0x23")](uA);
                          }
                        }, t instanceof fn)) {
                          _context78.next = 9;
                          break;
                        }

                        _e382 = t[lA("0x1b")][lA("0x27")](lA("0x38")), _n343 = t[lA("0x1e")][lA("0x27")](cy);
                        _context78.next = 5;
                        return this._setUpService(_e382);

                      case 5:
                        _context78.next = 7;
                        return this[lA("0x25")].get(_e382).getConnectedSessions();

                      case 7:
                        _i272 = _context78.sent;
                        this.listenTo(_n343, lA("0x17") + _e382, function (t, _ref123) {
                          var i = _ref123.session;
                          i.id === _n343.mySessionId && (t[lA("0x2b")](), _this462[lA("0x20")][lA("0x1e")][lA("0x27")](lA("0x37"))[lA("0xf")](i.permissions, _e382));
                        }), _n343.register(_e382, _i272);

                      case 9:
                      case "end":
                        return _context78.stop();
                    }
                  }
                }, _callee41, this);
              }));

              function value() {
                return _value2.apply(this, arguments);
              }

              return value;
            }()
          }, {
            key: "_setUpService",
            value: function () {
              var _setUpService2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee42(t) {
                var e, n;
                return regeneratorRuntime.wrap(function _callee42$(_context79) {
                  while (1) {
                    switch (_context79.prev = _context79.next) {
                      case 0:
                        if (!this[lA("0x25")].has(t)) {
                          _context79.next = 2;
                          break;
                        }

                        throw new rn["default"](lA("0x32"), null, {
                          channelId: t
                        });

                      case 2:
                        e = this[lA("0x20")][lA("0x1e")][lA("0x27")](nA), n = new dA[lA("0x2f")](t);
                        this[lA("0x25")].set(t, n);
                        this[lA("0x1c")](n, "commentThreadRemoved", function (t, _ref124) {
                          var n = _ref124.commentThreadId;
                          var i = e[lA("0x4")](n);
                          i && i[lA("0x2e")]({
                            isFromAdapter: !0
                          });
                        });
                        this[lA("0x1c")](n, lA("0xb"), function (n, i) {
                          var o = i[lA("0x18")];
                          e[lA("0x34")](o) || e.addCommentThread({
                            channelId: t,
                            threadId: o,
                            isFromAdapter: !0
                          });
                          var r = e[lA("0x4")](o);
                          r && r.addComment(Object[lA("0x12")](hA(i), {
                            isFromAdapter: !0
                          }));
                        });
                        this[lA("0x1c")](n, lA("0x1"), function (t, _ref125) {
                          var n = _ref125.commentThreadId,
                              i = _ref125.commentId,
                              o = _ref125.content,
                              r = _ref125.attributes;
                          var s = e.getCommentThread(n);

                          if (s) {
                            var _t431 = s[lA("0x9")](i);

                            _t431 && _t431[lA("0x14")]({
                              content: o,
                              attributes: r,
                              isFromAdapter: !0
                            });
                          }
                        });
                        this[lA("0x1c")](n, lA("0x24"), function (t, _ref126) {
                          var n = _ref126.commentThreadId,
                              i = _ref126.commentId;
                          var o = e[lA("0x4")](n);

                          if (o) {
                            var _t432 = o[lA("0x9")](i);

                            _t432 && _t432[lA("0x2e")]({
                              isFromAdapter: !0
                            });
                          }
                        });
                        _context79.next = 10;
                        return this[lA("0xa")](t);

                      case 10:
                      case "end":
                        return _context79.stop();
                    }
                  }
                }, _callee42, this);
              }));

              function _setUpService(_x52) {
                return _setUpService2.apply(this, arguments);
              }

              return _setUpService;
            }()
          }, {
            key: _lA3,
            value: function value() {
              if (this[lA("0x20")] instanceof fn) {
                var _t433 = this[lA("0x20")][lA("0x1b")][lA("0x27")]("collaboration.channelId");

                this[lA("0x15")](_t433);
              }
            }
          }, {
            key: _lA4,
            value: function value(t) {
              if (!this[lA("0x25")][lA("0x7")](t)) throw new rn["default"]("cloudservicescommentsadapter-disconnect-not-exist", null, {
                channelId: t
              });
              this[lA("0x22")](t)[lA("0x2")](), this[lA("0x25")][lA("0x13")](t);
            }
          }, {
            key: "reconnect",
            value: function () {
              var _reconnect3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee43() {
                var _iterator533, _step533, _t435, _t434, _e383, _n344;

                return regeneratorRuntime.wrap(function _callee43$(_context80) {
                  while (1) {
                    switch (_context80.prev = _context80.next) {
                      case 0:
                        _iterator533 = _createForOfIteratorHelper(this[lA("0x25")].keys());
                        _context80.prev = 1;

                        _iterator533.s();

                      case 3:
                        if ((_step533 = _iterator533.n()).done) {
                          _context80.next = 9;
                          break;
                        }

                        _t435 = _step533.value;
                        _context80.next = 7;
                        return this._connectService(_t435);

                      case 7:
                        _context80.next = 3;
                        break;

                      case 9:
                        _context80.next = 14;
                        break;

                      case 11:
                        _context80.prev = 11;
                        _context80.t0 = _context80["catch"](1);

                        _iterator533.e(_context80.t0);

                      case 14:
                        _context80.prev = 14;

                        _iterator533.f();

                        return _context80.finish(14);

                      case 17:
                        if (!(this[lA("0x20")] instanceof fn)) {
                          _context80.next = 24;
                          break;
                        }

                        _t434 = this[lA("0x20")][lA("0x1b")][lA("0x27")](lA("0x38")), _e383 = this[lA("0x20")].plugins[lA("0x27")](cy);

                        _e383[lA("0x31")](_t434);

                        _context80.next = 22;
                        return this._services.get(_t434)[lA("0x29")]();

                      case 22:
                        _n344 = _context80.sent;

                        _e383[lA("0x1f")](_t434, _n344);

                      case 24:
                      case "end":
                        return _context80.stop();
                    }
                  }
                }, _callee43, this, [[1, 11, 14, 17]]);
              }));

              function reconnect() {
                return _reconnect3.apply(this, arguments);
              }

              return reconnect;
            }()
          }, {
            key: _lA5,
            value: function () {
              var _value3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee44(t) {
                var _this$lA$plugins$lA, e, n, i, o, r, _iterator534, _step534, _t436, _iterator535, _step535, _t437, _iterator536, _step536, _e384, _i273, _o142, _iterator537, _step537, _t438, _iterator538, _step538, _t439, _iterator539, _step539, _t440, _e385;

                return regeneratorRuntime.wrap(function _callee44$(_context81) {
                  while (1) {
                    switch (_context81.prev = _context81.next) {
                      case 0:
                        _this$lA$plugins$lA = this[lA("0x20")].plugins[lA("0x27")](Zv);
                        e = _this$lA$plugins$lA.connection;
                        n = this[lA("0x20")][lA("0x1e")][lA("0x27")](nA);
                        i = this[lA("0x25")].get(t);
                        _context81.next = 6;
                        return i[lA("0x10")](e);

                      case 6:
                        o = _context81.sent;
                        _context81.next = 9;
                        return this[lA("0x11")](o);

                      case 9:
                        r = new Set(Array.from(n[lA("0x28")]({
                          channelId: t
                        }), function (t) {
                          return t.id;
                        }));
                        _iterator534 = _createForOfIteratorHelper(o);

                        try {
                          for (_iterator534.s(); !(_step534 = _iterator534.n()).done;) {
                            _t436 = _step534.value;
                            r[lA("0x13")](_t436[lA("0x18")]);
                          }
                        } catch (err) {
                          _iterator534.e(err);
                        } finally {
                          _iterator534.f();
                        }

                        _iterator535 = _createForOfIteratorHelper(r);

                        try {
                          for (_iterator535.s(); !(_step535 = _iterator535.n()).done;) {
                            _t437 = _step535.value;
                            n[lA("0x4")](_t437)[lA("0x2e")]({
                              isFromAdapter: !0
                            });
                          }
                        } catch (err) {
                          _iterator535.e(err);
                        } finally {
                          _iterator535.f();
                        }

                        _iterator536 = _createForOfIteratorHelper(o);

                        try {
                          for (_iterator536.s(); !(_step536 = _iterator536.n()).done;) {
                            _e384 = _step536.value;
                            _i273 = n[lA("0x4")](_e384[lA("0x18")]);
                            _i273 || (_i273 = n[lA("0x2d")]({
                              channelId: t,
                              threadId: _e384.commentThreadId,
                              isFromAdapter: !0
                            }));
                            _o142 = new Set(Array[lA("0x35")](_i273[lA("0x0")], function (t) {
                              return t.id;
                            }));
                            _iterator537 = _createForOfIteratorHelper(_e384.comments);

                            try {
                              for (_iterator537.s(); !(_step537 = _iterator537.n()).done;) {
                                _t438 = _step537.value;

                                _o142["delete"](_t438[lA("0x16")]);
                              }
                            } catch (err) {
                              _iterator537.e(err);
                            } finally {
                              _iterator537.f();
                            }

                            _iterator538 = _createForOfIteratorHelper(_o142);

                            try {
                              for (_iterator538.s(); !(_step538 = _iterator538.n()).done;) {
                                _t439 = _step538.value;

                                _i273.getComment(_t439).remove({
                                  isFromAdapter: !0
                                });
                              }
                            } catch (err) {
                              _iterator538.e(err);
                            } finally {
                              _iterator538.f();
                            }

                            _iterator539 = _createForOfIteratorHelper(_e384.comments);

                            try {
                              for (_iterator539.s(); !(_step539 = _iterator539.n()).done;) {
                                _t440 = _step539.value;
                                _e385 = _i273[lA("0x9")](_t440[lA("0x16")]);
                                _e385 ? _e385[lA("0x5")] !== _t440[lA("0x5")] && _e385.update({
                                  content: _t440[lA("0x5")],
                                  isFromAdapter: !0
                                }) : _i273.addComment(Object[lA("0x12")](hA(_t440), {
                                  isFromAdapter: !0
                                }));
                              }
                            } catch (err) {
                              _iterator539.e(err);
                            } finally {
                              _iterator539.f();
                            }
                          }
                        } catch (err) {
                          _iterator536.e(err);
                        } finally {
                          _iterator536.f();
                        }

                      case 16:
                      case "end":
                        return _context81.stop();
                    }
                  }
                }, _callee44, this);
              }));

              function value(_x53) {
                return _value3.apply(this, arguments);
              }

              return value;
            }()
          }, {
            key: _lA6,
            value: function value(t) {
              if (!this[lA("0x25")][lA("0x7")](t)) throw new rn["default"](lA("0xe"), null, {
                channelId: t
              });
              return this[lA("0x25")][lA("0x27")](t);
            }
          }, {
            key: _lA7,
            value: function value(t) {
              var e = this.context[lA("0x1e")][lA("0x27")](iy),
                  _this$lA$lA$lA = this[lA("0x20")][lA("0x1e")][lA("0x27")](Zv),
                  n = _this$lA$lA$lA.connection,
                  i = new Set();

              var _iterator540 = _createForOfIteratorHelper(t),
                  _step540;

              try {
                for (_iterator540.s(); !(_step540 = _iterator540.n()).done;) {
                  var _n345 = _step540.value.comments;

                  var _iterator541 = _createForOfIteratorHelper(_n345),
                      _step541;

                  try {
                    for (_iterator541.s(); !(_step541 = _iterator541.n()).done;) {
                      var _t441 = _step541.value.userId;
                      e[lA("0x8")](_t441) || i[lA("0xd")](_t441);
                    }
                  } catch (err) {
                    _iterator541.e(err);
                  } finally {
                    _iterator541.f();
                  }
                }
              } catch (err) {
                _iterator540.e(err);
              } finally {
                _iterator540.f();
              }

              return Promise[lA("0x19")](Array[lA("0x35")](i, /*#__PURE__*/function () {
                var _ref127 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee45(t) {
                  var i;
                  return regeneratorRuntime.wrap(function _callee45$(_context82) {
                    while (1) {
                      switch (_context82.prev = _context82.next) {
                        case 0:
                          _context82.next = 2;
                          return aA.a[lA("0x27")](n, t);

                        case 2:
                          i = _context82.sent;
                          e[lA("0x8")](t) || e[lA("0x26")](i);

                        case 4:
                        case "end":
                          return _context82.stop();
                      }
                    }
                  }, _callee45);
                }));

                return function (_x54) {
                  return _ref127.apply(this, arguments);
                };
              }()));
            }
          }], [{
            key: _lA,
            get: function get() {
              return [Zv, nA, cy, iy];
            }
          }]);

          return dA;
        }(gn, lA("0x6"), lA("0x33"), lA("0x2a"), lA("0x15"), lA("0xa"), lA("0x22"), lA("0x11"));

        function uA(_x55) {
          return _uA.apply(this, arguments);
        }

        function _uA() {
          _uA = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee50(t) {
            return regeneratorRuntime.wrap(function _callee50$(_context91) {
              while (1) {
                switch (_context91.prev = _context91.next) {
                  case 0:
                    if (!(lA("0x30") !== t[lA("0x3")])) {
                      _context91.next = 2;
                      break;
                    }

                    throw t;

                  case 2:
                  case "end":
                    return _context91.stop();
                }
              }
            }, _callee50);
          }));
          return _uA.apply(this, arguments);
        }

        function hA(t) {
          return {
            threadId: t[lA("0x18")],
            commentId: t[lA("0x16")],
            content: t.content,
            createdAt: t.createdAt,
            authorId: t[lA("0x1d")],
            attributes: t.attributes
          };
        }

        dA.CommentsService = Vx.a;
        var fA = ["element", "push", "getRanges", "end", "isObject", "substr", "addMarker", "getItems", "tableCell", "textProxy", "execute", "refresh", "item", "_hasContent", "createRange", "_trimToContent", "model", "isEnabled", "schema", "editor", "selection", "document", "_itemIsContent", "getLastMatchingPosition", "comment:"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(fA, 272);

        var gA = function gA(t, e) {
          return fA[t -= 0];
        };

        var mA = /*#__PURE__*/function (_a79, _gA, _gA2, _gA3) {
          _inherits(mA, _a79);

          var _super326 = _createSuper(mA);

          function mA() {
            _classCallCheck(this, mA);

            return _super326.apply(this, arguments);
          }

          _createClass(mA, [{
            key: _gA,
            value: function value() {
              var t = this[gA("0x16")].model[gA("0x18")][gA("0x17")];

              var _iterator542 = _createForOfIteratorHelper(t.getRanges()),
                  _step542;

              try {
                for (_iterator542.s(); !(_step542 = _iterator542.n()).done;) {
                  var _e386 = _step542.value;
                  if (this[gA("0x10")](_e386)) return void (this.isEnabled = !0);
                }
              } catch (err) {
                _iterator542.e(err);
              } finally {
                _iterator542.f();
              }

              this[gA("0x14")] = !1;
            }
          }, {
            key: _gA2,
            value: function value() {
              var _ref128 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                  _ref128$threadId = _ref128.threadId,
                  t = _ref128$threadId === void 0 ? Object(Xo.a)() : _ref128$threadId;

              var e = this[gA("0x16")][gA("0x13")],
                  n = [];

              var _iterator543 = _createForOfIteratorHelper(e[gA("0x18")][gA("0x17")][gA("0x5")]()),
                  _step543;

              try {
                for (_iterator543.s(); !(_step543 = _iterator543.n()).done;) {
                  var _t442 = _step543.value;
                  this[gA("0x10")](_t442) && n[gA("0x4")](this[gA("0x12")](_t442));
                }
              } catch (err) {
                _iterator543.e(err);
              } finally {
                _iterator543.f();
              }

              e.change(function (e) {
                var _iterator544 = _createForOfIteratorHelper(n),
                    _step544;

                try {
                  for (_iterator544.s(); !(_step544 = _iterator544.n()).done;) {
                    var _i274 = _step544.value;

                    var _n346 = Object(Xo.a)()[gA("0x8")](1, 5),
                        _o143 = gA("0x2") + t + ":" + _n346;

                    e[gA("0x9")](_o143, {
                      range: _i274,
                      usingOperation: !1,
                      affectData: !1
                    });
                  }
                } catch (err) {
                  _iterator544.e(err);
                } finally {
                  _iterator544.f();
                }
              });
            }
          }, {
            key: "_hasContent",
            value: function _hasContent(t) {
              var _iterator545 = _createForOfIteratorHelper(t[gA("0xa")]()),
                  _step545;

              try {
                for (_iterator545.s(); !(_step545 = _iterator545.n()).done;) {
                  var _e387 = _step545.value;
                  if (this[gA("0x0")](_e387)) return !0;
                }
              } catch (err) {
                _iterator545.e(err);
              } finally {
                _iterator545.f();
              }

              return !1;
            }
          }, {
            key: _gA3,
            value: function value(t) {
              return t.is(gA("0xc")) || this[gA("0x16")][gA("0x13")][gA("0x15")][gA("0x7")](t) && !t.is(gA("0x3"), gA("0xb"));
            }
          }, {
            key: "_trimToContent",
            value: function _trimToContent(t) {
              var _this463 = this;

              var e = function e(t) {
                return !_this463[gA("0x0")](t[gA("0xf")]);
              },
                  n = t.start[gA("0x1")](e),
                  i = t[gA("0x6")][gA("0x1")](e, {
                direction: "backward"
              });

              return this[gA("0x16")][gA("0x13")][gA("0x11")](n, i);
            }
          }]);

          return mA;
        }(a, gA("0xe"), gA("0xd"), gA("0x0"));

        var pA = ["view", "domConverter", "markerNameToElements", "name", "mapViewToDom", "mapper"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(pA, 336);

        var bA = function bA(t, e) {
          return pA[t -= 0];
        };

        function kA(t, e) {
          var n = Es(t[bA("0x5")][bA("0x2")](e[bA("0x3")]).values());
          return t[bA("0x0")][bA("0x1")][bA("0x4")](n);
        }

        var _A = ["afterInit", "RestrictedEditingModeEditing", "plugins", "addCommentThread", "editor", "has", "get"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(_A, 234);

        var wA = function wA(t, e) {
          return _A[t -= 0];
        };

        var vA = /*#__PURE__*/function (_r182, _wA) {
          _inherits(vA, _r182);

          var _super327 = _createSuper(vA);

          function vA() {
            _classCallCheck(this, vA);

            return _super327.apply(this, arguments);
          }

          _createClass(vA, [{
            key: _wA,
            value: function value() {
              var t = this[wA("0x1")];
              t[wA("0x6")][wA("0x2")](wA("0x5")) && t[wA("0x6")][wA("0x3")](wA("0x5")).enableCommand(wA("0x0"));
            }
          }]);

          return vA;
        }(r, wA("0x4"));

        n(388);
        var yA = ["hasContent", "length", "_handleMarkerAddAndRemove", "split", "pluginName", "name", "change", "addComment", "change:isThreadsLoadingPaused", "data", "document", "comment:", "editingDowncast", "once", "for", "getAllMarkersForId", "rootName", "model", "removeMarker", "dataToMarker", "root", "change:activeMarker", "get", "render", "_changedMarkers", "markers", "hasCommentThread", "createRange", "change:isReadOnly", "low", "map", "delete", "collaboration.channelId", "init", "hasMarkerForId", "updateMarker", "$graveyard", "add", "_attachThreadToMarker", "comment", "update:comment", "isEqual", "stop", "isThreadsLoadingPaused", "addCommentThread", "getCommentThread", "isCollapsed", "fetchCommentThread", "removeCommentThread", "commands", "activeMarker", "markerToHighlight", "left", "text", "CommentsRepository", "view", "plugins", "CommentsEditing", "schema", "from", "editor", "openNewCommentThread", "isObject", "attachTo", "getCommentThreads", "_attachedThreads", "affectsData", "createPositionBefore", "sort", "getAttribute", "getWalker", "set", "size", "editing", "dataDowncast", "$marker", "upcast", "newRange", "state", "markerName", "_initializeMarkerConverters", "ck-comment-marker--active", "has", "listenTo", "config", "end", "start", "registerPostFixer", "ck-comment-marker", "destroy", "conversion"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(yA, 104);

        var xA = function xA(t, e) {
          return yA[t -= 0];
        };

        var CA = /*#__PURE__*/function (_r183, _xA, _xA2, _xA3, _xA4, _xA5) {
          _inherits(CA, _r183);

          var _super328 = _createSuper(CA);

          function CA(t) {
            var _this464;

            _classCallCheck(this, CA);

            _this464 = _super328.call(this, t), _this464[xA("0x3a")]("isThreadsLoadingPaused", !0), t[xA("0x57")][xA("0x0")]("ready", function () {
              return _this464[xA("0x1e")] = !1;
            }), _this464[xA("0x3a")](xA("0x25"), null), _this464.on(xA("0x8"), function (e, n, i, o) {
              t[xA("0x4")][xA("0x54")](function (t) {
                if (i) {
                  var _AA = AA(i),
                      _e388 = _AA.id,
                      _n347 = _this464[xA("0x2")](_e388);

                  var _iterator546 = _createForOfIteratorHelper(_n347),
                      _step546;

                  try {
                    for (_iterator546.s(); !(_step546 = _iterator546.n()).done;) {
                      var _e389 = _step546.value;
                      t[xA("0x16")](_e389);
                    }
                  } catch (err) {
                    _iterator546.e(err);
                  } finally {
                    _iterator546.f();
                  }
                }

                if (o) {
                  var _AA2 = AA(o),
                      _e390 = _AA2.id,
                      _n348 = _this464[xA("0x2")](_e390);

                  var _iterator547 = _createForOfIteratorHelper(_n348),
                      _step547;

                  try {
                    for (_iterator547.s(); !(_step547 = _iterator547.n()).done;) {
                      var _e391 = _step547.value;
                      t[xA("0x16")](_e391);
                    }
                  } catch (err) {
                    _iterator547.e(err);
                  } finally {
                    _iterator547.f();
                  }
                }
              });
            }), _this464[xA("0x34")] = new Set();
            return _this464;
          }

          _createClass(CA, [{
            key: _xA2,
            value: function value() {
              var _this465 = this;

              var t = this[xA("0x2f")],
                  e = t[xA("0x2b")][xA("0x9")](xA("0x29")),
                  n = t.config[xA("0x9")](xA("0x13"));
              t[xA("0x24")][xA("0x18")](xA("0x1f"), new mA(t)), this.listenTo(t, xA("0xf"), function (n, i, o) {
                e.switchReadOnly(o, t[xA("0x47")][xA("0x9")](xA("0x13")));
              }), this[xA("0x46")](e, TA(xA("0x23"), n), function (n, _ref129) {
                var i = _ref129.threadId;
                t[xA("0x4")].change(function (t) {
                  var _iterator548 = _createForOfIteratorHelper(_this465.getAllMarkersForId(i)),
                      _step548;

                  try {
                    for (_iterator548.s(); !(_step548 = _iterator548.n()).done;) {
                      var _e392 = _step548.value;
                      t[xA("0x5")](_e392);
                    }
                  } catch (err) {
                    _iterator548.e(err);
                  } finally {
                    _iterator548.f();
                  }
                });
                var o = e.getCommentThread(i);
                e.hasCommentThread(i) && !o[xA("0x4f")] || n[xA("0x1d")]();
              }, {
                priority: "high"
              }), this[xA("0x46")](e, TA(xA("0x55"), n), function (n, _ref130) {
                var i = _ref130.threadId,
                    o = _ref130.isFromAdapter;

                var r = _this465.getAllMarkersForId(i);

                !o && 0 != r[xA("0x4f")] && e[xA("0xd")](i) && 1 === e[xA("0x20")](i)[xA("0x4f")] && t[xA("0x4")][xA("0x54")](function (t) {
                  var _iterator549 = _createForOfIteratorHelper(r),
                      _step549;

                  try {
                    for (_iterator549.s(); !(_step549 = _iterator549.n()).done;) {
                      var _e393 = _step549.value;
                      t[xA("0x16")](_e393, {
                        usingOperation: !0,
                        affectsData: !0
                      });
                    }
                  } catch (err) {
                    _iterator549.e(err);
                  } finally {
                    _iterator549.f();
                  }
                });
              }, {
                priority: xA("0x10")
              }), this._initializeMarkerConverters(), this[xA("0x50")]();
            }
          }, {
            key: _xA3,
            value: function value() {
              var t = this[xA("0x2f")][xA("0x2b")].get("CommentsRepository"),
                  e = this.editor[xA("0x47")].get(xA("0x13"));

              var _iterator550 = _createForOfIteratorHelper(t[xA("0x33")]({
                channelId: e
              })),
                  _step550;

              try {
                for (_iterator550.s(); !(_step550 = _iterator550.n()).done;) {
                  var _n349 = _step550.value;
                  t._detachCommentThread(_n349.id), t._threads[xA("0x12")](_n349.id);
                }
              } catch (err) {
                _iterator550.e(err);
              } finally {
                _iterator550.f();
              }

              _get3(_getPrototypeOf(CA.prototype), xA("0x4c"), this).call(this);
            }
          }, {
            key: "hasMarkerForId",
            value: function hasMarkerForId(t) {
              return this.getAllMarkersForId(t).length > 0;
            }
          }, {
            key: _xA4,
            value: function value(t) {
              var e = this.editor.model[xA("0xc")][xA("0x9")](xA("0x59") + t);
              return e ? [e] : Array[xA("0x2e")](this.editor[xA("0x4")][xA("0xc")].getMarkersGroup(xA("0x59") + t));
            }
          }, {
            key: _xA5,
            value: function value() {
              var _this466 = this;

              var t = this[xA("0x2f")];
              t.conversion[xA("0x1")](xA("0x5a"))[xA("0x26")]({
                model: xA("0x1a"),
                view: function view(t) {
                  var _AA3 = AA(t[xA("0x42")]),
                      e = _AA3.id,
                      n = [xA("0x4b")];

                  return _this466[xA("0x25")] && AA(_this466[xA("0x25")]).id === e && n.push(xA("0x44")), {
                    classes: n,
                    attributes: {
                      "data-comment": e
                    }
                  };
                }
              }), t[xA("0x4d")][xA("0x1")](xA("0x3d")).markerToData({
                model: xA("0x1a"),
                view: function view(e) {
                  var n = t.model[xA("0xc")][xA("0x9")](e),
                      _AA4 = AA(e),
                      i = _AA4.id,
                      o = _AA4.part;

                  return n && !n[xA("0x35")] ? null : {
                    group: "comment",
                    name: o ? i + ":" + o : i
                  };
                }
              }), t[xA("0x4d")][xA("0x1")]("upcast").elementToElement({
                view: {
                  name: xA("0x1a"),
                  attribute: {
                    id: /^\w/
                  }
                },
                model: function model(t, _ref131) {
                  var e = _ref131.writer;
                  return e.createElement(xA("0x3e"), {
                    "data-name": xA("0x59") + t[xA("0x38")]("id")
                  });
                }
              }), t[xA("0x4d")][xA("0x1")](xA("0x3f"))[xA("0x6")]({
                view: xA("0x1a")
              });
            }
          }, {
            key: "_handleMarkerAddAndRemove",
            value: function _handleMarkerAddAndRemove() {
              var _this467 = this;

              var t = this[xA("0x2f")],
                  e = t[xA("0x2b")][xA("0x9")](xA("0x29")),
                  n = new Set();
              t.model[xA("0x58")][xA("0x4a")](function (e) {
                var i = !1;

                var _iterator551 = _createForOfIteratorHelper(t[xA("0x4")][xA("0x58")].differ[xA("0xb")]),
                    _step551;

                try {
                  for (_iterator551.s(); !(_step551 = _iterator551.n()).done;) {
                    var _step551$value = _slicedToArray(_step551.value, 2),
                        _o144 = _step551$value[0],
                        _r184 = _step551$value[1];

                    var _AA5 = AA(_o144),
                        _s55 = _AA5.group,
                        _a80 = _AA5.id;

                    var _c25 = _r184[xA("0x40")];

                    if (xA("0x1a") !== _s55 || !_c25) continue;

                    var _l15 = xA("0x17") === _c25[xA("0x7")][xA("0x3")];

                    _l15 || !(_c25 = EA(_c25, t.model)) || _c25[xA("0x1c")](_r184.newRange) ? !_c25 || !t.model[xA("0x4e")](_c25) || _this467[xA("0x34")][xA("0x45")](_a80) && _l15 ? (e[xA("0x5")](_o144), i = !0) : _l15 || (_this467[xA("0x1e")] ? n.add(_a80) : _this467[xA("0x19")](_a80)) : (e[xA("0x16")](_o144, {
                      range: _c25
                    }), i = !0);
                  }
                } catch (err) {
                  _iterator551.e(err);
                } finally {
                  _iterator551.f();
                }

                return i;
              }), this.on(xA("0x56"), function (t, e, i) {
                if (!i && n[xA("0x3b")]) {
                  var _iterator552 = _createForOfIteratorHelper(n),
                      _step552;

                  try {
                    for (_iterator552.s(); !(_step552 = _iterator552.n()).done;) {
                      var _t443 = _step552.value;
                      _this467._attachThreadToMarker(_t443), n[xA("0x12")](_t443);
                    }
                  } catch (err) {
                    _iterator552.e(err);
                  } finally {
                    _iterator552.f();
                  }
                }
              }), this[xA("0x46")](t[xA("0x4")][xA("0xc")], xA("0x1b"), function (i, o, r, s) {
                if (s) return;

                var _AA6 = AA(o[xA("0x53")]),
                    a = _AA6.id,
                    c = t.plugins[xA("0x9")]("CommentsRepository")[xA("0x20")](a);

                n[xA("0x12")](a), c && !_this467[xA("0x15")](a) && (_this467[xA("0x34")]["delete"](a), e._detachCommentThread(a));
              });
            }
          }, {
            key: "_attachThreadToMarker",
            value: function _attachThreadToMarker(t) {
              var _this468 = this;

              if (this._attachedThreads[xA("0x45")](t)) return;
              this[xA("0x34")].add(t);

              var e = this.editor,
                  n = e[xA("0x2b")].get(xA("0x29")),
                  i = e.config[xA("0x9")](xA("0x13")),
                  o = function o() {
                var n = _this468[xA("0x2")](t);

                if (0 == n.length) return null;
                var i = n[xA("0x11")](function (t) {
                  return kA(e.editing, t);
                });
                return i[xA("0x37")](function (t, e) {
                  var n = new ws(t),
                      i = new ws(e),
                      o = n.top - i.top;
                  return 0 == o ? n[xA("0x27")] - i[xA("0x27")] : o;
                }), i[0];
              };

              this[xA("0x2")](t)[0].managedUsingOperations ? n[xA("0x22")]({
                channelId: i,
                threadId: t
              }).then(function (n) {
                if ("destroyed" !== e[xA("0x41")]) if (n) n[xA("0x32")](o);else {
                  var _n350 = _this468[xA("0x2")](t);

                  e[xA("0x4")][xA("0x54")](function (t) {
                    var _iterator553 = _createForOfIteratorHelper(_n350),
                        _step553;

                    try {
                      for (_iterator553.s(); !(_step553 = _iterator553.n()).done;) {
                        var _e394 = _step553.value;
                        t[xA("0x5")](_e394);
                      }
                    } catch (err) {
                      _iterator553.e(err);
                    } finally {
                      _iterator553.f();
                    }
                  });
                }
              }) : e[xA("0x3c")][xA("0x2a")][xA("0x0")](xA("0xa"), function () {
                n[xA("0x30")]({
                  channelId: i,
                  threadId: t,
                  target: o
                });
              }, {
                priority: xA("0x10")
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [nA, vA];
            }
          }, {
            key: _xA,
            get: function get() {
              return xA("0x2c");
            }
          }]);

          return CA;
        }(r, xA("0x52"), xA("0x14"), xA("0x4c"), xA("0x2"), xA("0x43"));

        function TA(t, e) {
          return e ? t + ":" + e : t;
        }

        function AA(t) {
          var e = t[xA("0x51")](":");
          return {
            group: e[0],
            id: e[1],
            part: e[2]
          };
        }

        function EA(t, e) {
          var n = e[xA("0x2d")],
              i = e[xA("0xe")](t.start);

          var _iterator554 = _createForOfIteratorHelper(t[xA("0x39")]()),
              _step554;

          try {
            for (_iterator554.s(); !(_step554 = _iterator554.n()).done;) {
              var _o145 = _step554.value;
              var _t444 = _o145.type,
                  _r185 = _o145.item,
                  _s56 = _o145.nextPosition;

              if (xA("0x28") === _t444 || n[xA("0x31")](_r185)) {
                var _t445 = e[xA("0x36")](_r185);

                i.isCollapsed && (i[xA("0x49")] = _t445), i[xA("0x48")] = _s56;
              }
            }
          } catch (err) {
            _iterator554.e(err);
          } finally {
            _iterator554.f();
          }

          return i[xA("0x21")] ? null : i;
        }

        var SA = ["EditorAnnotations", "requires", "blur", "has", "range", "from", "editor", "innerView", "add", "_editorAnnotationsData", "change:range", "function", "plugins", "focusTracker", "set", "uiUpdate", "cancel", "pluginName", "refreshSelectedViews", "isReadOnly", "collection", "_dataCollectors", "getOrderedSelectedAnnotations", "change:isFocused", "getRanges", "delete", "document", "map", "view", "listenTo", "editing", "keys", "push", "annotation", "containsRange", "addSourceCollector", "selection", "model", "update", "fire", "refresh", "editorannotations-invalid-source-callback", "isCollapsed", "init", "remove", "hasDomSelection", "element"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(SA, 410);

        var IA = function IA(t, e) {
          return SA[t -= 0];
        };

        var OA = /*#__PURE__*/function (_r186, _IA, _IA2, _IA3, _IA4, _IA5, _IA6, _IA7) {
          _inherits(OA, _r186);

          var _super329 = _createSuper(OA);

          function OA(t) {
            var _this469;

            _classCallCheck(this, OA);

            _this469 = _super329.call(this, t), _this469[IA("0x22")] = new Set();
            return _this469;
          }

          _createClass(OA, [{
            key: _IA3,
            value: function value() {
              var _this470 = this;

              var t = this[IA("0x13")],
                  e = t[IA("0x19")].get(XT),
                  n = t[IA("0x3")].document[IA("0x2")],
                  i = cs(function () {
                return _this470[IA("0x1f")]();
              }, 10);
              n.on(IA("0x17"), function (t, e) {
                e.directChange && (i[IA("0x1d")](), _this470[IA("0x1f")]());
              }), this[IA("0x2a")](t[IA("0x2b")][IA("0x29")][IA("0x27")], IA("0x24"), function (t, e, n) {
                n && i();
              }), this[IA("0x2a")](t.ui[IA("0x1a")], "change:isFocused", function (e, n, i) {
                i || t[IA("0x20")] || _this470[IA("0x5")](IA("0xf"), {
                  isAnnotationTracked: function isAnnotationTracked(t) {
                    return _this470._editorAnnotationsData[IA("0x10")](t[IA("0x14")]);
                  }
                });
              }), this[IA("0x2a")](this[IA("0x13")].ui, IA("0x4"), function () {
                return _this470.fire(IA("0x1c"));
              });
              var o = new Set();
              this.listenTo(e[IA("0x21")], IA("0x15"), function (e, n) {
                var _iterator555 = _createForOfIteratorHelper(_this470[IA("0x16")][IA("0x2c")]()),
                    _step555;

                try {
                  for (_iterator555.s(); !(_step555 = _iterator555.n()).done;) {
                    var _e395 = _step555.value;

                    if (_e395 === n[IA("0x14")]) {
                      t.ui[IA("0x1a")][IA("0x15")](n[IA("0x29")][IA("0xc")]), o[IA("0x15")](n.view);
                      break;
                    }
                  }
                } catch (err) {
                  _iterator555.e(err);
                } finally {
                  _iterator555.f();
                }
              }), this[IA("0x2a")](e.collection, IA("0xa"), function (e, n) {
                o.has(n.view) && (t.ui[IA("0x1a")][IA("0xa")](n[IA("0x29")][IA("0xc")]), o[IA("0x26")](n[IA("0x29")]));
              });
            }
          }, {
            key: _IA4,
            value: function value() {
              return this[IA("0x13")].editing.view[IA("0xb")];
            }
          }, {
            key: _IA5,
            value: function value(t) {
              if (IA("0x18") != typeof t) throw new rn["default"](IA("0x7"));
              this[IA("0x22")][IA("0x15")](t);
            }
          }, {
            key: "refreshSelectedViews",
            value: function refreshSelectedViews() {
              this[IA("0x5")](IA("0x6"));
            }
          }, {
            key: _IA6,
            value: function value(_ref132) {
              var t = _ref132.activeAnnotation,
                  e = _ref132.annotations;
              var n = [],
                  i = this[IA("0x13")][IA("0x3")].document[IA("0x2")],
                  o = Array[IA("0x12")](i[IA("0x25")]());

              var _iterator556 = _createForOfIteratorHelper(this[IA("0x16")]),
                  _step556;

              try {
                for (_iterator556.s(); !(_step556 = _iterator556.n()).done;) {
                  var _step556$value = _slicedToArray(_step556.value, 2),
                      _t447 = _step556$value[0],
                      _i275 = _step556$value[1];

                  var _o146 = r(_i275),
                      _s57 = e.getByInnerView(_t447);

                  _o146 && _s57 && n[IA("0x2d")]({
                    annotation: _s57,
                    range: _o146
                  });
                }
              } catch (err) {
                _iterator556.e(err);
              } finally {
                _iterator556.f();
              }

              function r(t) {
                var _iterator557 = _createForOfIteratorHelper(t),
                    _step557;

                try {
                  for (_iterator557.s(); !(_step557 = _iterator557.n()).done;) {
                    var _e396 = _step557.value;

                    var _iterator558 = _createForOfIteratorHelper(o),
                        _step558;

                    try {
                      for (_iterator558.s(); !(_step558 = _iterator558.n()).done;) {
                        var _t446 = _step558.value;
                        if (_e396[IA("0x0")](_t446, !i[IA("0x8")])) return _e396;
                      }
                    } catch (err) {
                      _iterator558.e(err);
                    } finally {
                      _iterator558.f();
                    }
                  }
                } catch (err) {
                  _iterator557.e(err);
                } finally {
                  _iterator557.f();
                }

                return null;
              }

              return n.sort(function (e, n) {
                var i = e.range,
                    o = n[IA("0x11")];

                if (!i.isEqual(o)) {
                  if (i[IA("0x0")](o, !0)) return 1;
                  if (o[IA("0x0")](i, !0)) return -1;
                }

                return e.annotation == t ? -1 : n.annotation == t ? 1 : 0;
              })[IA("0x28")](function (t) {
                return t[IA("0x2e")];
              });
            }
          }, {
            key: _IA7,
            get: function get() {
              var t = new Map();

              for (var _i276 = 0, _Array$from8 = Array.from(this[IA("0x22")]); _i276 < _Array$from8.length; _i276++) {
                var _e397 = _Array$from8[_i276];

                var _iterator559 = _createForOfIteratorHelper(_e397()),
                    _step559;

                try {
                  for (_iterator559.s(); !(_step559 = _iterator559.n()).done;) {
                    var _step559$value = _slicedToArray(_step559.value, 2),
                        _n351 = _step559$value[0],
                        _i277 = _step559$value[1];

                    t[IA("0x1b")](_n351, _i277);
                  }
                } catch (err) {
                  _iterator559.e(err);
                } finally {
                  _iterator559.f();
                }
              }

              return t;
            }
          }], [{
            key: _IA,
            get: function get() {
              return [XT];
            }
          }, {
            key: _IA2,
            get: function get() {
              return IA("0xd");
            }
          }]);

          return OA;
        }(r, IA("0xe"), IA("0x1e"), IA("0x9"), IA("0xb"), IA("0x1"), IA("0x23"), IA("0x16"));

        var RA = n(176),
            MA = n.n(RA);

        var PA = /*#__PURE__*/function (_r187) {
          _inherits(PA, _r187);

          var _super330 = _createSuper(PA);

          function PA() {
            _classCallCheck(this, PA);

            return _super330.apply(this, arguments);
          }

          _createClass(PA, [{
            key: "init",
            value: function init() {
              var _this471 = this;

              var t = this.editor,
                  e = t.plugins.get(nA),
                  n = t.plugins.get(CA),
                  i = t.plugins.get(XT),
                  o = t.plugins.get(OA);
              t.ui.componentFactory.add("comment", function () {
                return _this471._createUIButton();
              }), o.addSourceCollector(function () {
                var t = [];

                var _iterator560 = _createForOfIteratorHelper(e._threadToController),
                    _step560;

                try {
                  for (_iterator560.s(); !(_step560 = _iterator560.n()).done;) {
                    var _step560$value = _slicedToArray(_step560.value, 2),
                        _i278 = _step560$value[0],
                        _o147 = _step560$value[1];

                    var _e398 = n.getAllMarkersForId(_i278.id),
                        _r188 = _e398.map(function (t) {
                      return t.getRange();
                    });

                    _e398.length > 0 && t.push([_o147.view, _r188]);
                  }
                } catch (err) {
                  _iterator560.e(err);
                } finally {
                  _iterator560.f();
                }

                return t;
              }), this.listenTo(i, "change:activeAnnotations", function (t, i, o) {
                var r = Array.from(o).map(function (t) {
                  return t.innerView;
                }).find(function (t) {
                  return e._viewToController.has(t);
                });
                if (!r) return void (n.activeMarker = null);

                var s = e._viewToController.get(r).model.id,
                    a = "comment:" + s;

                n.hasMarkerForId(s) ? n.activeMarker = a : n.activeMarker && (n.activeMarker = null);
              }), this.listenTo(e, "removeCommentThread", function (e, _ref133) {
                var i = _ref133.threadId,
                    o = _ref133.isFromAdapter;
                !o && t.ui.focusTracker.isFocused && n.hasMarkerForId(i) && t.editing.view.focus();
              }, {
                priority: "highest"
              }), this.listenTo(e, "addComment", function (i, _ref134) {
                var o = _ref134.threadId,
                    r = _ref134.isFromAdapter;
                !r && n.hasMarkerForId(o) && e.hasCommentThread(o) && 1 === e.getCommentThread(o).length && (t.editing.view.focus(), i.stop());
              }, {
                priority: "low"
              });
            }
          }, {
            key: "_createUIButton",
            value: function _createUIButton() {
              var t = this.editor,
                  e = new nu(t.locale),
                  n = t.commands.get("addCommentThread"),
                  i = this.editor.locale.t;
              return e.label = i("Comment"), e.tooltip = i("Comment"), e.icon = MA.a, e.bind("isEnabled").to(n), this.listenTo(e, "execute", function () {
                return n.execute();
              }), e;
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "CommentsUI";
            }
          }, {
            key: "requires",
            get: function get() {
              return [nA, CA, OA, XT];
            }
          }]);

          return PA;
        }(r);

        var NA = ["stopListening", "clearForceDisabled", "plugins", "editor", "view", "selectAll", "exportPdf", "commands", "isEnabled", "delete", "afterInit", "set", "pluginName", "_allowedCommands", "listenTo", "CommentsOnly", "requires", "DragDrop", "has", "highest", "commentsOnly", "commentsOnlyMode", "document", "forceDisabled", "editing", "_disableCommentsOnlyMode", "clipboardInput", "stop"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(NA, 194);

        var DA = function DA(t, e) {
          return NA[t -= 0];
        };

        var jA = /*#__PURE__*/function (_r189, _DA, _DA2, _DA3, _DA4) {
          _inherits(jA, _r189);

          var _super331 = _createSuper(jA);

          function jA(t) {
            var _this472;

            _classCallCheck(this, jA);

            _this472 = _super331.call(this, t), _this472[DA("0xd")](DA("0xa"), null), _this472.on("change:isEnabled", function (t, e, n) {
              n ? _this472._enableCommentsOnlyMode() : _this472._disableCommentsOnlyMode();
            }), _this472[DA("0xf")] = new Set(["addCommentThread", DA("0x7"), DA("0x8")]);
            return _this472;
          }

          _createClass(jA, [{
            key: _DA3,
            value: function value() {
              null === this[DA("0xa")] && (this.isEnabled = !!this.editor.config.get(DA("0x16")));
            }
          }, {
            key: "_enableCommentsOnlyMode",
            value: function _enableCommentsOnlyMode() {
              var _iterator561 = _createForOfIteratorHelper(this[DA("0x5")].commands),
                  _step561;

              try {
                for (_iterator561.s(); !(_step561 = _iterator561.n()).done;) {
                  var _step561$value = _slicedToArray(_step561.value, 2),
                      _t448 = _step561$value[0],
                      _e399 = _step561$value[1];

                  this._allowedCommands.has(_t448) || _e399[DA("0x19")](DA("0x17"));
                }
              } catch (err) {
                _iterator561.e(err);
              } finally {
                _iterator561.f();
              }

              this[DA("0x5")][DA("0x4")].has("DragDrop") && this[DA("0x5")].plugins.get(DA("0x13")).forceDisabled(DA("0x17"));
              var t = this.editor[DA("0x1a")][DA("0x6")][DA("0x18")];
              this[DA("0x10")](t, "cut", function (t) {
                return t[DA("0x1")]();
              }, {
                priority: DA("0x15")
              }), this[DA("0x10")](t, DA("0x0"), function (t) {
                return t[DA("0x1")]();
              }, {
                priority: "highest"
              }), this[DA("0x10")](t, DA("0xb"), function (t) {
                return t.stop();
              }, {
                priority: DA("0x15")
              });
            }
          }, {
            key: _DA4,
            value: function value() {
              var _iterator562 = _createForOfIteratorHelper(this[DA("0x5")][DA("0x9")]),
                  _step562;

              try {
                for (_iterator562.s(); !(_step562 = _iterator562.n()).done;) {
                  var _step562$value = _slicedToArray(_step562.value, 2),
                      _t449 = _step562$value[0],
                      _e400 = _step562$value[1];

                  this[DA("0xf")][DA("0x14")](_t449) || _e400[DA("0x3")](DA("0x17"));
                }
              } catch (err) {
                _iterator562.e(err);
              } finally {
                _iterator562.f();
              }

              this[DA("0x2")](this[DA("0x5")][DA("0x1a")][DA("0x6")].document);
            }
          }], [{
            key: _DA,
            get: function get() {
              return DA("0x11");
            }
          }, {
            key: _DA2,
            get: function get() {
              return [CA];
            }
          }]);

          return jA;
        }(r, DA("0xe"), DA("0x12"), DA("0xc"), DA("0x1b"));

        var BA = ["from", "get", "push", "_setSelectedAnnotations", "_assertAnnotationBelongsToSingleUI", "function", "has", "attach", "switchTo", "change:activeAnnotation", "set", "activeAnnotations", "plugins", "annotationsuis-activate-missing-ui", "listenTo", "delete", "register", "annotationsuis-register-invalid-interface", "context", "add", "detach", "init", "pluginName", "deactivate", "_uisData", "_deactivateAllAnnotations", "length", "_uis", "annotationsuis-register-already-registered", "collection", "deactivateAll", "activeUIs", "hasActive", "destroy", "setActiveAnnotation", "_removeActiveAnnotation", "requires", "activate", "filter", "stopListening", "isActive", "size", "_activateAnnotation"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(BA, 177);

        var LA = function LA(t, e) {
          return BA[t -= 0];
        };

        var zA = /*#__PURE__*/function (_gn12, _LA, _LA2, _LA3, _LA4, _LA5, _LA6, _LA7, _LA8, _LA9, _LA10, _LA11) {
          _inherits(zA, _gn12);

          var _super332 = _createSuper(zA);

          function zA(t) {
            var _this473;

            _classCallCheck(this, zA);

            _this473 = _super332.call(this, t), _this473[LA("0x1a")] = new Set(), _this473[LA("0x16")] = new Map(), _this473[LA("0x13")] = new Map();
            return _this473;
          }

          _createClass(zA, [{
            key: _LA3,
            value: function value() {
              var _this474 = this;

              var t = this[LA("0xd")][LA("0x7")].get(XT);
              this[LA("0x9")](t, LA("0x25"), function (t, e) {
                var _iterator563 = _createForOfIteratorHelper(_this474[LA("0x1a")]),
                    _step563;

                try {
                  for (_iterator563.s(); !(_step563 = _iterator563.n()).done;) {
                    var _t450 = _step563.value;

                    var _n352 = _this474._uis[LA("0x27")](_t450);

                    (0, _this474[LA("0x13")][LA("0x27")](_t450)[LA("0x21")])(e) && _n352.setActiveAnnotation(e);
                  }
                } catch (err) {
                  _iterator563.e(err);
                } finally {
                  _iterator563.f();
                }
              }), this.listenTo(t, LA("0x14"), function () {
                var _iterator564 = _createForOfIteratorHelper(_this474.activeUIs),
                    _step564;

                try {
                  for (_iterator564.s(); !(_step564 = _iterator564.n()).done;) {
                    var _t451 = _step564.value;

                    _this474[LA("0x16")][LA("0x27")](_t451)[LA("0x1d")](null);
                  }
                } catch (err) {
                  _iterator564.e(err);
                } finally {
                  _iterator564.f();
                }
              }), this[LA("0x9")](t[LA("0x18")], "add", function (t, e) {
                _this474[LA("0x2a")](e);
              });
            }
          }, {
            key: _LA4,
            value: function value() {
              return this[LA("0x1a")][LA("0x24")] > 0;
            }
          }, {
            key: _LA5,
            value: function value(t) {
              return this[LA("0x1a")][LA("0x1")](t);
            }
          }, {
            key: _LA6,
            value: function value(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {
                return !0;
              };
              var n = this[LA("0xd")][LA("0x7")][LA("0x27")](XT);
              if (!this[LA("0x16")][LA("0x1")](t)) throw new rn["default"](LA("0x8"), this, {
                uiName: t
              });
              this.isActive(t) && this.deactivate(t), this[LA("0x1a")][LA("0xe")](t);
              var i = new JT();
              (function (_ref135) {
                var t = _ref135.source,
                    e = _ref135.target,
                    n = _ref135.filter;

                var _iterator565 = _createForOfIteratorHelper(t),
                    _step565;

                try {
                  for (_iterator565.s(); !(_step565 = _iterator565.n()).done;) {
                    var _i279 = _step565.value;
                    n(_i279) && e[YT("0x0")](_i279);
                  }
                } catch (err) {
                  _iterator565.e(err);
                } finally {
                  _iterator565.f();
                }

                e[YT("0x15")](t, YT("0x0"), function (t, i) {
                  n(i) && e.add(i);
                }), e.listenTo(t, YT("0xb"), function (t, i) {
                  n(i) && e[YT("0xb")](i);
                });
              })({
                source: n[LA("0x18")],
                target: i,
                filter: e
              }), this[LA("0x13")][LA("0x5")](t, {
                collection: i,
                filter: e
              });
              var o = this[LA("0x16")][LA("0x27")](t);
              o[LA("0x2")](i), this.listenTo(o, LA("0x4"), function (t, e, i, o) {
                o && n[LA("0x1e")](o), i && n._addActiveAnnotation(i);
              });
            }
          }, {
            key: "deactivate",
            value: function deactivate(t) {
              this[LA("0x1a")][LA("0xa")](t);
              var e = this[LA("0x16")][LA("0x27")](t);
              e[LA("0xf")](), this[LA("0x22")](e), this._uisData[LA("0x27")](t).collection[LA("0x1c")](), this._uisData[LA("0xa")](t);
            }
          }, {
            key: _LA7,
            value: function value(t) {
              var e = this[LA("0xd")][LA("0x7")].get(XT),
                  n = Array[LA("0x26")](e[LA("0x6")])[0] || null;
              this[LA("0x19")](), this[LA("0x20")](t);
              var i = this[LA("0x16")][LA("0x27")](t);
              i[LA("0x1d")](n), i._setSelectedAnnotations && n && i[LA("0x29")]([n]);
            }
          }, {
            key: _LA8,
            value: function value() {
              var _iterator566 = _createForOfIteratorHelper(this[LA("0x1a")]),
                  _step566;

              try {
                for (_iterator566.s(); !(_step566 = _iterator566.n()).done;) {
                  var _t452 = _step566.value;
                  this[LA("0x12")](_t452);
                }
              } catch (err) {
                _iterator566.e(err);
              } finally {
                _iterator566.f();
              }
            }
          }, {
            key: _LA9,
            value: function value(t, e) {
              if (this[LA("0x16")][LA("0x1")](t)) throw new rn["default"](LA("0x17"));
              if (LA("0x0") != typeof e[LA("0x2")] || "function" != typeof e[LA("0xf")] || LA("0x0") != typeof e[LA("0x1d")]) throw new rn["default"](LA("0xc"), null);
              this[LA("0x16")][LA("0x5")](t, e);
            }
          }, {
            key: _LA10,
            value: function value() {
              this[LA("0x19")](), _get3(_getPrototypeOf(zA.prototype), LA("0x1c"), this).call(this);
            }
          }, {
            key: _LA11,
            value: function value(t) {
              var e = [];

              var _iterator567 = _createForOfIteratorHelper(this.activeUIs),
                  _step567;

              try {
                for (_iterator567.s(); !(_step567 = _iterator567.n()).done;) {
                  var _n353 = _step567.value;
                  (0, this[LA("0x13")][LA("0x27")](_n353)[LA("0x21")])(t) && e[LA("0x28")](_n353);
                }
              } catch (err) {
                _iterator567.e(err);
              } finally {
                _iterator567.f();
              }

              if (1 !== e[LA("0x15")]) throw new rn["default"]("annotationsuis-annotation-mismatch", null, {
                matchedUIs: e
              });
            }
          }], [{
            key: _LA,
            get: function get() {
              return [XT];
            }
          }, {
            key: _LA2,
            get: function get() {
              return "AnnotationsUIs";
            }
          }]);

          return zA;
        }(gn, LA("0x1f"), LA("0x11"), LA("0x10"), LA("0x1b"), LA("0x23"), LA("0x20"), LA("0x3"), LA("0x19"), LA("0xb"), LA("0x1c"), LA("0x2a"));

        n(390);
        var FA = ["set", "div", "list", "class", "minHeight", "ck-sidebar", "ck-reset", "createCollection"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(FA, 314);

        var VA = function VA(t, e) {
          return FA[t -= 0];
        },
            UA = As("px");

        var HA = /*#__PURE__*/function (_Pd42) {
          _inherits(HA, _Pd42);

          var _super333 = _createSuper(HA);

          function HA(t) {
            var _this475;

            _classCallCheck(this, HA);

            _this475 = _super333.call(this, t);
            var e = _this475.bindTemplate;
            _this475.set(VA("0x2"), 0), _this475[VA("0x6")](VA("0x1"), ""), _this475.list = _this475[VA("0x5")](), _this475.setTemplate({
              tag: VA("0x7"),
              attributes: {
                "class": ["ck", VA("0x3"), VA("0x4"), e.to(VA("0x1"))],
                style: {
                  minHeight: e.to(VA("0x2"), function (t) {
                    return t ? UA(t + 10) : null;
                  })
                }
              },
              children: _this475[VA("0x0")]
            });
            return _this475;
          }

          return HA;
        }(Pd);

        var qA = ["top", "bottom", "content", "isAnimationDisabled", "detach", "bindTemplate", "set", "_mutationObserver", "destroy", "div", "ck-sidebar-item--no-animation", "updateHeight", "_targetTop", "height", "setTemplate", "createCollection", "element", "render", "clear", "attach", "clientHeight"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(qA, 430);

        var WA = function WA(t, e) {
          return qA[t -= 0];
        },
            $A = As("px");

        var YA = /*#__PURE__*/function (_Pd43, _WA, _WA2, _WA3) {
          _inherits(YA, _Pd43);

          var _super334 = _createSuper(YA);

          function YA(t) {
            var _this476;

            _classCallCheck(this, YA);

            _this476 = _super334.call(this, t), _this476[WA("0x11")](WA("0xb")), _this476.set("height", 0), _this476.bind(WA("0xc")).to(_assertThisInitialized(_this476), "top", _assertThisInitialized(_this476), WA("0x3"), function (t, e) {
              return (t || 0) + e;
            }), _this476[WA("0x11")]("isAnimationDisabled", !1), _this476[WA("0x12")] = zT(function () {
              return _this476[WA("0x1")]();
            }), _this476[WA("0x2")] = null, _this476[WA("0xd")] = _this476[WA("0x5")]();

            var e = _this476[WA("0x10")];

            _this476[WA("0x4")]({
              tag: WA("0x14"),
              attributes: {
                "class": ["ck-sidebar-item", e.to(WA("0xe"), function (t) {
                  return t ? WA("0x0") : "";
                })],
                style: {
                  top: e.to(WA("0xb"), $A)
                }
              },
              children: _this476[WA("0xd")]
            });

            return _this476;
          }

          _createClass(YA, [{
            key: _WA,
            value: function value() {
              _get3(_getPrototypeOf(YA.prototype), WA("0x7"), this).call(this), this._mutationObserver[WA("0x9")](this[WA("0x6")]);
            }
          }, {
            key: _WA2,
            value: function value() {
              var t = this[WA("0x6")][WA("0xa")];
              t && (this.height = t);
            }
          }, {
            key: _WA3,
            value: function value() {
              this.content[WA("0x8")](), this[WA("0x12")][WA("0xf")](), _get3(_getPrototypeOf(YA.prototype), WA("0x13"), this).call(this);
            }
          }]);

          return YA;
        }(Pd, WA("0x7"), WA("0x1"), WA("0x13"));

        var JA = ["_annotationToSidebarItemView", "getSidebarItemView", "_createSidebarView", "container", "appendChild", "content", "_alignAfterItem", "class", "remove", "sidebar-setcontainer-invalid-element", "sidebar.container", "config", "_alignToTargetRect", "_detachFromContainer", "isAnimationDisabled", "get", "length", "_alignBeforeItem", "bottom", "stopListening", "delete", "clear", "_getMaxAvailableTop", "getIndex", "isActive", "_updateLastItem", "define", "refresh", "element", "add", "targetRect", "updateHeight", "rearrange", "change:_lastItem", "unbind", "sidebar.preventScrollOutOfView", "change:bottom", "max", "minHeight", "list", "change:top", "target", "_getItemAfter", "bind", "set", "_destroySidebarItemView", "_annotations", "_attachToContainer", "_setItemTop", "render", "setContainer", "view", "last", "height", "_activeAnnotation", "context", "top", "_sidebarItemViewToAnnotation", "_spaceBetweenItems", "_targetTop", "destroy", "listenTo", "_getTargetTop", "sidebar-attachtocontainer-missing-container", "_lastItem", "_getItemBefore", "addAnnotation"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(JA, 381);

        var GA = function GA(t, e) {
          return JA[t -= 0];
        };

        var KA = /*#__PURE__*/function (_gn13, _GA, _GA2, _GA3, _GA4, _GA5, _GA6, _GA7, _GA8, _GA9, _GA10, _GA11, _GA12, _GA13, _GA14) {
          _inherits(KA, _gn13);

          var _super335 = _createSuper(KA);

          function KA(t) {
            var _this477;

            _classCallCheck(this, KA);

            _this477 = _super335.call(this, t), _this477[GA("0x41")](GA("0x12")), _this477[GA("0x5")] = _this477[GA("0x17")](), _this477[GA("0x41")]("container", null), _this477[GA("0xc")] = 25, _this477._sidebarItemViewToAnnotation = new Map(), _this477[GA("0x15")] = new Map(), _this477[GA("0x9")][GA("0x20")][GA("0x2f")]("sidebar.preventScrollOutOfView", !1), _this477._annotations = null, _this477._activeAnnotation = null;
            return _this477;
          }

          _createClass(KA, [{
            key: "init",
            value: function init() {
              var t = this[GA("0x9")].config[GA("0x24")](GA("0x1f"));
              t && this[GA("0x4")](t);
            }
          }, {
            key: _GA,
            value: function value(t) {
              if (!Ze(t)) throw new rn["default"](GA("0x1e"));
              this.container = t;
            }
          }, {
            key: _GA2,
            value: function value() {
              var _ref136 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                  _ref136$viewClass = _ref136.viewClass,
                  t = _ref136$viewClass === void 0 ? "" : _ref136$viewClass,
                  _ref136$spaceBetweenI = _ref136.spaceBetweenItems,
                  e = _ref136$spaceBetweenI === void 0 ? 25 : _ref136$spaceBetweenI;

              if (!Ze(this[GA("0x18")])) throw new rn["default"](GA("0x11"), this);
              this[GA("0x18")][GA("0x19")](this[GA("0x5")][GA("0x31")]), this.view[GA("0x1c")] = t, this[GA("0xc")] = e;
            }
          }, {
            key: _GA3,
            value: function value(_ref137) {
              var t = _ref137.removedAnnotation,
                  e = _ref137.previousAnnotation,
                  n = _ref137.nextAnnotation;
              var i = this[GA("0x16")](t);
              this.view[GA("0x3c")][GA("0x1d")](i), this[GA("0x42")](t), e && this[GA("0x21")](this.getSidebarItemView(e)), n && this[GA("0x21")](this[GA("0x16")](n)), this[GA("0x2e")]();
            }
          }, {
            key: _GA4,
            value: function value(_ref138) {
              var t = _ref138.blurredAnnotation,
                  e = _ref138.activatedAnnotation,
                  n = _ref138.disableAnimationOnActivatedAnnotation;

              if (this[GA("0x8")] = e, t) {
                t[GA("0x2d")] = !1;

                var _e401 = this[GA("0x16")](t);

                _e401 && n && (_e401[GA("0x23")] = !1);
              }

              if (e) {
                var _t453 = this[GA("0x16")](e);

                _t453 && (e[GA("0x2d")] = !0, n && (_t453[GA("0x23")] = !0, _t453[GA("0xa")] += 1), this[GA("0x21")](_t453));
              }
            }
          }, {
            key: _GA5,
            value: function value(t) {
              this.stopListening(), this.view[GA("0x31")][GA("0x1d")]();

              var _iterator568 = _createForOfIteratorHelper(t),
                  _step568;

              try {
                for (_iterator568.s(); !(_step568 = _iterator568.n()).done;) {
                  var _e402 = _step568.value;
                  this[GA("0x42")](_e402);
                }
              } catch (err) {
                _iterator568.e(err);
              } finally {
                _iterator568.f();
              }

              this[GA("0x5")][GA("0x3c")][GA("0x2a")](), this[GA("0x5")]["class"] = "", this[GA("0x12")] = null;
            }
          }, {
            key: _GA6,
            value: function value(t, e) {
              var _this478 = this;

              e || (e = t[GA("0x5")]);
              var n = new YA(this.context.locale);
              this[GA("0xb")][GA("0x41")](n, t), this[GA("0x15")][GA("0x41")](t, n), n[GA("0x1a")][GA("0x32")](e), this[GA("0x21")](n), this[GA("0xf")](t[GA("0x5")], "change:targetRect", function () {
                var t = _this478[GA("0x10")](n);

                n[GA("0xd")] != t && (n._targetTop = t, _this478[GA("0x2")](n, t));
              }), this[GA("0xf")](n, GA("0x3d"), _f(function () {
                if (!n[GA("0x1a")][GA("0x25")]) return;

                var t = _this478._getItemBefore(n);

                if (!t) return;

                var e = _this478[GA("0xb")][GA("0x24")](t),
                    i = _this478[GA("0x8")];

                i && i === e ? _this478[GA("0x1b")](t, n) : _this478._alignBeforeItem(n, t);
              }, 10, {
                leading: !1
              })), this[GA("0xf")](n, GA("0x39"), _f(function () {
                if (!n.content[GA("0x25")]) return;

                var t = _this478[GA("0x3f")](n);

                if (!t) return;

                var e = _this478[GA("0xb")].get(t),
                    i = _this478[GA("0x9")][GA("0x20")][GA("0x24")](GA("0x38")),
                    o = _this478._activeAnnotation;

                o && o === e && i ? (_this478[GA("0x26")](t, n), _this478._alignAfterItem(n, t)) : o && o === e ? _this478[GA("0x26")](t, n) : _this478[GA("0x1b")](n, t);
              }, 10, {
                leading: !1
              }));
              var i = this[GA("0x13")](n);
              return i ? this[GA("0x1b")](i, n) || this[GA("0x21")](n) : this._alignToTargetRect(n), this[GA("0x2e")](), this.view[GA("0x3c")].add(n), n;
            }
          }, {
            key: _GA7,
            value: function value(t) {
              return this[GA("0x15")][GA("0x24")](t);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this[GA("0x5")][GA("0xe")]();
            }
          }, {
            key: _GA8,
            value: function value(t) {
              var e = this.getSidebarItemView(t);
              this[GA("0x28")](e), this[GA("0x28")](t.view), e[GA("0xe")](), this[GA("0x15")][GA("0x29")](t), this[GA("0xb")][GA("0x29")](e);
            }
          }, {
            key: _GA9,
            value: function value() {
              var t = new HA(this[GA("0x9")].locale);
              return t[GA("0x3")](), this.on(GA("0x36"), function (e, n, i, o) {
                o && t[GA("0x37")]("minHeight"), i ? t[GA("0x40")](GA("0x3b")).to(i, GA("0x27")) : t[GA("0x3b")] = null;
              }), t;
            }
          }, {
            key: "_updateLastItem",
            value: function _updateLastItem() {
              this[GA("0x12")] = this[GA("0x16")](this._annotations[GA("0x6")]);
            }
          }, {
            key: _GA10,
            value: function value(t) {
              var e = this[GA("0xb")][GA("0x24")](t),
                  n = this[GA("0x0")][GA("0x24")](this._annotations[GA("0x2c")](e) - 1);
              return n && this[GA("0x16")](n);
            }
          }, {
            key: "_getItemAfter",
            value: function _getItemAfter(t) {
              var e = this._sidebarItemViewToAnnotation.get(t),
                  n = this[GA("0x0")][GA("0x24")](this._annotations[GA("0x2c")](e) + 1);

              return n && this[GA("0x16")](n);
            }
          }, {
            key: _GA11,
            value: function value(t, e) {
              t[GA("0x34")]();
              var n = QA(e[GA("0x27")] + this[GA("0xc")], t[GA("0xa")]);
              return !!n && (this._setItemTop(e, e[GA("0xa")] - n), !0);
            }
          }, {
            key: "_alignAfterItem",
            value: function _alignAfterItem(t, e) {
              t[GA("0x34")]();
              var n = QA(t[GA("0x27")] + this[GA("0xc")], e[GA("0xa")]);
              return !!n && (this[GA("0x2")](e, e.top + n, !1), !0);
            }
          }, {
            key: _GA12,
            value: function value(t) {
              var e = this[GA("0xb")][GA("0x24")](t);
              if (!e || !e[GA("0x3e")]) return;

              var n = this._getTargetTop(t);

              this[GA("0x2")](t, n);
            }
          }, {
            key: _GA13,
            value: function value(t) {
              var e = this[GA("0xb")][GA("0x24")](t);
              if (e[GA("0x3e")] instanceof ws) return e[GA("0x33")][GA("0xa")];
              {
                var _t454 = new ws(this[GA("0x5")][GA("0x31")])[GA("0xa")];
                return e.targetRect[GA("0xa")] - _t454;
              }
            }
          }, {
            key: "_setItemTop",
            value: function _setItemTop(t, e) {
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this[GA("0x9")][GA("0x20")][GA("0x24")](GA("0x38"));
              n && (e = Math.max(e, this[GA("0x2b")](t))), t[GA("0xa")] = e;
            }
          }, {
            key: _GA14,
            value: function value(t) {
              var e = this[GA("0x13")](t),
                  n = 0;

              for (; e;) {
                e.updateHeight(), n += this[GA("0xc")] + e[GA("0x7")], e = this[GA("0x13")](e);
              }

              return n;
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "Sidebar";
            }
          }]);

          return KA;
        }(gn, GA("0x4"), GA("0x1"), GA("0x35"), GA("0x30"), GA("0x22"), GA("0x14"), GA("0x16"), GA("0x42"), GA("0x17"), GA("0x13"), GA("0x26"), GA("0x21"), GA("0x10"), GA("0x2b"));

        function QA(t, e) {
          return Math[GA("0x3a")](t - e, 0);
        }

        var XA = ["addEventListener", "off", "resize", "remove", "_destroyEditorAnnotationsIntegration", "addAnnotation", "activeAnnotation", "editors", "_annotations", "set", "set:container", "removeEventListener", "getOrderedSelectedAnnotations", "_editorAnnotations", "container", "uiUpdate", "change:container", "high", "focus", "_detachFromContainer", "refresh", "widesidebar-attach-already-attached", "context", "_throttledPositioningRefresh", "plugins", "from", "hasDomSelection", "init", "refreshPositioning", "blur", "_activeAnnotation", "ck-sidebar--wide", "wideSidebar", "get", "setActiveAnnotation", "rearrange", "stopListening", "_integrateWithEditorAnnotations", "_attachToContainer", "listenTo", "ready", "EditorAnnotations", "isAttached", "updateTargetRect", "detach", "add", "attach", "register", "stop"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(XA, 487);

        var ZA = function ZA(t, e) {
          return XA[t -= 0];
        };

        var tE = /*#__PURE__*/function (_gn14, _ZA, _ZA2, _ZA3, _ZA4) {
          _inherits(tE, _gn14);

          var _super336 = _createSuper(tE);

          function tE(t) {
            var _this479;

            _classCallCheck(this, tE);

            _this479 = _super336.call(this, t), _this479[ZA("0x2d")] = !1, _this479[ZA("0xc")](ZA("0x9"), null), _this479[ZA("0xb")] = null, _this479[ZA("0x10")] = new on["default"](), _this479[ZA("0x1a")] = _f(function () {
              _this479._annotations[ZA("0x1f")]();
            }, 400, {
              leading: !1
            });
            return _this479;
          }

          _createClass(tE, [{
            key: _ZA,
            value: function value() {
              var t = this[ZA("0x19")][ZA("0x1b")][ZA("0x24")](zA),
                  e = this.context[ZA("0x1b")][ZA("0x24")](KA);
              t[ZA("0x1")](ZA("0x23"), this), e[ZA("0x11")] && t.switchTo("wideSidebar");
            }
          }, {
            key: _ZA2,
            value: function value(t) {
              if (t === this[ZA("0x9")]) return;
              var e = this[ZA("0x19")][ZA("0x1b")].get(KA);
              e[ZA("0x21")] = t;
              var n = this[ZA("0x9")];
              this.activeAnnotation = t, e[ZA("0x17")]({
                blurredAnnotation: n,
                activatedAnnotation: this[ZA("0x9")]
              });
            }
          }, {
            key: _ZA3,
            value: function value(t) {
              var _this480 = this;

              this[ZA("0xb")] = t;
              var e = this[ZA("0x19")].plugins[ZA("0x24")]("Sidebar");
              if (e[ZA("0xb")] = t, this[ZA("0x2d")]) throw new rn["default"](ZA("0x18"), this);
              this[ZA("0x2d")] = !0, this[ZA("0x2a")](e, ZA("0xd"), function () {
                _this480[ZA("0x2f")](), _this480[ZA("0x2a")](e, ZA("0x13"), function (e) {
                  e[ZA("0x4")](), _this480.attach(t);
                });
              }), e[ZA("0x29")]({
                viewClass: ZA("0x22")
              });

              var n = function n(t) {
                t[ZA("0x2e")](), e[ZA("0x8")](t);
              };

              var _iterator569 = _createForOfIteratorHelper(t),
                  _step569;

              try {
                for (_iterator569.s(); !(_step569 = _iterator569.n()).done;) {
                  var _e403 = _step569.value;
                  n(_e403);
                }
              } catch (err) {
                _iterator569.e(err);
              } finally {
                _iterator569.f();
              }

              this[ZA("0x2a")](t, ZA("0x30"), function (t, e) {
                n(e);
              }), this[ZA("0x2a")](t, ZA("0x6"), function (n, i, o) {
                e[ZA("0x26")]({
                  removedAnnotation: i,
                  previousAnnotation: t[ZA("0x24")](o - 1),
                  nextAnnotation: t[ZA("0x24")](o + 1)
                }), i === _this480[ZA("0x9")] && _this480[ZA("0x25")](null);
              }, {
                priority: "high"
              }), this[ZA("0x2a")](t, ZA("0x15"), function (t, e) {
                _this480.setActiveAnnotation(e);
              }), this[ZA("0x2a")](t, ZA("0x20"), function () {
                _this480.setActiveAnnotation(null);
              });
              var i = this[ZA("0x19")][ZA("0xa")] ? this.context[ZA("0xa")] : new on["default"]([this[ZA("0x19")]]);

              var _iterator570 = _createForOfIteratorHelper(i),
                  _step570;

              try {
                for (_iterator570.s(); !(_step570 = _iterator570.n()).done;) {
                  var _t455 = _step570.value;
                  this[ZA("0x28")](_t455);
                }
              } catch (err) {
                _iterator570.e(err);
              } finally {
                _iterator570.f();
              }

              this[ZA("0x2a")](i, ZA("0x30"), function (t, e) {
                _this480[ZA("0x2a")](e, ZA("0x2b"), function () {
                  _this480._integrateWithEditorAnnotations(e);
                });
              }), this[ZA("0x2a")](i, ZA("0x6"), function (t, e) {
                e.plugins.has(ZA("0x2c")) && _this480[ZA("0x7")](e[ZA("0x1b")][ZA("0x24")](ZA("0x2c")));
              }), window[ZA("0x3")](ZA("0x5"), this[ZA("0x1a")]), this[ZA("0xb")][ZA("0x1f")]();
            }
          }, {
            key: "detach",
            value: function detach() {
              if (!this[ZA("0x2d")]) throw new rn["default"]("widesidebar-detach-not-attached", this);
              this[ZA("0x25")](null);
              var t = this.context.plugins[ZA("0x24")](KA);
              t[ZA("0x16")](this._annotations), this[ZA("0x27")](t), this[ZA("0x27")](this._annotations), this[ZA("0x27")](this[ZA("0x19")][ZA("0xa")]);

              var _iterator571 = _createForOfIteratorHelper(Array[ZA("0x1c")](this._editorAnnotations)),
                  _step571;

              try {
                for (_iterator571.s(); !(_step571 = _iterator571.n()).done;) {
                  var _t456 = _step571.value;
                  this[ZA("0x7")](_t456);
                }
              } catch (err) {
                _iterator571.e(err);
              } finally {
                _iterator571.f();
              }

              window[ZA("0xe")](ZA("0x5"), this[ZA("0x1a")]), this._throttledPositioningRefresh.cancel(), this.activeAnnotation = null, this[ZA("0x2d")] = !1;
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this[ZA("0x2d")] && this[ZA("0x2f")]();
            }
          }, {
            key: "_integrateWithEditorAnnotations",
            value: function _integrateWithEditorAnnotations(t) {
              var _this481 = this;

              var e = t.plugins.get(ZA("0x2c"));
              if (!e) return;

              var n = function n() {
                var t = e[ZA("0xf")]({
                  annotations: _this481[ZA("0xb")],
                  activeAnnotation: _this481[ZA("0x9")]
                });

                _this481[ZA("0x25")](t[0] || null);
              };

              this[ZA("0x2a")](e, ZA("0x17"), n), this.listenTo(e, ZA("0x20"), function (t, _ref139) {
                var e = _ref139.isAnnotationTracked;
                _this481.activeAnnotation && e(_this481[ZA("0x9")]) && _this481[ZA("0x25")](null);
              }), this.listenTo(e, ZA("0x12"), function () {
                _this481[ZA("0xb")][ZA("0x1f")]();
              }), this.listenTo(this[ZA("0xb")], ZA("0x20"), function (t) {
                e[ZA("0x1d")]() && (n(), t[ZA("0x2")]());
              }, {
                priority: ZA("0x14")
              }), this[ZA("0x10")][ZA("0x30")](e);
            }
          }, {
            key: _ZA4,
            value: function value(t) {
              t && (this[ZA("0x27")](t), this._editorAnnotations[ZA("0x6")](t));
            }
          }], [{
            key: "requires",
            get: function get() {
              return [KA, zA];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "WideSidebar";
            }
          }]);

          return tE;
        }(gn, ZA("0x1e"), ZA("0x25"), ZA("0x0"), ZA("0x7"));

        var eE = n(177),
            nE = n.n(eE);
        var iE = ["add", "children", "extendTemplate", "isDirty", "set", "ck-annotation-counter__badge--edit-mode", "number", "ck-annotation-counter", "ck-annotation-counter__badge--", "bind", "_badge", "ck-annotation-counter__badge", "icon", "annotationType", "span", "counterView", "setTemplate"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(iE, 141);

        var oE = function oE(t, e) {
          return iE[t -= 0];
        };

        var rE = /*#__PURE__*/function (_nu3) {
          _inherits(rE, _nu3);

          var _super337 = _createSuper(rE);

          function rE(t) {
            var _this482;

            _classCallCheck(this, rE);

            _this482 = _super337.call(this, t);
            var e = _this482.bindTemplate;
            _this482.set("isDirty", !1), _this482[oE("0x10")](oE("0x1"), 0), _this482[oE("0x4")]("_badge").to(_assertThisInitialized(_this482), oE("0xf"), _assertThisInitialized(_this482), oE("0x1"), function (t, e) {
              return t ? "..." : e;
            }), _this482[oE("0x10")](oE("0x8"), ""), _this482[oE("0x7")] = nE.a, _this482[oE("0xe")]({
              attributes: {
                "class": [oE("0x2")]
              }
            }), _this482[oE("0xa")] = new Pd(), _this482[oE("0xa")][oE("0xb")]({
              tag: oE("0x9"),
              attributes: {
                "class": [oE("0x6"), e.to(oE("0x8"), function (t) {
                  return oE("0x3") + t;
                }), e["if"](oE("0xf"), oE("0x0"))]
              },
              children: [{
                text: e.to(oE("0x5"))
              }]
            }), _this482[oE("0xd")][oE("0xc")](_this482[oE("0xa")]);
            return _this482;
          }

          return rE;
        }(nu);

        n(392);
        var sE = ["addEventListener", "isVisible", "_annotationToNarrowView", "_destroyEditorAnnotationsIntegration", "stopListening", "attach", "view", "element", "_detachListeners", "ck-sidebar--narrow", "Sidebar", "refreshPositioning", "from", "_throttledRefreshPositioning", "delete", "_editorAnnotations", "locale", "values", "getByView", "narrowsidebar-attach-already-attached", "_manuallyClosedAnnotationViews", "Esc", "destroy", "_integrateWithEditorAnnotations", "preventClosingBalloon", "blur", "number", "listenTo", "_updateBalloonPosition", "content", "_selectedAnnotations", "low", "requires", "detachFromDom", "southArrowNorthEast", "cancel", "getOrderedSelectedAnnotations", "keyCode", "has", "register", "bodyCollection", "editors", "addAnnotation", "annotationType", "uiUpdate", "_attachListeners", "includes", "init", "execute", "_attachToContainer", "_annotations", "northArrowSouth", "southArrowNorth", "refresh", "clear", "setActiveAnnotation", "bind", "balloonPanelView", "_refreshPositioning", "_showBalloon", "northArrowSouthWest", "getSidebarItemView", "_domEmitter", "get", "type", "resize", "EditorAnnotations", "_setSelectedAnnotations", "_detachFromContainer", "set:container", "set", "_hideBalloon", "detach", "isAttached", "focus", "context", "pin", "first", "contains", "activeAnnotation", "mousedown", "unpin", "pluginName", "isDirty", "high", "southArrowNorthWest", "defaultPositions", "add", "preventDefault", "ready", "change:container", "plugins", "remove", "hasDomSelection", "off", "length"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(sE, 472);

        var aE = function aE(t, e) {
          return sE[t -= 0];
        };

        var cE = /*#__PURE__*/function (_gn15, _aE, _aE2, _aE3, _aE4, _aE5, _aE6, _aE7, _aE8, _aE9, _aE10, _aE11, _aE12) {
          _inherits(cE, _gn15);

          var _super338 = _createSuper(cE);

          function cE(t) {
            var _this483;

            _classCallCheck(this, cE);

            _this483 = _super338.call(this, t), _this483.isAttached = !1, _this483[aE("0x1c")] = new Set(), _this483[aE("0x46")] = Object.create(er), _this483[aE("0xa")] = new Map(), _this483[aE("0x4e")](aE("0x57"), null), _this483[aE("0x3a")] = null, _this483[aE("0x26")] = [], _this483[aE("0x17")] = new on["default"](), _this483[aE("0x15")] = _f(function () {
              _this483[aE("0x42")]();
            }, 400, {
              leading: !1
            });
            return _this483;
          }

          _createClass(cE, [{
            key: _aE3,
            value: function value() {
              this.context[aE("0x3")].get(zA)[aE("0x2f")]("narrowSidebar", this), this[aE("0x30")] = new Zd(this.context[aE("0x18")]), this.balloonPanelView = new Uu(this[aE("0x53")][aE("0x18")]), this[aE("0x30")].attachToDom(), this.bodyCollection[aE("0x5f")](this.balloonPanelView);
            }
          }, {
            key: _aE4,
            value: function value(t) {
              var _this484 = this;

              this._annotations = t;
              var e = this[aE("0x53")][aE("0x3")][aE("0x47")](KA),
                  n = this[aE("0x41")];
              if (e[aE("0x3a")] = t, this.isAttached) throw new rn["default"](aE("0x1b"), this);
              this.isAttached = !0, this[aE("0x23")](e, aE("0x4d"), function () {
                _this484[aE("0x50")](), _this484[aE("0x23")](e, aE("0x2"), function (e) {
                  e[aE("0x6")](), _this484[aE("0xd")](t);
                });
              }), e[aE("0x39")]({
                viewClass: aE("0x11"),
                spaceBetweenItems: 5
              });

              var i = function i(t) {
                var i = new rE(_this484.context[aE("0x18")]);
                e[aE("0x32")](t, i), _this484._annotationToNarrowView[aE("0x4e")](t, i), i[aE("0x40")]("isDirty", aE("0x33"), aE("0x22")).to(t[aE("0xe")], aE("0x5b"), aE("0x48"), aE("0x7")), i.on(aE("0x38"), function () {
                  _this484[aE("0x1c")][aE("0x3e")](), n[aE("0x25")].first !== t.view ? (_this484[aE("0x43")](t), t[aE("0xe")][aE("0xf")].focus(), _this484[aE("0x3f")](t)) : _this484[aE("0x3f")](null);
                });
              };

              var _iterator572 = _createForOfIteratorHelper(t),
                  _step572;

              try {
                for (_iterator572.s(); !(_step572 = _iterator572.n()).done;) {
                  var _e404 = _step572.value;
                  i(_e404);
                }
              } catch (err) {
                _iterator572.e(err);
              } finally {
                _iterator572.f();
              }

              this[aE("0x23")](t, "add", function (t, e) {
                i(e);
              }), this.listenTo(t, aE("0x4"), function (n, i, o) {
                _this484[aE("0xa")][aE("0x47")](i).destroy(), _this484[aE("0xa")]["delete"](i), e.rearrange({
                  removedAnnotation: i,
                  previousAnnotation: t.get(o - 1),
                  nextAnnotation: t[aE("0x47")](o + 1)
                }), i === _this484.activeAnnotation && _this484.setActiveAnnotation(null);
              }, {
                priority: aE("0x27")
              }), this[aE("0x23")](t, aE("0x52"), function (t, e) {
                _this484[aE("0x3f")](e);
              }), this.listenTo(t, aE("0x21"), function () {
                _this484[aE("0x3f")](null);
              }), this[aE("0x46")].listenTo(document, "keydown", function (t, e) {
                e[aE("0x2d")] === to.esc && n[aE("0x9")] && (_this484[aE("0x1c")][aE("0x5f")](n[aE("0x25")].first), _this484._hideBalloon(), e.stopPropagation(), e[aE("0x0")]());
              }), this[aE("0x46")][aE("0x23")](document, aE("0x58"), function (t, i) {
                var o = i.target;
                n[aE("0x9")] && n[aE("0xf")][aE("0x56")](o) || e[aE("0xe")].element[aE("0x56")](o) || t[aE("0x20")] || (_this484._manuallyClosedAnnotationViews[aE("0x3e")](), _this484[aE("0x4f")](), _this484[aE("0x3f")](null));
              });
              var o = this[aE("0x53")][aE("0x31")] ? this.context[aE("0x31")] : new on["default"]([this[aE("0x53")]]);

              var _iterator573 = _createForOfIteratorHelper(o),
                  _step573;

              try {
                for (_iterator573.s(); !(_step573 = _iterator573.n()).done;) {
                  var _t457 = _step573.value;
                  this[aE("0x1f")](_t457);
                }
              } catch (err) {
                _iterator573.e(err);
              } finally {
                _iterator573.f();
              }

              this[aE("0x23")](o, aE("0x5f"), function (t, e) {
                _this484[aE("0x23")](e, aE("0x1"), function () {
                  _this484[aE("0x1f")](e);
                });
              }), this[aE("0x23")](o, aE("0x4"), function (t, e) {
                e[aE("0x3")].has(aE("0x4a")) && _this484[aE("0xb")](e.plugins[aE("0x47")](aE("0x4a")));
              }), window[aE("0x8")](aE("0x49"), this[aE("0x15")]), this[aE("0x42")]();
            }
          }, {
            key: _aE5,
            value: function value(t) {
              if (t === this[aE("0x57")]) return;
              var e = this[aE("0x53")].plugins.get(aE("0x12"));
              e[aE("0x3d")]({
                blurredAnnotation: this[aE("0x57")],
                activatedAnnotation: t,
                disableAnimationOnActivatedAnnotation: !0
              }), t ? e[aE("0x45")](t) ? this[aE("0x43")](t) : this._hideBalloon() : this[aE("0x4f")](), this[aE("0x57")] = t;
            }
          }, {
            key: _aE6,
            value: function value() {
              if (!this[aE("0x51")]) throw new rn["default"]("narrowsidebar-detach-not-attached", this);
              this[aE("0x3f")](null);
              var t = this[aE("0x53")][aE("0x3")][aE("0x47")](aE("0x12"));
              this[aE("0x4f")](), Array[aE("0x14")](this[aE("0xa")][aE("0x19")](), function (t) {
                return t[aE("0x1e")]();
              }), this[aE("0xa")][aE("0x3e")](), t[aE("0x4c")](this[aE("0x3a")]), this[aE("0xc")](), this[aE("0x46")][aE("0xc")](), this[aE("0xc")](this.context[aE("0x31")]);

              var _iterator574 = _createForOfIteratorHelper(Array[aE("0x14")](this[aE("0x17")])),
                  _step574;

              try {
                for (_iterator574.s(); !(_step574 = _iterator574.n()).done;) {
                  var _t458 = _step574.value;

                  this._destroyEditorAnnotationsIntegration(_t458);
                }
              } catch (err) {
                _iterator574.e(err);
              } finally {
                _iterator574.f();
              }

              window.removeEventListener(aE("0x49"), this[aE("0x15")]), this[aE("0x15")][aE("0x2b")](), this[aE("0x26")] = [], this[aE("0x51")] = !1, this[aE("0x3a")] = null;
            }
          }, {
            key: _aE7,
            value: function value() {
              this[aE("0x51")] && this[aE("0x50")](), this[aE("0x30")][aE("0x29")]();
            }
          }, {
            key: "_integrateWithEditorAnnotations",
            value: function _integrateWithEditorAnnotations(t) {
              var _this485 = this;

              var e = t.plugins[aE("0x47")]("EditorAnnotations"),
                  n = this.context[aE("0x3")][aE("0x47")](KA),
                  i = this[aE("0x3a")],
                  o = this[aE("0x41")],
                  r = function r() {
                var t = e[aE("0x2c")]({
                  activeAnnotation: _this485.activeAnnotation,
                  annotations: _this485._annotations
                });
                _this485._setSelectedAnnotations(t), _this485.setActiveAnnotation(t[0] || null);
              };

              this.listenTo(e, "refresh", r), this[aE("0x23")](e, aE("0x21"), function (t, _ref140) {
                var e = _ref140.isAnnotationTracked;
                _this485.activeAnnotation && e(_this485[aE("0x57")]) && (_this485[aE("0x4b")]([]), _this485[aE("0x3f")](null));
              }), this[aE("0x23")](e, aE("0x34"), function () {
                _this485[aE("0x15")]();
              }), this[aE("0x23")](i, aE("0x21"), function (t) {
                e[aE("0x5")]() && t.stop();
              }, {
                priority: "high"
              }), this._domEmitter[aE("0x23")](document, aE("0x58"), function (t, i) {
                var s = i.target;
                o[aE("0x9")] && o[aE("0xf")][aE("0x56")](s) || n[aE("0xe")][aE("0xf")][aE("0x56")](s) || _this485[aE("0x57")] && e[aE("0x5")]() && (r(), t[aE("0x20")] = !0);
              }, {
                priority: aE("0x5c")
              }), this[aE("0x17")].add(e);
            }
          }, {
            key: _aE8,
            value: function value(t) {
              t && (this[aE("0xc")](t), this[aE("0x17")][aE("0x4")](t));
            }
          }, {
            key: "_setSelectedAnnotations",
            value: function _setSelectedAnnotations(t) {
              var _iterator575 = _createForOfIteratorHelper(this[aE("0x26")]),
                  _step575;

              try {
                for (_iterator575.s(); !(_step575 = _iterator575.n()).done;) {
                  var _e405 = _step575.value;
                  t[aE("0x36")](_e405) || this[aE("0x1c")][aE("0x16")](_e405.view);
                }
              } catch (err) {
                _iterator575.e(err);
              } finally {
                _iterator575.f();
              }

              this[aE("0x26")] = t;
            }
          }, {
            key: _aE9,
            value: function value() {
              var t = this[aE("0x41")];
              this[aE("0x3a")][aE("0x13")](), t[aE("0x9")] && this[aE("0x24")]();
            }
          }, {
            key: "_showBalloon",
            value: function _showBalloon(t) {
              if (this[aE("0x1c")][aE("0x2e")](t[aE("0xe")])) return;
              var e = this[aE("0x41")].content[aE("0x55")];
              e !== t[aE("0xe")] ? (e && this[aE("0x10")](e), this[aE("0x35")](t[aE("0xe")]), this[aE("0x41")][aE("0x25")].clear(), this[aE("0x41")][aE("0x25")].add(t.view), this[aE("0x24")]()) : this._updateBalloonPosition();
            }
          }, {
            key: "_updateBalloonPosition",
            value: function _updateBalloonPosition() {
              var t = this[aE("0x41")].content[aE("0x55")],
                  e = this[aE("0x3a")][aE("0x1a")](t);
              if (!this._annotationToNarrowView[aE("0x2e")](e)) return;

              var n = this[aE("0xa")].get(e)[aE("0xf")],
                  i = function () {
                var t = Uu[aE("0x5e")];
                return [t[aE("0x2a")], t.northArrowSouthEast, t[aE("0x3c")], t[aE("0x3b")], t[aE("0x5d")], t[aE("0x44")]];
              }();

              this[aE("0x41")][aE("0x54")]({
                target: n,
                positions: i
              });
            }
          }, {
            key: _aE10,
            value: function value() {
              var t = this[aE("0x41")],
                  e = t[aE("0x25")][aE("0x55")];
              e && (this._detachListeners(e), t[aE("0x59")](), t[aE("0x25")][aE("0x3e")]());
            }
          }, {
            key: _aE11,
            value: function value(t) {
              var _this486 = this;

              this.listenTo(t, "change:height", function () {
                return _this486._updateBalloonPosition();
              }), this[aE("0x23")](t, aE("0x1d"), function (e, n) {
                _this486[aE("0x1c")][aE("0x5f")](t), _this486._hideBalloon(), n();
              });
            }
          }, {
            key: _aE12,
            value: function value(t) {
              this[aE("0xc")](t);
            }
          }], [{
            key: _aE,
            get: function get() {
              return [KA, zA];
            }
          }, {
            key: _aE2,
            get: function get() {
              return "NarrowSidebar";
            }
          }]);

          return cE;
        }(gn, aE("0x28"), aE("0x5a"), aE("0x37"), aE("0xd"), aE("0x3f"), aE("0x50"), aE("0x1e"), aE("0xb"), aE("0x42"), aE("0x4f"), aE("0x35"), aE("0x10"));

        n(394);
        var lE = ["getOrderedSelectedAnnotations", "editableElement", "clear", "document", "_removeAnnotationFromBalloon", "getByView", "register", "destroy", "inline", "requires", "targetRect", "isFocused", "editor", "focus", "_annotations", "setActiveAnnotation", "InlineAnnotations", "hasActive", "activeAnnotation", "includes", "blur", "get", "addObserver", "EditorAnnotations", "_balloon", "_addedAnnotations", "set", "updatePosition", "Esc", "_setSelectedAnnotations", "view", "remove", "isActive", "pluginName", "init", "target", "detach", "editing", "selection", "_manuallyClosed", "afterInit", "_addAnnotationToBalloon", "context", "update", "getRangeAt", "inlineannotations-attach-already-attached", "_selectedAnnotations", "mousedown", "refresh", "showStack", "listenTo", "stopListening", "inlineannotations-detach-not-attached", "delete", "change:isFocused", "visibleView", "isAttached", "add", "hasView", "keystrokes", "plugins", "has", "getSelection"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(lE, 183);

        var dE = function dE(t, e) {
          return lE[t -= 0];
        };

        var uE = /*#__PURE__*/function (_r190, _dE, _dE2, _dE3, _dE4, _dE5, _dE6, _dE7, _dE8) {
          _inherits(uE, _r190);

          var _super339 = _createSuper(uE);

          function uE(t) {
            var _this487;

            _classCallCheck(this, uE);

            _this487 = _super339.call(this, t), t[dE("0x2b")].view[dE("0x1c")](wh), _this487[dE("0x3e")] = !1, _this487.set(dE("0x18"), null), _this487[dE("0x14")] = null, _this487[dE("0x2d")] = new Set(), _this487[dE("0x1e")] = t[dE("0x3")][dE("0x1b")](Qu), _this487._addedAnnotations = new Set(), _this487._selectedAnnotations = [];
            return _this487;
          }

          _createClass(uE, [{
            key: _dE3,
            value: function value() {
              var _this488 = this;

              var t = this.editor[dE("0x3")][dE("0x1b")](zA);
              t[dE("0x30")] === this[dE("0x12")] && (t[dE("0xc")](dE("0xe"), this), this[dE("0x12")][dE("0x2")][dE("0x20")]("Esc", function (t, e) {
                var n = _this488[dE("0x1e")];

                if (_this488[dE("0x3e")] && n[dE("0x3d")]) {
                  var _t459 = _this488[dE("0x14")].getByView(n[dE("0x3d")]);

                  _this488[dE("0x2d")][dE("0x0")](_t459), _this488[dE("0xa")](_t459), e();
                }
              }));
            }
          }, {
            key: _dE4,
            value: function value() {
              var t = this[dE("0x12")][dE("0x3")][dE("0x1b")](zA);
              t[dE("0x30")] === this[dE("0x12")] && (t[dE("0x17")]() || t.switchTo(dE("0xe")));
            }
          }, {
            key: _dE5,
            value: function value(t) {
              t !== this[dE("0x18")] && (this.activeAnnotation && (this[dE("0x18")][dE("0x26")] = !1), t && this.editor.ui.focusTracker[dE("0x11")] && (this[dE("0x2f")](t, !0), t[dE("0x26")] = !0), t || this[dE("0x23")]([]), this[dE("0x18")] = t);
            }
          }, {
            key: "attach",
            value: function attach(t) {
              var _this489 = this;

              this[dE("0x14")] = t;
              var e = this[dE("0x12")].plugins[dE("0x1b")](zA),
                  n = this._balloon;
              if (this.isAttached) throw new rn["default"](dE("0x33"), this);
              if (e[dE("0x30")] !== this.editor) throw new rn["default"]("inlineannotations-not-allowed-with-context", this);
              var i = this[dE("0x12")][dE("0x3")][dE("0x1b")](dE("0x1d"));
              this[dE("0x38")](i, dE("0x36"), function () {
                var t = i[dE("0x6")]({
                  activeAnnotation: this[dE("0x18")],
                  annotations: this[dE("0x14")]
                });
                this[dE("0x23")](t), this[dE("0x15")](t[0] || null);
              }.bind(this)), this[dE("0x38")](i, dE("0x1a"), function (t, _ref141) {
                var e = _ref141.isAnnotationTracked;
                _this489[dE("0x18")] && e(_this489.activeAnnotation) && (_this489._setSelectedAnnotations([]), _this489.setActiveAnnotation(null));
              }), this[dE("0x38")](this[dE("0x12")].ui.focusTracker, dE("0x3c"), function (t, e, n) {
                n || _this489[dE("0x15")](null);
              }), this.listenTo(t, dE("0x25"), function (t, e) {
                _this489._removeAnnotationFromBalloon(e), e === _this489[dE("0x18")] && _this489.setActiveAnnotation(null);
              }), this.listenTo(n, "change:visibleView", function (e, i, o, r) {
                if (r && _this489[dE("0x39")](r), !o || !t[dE("0xb")](o)) return;
                var s = t[dE("0xb")](o);
                _this489.listenTo(o, "change:height", function () {
                  n[dE("0x21")]();
                }), _this489.listenTo(o, dE("0x22"), function () {
                  _this489[dE("0x2d")][dE("0x0")](s), _this489[dE("0xa")](s), _this489[dE("0x12")][dE("0x2b")].view.focus();
                }), _this489[dE("0x18")] !== s && _this489[dE("0x15")](s);
              }), this.listenTo(this[dE("0x12")].ui, dE("0x31"), function () {
                n.visibleView && t.getByView(n.visibleView) && n.updatePosition();
              }), this[dE("0x38")](this[dE("0x12")][dE("0x2b")].view.document, dE("0x35"), function () {
                _this489[dE("0x2d")][dE("0x8")]();
              }), this[dE("0x12")].editing[dE("0x24")][dE("0x9")][dE("0x2c")][dE("0x7")] && this[dE("0x12")][dE("0x2b")].view[dE("0x13")](), this.isAttached = !0;
            }
          }, {
            key: "detach",
            value: function detach() {
              if (!this[dE("0x3e")]) throw new rn["default"](dE("0x3a"), this);
              this[dE("0x15")](null);

              var _iterator576 = _createForOfIteratorHelper(this[dE("0x1f")]),
                  _step576;

              try {
                for (_iterator576.s(); !(_step576 = _iterator576.n()).done;) {
                  var _t460 = _step576.value;
                  this[dE("0xa")](_t460);
                }
              } catch (err) {
                _iterator576.e(err);
              } finally {
                _iterator576.f();
              }

              this.stopListening(), this[dE("0x3e")] = !1;
            }
          }, {
            key: _dE6,
            value: function value() {
              this[dE("0x3e")] && this[dE("0x2a")]();
            }
          }, {
            key: _dE7,
            value: function value(t) {
              var e = this[dE("0x34")];

              var _iterator577 = _createForOfIteratorHelper(e),
                  _step577;

              try {
                for (_iterator577.s(); !(_step577 = _iterator577.n()).done;) {
                  var _n354 = _step577.value;
                  t[dE("0x19")](_n354) || this[dE("0x2d")][dE("0x3b")](_n354);
                }
              } catch (err) {
                _iterator577.e(err);
              } finally {
                _iterator577.f();
              }

              var _iterator578 = _createForOfIteratorHelper(this._annotations),
                  _step578;

              try {
                for (_iterator578.s(); !(_step578 = _iterator578.n()).done;) {
                  var _e407 = _step578.value;
                  t[dE("0x19")](_e407) || this._removeAnnotationFromBalloon(_e407);
                }
              } catch (err) {
                _iterator578.e(err);
              } finally {
                _iterator578.f();
              }

              if (this[dE("0x12")].ui.focusTracker[dE("0x11")]) {
                var _iterator579 = _createForOfIteratorHelper(t),
                    _step579;

                try {
                  for (_iterator579.s(); !(_step579 = _iterator579.n()).done;) {
                    var _e406 = _step579.value;
                    this[dE("0x2f")](_e406);
                  }
                } catch (err) {
                  _iterator579.e(err);
                } finally {
                  _iterator579.f();
                }
              }

              this[dE("0x34")] = t;
            }
          }, {
            key: _dE8,
            value: function value(t, e) {
              this[dE("0x2d")][dE("0x4")](t) || (this[dE("0x1f")][dE("0x4")](t) || this[dE("0x1e")][dE("0x1")](t[dE("0x24")]) || (this[dE("0x1f")].add(t), this[dE("0x1e")][dE("0x0")]({
                stackId: t[dE("0x24")].id,
                view: t[dE("0x24")],
                position: {
                  target: function target() {
                    return t[dE("0x29")] || t[dE("0x10")] || document[dE("0x5")]()[dE("0x32")](0);
                  }
                }
              })), e && this[dE("0x1e")][dE("0x37")](t[dE("0x24")].id));
            }
          }, {
            key: "_removeAnnotationFromBalloon",
            value: function _removeAnnotationFromBalloon(t) {
              this[dE("0x1f")].has(t) && this[dE("0x1e")][dE("0x1")](t[dE("0x24")]) && (this._addedAnnotations[dE("0x3b")](t), this[dE("0x1e")][dE("0x25")](t.view));
            }
          }], [{
            key: _dE,
            get: function get() {
              return [OA, Qu, zA];
            }
          }, {
            key: _dE2,
            get: function get() {
              return dE("0x16");
            }
          }]);

          return uE;
        }(r, dE("0xf"), dE("0x27"), dE("0x28"), dE("0x2e"), dE("0x15"), dE("0xd"), dE("0x23"), dE("0x2f"));

        var hE = ["pluginName", "requires"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(hE, 189);

        var fE = function fE(t, e) {
          return hE[t -= 0];
        };

        var gE = /*#__PURE__*/function (_r191, _fE, _fE2) {
          _inherits(gE, _r191);

          var _super340 = _createSuper(gE);

          function gE() {
            _classCallCheck(this, gE);

            return _super340.apply(this, arguments);
          }

          _createClass(gE, null, [{
            key: _fE,
            get: function get() {
              return [nA, CA, PA, jA, tE, cE, uE];
            }
          }, {
            key: _fE2,
            get: function get() {
              return "Comments";
            }
          }]);

          return gE;
        }(r, fE("0x0"), fE("0x1"));

        var mE = ["listenTo", "connected", "destroy", "collaboration.channelId", "ready", "editor", "init", "plugins", "requires", "RealTimeCollaborativeComments", "_setUpService", "pluginName", "data", "get", "change:state", "config", "_terminateService"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(mE, 460);

        var pE = function pE(t, e) {
          return mE[t -= 0];
        };

        var bE = /*#__PURE__*/function (_r192, _pE, _pE2, _pE3, _pE4) {
          _inherits(bE, _r192);

          var _super341 = _createSuper(bE);

          function bE() {
            _classCallCheck(this, bE);

            return _super341.apply(this, arguments);
          }

          _createClass(bE, [{
            key: _pE3,
            value: function value() {
              var _this490 = this;

              var t = this[pE("0x4")][pE("0x6")].get(Zv),
                  e = this[pE("0x4")].plugins.get(CA),
                  n = this[pE("0x4")].plugins.get(dA);
              return this.editor[pE("0xb")].once(pE("0x3"), function () {
                _this490[pE("0x10")](t, pE("0xd"), function (t, n, i) {
                  e.isThreadsLoadingPaused = "connected" !== i;
                });
              }), this.listenTo(t, pE("0xd"), function (t, e, n) {
                _this490[pE("0x4")][pE("0x6")].get(nA).switchReadOnly(pE("0x0") !== n);
              }), n[pE("0x9")](this[pE("0x4")][pE("0xe")][pE("0xc")](pE("0x2")));
            }
          }, {
            key: _pE4,
            value: function value() {
              this[pE("0x4")][pE("0x6")].get(dA)[pE("0xf")](this[pE("0x4")][pE("0xe")][pE("0xc")](pE("0x2"))), _get3(_getPrototypeOf(bE.prototype), pE("0x1"), this).call(this);
            }
          }], [{
            key: _pE,
            get: function get() {
              return [gE, CA, dA, zx, Zv];
            }
          }, {
            key: _pE2,
            get: function get() {
              return pE("0x8");
            }
          }]);

          return bE;
        }(r, pE("0x7"), pE("0xa"), pE("0x5"), pE("0x1"));

        var kE = n(178),
            _E = n.n(kE);

        var wE = ["value", "refresh", "_enableCommands", "_disableUnsupportedCommands", "execute", "isEnabled", "clearForceDisabled", "has", "commands", "forceDisabled", "editor", "_enabledCommands", "TrackChangesCommand"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(wE, 315);

        var vE = function vE(t, e) {
          return wE[t -= 0];
        };

        var yE = /*#__PURE__*/function (_a81, _vE, _vE2, _vE3) {
          _inherits(yE, _a81);

          var _super342 = _createSuper(yE);

          function yE(t, e) {
            var _this491;

            _classCallCheck(this, yE);

            _this491 = _super342.call(this, t), _this491[vE("0x8")] = e, _this491[vE("0xa")] = !1, _this491[vE("0xb")]();
            return _this491;
          }

          _createClass(yE, [{
            key: "refresh",
            value: function refresh() {
              this[vE("0x2")] = !0;
            }
          }, {
            key: _vE,
            value: function value() {
              this[vE("0xa")] = !this[vE("0xa")], this[vE("0xa")] ? this[vE("0x0")]() : this[vE("0xc")]();
            }
          }, {
            key: _vE2,
            value: function value() {
              var _iterator580 = _createForOfIteratorHelper(this[vE("0x7")].commands[vE("0x5")]()),
                  _step580;

              try {
                for (_iterator580.s(); !(_step580 = _iterator580.n()).done;) {
                  var _t461 = _step580.value;
                  this._enabledCommands[vE("0x4")](_t461) || _t461[vE("0x6")](vE("0x9"));
                }
              } catch (err) {
                _iterator580.e(err);
              } finally {
                _iterator580.f();
              }
            }
          }, {
            key: _vE3,
            value: function value() {
              var _iterator581 = _createForOfIteratorHelper(this[vE("0x7")].commands[vE("0x5")]()),
                  _step581;

              try {
                for (_iterator581.s(); !(_step581 = _iterator581.n()).done;) {
                  var _t462 = _step581.value;
                  this._enabledCommands[vE("0x4")](_t462) || _t462[vE("0x3")](vE("0x9"));
                }
              } catch (err) {
                _iterator581.e(err);
              } finally {
                _iterator581.f();
              }
            }
          }]);

          return yE;
        }(a, vE("0x1"), vE("0x0"), vE("0xc"));

        var xE = ["TrackChangesEditing", "track-changes-accept-suggestion-not-found", "_suggestions", "refresh", "isEnabled", "execute", "get", "acceptSuggestion"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(xE, 114);

        var CE = function CE(t, e) {
          return xE[t -= 0];
        };

        var TE = /*#__PURE__*/function (_a82, _CE, _CE2) {
          _inherits(TE, _a82);

          var _super343 = _createSuper(TE);

          function TE(t, e) {
            var _this492;

            _classCallCheck(this, TE);

            _this492 = _super343.call(this, t), _this492[CE("0x0")] = e, _this492[CE("0x1")]();
            return _this492;
          }

          _createClass(TE, [{
            key: _CE,
            value: function value() {
              this[CE("0x2")] = !0;
            }
          }, {
            key: _CE2,
            value: function value(t) {
              var e = this[CE("0x0")][CE("0x4")](t);
              if (!e) throw new rn["default"](CE("0x7"), this);
              this.editor.plugins[CE("0x4")](CE("0x6"))[CE("0x5")](e);
            }
          }]);

          return TE;
        }(a, CE("0x1"), CE("0x3"));

        var AE = ["refresh", "discardSuggestion", "get", "TrackChangesEditing", "_suggestions", "editor", "execute", "track-changes-discard-suggestion-not-found", "isEnabled", "plugins"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(AE, 144);

        var EE = function EE(t, e) {
          return AE[t -= 0];
        };

        var SE = /*#__PURE__*/function (_a83, _EE, _EE2) {
          _inherits(SE, _a83);

          var _super344 = _createSuper(SE);

          function SE(t, e) {
            var _this493;

            _classCallCheck(this, SE);

            _this493 = _super344.call(this, t), _this493[EE("0x0")] = e, _this493[EE("0x6")]();
            return _this493;
          }

          _createClass(SE, [{
            key: _EE,
            value: function value() {
              this[EE("0x4")] = !0;
            }
          }, {
            key: _EE2,
            value: function value(t) {
              var e = this._suggestions.get(t);

              if (!e) throw new rn["default"](EE("0x3"), this);
              this[EE("0x1")][EE("0x5")][EE("0x8")](EE("0x9"))[EE("0x7")](e);
            }
          }]);

          return SE;
        }(a, EE("0x6"), EE("0x2"));

        var IE = ["type", "deletion", "sort"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(IE, 165);

        var OE = function OE(t, e) {
          return IE[t -= 0];
        };

        function RE(t) {
          return t[OE("0x2")](function (t, e) {
            return OE("0x1") == t[OE("0x0")] && OE("0x1") != e[OE("0x0")] ? -1 : OE("0x1") != t[OE("0x0")] && "deletion" == e[OE("0x0")] ? 1 : 0;
          });
        }

        var ME = ["_acceptSuggestionCommand", "from", "change", "values", "model", "editor", "refresh", "_suggestions", "execute", "isEnabled"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(ME, 170);

        var PE = function PE(t, e) {
          return ME[t -= 0];
        };

        var NE = /*#__PURE__*/function (_a84) {
          _inherits(NE, _a84);

          var _super345 = _createSuper(NE);

          function NE(t, e, n) {
            var _this494;

            _classCallCheck(this, NE);

            _this494 = _super345.call(this, t), _this494[PE("0x0")] = e, _this494[PE("0x7")] = n, _this494[PE("0x6")]();
            return _this494;
          }

          _createClass(NE, [{
            key: "refresh",
            value: function refresh() {
              var t = this[PE("0x0")];
              this[PE("0x9")] = t[PE("0x9")] && Array[PE("0x1")](this[PE("0x7")][PE("0x3")]()).some(function (t) {
                return t.isInContent;
              });
            }
          }, {
            key: "execute",
            value: function execute() {
              var _this495 = this;

              this[PE("0x5")][PE("0x4")][PE("0x2")](function () {
                var t = RE(Array.from(_this495[PE("0x7")][PE("0x3")]()));

                var _iterator582 = _createForOfIteratorHelper(t),
                    _step582;

                try {
                  for (_iterator582.s(); !(_step582 = _iterator582.n()).done;) {
                    var _e408 = _step582.value;
                    _e408.isInContent && _this495[PE("0x0")][PE("0x8")](_e408.id);
                  }
                } catch (err) {
                  _iterator582.e(err);
                } finally {
                  _iterator582.f();
                }
              });
            }
          }]);

          return NE;
        }(a);

        var DE = ["isMultiRange", "next", "isInContent", "from", "isCollapsed", "getRange", "isTouching", "add", "end", "getRanges"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(DE, 412);

        var jE = function jE(t, e) {
          return DE[t -= 0];
        };

        function BE(t, e) {
          var n = Array[jE("0x1")](t[jE("0x7")]()),
              i = new Set();

          var _iterator583 = _createForOfIteratorHelper(e),
              _step583;

          try {
            for (_iterator583.s(); !(_step583 = _iterator583.n()).done;) {
              var _o148 = _step583.value;

              if (_o148[jE("0x0")]) {
                var _iterator584 = _createForOfIteratorHelper(n),
                    _step584;

                try {
                  for (_iterator584.s(); !(_step584 = _iterator584.n()).done;) {
                    var _e409 = _step584.value;

                    var _iterator585 = _createForOfIteratorHelper(_o148.getMarkers()),
                        _step585;

                    try {
                      for (_iterator585.s(); !(_step585 = _iterator585.n()).done;) {
                        var _n355 = _step585.value;

                        var _r193 = _n355[jE("0x3")]();

                        (_e409.isIntersecting(_r193) || t[jE("0x2")] && !_o148[jE("0x8")] && _o148[jE("0x9")] && _r193[jE("0x6")][jE("0x4")](_e409.start)) && i[jE("0x5")](_o148);
                      }
                    } catch (err) {
                      _iterator585.e(err);
                    } finally {
                      _iterator585.f();
                    }
                  }
                } catch (err) {
                  _iterator584.e(err);
                } finally {
                  _iterator584.f();
                }
              }
            }
          } catch (err) {
            _iterator583.e(err);
          } finally {
            _iterator583.f();
          }

          return i;
        }

        var LE = ["execute", "_selectedSuggestions", "isEnabled", "editor", "from", "size", "_acceptSuggestionCommand", "values", "_suggestions", "document", "refresh", "change", "selection"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(LE, 466);

        var zE = function zE(t, e) {
          return LE[t -= 0];
        };

        var FE = /*#__PURE__*/function (_a85, _zE, _zE2) {
          _inherits(FE, _a85);

          var _super346 = _createSuper(FE);

          function FE(t, e, n) {
            var _this496;

            _classCallCheck(this, FE);

            _this496 = _super346.call(this, t), _this496._acceptSuggestionCommand = e, _this496[zE("0xa")] = n, _this496[zE("0x3")] = new Set(), _this496.refresh();
            return _this496;
          }

          _createClass(FE, [{
            key: _zE,
            value: function value() {
              var t = this[zE("0x8")],
                  e = this[zE("0x5")].model[zE("0xb")][zE("0x1")],
                  n = Array[zE("0x6")](this._suggestions[zE("0x9")]());
              this[zE("0x3")] = BE(e, n), this[zE("0x4")] = t[zE("0x4")] && !!this[zE("0x3")][zE("0x7")];
            }
          }, {
            key: _zE2,
            value: function value() {
              var _this497 = this;

              this[zE("0x5")].model[zE("0x0")](function () {
                var t = RE(Array[zE("0x6")](_this497[zE("0x3")]));

                var _iterator586 = _createForOfIteratorHelper(t),
                    _step586;

                try {
                  for (_iterator586.s(); !(_step586 = _iterator586.n()).done;) {
                    var _e410 = _step586.value;

                    _this497[zE("0x8")][zE("0x2")](_e410.id);
                  }
                } catch (err) {
                  _iterator586.e(err);
                } finally {
                  _iterator586.f();
                }
              });
            }
          }]);

          return FE;
        }(a, zE("0xc"), zE("0x2"));

        var VE = ["refresh", "model", "editor", "_discardSuggestionCommand", "_suggestions", "change", "execute", "from", "isInContent", "some", "isEnabled"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(VE, 211);

        var UE = function UE(t, e) {
          return VE[t -= 0];
        };

        var HE = /*#__PURE__*/function (_a86, _UE, _UE2) {
          _inherits(HE, _a86);

          var _super347 = _createSuper(HE);

          function HE(t, e, n) {
            var _this498;

            _classCallCheck(this, HE);

            _this498 = _super347.call(this, t), _this498[UE("0x1")] = e, _this498[UE("0x2")] = n, _this498[UE("0x9")]();
            return _this498;
          }

          _createClass(HE, [{
            key: _UE,
            value: function value() {
              var t = this[UE("0x1")];
              this[UE("0x8")] = t[UE("0x8")] && Array[UE("0x5")](this[UE("0x2")].values())[UE("0x7")](function (t) {
                return t[UE("0x6")];
              });
            }
          }, {
            key: _UE2,
            value: function value() {
              var _this499 = this;

              this[UE("0x0")][UE("0xa")][UE("0x3")](function () {
                var _iterator587 = _createForOfIteratorHelper(_this499._suggestions.values()),
                    _step587;

                try {
                  for (_iterator587.s(); !(_step587 = _iterator587.n()).done;) {
                    var _t463 = _step587.value;
                    _t463[UE("0x6")] && _this499[UE("0x1")][UE("0x4")](_t463.id);
                  }
                } catch (err) {
                  _iterator587.e(err);
                } finally {
                  _iterator587.f();
                }
              });
            }
          }]);

          return HE;
        }(a, UE("0x9"), UE("0x4"));

        var qE = ["from", "isEnabled", "_selectedSuggestions", "document", "_discardSuggestionCommand", "execute", "selection", "editor", "model", "refresh", "_suggestions"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(qE, 250);

        var WE = function WE(t, e) {
          return qE[t -= 0];
        };

        var $E = /*#__PURE__*/function (_a87, _WE) {
          _inherits($E, _a87);

          var _super348 = _createSuper($E);

          function $E(t, e, n) {
            var _this500;

            _classCallCheck(this, $E);

            _this500 = _super348.call(this, t), _this500._discardSuggestionCommand = e, _this500[WE("0x2")] = n, _this500._selectedSuggestions = new Set(), _this500[WE("0x1")]();
            return _this500;
          }

          _createClass($E, [{
            key: "refresh",
            value: function refresh() {
              var t = this._discardSuggestionCommand,
                  e = this[WE("0xa")][WE("0x0")][WE("0x6")][WE("0x9")],
                  n = Array[WE("0x3")](this[WE("0x2")].values());
              this[WE("0x5")] = BE(e, n), this[WE("0x4")] = t[WE("0x4")] && !!this[WE("0x5")].size;
            }
          }, {
            key: _WE,
            value: function value() {
              var _this501 = this;

              this.editor[WE("0x0")].change(function () {
                var _iterator588 = _createForOfIteratorHelper(_this501[WE("0x5")]),
                    _step588;

                try {
                  for (_iterator588.s(); !(_step588 = _iterator588.n()).done;) {
                    var _t464 = _step588.value;

                    _this501[WE("0x7")].execute(_t464.id);
                  }
                } catch (err) {
                  _iterator588.e(err);
                } finally {
                  _iterator588.f();
                }
              });
            }
          }]);

          return $E;
        }(a, WE("0x8"));

        var YE = ["next", "_onDiscard", "change", "isInContent", "isIntersecting", "toJSON", "map", "_onAccept", "_markerNames", "discard", "start", "_onAttributesChange", "removeMarkers", "onAttributesChange", "author", "decorate", "getFirstMarker", "_model", "type", "getRanges", "hasComments", "delete", "accept", "addMarkerName", "previous", "addMarker", "removeAttribute", "setAttribute", "removeMarker", "get", "getMarkers", "end", "set", "head", "attributes", "commentThread", "onDiscard", "filter", "getItems", "_saved", "createdAt", "length", "markers", "split", "data", "getRange", "addRange", "reduce", "nodeAfter", "getAllAdjacentSuggestions", "getMultiRangeId", "subType"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(YE, 431);

        var JE = function JE(t, e) {
          return YE[t -= 0];
        };

        var GE = /*#__PURE__*/function (_JE, _JE2, _JE3, _JE4, _JE5, _JE6, _JE7, _JE8, _JE9, _JE10, _JE11, _JE12, _JE13, _JE14, _JE15) {
          function GE(t, e) {
            _classCallCheck(this, GE);

            this.id = e.id, this[JE("0x3")] = e.type, this[JE("0x24")] = e[JE("0x24")] || null, this[JE("0x33")] = e[JE("0x33")], this[JE("0x1d")] = null, this[JE("0x2")] = t, this[JE("0x2c")] = e.onAccept, this[JE("0x26")] = e[JE("0x15")], this[JE("0x30")] = e[JE("0x32")], this[JE("0x2d")] = new Set(), this.set("createdAt", null), this[JE("0x11")](JE("0x13"), e[JE("0x13")] || {}), this[JE("0x11")](JE("0x9"), null), this[JE("0x11")](JE("0x25"), null), this[JE("0x11")](JE("0x14"), null), this[JE("0x11")](JE("0x18"), !1), this[JE("0x0")]("accept"), this[JE("0x0")](JE("0x2e"));
          }

          _createClass(GE, [{
            key: _JE,
            get: function get() {
              var t = this;

              for (; t[JE("0x9")];) {
                t = t[JE("0x9")];
              }

              return t;
            }
          }, {
            key: _JE2,
            get: function get() {
              return !!this[JE("0x14")] && this[JE("0x14")][JE("0x1a")] > 0;
            }
          }, {
            key: "isMultiRange",
            get: function get() {
              return 0 != this[JE("0x2d")].size && 6 == Array.from(this._markerNames)[0][JE("0x1c")](":")[JE("0x1a")];
            }
          }, {
            key: _JE3,
            get: function get() {
              return null !== this[JE("0x1")]();
            }
          }, {
            key: _JE4,
            value: function value(t) {
              this._markerNames.add(t);
            }
          }, {
            key: "getMarkerNames",
            value: function getMarkerNames() {
              return Array.from(this[JE("0x2d")]);
            }
          }, {
            key: _JE5,
            value: function value() {
              var _this502 = this;

              return this.getMarkerNames()[JE("0x2b")](function (t) {
                return _this502._model[JE("0x1b")][JE("0xe")](t);
              })[JE("0x16")](function (t) {
                return t;
              });
            }
          }, {
            key: _JE6,
            value: function value() {
              return this[JE("0xf")]()[0] || null;
            }
          }, {
            key: _JE7,
            value: function value() {
              var _this503 = this;

              this[JE("0x2")].change(function (t) {
                var _iterator589 = _createForOfIteratorHelper(_this503[JE("0xf")]()),
                    _step589;

                try {
                  for (_iterator589.s(); !(_step589 = _iterator589.n()).done;) {
                    var _e411 = _step589.value;
                    t[JE("0xd")](_e411);
                  }
                } catch (err) {
                  _iterator589.e(err);
                } finally {
                  _iterator589.f();
                }
              }), this[JE("0x2d")].clear();
            }
          }, {
            key: _JE8,
            value: function value(t) {
              this[JE("0x2")][JE("0x27")](function (e) {
                e[JE("0xd")](t);
              }), this._markerNames[JE("0x6")](t);
            }
          }, {
            key: _JE9,
            value: function value(t) {
              var e = "suggestion:" + this[JE("0x3")] + ":" + this.subType + ":" + this.id + ":" + this[JE("0x33")].id + ":" + GE[JE("0x23")]();
              this.addMarkerName(e), this[JE("0x2")][JE("0x27")](function (n) {
                n[JE("0xa")](e, {
                  range: t,
                  usingOperation: !0,
                  affectsData: !0
                });
              });
            }
          }, {
            key: "isIntersectingWithRange",
            value: function isIntersectingWithRange(t) {
              var _iterator590 = _createForOfIteratorHelper(this[JE("0x4")]()),
                  _step590;

              try {
                for (_iterator590.s(); !(_step590 = _iterator590.n()).done;) {
                  var _e412 = _step590.value;
                  if (_e412[JE("0x29")](t)) return !0;
                }
              } catch (err) {
                _iterator590.e(err);
              } finally {
                _iterator590.f();
              }

              return !1;
            }
          }, {
            key: "getRanges",
            value: function getRanges() {
              return this.getMarkers()[JE("0x2b")](function (t) {
                return t[JE("0x1e")]();
              });
            }
          }, {
            key: "getItems",
            value: function getItems() {
              return this[JE("0x4")]()[JE("0x20")](function (t, e) {
                return [].concat(_toConsumableArray(t), _toConsumableArray(e[JE("0x17")]()));
              }, []);
            }
          }, {
            key: "getFirstRange",
            value: function getFirstRange() {
              return this[JE("0x1")]()[JE("0x1e")]();
            }
          }, {
            key: "getContainedElement",
            value: function getContainedElement() {
              var t = this[JE("0x4")]();
              if (1 != t[JE("0x1a")]) return null;
              var e = t[0],
                  n = e[JE("0x2f")][JE("0x21")],
                  i = e[JE("0x10")].nodeBefore;
              return n instanceof Ys ? n != i ? null : n : null;
            }
          }, {
            key: _JE10,
            value: function value() {
              this._onAccept(this[JE("0x4")](), this[JE("0x1d")], this[JE("0x13")]), this[JE("0x31")]();
            }
          }, {
            key: _JE11,
            value: function value() {
              this[JE("0x26")](this[JE("0x4")](), this.data, this[JE("0x13")]), this[JE("0x31")]();
            }
          }, {
            key: _JE12,
            value: function value() {
              var t = [];
              var e = this[JE("0x12")];

              for (; e;) {
                t.push(e), e = e[JE("0x25")];
              }

              return t;
            }
          }, {
            key: _JE13,
            value: function value(t, e) {
              var n = va(this[JE("0x13")]);
              pi(n, t, e), vc(n, this[JE("0x13")]) || (this[JE("0x13")] = n, this[JE("0x30")](n));
            }
          }, {
            key: _JE14,
            value: function value(t) {
              var e = va(this.attributes);
              Zn(e, t), vc(e, this[JE("0x13")]) || (this[JE("0x13")] = e, this[JE("0x30")](this[JE("0x13")]));
            }
          }, {
            key: _JE15,
            value: function value() {
              return {
                id: this.id,
                type: this.subType ? this[JE("0x3")] + ":" + this.subType : this.type,
                authorId: this[JE("0x33")].id,
                createdAt: this[JE("0x19")],
                hasComments: this[JE("0x5")],
                data: this[JE("0x1d")],
                attributes: this[JE("0x13")]
              };
            }
          }], [{
            key: "getMultiRangeId",
            value: function getMultiRangeId() {
              return Object(Xo.a)().substr(1, 5);
            }
          }]);

          return GE;
        }(JE("0x12"), JE("0x5"), JE("0x28"), JE("0x8"), JE("0xf"), JE("0x1"), JE("0x31"), JE("0xd"), JE("0x1f"), JE("0x7"), JE("0x2e"), JE("0x22"), JE("0xc"), JE("0xb"), JE("0x2a"));

        Object(o["default"])(GE, i["default"]);

        var KE = /*#__PURE__*/function () {
          function KE(t, e) {
            _classCallCheck(this, KE);

            this._customCallbacks = [], this._itemLabels = new Map(), this._schema = t, this._locale = e;
          }

          _createClass(KE, [{
            key: "getDescriptions",
            value: function getDescriptions(t) {
              var e = [];

              for (var _n356 = 0; _n356 < t.length; _n356++) {
                var _i280 = t[_n356];
                if (!_i280.isInContent) continue;

                var _o149 = !1;

                var _iterator591 = _createForOfIteratorHelper(this._customCallbacks),
                    _step591;

                try {
                  for (_iterator591.s(); !(_step591 = _iterator591.n()).done;) {
                    var _t466 = _step591.value;

                    var _n358 = _t466(_i280);

                    if (_n358) {
                      _n358.type && e.push(_n358), _o149 = !0;
                      break;
                    }
                  }
                } catch (err) {
                  _iterator591.e(err);
                } finally {
                  _iterator591.f();
                }

                if (!_o149) {
                  this._addDescriptionItems(e, _i280);

                  var _o150 = t[_n356 + 1];

                  if (_o150 && !_i280.getFirstRange().end.isEqual(_o150.getFirstRange().start)) {
                    var _t465 = e[e.length - 1],
                        _n357 = "insertion" == _i280.type ? "add" : "remove";

                    _t465 && "text" == _t465.type && (_t465[_n357] += "\n");
                  }
                }
              }

              return this._resolveDescriptionItems(e);
            }
          }, {
            key: "registerDescriptionCallback",
            value: function registerDescriptionCallback(t) {
              this._customCallbacks.push(t);
            }
          }, {
            key: "registerElementLabel",
            value: function registerElementLabel(t, e) {
              this._itemLabels.set(t, e);
            }
          }, {
            key: "getItemLabel",
            value: function getItemLabel(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
              var n = this._itemLabels.get(t) || t;
              return "function" == typeof n ? n(e) : 1 !== e ? e + " " + n + "s" : "" + n;
            }
          }, {
            key: "_addDescriptionItems",
            value: function _addDescriptionItems(t, e) {
              var _this504 = this;

              var n = e.getFirstRange().getWalker(),
                  i = "insertion" == e.type ? "add" : "remove";

              var _iterator592 = _createForOfIteratorHelper(n),
                  _step592;

              try {
                var _loop12 = function _loop12() {
                  var e = _step592.value;
                  var o = e.item,
                      r = t[t.length - 1];
                  if (o.is("textProxy")) r && r.type.indexOf("Container") > -1 && t.pop(), r && "text" == r.type ? r[i] += o.data : t.push({
                    type: "text",
                    add: "add" == i ? o.data : "",
                    remove: "remove" == i ? o.data : ""
                  });else if (_this504._schema.isObject(o)) {
                    if (r && r.type.indexOf("Container") > -1 && t.pop(), "elementEnd" == e.type) return "continue";
                    r && r.type == i + "Object" && r.name == o.name ? r.quantity++ : t.push({
                      type: i + "Object",
                      name: o.name,
                      quantity: 1
                    }), n.skip(function (t) {
                      return !("elementEnd" == t.type && t.item == o);
                    });
                  } else if (_this504._schema.checkChild(o, "$text") || o.is("element", "softBreak")) {
                    if ("add" == i && "elementStart" == e.type || "remove" == i && "elementEnd" == e.type) return "continue";

                    if (r && -1 == r.type.indexOf("Container")) {
                      "text" == r.type && (r[i] += "\n");
                      return "continue";
                    }

                    var _n359;

                    if (_n359 = "add" == i ? o.nextSibling && !_this504._schema.isObject(o.nextSibling) ? o.nextSibling : null : o.previousSibling && !_this504._schema.isObject(o.previousSibling) ? o.previousSibling : null, o.isEmpty || _n359 && _n359.isEmpty) {
                      var _e413 = _n359 && _n359.isEmpty ? _n359.name : o.name;

                      r && r.type == i + "EmptyContainer" && r.name == _e413 ? r.quantity++ : t.push({
                        type: i + "EmptyContainer",
                        name: _e413,
                        quantity: 1
                      });
                    } else t.push({
                      type: i + "Container",
                      name: o.name
                    });
                  }
                };

                for (_iterator592.s(); !(_step592 = _iterator592.n()).done;) {
                  var _ret3 = _loop12();

                  if (_ret3 === "continue") continue;
                }
              } catch (err) {
                _iterator592.e(err);
              } finally {
                _iterator592.f();
              }
            }
          }, {
            key: "_resolveDescriptionItems",
            value: function _resolveDescriptionItems(t) {
              var e = this._locale.t,
                  n = [];

              var _iterator593 = _createForOfIteratorHelper(t),
                  _step593;

              try {
                for (_iterator593.s(); !(_step593 = _iterator593.n()).done;) {
                  var _i281 = _step593.value;

                  switch (_i281.type) {
                    case "text":
                      if (_i281.add = _i281.add.replace(/(\S)\u000A+(\S)/g, "$1 $2").replace(/\u000A/g, ""), _i281.remove = _i281.remove.replace(/(\S)\u000A+(\S)/g, "$1 $2").replace(/\u000A/g, ""), "" != _i281.add && "" != _i281.remove) {
                        n.push({
                          type: "replace",
                          content: e({
                            string: "*Replace:* %0 *with* %1",
                            id: "REPLACE_TEXT"
                          }, ['"' + _i281.remove + '"', '"' + _i281.add + '"'])
                        });
                        continue;
                      }

                      if (null != _i281.add.match(/^ +$/)) {
                        n.push({
                          type: "insertion",
                          content: e("*Insert:* %0", e({
                            string: "space",
                            plural: "%0 spaces",
                            id: "ELEMENT_SPACE"
                          }, _i281.add.length))
                        });
                        continue;
                      }

                      if (null != _i281.remove.match(/^ +$/)) {
                        n.push({
                          type: "deletion",
                          content: e("*Remove:* %0", e({
                            string: "space",
                            plural: "%0 spaces",
                            id: "ELEMENT_SPACE"
                          }, _i281.remove.length))
                        });
                        continue;
                      }

                      if ("" != _i281.add) {
                        n.push({
                          type: "insertion",
                          content: e("*Insert:* %0", '"' + _i281.add + '"')
                        });
                        continue;
                      }

                      n.push({
                        type: "deletion",
                        content: e("*Remove:* %0", '"' + _i281.remove + '"')
                      });
                      continue;

                    case "addEmptyContainer":
                    case "addObject":
                      n.push({
                        type: "insertion",
                        content: e("*Insert:* %0", this.getItemLabel(_i281.name, _i281.quantity))
                      });
                      continue;

                    case "removeEmptyContainer":
                    case "removeObject":
                      n.push({
                        type: "deletion",
                        content: e("*Remove:* %0", this.getItemLabel(_i281.name, _i281.quantity))
                      });
                      continue;

                    case "addContainer":
                      n.push({
                        type: "insertion",
                        content: e("*Split:* %0", this.getItemLabel(_i281.name, _i281.quantity))
                      });
                      continue;

                    case "removeContainer":
                      n.push({
                        type: "deletion",
                        content: e("*Merge:* %0", this.getItemLabel(_i281.name, _i281.quantity))
                      });
                      continue;
                  }

                  n.push(_i281);
                }
              } catch (err) {
                _iterator593.e(err);
              } finally {
                _iterator593.f();
              }

              return n;
            }
          }]);

          return KE;
        }();

        n(115), n(116);

        var QE = /*#__PURE__*/function (_r194) {
          _inherits(QE, _r194);

          var _super349 = _createSuper(QE);

          function QE() {
            _classCallCheck(this, QE);

            return _super349.apply(this, arguments);
          }

          _createClass(QE, [{
            key: "afterInit",
            value: function afterInit() {
              var _this505 = this;

              var t = this.editor,
                  e = t.locale.t;
              if (!t.plugins.has("AlignmentEditing")) return;
              var n = t.plugins.get("TrackChangesEditing");
              n.enableCommand("alignment", function (e) {
                var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                var o = i.value;
                i.value || (o = "ltr" === t.locale.contentLanguageDirection ? "left" : "right");
                var r = Array.from(_this505.editor.model.document.selection.getSelectedBlocks()).filter(function (t) {
                  return function (t, e, n) {
                    var i = t.getAttribute("alignment") || null;
                    return e.checkAttribute(t, "alignment") && n != i;
                  }(t, _this505.editor.model.schema, o);
                });
                t.model.change(function () {
                  var _iterator594 = _createForOfIteratorHelper(r),
                      _step594;

                  try {
                    for (_iterator594.s(); !(_step594 = _iterator594.n()).done;) {
                      var _t467 = _step594.value;
                      n.markBlockFormat(_t467, {
                        commandName: "alignment",
                        commandParams: [{
                          value: o
                        }]
                      });
                    }
                  } catch (err) {
                    _iterator594.e(err);
                  } finally {
                    _iterator594.f();
                  }
                });
              }), n._descriptionFactory.registerDescriptionCallback(function (t) {
                var n = t.data;

                if (n && "alignment" == n.commandName) {
                  var _t468 = n.commandParams[0].value;
                  return {
                    type: "format",
                    content: e("*Format:* %0", function (n) {
                      switch (_t468) {
                        case "left":
                          return e({
                            string: "align to left",
                            id: "FORMAT_ALIGN_TO_LEFT"
                          });

                        case "right":
                          return e({
                            string: "align to right",
                            id: "FORMAT_ALIGN_TO_RIGHT"
                          });

                        case "center":
                          return e({
                            string: "align to center",
                            id: "FORMAT_ALIGN_TO_CENTER"
                          });

                        case "justify":
                          return e({
                            string: "justify",
                            id: "FORMAT_JUSTIFY_TEXT"
                          });
                      }
                    }())
                  };
                }
              });
            }
          }]);

          return QE;
        }(r);

        var XE = ["element", "markerRange", "markerName", "ck-suggestion-marker--active", "getAttribute", "isAtEnd", "isContent", "elementEnd", "writer", "model", "listIndent", "isBlock", "activeMarkers", "ck-suggestion-marker-", "mapper", "previousPosition", "parent", "toViewPosition", "hasAttribute", "addClass", "type", "span", "start", "item", "push", "insert", "toViewElement", "createUIElement", "addHighlight", "nextSibling", "getItems", "getCustomProperty", "consumable", "createRangeOn", "get", "schema", "listItem", "name", "test"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(XE, 428);

        var ZE = function ZE(t, e) {
          return XE[t -= 0];
        };

        function tS(t, e, n) {
          var i = [];

          var _iterator595 = _createForOfIteratorHelper(e[ZE("0x1f")]()),
              _step595;

          try {
            for (_iterator595.s(); !(_step595 = _iterator595.n()).done;) {
              var _o151 = _step595.value;
              _o151[ZE("0x13")](t) && i.push(n[ZE("0x22")](_o151));
            }
          } catch (err) {
            _iterator595.e(err);
          } finally {
            _iterator595.f();
          }

          return i;
        }

        function eS(t) {
          var e = [];

          if (t.is(ZE("0x1"), "listItem")) {
            var _n360 = t[ZE("0x1e")];

            for (; _n360 && _n360.is(ZE("0x1"), ZE("0x25")) && _n360[ZE("0x5")](ZE("0xb")) > 0;) {
              e[ZE("0x19")](_n360), _n360 = _n360[ZE("0x1e")];
            }
          }

          return e;
        }

        function nS(t, e) {
          var _ref142 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
              _ref142$showActiveMar = _ref142.showActiveMarker,
              n = _ref142$showActiveMar === void 0 ? !0 : _ref142$showActiveMar;

          var i = t.plugins[ZE("0x23")]("TrackChangesEditing");
          return function (o, r, s) {
            if (!s[ZE("0x21")][ZE("0x0")](r[ZE("0x2")], o[ZE("0x26")])) return;
            var a = r[ZE("0x2")].getWalker(),
                c = r.markerRange[ZE("0x17")],
                l = t[ZE("0xa")][ZE("0x24")];
            var d = null,
                u = null,
                h = !1,
                f = !1;

            var _iterator596 = _createForOfIteratorHelper(a),
                _step596;

            try {
              for (_iterator596.s(); !(_step596 = _iterator596.n()).done;) {
                var _t469 = _step596.value;

                var _e414 = _t469[ZE("0x18")];

                h = h || l[ZE("0x7")](_e414);

                var _n361 = s[ZE("0xf")][ZE("0x1b")](_e414);

                if (_n361 && _n361[ZE("0x20")](ZE("0x1d"))) return;
                ZE("0x8") == _t469[ZE("0x15")] && l[ZE("0xc")](_e414) && !l.isLimit(_e414) && (_e414.nextSibling || c[ZE("0x6")] ? d && d[ZE("0x11")] == _e414 || (d = _e414, g(_t469[ZE("0x10")]), f = !0) : u = u || _t469[ZE("0x10")]);
              }
            } catch (err) {
              _iterator596.e(err);
            } finally {
              _iterator596.f();
            }

            function g(t) {
              var o = s[ZE("0x9")][ZE("0x1c")](ZE("0x16"), {
                "class": ZE("0xe") + e
              }),
                  a = s[ZE("0xf")][ZE("0x12")](t);
              n && i[ZE("0xd")].includes(r[ZE("0x3")]) && s[ZE("0x9")][ZE("0x14")](ZE("0x4"), o), s[ZE("0x9")][ZE("0x1a")](a, o), s[ZE("0xf")].bindElementToMarker(o, r[ZE("0x3")]);
            }

            h || f || !u || g(u);
          };
        }

        var iS = ["BoldEditing", "ItalicEditing", "UnderlineEditing", "CodeEditing", "StrikethroughEditing", "SubscriptEditing", "SuperscriptEditing"];

        var oS = /*#__PURE__*/function (_r195) {
          _inherits(oS, _r195);

          var _super350 = _createSuper(oS);

          function oS() {
            _classCallCheck(this, oS);

            return _super350.apply(this, arguments);
          }

          _createClass(oS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor,
                  e = t.model,
                  n = t.plugins.get("TrackChangesEditing"),
                  i = t.locale.t;

              var _iterator597 = _createForOfIteratorHelper(iS),
                  _step597;

              try {
                var _loop13 = function _loop13() {
                  var i = _step597.value;
                  if (!t.plugins.has(i)) return "continue";
                  var o = i.slice(0, -7).toLowerCase(),
                      r = t.commands.get(o);
                  n.enableCommand(o, function (t) {
                    var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                    var s = e.document.selection;
                    if (s.isCollapsed) return void t(i);
                    var a = void 0 !== i.forceValue ? i.forceValue : !r.value;
                    e.change(function () {
                      var t = Array.from(s.getRanges());

                      for (var _i282 = 0, _t470 = t; _i282 < _t470.length; _i282++) {
                        var _i283 = _t470[_i282];

                        var _t471 = a ? [_i283] : tS(o, _i283, e);

                        var _iterator598 = _createForOfIteratorHelper(_t471),
                            _step598;

                        try {
                          for (_iterator598.s(); !(_step598 = _iterator598.n()).done;) {
                            var _e415 = _step598.value;
                            n.markInlineFormat(_e415, {
                              commandName: o,
                              commandParams: [{
                                forceValue: a
                              }]
                            });
                          }
                        } catch (err) {
                          _iterator598.e(err);
                        } finally {
                          _iterator598.f();
                        }
                      }
                    });
                  });
                };

                for (_iterator597.s(); !(_step597 = _iterator597.n()).done;) {
                  var _ret4 = _loop13();

                  if (_ret4 === "continue") continue;
                }
              } catch (err) {
                _iterator597.e(err);
              } finally {
                _iterator597.f();
              }

              function o(t, e) {
                n._descriptionFactory.registerDescriptionCallback(function (n) {
                  var o = n.data;
                  if (o && o.commandName === t) return o.commandParams[0].forceValue ? {
                    type: "format",
                    content: i("*Format:* %0", e)
                  } : {
                    type: "format",
                    content: i("*Remove format:* %0", e)
                  };
                });
              }

              o("bold", i({
                string: "bold",
                id: "FORMAT_BOLD"
              })), o("italic", i({
                string: "italic",
                id: "FORMAT_ITALIC"
              })), o("underline", i({
                string: "underline",
                id: "FORMAT_UNDERLINE"
              })), o("code", i({
                string: "code",
                id: "FORMAT_CODE"
              })), o("strikethrough", i({
                string: "strikethrough",
                id: "FORMAT_STRIKETHROUGH"
              })), o("subscript", i({
                string: "subscript",
                id: "FORMAT_SUBSCRIPT"
              })), o("superscript", i({
                string: "superscript",
                id: "FORMAT_SUPERSCRIPT"
              }));
            }
          }]);

          return oS;
        }(r);

        var rS = /*#__PURE__*/function (_r196) {
          _inherits(rS, _r196);

          var _super351 = _createSuper(rS);

          function rS() {
            _classCallCheck(this, rS);

            return _super351.apply(this, arguments);
          }

          _createClass(rS, [{
            key: "afterInit",
            value: function afterInit() {
              var _this506 = this;

              var t = this.editor,
                  e = t.locale.t;
              if (!t.plugins.has("BlockQuoteEditing")) return;
              var n = t.plugins.get("TrackChangesEditing"),
                  i = this.editor.commands.get("blockQuote");
              n.enableCommand("blockQuote", function (e) {
                var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                var r = _this506.editor.model.document.selection,
                    s = o && void 0 !== o.forceValue ? o.forceValue : !i.value;
                var a = [];

                if (s) {
                  var _e416 = Array.from(r.getSelectedBlocks()).filter(function (t) {
                    return sS(t) || function (t, e) {
                      var n = e.checkChild(t.parent, "blockQuote"),
                          i = e.checkChild(["$root", "blockQuote"], t);
                      return n && i;
                    }(t, _this506.editor.model.schema);
                  });

                  a = aS(_e416, t.model);
                } else {
                  var _e417 = Array.from(r.getSelectedBlocks()).filter(function (t) {
                    return sS(t);
                  });

                  a = aS(_e417, t.model);
                }

                t.model.change(function () {
                  var _iterator599 = _createForOfIteratorHelper(a),
                      _step599;

                  try {
                    for (_iterator599.s(); !(_step599 = _iterator599.n()).done;) {
                      var _t472 = _step599.value;
                      n.markBlockFormat(_t472, {
                        commandName: "blockQuote",
                        commandParams: [{
                          forceValue: s
                        }]
                      });
                    }
                  } catch (err) {
                    _iterator599.e(err);
                  } finally {
                    _iterator599.f();
                  }
                });
              }), n._descriptionFactory.registerDescriptionCallback(function (t) {
                var n = t.data;

                if (n && "blockQuote" == n.commandName) {
                  var _t473 = e({
                    string: "block quote",
                    id: "ELEMENT_BLOCK_QUOTE"
                  });

                  return n.commandParams[0].forceValue ? {
                    type: "format",
                    content: e("*Format:* %0", _t473)
                  } : {
                    type: "format",
                    content: e("*Remove format:* %0", _t473)
                  };
                }
              });
            }
          }]);

          return rS;
        }(r);

        function sS(t) {
          return "blockQuote" == t.parent.name;
        }

        function aS(t, e) {
          var n,
              i = 0;
          var o = [],
              r = e.schema;

          for (; i < t.length;) {
            var _s58 = t[i],
                _a88 = t[i + 1];
            n || (n = e.createPositionBefore(_s58)), cS(e, _s58, _a88) || (o.push(e.createRange(n, r.isObject(_s58) ? e.createPositionAfter(_s58) : e.createPositionAt(_s58, "end"))), n = null), i++;
          }

          return o;
        }

        function cS(t, e, n) {
          if (!n) return !1;
          var i = t.createPositionAfter(e),
              o = t.createPositionBefore(n),
              r = new Js({
            boundaries: t.createRange(i, o)
          });

          var _iterator600 = _createForOfIteratorHelper(r),
              _step600;

          try {
            for (_iterator600.s(); !(_step600 = _iterator600.n()).done;) {
              var _e418 = _step600.value;
              if ("text" == _e418.type || t.schema.isLimit(_e418.item)) return !1;
            }
          } catch (err) {
            _iterator600.e(err);
          } finally {
            _iterator600.f();
          }

          return !0;
        }

        var lS = /*#__PURE__*/function (_r197) {
          _inherits(lS, _r197);

          var _super352 = _createSuper(lS);

          function lS() {
            _classCallCheck(this, lS);

            return _super352.apply(this, arguments);
          }

          _createClass(lS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor,
                  e = t.locale.t;
              t.plugins.has("CodeBlock") && t.plugins.get("TrackChangesEditing")._descriptionFactory.registerElementLabel("codeBlock", function (t) {
                return e({
                  string: "code block",
                  plural: "%0 code blocks",
                  id: "ELEMENT_CODE_BLOCK"
                }, t);
              });
            }
          }]);

          return lS;
        }(r);

        var dS = ["init", "enableCommand", "addCommentThread", "get", "TrackChangesEditing", "editor"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(dS, 219);

        var uS = function uS(t, e) {
          return dS[t -= 0];
        };

        var hS = /*#__PURE__*/function (_r198, _uS) {
          _inherits(hS, _r198);

          var _super353 = _createSuper(hS);

          function hS() {
            _classCallCheck(this, hS);

            return _super353.apply(this, arguments);
          }

          _createClass(hS, [{
            key: _uS,
            value: function value() {
              this[uS("0x2")].plugins[uS("0x0")](uS("0x1"))[uS("0x4")](uS("0x5"));
            }
          }], [{
            key: "requires",
            get: function get() {
              return [CA];
            }
          }]);

          return hS;
        }(r, uS("0x3"));

        var fS = ["$graveyard", "uiElement", "document", "setSelection", "deleteForward", "isCollapsed", "editing", "markerNameToElements", "unit", "end", "createRange", "requires", "modifySelection", "plugins", "removeMarker:suggestion:deletion", "writer", "merge", "model", "rootName", "get", "data", "enqueueChange", "mapper", "enableCommand", "start", "init", "createSelection", "buffer", "showSuggestionHighlights", "TrackChangesEditing", "downcastDispatcher", "detach", "fromRange", "forward", "getFirstRange", "delete", "lock", "selection", "high", "root", "addMarker:suggestion:deletion", "batch", "markerName"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(fS, 209);

        var gS = function gS(t, e) {
          return fS[t -= 0];
        };

        var mS = /*#__PURE__*/function (_r199, _gS, _gS2) {
          _inherits(mS, _r199);

          var _super354 = _createSuper(mS);

          function mS() {
            _classCallCheck(this, mS);

            return _super354.apply(this, arguments);
          }

          _createClass(mS, [{
            key: _gS2,
            value: function value() {
              var t = this.editor,
                  e = t[gS("0x13")][gS("0x19")](gS("0x23"));
              e[gS("0x1d")](gS("0x29"));
              var n = t.commands[gS("0x19")]("deleteForward");
              e[gS("0x1d")](gS("0xa"), function (e) {
                var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                var o = t[gS("0x17")][gS("0x20")](t[gS("0x17")][gS("0x8")][gS("0x0")]);
                o[gS("0xb")] && t[gS("0x17")][gS("0x12")](o, {
                  direction: gS("0x27"),
                  unit: i[gS("0xe")]
                });
                var r = o[gS("0x28")](),
                    s = fa[gS("0x26")](r);
                var a;
                e(i), a = gS("0x6") == s[gS("0x2")][gS("0x18")] ? t[gS("0x17")][gS("0x10")](r[gS("0x1e")]) : t[gS("0x17")][gS("0x10")](s[gS("0x1e")], s[gS("0xf")]), s[gS("0x25")](), t.model[gS("0x1b")](n.buffer[gS("0x4")], function (t) {
                  n[gS("0x21")][gS("0x2a")](), t[gS("0x9")](t[gS("0x10")](a[gS("0xf")])), n[gS("0x21")].unlock();
                });
              }), t[gS("0xc")][gS("0x24")].on(gS("0x3"), nS(t, gS("0x16")), {
                priority: gS("0x1")
              }), t[gS("0x1a")][gS("0x24")].on(gS("0x3"), function (e, n, i) {
                i.options[gS("0x22")] && nS(t, gS("0x16"), {
                  showActiveMarker: !1
                })(e, n, i);
              }, {
                priority: gS("0x1")
              }), t[gS("0xc")][gS("0x24")].on(gS("0x14"), function (t, e, n) {
                var i = n[gS("0x1c")][gS("0xd")](e[gS("0x5")]);

                if (i) {
                  var _iterator601 = _createForOfIteratorHelper(i),
                      _step601;

                  try {
                    for (_iterator601.s(); !(_step601 = _iterator601.n()).done;) {
                      var _t474 = _step601.value;
                      _t474.is(gS("0x7")) && (n[gS("0x1c")].unbindElementFromMarkerName(_t474, e.markerName), n[gS("0x15")].remove(_t474));
                    }
                  } catch (err) {
                    _iterator601.e(err);
                  } finally {
                    _iterator601.f();
                  }
                }
              }, {
                priority: "high"
              });
            }
          }], [{
            key: _gS,
            get: function get() {
              return [Fh];
            }
          }]);

          return mS;
        }(r, gS("0x11"), gS("0x1f"));

        var pS = ["init", "model", "selection", "editor", "split", "isCollapsed", "parent", "mapper", "isLimit", "data", "getFirstPosition", "ck-suggestion-marker-split", "change", "document", "writer", "remove", "plugins", "detach", "createRange", "unbindElementFromMarkerName", "hasClass", "start", "getFirstRange", "get", "showSuggestionHighlights", "end", "markerName", "TrackChangesEditing", "createPositionAt", "schema", "downcastDispatcher", "enter", "setSelection", "addMarker:suggestion:insertion", "markInsertion", "isAtEnd", "enableCommand", "high", "editing"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(pS, 171);

        var bS = function bS(t, e) {
          return pS[t -= 0];
        };

        var kS = /*#__PURE__*/function (_r200, _bS) {
          _inherits(kS, _r200);

          var _super355 = _createSuper(kS);

          function kS() {
            _classCallCheck(this, kS);

            return _super355.apply(this, arguments);
          }

          _createClass(kS, [{
            key: _bS,
            value: function value() {
              var t = this[bS("0x1b")],
                  e = t[bS("0x1")][bS("0x8")](bS("0xc"));
              e[bS("0x15")](bS("0x10"), function (n) {
                t.model[bS("0x24")](function (i) {
                  var o = t[bS("0x19")][bS("0x25")][bS("0x1a")],
                      r = o[bS("0x22")](),
                      s = o[bS("0x1d")],
                      a = fa.fromRange(o[bS("0x7")]()),
                      c = a[bS("0x6")][bS("0x1e")],
                      l = a[bS("0xa")].parent,
                      d = !(a[bS("0x6")].isAtStart && a[bS("0xa")][bS("0x14")]),
                      u = c == l,
                      h = !(t[bS("0x19")][bS("0xe")][bS("0x20")](c) || t[bS("0x19")][bS("0xe")].isLimit(l)) && (s || d && u);

                  if (n(), h) {
                    var _n362 = t[bS("0x19")][bS("0xd")](r[bS("0x1e")].nextSibling, 0),
                        _o152 = i[bS("0x3")](r, _n362);

                    e[bS("0x13")](_o152);
                  } else i[bS("0x11")](i.createRange(a[bS("0xa")]));

                  a[bS("0x2")]();
                });
              }), t.editing[bS("0xf")].on(bS("0x12"), nS(t, bS("0x1c")), {
                priority: bS("0x16")
              }), t[bS("0x17")].downcastDispatcher.on("removeMarker:suggestion:insertion", function (t, e, n) {
                var i = n[bS("0x1f")].markerNameToElements(e[bS("0xb")]);

                if (i) {
                  var _iterator602 = _createForOfIteratorHelper(i),
                      _step602;

                  try {
                    for (_iterator602.s(); !(_step602 = _iterator602.n()).done;) {
                      var _t475 = _step602.value;
                      _t475[bS("0x5")](bS("0x23")) && (n.mapper[bS("0x4")](_t475, e[bS("0xb")]), n[bS("0x26")][bS("0x0")](_t475));
                    }
                  } catch (err) {
                    _iterator602.e(err);
                  } finally {
                    _iterator602.f();
                  }
                }
              }, {
                priority: bS("0x16")
              }), t[bS("0x21")][bS("0xf")].on(bS("0x12"), function (e, n, i) {
                i.options[bS("0x9")] && nS(t, bS("0x1c"), {
                  showActiveMarker: !1
                })(e, n, i);
              }, {
                priority: bS("0x16")
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [jh];
            }
          }]);

          return kS;
        }(r, bS("0x18"));

        var _S = ["exportPdf", "TrackChangesEditing", "plugins", "ExportPdf", "get", "has", "afterInit"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(_S, 383);

        var wS = function wS(t, e) {
          return _S[t -= 0];
        };

        var vS = /*#__PURE__*/function (_r201, _wS) {
          _inherits(vS, _r201);

          var _super356 = _createSuper(vS);

          function vS() {
            _classCallCheck(this, vS);

            return _super356.apply(this, arguments);
          }

          _createClass(vS, [{
            key: _wS,
            value: function value() {
              var t = this.editor;
              t[wS("0x4")][wS("0x0")](wS("0x5")) && t[wS("0x4")][wS("0x6")](wS("0x3")).enableCommand(wS("0x2"));
            }
          }]);

          return vS;
        }(r, wS("0x1"));

        var yS = ["exportWord", "enableCommand", "TrackChangesEditing", "ExportWord", "has", "plugins"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(yS, 410);

        var xS = function xS(t, e) {
          return yS[t -= 0];
        };

        var CS = /*#__PURE__*/function (_r202) {
          _inherits(CS, _r202);

          var _super357 = _createSuper(CS);

          function CS() {
            _classCallCheck(this, CS);

            return _super357.apply(this, arguments);
          }

          _createClass(CS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              t[xS("0x3")][xS("0x2")](xS("0x1")) && t[xS("0x3")].get(xS("0x0"))[xS("0x5")](xS("0x4"));
            }
          }]);

          return CS;
        }(r);

        var TS = [{
          pluginName: "FontSizeEditing",
          commandName: "fontSize"
        }, {
          pluginName: "FontFamilyEditing",
          commandName: "fontFamily"
        }, {
          pluginName: "FontColorEditing",
          commandName: "fontColor"
        }, {
          pluginName: "FontBackgroundColorEditing",
          commandName: "fontBackgroundColor"
        }];

        var AS = /*#__PURE__*/function (_r203) {
          _inherits(AS, _r203);

          var _super358 = _createSuper(AS);

          function AS() {
            _classCallCheck(this, AS);

            return _super358.apply(this, arguments);
          }

          _createClass(AS, [{
            key: "afterInit",
            value: function afterInit() {
              var _this507 = this;

              var t = this.editor.locale.t;

              var _iterator603 = _createForOfIteratorHelper(TS),
                  _step603;

              try {
                for (_iterator603.s(); !(_step603 = _iterator603.n()).done;) {
                  var _step603$value = _step603.value,
                      _t476 = _step603$value.pluginName,
                      _e423 = _step603$value.commandName;
                  this.editor.plugins.has(_t476) && this._enableCommand(_e423);
                }
              } catch (err) {
                _iterator603.e(err);
              } finally {
                _iterator603.f();
              }

              this.editor.plugins.get("TrackChangesEditing")._descriptionFactory.registerDescriptionCallback(function (e) {
                var n = e.data;

                if (null != n) {
                  if ("fontSize" == n.commandName) {
                    var _e419 = n.commandParams[0].value;

                    if (_e419) {
                      var _n363 = Xw(_this507.editor.config.get("fontSize.options")).find(function (t) {
                        return t.model == _e419;
                      }).title,
                          _i284 = _this507.editor.locale._t(_n363).toLowerCase();

                      return {
                        type: "format",
                        content: t("*Set font size:* %0", _i284)
                      };
                    }

                    return {
                      type: "format",
                      content: t("*Reset font size*")
                    };
                  }

                  if ("fontFamily" == n.commandName) {
                    var _e420 = n.commandParams[0].value;
                    return _e420 ? {
                      type: "format",
                      content: t("*Set font family:* %0", _e420)
                    } : {
                      type: "format",
                      content: t("*Reset font family*")
                    };
                  }

                  if ("fontColor" == n.commandName) {
                    var _e421 = n.commandParams[0].value;

                    if (_e421) {
                      var _n364 = ou(_this507.editor.config.get("fontColor.colors")).find(function (t) {
                        return t.model == _e421;
                      }).label,
                          _i285 = _this507.editor.locale._t(_n364).toLowerCase();

                      return {
                        type: "format",
                        content: t("*Set font color:* %0", _i285)
                      };
                    }

                    return {
                      type: "format",
                      content: t("*Reset font color*")
                    };
                  }

                  if ("fontBackgroundColor" == n.commandName) {
                    var _e422 = n.commandParams[0].value;

                    if (_e422) {
                      var _n365 = ou(_this507.editor.config.get("fontBackgroundColor.colors")).find(function (t) {
                        return t.model == _e422;
                      }).label,
                          _i286 = _this507.editor.locale._t(_n365).toLowerCase();

                      return {
                        type: "format",
                        content: t("*Set font background color:* %0", _i286)
                      };
                    }

                    return {
                      type: "format",
                      content: t("*Reset font background color*")
                    };
                  }
                }
              });
            }
          }, {
            key: "_enableCommand",
            value: function _enableCommand(t) {
              var e = this.editor;
              e.plugins.get("TrackChangesEditing").enableCommand(t, function (n) {
                var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                var o = e.model.document.selection,
                    r = i.value;
                o.isCollapsed ? n(i) : e.model.change(function () {
                  var n = Array.from(o.getRanges());

                  for (var _i287 = 0, _n366 = n; _i287 < _n366.length; _i287++) {
                    var _i288 = _n366[_i287];

                    var _n367 = r ? [_i288] : tS(t, _i288, e.model);

                    var _iterator604 = _createForOfIteratorHelper(_n367),
                        _step604;

                    try {
                      for (_iterator604.s(); !(_step604 = _iterator604.n()).done;) {
                        var _i289 = _step604.value;
                        e.plugins.get("TrackChangesEditing").markInlineFormat(_i289, {
                          commandName: t,
                          commandParams: [{
                            value: r
                          }]
                        });
                      }
                    } catch (err) {
                      _iterator604.e(err);
                    } finally {
                      _iterator604.f();
                    }
                  }
                });
              });
            }
          }]);

          return AS;
        }(r);

        var ES = /*#__PURE__*/function (_r204) {
          _inherits(ES, _r204);

          var _super359 = _createSuper(ES);

          function ES() {
            _classCallCheck(this, ES);

            return _super359.apply(this, arguments);
          }

          _createClass(ES, [{
            key: "afterInit",
            value: function afterInit() {
              var _this508 = this;

              var t = this.editor,
                  e = t.locale.t,
                  n = t.config.get("heading.options");
              if (!t.plugins.has("HeadingEditing")) return;
              var i = t.plugins.get("TrackChangesEditing");
              i.enableCommand("heading", function (e, n) {
                var o = n.value,
                    r = Array.from(_this508.editor.model.document.selection.getSelectedBlocks()).filter(function (t) {
                  return function (t, e, n) {
                    return n.checkChild(t.parent, e) && !n.isObject(t) && t.name != e;
                  }(t, o, _this508.editor.model.schema);
                });
                t.model.change(function () {
                  var _iterator605 = _createForOfIteratorHelper(r),
                      _step605;

                  try {
                    for (_iterator605.s(); !(_step605 = _iterator605.n()).done;) {
                      var _t477 = _step605.value;
                      i.markBlockFormat(_t477, {
                        commandName: "heading",
                        commandParams: [n],
                        formatGroupId: "blockName"
                      }, eS(_t477));
                    }
                  } catch (err) {
                    _iterator605.e(err);
                  } finally {
                    _iterator605.f();
                  }
                });
              });

              var _iterator606 = _createForOfIteratorHelper(n),
                  _step606;

              try {
                var _loop14 = function _loop14() {
                  var t = _step606.value;
                  "paragraph" != t.model && i._descriptionFactory.registerElementLabel(t.model, function (e) {
                    var n = SS(t.model);
                    return null !== n ? o(e, n) : r(e, t.title);
                  });
                };

                for (_iterator606.s(); !(_step606 = _iterator606.n()).done;) {
                  _loop14();
                }
              } catch (err) {
                _iterator606.e(err);
              } finally {
                _iterator606.f();
              }

              function o(t, n) {
                return e({
                  string: "heading (level %1)",
                  plural: "%0 headings (level %1)",
                  id: "ELEMENT_HEADING"
                }, [t, n]);
              }

              function r(t, n) {
                return e({
                  string: "heading (%1)",
                  plural: "%0 headings (%1)",
                  id: "ELEMENT_HEADING_CUSTOM"
                }, [t, n]);
              }

              i._descriptionFactory.registerDescriptionCallback(function (t) {
                var i = t.type,
                    s = t.data;

                if ("formatBlock" == i && s && "heading" == s.commandName) {
                  var _t478 = s.commandParams[0].value,
                      _i290 = SS(_t478);

                  if (null !== _i290) return {
                    type: "format",
                    content: e("*Change to:* %0", o(1, _i290))
                  };
                  var _a89 = n.find(function (e) {
                    return e.model === _t478;
                  }).title;
                  return {
                    type: "format",
                    content: e("*Change to:* %0", r(1, _a89))
                  };
                }
              });
            }
          }]);

          return ES;
        }(r);

        function SS(t) {
          var e = t.match(/^heading(\d+)$/);
          return e ? e[1] : null;
        }

        var IS = /*#__PURE__*/function (_r205) {
          _inherits(IS, _r205);

          var _super360 = _createSuper(IS);

          function IS() {
            _classCallCheck(this, IS);

            return _super360.apply(this, arguments);
          }

          _createClass(IS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("HighlightEditing")) return;
              var e = t.plugins.get("TrackChangesEditing");
              e.enableCommand("highlight", function (n) {
                var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                var o = t.model.document.selection,
                    r = o.getAttribute("highlight");
                var s = i.value,
                    a = [];

                if (o.isCollapsed) {
                  var _e424 = o.getFirstPosition();

                  if (!o.hasAttribute("highlight")) return void n(i);
                  {
                    var _n368 = function _n368(t) {
                      return t.item.getAttribute("highlight") === r;
                    },
                        _i291 = _e424.getLastMatchingPosition(_n368, {
                      direction: "backward"
                    }),
                        _o153 = _e424.getLastMatchingPosition(_n368);

                    a = [t.model.createRange(_i291, _o153)], s == r && (s = null);
                  }
                } else {
                  var _iterator607 = _createForOfIteratorHelper(o.getRanges()),
                      _step607;

                  try {
                    for (_iterator607.s(); !(_step607 = _iterator607.n()).done;) {
                      var _a90;

                      var _e425 = _step607.value;
                      s ? a.push(_e425) : (_a90 = a).push.apply(_a90, _toConsumableArray(tS("highlight", _e425, t.model)));
                    }
                  } catch (err) {
                    _iterator607.e(err);
                  } finally {
                    _iterator607.f();
                  }
                }

                t.model.change(function () {
                  var _iterator608 = _createForOfIteratorHelper(a),
                      _step608;

                  try {
                    for (_iterator608.s(); !(_step608 = _iterator608.n()).done;) {
                      var _t479 = _step608.value;
                      e.markInlineFormat(_t479, {
                        commandName: "highlight",
                        commandParams: [{
                          value: s
                        }]
                      });
                    }
                  } catch (err) {
                    _iterator608.e(err);
                  } finally {
                    _iterator608.f();
                  }
                });
              });
              var n = t.locale.t;

              e._descriptionFactory.registerDescriptionCallback(function (e) {
                var i = e.type,
                    o = e.data;

                if ("formatInline" == i && o && "highlight" == o.commandName) {
                  var _e426 = o.commandParams[0].value;

                  if (_e426) {
                    var _i292 = t.config.get("highlight.options").find(function (t) {
                      return t.model == _e426;
                    }).title,
                        _o154 = t.locale._t(_i292).toLowerCase();

                    return {
                      type: "format",
                      content: n("*Format:* %0", n({
                        string: "%0 highlight",
                        id: "FORMAT_CUSTOM_HIGHLIGHT"
                      }, _o154))
                    };
                  }

                  return {
                    type: "format",
                    content: n("*Remove format:* %0", n({
                      string: "highlight",
                      id: "FORMAT_HIGHLIGHT"
                    }))
                  };
                }
              });
            }
          }]);

          return IS;
        }(r);

        n(407);

        var OS = /*#__PURE__*/function (_r206) {
          _inherits(OS, _r206);

          var _super361 = _createSuper(OS);

          function OS() {
            _classCallCheck(this, OS);

            return _super361.apply(this, arguments);
          }

          _createClass(OS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("HorizontalLineEditing")) return;
              t.plugins.get("TrackChangesEditing").enableCommand("horizontalLine");
              var e = t.plugins.get("TrackChangesEditing"),
                  n = t.locale.t;
              e._descriptionFactory.registerElementLabel("horizontalLine", function (t) {
                return n({
                  string: "horizontal line",
                  plural: "%0 horizontal lines",
                  id: "ELEMENT_HORIZONTAL_LINE"
                }, t);
              }), t.conversion["for"]("dataDowncast").elementToElement({
                model: "horizontalLine",
                view: function view(t, _ref143) {
                  var e = _ref143.writer,
                      n = _ref143.options;
                  if (!n.showSuggestionHighlights) return;
                  var i = e.createContainerElement("div"),
                      o = e.createEmptyElement("hr");
                  return e.addClass("ck-horizontal-line", i), e.insert(e.createPositionAt(i, 0), o), i;
                },
                converterPriority: "high"
              });
            }
          }]);

          return OS;
        }(r);

        n(409);

        var RS = /*#__PURE__*/function (_r207) {
          _inherits(RS, _r207);

          var _super362 = _createSuper(RS);

          function RS() {
            _classCallCheck(this, RS);

            return _super362.apply(this, arguments);
          }

          _createClass(RS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("ImageEditing")) return;
              var e = t.plugins.get("TrackChangesEditing"),
                  n = t.plugins.get("ImageUtils"),
                  i = {},
                  o = t.locale.t;

              if (e.enableCommand("insertImage"), e._descriptionFactory.registerElementLabel("imageBlock", function (t) {
                return o({
                  string: "image",
                  plural: "%0 images",
                  id: "ELEMENT_IMAGE"
                }, t);
              }), e._descriptionFactory.registerElementLabel("imageInline", function (t) {
                return o({
                  string: "image",
                  plural: "%0 images",
                  id: "ELEMENT_INLINE_IMAGE"
                }, t);
              }), e._descriptionFactory.registerElementLabel("caption", o({
                string: "caption",
                id: "ELEMENT_CAPTION"
              })), t.plugins.has("ImageUploadEditing") && e.enableCommand("uploadImage"), t.plugins.has("ImageBlockEditing") && t.plugins.has("ImageInlineEditing") && (e.enableCommand("imageTypeInline", function (i, o) {
                var r = n.getClosestSelectedImageElement(t.model.document.selection);
                t.model.change(function () {
                  e.markBlockFormat(r, {
                    commandName: "imageTypeInline",
                    commandParams: [o]
                  }, [], "convertBlockImageToInline");
                });
              }), e.enableCommand("imageTypeBlock", function (i, o) {
                t.model.change(function (r) {
                  var s = n.getClosestSelectedImageElement(t.model.document.selection),
                      a = r.createRangeOn(s);
                  var c = Zc.fromPosition(a.start, "toPrevious"),
                      l = Zc.fromPosition(a.end, "toNext");
                  e.forceDefaultExecution(function () {
                    return i(o);
                  }), s = n.getClosestSelectedImageElement(t.model.document.selection), a = r.createRangeOn(s);
                  var d = r.createRange(c, l);
                  c.detach(), l.detach(), e.markBlockFormat(s, {
                    commandName: "imageTypeInline"
                  }, [], "convertInlineImageToBlock"), d.start.isBefore(a.start) && e.markInsertion(r.createRange(d.start, a.start), "convertInlineImageToBlock"), a.end.isBefore(d.end) && e.markInsertion(r.createRange(a.end, d.end), "convertInlineImageToBlock");
                });
              }), e._suggestionFactory.registerCustomCallback("formatBlock", "convertInlineImageToBlock", "join", function () {}), e._suggestionFactory.registerCustomCallback("formatBlock", "convertInlineImageToBlock", "accept", function () {}), e._suggestionFactory.registerCustomCallback("formatBlock", "convertInlineImageToBlock", "discard", e._suggestionFactory.getSuggestionCallback("formatBlock", "", "accept")), e._suggestionFactory.registerCustomCallback("insertion", "convertInlineImageToBlock", "join", function () {}), e._suggestionFactory.registerCustomCallback("insertion", "convertInlineImageToBlock", "discard", function (_ref144) {
                var _ref145 = _slicedToArray(_ref144, 1),
                    n = _ref145[0];

                var i = e._suggestionFactory.getSuggestionCallback("insertion", "", "discard");

                var o = n.start,
                    r = n.end;
                var s = t.model.schema.getNearestSelectionRange(o, "backward"),
                    a = t.model.schema.getNearestSelectionRange(r, "forward");
                s.isCollapsed && (o = s.start), a.isCollapsed && (r = a.end), i([t.model.createRange(o, r)]);
              }), e._suggestionFactory.registerCustomCallback("formatBlock", "convertInlineImageToBlock", "chain", a), e._suggestionFactory.registerCustomCallback("insertion", "convertInlineImageToBlock", "chain", a)), t.plugins.has("ImageCaptionEditing") && (e.enableCommand("toggleImageCaption", function (i, o) {
                var r = n.getClosestSelectedImageElement(t.model.document.selection),
                    s = $m(r);
                t.model.change(function () {
                  if (s) return void e.markDeletion(t.model.createRangeOn(s));
                  var a = n.isBlockImage(r);
                  i(o), r = n.getClosestSelectedImageElement(t.model.document.selection), s = $m(r), e.markInsertion(t.model.createRangeOn(s), a ? null : "imageCaption");
                });
              }), e._suggestionFactory.registerCustomCallback("insertion", "imageCaption", "chain", a)), t.plugins.has("ImageStyleEditing")) {
                e.enableCommand("imageStyle", function (i, o) {
                  var r = t.plugins.get("Users").me,
                      s = t.commands.get("imageStyle");
                  var a = n.getClosestSelectedImageElement(t.model.document.selection),
                      c = t.model.createRangeOn(a),
                      l = s.value;
                  if (l == o.value) return;
                  var d = {
                    commandName: "imageStyle",
                    commandParams: [o],
                    formatGroupId: Object(Xo.a)()
                  };
                  t.model.change(function () {
                    if (e.getSuggestions().filter(function (t) {
                      return t.isInContent && r == t.author && ("formatBlock" == t.type || "formatInline" == t.type) && ("imageStylePreApply" == t.subType || "imageStylePostApply" == t.subType) && t.getFirstRange().isEqual(c);
                    }).forEach(function (t) {
                      return e.discardSuggestion(t.head);
                    }), a = n.getClosestSelectedImageElement(t.model.document.selection), c = t.model.createRangeOn(a), s.refresh(), t.commands.get("imageTypeInline").refresh(), t.commands.get("imageTypeBlock").refresh(), (l = s.value) != o.value) return n.isInlineImage(a) && s.shouldConvertImageType(o.value, a) ? (i(o), a = n.getClosestSelectedImageElement(t.model.document.selection), void e.markBlockFormat(a, _objectSpread(_objectSpread({}, d), {}, {
                      commandReversedParams: [{
                        value: l || null
                      }]
                    }), [], "imageStylePreApply")) : void (n.isBlockImage(a) ? e.markBlockFormat(a, d, [], "imageStylePostApply") : e.markInlineFormat(c, d, "imageStylePostApply"));
                  });
                });

                var _iterator609 = _createForOfIteratorHelper(t.plugins.get("ImageStyleEditing").normalizedStyles),
                    _step609;

                try {
                  for (_iterator609.s(); !(_step609 = _iterator609.n()).done;) {
                    var _e427 = _step609.value;
                    i[_e427.name] = _e427.title.toLowerCase();
                  }
                } catch (err) {
                  _iterator609.e(err);
                } finally {
                  _iterator609.f();
                }

                e._suggestionFactory.registerCustomCallback("formatBlock", "imageStylePreApply", "join", function () {}), e._suggestionFactory.registerCustomCallback("formatBlock", "imageStylePostApply", "join", function () {}), e._suggestionFactory.registerCustomCallback("formatInline", "imageStylePostApply", "join", function () {}), e._suggestionFactory.registerCustomCallback("formatBlock", "imageStylePreApply", "accept", function () {}), e._suggestionFactory.registerCustomCallback("formatBlock", "imageStylePreApply", "discard", function (t, n) {
                  e._suggestionFactory.getSuggestionCallback("formatBlock", "", "accept")(t, {
                    commandName: n.commandName,
                    commandParams: n.commandReversedParams
                  });
                }), e._suggestionFactory.registerCustomCallback("formatBlock", "imageStylePreApply", "chain", a);
              }

              var r = [{
                type: "formatBlock",
                subType: "imageStylePreApply"
              }, {
                type: "insertion",
                subType: "imageCaption"
              }, {
                type: "formatBlock",
                subType: "convertInlineImageToBlock"
              }, {
                type: "insertion",
                subType: "convertInlineImageToBlock"
              }];

              function s(t, i) {
                var o = r.findIndex(function (_ref146) {
                  var e = _ref146.type,
                      n = _ref146.subType;
                  return t.type == e && t.subType == n;
                }),
                    s = r.findIndex(function (_ref147) {
                  var t = _ref147.type,
                      e = _ref147.subType;
                  return i.type == t && i.subType == e;
                });
                if (o < 0 || s < 0) return !1;
                var a = t.getFirstRange(),
                    c = i.getFirstRange();
                if ((0 == o || 1 == o) && 2 == s && a.isIntersecting(c)) return !0;

                if (2 == o && 3 == s) {
                  var _t480 = e._findSuggestions(a, "insertion").filter(function (_ref148) {
                    var t = _ref148.suggestion,
                        e = _ref148.meta;
                    return e.isOwn && "convertInlineImageToBlock" == t.subType;
                  });

                  if (_t480.length > 1 && c.end.isEqual(a.start)) return !0;
                  if (1 == _t480.length && (a.start.isEqual(c.end) || a.end.isEqual(c.start))) return !0;
                }

                if (3 == o && 3 == s && a.start.isBefore(c.start)) {
                  var _t481 = a.end.nodeAfter,
                      _e428 = c.start.nodeBefore;
                  return n.isBlockImage(_t481) && _t481 === _e428;
                }

                return !1;
              }

              function a(t, e) {
                return s(t, e) ? [t, e] : s(e, t) ? [e, t] : null;
              }

              t.model.document.registerPostFixer(function () {
                var i = !1;
                var o = Array.from(t.model.document.differ.getChangedMarkers());

                for (var _i293 = 0, _o155 = o; _i293 < _o155.length; _i293++) {
                  var _o155$_i = _o155[_i293],
                      _t482 = _o155$_i.name,
                      _r208 = _o155$_i.data;

                  var _e$_splitMarkerName = e._splitMarkerName(_t482),
                      _o156 = _e$_splitMarkerName.group,
                      _s59 = _e$_splitMarkerName.type,
                      _a91 = _e$_splitMarkerName.subType,
                      _c26 = _e$_splitMarkerName.id;

                  if ("suggestion" == _o156 && e.hasSuggestion(_c26)) {
                    if ("formatBlock" == _s59 && ("imageStylePreApply" == _a91 || "imageStylePostApply" == _a91)) {
                      var _t483 = e.getSuggestion(_c26);

                      if (_r208.newRange) {
                        var _o157 = _t483.getFirstRange().getContainedElement();

                        if (n.isBlockImage(_o157)) continue;
                        e.discardSuggestion(_t483), i = !0;
                      }
                    }

                    if ("insertion" == _s59 && "imageCaption" == _a91 && !_r208.newRange) {
                      var _t484 = e.getSuggestion(_c26);

                      _t484.next && _t484.next.isInContent && (e.discardSuggestion(_t484.next), i = !0);
                    }
                  }
                }

                return i;
              }), t.plugins.has("ImageResize") && e.enableCommand("resizeImage", function (i, o) {
                var r = n.getClosestSelectedImageElement(t.model.document.selection);
                r.getAttribute("width") != o.width && t.model.change(function () {
                  e.markBlockFormat(r, {
                    commandName: "resizeImage",
                    commandParams: [o]
                  });
                });
              }), t.plugins.has("ImageTextAlternativeEditing") && e.enableCommand("imageTextAlternative", function (i, o) {
                var r = n.getClosestSelectedImageElement(t.model.document.selection);
                (r.hasAttribute("alt") ? r.getAttribute("alt") : "") != o.newValue && t.model.change(function () {
                  e.markBlockFormat(r, {
                    commandName: "imageTextAlternative",
                    commandParams: [o]
                  });
                });
              }), e._descriptionFactory.registerDescriptionCallback(function (t) {
                if (r.find(function (_ref149) {
                  var e = _ref149.type,
                      n = _ref149.subType;
                  return t.type == e && t.subType == n;
                })) return t.previous ? {} : void 0;
              }), e._descriptionFactory.registerDescriptionCallback(function (t) {
                if ("insertion" == t.type || "deletion" == t.type) {
                  var _e429 = t.getContainedElement();

                  if (_e429 && _e429.is("element", "caption")) return {
                    type: "insertion" == t.type ? "addObject" : "removeObject",
                    name: _e429.name,
                    quantity: 1
                  };
                }
              }), e._descriptionFactory.registerDescriptionCallback(function (t) {
                return "formatBlock" == t.type && "convertInlineImageToBlock" == t.subType ? {
                  type: "format",
                  content: "Inline image to block image"
                } : "formatBlock" == t.type && "convertBlockImageToInline" == t.subType ? {
                  type: "format",
                  content: "Block image to inline image"
                } : void 0;
              }), e._descriptionFactory.registerDescriptionCallback(function (t) {
                var e = t.data;

                if (e) {
                  if ("imageStyle" == e.commandName) {
                    var _t485 = e.commandParams[0].value;
                    return function (t) {
                      return {
                        type: "format",
                        content: o("*Format:* %0", t)
                      };
                    }("side" === _t485 ? o({
                      string: "side image",
                      id: "FORMAT_SIDE_IMAGE"
                    }) : i[_t485] || _t485);
                  }

                  if ("imageTextAlternative" == e.commandName) {
                    var _t486 = e.commandParams[0].newValue;
                    return _t486 ? {
                      type: "format",
                      content: o("*Set image text alternative:* %0", '"' + _t486 + '"')
                    } : {
                      type: "format",
                      content: o("*Remove image text alternative*")
                    };
                  }

                  if ("resizeImage" == e.commandName) {
                    var _t487 = e.commandParams[0].width;
                    return _t487 ? {
                      type: "format",
                      content: o("*Set image width:* %0", _t487)
                    } : {
                      type: "format",
                      content: o("*Reset image width*")
                    };
                  }
                }
              });
            }
          }]);

          return RS;
        }(r);

        var MS = /*#__PURE__*/function (_r209) {
          _inherits(MS, _r209);

          var _super363 = _createSuper(MS);

          function MS() {
            _classCallCheck(this, MS);

            return _super363.apply(this, arguments);
          }

          _createClass(MS, [{
            key: "afterInit",
            value: function afterInit() {
              var _this509 = this;

              var t = this.editor,
                  e = t.plugins.get("TrackChangesEditing");
              t.plugins.has("IndentEditing") && (e.enableCommand("indent"), e.enableCommand("outdent"));
              var n = t.locale.t;

              if (t.plugins.has("IndentBlock")) {
                var _loop15 = function _loop15() {
                  var n = _arr4[_i294];
                  e.enableCommand(n, function () {
                    var i = Array.from(_this509.editor.model.document.selection.getSelectedBlocks()).filter(function (t) {
                      return _this509.editor.model.schema.checkAttribute(t, "blockIndent");
                    });
                    t.model.change(function () {
                      var _iterator610 = _createForOfIteratorHelper(i),
                          _step610;

                      try {
                        for (_iterator610.s(); !(_step610 = _iterator610.n()).done;) {
                          var _t488 = _step610.value;
                          e.markBlockFormat(_t488, {
                            commandName: n,
                            commandParams: [{
                              value: ""
                            }],
                            formatGroupId: "indentBlock"
                          });
                        }
                      } catch (err) {
                        _iterator610.e(err);
                      } finally {
                        _iterator610.f();
                      }
                    });
                  });
                };

                for (var _i294 = 0, _arr4 = ["indentBlock", "outdentBlock"]; _i294 < _arr4.length; _i294++) {
                  _loop15();
                }

                e._descriptionFactory.registerDescriptionCallback(function (t) {
                  var i = t.data;
                  if (!i) return;
                  if ("indentBlock" != i.commandName && "outdentBlock" != i.commandName) return;

                  var o = t.getItems()[0],
                      r = e._descriptionFactory.getItemLabel(o.name);

                  return "indentBlock" == i.commandName ? {
                    type: "format",
                    content: n("*Indent:* %0", r)
                  } : "outdentBlock" == i.commandName ? {
                    type: "format",
                    content: n("*Outdent:* %0", r)
                  } : void 0;
                });
              }
            }
          }]);

          return MS;
        }(r);

        var PS = ["requires", "TrackChangesEditing", "input", "get", "init"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(PS, 405);

        var NS = function NS(t, e) {
          return PS[t -= 0];
        };

        var DS = /*#__PURE__*/function (_r210, _NS, _NS2) {
          _inherits(DS, _r210);

          var _super364 = _createSuper(DS);

          function DS() {
            _classCallCheck(this, DS);

            return _super364.apply(this, arguments);
          }

          _createClass(DS, [{
            key: _NS2,
            value: function value() {
              this.editor.plugins[NS("0x3")](NS("0x1")).enableCommand(NS("0x2"));
            }
          }], [{
            key: _NS,
            get: function get() {
              return [Wf];
            }
          }]);

          return DS;
        }(r, NS("0x0"), NS("0x4"));

        var jS = /*#__PURE__*/function (_r211) {
          _inherits(jS, _r211);

          var _super365 = _createSuper(jS);

          function jS() {
            _classCallCheck(this, jS);

            return _super365.apply(this, arguments);
          }

          _createClass(jS, [{
            key: "afterInit",
            value: function afterInit() {
              var _this510 = this;

              var t = this.editor;
              if (!t.plugins.has("LinkEditing")) return;
              var e = t.plugins.get("TrackChangesEditing");
              e.enableCommand("link", function (n, i) {
                var o = t.model.document.selection;
                var r = [];

                if (o.isCollapsed) {
                  if (!o.hasAttribute("linkHref")) return void n(i);
                  {
                    var _e430 = ng(o.getFirstPosition(), "linkHref", o.getAttribute("linkHref"), t.model);

                    r = [_e430];
                  }
                } else r = Array.from(o.getRanges());

                t.model.change(function () {
                  var _iterator611 = _createForOfIteratorHelper(r),
                      _step611;

                  try {
                    for (_iterator611.s(); !(_step611 = _iterator611.n()).done;) {
                      var _t489 = _step611.value;
                      e.markInlineFormat(_t489, {
                        commandName: "link",
                        commandParams: [i]
                      });
                    }
                  } catch (err) {
                    _iterator611.e(err);
                  } finally {
                    _iterator611.f();
                  }
                });
              }), e.enableCommand("unlink", function () {
                var n = _this510.editor.model,
                    i = n.document.selection;
                n.change(function () {
                  var n = [];
                  n = i.isCollapsed ? [ng(i.getFirstPosition(), "linkHref", i.getAttribute("linkHref"), t.model)] : tS("linkHref", i.getFirstRange(), t.model);

                  var _iterator612 = _createForOfIteratorHelper(n),
                      _step612;

                  try {
                    for (_iterator612.s(); !(_step612 = _iterator612.n()).done;) {
                      var _t490 = _step612.value;
                      e.markInlineFormat(_t490, {
                        commandName: "unlink",
                        commandParams: []
                      });
                    }
                  } catch (err) {
                    _iterator612.e(err);
                  } finally {
                    _iterator612.f();
                  }
                });
              }), e._descriptionFactory.registerDescriptionCallback(function (e) {
                var n = e.data,
                    i = t.locale.t;
                if (n) return "link" == n.commandName ? {
                  type: "format",
                  content: i("*Set link:* %0", '"' + n.commandParams[0] + '"')
                } : "unlink" == n.commandName ? {
                  type: "format",
                  content: i("*Remove link*")
                } : void 0;
              });
            }
          }]);

          return jS;
        }(r);

        var BS = /*#__PURE__*/function (_r212) {
          _inherits(BS, _r212);

          var _super366 = _createSuper(BS);

          function BS() {
            _classCallCheck(this, BS);

            return _super366.apply(this, arguments);
          }

          _createClass(BS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("ListEditing")) return;
              var e = t.plugins.get("TrackChangesEditing"),
                  n = t.plugins.has("TodoListEditing");

              function i(n) {
                return function () {
                  var i = t.model.document.selection,
                      o = t.commands.get(n);
                  if (o.value) return void t.execute("paragraph", {});

                  var r = n.slice(0, -4),
                      s = function (t, e, n) {
                    var i = Array.from(t).filter(function (t) {
                      return function (t, e) {
                        return e.checkChild(t.parent, "listItem") && !e.isObject(t);
                      }(t, n);
                    });
                    i = i.filter(function (t) {
                      return !t.is("element", "listItem") || t.getAttribute("listType") != e;
                    });
                    var o = new Set();

                    var _iterator613 = _createForOfIteratorHelper(i),
                        _step613;

                    try {
                      for (_iterator613.s(); !(_step613 = _iterator613.n()).done;) {
                        var _t491 = _step613.value;
                        _t491.is("element", "listItem") ? o.add(LS(_t491)) : o.add(_t491);
                      }
                    } catch (err) {
                      _iterator613.e(err);
                    } finally {
                      _iterator613.f();
                    }

                    return Array.from(o);
                  }(i.getSelectedBlocks(), r, t.model.schema);

                  t.model.change(function () {
                    var _iterator614 = _createForOfIteratorHelper(s),
                        _step614;

                    try {
                      for (_iterator614.s(); !(_step614 = _iterator614.n()).done;) {
                        var _t492 = _step614.value;
                        e.markBlockFormat(_t492, {
                          commandName: n,
                          commandParams: [{
                            forceValue: !o.value
                          }],
                          formatGroupId: "blockName"
                        }, zS(_t492));
                      }
                    } catch (err) {
                      _iterator614.e(err);
                    } finally {
                      _iterator614.f();
                    }
                  });
                };
              }

              function o(n) {
                return function () {
                  var i = function (t) {
                    var e = (t = Array.from(t)).findIndex(function (t) {
                      return "listItem" != t.name;
                    });
                    return e > -1 && (t = t.slice(0, e)), t;
                  }(t.model.document.selection.getSelectedBlocks()),
                      o = t.model.createRange(t.model.createPositionAt(i[0], "before"), t.model.createPositionAt(i[i.length - 1], "end"));

                  t.model.change(function () {
                    e.markBlockFormat(o, {
                      commandName: n,
                      commandParams: [],
                      formatGroupId: "listIndent"
                    }, function (t) {
                      var e = new Set();

                      var _iterator615 = _createForOfIteratorHelper(t),
                          _step615;

                      try {
                        for (_iterator615.s(); !(_step615 = _iterator615.n()).done;) {
                          var _n369 = _step615.value;
                          var _t493 = _n369.nextSibling;

                          for (; _t493 && _t493.getAttribute("listIndent") > _n369.getAttribute("listIndent");) {
                            e.add(_t493), _t493 = _t493.nextSibling;
                          }
                        }
                      } catch (err) {
                        _iterator615.e(err);
                      } finally {
                        _iterator615.f();
                      }

                      return Array.from(e);
                    }(i));
                  });
                };
              }

              e.enableCommand("numberedList", i("numberedList")), e.enableCommand("bulletedList", i("bulletedList")), n && e.enableCommand("todoList", i("todoList")), e.enableCommand("indentList", o("indentList")), e.enableCommand("outdentList", o("outdentList")), n && e.enableCommand("checkTodoList", function () {
                var n = t.commands.get("checkTodoList"),
                    i = Array.from(n._selectedElements);
                i.filter(function (t) {
                  return t.getAttribute("todoListChecked") != n.value;
                }), t.model.change(function () {
                  var _iterator616 = _createForOfIteratorHelper(i),
                      _step616;

                  try {
                    for (_iterator616.s(); !(_step616 = _iterator616.n()).done;) {
                      var _t494 = _step616.value;
                      e.markBlockFormat(_t494, {
                        commandName: "checkTodoList",
                        commandParams: [{
                          forceValue: !n.value
                        }]
                      });
                    }
                  } catch (err) {
                    _iterator616.e(err);
                  } finally {
                    _iterator616.f();
                  }
                });
              });
              var r = t.locale.t;
              e._descriptionFactory.registerElementLabel("listItem", function (t) {
                return r({
                  string: "list item",
                  plural: "%0 list items",
                  id: "ELEMENT_LIST_ITEM"
                }, t);
              }), e._descriptionFactory.registerDescriptionCallback(function (t) {
                var e = t.data;

                if (e) {
                  if ("numberedList" == e.commandName || "bulletedList" == e.commandName || "todoList" == e.commandName) switch (e.commandName.replace("List", "")) {
                    case "bulleted":
                      return n(r({
                        string: "bulleted list",
                        id: "ELEMENT_BULLETED_LIST"
                      }));

                    case "numbered":
                      return n(r({
                        string: "numbered list",
                        id: "ELEMENT_NUMBERED_LIST"
                      }));

                    case "todo":
                      return n(r({
                        string: "to-do list",
                        id: "ELEMENT_TODO_LIST"
                      }));
                  }
                  if ("indentList" == e.commandName) return {
                    type: "format",
                    content: r("*Indent:* %0", r({
                      string: "list item",
                      id: "ELEMENT_LIST_ITEM"
                    }))
                  };
                  if ("outdentList" == e.commandName) return {
                    type: "format",
                    content: r("*Outdent:* %0", r({
                      string: "list item",
                      id: "ELEMENT_LIST_ITEM"
                    }))
                  };
                  if ("checkTodoList" == e.commandName) return e.commandParams[0].forceValue ? {
                    type: "format",
                    content: r("*Check item*")
                  } : {
                    type: "format",
                    content: r("*Uncheck item*")
                  };
                }

                function n(t) {
                  return {
                    type: "format",
                    content: r("*Change to:* %0", t)
                  };
                }
              });
            }
          }]);

          return BS;
        }(r);

        function LS(t) {
          var e = t.getAttribute("listIndent");
          if (0 == e) return t;
          var n = t;

          for (; t.previousSibling && t.previousSibling.is("element", "listItem");) {
            var _i295 = t.previousSibling.getAttribute("listIndent");

            if (_i295 == e) n = t.previousSibling;else if (_i295 < e) break;
            t = t.previousSibling;
          }

          return n;
        }

        function zS(t) {
          var e = [];

          if (t.is("element", "listItem") && t.getAttribute("listIndent") > 0) {
            var _n370 = t.nextSibling;

            for (; _n370 && "listItem" == _n370.name && _n370.getAttribute("listIndent") == t.getAttribute("listIndent");) {
              e.push(_n370), _n370 = _n370.nextSibling;
            }
          }

          return e;
        }

        n(411);

        var FS = /*#__PURE__*/function (_r213) {
          _inherits(FS, _r213);

          var _super367 = _createSuper(FS);

          function FS() {
            _classCallCheck(this, FS);

            return _super367.apply(this, arguments);
          }

          _createClass(FS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("MediaEmbedEditing")) return;
              var e = t.plugins.get("TrackChangesEditing"),
                  n = t.locale.t;
              e.enableCommand("mediaEmbed"), e._descriptionFactory.registerElementLabel("media", function (t) {
                return n({
                  string: "media item",
                  plural: "%0 media items",
                  id: "ELEMENT_MEDIA"
                }, t);
              }), t.conversion["for"]("dataDowncast").elementToElement({
                model: "media",
                view: function view(t, _ref150) {
                  var e = _ref150.writer,
                      n = _ref150.options;
                  if (n.showSuggestionHighlights) return e.createEmptyElement("div");
                },
                converterPriority: "high"
              }), t.data.downcastDispatcher.on("attribute:url:media", function (t, e, n) {
                n.options.showSuggestionHighlights && t.stop();
              }, {
                priority: "high"
              });
            }
          }]);

          return FS;
        }(r);

        var VS = ["enableCommand", "editor", "plugins", "TrackChangesEditing", "has", "get", "mention", "MentionEditing"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(VS, 397);

        var US = function US(t, e) {
          return VS[t -= 0];
        };

        var HS = /*#__PURE__*/function (_r214) {
          _inherits(HS, _r214);

          var _super368 = _createSuper(HS);

          function HS() {
            _classCallCheck(this, HS);

            return _super368.apply(this, arguments);
          }

          _createClass(HS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this[US("0x4")];
              t[US("0x5")][US("0x7")](US("0x2")) && t[US("0x5")][US("0x0")](US("0x6"))[US("0x3")](US("0x1"));
            }
          }]);

          return HS;
        }(r);

        n(413);

        var qS = /*#__PURE__*/function (_r215) {
          _inherits(qS, _r215);

          var _super369 = _createSuper(qS);

          function qS() {
            _classCallCheck(this, qS);

            return _super369.apply(this, arguments);
          }

          _createClass(qS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("PageBreakEditing")) return;
              t.plugins.get("TrackChangesEditing").enableCommand("pageBreak");
              var e = t.plugins.get("TrackChangesEditing"),
                  n = t.locale.t;

              e._descriptionFactory.registerElementLabel("pageBreak", function (t) {
                return n({
                  string: "page break",
                  plural: "%0 page breaks",
                  id: "ELEMENT_PAGE_BREAK"
                }, t);
              });
            }
          }]);

          return qS;
        }(r);

        var WS = /*#__PURE__*/function (_r216) {
          _inherits(WS, _r216);

          var _super370 = _createSuper(WS);

          function WS() {
            _classCallCheck(this, WS);

            return _super370.apply(this, arguments);
          }

          _createClass(WS, [{
            key: "afterInit",
            value: function afterInit() {
              var _this511 = this;

              var t = this.editor;
              if (!t.plugins.has("Paragraph")) return;
              var e = t.locale.t,
                  n = t.plugins.get("TrackChangesEditing");
              n._descriptionFactory.registerElementLabel("paragraph", function (t) {
                return e({
                  string: "paragraph",
                  plural: "%0 paragraphs",
                  id: "ELEMENT_PARAGRAPH"
                }, t);
              }), n.enableCommand("paragraph", function (e) {
                var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                var o = t.model.document,
                    r = i.selection || o.selection,
                    s = Array.from(r.getSelectedBlocks()).filter(function (t) {
                  return function (t, e) {
                    return e.checkChild(t.parent, "paragraph") && !e.isObject(t) && "paragraph" != t.name;
                  }(t, _this511.editor.model.schema);
                });
                t.model.change(function () {
                  var _iterator617 = _createForOfIteratorHelper(s),
                      _step617;

                  try {
                    for (_iterator617.s(); !(_step617 = _iterator617.n()).done;) {
                      var _t495 = _step617.value;
                      n.markBlockFormat(_t495, {
                        commandName: "paragraph",
                        commandParams: [],
                        formatGroupId: "blockName"
                      }, eS(_t495));
                    }
                  } catch (err) {
                    _iterator617.e(err);
                  } finally {
                    _iterator617.f();
                  }
                });
              }), n._descriptionFactory.registerDescriptionCallback(function (t) {
                var n = t.data;
                if (n && "paragraph" == n.commandName) return {
                  type: "format",
                  content: e("*Change to:* %0", e({
                    string: "paragraph",
                    plural: "%0 paragraphs",
                    id: "ELEMENT_PARAGRAPH"
                  }))
                };
              }), n.enableCommand("insertParagraph"), t.editing.downcastDispatcher.on("addMarker:suggestion:insertion", $S(t), {
                priority: "highest"
              }), t.data.downcastDispatcher.on("addMarker:suggestion:insertion", function (e, n, i) {
                i.options.showSuggestionHighlights && $S(t, {
                  showActiveMarker: !1
                })(e, n, i);
              }, {
                priority: "highest"
              });
              var i = n._descriptionFactory;
              i.registerDescriptionCallback(function (n) {
                if ("insertion" !== n.type) return;

                var _n$getFirstRange = n.getFirstRange(),
                    o = _n$getFirstRange.start,
                    r = _n$getFirstRange.end;

                if (!o.isTouching(r) || !o.nodeAfter) return;
                var s = t.model.schema,
                    a = o.nodeAfter;
                return s.isBlock(a) && !s.isLimit(a) && s.checkChild(a, "$text") ? {
                  type: "insertion",
                  content: e("*Insert:* %0", i.getItemLabel(a.name, 1))
                } : void 0;
              });
            }
          }]);

          return WS;
        }(r);

        function $S(t) {
          var _ref151 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
              _ref151$showActiveMar = _ref151.showActiveMarker,
              e = _ref151$showActiveMar === void 0 ? !0 : _ref151$showActiveMar;

          return function (n, i, o) {
            var r = t.plugins.get("TrackChangesEditing"),
                s = i.markerRange.start,
                a = i.markerRange.end,
                c = t.model.schema;
            if (!s.isTouching(a) || !s.nodeAfter) return;
            var l = s.nodeAfter;

            if (c.isBlock(l) && !c.isLimit(l) && c.checkChild(l, "$text")) {
              if (!o.consumable.consume(i.markerRange, n.name)) return;

              var _t496 = o.writer.createUIElement("span", {
                "class": "ck-suggestion-marker-split"
              }),
                  _s60 = o.mapper.toViewPosition(a);

              e && r.activeMarkers.includes(i.markerName) && o.writer.addClass("ck-suggestion-marker--active", _t496), o.writer.insert(_s60, _t496), o.mapper.bindElementToMarker(_t496, i.markerName);
            }
          };
        }

        var YS = /*#__PURE__*/function (_r217) {
          _inherits(YS, _r217);

          var _super371 = _createSuper(YS);

          function YS() {
            _classCallCheck(this, YS);

            return _super371.apply(this, arguments);
          }

          _createClass(YS, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("RemoveFormatEditing")) return;
              var e = t.plugins.get("TrackChangesEditing");
              e.enableCommand("removeFormat", function (n) {
                var i = t.model.document.selection;
                i.isCollapsed ? n() : t.model.change(function () {
                  var n = Array.from(i.getRanges());

                  for (var _i296 = 0, _n371 = n; _i296 < _n371.length; _i296++) {
                    var _i297 = _n371[_i296];

                    var _iterator618 = _createForOfIteratorHelper(_i297.getItems()),
                        _step618;

                    try {
                      for (_iterator618.s(); !(_step618 = _iterator618.n()).done;) {
                        var _n372 = _step618.value;
                        JS(_n372, t.model.schema) && e.markInlineFormat(t.model.createRangeOn(_n372), {
                          commandName: "removeFormat",
                          commandParams: []
                        });
                      }
                    } catch (err) {
                      _iterator618.e(err);
                    } finally {
                      _iterator618.f();
                    }
                  }
                });
              });
              var n = t.locale.t;

              e._descriptionFactory.registerDescriptionCallback(function (t) {
                var e = t.data;
                if (e && "removeFormat" == e.commandName) return {
                  type: "format",
                  content: n("*Remove all formatting*")
                };
              });
            }
          }]);

          return YS;
        }(r);

        function JS(t, e) {
          var _iterator619 = _createForOfIteratorHelper(t.getAttributes()),
              _step619;

          try {
            for (_iterator619.s(); !(_step619 = _iterator619.n()).done;) {
              var _step619$value = _slicedToArray(_step619.value, 1),
                  _n373 = _step619$value[0];

              var _t497 = e.getAttributeProperties(_n373);

              if (_t497 && _t497.isFormatting) return !0;
            }
          } catch (err) {
            _iterator619.e(err);
          } finally {
            _iterator619.f();
          }

          return !1;
        }

        var GS = ["RestrictedEditingModeEditing", "acceptSelectedSuggestions", "enableCommand", "editor", "acceptAllSuggestions", "TrackChangesEditing", "has", "plugins", "afterInit", "get", "discardSelectedSuggestions", "trackChanges", "discardAllSuggestions"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(GS, 161);

        var KS = function KS(t, e) {
          return GS[t -= 0];
        };

        var QS = /*#__PURE__*/function (_r218, _KS) {
          _inherits(QS, _r218);

          var _super372 = _createSuper(QS);

          function QS() {
            _classCallCheck(this, QS);

            return _super372.apply(this, arguments);
          }

          _createClass(QS, [{
            key: _KS,
            value: function value() {
              var t = this[KS("0xb")];
              if (!t[KS("0x2")][KS("0x1")]("RestrictedEditingModeEditing")) return;
              var e = t[KS("0x2")][KS("0x4")](KS("0x0"));
              e.enableCommand("goToPreviousRestrictedEditingException"), e[KS("0xa")]("goToNextRestrictedEditingException");
              var n = t[KS("0x2")][KS("0x4")](KS("0x8"));
              n[KS("0xa")](KS("0x6")), n.enableCommand("acceptSuggestion"), n[KS("0xa")]("discardSuggestion"), n[KS("0xa")](KS("0xc")), n.enableCommand(KS("0x7")), n[KS("0xa")](KS("0x9")), n[KS("0xa")](KS("0x5"));
            }
          }]);

          return QS;
        }(r, KS("0x3"));

        var XS = ["enableCommand", "selectAll", "afterInit", "SelectAll", "editor", "plugins", "get"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(XS, 456);

        var ZS = function ZS(t, e) {
          return XS[t -= 0];
        };

        var tI = /*#__PURE__*/function (_r219, _ZS) {
          _inherits(tI, _r219);

          var _super373 = _createSuper(tI);

          function tI() {
            _classCallCheck(this, tI);

            return _super373.apply(this, arguments);
          }

          _createClass(tI, [{
            key: _ZS,
            value: function value() {
              var t = this[ZS("0x3")];
              t[ZS("0x4")].has(ZS("0x2")) && t[ZS("0x4")][ZS("0x5")]("TrackChangesEditing")[ZS("0x6")](ZS("0x0"));
            }
          }]);

          return tI;
        }(r, ZS("0x1"));

        var eI = /*#__PURE__*/function (_r220) {
          _inherits(eI, _r220);

          var _super374 = _createSuper(eI);

          function eI() {
            _classCallCheck(this, eI);

            return _super374.apply(this, arguments);
          }

          _createClass(eI, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.plugins.get("TrackChangesEditing"),
                  n = t.t;
              e.enableCommand("shiftEnter"), t.editing.downcastDispatcher.on("addMarker:suggestion:insertion", nI(t), {
                priority: "high"
              }), t.editing.downcastDispatcher.on("addMarker:suggestion:deletion", nI(t), {
                priority: "high"
              }), t.data.downcastDispatcher.on("addMarker:suggestion", function (e, n, i) {
                i.options.showSuggestionHighlights && nI(t, {
                  showActiveMarker: !1
                })(e, n, i);
              }), e._descriptionFactory.registerElementLabel("softBreak", function (t) {
                return n({
                  id: "ELEMENT_LINE_BREAK",
                  string: "line break",
                  plural: "%0 line breaks"
                }, t);
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [Of];
            }
          }]);

          return eI;
        }(r);

        function nI(t) {
          var _ref152 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
              _ref152$showActiveMar = _ref152.showActiveMarker,
              e = _ref152$showActiveMar === void 0 ? !0 : _ref152$showActiveMar;

          return function (n, i, o) {
            var r = t.plugins.get("TrackChangesEditing");
            if (!o.consumable.test(i.markerRange, n.name)) return;
            var s = t.model;

            var _iterator620 = _createForOfIteratorHelper(i.markerRange.getItems()),
                _step620;

            try {
              for (_iterator620.s(); !(_step620 = _iterator620.n()).done;) {
                var _t498 = _step620.value;
                if (!_t498.is("element", "softBreak")) continue;

                var _n374 = "deletion" == i.markerName.split(":")[1] ? "merge" : "split",
                    _a92 = o.writer.createUIElement("span", {
                  "class": "ck-suggestion-marker-" + _n374
                }),
                    _c27 = o.mapper.toViewPosition(s.createPositionBefore(_t498));

                e && r.activeMarkers.includes(i.markerName) && o.writer.addClass("ck-suggestion-marker--active", _a92), o.writer.insert(_c27, _a92), o.mapper.bindElementToMarker(_a92, i.markerName);
              }
            } catch (err) {
              _iterator620.e(err);
            } finally {
              _iterator620.f();
            }
          };
        }

        var iI = /*#__PURE__*/function (_r221) {
          _inherits(iI, _r221);

          var _super375 = _createSuper(iI);

          function iI() {
            _classCallCheck(this, iI);

            return _super375.apply(this, arguments);
          }

          _createClass(iI, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor,
                  e = t.model;
              if (!t.plugins.has("StandardEditingModeEditing")) return;
              var n = t.plugins.get("TrackChangesEditing"),
                  i = "restrictedEditingException",
                  o = t.commands.get(i);
              n.enableCommand(i, function (t) {
                var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                var s = e.document.selection;
                if (s.isCollapsed) return void t(r);
                var a = void 0 !== r.forceValue ? r.forceValue : !o.value;
                e.change(function () {
                  var t = Array.from(s.getRanges());

                  for (var _i298 = 0, _t499 = t; _i298 < _t499.length; _i298++) {
                    var _o158 = _t499[_i298];

                    var _t500 = a ? [_o158] : tS(i, _o158, e);

                    var _iterator621 = _createForOfIteratorHelper(_t500),
                        _step621;

                    try {
                      for (_iterator621.s(); !(_step621 = _iterator621.n()).done;) {
                        var _e431 = _step621.value;
                        n.markInlineFormat(_e431, {
                          commandName: i,
                          commandParams: [{
                            forceValue: a
                          }]
                        });
                      }
                    } catch (err) {
                      _iterator621.e(err);
                    } finally {
                      _iterator621.f();
                    }
                  }
                });
              });
              var r = t.t;

              n._descriptionFactory.registerDescriptionCallback(function (t) {
                var e = t.data;
                if (e && e.commandName == i) return e.commandParams[0].forceValue ? {
                  type: "format",
                  content: r({
                    string: "*Enable in restricted editing mode*",
                    id: "FORMAT_RESTRICTED_ENABLED"
                  })
                } : {
                  type: "format",
                  content: r({
                    string: "*Disable in restricted editing mode*",
                    id: "FORMAT_RESTRICTED_DISABLED"
                  })
                };
              });
            }
          }]);

          return iI;
        }(r);

        n(415);

        var oI = /*#__PURE__*/function (_r222) {
          _inherits(oI, _r222);

          var _super376 = _createSuper(oI);

          function oI(t) {
            var _this512;

            _classCallCheck(this, oI);

            _this512 = _super376.call(this, t), _this512._tablePostFixingSubtypes = ["tableRow", "tableColumn"];
            return _this512;
          }

          _createClass(oI, [{
            key: "afterInit",
            value: function afterInit() {
              var _this513 = this;

              var t = this.editor,
                  e = t.model.document.selection;
              if (!t.plugins.has("TableEditing")) return;
              var n = t.locale.t,
                  i = t.plugins.get("TrackChangesEditing"),
                  o = t.plugins.get("TableUtils");
              i._descriptionFactory.registerElementLabel("table", function (t) {
                return n({
                  string: "table",
                  plural: "%0 tables",
                  id: "ELEMENT_TABLE"
                }, t);
              }), this._setupColumnsRowsFixing(), i.enableCommand("insertTable"), i.enableCommand("selectTableRow"), i.enableCommand("selectTableColumn");

              var _loop16 = function _loop16() {
                var n = _arr5[_i299];
                var o = t.commands.get(n);
                i.enableCommand(n, function (n) {
                  t.model.change(function (t) {
                    n();
                    var r = "above" === o.order,
                        s = g_(e),
                        a = m_(s),
                        c = r ? a.first - 1 : a.last + 1,
                        l = s[0].findAncestor("table"),
                        d = new Zk(l, {
                      startRow: c,
                      endRow: c
                    }),
                        u = Array.from(d).map(function (e) {
                      return t.createRangeOn(e.cell);
                    });
                    i.markMultiRangeInsertion(u, "tableRow");
                  });
                });
              };

              for (var _i299 = 0, _arr5 = ["insertTableRowAbove", "insertTableRowBelow"]; _i299 < _arr5.length; _i299++) {
                _loop16();
              }

              var _loop17 = function _loop17() {
                var n = _arr6[_i300];
                var o = t.commands.get(n);
                i.enableCommand(n, function (n) {
                  t.model.change(function (t) {
                    n();
                    var r = "left" === o.order,
                        s = g_(e),
                        a = p_(s),
                        c = r ? a.first - 1 : a.last + 1,
                        l = s[0].findAncestor("table"),
                        d = new Zk(l, {
                      startRow: 0,
                      column: c,
                      includeAllSlots: !1
                    }),
                        u = Array.from(d).map(function (e) {
                      return t.createRangeOn(e.cell);
                    });
                    i.markMultiRangeInsertion(u, "tableColumn");
                  });
                });
              };

              for (var _i300 = 0, _arr6 = ["insertTableColumnLeft", "insertTableColumnRight"]; _i300 < _arr6.length; _i300++) {
                _loop17();
              }

              var _loop18 = function _loop18() {
                var n = _arr7[_i301];
                var r = n.substr(11),
                    s = r.toLowerCase(),
                    a = s.substr(0, 3) + "span",
                    c = "table" + r,
                    l = "min" + r,
                    d = "max" + r;
                i.enableCommand(n, function () {
                  t.model.change(function (t) {
                    var r = g_(e),
                        u = r[0].findAncestor("table");
                    var h;

                    if ("removeTableRow" == n) {
                      var _t501 = m_(r);

                      h = {
                        startRow: _t501.first,
                        endRow: _t501.last,
                        includeAllSlots: !0
                      };
                    } else {
                      var _t502 = p_(r);

                      h = {
                        startColumn: _t502.first,
                        endColumn: _t502.last,
                        includeAllSlots: !0
                      };
                    }

                    var f = new Zk(u, h),
                        g = Array.from(f).map(function (_ref153) {
                      var t = _ref153.cell;
                      return t;
                    }),
                        m = rI(g.filter(function (t) {
                      return t.hasAttribute(a);
                    })),
                        p = rI(g.filter(function (t) {
                      return !t.hasAttribute(a);
                    })).map(function (e) {
                      return t.createRangeOn(e);
                    }),
                        b = i.markMultiRangeDeletion(p, c);

                    if (b && ("tableRow" == b.subType || "tableColumn" == b.subType)) {
                      var _e432 = _this513._getSuggestionCoords(b);

                      var _iterator622 = _createForOfIteratorHelper(m),
                          _step622;

                      try {
                        for (_iterator622.s(); !(_step622 = _iterator622.n()).done;) {
                          var _n375 = _step622.value;

                          var _i302 = t.createRangeOn(_n375),
                              _r223 = o.getCellLocation(_n375),
                              _c28 = _n375.getAttribute(a) - 1,
                              _u7 = _e432[l],
                              _h6 = _e432[d];

                          _u7 <= _r223[s] && _r223[s] + _c28 <= _h6 && b.addRange(_i302);
                        }
                      } catch (err) {
                        _iterator622.e(err);
                      } finally {
                        _iterator622.f();
                      }
                    }
                  });
                });
              };

              for (var _i301 = 0, _arr7 = ["removeTableRow", "removeTableColumn"]; _i301 < _arr7.length; _i301++) {
                _loop18();
              }

              function r(n) {
                var i = Array.from(e.getRanges()).map(function (t) {
                  return fa.fromRange(t);
                });
                t.model.change(function (e) {
                  var o = e.batch;
                  n = n.filter(function (t) {
                    return "$graveyard" != t.root.rootName;
                  }), e.setSelection(n), t.commands.get("removeTableRow").refresh(), t.execute("removeTableRow", {
                    forceDefaultExecution: !0
                  }), t.model.enqueueChange(function () {
                    t.model.enqueueChange(o, function (t) {
                      var e = i.filter(function (t) {
                        return "$graveyard" != t.root.rootName;
                      });
                      e.length > 0 && t.setSelection(e);

                      var _iterator623 = _createForOfIteratorHelper(i),
                          _step623;

                      try {
                        for (_iterator623.s(); !(_step623 = _iterator623.n()).done;) {
                          var _t503 = _step623.value;

                          _t503.detach();
                        }
                      } catch (err) {
                        _iterator623.e(err);
                      } finally {
                        _iterator623.f();
                      }
                    });
                  });
                });
              }

              function s(n) {
                t.model.change(function (i) {
                  var o = Array.from(e.getRanges()).map(function (t) {
                    return fa.fromRange(t);
                  }),
                      r = [];

                  var _iterator624 = _createForOfIteratorHelper(n),
                      _step624;

                  try {
                    for (_iterator624.s(); !(_step624 = _iterator624.n()).done;) {
                      var _t504 = _step624.value;

                      var _iterator626 = _createForOfIteratorHelper(_t504.getItems({
                        shallow: !0
                      })),
                          _step626;

                      try {
                        for (_iterator626.s(); !(_step626 = _iterator626.n()).done;) {
                          var _e434 = _step626.value;
                          r.push(_e434);
                        }
                      } catch (err) {
                        _iterator626.e(err);
                      } finally {
                        _iterator626.f();
                      }
                    }
                  } catch (err) {
                    _iterator624.e(err);
                  } finally {
                    _iterator624.f();
                  }

                  for (var _i303 = 0, _r224 = r; _i303 < _r224.length; _i303++) {
                    var _e433 = _r224[_i303];
                    "$graveyard" != _e433.root.rootName && (i.setSelection(i.createPositionAt(_e433, 0)), t.commands.get("removeTableColumn").refresh(), t.execute("removeTableColumn", {
                      forceDefaultExecution: !0
                    }));
                  }

                  var s = o.filter(function (t) {
                    return "$graveyard" != t.root.rootName;
                  });
                  s.length > 0 && i.setSelection(s);

                  var _iterator625 = _createForOfIteratorHelper(o),
                      _step625;

                  try {
                    for (_iterator625.s(); !(_step625 = _iterator625.n()).done;) {
                      var _t505 = _step625.value;

                      _t505.detach();
                    }
                  } catch (err) {
                    _iterator625.e(err);
                  } finally {
                    _iterator625.f();
                  }
                });
              }

              function a(t, e) {
                return e.every(function (e) {
                  return t.some(function (t) {
                    return t.end.isEqual(e.start) || e.end.isEqual(t.start);
                  });
                });
              }

              function c(t, e) {
                return t.some(function (t) {
                  return e.some(function (e) {
                    return t.end.isTouching(e.start);
                  });
                });
              }

              t.data.downcastDispatcher.on("addMarker:suggestion", function (t, e, n) {
                if (!n.options.showSuggestionHighlights) return;
                var i = e.item;
                if (!i) return;
                var o = n.mapper.toViewElement(i);

                function r(t) {
                  return Array.isArray(t) ? t : [t];
                }

                o && "tableCell" === i.name && Qh(o, n.writer, function (t, e, n) {
                  return n.addClass(r(e.classes), t);
                }, function (t, e, n) {
                  return n.removeClass(r(e.classes), t);
                });
              }, {
                priority: "highest"
              }), i._descriptionFactory.registerDescriptionCallback(function (t) {
                if ("insertion" != t.type && "deletion" != t.type) return;
                var e = t.getContainedElement();

                if (null != e && e.is("element", "table")) {
                  if ("insertion" == t.type) {
                    var _e435 = t.getItems().filter(function (t) {
                      return t.is("textProxy");
                    }).map(function (t) {
                      return t.data;
                    });

                    if (_e435.length) return {
                      type: "insertion",
                      content: n("*Insert:* %0", n({
                        string: "table *with text* %0",
                        id: "ELEMENT_TABLE_WITH_TEXT"
                      }, '"' + _e435.join(" ") + '"'))
                    };
                  }

                  if ("deletion" == t.type) {
                    var _e436 = t.getItems().filter(function (t) {
                      return t.is("textProxy");
                    }).map(function (t) {
                      return t.data;
                    });

                    if (_e436.length) return {
                      type: "deletion",
                      content: n("*Remove:* %0", n({
                        string: "table *with text* %0",
                        id: "ELEMENT_TABLE_WITH_TEXT"
                      }, '"' + _e436.join(" ") + '"'))
                    };
                  }
                }
              }), i._descriptionFactory.registerDescriptionCallback(function (t) {
                if ("tableRow" == t.subType) {
                  var _e437 = t.getItems().filter(function (t) {
                    return t.is("textProxy");
                  }).map(function (t) {
                    return t.data;
                  }),
                      _i304 = _this513._getSuggestionCoords(t),
                      _o159 = _i304.maxRow - _i304.minRow + 1;

                  if ("insertion" == t.type) return _e437.length ? {
                    type: "insertion",
                    content: n("*Insert:* %0", n({
                      string: "table row *with text* %1",
                      plural: "%0 table rows *with text* %1",
                      id: "ELEMENT_TABLE_ROW_WITH_TEXT"
                    }, [_o159, '"' + _e437.join(" ") + '"']))
                  } : {
                    type: "insertion",
                    content: n("*Insert:* %0", n({
                      string: "table row",
                      plural: "%0 table rows",
                      id: "ELEMENT_TABLE_ROW"
                    }, _o159))
                  };
                  if ("deletion" == t.type) return _e437.length ? {
                    type: "deletion",
                    content: n("*Remove:* %0", n({
                      string: "table row *with text* %1",
                      plural: "%0 table rows *with text* %1",
                      id: "ELEMENT_TABLE_ROW_WITH_TEXT"
                    }, [_o159, '"' + _e437.join(" ") + '"']))
                  } : {
                    type: "deletion",
                    content: n("*Remove:* %0", n({
                      string: "table row",
                      plural: "%0 table rows",
                      id: "ELEMENT_TABLE_ROW"
                    }, _o159))
                  };
                }

                if ("tableColumn" == t.subType) {
                  var _e438 = t.getItems().filter(function (t) {
                    return t.is("textProxy");
                  }).map(function (t) {
                    return t.data;
                  }),
                      _i305 = _this513._getSuggestionCoords(t),
                      _o160 = _i305.maxColumn - _i305.minColumn + 1;

                  if ("insertion" == t.type) return _e438.length ? {
                    type: "insertion",
                    content: n("*Insert:* %0", n({
                      string: "table column *with text* %1",
                      plural: "%0 table columns *with text* %1",
                      id: "ELEMENT_TABLE_COLUMN_WITH_TEXT"
                    }, [_o160, '"' + _e438.join(" ") + '"']))
                  } : {
                    type: "insertion",
                    content: n("*Insert:* %0", n({
                      string: "table column",
                      plural: "%0 table columns",
                      id: "ELEMENT_TABLE_COLUMN"
                    }, _o160))
                  };
                  if ("deletion" == t.type) return _e438.length ? {
                    type: "deletion",
                    content: n("*Remove:* %0", n({
                      string: "table column *with text* %1",
                      plural: "%0 table columns *with text* %1",
                      id: "ELEMENT_TABLE_COLUMN_WITH_TEXT"
                    }, [_o160, '"' + _e438.join(" ") + '"']))
                  } : {
                    type: "deletion",
                    content: n("*Remove:* %0", n({
                      string: "table column",
                      plural: "%0 table columns",
                      id: "ELEMENT_TABLE_COLUMN"
                    }, _o160))
                  };
                }
              }), i._suggestionFactory.registerCustomCallback("insertion", "tableRow", "discard", r), i._suggestionFactory.registerCustomCallback("deletion", "tableRow", "accept", r), i._suggestionFactory.registerCustomCallback("insertion", "tableColumn", "discard", s), i._suggestionFactory.registerCustomCallback("deletion", "tableColumn", "accept", s), i._suggestionFactory.registerCustomCallback("insertion", "tableColumn", "join", a), i._suggestionFactory.registerCustomCallback("deletion", "tableColumn", "join", a), i._suggestionFactory.registerCustomCallback("insertion", "tableRow", "join", c), i._suggestionFactory.registerCustomCallback("deletion", "tableRow", "join", c);
            }
          }, {
            key: "_acceptFormatSuggestionCallbackFactory",
            value: function _acceptFormatSuggestionCallbackFactory() {
              var t = this.editor,
                  e = t.model.document.selection;
              return function (n, i) {
                t.model.change(function (o) {
                  var r = i.commandName,
                      s = i.commandParams;
                  var a = n[0].end.nodeBefore;
                  s && s[0] && !1 === s[0].forceValue && (a = n[0].start.nodeAfter);
                  var c = o.createRangeIn(a);
                  if ("$graveyard" == c.root.rootName) return;
                  var l = Array.from(e.getRanges()).map(function (t) {
                    return fa.fromRange(t);
                  });
                  o.setSelection(c), t.commands.get(r).refresh(), s.push({
                    forceDefaultExecution: !0
                  }), t.execute.apply(t, [r].concat(_toConsumableArray(s)));
                  var d = l.filter(function (t) {
                    return "$graveyard" != t.root.rootName;
                  });
                  d.length > 0 && o.setSelection(d);

                  var _iterator627 = _createForOfIteratorHelper(l),
                      _step627;

                  try {
                    for (_iterator627.s(); !(_step627 = _iterator627.n()).done;) {
                      var _t506 = _step627.value;

                      _t506.detach();
                    }
                  } catch (err) {
                    _iterator627.e(err);
                  } finally {
                    _iterator627.f();
                  }
                });
              };
            }
          }, {
            key: "_getCoordsForCells",
            value: function _getCoordsForCells(t) {
              var e = this.editor.plugins.get("TableUtils");
              var n = Number.MAX_SAFE_INTEGER,
                  i = Number.MIN_SAFE_INTEGER,
                  o = Number.MAX_SAFE_INTEGER,
                  r = Number.MIN_SAFE_INTEGER;

              var _iterator628 = _createForOfIteratorHelper(t),
                  _step628;

              try {
                for (_iterator628.s(); !(_step628 = _iterator628.n()).done;) {
                  var _s61 = _step628.value;
                  if ("$graveyard" == _s61.root.rootName) continue;

                  var _e$getCellLocation2 = e.getCellLocation(_s61),
                      _t507 = _e$getCellLocation2.row,
                      _a93 = _e$getCellLocation2.column,
                      _c29 = _s61.hasAttribute("rowspan") ? _s61.getAttribute("rowspan") - 1 : 0,
                      _l16 = _s61.hasAttribute("colspan") ? _s61.getAttribute("colspan") - 1 : 0;

                  n = _t507 < n ? _t507 : n, i = _t507 + _c29 > i ? _t507 + _c29 : i, o = _a93 < o ? _a93 : o, r = _a93 + _l16 > r ? _a93 + _l16 : r;
                }
              } catch (err) {
                _iterator628.e(err);
              } finally {
                _iterator628.f();
              }

              return {
                minRow: n,
                maxRow: i,
                minColumn: o,
                maxColumn: r
              };
            }
          }, {
            key: "_setupColumnsRowsFixing",
            value: function _setupColumnsRowsFixing() {
              var _this514 = this;

              var t = this.editor,
                  e = t.plugins.get("TrackChangesEditing"),
                  n = t.plugins.get("TableUtils");
              this._tableSuggestions = new Set(), t.model.document.on("change:data", function () {
                var n = Array.from(t.model.document.differ.getChangedMarkers());

                for (var _i306 = 0, _n376 = n; _i306 < _n376.length; _i306++) {
                  var _n376$_i = _n376[_i306],
                      _t508 = _n376$_i.name,
                      _i307 = _n376$_i.data;

                  var _e$_splitMarkerName2 = e._splitMarkerName(_t508),
                      _n377 = _e$_splitMarkerName2.group,
                      _o161 = _e$_splitMarkerName2.id,
                      _r225 = _e$_splitMarkerName2.subType;

                  if ("suggestion" != _n377) continue;
                  if (null != _i307.oldRange) continue;

                  var _s62 = e.getSuggestion(_o161);

                  _this514._tablePostFixingSubtypes.includes(_r225) && _this514._tableSuggestions.add(_s62);
                }
              }, {
                priority: "low"
              });

              var i = function i(t, e) {
                var i = !1;
                var o = e.createRangeOn(t),
                    r = t.findAncestor("table"),
                    s = n.getCellLocation(t);

                var _iterator629 = _createForOfIteratorHelper(_this514._tableSuggestions),
                    _step629;

                try {
                  for (_iterator629.s(); !(_step629 = _iterator629.n()).done;) {
                    var _e439 = _step629.value;

                    var _n378 = _e439.subType,
                        _a94 = _n378.startsWith("tablePaste"),
                        _c30 = _n378.substr(_a94 ? 10 : 5),
                        _l17 = _c30.toLowerCase(),
                        _d12 = _l17.substr(0, 3) + "span",
                        _u8 = "min" + _c30,
                        _h7 = "max" + _c30;

                    if (!_e439.isInContent) continue;
                    if (r != _e439.getFirstRange().start.findAncestor("table")) continue;
                    if (_e439.isIntersectingWithRange(o)) continue;

                    var _f5 = t.hasAttribute(_d12) ? t.getAttribute(_d12) - 1 : 0,
                        _g4 = _this514._getSuggestionCoords(_e439),
                        _m2 = _g4[_u8],
                        _p2 = _g4[_h7];

                    _m2 <= s[_l17] && s[_l17] + _f5 <= _p2 && (_e439.addRange(o), i = !0);
                  }
                } catch (err) {
                  _iterator629.e(err);
                } finally {
                  _iterator629.f();
                }

                return i;
              };

              t.model.document.registerPostFixer(function (e) {
                var n = !1;

                var _iterator630 = _createForOfIteratorHelper(t.model.document.differ.getChanges()),
                    _step630;

                try {
                  for (_iterator630.s(); !(_step630 = _iterator630.n()).done;) {
                    var _o162 = _step630.value;
                    if ("insert" == _o162.type) if ("tableRow" == _o162.name) {
                      var _iterator631 = _createForOfIteratorHelper(_o162.position.nodeAfter.getChildren()),
                          _step631;

                      try {
                        for (_iterator631.s(); !(_step631 = _iterator631.n()).done;) {
                          var _t509 = _step631.value;
                          n = n || i(_t509, e);
                        }
                      } catch (err) {
                        _iterator631.e(err);
                      } finally {
                        _iterator631.f();
                      }
                    } else "tableCell" == _o162.name && (n = n || i(_o162.position.nodeAfter, e));
                  }
                } catch (err) {
                  _iterator630.e(err);
                } finally {
                  _iterator630.f();
                }

                return n;
              });
            }
          }, {
            key: "_getSuggestionCoords",
            value: function _getSuggestionCoords(t) {
              return this._getCoordsForCells(t.getRanges().map(function (t) {
                return t.start.nodeAfter;
              }));
            }
          }]);

          return oI;
        }(r);

        function rI(t) {
          return Array.from(new Set(t).values());
        }

        var sI = /*#__PURE__*/function (_r226) {
          _inherits(sI, _r226);

          var _super377 = _createSuper(sI);

          function sI() {
            _classCallCheck(this, sI);

            return _super377.apply(this, arguments);
          }

          _createClass(sI, [{
            key: "afterInit",
            value: function afterInit() {
              var _this515 = this;

              var t = this.editor,
                  e = t.model.document.selection;
              if (!t.plugins.has("TableEditing")) return;
              var n = t.locale.t,
                  i = t.plugins.get("TrackChangesEditing"),
                  o = t.plugins.get("TableUtils"),
                  r = t.plugins.get(oI);
              r._tablePostFixingSubtypes.push("mergeTableCells"), i.enableCommand("mergeTableCells", function () {
                var e = g_(t.model.document.selection);
                t.model.change(function () {
                  i.markMultiRangeBlockFormat(e, {
                    commandName: "mergeTableCells",
                    commandParams: []
                  }, [], "mergeTableCells");
                });
              }), t.commands.get("mergeTableCells").on("execute", function (e, n) {
                t.commands.get("trackChanges").value && (n.length > 0 && n[n.length - 1] && n[n.length - 1].forceDefaultExecution || i._isForcedDefaultExecutionBlock || _this515._areSelectedCellsMergable() || e.stop());
              }, {
                priority: "highest"
              });

              var _loop19 = function _loop19() {
                var e = _arr8[_i308];
                var n = t.commands.get(e);
                i.enableCommand(e, function () {
                  var e = t.model.document.selection.getFirstPosition().getAncestors().find(function (t) {
                    return t.is("element", "tableCell");
                  }),
                      o = n.value;
                  t.model.change(function () {
                    i.markMultiRangeBlockFormat([e, o], {
                      commandName: "mergeTableCells",
                      commandParams: []
                    }, [], "mergeTableCells");
                  });
                });
              };

              for (var _i308 = 0, _arr8 = ["mergeTableCellUp", "mergeTableCellRight", "mergeTableCellDown", "mergeTableCellLeft"]; _i308 < _arr8.length; _i308++) {
                _loop19();
              }

              var _loop20 = function _loop20() {
                var e = _arr9[_i309];
                var n = t.commands.get(e);
                i.enableCommand(e, function () {
                  var r = g_(t.model.document.selection)[0],
                      s = r.findAncestor("table"),
                      _o$getCellLocation = o.getCellLocation(r),
                      a = _o$getCellLocation.column,
                      c = _o$getCellLocation.row;

                  var l = [];

                  if ("horizontally" == n.direction) {
                    var _t510 = new Zk(s, {
                      startRow: c,
                      endRow: c,
                      includeAllSlots: !0
                    });

                    l = Array.from(_t510).map(function (t) {
                      return t.cell;
                    });
                  } else {
                    var _t511 = new Zk(s, {
                      column: a,
                      includeAllSlots: !0
                    });

                    l = Array.from(_t511).map(function (t) {
                      return t.cell;
                    });
                  }

                  t.model.change(function (t) {
                    i.markBlockFormat(t.createRangeOn(r), {
                      commandName: e,
                      commandParams: []
                    }, l, e);
                  });
                });
              };

              for (var _i309 = 0, _arr9 = ["splitTableCellVertically", "splitTableCellHorizontally"]; _i309 < _arr9.length; _i309++) {
                _loop20();
              }

              i._descriptionFactory.registerDescriptionCallback(function (t) {
                var e = t.data;
                if (e) return "mergeTableCells" == e.commandName ? {
                  type: "format",
                  content: n("*Merge cells*")
                } : void 0;
              }), i._descriptionFactory.registerDescriptionCallback(function (t) {
                var e = t.data;
                if (e) return "splitTableCellVertically" == e.commandName ? {
                  type: "format",
                  content: n("*Split cell:* vertically")
                } : "splitTableCellHorizontally" == e.commandName ? {
                  type: "format",
                  content: n("*Split cell:* horizontally")
                } : void 0;
              });

              var s = r._acceptFormatSuggestionCallbackFactory();

              for (var _i310 = 0, _arr10 = ["mergeTableCellUp", "mergeTableCellRight", "mergeTableCellDown", "mergeTableCellLeft"]; _i310 < _arr10.length; _i310++) {
                var _t512 = _arr10[_i310];

                i._suggestionFactory.registerCustomCallback("formatBlock", _t512, "accept", s);
              }

              for (var _i311 = 0, _arr11 = ["splitTableCellVertically", "splitTableCellHorizontally"]; _i311 < _arr11.length; _i311++) {
                var _t513 = _arr11[_i311];

                i._suggestionFactory.registerCustomCallback("formatBlock", _t513, "accept", s);
              }

              i._suggestionFactory.registerCustomCallback("formatBlock", "mergeTableCells", "accept", function (n) {
                t.model.change(function (i) {
                  var o = Array.from(e.getRanges()).map(function (t) {
                    return fa.fromRange(t);
                  });
                  i.setSelection(n), t.commands.get("mergeTableCells").refresh(), t.execute("mergeTableCells", {
                    forceDefaultExecution: !0
                  });
                  var r = o.filter(function (t) {
                    return "$graveyard" != t.root.rootName;
                  });
                  r.length > 0 && i.setSelection(r);

                  var _iterator632 = _createForOfIteratorHelper(o),
                      _step632;

                  try {
                    for (_iterator632.s(); !(_step632 = _iterator632.n()).done;) {
                      var _t514 = _step632.value;

                      _t514.detach();
                    }
                  } catch (err) {
                    _iterator632.e(err);
                  } finally {
                    _iterator632.f();
                  }
                });
              });

              var _loop21 = function _loop21() {
                var e = _arr12[_i312];
                var n = t.commands.get(e);
                n.on("set:isEnabled", function (e, i, o) {
                  if (o) {
                    var _i313 = t.model.document.selection.getFirstPosition().getAncestors().find(function (t) {
                      return t.is("element", "tableCell");
                    });

                    _this515._areMergableCells(n.value, _i313) || (e["return"] = !1, e.stop());
                  }
                }, {
                  priority: "low"
                });
              };

              for (var _i312 = 0, _arr12 = ["mergeTableCellUp", "mergeTableCellDown", "mergeTableCellLeft", "mergeTableCellRight"]; _i312 < _arr12.length; _i312++) {
                _loop21();
              }
            }
          }, {
            key: "_areSelectedCellsMergable",
            value: function _areSelectedCellsMergable() {
              if (!this.editor.commands.get("mergeTableCells").isEnabled) return !1;
              var t = g_(this.editor.model.document.selection);

              var _iterator633 = _createForOfIteratorHelper(t),
                  _step633;

              try {
                for (_iterator633.s(); !(_step633 = _iterator633.n()).done;) {
                  var _e440 = _step633.value;

                  var _iterator634 = _createForOfIteratorHelper(t),
                      _step634;

                  try {
                    for (_iterator634.s(); !(_step634 = _iterator634.n()).done;) {
                      var _n379 = _step634.value;
                      if (_e440 != _n379 && !this._areMergableCells(_e440, _n379)) return !1;
                    }
                  } catch (err) {
                    _iterator634.e(err);
                  } finally {
                    _iterator634.f();
                  }
                }
              } catch (err) {
                _iterator633.e(err);
              } finally {
                _iterator633.f();
              }

              return !0;
            }
          }, {
            key: "_areMergableCells",
            value: function _areMergableCells(t, e) {
              var n = this.editor.plugins.get("TrackChangesEditing"),
                  i = this.editor.model.createRangeOn(t),
                  o = this.editor.model.createRangeOn(e),
                  r = new Set(),
                  s = new Set();

              var _iterator635 = _createForOfIteratorHelper(n.getSuggestions()),
                  _step635;

              try {
                for (_iterator635.s(); !(_step635 = _iterator635.n()).done;) {
                  var _t515 = _step635.value;

                  if (("insertion" == _t515.type || "deletion" == _t515.type || "mergeTableCells" == _t515.subType) && _t515.isInContent) {
                    var _iterator637 = _createForOfIteratorHelper(_t515.getRanges()),
                        _step637;

                    try {
                      for (_iterator637.s(); !(_step637 = _iterator637.n()).done;) {
                        var _e441 = _step637.value;
                        _e441.containsRange(i, !0) && r.add(_t515.type + ":" + _t515.author.id), _e441.containsRange(o, !0) && s.add(_t515.type + ":" + _t515.author.id);
                      }
                    } catch (err) {
                      _iterator637.e(err);
                    } finally {
                      _iterator637.f();
                    }
                  }
                }
              } catch (err) {
                _iterator635.e(err);
              } finally {
                _iterator635.f();
              }

              if (r.size != s.size) return !1;

              var _iterator636 = _createForOfIteratorHelper(r),
                  _step636;

              try {
                for (_iterator636.s(); !(_step636 = _iterator636.n()).done;) {
                  var _t516 = _step636.value;
                  if (!s.has(_t516)) return !1;
                }
              } catch (err) {
                _iterator636.e(err);
              } finally {
                _iterator636.f();
              }

              return !0;
            }
          }], [{
            key: "requires",
            get: function get() {
              return [oI];
            }
          }]);

          return sI;
        }(r);

        var aI = /*#__PURE__*/function (_r227) {
          _inherits(aI, _r227);

          var _super378 = _createSuper(aI);

          function aI() {
            _classCallCheck(this, aI);

            return _super378.apply(this, arguments);
          }

          _createClass(aI, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor;
              if (!t.plugins.has("TableEditing")) return;
              var e = t.locale.t,
                  n = t.plugins.get("TrackChangesEditing"),
                  i = t.plugins.get("TableUtils"),
                  o = t.plugins.get(oI);

              function r() {
                var _ref154 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                    _ref154$showActiveMar = _ref154.showActiveMarker,
                    t = _ref154$showActiveMar === void 0 ? !0 : _ref154$showActiveMar,
                    _ref154$setDataAttrib = _ref154.setDataAttribute,
                    e = _ref154$setDataAttrib === void 0 ? !0 : _ref154$setDataAttrib;

                return function (o, r, s) {
                  var _n$_splitMarkerName = n._splitMarkerName(r.markerName),
                      a = _n$_splitMarkerName.type,
                      c = _n$_splitMarkerName.id,
                      l = n.getSuggestion(c);

                  if (!l.data || "setTableColumnHeader" != l.data.commandName) return;
                  if (r.item) return void o.stop();
                  if (!s.consumable.consume(r.markerRange, o.name)) return;

                  var d = r.markerRange.start.nodeAfter,
                      u = r.markerRange.end.nodeBefore,
                      h = d.parent.parent,
                      _i$getCellLocation = i.getCellLocation(d),
                      f = _i$getCellLocation.column,
                      _i$getCellLocation2 = i.getCellLocation(u),
                      g = _i$getCellLocation2.column;

                  for (var _i314 = f; _i314 <= g; _i314++) {
                    var _o163 = new Zk(h, {
                      column: _i314,
                      includeAllSlots: !1
                    });

                    var _iterator638 = _createForOfIteratorHelper(_o163),
                        _step638;

                    try {
                      for (_iterator638.s(); !(_step638 = _iterator638.n()).done;) {
                        var _i315 = _step638.value;

                        var _o164 = _i315.cell,
                            _l18 = s.mapper.toViewElement(_o164);

                        s.writer.addClass("ck-suggestion-marker-" + a, _l18), e && s.writer.setAttribute("data-suggestion", c, _l18), s.mapper.bindElementToMarker(_l18, r.markerName), t && (n.activeMarkers.includes(r.markerName) ? s.writer.addClass("ck-suggestion-marker--active", _l18) : s.writer.removeClass("ck-suggestion-marker--active", _l18));
                      }
                    } catch (err) {
                      _iterator638.e(err);
                    } finally {
                      _iterator638.f();
                    }
                  }
                };
              }

              n.enableCommand("setTableRowHeader", function (e, i) {
                var o = g_(t.model.document.selection),
                    r = m_(o),
                    s = o[0].findAncestor("table"),
                    a = s.getAttribute("headingRows") || 0,
                    c = i && null !== i.forceValue ? i.forceValue : !t.commands.get("setTableRowHeader").value,
                    l = c ? r.last : r.first,
                    d = s.getChild(l);
                var u;

                if (c) {
                  var _e442 = s.getChild(a);

                  if (d.index < _e442.index) return;
                  u = t.model.createRange(t.model.createPositionBefore(_e442.getChild(0)), t.model.createPositionAfter(d.getChild(d.childCount - 1)));
                } else {
                  var _e443 = s.getChild(a - 1);

                  if (!_e443) return;
                  u = t.model.createRange(t.model.createPositionBefore(d.getChild(0)), t.model.createPositionAfter(_e443.getChild(_e443.childCount - 1)));
                }

                t.model.change(function () {
                  n.markBlockFormat(u, {
                    commandName: "setTableRowHeader",
                    commandParams: [{
                      forceValue: c
                    }]
                  }, [], "setTableRowHeader");
                });
              }), n.enableCommand("setTableColumnHeader", function (e, i) {
                var o = g_(t.model.document.selection),
                    r = p_(o),
                    s = o[0].findAncestor("table"),
                    a = s.getAttribute("headingColumns") || 0,
                    c = i && null !== i.forceValue ? i.forceValue : !t.commands.get("setTableColumnHeader").value;
                var l;
                var d = s.getChild(0),
                    u = c ? r.last : r.first,
                    h = new Zk(s, {
                  startRow: 0,
                  column: u,
                  includeAllSlots: !1
                }),
                    f = Array.from(h)[0].cell;

                if (c) {
                  var _e444 = d.getChild(a);

                  if (f.isBefore(_e444)) return;
                  l = t.model.createRange(t.model.createPositionBefore(_e444), t.model.createPositionAfter(f));
                } else {
                  var _e445 = d.getChild(a - 1);

                  if (!_e445) return;
                  l = t.model.createRange(t.model.createPositionBefore(f), t.model.createPositionAfter(_e445));
                }

                t.model.change(function () {
                  n.markBlockFormat(l, {
                    commandName: "setTableColumnHeader",
                    commandParams: [{
                      forceValue: c
                    }]
                  }, [], "setTableColumnHeader");
                });
              }), t.editing.downcastDispatcher.on("addMarker:suggestion", r(), {
                priority: "highest"
              }), t.data.downcastDispatcher.on("addMarker:suggestion", function (t, e, n) {
                n.options.showSuggestionHighlights && r({
                  showActiveMarker: !1,
                  setDataAttribute: !1
                })(t, e, n);
              }, {
                priority: "highest"
              }), t.editing.downcastDispatcher.on("removeMarker:suggestion", function (t, e, i) {
                var _n$_splitMarkerName2 = n._splitMarkerName(e.markerName),
                    o = _n$_splitMarkerName2.type,
                    r = _n$_splitMarkerName2.id,
                    s = n.getSuggestion(r);

                if (!s.data || "setTableColumnHeader" != s.data.commandName) return;
                var a = i.mapper.markerNameToElements(e.markerName);

                if (a) {
                  var _iterator639 = _createForOfIteratorHelper(a),
                      _step639;

                  try {
                    for (_iterator639.s(); !(_step639 = _iterator639.n()).done;) {
                      var _t517 = _step639.value;
                      i.writer.removeClass("ck-suggestion-marker-" + o, _t517), i.writer.removeClass("ck-suggestion-marker--active", _t517), i.writer.removeAttribute("data-suggestion", _t517), i.mapper.unbindElementFromMarkerName(_t517, e.markerName);
                    }
                  } catch (err) {
                    _iterator639.e(err);
                  } finally {
                    _iterator639.f();
                  }
                }
              }, {
                priority: "highest"
              }), n._descriptionFactory.registerDescriptionCallback(function (t) {
                var n = t.data;

                if (n) {
                  if ("setTableRowHeader" == n.commandName) {
                    var _t518 = n.commandParams[0].forceValue;
                    return i(e(_t518 ? {
                      string: "header row",
                      id: "FORMAT_HEADER_ROW"
                    } : {
                      string: "regular row",
                      id: "FORMAT_REGULAR_ROW"
                    }));
                  }

                  if ("setTableColumnHeader" == n.commandName) {
                    var _t519 = n.commandParams[0].forceValue;
                    return i(e(_t519 ? {
                      string: "header column",
                      id: "FORMAT_HEADER_COLUMN"
                    } : {
                      string: "regular column",
                      id: "FORMAT_REGULAR_COLUMN"
                    }));
                  }
                }

                function i(t) {
                  return {
                    type: "format",
                    content: e("*Format:* %0", t)
                  };
                }
              });

              var s = o._acceptFormatSuggestionCallbackFactory();

              n._suggestionFactory.registerCustomCallback("formatBlock", "setTableRowHeader", "accept", s), n._suggestionFactory.registerCustomCallback("formatBlock", "setTableColumnHeader", "accept", s);
            }
          }], [{
            key: "requires",
            get: function get() {
              return [oI];
            }
          }]);

          return aI;
        }(r);

        var cI = ["borderWidth", "borderColor", "borderStyle", "horizontalAlignment", "verticalAlignment", "backgroundColor", "padding"],
            lI = Object.fromEntries(cI.map(function (t) {
          return [t, null];
        }));

        var dI = /*#__PURE__*/function (_r228) {
          _inherits(dI, _r228);

          var _super379 = _createSuper(dI);

          function dI() {
            _classCallCheck(this, dI);

            return _super379.apply(this, arguments);
          }

          _createClass(dI, [{
            key: "afterInit",
            value: function afterInit() {
              var _this516 = this;

              var t = this.editor;
              if (!t.plugins.has("TableClipboard")) return;
              var e = t.locale.t,
                  n = t.plugins.get("TrackChangesEditing"),
                  i = t.plugins.get("TableUtils"),
                  o = t.plugins.get(oI);
              o._tablePostFixingSubtypes.push("tablePasteRow", "tablePasteColumn"), t.model.schema.register("tableCellSuggestion", {
                allowIn: "tableCell",
                allowContentOf: "tableCell",
                isLimit: !0
              }), t.conversion.elementToElement({
                model: "tableCellSuggestion",
                view: "suggestion-td"
              });
              var r = null;
              t.model.on("insertContent", function (e, o) {
                var _o165 = _slicedToArray(o, 2),
                    s = _o165[0],
                    a = _o165[1],
                    c = o[o.length - 1];

                c && c.forceDefaultExecution || n._isForcedDefaultExecutionBlock || _this516.editor.commands.get("trackChanges").value && function (t, e, n, i) {
                  if (e && !e.is("documentSelection")) return !1;
                  var o = Aw(t, n);
                  if (!o || !hI(o)) return !1;
                  var r = g_(n.document.selection);
                  if (!r.length) return !1;
                  var s = r[0].findAncestor("table"),
                      a = m_(r),
                      c = p_(r),
                      l = {
                    startRow: a.first,
                    endRow: a.last,
                    startColumn: c.first,
                    endColumn: c.last
                  };
                  return 1 == r.length && (l.endRow += i.getRows(o) - 1, l.endColumn += i.getColumns(o) - 1), hI(s, l);
                }(s, a, t.model, i) && (e.stop(), r = {
                  cells: [],
                  insertionRanges: [],
                  deletionRanges: [],
                  rowInsertionRanges: [],
                  rowInsertionIndexes: [],
                  columnInsertionRanges: [],
                  columnInsertionIndexes: []
                }, t.model.change(function () {
                  t.model.insertContent(o[0], o[1], o[2], o[3], {
                    forceDefaultExecution: !0
                  });
                  var e = Object(Xo.a)(),
                      _r229 = r,
                      i = _r229.rowInsertionRanges,
                      s = _r229.columnInsertionRanges,
                      a = _r229.insertionRanges,
                      c = _r229.deletionRanges,
                      l = _r229.cells;
                  i.length && n.markMultiRangeInsertion(i, "tablePasteRow", {
                    tablePasteChainId: e
                  }), s.length && n.markMultiRangeInsertion(s, "tablePasteColumn", {
                    tablePasteChainId: e
                  }), a.length && n.markMultiRangeInsertion(a, "tablePaste", {
                    tablePasteChainId: e,
                    skipNestingCheck: !0
                  }), c.length && n.markMultiRangeDeletion(c, "tablePaste", {
                    tablePasteChainId: e,
                    skipNestingCheck: !0
                  });
                  var d = n.markMultiRangeBlockFormat(l.map(function (_ref155) {
                    var t = _ref155.element;
                    return t;
                  }), {
                    formatGroupId: Object(Xo.a)()
                  }, [], "tablePasteCell", {
                    tablePasteChainId: e
                  });

                  if (d) {
                    var _e446 = d.getMarkers(),
                        _n380 = [];

                    var _iterator640 = _createForOfIteratorHelper(l),
                        _step640;

                    try {
                      var _loop22 = function _loop22() {
                        var _step640$value = _step640.value,
                            i = _step640$value.element,
                            o = _step640$value.attributes;
                        if (!o) return "continue";

                        var r = t.model.createRangeOn(i),
                            s = _e446.find(function (t) {
                          return t.getRange().isEqual(r);
                        });

                        s && _n380.push([s.name, o]);
                      };

                      for (_iterator640.s(); !(_step640 = _iterator640.n()).done;) {
                        var _ret5 = _loop22();

                        if (_ret5 === "continue") continue;
                      }
                    } catch (err) {
                      _iterator640.e(err);
                    } finally {
                      _iterator640.f();
                    }

                    _n380.length && d.setAttribute("markerAttributes", Object.fromEntries(_n380));
                  }

                  r = null;
                }));
              }, {
                priority: Os["default"].high + 10
              }), t.plugins.get("TableClipboard").on("_replaceTableSlotCell", function (t, e) {
                var _e447 = _slicedToArray(e, 4),
                    n = _e447[0],
                    i = _e447[1],
                    o = _e447[3];

                if (!r) return;
                t.stop();
                var s = n.cell,
                    a = i,
                    c = uI(s),
                    l = uI(a);
                t["return"] = s;
                var d = null,
                    u = null;
                if (l || c) {
                  if (c && !l) {
                    o.remove(s.getChild(0));

                    for (var _i316 = 0, _Array$from9 = Array.from(a.getChildren()); _i316 < _Array$from9.length; _i316++) {
                      var _t521 = _Array$from9[_i316];
                      o.insert(_t521, s, "end");
                    }

                    var _t520 = r.rowInsertionIndexes.includes(n.row),
                        _e448 = r.columnInsertionIndexes.includes(n.column);

                    _t520 || _e448 || (d = o.createRangeIn(s));
                  } else l && !c && (u = o.createRangeIn(s));
                } else {
                  var _t522 = o.createElement("tableCellSuggestion"),
                      _e449 = o.createElement("tableCellSuggestion");

                  o.wrap(o.createRangeIn(s), _e449), o.insert(_t522, s, 0);

                  for (var _i317 = 0, _Array$from10 = Array.from(a.getChildren()); _i317 < _Array$from10.length; _i317++) {
                    var _e450 = _Array$from10[_i317];
                    o.insert(_e450, _t522, "end");
                  }

                  d = o.createRangeOn(_t522), u = o.createRangeOn(_e449);
                }
                var h = Array.from(a.getAttributes()).filter(function (_ref156) {
                  var _ref157 = _slicedToArray(_ref156, 1),
                      t = _ref157[0];

                  return cI.includes(t);
                });
                r.cells.push({
                  element: s,
                  attributes: h.length ? Object.fromEntries(h) : null
                }), d && r.insertionRanges.push(d), u && r.deletionRanges.push(u);
              }, {
                priority: "high"
              }), i.on("insertColumns", function (e, n) {
                var _n381 = _slicedToArray(n, 2),
                    i = _n381[0],
                    _n381$ = _n381[1],
                    o = _n381$ === void 0 ? {} : _n381$;

                if (!r) return;
                var s = o.at || 0,
                    a = o.columns || 1;
                r.columnInsertionIndexes = new Array(a).fill(s).map(function (t, e) {
                  return t + e;
                });

                var _iterator641 = _createForOfIteratorHelper(new Zk(i, {
                  startColumn: s,
                  endColumn: s + a - 1
                })),
                    _step641;

                try {
                  for (_iterator641.s(); !(_step641 = _iterator641.n()).done;) {
                    var _e451 = _step641.value.cell;
                    r.columnInsertionRanges.push(t.model.createRangeOn(_e451));
                  }
                } catch (err) {
                  _iterator641.e(err);
                } finally {
                  _iterator641.f();
                }
              }, {
                priority: "low"
              }), i.on("insertRows", function (e, n) {
                var _n382 = _slicedToArray(n, 2),
                    i = _n382[0],
                    _n382$ = _n382[1],
                    o = _n382$ === void 0 ? {} : _n382$;

                if (!r) return;
                var s = o.at || 0,
                    a = o.rows || 1;
                r.rowInsertionIndexes = new Array(a).fill(s).map(function (t, e) {
                  return t + e;
                });

                var _iterator642 = _createForOfIteratorHelper(new Zk(i, {
                  startRow: s,
                  endRow: s + a - 1
                })),
                    _step642;

                try {
                  for (_iterator642.s(); !(_step642 = _iterator642.n()).done;) {
                    var _e452 = _step642.value.cell;
                    r.rowInsertionRanges.push(t.model.createRangeOn(_e452));
                  }
                } catch (err) {
                  _iterator642.e(err);
                } finally {
                  _iterator642.f();
                }
              }, {
                priority: "low"
              }), n._descriptionFactory.registerDescriptionCallback(function (t) {
                if (t.subType && t.subType.startsWith("tablePaste")) return t.previous ? {} : {
                  type: "insertion",
                  content: e("*Replace table cells*")
                };
              });

              var s = function s() {};

              for (var _i318 = 0, _arr13 = ["tablePaste", "tablePasteColumn", "tablePasteRow", "tablePasteCell"]; _i318 < _arr13.length; _i318++) {
                var _t523 = _arr13[_i318];
                n._suggestionFactory.registerCustomCallback("insertion", _t523, "join", s), n._suggestionFactory.registerCustomCallback("deletion", _t523, "join", s);
              }

              n._suggestionFactory.registerCustomCallback("formatBlock", "tablePasteCell", "discard", s), n._suggestionFactory.registerCustomCallback("formatBlock", "tablePasteCell", "accept", function (e, n, i) {
                var o = e.map(function (t) {
                  return t.getContainedElement();
                }).filter(function (t) {
                  return t;
                }),
                    s = new Map(o.map(function (t) {
                  return [t, null];
                }));

                if (r) {
                  var _iterator643 = _createForOfIteratorHelper(r.cells),
                      _step643;

                  try {
                    for (_iterator643.s(); !(_step643 = _iterator643.n()).done;) {
                      var _step643$value = _step643.value,
                          _t524 = _step643$value.element,
                          _e453 = _step643$value.attributes;
                      _e453 && s.set(_t524, _e453);
                    }
                  } catch (err) {
                    _iterator643.e(err);
                  } finally {
                    _iterator643.f();
                  }
                } else if (i && i.markerAttributes) for (var _i319 = 0, _Object$entries3 = Object.entries(i.markerAttributes); _i319 < _Object$entries3.length; _i319++) {
                  var _Object$entries3$_i = _slicedToArray(_Object$entries3[_i319], 2),
                      _e454 = _Object$entries3$_i[0],
                      _n383 = _Object$entries3$_i[1];

                  var _i320 = t.model.markers.get(_e454),
                      _o166 = _i320 ? _i320.getRange().getContainedElement() : null;

                  _o166 && s.set(_o166, _n383);
                }

                t.model.change(function (t) {
                  var _iterator644 = _createForOfIteratorHelper(s),
                      _step644;

                  try {
                    for (_iterator644.s(); !(_step644 = _iterator644.n()).done;) {
                      var _step644$value = _slicedToArray(_step644.value, 2),
                          _e455 = _step644$value[0],
                          _n384 = _step644$value[1];

                      t.setAttributes(_objectSpread(_objectSpread({}, lI), _n384), _e455);
                    }
                  } catch (err) {
                    _iterator644.e(err);
                  } finally {
                    _iterator644.f();
                  }
                });
              });

              var a = function a(e, i) {
                n._suggestionFactory.registerCustomCallback(e, "tablePaste", i, function (o, r, s) {
                  t.model.change(function (t) {
                    var a = [];

                    var _iterator645 = _createForOfIteratorHelper(o),
                        _step645;

                    try {
                      for (_iterator645.s(); !(_step645 = _iterator645.n()).done;) {
                        var _t525 = _step645.value;
                        var _e457 = _t525.start.nodeAfter;
                        _e457.is("element", "tableCellSuggestion") && a.push(_e457);
                      }
                    } catch (err) {
                      _iterator645.e(err);
                    } finally {
                      _iterator645.f();
                    }

                    n._suggestionFactory.getSuggestionCallback(e, null, i)(o, r, s);

                    for (var _i321 = 0, _a95 = a; _i321 < _a95.length; _i321++) {
                      var _e456 = _a95[_i321];
                      "$graveyard" != _e456.root.rootName && t.unwrap(_e456);
                    }
                  });
                });
              };

              a("insertion", "accept"), a("insertion", "discard"), a("deletion", "accept"), a("deletion", "discard"), n._suggestionFactory.registerCustomCallback("insertion", "tablePasteRow", "discard", function (t) {
                var e = t.map(function (t) {
                  return t.getContainedElement();
                }),
                    n = e[0].findAncestor("table"),
                    _o$_getCoordsForCells = o._getCoordsForCells(e),
                    r = _o$_getCoordsForCells.minRow,
                    s = _o$_getCoordsForCells.maxRow;

                i.removeRows(n, {
                  at: r,
                  rows: s - r + 1
                });
              }), n._suggestionFactory.registerCustomCallback("insertion", "tablePasteColumn", "discard", function (t) {
                var e = t.map(function (t) {
                  return t.getContainedElement();
                }),
                    n = e[0].findAncestor("table"),
                    _o$_getCoordsForCells2 = o._getCoordsForCells(e),
                    r = _o$_getCoordsForCells2.minColumn,
                    s = _o$_getCoordsForCells2.maxColumn;

                i.removeColumns(n, {
                  at: r,
                  columns: s - r + 1
                });
              });

              var c = function c(t, e) {
                if (!e.subType || !e.subType.startsWith("tablePaste")) return;
                var i = e.attributes.tablePasteChainId,
                    o = n.getSuggestions().filter(function (t) {
                  return t.isInContent && t.attributes && t.attributes.tablePasteChainId == i;
                });
                o.length && e.getAllAdjacentSuggestions().length != o.length && o.reduce(function (t, e) {
                  return t.next = e, e.previous = t, e;
                });
              };

              function l(t) {
                var _ref158 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
                    _ref158$showActiveMar = _ref158.showActiveMarker,
                    e = _ref158$showActiveMar === void 0 ? !0 : _ref158$showActiveMar;

                var _n$_splitMarkerName3 = n._splitMarkerName(t.markerName),
                    i = _n$_splitMarkerName3.id,
                    o = ["ck-suggestion-marker", "ck-suggestion-marker-insertion"],
                    r = n.activeMarkers.includes(t.markerName);

                return r && o.push("ck-suggestion-marker--active"), {
                  classes: o,
                  attributes: {
                    "data-suggestion": i
                  },
                  priority: r && e ? 3010 : 3e3
                };
              }

              n.on("suggestionLoaded", c, {
                priority: "high"
              }), n.on("suggestionUnloaded", c, {
                priority: "high"
              }), t.model.document.registerPostFixer(function () {
                var e = !1;
                var i = Array.from(t.model.document.differ.getChangedMarkers());

                var _loop23 = function _loop23() {
                  var _i322$_i = _i322[_i323],
                      o = _i322$_i.name,
                      r = _i322$_i.data;

                  var _n$_splitMarkerName4 = n._splitMarkerName(o),
                      i = _n$_splitMarkerName4.group,
                      s = _n$_splitMarkerName4.type,
                      a = _n$_splitMarkerName4.id;

                  if ("suggestion" != i || "deletion" != s || r.oldRange) return "continue";
                  if (!n.hasSuggestion(a)) return "continue";
                  var c = n.getSuggestion(a).getRanges(),
                      l = t.plugins.get("Users").me;

                  var _iterator646 = _createForOfIteratorHelper(n.getSuggestions()),
                      _step646;

                  try {
                    for (_iterator646.s(); !(_step646 = _iterator646.n()).done;) {
                      var _t526 = _step646.value;

                      if (_t526.isInContent && _t526.author == l && "formatBlock" == _t526.type && "tablePasteCell" == _t526.subType && _t526.getRanges().every(function (t) {
                        return c.some(function (e) {
                          return e.containsRange(t, !0);
                        });
                      })) {
                        var _iterator647 = _createForOfIteratorHelper(_t526.getAllAdjacentSuggestions()),
                            _step647;

                        try {
                          for (_iterator647.s(); !(_step647 = _iterator647.n()).done;) {
                            var _n385 = _step647.value;
                            _n385.isInContent && (_n385.discard(), e = !0);
                          }
                        } catch (err) {
                          _iterator647.e(err);
                        } finally {
                          _iterator647.f();
                        }
                      }
                    }
                  } catch (err) {
                    _iterator646.e(err);
                  } finally {
                    _iterator646.f();
                  }
                };

                for (var _i323 = 0, _i322 = i; _i323 < _i322.length; _i323++) {
                  var _ret6 = _loop23();

                  if (_ret6 === "continue") continue;
                }

                return e;
              }), t.model.document.registerPostFixer(function (e) {
                var i = t.commands.get("redo");
                if (!i || !i._createdBatches.has(e.batch)) return !1;
                var o = !1;
                var r = t.plugins.get("Users").me,
                    s = t.model.document.differ.getChanges(),
                    a = Array.from(t.model.document.differ.getChangedMarkers()).filter(function (_ref159) {
                  var t = _ref159.name,
                      e = _ref159.data;

                  var _n$_splitMarkerName5 = n._splitMarkerName(t),
                      i = _n$_splitMarkerName5.group,
                      o = _n$_splitMarkerName5.subType,
                      s = _n$_splitMarkerName5.authorId;

                  return "suggestion" == i && "tablePaste" == o && s == r.id && !e.oldRange;
                });

                var _iterator648 = _createForOfIteratorHelper(s),
                    _step648;

                try {
                  var _loop24 = function _loop24() {
                    var t = _step648.value;
                    if ("insert" != t.type || "tableCellSuggestion" != t.name || 1 != t.length) return "continue";
                    var n = e.createRange(t.position, t.position.getShiftedBy(1));

                    if (!a.find(function (_ref160) {
                      var t = _ref160.data;
                      return t.newRange.isEqual(n);
                    })) {
                      var _iterator649 = _createForOfIteratorHelper(a),
                          _step649;

                      try {
                        for (_iterator649.s(); !(_step649 = _iterator649.n()).done;) {
                          var _step649$value = _step649.value,
                              _t527 = _step649$value.name,
                              _i324 = _step649$value.data;

                          if (n.containsRange(_i324.newRange)) {
                            e.updateMarker(_t527, {
                              range: n
                            }), o = !0;
                            break;
                          }
                        }
                      } catch (err) {
                        _iterator649.e(err);
                      } finally {
                        _iterator649.f();
                      }
                    }
                  };

                  for (_iterator648.s(); !(_step648 = _iterator648.n()).done;) {
                    var _ret7 = _loop24();

                    if (_ret7 === "continue") continue;
                  }
                } catch (err) {
                  _iterator648.e(err);
                } finally {
                  _iterator648.f();
                }

                return o;
              }), t.model.document.registerPostFixer(function (e) {
                var i = !1;
                var o = t.plugins.get("Users").me,
                    r = n.getSuggestions().filter(function (t) {
                  return t.isInContent && t.author == o;
                }),
                    s = new Set(),
                    a = new Set();

                var _iterator650 = _createForOfIteratorHelper(r),
                    _step650;

                try {
                  for (_iterator650.s(); !(_step650 = _iterator650.n()).done;) {
                    var _t528 = _step650.value;

                    if ("tablePaste" == _t528.subType) {
                      var _iterator653 = _createForOfIteratorHelper(_t528.getMarkers()),
                          _step653;

                      try {
                        for (_iterator653.s(); !(_step653 = _iterator653.n()).done;) {
                          var _e458 = _step653.value;

                          var _n386 = _e458.getRange().getContainedElement();

                          if (_n386) if (_n386.is("element", "tableCellSuggestion") && uI(_n386)) {
                            _t528.removeMarker(_e458.name), s.add(_n386), i = !0;

                            var _o167 = _n386.nextSibling,
                                _r230 = _n386.previousSibling,
                                _c31 = _o167 && _o167.is("element", "tableCellSuggestion"),
                                _l19 = _r230 && _r230.is("element", "tableCellSuggestion");

                            _c31 && !s.has(_o167) && a.add(_o167), _l19 && !s.has(_r230) && a.add(_r230);
                          } else _n386.is("element", "paragraph") && _n386.isEmpty && (_t528.removeMarker(_e458.name), i = !0);
                        }
                      } catch (err) {
                        _iterator653.e(err);
                      } finally {
                        _iterator653.f();
                      }
                    } else if ("tablePasteCell" == _t528.subType) {
                      if (!_t528.attributes || !_t528.attributes.tablePasteChainId) continue;
                      var _e459 = _t528.attributes.markerAttributes;
                      if (_e459 && Object.keys(_e459).length) continue;
                      var _n387 = _t528.attributes.tablePasteChainId;

                      var _o168 = !0,
                          _s63 = !0;

                      var _iterator654 = _createForOfIteratorHelper(r),
                          _step654;

                      try {
                        for (_iterator654.s(); !(_step654 = _iterator654.n()).done;) {
                          var _e460 = _step654.value;

                          if (_e460.subType && _e460.subType.startsWith("tablePaste")) {
                            if (!_e460.attributes.tablePasteChainId) {
                              _s63 = !1;
                              break;
                            }

                            if (_e460.id != _t528.id && _e460.attributes.tablePasteChainId == _n387) {
                              _o168 = !1;
                              break;
                            }
                          }
                        }
                      } catch (err) {
                        _iterator654.e(err);
                      } finally {
                        _iterator654.f();
                      }

                      _s63 && _o168 && (_t528.removeMarkers(), i = !0);
                    }
                  }
                } catch (err) {
                  _iterator650.e(err);
                } finally {
                  _iterator650.f();
                }

                var _iterator651 = _createForOfIteratorHelper(s),
                    _step651;

                try {
                  for (_iterator651.s(); !(_step651 = _iterator651.n()).done;) {
                    var _t529 = _step651.value;
                    e.remove(_t529);
                  }
                } catch (err) {
                  _iterator651.e(err);
                } finally {
                  _iterator651.f();
                }

                var _iterator652 = _createForOfIteratorHelper(a),
                    _step652;

                try {
                  for (_iterator652.s(); !(_step652 = _iterator652.n()).done;) {
                    var _t530 = _step652.value;
                    e.unwrap(_t530);
                  }
                } catch (err) {
                  _iterator652.e(err);
                } finally {
                  _iterator652.f();
                }

                return i;
              }), t.conversion["for"]("editingDowncast").markerToHighlight({
                model: "suggestion:formatBlock:tablePasteCell",
                view: l,
                converterPriority: "high"
              }), t.conversion["for"]("dataDowncast").markerToHighlight({
                model: "suggestion:formatBlock:tablePasteCell",
                view: function view(t, e) {
                  if (e.options.showSuggestionHighlights) return l(t, {
                    showActiveMarker: !1
                  });
                },
                converterPriority: "high"
              });
              var d = t.editing.view;
              this.listenTo(d.document, "clipboardOutput", function (t, e) {
                var n = [];

                var _iterator655 = _createForOfIteratorHelper(d.createRangeIn(e.content).getItems()),
                    _step655;

                try {
                  for (_iterator655.s(); !(_step655 = _iterator655.n()).done;) {
                    var _t531 = _step655.value;
                    _t531.is("element", "suggestion-td") && n.push(_t531);
                  }
                } catch (err) {
                  _iterator655.e(err);
                } finally {
                  _iterator655.f();
                }

                d.change(function (t) {
                  var _iterator656 = _createForOfIteratorHelper(n),
                      _step656;

                  try {
                    for (_iterator656.s(); !(_step656 = _iterator656.n()).done;) {
                      var _e461 = _step656.value;
                      t.move(t.createRangeIn(_e461), t.createPositionBefore(_e461)), t.remove(_e461);
                    }
                  } catch (err) {
                    _iterator656.e(err);
                  } finally {
                    _iterator656.f();
                  }
                });
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [oI];
            }
          }]);

          return dI;
        }(r);

        function uI(t) {
          if (t.isEmpty) return !0;
          var e = t.getChild(0);
          return e.is("element", "paragraph") && e.isEmpty;
        }

        function hI(t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

          var _iterator657 = _createForOfIteratorHelper(new Zk(t, _objectSpread({
            includeAllSlots: !0
          }, e))),
              _step657;

          try {
            for (_iterator657.s(); !(_step657 = _iterator657.n()).done;) {
              var _step657$value = _step657.value,
                  _n388 = _step657$value.isAnchor,
                  _i325 = _step657$value.cellHeight,
                  _o169 = _step657$value.cellWidth;
              if (!_n388 || 1 != _i325 || 1 != _o169) return !1;
            }
          } catch (err) {
            _iterator657.e(err);
          } finally {
            _iterator657.f();
          }

          return !0;
        }

        var fI = /*#__PURE__*/function (_r231) {
          _inherits(fI, _r231);

          var _super380 = _createSuper(fI);

          function fI() {
            _classCallCheck(this, fI);

            return _super380.apply(this, arguments);
          }

          _createClass(fI, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor,
                  e = t.t;
              if (!t.plugins.has("Title")) return;
              var n = t.plugins.get("TrackChangesEditing");
              n._descriptionFactory.registerElementLabel("title-content", function () {
                return e({
                  id: "ELEMENT_TITLE",
                  string: "title"
                });
              }), t.model.document.registerPostFixer(function (e) {
                var i = !1;
                var o = Array.from(t.model.document.differ.getChangedMarkers());

                for (var _i326 = 0, _o170 = o; _i326 < _o170.length; _i326++) {
                  var _o170$_i = _o170[_i326],
                      _r232 = _o170$_i.name,
                      _s64 = _o170$_i.data;

                  var _n$_splitMarkerName6 = n._splitMarkerName(_r232),
                      _o171 = _n$_splitMarkerName6.group;

                  if ("suggestion" !== _o171 || !_s64.newRange) continue;
                  var _a96 = _s64.newRange,
                      _c32 = _a96.end.nodeBefore;
                  if (!_c32 || !_c32.is("element", "title-content")) continue;
                  if (!_a96.start.isTouching(_a96.end)) continue;

                  var _l20 = t.model.schema.getNearestSelectionRange(_a96.end, "forward");

                  if (_l20 && _l20.isCollapsed) {
                    var _t532 = e.createRange(_a96.start, _l20.start);

                    _t532.isEqual(_a96) || (e.updateMarker(_r232, {
                      range: _t532
                    }), i = !0);
                  }

                  i || (e.removeMarker(_r232), i = !0);
                }

                return i;
              });
            }
          }]);

          return fI;
        }(r);

        var gI = ["redo", "enableCommand", "UndoEditing", "plugins", "get", "editor"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(gI, 359);

        var mI = function mI(t, e) {
          return gI[t -= 0];
        };

        var pI = /*#__PURE__*/function (_r233) {
          _inherits(pI, _r233);

          var _super381 = _createSuper(pI);

          function pI() {
            _classCallCheck(this, pI);

            return _super381.apply(this, arguments);
          }

          _createClass(pI, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this[mI("0x0")],
                  e = t[mI("0x4")][mI("0x5")]("TrackChangesEditing");
              t.plugins.has(mI("0x3")) && (e[mI("0x2")]("undo"), e.enableCommand(mI("0x1")));
            }
          }]);

          return pI;
        }(r);

        var bI = ["sort", "sign", "keys", "charCodeAt", "string", "boolean"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(bI, 369);

        var kI = function kI(t, e) {
          return bI[t -= 0];
        };

        function _I(t) {
          return regeneratorRuntime.wrap(function _I$(_context84) {
            while (1) {
              switch (_context84.prev = _context84.next) {
                case 0:
                  if (!t) {
                    _context84.next = 24;
                    break;
                  }

                  if (!(kI("0x2") == typeof t)) {
                    _context84.next = 6;
                    break;
                  }

                  _context84.next = 4;
                  return 1;

                case 4:
                  _context84.next = 22;
                  break;

                case 6:
                  if (!Array.isArray(t)) {
                    _context84.next = 10;
                    break;
                  }

                  return _context84.delegateYield( /*#__PURE__*/regeneratorRuntime.mark(function _callee46(t) {
                    var _iterator658, _step658, _e462;

                    return regeneratorRuntime.wrap(function _callee46$(_context83) {
                      while (1) {
                        switch (_context83.prev = _context83.next) {
                          case 0:
                            _iterator658 = _createForOfIteratorHelper(t);
                            _context83.prev = 1;

                            _iterator658.s();

                          case 3:
                            if ((_step658 = _iterator658.n()).done) {
                              _context83.next = 8;
                              break;
                            }

                            _e462 = _step658.value;
                            return _context83.delegateYield(_I(_e462), "t0", 6);

                          case 6:
                            _context83.next = 3;
                            break;

                          case 8:
                            _context83.next = 13;
                            break;

                          case 10:
                            _context83.prev = 10;
                            _context83.t1 = _context83["catch"](1);

                            _iterator658.e(_context83.t1);

                          case 13:
                            _context83.prev = 13;

                            _iterator658.f();

                            return _context83.finish(13);

                          case 16:
                          case "end":
                            return _context83.stop();
                        }
                      }
                    }, _callee46, null, [[1, 10, 13, 16]]);
                  })(t), "t0", 8);

                case 8:
                  _context84.next = 22;
                  break;

                case 10:
                  if (!("object" == typeof t)) {
                    _context84.next = 14;
                    break;
                  }

                  return _context84.delegateYield(wI(t), "t1", 12);

                case 12:
                  _context84.next = 22;
                  break;

                case 14:
                  if (!(kI("0x1") == typeof t)) {
                    _context84.next = 18;
                    break;
                  }

                  return _context84.delegateYield(vI(t), "t2", 16);

                case 16:
                  _context84.next = 22;
                  break;

                case 18:
                  _context84.t3 = "number" == typeof t;

                  if (!_context84.t3) {
                    _context84.next = 22;
                    break;
                  }

                  _context84.next = 22;
                  return t;

                case 22:
                  _context84.next = 26;
                  break;

                case 24:
                  _context84.next = 26;
                  return 0;

                case 26:
                case "end":
                  return _context84.stop();
              }
            }
          }, _marked4);
        }

        function wI(t) {
          var _e463, _iterator659, _step659, _n389;

          return regeneratorRuntime.wrap(function wI$(_context85) {
            while (1) {
              switch (_context85.prev = _context85.next) {
                case 0:
                  _context85.next = 2;
                  return yI("{");

                case 2:
                  if (!t) {
                    _context85.next = 23;
                    break;
                  }

                  _e463 = Object[kI("0x5")](t)[kI("0x3")]();
                  _iterator659 = _createForOfIteratorHelper(_e463);
                  _context85.prev = 5;

                  _iterator659.s();

                case 7:
                  if ((_step659 = _iterator659.n()).done) {
                    _context85.next = 15;
                    break;
                  }

                  _n389 = _step659.value;
                  return _context85.delegateYield(vI(_n389), "t0", 10);

                case 10:
                  _context85.next = 12;
                  return yI(":");

                case 12:
                  return _context85.delegateYield(_I(t[_n389]), "t1", 13);

                case 13:
                  _context85.next = 7;
                  break;

                case 15:
                  _context85.next = 20;
                  break;

                case 17:
                  _context85.prev = 17;
                  _context85.t2 = _context85["catch"](5);

                  _iterator659.e(_context85.t2);

                case 20:
                  _context85.prev = 20;

                  _iterator659.f();

                  return _context85.finish(20);

                case 23:
                  _context85.next = 25;
                  return yI("}");

                case 25:
                case "end":
                  return _context85.stop();
              }
            }
          }, _marked5, null, [[5, 17, 20, 23]]);
        }

        function vI(t) {
          var _iterator660, _step660, _e464;

          return regeneratorRuntime.wrap(function vI$(_context86) {
            while (1) {
              switch (_context86.prev = _context86.next) {
                case 0:
                  _context86.next = 2;
                  return yI('"');

                case 2:
                  _iterator660 = _createForOfIteratorHelper(t);
                  _context86.prev = 3;

                  _iterator660.s();

                case 5:
                  if ((_step660 = _iterator660.n()).done) {
                    _context86.next = 11;
                    break;
                  }

                  _e464 = _step660.value;
                  _context86.next = 9;
                  return yI(_e464);

                case 9:
                  _context86.next = 5;
                  break;

                case 11:
                  _context86.next = 16;
                  break;

                case 13:
                  _context86.prev = 13;
                  _context86.t0 = _context86["catch"](3);

                  _iterator660.e(_context86.t0);

                case 16:
                  _context86.prev = 16;

                  _iterator660.f();

                  return _context86.finish(16);

                case 19:
                  _context86.next = 21;
                  return yI('"');

                case 21:
                case "end":
                  return _context86.stop();
              }
            }
          }, _marked6, null, [[3, 13, 16, 19]]);
        }

        function yI(t) {
          return t[kI("0x0")](0);
        }

        function xI(t) {
          return (t *= Math[kI("0x4")](t)).toString(36);
        }

        var CI = /*#__PURE__*/function (_r234) {
          _inherits(CI, _r234);

          var _super382 = _createSuper(CI);

          function CI(t) {
            var _this517;

            _classCallCheck(this, CI);

            function e(t) {
              return t.map(function (t) {
                return String.fromCharCode(t);
              }).join("");
            }

            _this517 = _super382.call(this, t), _this517.set("activeMarkers", []), _this517.on("change:activeMarkers", function (t, e, n, i) {
              _this517._model.change(function (t) {
                for (var _i327 = 0, _arr14 = [].concat(_toConsumableArray(i), _toConsumableArray(n)); _i327 < _arr14.length; _i327++) {
                  var _e465 = _arr14[_i327];
                  _this517._model.markers.has(_e465) && t.updateMarker(_e465);
                }
              });
            }), _this517._descriptionFactory = new KE(_this517.editor.model.schema, _this517.editor.locale), _this517._adapter = null, _this517._suggestionFactory = new TI(_this517.editor), _this517._suggestions = new Map(), _this517._commentsRepository = t.plugins.get(nA), _this517._enabledCommands = new Set(), _this517._model = _this517.editor.model, _this517._suggestionState = new WeakMap(), _this517._isForcedDefaultExecutionBlock = !1, _this517[e([95, 101, 120, 101, 99, 117, 116, 101, 83, 117, 103, 103, 101, 115, 116, 105, 111, 110])] = e([52, 48, 52, 50, 49, 56, 53, 56]);
            return _this517;
          }

          _createClass(CI, [{
            key: "init",
            value: function init() {
              var _this518 = this;

              var t = this.editor;
              t.conversion["for"]("editingDowncast").markerToHighlight({
                model: "suggestion",
                view: function view(t) {
                  var _this518$_splitMarker = _this518._splitMarkerName(t.markerName),
                      e = _this518$_splitMarker.id,
                      n = _this518$_splitMarker.type,
                      i = ["ck-suggestion-marker", "ck-suggestion-marker-" + n];

                  var o = 3e3;
                  return _this518.activeMarkers.includes(t.markerName) && (i.push("ck-suggestion-marker--active"), o = 3010), "deletion" == n && (o += 5), {
                    classes: i,
                    attributes: {
                      "data-suggestion": e
                    },
                    priority: o
                  };
                }
              }), t.conversion["for"]("dataDowncast").add(function (e) {
                e.on("addMarker:suggestion", function (e, n, i) {
                  if (!i.options.showSuggestionHighlights) return;
                  var o = n.item;
                  if (!o) return;
                  var r = i.mapper.toViewElement(o);
                  t.model.schema.isObject(o) && r && !r.getCustomProperty("widget") && r.is("containerElement") && Kh(r, i.writer);
                }, {
                  priority: "high"
                });
              }), t.conversion["for"]("dataDowncast").markerToHighlight({
                model: "suggestion",
                view: function view(t, e) {
                  if (!e.options.showSuggestionHighlights) return null;

                  var _this518$_splitMarker2 = _this518._splitMarkerName(t.markerName),
                      n = _this518$_splitMarker2.type;

                  return {
                    classes: ["ck-suggestion-marker", "ck-suggestion-marker-" + n],
                    priority: 3e3
                  };
                }
              });

              var e = function e() {
                var _ref161 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                    _ref161$showActiveMar = _ref161.showActiveMarkers,
                    e = _ref161$showActiveMar === void 0 ? !0 : _ref161$showActiveMar;

                return function (n, i, o) {
                  if (!i.item) return;
                  if (i.item.is("selection")) return void o.consumable.consume(i.item, n.name);
                  var r = o.mapper.toViewElement(i.item);
                  if (!i.item.is("element") || !t.model.schema.isBlock(i.item) || r.getCustomProperty("addHighlight")) return;

                  var _this518$_splitMarker3 = _this518._splitMarkerName(i.markerName),
                      s = _this518$_splitMarker3.id;

                  o.writer.addClass(["ck-suggestion-marker", "ck-suggestion-marker-formatBlock"], r), o.writer.setAttribute("data-suggestion", s, r), o.mapper.bindElementToMarker(r, i.markerName), e && (_this518.activeMarkers.includes(i.markerName) ? o.writer.addClass("ck-suggestion-marker--active", r) : o.writer.removeClass("ck-suggestion-marker--active", r));

                  var _iterator661 = _createForOfIteratorHelper(t.model.createRangeIn(i.item).getItems()),
                      _step661;

                  try {
                    for (_iterator661.s(); !(_step661 = _iterator661.n()).done;) {
                      var _e466 = _step661.value;
                      o.consumable.consume(_e466, n.name);
                    }
                  } catch (err) {
                    _iterator661.e(err);
                  } finally {
                    _iterator661.f();
                  }

                  o.consumable.consume(i.item, n.name);
                };
              };

              t.conversion["for"]("dataDowncast").add(function (t) {
                t.on("addMarker:suggestion:formatBlock", function (t, n, i) {
                  i.options.showSuggestionHighlights && e({
                    showActiveMarkers: !1
                  })(t, n, i);
                }, {
                  priority: "highest"
                });
              }), t.conversion["for"]("dataDowncast").markerToData({
                model: "suggestion",
                view: function view(t, e) {
                  return e.options.showSuggestionHighlights ? null : {
                    group: "suggestion",
                    name: t.substr("suggestion".length + 1)
                  };
                }
              }), t.conversion["for"]("upcast").elementToElement({
                view: {
                  name: "suggestion",
                  attribute: {
                    id: /^\w/,
                    suggestionType: /^\w/
                  }
                },
                model: function model(t, _ref162) {
                  var e = _ref162.writer;
                  var n = "suggestion:" + t.getAttribute("suggestion-type") + ":" + t.getAttribute("id");
                  return t.getAttribute("marker-count") && (n += ":" + t.getAttribute("marker-count")), e.createElement("$marker", {
                    "data-name": n
                  });
                }
              }), t.conversion["for"]("upcast").dataToMarker({
                view: "suggestion"
              }), t.conversion["for"]("editingDowncast").add(function (t) {
                t.on("addMarker:suggestion:formatBlock", e(), {
                  priority: "high"
                });
              }), t.conversion["for"]("editingDowncast").add(function (t) {
                t.on("removeMarker:suggestion:formatBlock", function (t, e, n) {
                  var i = n.mapper.markerNameToElements(e.markerName);

                  if (i) {
                    var _iterator662 = _createForOfIteratorHelper(i),
                        _step662;

                    try {
                      for (_iterator662.s(); !(_step662 = _iterator662.n()).done;) {
                        var _t533 = _step662.value;
                        _t533.getCustomProperty("addHighlight") || (n.writer.removeClass(["ck-suggestion-marker", "ck-suggestion-marker-formatBlock", "ck-suggestion-marker--active"], _t533), n.writer.removeAttribute("data-suggestion", _t533), n.mapper.unbindElementFromMarkerName(_t533, e.markerName));
                      }
                    } catch (err) {
                      _iterator662.e(err);
                    } finally {
                      _iterator662.f();
                    }
                  }
                }, {
                  priority: "high"
                });
              }), t.model.document.registerPostFixer(function (e) {
                var n = !1;
                var i = Array.from(t.model.document.differ.getChangedMarkers());

                for (var _i329 = 0, _i328 = i; _i329 < _i328.length; _i329++) {
                  var _i328$_i = _i328[_i329],
                      _r235 = _i328$_i.name,
                      _s65 = _i328$_i.data;

                  var _this518$_splitMarker4 = _this518._splitMarkerName(_r235),
                      _i330 = _this518$_splitMarker4.group,
                      _a97 = _this518$_splitMarker4.type,
                      _c33 = _this518$_splitMarker4.id;

                  if ("suggestion" !== _i330) continue;

                  var _l21 = _this518._suggestions.get(_c33);

                  if (null != _s65.newRange) if ("formatInline" == _a97 && (n = n || SI(_s65.newRange, _r235, e, t.model.schema)), _s65.newRange.isCollapsed || "$graveyard" == _s65.newRange.root.rootName || "formatBlock" == _a97 && !OI(_s65.newRange) || "deletion" == _a97 && (EI(o = _s65.newRange) || function (t) {
                    return t.start.parent == t.end.nodeBefore && t.start.isAtEnd;
                  }(o))) e.removeMarker(_r235), n = !0;else {
                    if (!_l21 || !_l21.isInContent) continue;
                    n = !!_this518._joinWithAdjacentSuggestions(_l21) || n;
                  }
                }

                var o;
                return n;
              }), t.model.document.registerPostFixer(function (e) {
                var n = !1;

                var _iterator663 = _createForOfIteratorHelper(t.model.document.differ.getChanges()),
                    _step663;

                try {
                  for (_iterator663.s(); !(_step663 = _iterator663.n()).done;) {
                    var _i331 = _step663.value;
                    if ("insert" != _i331.type) continue;

                    var _o172 = _i331.position.getShiftedBy(_i331.length);

                    if (_o172.isAtEnd) {
                      var _iterator664 = _createForOfIteratorHelper(_this518._suggestions.values()),
                          _step664;

                      try {
                        for (_iterator664.s(); !(_step664 = _iterator664.n()).done;) {
                          var _r236 = _step664.value;
                          if (_r236.isMultiRange || !_r236.isInContent) continue;
                          if ("formatBlock" != _r236.type) continue;

                          var _s66 = _r236.getFirstRange();

                          if (_s66.start.parent != _s66.end.parent && _s66.end.isEqual(_i331.position)) {
                            var _i332 = t.model.createRange(_s66.start, _o172);

                            e.updateMarker(_r236.getFirstMarker(), {
                              range: _i332
                            }), n = !0;
                          }
                        }
                      } catch (err) {
                        _iterator664.e(err);
                      } finally {
                        _iterator664.f();
                      }
                    }
                  }
                } catch (err) {
                  _iterator663.e(err);
                } finally {
                  _iterator663.f();
                }

                return n;
              }), t.model.markers.on("update:suggestion", function (t, e, n) {
                if (null == n) {
                  var _this518$_splitMarker5 = _this518._splitMarkerName(e.name),
                      _t534 = _this518$_splitMarker5.id,
                      _n390 = _this518._suggestions.get(_t534);

                  _n390 && _n390.addMarkerName(e.name);
                }
              }), t.model.document.on("change:data", function () {
                var e = Array.from(t.model.document.differ.getChangedMarkers());
                e.sort(function (t, e) {
                  var n = t.data.oldRange,
                      i = e.data.oldRange;
                  return null === n && null === i ? 0 : null === n && null !== i ? -1 : null !== n && null === i ? 1 : n.start.isBefore(i.start) ? -1 : 1;
                });
                var n = new Set();

                for (var _i333 = 0, _e467 = e; _i333 < _e467.length; _i333++) {
                  var _e467$_i = _e467[_i333],
                      _t535 = _e467$_i.name,
                      _i334 = _e467$_i.data;

                  var _this518$_splitMarker6 = _this518._splitMarkerName(_t535),
                      _e468 = _this518$_splitMarker6.group,
                      _o173 = _this518$_splitMarker6.id;

                  if ("suggestion" === _e468 && (null === _i334.oldRange && _this518._handleNewSuggestionMarker(_t535), null === _i334.newRange)) {
                    var _t536 = _this518._suggestions.get(_o173);

                    _t536.isInContent ? n.add(_t536) : _this518._removeSuggestion(_t536);
                  }
                }

                for (var _i335 = 0, _e469 = e; _i335 < _e469.length; _i335++) {
                  var _e469$_i = _e469[_i335],
                      _t537 = _e469$_i.name,
                      _i336 = _e469$_i.data;

                  var _this518$_splitMarker7 = _this518._splitMarkerName(_t537),
                      _e470 = _this518$_splitMarker7.group,
                      _o174 = _this518$_splitMarker7.id;

                  if ("suggestion" !== _e470) continue;

                  var _r237 = _this518._suggestions.get(_o174);

                  null != _i336.newRange && null != _i336.oldRange && (_this518._refreshSuggestionsChain(_r237), n.add(_r237.head));
                }

                var _iterator665 = _createForOfIteratorHelper(n),
                    _step665;

                try {
                  for (_iterator665.s(); !(_step665 = _iterator665.n()).done;) {
                    var _t538 = _step665.value;

                    _this518.fire("suggestionChanged", _t538);
                  }
                } catch (err) {
                  _iterator665.e(err);
                } finally {
                  _iterator665.f();
                }

                n.clear();
              }), t.model.on("applyOperation", function (e, n) {
                var i = n[0];
                if (!_this518._suggestions.size) return;
                if (!i.isDocumentOperation) return;
                if ("transparent" == i.batch.type) return;
                var o, r;

                switch (i.type) {
                  case "insert":
                    o = t.model.createPositionAt(i.position), r = o.getShiftedBy(i.howMany);
                    break;

                  case "split":
                    o = t.model.createPositionAt(i.splitPosition), r = t.model.createPositionAt(i.moveTargetPosition);
                    break;

                  case "move":
                    o = t.model.createPositionAt(i.targetPosition), r = o.getShiftedBy(i.howMany);
                    break;

                  default:
                    return;
                }

                var s = t.model.createRange(o, r);
                t.model.change(function () {
                  var _iterator666 = _createForOfIteratorHelper(_this518._findSuggestions(s)),
                      _step666;

                  try {
                    for (_iterator666.s(); !(_step666 = _iterator666.n()).done;) {
                      var _step666$value = _step666.value,
                          _t539 = _step666$value.suggestion,
                          _e471 = _step666$value.meta;
                      if (_t539.isMultiRange) continue;
                      if ("formatInline" == _t539.type) continue;

                      var _n391 = _t539.data && _t539.data.multipleBlocks;

                      ("formatBlock" != _t539.type || "split" == i.type && !_n391) && (_e471.containsRangeInObject || "insertion" == _t539.type && _e471.isOwn || _t539.getFirstRange().containsRange(s) && _this518._breakSuggestionMarker(_t539, o, r));
                    }
                  } catch (err) {
                    _iterator666.e(err);
                  } finally {
                    _iterator666.f();
                  }
                });
              }, {
                priority: "lowest"
              }), t.model.on("deleteContent", function (e, n) {
                var i = n[0],
                    o = n[1];
                if (o && o.forceDefaultExecution) return;
                if (_this518._isForcedDefaultExecutionBlock) return;
                if (!_this518.trackChangesCommand.value) return;
                if (i.isCollapsed) return;

                var r = t.model.schema,
                    _i$getFirstRange = i.getFirstRange(),
                    s = _i$getFirstRange.start,
                    a = _i$getFirstRange.end,
                    c = s.nodeAfter && r.isObject(s.nodeAfter) ? null : r.getNearestSelectionRange(s, "forward"),
                    l = a.nodeBefore && r.isObject(a.nodeBefore) ? null : r.getNearestSelectionRange(a, "backward"),
                    d = t.model.createRange(c ? c.start : s, l ? l.end : a);

                t.model.change(function (e) {
                  _this518.markDeletion(d);

                  var n = t.model.schema.getNearestSelectionRange(d.start);
                  i.is("documentSelection") ? e.setSelection(n) : i.setTo(n);
                }), e.stop();
              }, {
                priority: Os["default"].normal + 10
              }), t.model.on("insertContent", function (e, n) {
                var i = n[n.length - 1];
                i && i.forceDefaultExecution || _this518._isForcedDefaultExecutionBlock || _this518.trackChangesCommand.value && (t.model.change(function () {
                  var i = t.model.insertContent(n[0], n[1], n[2], n[3], {
                    forceDefaultExecution: !0
                  });
                  if (!i) return;
                  e["return"] = i.clone();
                  var o = i.end.nodeBefore,
                      r = t.model.schema;
                  o && r.isBlock(o) && !r.isObject(o) && (i = t.model.createRange(i.start, t.model.createPositionAt(o, "end"))), _this518.markInsertion(i);
                }), e.stop());
              }, {
                priority: "high"
              }), this.trackChangesCommand = new yE(t, this._enabledCommands), this.editor.commands.add("trackChanges", this.trackChangesCommand), this.enableCommand("trackChanges");
              var n = new TE(t, this._suggestions);
              t.commands.add("acceptSuggestion", n), this.enableCommand("acceptSuggestion");
              var i = new SE(t, this._suggestions);
              t.commands.add("discardSuggestion", i), this.enableCommand("discardSuggestion"), t.commands.add("acceptAllSuggestions", new NE(t, n, this._suggestions)), this.enableCommand("acceptAllSuggestions"), t.commands.add("discardAllSuggestions", new HE(t, i, this._suggestions)), this.enableCommand("discardAllSuggestions"), t.commands.add("acceptSelectedSuggestions", new FE(t, n, this._suggestions)), this.enableCommand("acceptSelectedSuggestions"), t.commands.add("discardSelectedSuggestions", new $E(t, i, this._suggestions)), this.enableCommand("discardSelectedSuggestions");
              var o = t.plugins.get(nA);
              this.listenTo(o, "addComment", function (t, _ref163) {
                var e = _ref163.threadId;

                var n = _this518._suggestions.get(e);

                n && n.commentThread && 1 === n.commentThread.length && _this518._updateSuggestionData(e, {
                  hasComments: !0
                });
              }, {
                priority: "low"
              }), this.listenTo(o, "removeComment", function (t, _ref164) {
                var e = _ref164.threadId;

                var n = _this518._suggestions.get(e);

                n && n.commentThread && !n.commentThread.length && _this518._updateSuggestionData(e, {
                  hasComments: !1
                });
              }, {
                priority: "low"
              });
            }
          }, {
            key: "adapter",
            get: function get() {
              return this._adapter;
            },
            set: function set(t) {
              if (this._adapter) throw new rn["default"]("track-changes-adapter-already-set", this);
              this._adapter = t;
            }
          }, {
            key: "getSuggestions",
            value: function getSuggestions() {
              var _ref165 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                  _ref165$skipNotAttach = _ref165.skipNotAttached,
                  t = _ref165$skipNotAttach === void 0 ? !1 : _ref165$skipNotAttach,
                  _ref165$toJSON = _ref165.toJSON,
                  e = _ref165$toJSON === void 0 ? !1 : _ref165$toJSON;

              var n = [];

              var _iterator667 = _createForOfIteratorHelper(this._suggestions.values()),
                  _step667;

              try {
                for (_iterator667.s(); !(_step667 = _iterator667.n()).done;) {
                  var _e472 = _step667.value;
                  t && !_e472.isInContent || n.push(_e472);
                }
              } catch (err) {
                _iterator667.e(err);
              } finally {
                _iterator667.f();
              }

              return e ? n.map(function (t) {
                return t.toJSON();
              }) : n;
            }
          }, {
            key: "getSuggestion",
            value: function getSuggestion(t) {
              var e = this._suggestions.get(t);

              if (!e) throw new rn["default"]("track-changes-suggestion-not-found", this);
              return e;
            }
          }, {
            key: "hasSuggestion",
            value: function hasSuggestion(t) {
              return this._suggestions.has(t);
            }
          }, {
            key: "addSuggestionData",
            value: function addSuggestionData(t) {
              var e = t.id,
                  n = t.authorId,
                  _t$type$split = t.type.split(":"),
                  _t$type$split2 = _slicedToArray(_t$type$split, 2),
                  i = _t$type$split2[0],
                  o = _t$type$split2[1],
                  r = this._suggestions.get(e) || this._createSuggestion(i, o, e, n);

              switch (this._addThreadToSuggestion(r), this._checkSuggestionCorrectness(r, i, o || null, n), r.createdAt = t.createdAt, t.data && (r.data = t.data), t.attributes && (r.attributes = t.attributes), this._adapter && this._adapter.addSuggestion || (r._saved = !0), this._suggestionState.get(r)) {
                case "notReady":
                  this._suggestionState.set(r, "dataReady");

                  break;

                case "markerReady":
                  r.isInContent ? (this._suggestionState.set(r, "ready"), this.fire("suggestionLoaded", r)) : this._suggestionState.set(r, "removed");
              }

              return r;
            }
          }, {
            key: "acceptSuggestion",
            value: function acceptSuggestion(t) {
              var _this519 = this;

              this.forceDefaultExecution(function () {
                _this519.editor.model.change(function () {
                  var _iterator668 = _createForOfIteratorHelper(t.getAllAdjacentSuggestions()),
                      _step668;

                  try {
                    for (_iterator668.s(); !(_step668 = _iterator668.n()).done;) {
                      var _e473 = _step668.value;

                      _e473.accept();
                    }
                  } catch (err) {
                    _iterator668.e(err);
                  } finally {
                    _iterator668.f();
                  }
                });
              });
            }
          }, {
            key: "discardSuggestion",
            value: function discardSuggestion(t) {
              var _this520 = this;

              this.forceDefaultExecution(function () {
                _this520.editor.model.change(function () {
                  var _iterator669 = _createForOfIteratorHelper(t.getAllAdjacentSuggestions()),
                      _step669;

                  try {
                    for (_iterator669.s(); !(_step669 = _iterator669.n()).done;) {
                      var _e474 = _step669.value;

                      _e474.discard();
                    }
                  } catch (err) {
                    _iterator669.e(err);
                  } finally {
                    _iterator669.f();
                  }
                });
              });
            }
          }, {
            key: "enableCommand",
            value: function enableCommand(t, e) {
              var _this521 = this;

              var n = this.editor.commands.get(t);
              if (!n) throw new rn["default"]("track-changes-command-not-found", this, {
                commandName: t
              });
              this._enabledCommands.add(n), e && n.on("execute", function (t, i) {
                _this521.trackChangesCommand.value && (_this521._isForcedDefaultExecutionBlock || i.length > 0 && i[i.length - 1] && i[i.length - 1].forceDefaultExecution || (e.apply(void 0, [function () {
                  for (var _len35 = arguments.length, t = new Array(_len35), _key35 = 0; _key35 < _len35; _key35++) {
                    t[_key35] = arguments[_key35];
                  }

                  return n.execute.apply(n, t.concat([{
                    forceDefaultExecution: !0
                  }]));
                }].concat(_toConsumableArray(i))), t.stop()));
              }, {
                priority: "high"
              });
            }
          }, {
            key: "forceDefaultExecution",
            value: function forceDefaultExecution(t) {
              var e, n;
              var i = this._isForcedDefaultExecutionBlock;
              this._isForcedDefaultExecutionBlock = !0;

              try {
                e = t();
              } catch (t) {
                n = t;
              }

              return i || (this._isForcedDefaultExecutionBlock = !1), n && rn["default"].rethrowUnexpectedError(n, this), e;
            }
          }, {
            key: "markInsertion",
            value: function markInsertion(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              if (t.isCollapsed) return null;
              var i = this.editor.plugins.get("Users").me;

              var _iterator670 = _createForOfIteratorHelper(this._findSuggestions(t, "insertion")),
                  _step670;

              try {
                for (_iterator670.s(); !(_step670 = _iterator670.n()).done;) {
                  var _step670$value = _step670.value,
                      _n392 = _step670$value.suggestion,
                      _i337 = _step670$value.meta;

                  if (_i337.isOwn) {
                    if (!_i337.isNextTo) return _n392;

                    if (e == _n392.subType) {
                      var _e475 = _n392.getFirstRange();

                      return _e475.start.isEqual(t.end) ? this._setSuggestionRange(_n392, this._model.createRange(t.start, _e475.end)) : this._setSuggestionRange(_n392, this._model.createRange(_e475.start, t.end)), _n392;
                    }
                  }
                }
              } catch (err) {
                _iterator670.e(err);
              } finally {
                _iterator670.f();
              }

              var o = Object(Xo.a)(),
                  r = i.id,
                  s = e ? "insertion:" + e : "insertion",
                  a = this._setSuggestionData({
                id: o,
                type: s,
                createdAt: new Date(),
                authorId: r,
                attributes: n
              });

              return this._addSuggestionMarker(s, o, r, t), a;
            }
          }, {
            key: "markMultiRangeInsertion",
            value: function markMultiRangeInsertion(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "multi";
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

              var i = this.editor.plugins.get("Users").me,
                  o = this._suggestionFactory.getSuggestionCallback("insertion", e, "join");

              var _iterator671 = _createForOfIteratorHelper(this.getSuggestions()),
                  _step671;

              try {
                for (_iterator671.s(); !(_step671 = _iterator671.n()).done;) {
                  var _n393 = _step671.value;

                  if (_n393.author.id == i.id && "insertion" == _n393.type && _n393.subType == e && (o(_n393.getRanges(), t) || o(t, _n393.getRanges()))) {
                    var _iterator674 = _createForOfIteratorHelper(t),
                        _step674;

                    try {
                      for (_iterator674.s(); !(_step674 = _iterator674.n()).done;) {
                        var _e476 = _step674.value;

                        _n393.addRange(_e476);
                      }
                    } catch (err) {
                      _iterator674.e(err);
                    } finally {
                      _iterator674.f();
                    }

                    return _n393;
                  }
                }
              } catch (err) {
                _iterator671.e(err);
              } finally {
                _iterator671.f();
              }

              var _iterator672 = _createForOfIteratorHelper(t),
                  _step672;

              try {
                for (_iterator672.s(); !(_step672 = _iterator672.n()).done;) {
                  var _e477 = _step672.value;

                  var _iterator675 = _createForOfIteratorHelper(this._findSuggestions(_e477, "insertion")),
                      _step675;

                  try {
                    for (_iterator675.s(); !(_step675 = _iterator675.n()).done;) {
                      var _step675$value = _step675.value,
                          _n394 = _step675$value.suggestion,
                          _i338 = _step675$value.meta;
                      if (!_i338.isOwn) continue;

                      var _e478 = !0;

                      var _iterator676 = _createForOfIteratorHelper(_n394.getRanges()),
                          _step676;

                      try {
                        for (_iterator676.s(); !(_step676 = _iterator676.n()).done;) {
                          var _i339 = _step676.value;

                          var _iterator677 = _createForOfIteratorHelper(t),
                              _step677;

                          try {
                            for (_iterator677.s(); !(_step677 = _iterator677.n()).done;) {
                              var _n395 = _step677.value;

                              if (!_i339.containsRange(_n395)) {
                                _e478 = !1;
                                break;
                              }
                            }
                          } catch (err) {
                            _iterator677.e(err);
                          } finally {
                            _iterator677.f();
                          }
                        }
                      } catch (err) {
                        _iterator676.e(err);
                      } finally {
                        _iterator676.f();
                      }

                      if (_e478) return _n394;
                    }
                  } catch (err) {
                    _iterator675.e(err);
                  } finally {
                    _iterator675.f();
                  }
                }
              } catch (err) {
                _iterator672.e(err);
              } finally {
                _iterator672.f();
              }

              var r = Object(Xo.a)(),
                  s = i.id,
                  a = "insertion:" + e,
                  c = this._setSuggestionData({
                id: r,
                type: a,
                createdAt: new Date(),
                authorId: s,
                attributes: n
              });

              var _iterator673 = _createForOfIteratorHelper(t),
                  _step673;

              try {
                for (_iterator673.s(); !(_step673 = _iterator673.n()).done;) {
                  var _e479 = _step673.value;

                  this._addSuggestionMarker(a, r, s, _e479, GE.getMultiRangeId());
                }
              } catch (err) {
                _iterator673.e(err);
              } finally {
                _iterator673.f();
              }

              return c;
            }
          }, {
            key: "markInlineFormat",
            value: function markInlineFormat(t, e) {
              var _this522 = this;

              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
              if (n = n || II(e), t.isCollapsed) return;
              var o = this.editor.plugins.get("Users").me,
                  r = [];

              var _iterator678 = _createForOfIteratorHelper(this._findSuggestions(t, "insertion")),
                  _step678;

              try {
                for (_iterator678.s(); !(_step678 = _iterator678.n()).done;) {
                  var _step678$value = _step678.value,
                      _e482 = _step678$value.suggestion,
                      _n397 = _step678$value.meta;
                  _n397.isOwn && !_n397.isInsideObject && r.push.apply(r, _toConsumableArray(_e482.getRanges()));
                }
              } catch (err) {
                _iterator678.e(err);
              } finally {
                _iterator678.f();
              }

              var s = function (t, e) {
                var n = [];

                var _iterator679 = _createForOfIteratorHelper(e),
                    _step679;

                try {
                  for (_iterator679.s(); !(_step679 = _iterator679.n()).done;) {
                    var _i340 = _step679.value;

                    var _e480 = t.getIntersection(_i340);

                    _e480 && n.push(_e480);
                  }
                } catch (err) {
                  _iterator679.e(err);
                } finally {
                  _iterator679.f();
                }

                return n;
              }(t, r),
                  a = function (e, n) {
                var i = [t];

                var _iterator680 = _createForOfIteratorHelper(n),
                    _step680;

                try {
                  for (_iterator680.s(); !(_step680 = _iterator680.n()).done;) {
                    var _t540 = _step680.value;
                    var _e481 = 0;

                    for (; _e481 < i.length;) {
                      var _n396 = i[_e481].getDifference(_t540);

                      i.splice.apply(i, [_e481, 1].concat(_toConsumableArray(_n396))), _e481 += _n396.length;
                    }
                  }
                } catch (err) {
                  _iterator680.e(err);
                } finally {
                  _iterator680.f();
                }

                return i;
              }(0, r);

              s.length && this._model.change(function () {
                var _iterator681 = _createForOfIteratorHelper(s),
                    _step681;

                try {
                  var _loop25 = function _loop25() {
                    var t = _step681.value;

                    var o = _this522._suggestionFactory.getSuggestionCallback("formatInline", n, "accept");

                    _this522.forceDefaultExecution(function () {
                      return o([t], e, i);
                    });
                  };

                  for (_iterator681.s(); !(_step681 = _iterator681.n()).done;) {
                    _loop25();
                  }
                } catch (err) {
                  _iterator681.e(err);
                } finally {
                  _iterator681.f();
                }
              });

              var _iterator682 = _createForOfIteratorHelper(a),
                  _step682;

              try {
                for (_iterator682.s(); !(_step682 = _iterator682.n()).done;) {
                  var _t541 = _step682.value;
                  var _r238 = null,
                      _s67 = _t541.start,
                      _a98 = _t541.end;

                  var _iterator683 = _createForOfIteratorHelper(this._findSuggestions(_t541, "formatInline")),
                      _step683;

                  try {
                    for (_iterator683.s(); !(_step683 = _iterator683.n()).done;) {
                      var _step683$value = _step683.value,
                          _e483 = _step683$value.suggestion,
                          _i341 = _step683$value.meta;
                      if (!_i341.isOwn) continue;
                      if (_e483.subType != n) continue;

                      var _o175 = _e483.getFirstRange();

                      if (_o175.containsRange(_t541, !0)) return;
                      _s67 = _s67.isBefore(_o175.start) ? _s67 : _o175.start, _a98 = _a98.isAfter(_o175.end) ? _a98 : _o175.end, _r238 ? _o175.start.isBefore(_r238.getFirstRange().start) ? (_r238.removeMarkers(), _r238 = _e483) : _e483.removeMarkers() : _r238 = _e483;
                    }
                  } catch (err) {
                    _iterator683.e(err);
                  } finally {
                    _iterator683.f();
                  }

                  var _c34 = this._model.createRange(_s67, _a98);

                  if (_r238) this._setSuggestionRange(_r238, _c34);else {
                    var _t542 = Object(Xo.a)(),
                        _r239 = o.id;

                    this._setSuggestionData({
                      id: _t542,
                      type: "formatInline:" + n,
                      data: e,
                      createdAt: new Date(),
                      authorId: _r239,
                      attributes: i
                    }), this._addSuggestionMarker("formatInline:" + n, _t542, _r239, _c34);
                  }
                }
              } catch (err) {
                _iterator682.e(err);
              } finally {
                _iterator682.f();
              }
            }
          }, {
            key: "markBlockFormat",
            value: function markBlockFormat(t, e) {
              var _this523 = this;

              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
              var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
              e.formatGroupId || (e.formatGroupId = e.commandName), e.multipleBlocks = t.is("range"), i = i || II(e);
              var r = n.map(function (t) {
                return RI(t, _this523._model);
              }),
                  s = t.is("range") ? t : RI(t, this._model);
              r.push(s);
              var a = !0;

              var _iterator684 = _createForOfIteratorHelper(r),
                  _step684;

              try {
                for (_iterator684.s(); !(_step684 = _iterator684.n()).done;) {
                  var _t544 = _step684.value;

                  if (!this._rangeIsInLocalUserInsertion(_t544)) {
                    a = !1;
                    break;
                  }
                }
              } catch (err) {
                _iterator684.e(err);
              } finally {
                _iterator684.f();
              }

              if (a) {
                var _t543 = this._suggestionFactory.getSuggestionCallback("formatBlock", i, "accept");

                return void this.forceDefaultExecution(function () {
                  return _t543([s], e, o);
                });
              }

              var c = null,
                  l = s.start,
                  d = s.end;

              var _iterator685 = _createForOfIteratorHelper(this._findSuggestions(s, "formatBlock")),
                  _step685;

              try {
                for (_iterator685.s(); !(_step685 = _iterator685.n()).done;) {
                  var _step685$value = _step685.value,
                      _t545 = _step685$value.suggestion,
                      _n398 = _step685$value.meta;
                  if (!_n398.isOwn || _n398.isNextTo || _n398.containsRangeInObject || _n398.isInsideObject) continue;
                  if (_t545.data.formatGroupId != e.formatGroupId) continue;

                  var _o176 = _t545.getFirstRange();

                  if (_t545.subType == i) {
                    if (_o176.containsRange(s, !0)) return;
                    l = l.isBefore(_o176.start) ? l : _o176.start, d = d.isAfter(_o176.end) ? d : _o176.end, c ? _o176.start.isBefore(c.getFirstRange().start) ? (c.removeMarkers(), c = _t545) : _t545.removeMarkers() : c = _t545;
                  } else {
                    var _e484 = s.getIntersection(_o176);

                    this._cutOutSuggestionMarker(_t545, _e484);
                  }
                }
              } catch (err) {
                _iterator685.e(err);
              } finally {
                _iterator685.f();
              }

              var u = this.editor.plugins.get("Users").me,
                  h = Object(Xo.a)(),
                  f = u.id;
              c ? this._setSuggestionRange(c, this._model.createRange(l, d)) : (this._setSuggestionData({
                id: h,
                type: "formatBlock:" + i,
                data: e,
                createdAt: new Date(),
                authorId: f,
                attributes: o
              }), this._addSuggestionMarker("formatBlock:" + i, h, f, this._model.createRange(l, d)));
            }
          }, {
            key: "markMultiRangeBlockFormat",
            value: function markMultiRangeBlockFormat(t, e) {
              var _this524 = this;

              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
              var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
              var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
              e.formatGroupId || (e.formatGroupId = e.commandName), e.multipleBlocks = !1, i = i || II(e);
              var r = n.map(function (t) {
                return RI(t, _this524._model);
              }),
                  s = t.map(function (t) {
                return RI(t, _this524._model);
              });
              r.push.apply(r, _toConsumableArray(s));
              var a = !0;

              var _iterator686 = _createForOfIteratorHelper(r),
                  _step686;

              try {
                for (_iterator686.s(); !(_step686 = _iterator686.n()).done;) {
                  var _t547 = _step686.value;

                  if (!this._rangeIsInLocalUserInsertion(_t547)) {
                    a = !1;
                    break;
                  }
                }
              } catch (err) {
                _iterator686.e(err);
              } finally {
                _iterator686.f();
              }

              if (a) {
                var _t546 = this._suggestionFactory.getSuggestionCallback("formatBlock", i, "accept");

                return void this.forceDefaultExecution(function () {
                  return _t546(s, e, o);
                });
              }

              var c = this.editor.plugins.get("Users").me;

              var _iterator687 = _createForOfIteratorHelper(this.getSuggestions()),
                  _step687;

              try {
                for (_iterator687.s(); !(_step687 = _iterator687.n()).done;) {
                  var _t548 = _step687.value;
                  if (_t548.author.id != c.id) continue;
                  if ("formatBlock" != _t548.type || _t548.data.formatGroupId != e.formatGroupId) continue;

                  var _n399 = _t548.subType == i;

                  for (var _e485 = 0; _e485 < s.length; _e485++) {
                    var _i342 = s[_e485];

                    var _iterator690 = _createForOfIteratorHelper(_t548.getMarkers()),
                        _step690;

                    try {
                      for (_iterator690.s(); !(_step690 = _iterator690.n()).done;) {
                        var _o177 = _step690.value;

                        var _r240 = _o177.getRange();

                        if (_i342.isEqual(_r240)) {
                          _n399 ? (s.splice(_e485, 1), _e485--) : _t548.removeMarker(_o177.name);
                          break;
                        }
                      }
                    } catch (err) {
                      _iterator690.e(err);
                    } finally {
                      _iterator690.f();
                    }
                  }
                }
              } catch (err) {
                _iterator687.e(err);
              } finally {
                _iterator687.f();
              }

              if (0 == s.length) return;

              var l = this._suggestionFactory.getSuggestionCallback("formatBlock", i, "join");

              var _iterator688 = _createForOfIteratorHelper(this.getSuggestions()),
                  _step688;

              try {
                for (_iterator688.s(); !(_step688 = _iterator688.n()).done;) {
                  var _t549 = _step688.value;

                  if (_t549.author.id == c.id && "formatBlock" == _t549.type && _t549.data.formatGroupId == e.formatGroupId && _t549.subType == i && (l(_t549.getRanges(), s) || l(s, _t549.getRanges()))) {
                    var _iterator691 = _createForOfIteratorHelper(s),
                        _step691;

                    try {
                      for (_iterator691.s(); !(_step691 = _iterator691.n()).done;) {
                        var _e486 = _step691.value;

                        _t549.addRange(_e486);
                      }
                    } catch (err) {
                      _iterator691.e(err);
                    } finally {
                      _iterator691.f();
                    }

                    return _t549;
                  }
                }
              } catch (err) {
                _iterator688.e(err);
              } finally {
                _iterator688.f();
              }

              var d = Object(Xo.a)(),
                  u = c.id,
                  h = "formatBlock:" + i,
                  f = this._setSuggestionData({
                id: d,
                type: h,
                data: e,
                createdAt: new Date(),
                authorId: u,
                attributes: o
              });

              var _iterator689 = _createForOfIteratorHelper(s),
                  _step689;

              try {
                for (_iterator689.s(); !(_step689 = _iterator689.n()).done;) {
                  var _t550 = _step689.value;

                  this._addSuggestionMarker(h, d, u, _t550, GE.getMultiRangeId());
                }
              } catch (err) {
                _iterator689.e(err);
              } finally {
                _iterator689.f();
              }

              return f;
            }
          }, {
            key: "markDeletion",
            value: function markDeletion(t) {
              var _this525 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              if (t.isCollapsed) return null;
              var i = this.editor.plugins.get("Users").me,
                  o = new fa(t.start, t.end);

              var _iterator692 = _createForOfIteratorHelper(this._findSuggestions(o, "insertion")),
                  _step692;

              try {
                for (_iterator692.s(); !(_step692 = _iterator692.n()).done;) {
                  var _step692$value = _step692.value,
                      _t552 = _step692$value.suggestion,
                      _i343 = _step692$value.meta;
                  if (_i343.isOwn && !_i343.isNextTo) if (_t552.isMultiRange) {
                    var _i344 = _t552.getRanges().filter(function (t) {
                      return "$graveyard" != t.root.rootName;
                    });

                    if (_i344.every(function (t) {
                      return o.containsRange(t, !0);
                    }) && _t552.discard(), _i344.some(function (t) {
                      return t.containsRange(o, !0);
                    })) {
                      var _ret8 = function () {
                        var t = _this525._suggestionFactory.getSuggestionCallback("deletion", e, "accept");

                        return {
                          v: (_this525.forceDefaultExecution(function () {
                            return t([o], null, n);
                          }), null)
                        };
                      }();

                      if (typeof _ret8 === "object") return _ret8.v;
                    }
                  } else {
                    var _e487 = o.getIntersection(_t552.getFirstRange());

                    _t552._onDiscard([_e487], null, n);
                  }
                }
              } catch (err) {
                _iterator692.e(err);
              } finally {
                _iterator692.f();
              }

              if (o.detach(), o.isCollapsed || "$graveyard" == o.root.rootName) return null;
              var r = null,
                  s = o.start,
                  a = o.end;

              var _iterator693 = _createForOfIteratorHelper(this._findSuggestions(o, "deletion")),
                  _step693;

              try {
                for (_iterator693.s(); !(_step693 = _iterator693.n()).done;) {
                  var _step693$value = _step693.value,
                      _t553 = _step693$value.suggestion,
                      _e488 = _step693$value.meta;
                  if (_e488.isOwn) if (_t553.isMultiRange) {
                    var _e489 = !0;

                    var _iterator694 = _createForOfIteratorHelper(_t553.getRanges()),
                        _step694;

                    try {
                      for (_iterator694.s(); !(_step694 = _iterator694.n()).done;) {
                        var _n400 = _step694.value;
                        if (_n400.containsRange(o, !0)) return _t553;
                        o.containsRange(_n400) || (_e489 = !1);
                      }
                    } catch (err) {
                      _iterator694.e(err);
                    } finally {
                      _iterator694.f();
                    }

                    _e489 && _t553.discard();
                  } else {
                    var _e490 = _t553.getFirstRange();

                    if (_e490.containsRange(o, !0)) return _t553;
                    s = s.isBefore(_e490.start) ? s : _e490.start, a = a.isAfter(_e490.end) ? a : _e490.end, r ? _e490.start.isBefore(r.getFirstRange().start) ? (r.removeMarkers(), r = _t553) : _t553.removeMarkers() : r = _t553;
                  }
                }
              } catch (err) {
                _iterator693.e(err);
              } finally {
                _iterator693.f();
              }

              if (r) return this._setSuggestionRange(r, this._model.createRange(s, a)), r;
              {
                var _t551 = Object(Xo.a)(),
                    _o178 = this._model.createRange(s, a),
                    _r241 = i.id,
                    _c35 = e ? "deletion:" + e : "deletion",
                    _l22 = this._setSuggestionData({
                  id: _t551,
                  type: _c35,
                  createdAt: new Date(),
                  authorId: _r241,
                  attributes: n
                });

                return this._addSuggestionMarker(_c35, _t551, _r241, _o178), _l22;
              }
            }
          }, {
            key: "markMultiRangeDeletion",
            value: function markMultiRangeDeletion(t) {
              var _this526 = this;

              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "multi";
              var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
              var i = this.editor.plugins.get("Users").me,
                  o = t.map(function (t) {
                return new fa(t.start, t.end);
              }),
                  r = new Set();

              var _iterator695 = _createForOfIteratorHelper(o),
                  _step695;

              try {
                for (_iterator695.s(); !(_step695 = _iterator695.n()).done;) {
                  var _t554 = _step695.value;

                  var _iterator701 = _createForOfIteratorHelper(this._findSuggestions(_t554, "insertion")),
                      _step701;

                  try {
                    for (_iterator701.s(); !(_step701 = _iterator701.n()).done;) {
                      var _step701$value = _step701.value,
                          _e491 = _step701$value.suggestion,
                          _n401 = _step701$value.meta;
                      _n401.isOwn && !_n401.isNextTo && r.add(_e491);
                    }
                  } catch (err) {
                    _iterator701.e(err);
                  } finally {
                    _iterator701.f();
                  }
                }
              } catch (err) {
                _iterator695.e(err);
              } finally {
                _iterator695.f();
              }

              var _iterator696 = _createForOfIteratorHelper(r),
                  _step696;

              try {
                for (_iterator696.s(); !(_step696 = _iterator696.n()).done;) {
                  var _i345 = _step696.value;

                  if (_i345.isMultiRange) {
                    var _ret9 = function () {
                      var r = _i345.getRanges();

                      if ((!_i345.attributes || !_i345.attributes.skipNestingCheck) && r.every(function (t) {
                        return o.some(function (e) {
                          return e.containsRange(t, !0);
                        });
                      }) && _i345.discard(), o.every(function (t) {
                        return r.some(function (e) {
                          return e.containsRange(t, !0);
                        });
                      })) {
                        var _i346 = _this526._suggestionFactory.getSuggestionCallback("deletion", e, "accept");

                        return {
                          v: (_this526.forceDefaultExecution(function () {
                            return _i346(t, null, n);
                          }), null)
                        };
                      }
                    }();

                    if (typeof _ret9 === "object") return _ret9.v;
                  } else {
                    var _ret10 = function () {
                      var t = _i345.getFirstRange();

                      if (o.some(function (e) {
                        return e.containsRange(t, !0);
                      }) && _i345.discard(), o.every(function (e) {
                        return t.containsRange(e, !0);
                      })) {
                        var _t555 = _this526._suggestionFactory.getSuggestionCallback("deletion", e, "accept");

                        return {
                          v: (_this526.forceDefaultExecution(function () {
                            return _t555(o, null, n);
                          }), null)
                        };
                      }
                    }();

                    if (typeof _ret10 === "object") return _ret10.v;
                  }
                }
              } catch (err) {
                _iterator696.e(err);
              } finally {
                _iterator696.f();
              }

              var s = this._suggestionFactory.getSuggestionCallback("deletion", e, "join");

              var a = null;

              var _iterator697 = _createForOfIteratorHelper(this.getSuggestions()),
                  _step697;

              try {
                for (_iterator697.s(); !(_step697 = _iterator697.n()).done;) {
                  var _t556 = _step697.value;
                  if (_t556.author.id == i.id && _t556.isInContent && "deletion" == _t556.type && _t556.subType == e && (s(_t556.getRanges(), o) || s(o, _t556.getRanges()))) if (a) {
                    if (_t556.commentThread && _t556.commentThread.length) continue;

                    var _iterator702 = _createForOfIteratorHelper(_t556.getRanges()),
                        _step702;

                    try {
                      for (_iterator702.s(); !(_step702 = _iterator702.n()).done;) {
                        var _e492 = _step702.value;
                        a.isIntersectingWithRange(_e492) || a.addRange(_e492);
                      }
                    } catch (err) {
                      _iterator702.e(err);
                    } finally {
                      _iterator702.f();
                    }

                    _t556.removeMarkers();
                  } else {
                    a = _t556;

                    var _iterator703 = _createForOfIteratorHelper(o),
                        _step703;

                    try {
                      for (_iterator703.s(); !(_step703 = _iterator703.n()).done;) {
                        var _e493 = _step703.value;
                        _t556.isIntersectingWithRange(_e493) || _t556.addRange(_e493);
                      }
                    } catch (err) {
                      _iterator703.e(err);
                    } finally {
                      _iterator703.f();
                    }
                  }
                }
              } catch (err) {
                _iterator697.e(err);
              } finally {
                _iterator697.f();
              }

              if (a) return a;
              r.clear();

              var _iterator698 = _createForOfIteratorHelper(o),
                  _step698;

              try {
                for (_iterator698.s(); !(_step698 = _iterator698.n()).done;) {
                  var _t557 = _step698.value;

                  var _iterator704 = _createForOfIteratorHelper(this._findSuggestions(_t557, "deletion")),
                      _step704;

                  try {
                    for (_iterator704.s(); !(_step704 = _iterator704.n()).done;) {
                      var _step704$value = _step704.value,
                          _e494 = _step704$value.suggestion,
                          _n402 = _step704$value.meta;
                      _n402.isOwn && r.add(_e494);
                    }
                  } catch (err) {
                    _iterator704.e(err);
                  } finally {
                    _iterator704.f();
                  }
                }
              } catch (err) {
                _iterator698.e(err);
              } finally {
                _iterator698.f();
              }

              var _iterator699 = _createForOfIteratorHelper(r),
                  _step699;

              try {
                var _loop26 = function _loop26() {
                  var t = _step699.value;
                  var e = t.getRanges();
                  if ((!n || !n.skipNestingCheck) && o.every(function (t) {
                    return e.some(function (e) {
                      return e.containsRange(t, !0);
                    });
                  })) return {
                    v: t
                  };
                  (!t.attributes || !t.attributes.skipNestingCheck) && e.every(function (t) {
                    return o.some(function (e) {
                      return e.containsRange(t, !0);
                    });
                  }) && t.discard();
                };

                for (_iterator699.s(); !(_step699 = _iterator699.n()).done;) {
                  var _ret11 = _loop26();

                  if (typeof _ret11 === "object") return _ret11.v;
                }
              } catch (err) {
                _iterator699.e(err);
              } finally {
                _iterator699.f();
              }

              var c = Object(Xo.a)(),
                  l = i.id,
                  d = "deletion:" + e,
                  u = this._setSuggestionData({
                id: c,
                type: d,
                createdAt: new Date(),
                authorId: l,
                attributes: n
              });

              var _iterator700 = _createForOfIteratorHelper(o),
                  _step700;

              try {
                for (_iterator700.s(); !(_step700 = _iterator700.n()).done;) {
                  var _t558 = _step700.value;
                  _t558.detach(), _t558.isCollapsed || "$graveyard" == _t558.root.rootName || this._addSuggestionMarker(d, c, l, _t558, GE.getMultiRangeId());
                }
              } catch (err) {
                _iterator700.e(err);
              } finally {
                _iterator700.f();
              }

              return u;
            }
          }, {
            key: "_setSuggestionRange",
            value: function _setSuggestionRange(t, e) {
              var n = t.getFirstMarker();

              this._model.change(function (t) {
                t.updateMarker(n, {
                  range: e
                });
              });
            }
          }, {
            key: "_addThreadToSuggestion",
            value: function _addThreadToSuggestion(t) {
              var e = t.id,
                  n = this.editor.config.get("collaboration.channelId");
              this._commentsRepository.hasCommentThread(e) || this._commentsRepository.addCommentThread({
                channelId: n,
                threadId: e
              });

              var i = this._commentsRepository.getCommentThread(e);

              i.unbind("isRemovable"), i.isRemovable = !1, t.commentThread = i;
            }
          }, {
            key: "_checkSuggestionCorrectness",
            value: function _checkSuggestionCorrectness(t, e, n, i) {
              if (t.type != e || t.subType != n || t.author.id != i) throw this.editor.isReadOnly = !0, new rn["default"]("track-changes-suggestion-data-mismatch", this);
            }
          }, {
            key: "_cutOutSuggestionMarker",
            value: function _cutOutSuggestionMarker(t, e) {
              var n = t.getFirstRange();
              if (e.isEqual(n)) t.removeMarkers();else if (n.containsRange(e)) {
                var _i347 = this._model.createPositionAt(e.start.nodeBefore, "end");

                this._setSuggestionRange(t, this._model.createRange(n.start, _i347));

                var _o179 = Object(Xo.a)(),
                    _r242 = t.author.id,
                    _s68 = t.type + ":" + t.subType;

                this._setSuggestionData({
                  id: _o179,
                  type: _s68,
                  createdAt: new Date(),
                  authorId: _r242,
                  data: t.data,
                  attributes: t.attributes
                });

                var _a99 = this._model.createPositionAt(e.end.parent, "after"),
                    _c36 = this._model.createRange(_a99, n.end);

                this._addSuggestionMarker(_s68, _o179, _r242, _c36);
              } else if (n.containsPosition(e.start)) {
                var _i348 = this._model.createPositionAt(e.start.nodeBefore, "end");

                this._setSuggestionRange(t, this._model.createRange(n.start, _i348));
              } else {
                var _i349 = this._model.createPositionAt(e.end.parent, "after");

                this._setSuggestionRange(t, this._model.createRange(_i349, n.end));
              }
            }
          }, {
            key: "_rangeIsInLocalUserInsertion",
            value: function _rangeIsInLocalUserInsertion(t) {
              var _iterator705 = _createForOfIteratorHelper(this._findSuggestions(t, "insertion")),
                  _step705;

              try {
                for (_iterator705.s(); !(_step705 = _iterator705.n()).done;) {
                  var _step705$value = _step705.value,
                      _e495 = _step705$value.suggestion,
                      _n403 = _step705$value.meta;
                  if (!_n403.isOwn) continue;

                  var _i350 = _e495.getRanges();

                  var _iterator706 = _createForOfIteratorHelper(_i350),
                      _step706;

                  try {
                    for (_iterator706.s(); !(_step706 = _iterator706.n()).done;) {
                      var _e496 = _step706.value;
                      if (!t.getDifference(_e496).length) return !0;
                    }
                  } catch (err) {
                    _iterator706.e(err);
                  } finally {
                    _iterator706.f();
                  }
                }
              } catch (err) {
                _iterator705.e(err);
              } finally {
                _iterator705.f();
              }

              return !1;
            }
          }, {
            key: "_getAuthorFromId",
            value: function _getAuthorFromId(t) {
              var e = this.editor.plugins.get("Users").getUser(t);
              if (!e) throw new rn["default"]("track-changes-user-not-found", this);
              return e;
            }
          }, {
            key: "_createSuggestion",
            value: function _createSuggestion(t, e, n, i) {
              var _this527 = this;

              var o = this._getAuthorFromId(i),
                  r = this._suggestionFactory.buildSuggestion(t, e, n, o, function (t) {
                return _this527._updateSuggestionData(n, {
                  attributes: t
                });
              });

              return this.listenTo(r, "accept", function () {
                _this527._updateSuggestionData(n, {
                  state: "accepted"
                });
              }, {
                priority: "high"
              }), this.listenTo(r, "discard", function () {
                _this527._updateSuggestionData(n, {
                  state: "rejected"
                });
              }, {
                priority: "high"
              }), this._suggestions.set(n, r), this._suggestionState.set(r, "notReady"), r;
            }
          }, {
            key: "_splitMarkerName",
            value: function _splitMarkerName(t) {
              var e = t.split(":");
              return {
                group: e[0],
                type: e[1],
                subType: e.length >= 5 ? e[2] : null,
                id: e.length < 5 ? e[2] : e[3],
                authorId: e.length < 5 ? e[3] : e[4],
                markerCount: 6 == e.length ? e[5] : null
              };
            }
          }, {
            key: "_breakSuggestionMarker",
            value: function _breakSuggestionMarker(t, e, n) {
              var i = t.getFirstRange(),
                  o = i.start,
                  r = i.end;

              this._setSuggestionRange(t, this._model.createRange(o, e));

              var s = Object(Xo.a)(),
                  a = t.author.id,
                  c = t.type + (t.subType ? ":" + t.subType : "");
              this._setSuggestionData({
                id: s,
                type: c,
                createdAt: new Date(),
                authorId: a,
                originalSuggestionId: t.id,
                data: t.data
              }), "formatBlock" == t.type && (n = this._model.createPositionBefore(n.parent)), this._addSuggestionMarker(c, s, a, this._model.createRange(n, r));
            }
          }, {
            key: "_findSuggestions",
            value: function _findSuggestions(t) {
              var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
              var n = [],
                  i = this._model.schema,
                  o = this.editor.plugins.get("Users").me;

              var _iterator707 = _createForOfIteratorHelper(this.getSuggestions()),
                  _step707;

              try {
                for (_iterator707.s(); !(_step707 = _iterator707.n()).done;) {
                  var _r243 = _step707.value;

                  if (_r243.isInContent && (!e || _r243.type == e)) {
                    var _iterator708 = _createForOfIteratorHelper(_r243.getRanges()),
                        _step708;

                    try {
                      for (_iterator708.s(); !(_step708 = _iterator708.n()).done;) {
                        var _e497 = _step708.value;

                        var _s69 = t.start.isEqual(_e497.end) || t.end.isEqual(_e497.start);

                        if (_s69 || t.getIntersection(_e497)) {
                          var _a100 = t.containsRange(_e497) && AI(i, _e497.start, t),
                              _c37 = _e497.containsRange(t) && AI(i, t.start, _e497);

                          n.push({
                            suggestion: _r243,
                            meta: {
                              isOwn: o == _r243.author,
                              isNextTo: _s69,
                              isInsideObject: _a100,
                              containsRangeInObject: _c37
                            }
                          });
                          break;
                        }
                      }
                    } catch (err) {
                      _iterator708.e(err);
                    } finally {
                      _iterator708.f();
                    }
                  }
                }
              } catch (err) {
                _iterator707.e(err);
              } finally {
                _iterator707.f();
              }

              return n;
            }
          }, {
            key: "_addSuggestionMarker",
            value: function _addSuggestionMarker(t, e, n, i) {
              var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;

              this._model.change(function (r) {
                var s = "suggestion:" + t + ":" + e + ":" + n;
                o && (s = s + ":" + o), r.addMarker(s, {
                  range: i,
                  usingOperation: !0,
                  affectsData: !0
                });
              });
            }
          }, {
            key: "_removeSuggestion",
            value: function _removeSuggestion(t) {
              var e = t.previous,
                  n = t.next;
              t.previous = null, null != e && (e.next = null), t.next = null, null != n && (n.previous = null), "ready" == this._suggestionState.get(t) && (this._suggestionState.set(t, "removed"), this.fire("suggestionUnloaded", t, e, n));
            }
          }, {
            key: "_setSuggestionData",
            value: function _setSuggestionData(t) {
              var _this528 = this;

              var e = t.id,
                  n = this.addSuggestionData(t);

              if (this._adapter && this._adapter.addSuggestion) {
                var _i351 = this.editor.plugins.get("PendingActions"),
                    _o180 = n.hasComments,
                    _r244 = n.subType ? n.type + ":" + n.subType : n.type,
                    _s70 = this.editor.locale.t,
                    _a101 = _i351.add(_s70({
                  string: "Unsaved change in suggestion.",
                  id: "PENDING_ACTION_SUGGESTION"
                })),
                    _c38 = {
                  id: e,
                  type: _r244,
                  hasComments: _o180,
                  data: t.data || null,
                  originalSuggestionId: t.originalSuggestionId || null,
                  attributes: n.attributes
                };

                this._adapter.addSuggestion(_c38).then(function (t) {
                  n._saved = !0, _i351.remove(_a101), t && t.createdAt && (_this528._suggestions.get(e).createdAt = t.createdAt);
                });
              }

              return n;
            }
          }, {
            key: "_updateSuggestionData",
            value: function _updateSuggestionData(t, e) {
              var _this529 = this;

              var n = this.editor.plugins.get("PendingActions"),
                  i = this._suggestions.get(t);

              if (this._adapter && this._adapter.updateSuggestion) if (i._saved) {
                var _i352 = this.editor.locale.t,
                    _o181 = n.add(_i352({
                  string: "Unsaved change in suggestion.",
                  id: "PENDING_ACTION_SUGGESTION"
                }));

                this._adapter.updateSuggestion(t, e).then(function () {
                  n.remove(_o181);
                });
              } else i.on("change:_saved", function () {
                _this529._updateSuggestionData(t, e);
              });
            }
          }, {
            key: "_getSuggestionData",
            value: function _getSuggestionData(t) {
              if (!this._adapter || !this._adapter.getSuggestion) throw new rn["default"]("track-changes-adapter-missing-getsuggestion", this);
              return this._adapter.getSuggestion(t);
            }
          }, {
            key: "_handleNewSuggestionMarker",
            value: function _handleNewSuggestionMarker(t) {
              var _this530 = this;

              var _this$_splitMarkerNam = this._splitMarkerName(t),
                  e = _this$_splitMarkerNam.id,
                  n = _this$_splitMarkerNam.type,
                  i = _this$_splitMarkerNam.subType,
                  o = _this$_splitMarkerNam.authorId,
                  r = this._suggestions.get(e) || this._createSuggestion(n, i, e, o);

              switch (this._checkSuggestionCorrectness(r, n, i, o), this._suggestionState.get(r)) {
                case "notReady":
                  this._getSuggestionData(e).then(function (t) {
                    var n = Promise.resolve();
                    t.hasComments && (n = _this530._commentsRepository.fetchCommentThread({
                      channelId: _this530.editor.config.get("collaboration.channelId"),
                      threadId: e
                    })), n.then(function () {
                      _this530.addSuggestionData(t)._saved = !0;
                    });
                  }), this._suggestionState.set(r, "markerReady");
                  break;

                case "removed":
                  this._updateSuggestionData(e, {
                    state: "open"
                  });

                case "dataReady":
                  this._suggestionState.set(r, "ready"), this.fire("suggestionLoaded", r);
                  break;

                case "ready":
                  this.fire("suggestionChanged", r);
              }

              r.addMarkerName(t), this._refreshSuggestionsChain(r);
            }
          }, {
            key: "_refreshSuggestionsChain",
            value: function _refreshSuggestionsChain(t) {
              if (t.isMultiRange) return;
              var e = !0,
                  n = !0;

              var _iterator709 = _createForOfIteratorHelper(this.getSuggestions()),
                  _step709;

              try {
                for (_iterator709.s(); !(_step709 = _iterator709.n()).done;) {
                  var _i353 = _step709.value;
                  if (_i353.isMultiRange) continue;
                  if (_i353 == t || !_i353.isInContent) continue;
                  if (_i353.author.id != t.author.id) continue;

                  var _o182 = this._suggestionFactory.getSuggestionCallback(t.type, t.subType, "chain"),
                      _r245 = this._suggestionFactory.getSuggestionCallback(_i353.type, _i353.subType, "chain"),
                      _s71 = _o182(t, _i353),
                      _a102 = _r245(t, _i353);

                  _s71 && _a102 && (_s71[1].commentThread && _s71[1].commentThread.length || (_s71[0].next = _s71[1], _s71[1].previous = _s71[0], _s71[0] == t ? n = !1 : e = !1));
                }
              } catch (err) {
                _iterator709.e(err);
              } finally {
                _iterator709.f();
              }

              t.previous && e && (t.previous.next = null, t.previous = null), t.next && n && (t.next.previous = null, t.next = null);
            }
          }, {
            key: "_joinWithAdjacentSuggestions",
            value: function _joinWithAdjacentSuggestions(t) {
              var _iterator710 = _createForOfIteratorHelper(this._suggestions.values()),
                  _step710;

              try {
                for (_iterator710.s(); !(_step710 = _iterator710.n()).done;) {
                  var _e498 = _step710.value;
                  if (_e498 == t || !_e498.isInContent) continue;
                  if (_e498.type != t.type || _e498.author.id != t.author.id || _e498.subType != t.subType) continue;

                  var _n404 = this._suggestionFactory.getSuggestionCallback(t.type, t.subType, "join");

                  if (_n404(_e498.getRanges(), t.getRanges())) {
                    if (t.commentThread && t.commentThread.length) continue;
                    return this._joinSuggestions(_e498, t), !0;
                  }

                  if (_n404(t.getRanges(), _e498.getRanges())) {
                    if (_e498.commentThread && _e498.commentThread.length) continue;
                    return this._joinSuggestions(t, _e498), !0;
                  }
                }
              } catch (err) {
                _iterator710.e(err);
              } finally {
                _iterator710.f();
              }

              return !1;
            }
          }, {
            key: "_joinSuggestions",
            value: function _joinSuggestions(t, e) {
              if (t.isMultiRange) {
                var _iterator711 = _createForOfIteratorHelper(e.getRanges()),
                    _step711;

                try {
                  for (_iterator711.s(); !(_step711 = _iterator711.n()).done;) {
                    var _n405 = _step711.value;
                    t.addRange(_n405);
                  }
                } catch (err) {
                  _iterator711.e(err);
                } finally {
                  _iterator711.f();
                }
              } else {
                var _n406 = e.getFirstRange().end;

                this._setSuggestionRange(t, this._model.createRange(t.getFirstRange().start, _n406));
              }

              e.removeMarkers();
            }
          }], [{
            key: "requires",
            get: function get() {
              return [iy, xl, nA, QE, oS, rS, lS, hS, mS, kS, vS, CS, AS, ES, IS, OS, RS, MS, DS, jS, BS, FS, HS, qS, WS, YS, QS, tI, eI, iI, oI, sI, aI, dI, fI, pI];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "TrackChangesEditing";
            }
          }]);

          return CI;
        }(r);

        Object(o["default"])(CI, sn["default"]);

        var TI = /*#__PURE__*/function () {
          function TI(t) {
            _classCallCheck(this, TI);

            this._editor = t, this._model = t.model, this._customCallbacks = new Map(), this._defaultCallbacks = new Map(), this._registerDefaultCallbacks();
          }

          _createClass(TI, [{
            key: "buildSuggestion",
            value: function buildSuggestion(t, e, n, i, o) {
              var _this531 = this;

              return new GE(this._model, {
                type: t,
                subType: e,
                id: n,
                author: i,
                onAttributesChange: o,
                onAccept: function onAccept() {
                  return _this531.getSuggestionCallback(t, e, "accept").apply(void 0, arguments);
                },
                onDiscard: function onDiscard() {
                  return _this531.getSuggestionCallback(t, e, "discard").apply(void 0, arguments);
                }
              });
            }
          }, {
            key: "registerCustomCallback",
            value: function registerCustomCallback(t, e, n, i) {
              var o = t + ":" + e + ":" + n;

              this._customCallbacks.set(o, i);
            }
          }, {
            key: "getSuggestionCallback",
            value: function getSuggestionCallback(t, e, n) {
              var i = t + ":" + e + ":" + n;
              return this._customCallbacks.get(i) || this._defaultCallbacks.get(t + ":" + n);
            }
          }, {
            key: "_registerDefaultCallbacks",
            value: function _registerDefaultCallbacks() {
              var _this532 = this;

              var t = function t() {},
                  e = function e(t) {
                t.sort(function (t, e) {
                  return t.start.isBefore(e.start) ? 1 : -1;
                }), _this532._model.change(function (e) {
                  var _iterator712 = _createForOfIteratorHelper(t),
                      _step712;

                  try {
                    for (_iterator712.s(); !(_step712 = _iterator712.n()).done;) {
                      var _n407 = _step712.value;

                      var _t559 = void 0;

                      _t559 = _n407.end.isAtEnd && _n407.end.parent == _n407.start.nodeAfter ? e.createSelection(_n407.start.nodeAfter, "on") : e.createSelection(_n407), _this532._model.deleteContent(_t559, {
                        forceDefaultExecution: !0,
                        doNotAutoparagraph: !0
                      });
                    }
                  } catch (err) {
                    _iterator712.e(err);
                  } finally {
                    _iterator712.f();
                  }
                });
              },
                  n = function n(t, e) {
                _this532._model.change(function (n) {
                  var _this532$_editor;

                  var i = e.commandName,
                      _e$commandParams = e.commandParams,
                      o = _e$commandParams === void 0 ? [] : _e$commandParams,
                      r = t[0];
                  if ("$graveyard" == r.root.rootName) return;
                  var s = Array.from(_this532._model.document.selection.getRanges()).map(function (t) {
                    return fa.fromRange(t);
                  });
                  EI(r) ? n.setSelection(_this532._model.createRange(r.end)) : n.setSelection(r);

                  var _iterator713 = _createForOfIteratorHelper(_this532._editor.commands.commands()),
                      _step713;

                  try {
                    for (_iterator713.s(); !(_step713 = _iterator713.n()).done;) {
                      var _t560 = _step713.value;

                      _t560.refresh();
                    }
                  } catch (err) {
                    _iterator713.e(err);
                  } finally {
                    _iterator713.f();
                  }

                  o.push({
                    forceDefaultExecution: !0
                  }), (_this532$_editor = _this532._editor).execute.apply(_this532$_editor, [i].concat(_toConsumableArray(o)));
                  var a = s.filter(function (t) {
                    return "$graveyard" != t.root.rootName;
                  });
                  a.length > 0 && n.setSelection(a);

                  var _iterator714 = _createForOfIteratorHelper(s),
                      _step714;

                  try {
                    for (_iterator714.s(); !(_step714 = _iterator714.n()).done;) {
                      var _t561 = _step714.value;

                      _t561.detach();
                    }
                  } catch (err) {
                    _iterator714.e(err);
                  } finally {
                    _iterator714.f();
                  }
                });
              },
                  i = function i(t, e) {
                return 1 == t.length && 1 == e.length && t[0].end.isEqual(e[0].start);
              },
                  o = function o(t, e) {
                return MI(t, e, _this532._model) ? [t, e] : MI(e, t, _this532._model) ? [e, t] : null;
              };

              this._defaultCallbacks.set("insertion:accept", t), this._defaultCallbacks.set("insertion:discard", e), this._defaultCallbacks.set("insertion:join", i), this._defaultCallbacks.set("insertion:chain", o), this._defaultCallbacks.set("deletion:accept", e), this._defaultCallbacks.set("deletion:discard", t), this._defaultCallbacks.set("deletion:join", i), this._defaultCallbacks.set("deletion:chain", o), this._defaultCallbacks.set("formatInline:accept", n), this._defaultCallbacks.set("formatInline:discard", t), this._defaultCallbacks.set("formatInline:join", i), this._defaultCallbacks.set("formatInline:chain", t), this._defaultCallbacks.set("formatBlock:accept", n), this._defaultCallbacks.set("formatBlock:discard", t), this._defaultCallbacks.set("formatBlock:join", i), this._defaultCallbacks.set("formatBlock:chain", t);
            }
          }]);

          return TI;
        }();

        function AI(t, e, n) {
          var _iterator715 = _createForOfIteratorHelper(e.parent.getAncestors({
            includeSelf: !0,
            parentFirst: !0
          })),
              _step715;

          try {
            for (_iterator715.s(); !(_step715 = _iterator715.n()).done;) {
              var _i354 = _step715.value;
              if (_i354.root == _i354) return !1;
              if (!n.containsItem(_i354)) return !1;
              if (t.isObject(_i354) || t.isLimit(_i354)) return !0;
            }
          } catch (err) {
            _iterator715.e(err);
          } finally {
            _iterator715.f();
          }
        }

        function EI(t) {
          return t.end.parent == t.start.nodeAfter && t.end.isAtStart;
        }

        function SI(t, e, n, i) {
          var o = function o(t) {
            return !t.item.is("textProxy") && !i.isObject(t.item);
          },
              r = t.start.getLastMatchingPosition(o),
              s = t.end.getLastMatchingPosition(o, {
            direction: "backward"
          });

          return !(t.start.isEqual(r) && t.end.isEqual(s) || (r.isBefore(s) ? n.updateMarker(e, {
            range: n.createRange(r, s)
          }) : n.removeMarker(e), 0));
        }

        function II(t) {
          return function (t) {
            var e = 0,
                n = 0;

            var _iterator716 = _createForOfIteratorHelper(wI(t)),
                _step716;

            try {
              for (_iterator716.s(); !(_step716 = _iterator716.n()).done;) {
                var _ref166;

                var _i355 = _step716.value;
                e = (e << 5) - e + _i355, e &= e, (_ref166 = [n, e], e = _ref166[0], n = _ref166[1], _ref166);
              }
            } catch (err) {
              _iterator716.e(err);
            } finally {
              _iterator716.f();
            }

            return xI(e) + xI(n);
          }(t);
        }

        function OI(t) {
          var e = t.start.nodeAfter;
          return e && e.is("element");
        }

        function RI(t, e) {
          var n = e.schema.isObject(t) || e.schema.isSelectable(t);
          return e.createRange(e.createPositionAt(t, "before"), n ? e.createPositionAfter(t) : e.createPositionAt(t, "end"));
        }

        function MI(t, e, n) {
          var i = t.getFirstRange(),
              o = e.getFirstRange();
          if (i.end.isEqual(o.start)) return !0;
          if (t.type != e.type) return !1;
          if (!i.end.isTouching(o.start)) return !1;
          var r = n.createRange(i.end, o.start).getWalker();

          var _iterator717 = _createForOfIteratorHelper(r),
              _step717;

          try {
            for (_iterator717.s(); !(_step717 = _iterator717.n()).done;) {
              var _t562 = _step717.value;
              if (["elementStart", "elementEnd"].includes(_t562.type) && n.schema.isLimit(_t562.item)) return !1;
            }
          } catch (err) {
            _iterator717.e(err);
          } finally {
            _iterator717.f();
          }

          return !0;
        }

        var PI = ["values", "config", "attributes", "addToReconnectionStack", "find", "_trackChangesService", "getSuggestion", "getUser", "listenTo", "reconnect", "get", "open", "connect", "collaboration.channelId", "state", "TrackChangesService", "addSuggestionData", "update", "_saved", "then", "resolve", "set", "from", "data", "addUser", "init", "suggestionUpdated", "type", "editor", "add", "map", "plugins", "hasSuggestion", "adapter", "_fetchMissingUsersForThreads", "_bufferedRequests"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(PI, 168);

        var NI = function NI(t, e) {
          return PI[t -= 0];
        };

        var DI = /*#__PURE__*/function (_r246, _NI, _NI2, _NI3) {
          _inherits(DI, _r246);

          var _super383 = _createSuper(DI);

          function DI(t) {
            var _this533;

            _classCallCheck(this, DI);

            _this533 = _super383.call(this, t), _this533._bufferedRequests = new Map();
            return _this533;
          }

          _createClass(DI, [{
            key: _NI,
            value: function value() {
              var _this534 = this;

              var t = this[NI("0x4")].plugins.get(Zv),
                  e = this[NI("0x4")][NI("0x7")][NI("0x16")](CI),
                  n = this.editor[NI("0xd")][NI("0x16")](NI("0x19"));
              return t[NI("0xf")](this), this[NI("0x11")] = new DI[NI("0x1b")](n), e[NI("0x9")] = {
                getSuggestion: function () {
                  var _getSuggestion = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee47(t) {
                    var e;
                    return regeneratorRuntime.wrap(function _callee47$(_context87) {
                      while (1) {
                        switch (_context87.prev = _context87.next) {
                          case 0:
                            _context87.next = 2;
                            return _this534[NI("0x11")][NI("0x16")](t);

                          case 2:
                            e = _context87.sent;
                            _context87.next = 5;
                            return _this534[NI("0xa")]([e]);

                          case 5:
                            return _context87.abrupt("return", e);

                          case 6:
                          case "end":
                            return _context87.stop();
                        }
                      }
                    }, _callee47);
                  }));

                  function getSuggestion(_x56) {
                    return _getSuggestion.apply(this, arguments);
                  }

                  return getSuggestion;
                }(),
                addSuggestion: function () {
                  var _addSuggestion = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee48(_ref167) {
                    var t, e, n, i, o, r, s, a;
                    return regeneratorRuntime.wrap(function _callee48$(_context88) {
                      while (1) {
                        switch (_context88.prev = _context88.next) {
                          case 0:
                            t = _ref167.id, e = _ref167.type, n = _ref167.data, i = _ref167.originalSuggestionId, o = _ref167.attributes;
                            r = {
                              id: t,
                              type: e,
                              data: n,
                              originalSuggestionId: i,
                              attributes: o
                            };
                            s = new Promise(function (e) {
                              _this534._bufferedRequests[NI("0x21")](t, {
                                resolve: e,
                                suggestionData: r
                              });
                            });
                            _context88.next = 5;
                            return Promise.race([_this534[NI("0x11")][NI("0x5")](t, e, n, i, o), s]);

                          case 5:
                            a = _context88.sent;
                            return _context88.abrupt("return", (_this534[NI("0xb")]["delete"](t), a));

                          case 7:
                          case "end":
                            return _context88.stop();
                        }
                      }
                    }, _callee48);
                  }));

                  function addSuggestion(_x57) {
                    return _addSuggestion.apply(this, arguments);
                  }

                  return addSuggestion;
                }(),
                updateSuggestion: function updateSuggestion(t, e) {
                  return NI("0x17") !== e[NI("0x1a")] ? _this534[NI("0x11")][NI("0x1d")](t, e) : Promise[NI("0x20")]();
                }
              }, this[NI("0x14")](this[NI("0x11")], NI("0x2"), function (t, n) {
                e[NI("0x8")](n.id) && (e[NI("0x12")](n.id)[NI("0xe")] = n.attributes);
              }), this[NI("0x11")][NI("0x18")](t.connection)[NI("0x1f")](function (t) {
                return _this534[NI("0xa")](t)[NI("0x1f")](function () {
                  var _iterator718 = _createForOfIteratorHelper(t),
                      _step718;

                  try {
                    for (_iterator718.s(); !(_step718 = _iterator718.n()).done;) {
                      var _n408 = _step718.value;
                      e[NI("0x1c")](_n408)[NI("0x1e")] = !0;
                    }
                  } catch (err) {
                    _iterator718.e(err);
                  } finally {
                    _iterator718.f();
                  }
                });
              });
            }
          }, {
            key: _NI2,
            value: function () {
              var _value4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee49() {
                var _this535 = this;

                var t, _this$NI$NI$NI, e, n, _iterator719, _step719, _loop27, _iterator720, _step720, _e499;

                return regeneratorRuntime.wrap(function _callee49$(_context90) {
                  while (1) {
                    switch (_context90.prev = _context90.next) {
                      case 0:
                        t = this[NI("0x4")].plugins[NI("0x16")](CI);
                        _this$NI$NI$NI = this[NI("0x4")][NI("0x7")][NI("0x16")](Zv);
                        e = _this$NI$NI$NI.connection;
                        _context90.next = 5;
                        return this._trackChangesService[NI("0x18")](e);

                      case 5:
                        n = _context90.sent;
                        _iterator719 = _createForOfIteratorHelper(this[NI("0xb")][NI("0xc")]());
                        _context90.prev = 7;
                        _loop27 = /*#__PURE__*/regeneratorRuntime.mark(function _loop27() {
                          var _step719$value, t, e, i;

                          return regeneratorRuntime.wrap(function _loop27$(_context89) {
                            while (1) {
                              switch (_context89.prev = _context89.next) {
                                case 0:
                                  _step719$value = _step719.value, t = _step719$value.suggestionData, e = _step719$value.resolve;
                                  i = n[NI("0x10")](function (e) {
                                    return e.id === t.id;
                                  });
                                  _context89.t0 = i;

                                  if (_context89.t0) {
                                    _context89.next = 7;
                                    break;
                                  }

                                  _context89.next = 6;
                                  return _this535[NI("0x11")][NI("0x5")](t.id, t[NI("0x3")], t[NI("0x23")], t.originalSuggestionId);

                                case 6:
                                  i = _context89.sent;

                                case 7:
                                  e(i);

                                case 8:
                                case "end":
                                  return _context89.stop();
                              }
                            }
                          }, _loop27);
                        });

                        _iterator719.s();

                      case 10:
                        if ((_step719 = _iterator719.n()).done) {
                          _context90.next = 14;
                          break;
                        }

                        return _context90.delegateYield(_loop27(), "t0", 12);

                      case 12:
                        _context90.next = 10;
                        break;

                      case 14:
                        _context90.next = 19;
                        break;

                      case 16:
                        _context90.prev = 16;
                        _context90.t1 = _context90["catch"](7);

                        _iterator719.e(_context90.t1);

                      case 19:
                        _context90.prev = 19;

                        _iterator719.f();

                        return _context90.finish(19);

                      case 22:
                        _iterator720 = _createForOfIteratorHelper(n);

                        try {
                          for (_iterator720.s(); !(_step720 = _iterator720.n()).done;) {
                            _e499 = _step720.value;
                            t[NI("0x8")](_e499.id) || t[NI("0x1c")](_e499);
                          }
                        } catch (err) {
                          _iterator720.e(err);
                        } finally {
                          _iterator720.f();
                        }

                      case 24:
                      case "end":
                        return _context90.stop();
                    }
                  }
                }, _callee49, this, [[7, 16, 19, 22]]);
              }));

              function value() {
                return _value4.apply(this, arguments);
              }

              return value;
            }()
          }, {
            key: _NI3,
            value: function value(t) {
              var e = this[NI("0x4")][NI("0x7")][NI("0x16")](iy),
                  _this$NI$NI$get = this[NI("0x4")][NI("0x7")].get(Zv),
                  n = _this$NI$NI$get.connection,
                  i = new Set();

              var _iterator721 = _createForOfIteratorHelper(t),
                  _step721;

              try {
                for (_iterator721.s(); !(_step721 = _iterator721.n()).done;) {
                  var _n409 = _step721.value.authorId;
                  e[NI("0x13")](_n409) || i.add(_n409);
                }
              } catch (err) {
                _iterator721.e(err);
              } finally {
                _iterator721.f();
              }

              return Promise.all(Array[NI("0x22")](i)[NI("0x6")](function (t) {
                return aA.a.get(n, t)[NI("0x1f")](function (n) {
                  e[NI("0x13")](t) || e[NI("0x0")](n);
                });
              }));
            }
          }], [{
            key: "requires",
            get: function get() {
              return [dA, CI, Zv];
            }
          }]);

          return DI;
        }(r, NI("0x1"), NI("0x15"), NI("0xa"));

        DI.TrackChangesService = _E.a;
        var jI = ["stopListening", "_discardCommand", "commentThreadController", "view", "discardSuggestion", "unbind", "_acceptCommand", "destroy", "commentThread", "model", "execute", "isEnabled", "bind", "listenTo", "acceptSuggestion"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(jI, 339);

        var BI = function BI(t, e) {
          return jI[t -= 0];
        };

        var LI = /*#__PURE__*/function (_BI, _BI2) {
          function LI(t, e, n, i) {
            var _this536 = this;

            _classCallCheck(this, LI);

            this[BI("0x0")] = t, this[BI("0x9")] = e, this[BI("0x8")] = new qx(t[BI("0xe")], e), this[BI("0xc")] = n, this[BI("0x7")] = i, this[BI("0x9")][BI("0x3")](BI("0x2")).to(this._acceptCommand), this[BI("0x4")](e, BI("0x5"), function () {
              return _this536[BI("0x5")]();
            }), this.listenTo(e, BI("0xa"), function () {
              return _this536[BI("0xa")]();
            });
          }

          _createClass(LI, [{
            key: _BI,
            value: function value() {
              this[BI("0xc")].execute(this[BI("0x0")].id);
            }
          }, {
            key: "discardSuggestion",
            value: function discardSuggestion() {
              this[BI("0x7")][BI("0x1")](this[BI("0x0")].id);
            }
          }, {
            key: _BI2,
            value: function value() {
              this[BI("0x9")][BI("0xb")]("isEnabled"), this[BI("0x6")](), this[BI("0x8")][BI("0xd")]();
            }
          }]);

          return LI;
        }(BI("0x5"), BI("0xd"));

        Object(o["default"])(LI, i["default"]);
        var zI = ["isEnabled", "bind", "_createCommentThreadInputView", "commentsListView", "_config", "focus", "element", "editorConfig", "isReadOnly", "set", "isDirty", "_createCommentViews", "createdAt", "CommentView", "commentThreadInputView", "showInput", "isActive", "commentThread", "addComment", "_localUser", "value", "cancel", "length", "_model", "destroy", "disabledSubmit", "updateComment", "removeComment", "submit", "delegate", "assign", "locale", "setData"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(zI, 169);

        var FI = function FI(t, e) {
          return zI[t -= 0];
        };

        var VI = /*#__PURE__*/function (_Pd44, _FI) {
          _inherits(VI, _Pd44);

          var _super384 = _createSuper(VI);

          function VI(t, e, n, i) {
            var _this537;

            _classCallCheck(this, VI);

            _this537 = _super384.call(this, t), _this537[FI("0x20")] = null, _this537[FI("0xa")] = null, _this537.set(FI("0xc"), !1), _this537[FI("0x5")](FI("0x8"), e[FI("0x8")]), _this537[FI("0x1e")]("createdAt").to(e), _this537.set("descriptionParts", []), _this537[FI("0x5")](FI("0x6"), !1), _this537[FI("0x5")](FI("0x1d"), !1), _this537._model = e, _this537[FI("0xf")] = n, _this537._config = i, i.disableComments ? _this537[FI("0x5")](FI("0x12"), 1) : _this537[FI("0x7")]();
            return _this537;
          }

          _createClass(VI, [{
            key: "focus",
            value: function focus() {
              this[FI("0x2")][FI("0x1")]();
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this[FI("0x6")] = !1, this[FI("0x20")] && this[FI("0x20")][FI("0x14")](), this[FI("0xa")] && this[FI("0xa")][FI("0x14")](), _get3(_getPrototypeOf(VI.prototype), FI("0x14"), this).call(this);
            }
          }, {
            key: "_createCommentViews",
            value: function _createCommentViews() {
              var _this538 = this;

              this[FI("0x20")] = new pT(this.locale, this._model[FI("0xd")], Object[FI("0x1a")]({
                CommentView: this[FI("0x0")][FI("0x9")]
              }, this[FI("0x0")])), this[FI("0x20")][FI("0x19")](FI("0x17")).to(this), this[FI("0x20")].delegate(FI("0x16")).to(this), this.commentsListView.bind("isActive").to(this), this.set("length", this[FI("0x20")][FI("0x12")] + 1), this[FI("0x1e")](FI("0x12")).to(this[FI("0x20")], FI("0x12"), function (t) {
                return t + 1;
              }), this[FI("0xa")] = this._createCommentThreadInputView(), this.on("removeComment", function () {
                return _this538[FI("0x1")]();
              }), this.bind(FI("0x6")).to(this[FI("0x20")], "hasDirtyComment", this[FI("0xa")].commentInputView, "value", function (t, e) {
                return t || !!e;
              });
            }
          }, {
            key: _FI,
            value: function value() {
              var _this539 = this;

              var t = new hT(this[FI("0x1b")], this[FI("0xf")], this[FI("0x0")][FI("0x3")]),
                  e = t.commentInputView;
              return t.bind(FI("0xb")).to(this, "isActive", this[FI("0x13")][FI("0xd")], FI("0x4"), e, FI("0x10"), function (t, e, n) {
                return !!n || t && !e;
              }), e.on(FI("0x18"), function (t, n) {
                _this539.fire(FI("0xe"), n), e.editor[FI("0x1c")]("");
              }), e.on(FI("0x11"), function () {
                return _this539.focus();
              }), e[FI("0x1e")](FI("0x15")).to(this._model[FI("0xd")], "isReadOnly"), t;
            }
          }]);

          return VI;
        }(Pd, FI("0x1f"));

        var UI = /*#__PURE__*/function (_VI) {
          _inherits(UI, _VI);

          var _super385 = _createSuper(UI);

          function UI(t, e, n, i) {
            var _this540;

            _classCallCheck(this, UI);

            _this540 = _super385.call(this, t, e, n, i);
            var o = t.t;
            _this540.set("type", ""), _this540.bind("type").to(_assertThisInitialized(_this540), "descriptionParts", function (t) {
              return t && t[0] ? t[0].type : "";
            }), _this540.bind("description").to(_assertThisInitialized(_this540), "descriptionParts", _assertThisInitialized(_this540), "isActive", function (t, e) {
              var n = "";

              var _iterator722 = _createForOfIteratorHelper(t),
                  _step722;

              try {
                for (_iterator722.s(); !(_step722 = _iterator722.n()).done;) {
                  var _e500 = _step722.value;
                  n += "<p>" + HI(_e500.content) + "</p>";
                }
              } catch (err) {
                _iterator722.e(err);
              } finally {
                _iterator722.f();
              }

              return e ? n : ST(n, {
                limit: 140
              });
            }), _this540._descriptionElement = null, _this540.acceptButton = _this540._createButton(o("Accept suggestion"), Sd.check, "ck-suggestion--accept", "acceptSuggestion"), _this540.discardButton = _this540._createButton(o("Discard suggestion"), Sd.cancel, "ck-suggestion--discard", "discardSuggestion"), _this540.userView = new lT(t, _this540._model.author), _this540.userView.extendTemplate({
              attributes: {
                "class": ["ck-suggestion__user", "ck-annotation__user"]
              }
            }), _this540.setTemplate(_this540._getTemplate());
            return _this540;
          }

          _createClass(UI, [{
            key: "_getTemplate",
            value: function _getTemplate() {
              var _this541 = this;

              var t = this.bindTemplate,
                  e = {
                tag: "div",
                attributes: {
                  "class": ["ck-suggestion-wrapper", t["if"]("isActive", "ck-suggestion-wrapper--active"), t.to("type", function (t) {
                    return "ck-suggestion-" + t;
                  }), this._config.disableComments && "ck-suggestion--disabled-comments"],
                  "data-suggestion-id": this._model.id,
                  "data-thread-id": this._model.commentThread.id,
                  "data-author-id": this._model.author.id,
                  tabindex: -1
                },
                children: [{
                  tag: "div",
                  attributes: {
                    "class": ["ck-suggestion", "ck-annotation"]
                  },
                  children: [this.userView, {
                    tag: "div",
                    attributes: {
                      "class": ["ck-suggestion__main", "ck-annotation__main"]
                    },
                    children: [{
                      tag: "div",
                      attributes: {
                        "class": ["ck-suggestion__info", "ck-annotation__info"]
                      },
                      children: [{
                        tag: "span",
                        children: [{
                          text: this.userView.name
                        }],
                        attributes: {
                          "class": ["ck-suggestion__info-name", "ck-annotation__info-name"]
                        }
                      }, {
                        tag: "time",
                        attributes: {
                          datetime: t.to("createdAt"),
                          "class": ["ck-comment__info-time", "ck-annotation__info-time"]
                        },
                        children: [{
                          text: t.to("createdAt", function (t) {
                            return _this541._config.formatDateTime(t);
                          })
                        }]
                      }]
                    }, {
                      tag: "div",
                      attributes: {
                        "class": ["ck-suggestion__actions", "ck-annotation__actions"]
                      },
                      children: [this.acceptButton, this.discardButton]
                    }, {
                      tag: "div",
                      attributes: {
                        "class": ["ck-annotation__content-wrapper"]
                      }
                    }]
                  }]
                }]
              };
              return this.commentsListView && this.commentThreadInputView && e.children.push(this.commentsListView, this.commentThreadInputView), e;
            }
          }, {
            key: "render",
            value: function render() {
              var _this542 = this;

              _get3(_getPrototypeOf(UI.prototype), "render", this).call(this), this._descriptionElement = this.element.querySelector(".ck-annotation__content-wrapper"), this._descriptionElement.innerHTML = this.description, this.on("change:description", function (t, e, n) {
                _this542._descriptionElement.innerHTML = n;
              });
            }
          }, {
            key: "_createButton",
            value: function _createButton(t, e, n, i) {
              var _this543 = this;

              var o = new nu(this.locale);
              return o.set({
                label: t,
                icon: e,
                tooltip: !0
              }), o.extendTemplate({
                attributes: {
                  "class": n
                }
              }), o.on("execute", function () {
                _this543.fire(i, _this543._model.id);
              }), o.bind("isEnabled").to(this), o;
            }
          }]);

          return UI;
        }(VI);

        function HI(t) {
          var e = "";
          return e += t.split("*").map(function (t, e) {
            return e % 2 != 0 ? '<span class="ck-suggestion-type">' + qI(t) + "</span>" : qI(t);
          }).join("");
        }

        function qI(t) {
          var e = document.createElement("span");
          return e.innerText = t, e.innerHTML;
        }

        var WI = n(179),
            $I = n.n(WI);

        var YI = /*#__PURE__*/function (_r247) {
          _inherits(YI, _r247);

          var _super386 = _createSuper(YI);

          function YI(t) {
            var _this544;

            _classCallCheck(this, YI);

            _this544 = _super386.call(this, t), _this544._suggestionToController = new Map(), _this544._viewToController = new Map(), _this544._debouncedHandlers = new Map();
            var e = _this544.editor.config;
            e.define("trackChanges.SuggestionThreadView", UI), e.define("trackChanges.disableComments", !1), _this544._disableComments = e.get("trackChanges.disableComments");
            return _this544;
          }

          _createClass(YI, [{
            key: "init",
            value: function init() {
              var _this545 = this;

              var t = this.editor,
                  e = t.plugins.get(CI),
                  n = t.plugins.get(XT),
                  i = t.plugins.get(OA),
                  o = t.plugins.get(nA);
              t.ui.componentFactory.add("trackChanges", function (t) {
                return _this545._createUIButton(t);
              }), i.addSourceCollector(function () {
                var t = [];

                for (var _i356 = 0, _Array$from11 = Array.from(_this545._suggestionToController); _i356 < _Array$from11.length; _i356++) {
                  var _Array$from11$_i = _slicedToArray(_Array$from11[_i356], 2),
                      _e501 = _Array$from11$_i[0],
                      _n410 = _Array$from11$_i[1];

                  var _i357 = _e501.getAllAdjacentSuggestions(),
                      _o183 = [];

                  var _iterator723 = _createForOfIteratorHelper(_i357),
                      _step723;

                  try {
                    for (_iterator723.s(); !(_step723 = _iterator723.n()).done;) {
                      var _t563 = _step723.value;
                      if (!_t563.isInContent) continue;

                      if (_t563.isMultiRange) {
                        _o183.push.apply(_o183, _toConsumableArray(_t563.getRanges()));

                        continue;
                      }

                      var _e502 = _t563.getFirstRange();

                      if (_o183.length > 0) {
                        var _t564 = _o183[0].getJoined(_e502);

                        if (_t564) {
                          _o183[0] = _t564;
                          continue;
                        }
                      }

                      _o183.push(_e502);
                    }
                  } catch (err) {
                    _iterator723.e(err);
                  } finally {
                    _iterator723.f();
                  }

                  t.push([_n410.view, _o183]);
                }

                return t;
              }), this.listenTo(e, "suggestionLoaded", function (t, e) {
                var n = !1;
                var o = cs(function (t) {
                  n || t ? n && t && (_this545._destroyController(e), i.refreshSelectedViews(), n = !1) : (_this545._initializeController(e), i.refreshSelectedViews(), n = !0);
                }, 10);
                _this545._debouncedHandlers.set(e, o), _this545.listenTo(e, "change:previous", function (t, n, i, r) {
                  e.isInContent && (null == i ? (_this545._updateController(r.head), o(!1)) : (_this545._updateController(i.head), o(!0)));
                }), null === e.previous ? o(!1) : _this545._updateController(e.head);
              }), this.listenTo(e, "suggestionUnloaded", function (t, e, n) {
                _this545.stopListening(e, "change:previous"), _this545._debouncedHandlers.get(e).cancel(), _this545._debouncedHandlers["delete"](e);

                var i = n ? n.head : e,
                    o = _this545._suggestionToController.get(i);

                null !== n && _this545._updateController(i), null === n && o && _this545._destroyController(e);
              }), this.listenTo(e, "suggestionChanged", function (t, e) {
                _this545._updateController(e);
              }), this.listenTo(n, "change:activeAnnotations", function (t, n, i) {
                var o = Array.from(i, function (t) {
                  return t.innerView;
                }).filter(function (t) {
                  return _this545._viewToController.has(t);
                }),
                    r = [];

                var _iterator724 = _createForOfIteratorHelper(o),
                    _step724;

                try {
                  for (_iterator724.s(); !(_step724 = _iterator724.n()).done;) {
                    var _t565 = _step724.value;

                    var _e503 = _this545._viewToController.get(_t565).model.getAllAdjacentSuggestions();

                    r.push.apply(r, _toConsumableArray(_e503.reduce(function (t, e) {
                      return [].concat(_toConsumableArray(t), _toConsumableArray(e.getMarkerNames()));
                    }, [])));
                  }
                } catch (err) {
                  _iterator724.e(err);
                } finally {
                  _iterator724.f();
                }

                e.activeMarkers = r;
              }), this.listenTo(o, "addComment", function (t, _ref168) {
                var n = _ref168.threadId,
                    i = _ref168.isFromAdapter;
                if (i || !e.hasSuggestion(n)) return;
                var o = e.getSuggestion(n);

                _this545._suggestionToController.get(o).view.focus();
              }, {
                priority: "lowest"
              });
            }
          }, {
            key: "_createUIButton",
            value: function _createUIButton(t) {
              var _this546 = this;

              var e = Eu(t, uu),
                  n = this.editor.commands.get("trackChanges"),
                  i = this.editor.t;
              e.buttonView.set({
                tooltip: i("Track changes"),
                label: i("Track changes"),
                icon: $I.a
              }), e.buttonView.bind("isOn").to(n, "value"), e.buttonView.on("execute", function () {
                return n.execute();
              });
              var o = new on["default"](),
                  r = [{
                type: "switchbutton",
                model: {
                  withText: !0,
                  label: i("Track changes"),
                  commandName: "trackChanges"
                }
              }, {
                type: "separator"
              }, {
                type: "button",
                model: {
                  withText: !0,
                  label: i("Accept all suggestions"),
                  commandName: "acceptAllSuggestions"
                }
              }, {
                type: "button",
                model: {
                  withText: !0,
                  label: i("Accept all selected suggestions"),
                  commandName: "acceptSelectedSuggestions"
                }
              }, {
                type: "button",
                model: {
                  withText: !0,
                  label: i("Discard all suggestions"),
                  commandName: "discardAllSuggestions"
                }
              }, {
                type: "button",
                model: {
                  withText: !0,
                  label: i("Discard all selected suggestions"),
                  commandName: "discardSelectedSuggestions"
                }
              }];

              for (var _i358 = 0, _r248 = r; _i358 < _r248.length; _i358++) {
                var _t566 = _r248[_i358];
                var _e504 = {
                  type: _t566.type
                };

                if (_t566.model) {
                  var _n411 = new zu(_t566.model),
                      _i359 = this.editor.commands.get(_n411.commandName);

                  _n411.bind("isOn", "isEnabled").to(_i359, "value", "isEnabled"), _e504.model = _n411;
                }

                o.add(_e504);
              }

              Iu(e, o);
              var s = r.filter(function (t) {
                return null != t.model;
              }).map(function (t) {
                return _this546.editor.commands.get(t.model.commandName);
              });
              return e.buttonView.actionView.unbind("isEnabled"), e.buttonView.arrowView.unbind("isEnabled"), e.buttonView.actionView.bind("isEnabled").to(n, "isEnabled"), e.buttonView.arrowView.bind("isEnabled").toMany(s, "isEnabled", function () {
                for (var _len36 = arguments.length, t = new Array(_len36), _key36 = 0; _key36 < _len36; _key36++) {
                  t[_key36] = arguments[_key36];
                }

                return t.some(function (t) {
                  return t;
                });
              }), e.on("execute", function (t) {
                return _this546.editor.execute(t.source.commandName);
              }), e;
            }
          }, {
            key: "_initializeController",
            value: function _initializeController(t) {
              var _this547 = this;

              var e = this.editor,
                  n = e.config,
                  i = e.plugins.get(XT),
                  o = t.getAllAdjacentSuggestions().filter(function (t) {
                return t.isInContent;
              }),
                  r = e.plugins.get("Users").me,
                  s = e.commands.get("acceptSuggestion"),
                  a = e.commands.get("discardSuggestion"),
                  c = new (0, n.get("trackChanges").SuggestionThreadView)(e.locale, t, r, {
                disableComments: this._disableComments,
                editorConfig: n.get("comments.editorConfig"),
                maxCommentsWhenCollapsed: n.get("comments.maxCommentsWhenCollapsed"),
                maxThreadTotalWeight: n.get("comments.maxThreadTotalWeight"),
                maxCommentCharsWhenCollapsed: n.get("comments.maxCommentCharsWhenCollapsed"),
                formatDateTime: XC(n.get("locale")),
                CommentView: n.get("comments").CommentView
              }),
                  l = new LI(t, c, s, a);
              c.descriptionParts = e.plugins.get("TrackChangesEditing")._descriptionFactory.getDescriptions(o), this._suggestionToController.set(t, l), this._viewToController.set(c, l);
              var d = new UT(this.editor.locale, c);
              d.bind("isDirty").to(c, "isDirty"), d.bind("length").to(c), d.bind("type").to(c, "type", function (t) {
                return "suggestion-" + t;
              });
              var u = new WT({
                view: d,
                target: function target() {
                  var t = o[0].getFirstMarker();
                  if (!t) return null;
                  var n = t.getRange().getContainedElement();
                  return n && !e.editing.mapper.toViewElement(n) ? null : kA(e.editing, t) || null;
                },
                type: function type() {
                  return "suggestion-" + l.view.type;
                }
              });
              i.add(u);
              var h = e.plugins.get("PendingActions");
              var f;
              c.on("change:isDirty", function (t, e, n) {
                if (n) {
                  var _t567 = _this547.editor.locale.t;
                  f = h.add(_t567({
                    string: "Unsaved change in suggestion.",
                    id: "PENDING_ACTION_SUGGESTION"
                  }));
                } else h.remove(f), f = null;
              });
            }
          }, {
            key: "_destroyController",
            value: function _destroyController(t) {
              var e = this.editor.plugins.get("Annotations"),
                  n = this._suggestionToController.get(t),
                  i = n.view,
                  o = e.getByInnerView(i);

              e.remove(o), this._suggestionToController["delete"](t), this._viewToController["delete"](i), n.destroy(), i.destroy();
            }
          }, {
            key: "_updateController",
            value: function _updateController(t) {
              if (!t.isInContent || !this._suggestionToController.has(t)) return;

              var e = this.editor.plugins.get("TrackChangesEditing"),
                  n = this._suggestionToController.get(t),
                  i = t.getAllAdjacentSuggestions();

              n.view.descriptionParts = e._descriptionFactory.getDescriptions(i);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              _get3(_getPrototypeOf(YI.prototype), "destroy", this).call(this);

              var _iterator725 = _createForOfIteratorHelper(this._suggestionToController.keys()),
                  _step725;

              try {
                for (_iterator725.s(); !(_step725 = _iterator725.n()).done;) {
                  var _t568 = _step725.value;

                  this._destroyController(_t568);
                }
              } catch (err) {
                _iterator725.e(err);
              } finally {
                _iterator725.f();
              }

              var _iterator726 = _createForOfIteratorHelper(this._debouncedHandlers.values()),
                  _step726;

              try {
                for (_iterator726.s(); !(_step726 = _iterator726.n()).done;) {
                  var _t569 = _step726.value;

                  _t569.cancel();
                }
              } catch (err) {
                _iterator726.e(err);
              } finally {
                _iterator726.f();
              }

              this._debouncedHandlers.clear();
            }
          }], [{
            key: "requires",
            get: function get() {
              return [XT, OA, CI, nA, iy];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "TrackChangesUI";
            }
          }]);

          return YI;
        }(r);

        var JI = ["get", "getSuggestions", "requires", "getSuggestion", "pluginName", "adapter", "addSuggestion", "plugins", "addSuggestionData", "TrackChanges", "editor"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(JI, 172);

        var GI = function GI(t, e) {
          return JI[t -= 0];
        };

        var KI = /*#__PURE__*/function (_r249, _GI, _GI2, _GI3, _GI4, _GI5, _GI6) {
          _inherits(KI, _r249);

          var _super387 = _createSuper(KI);

          function KI() {
            _classCallCheck(this, KI);

            return _super387.apply(this, arguments);
          }

          _createClass(KI, [{
            key: _GI3,
            set: function set(t) {
              this.editor[GI("0x0")][GI("0x4")](CI)[GI("0x9")] = t;
            }
          }, {
            key: _GI4,
            get: function get() {
              return this[GI("0x3")][GI("0x0")][GI("0x4")](CI)[GI("0x9")];
            }
          }, {
            key: _GI5,
            value: function value(t) {
              return this[GI("0x3")].plugins[GI("0x4")](CI)[GI("0x1")](t);
            }
          }, {
            key: _GI6,
            value: function value(t) {
              return this[GI("0x3")][GI("0x0")][GI("0x4")](CI)[GI("0x5")](t);
            }
          }, {
            key: "getSuggestion",
            value: function getSuggestion(t) {
              return this[GI("0x3")][GI("0x0")][GI("0x4")](CI)[GI("0x7")](t);
            }
          }], [{
            key: _GI,
            get: function get() {
              return [CI, YI, gE, tE, cE, uE];
            }
          }, {
            key: _GI2,
            get: function get() {
              return GI("0x2");
            }
          }]);

          return KI;
        }(r, GI("0x6"), GI("0x8"), GI("0x9"), GI("0x9"), GI("0xa"), GI("0x5"));

        var QI = ["requires", "RealTimeCollaborativeTrackChanges", "pluginName"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(QI, 223);

        var XI = function XI(t, e) {
          return QI[t -= 0];
        };

        var ZI = /*#__PURE__*/function (_Pd45) {
          _inherits(ZI, _Pd45);

          var _super388 = _createSuper(ZI);

          function ZI(t) {
            var _this548;

            _classCallCheck(this, ZI);

            _this548 = _super388.call(this, t);
            var e = t.t,
                n = _this548.bindTemplate;
            _this548.set("usersCount", 0), _this548.set("isHidden", !0), _this548.setTemplate({
              tag: "div",
              attributes: {
                "class": ["ck", "ck-presence-list__counter", n["if"]("isHidden", "ck-presence-list__counter--hidden")]
              },
              children: [{
                text: n.to("usersCount", function (t) {
                  return e({
                    string: "1 connected user (me)",
                    plural: "%0 connected users",
                    id: "CONNECTED_USERS"
                  }, t);
                })
              }]
            });
            return _this548;
          }

          return ZI;
        }(Pd);

        var tO = ["execute", "setTemplate", "div", "createCollection", "items", "fire", "bindTemplate"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(tO, 236);

        var eO = function eO(t, e) {
          return tO[t -= 0];
        };

        var nO = /*#__PURE__*/function (_Pd46) {
          _inherits(nO, _Pd46);

          var _super389 = _createSuper(nO);

          function nO(t) {
            var _this549;

            _classCallCheck(this, nO);

            _this549 = _super389.call(this, t), _this549.items = _this549[eO("0x5")]();

            var e = _this549[eO("0x1")];

            _this549[eO("0x3")]({
              tag: eO("0x4"),
              attributes: {
                "class": ["ck", "ck-presence-list__list"]
              },
              children: _this549[eO("0x6")],
              on: {
                click: e.to(function () {
                  return _this549[eO("0x0")](eO("0x2"));
                })
              }
            });

            return _this549;
          }

          return nO;
        }(Pd);

        n(417);
        var iO = ["bindTemplate", "ck-presence-list--collapsed", "counterView", "setTemplate", "locale", "ck-presence-list", "inlineListView", "isCollapsed", "set", "ck-reset"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(iO, 218);

        var oO = function oO(t, e) {
          return iO[t -= 0];
        };

        var rO = /*#__PURE__*/function (_Pd47) {
          _inherits(rO, _Pd47);

          var _super390 = _createSuper(rO);

          function rO(t) {
            var _this550;

            _classCallCheck(this, rO);

            _this550 = _super390.call(this, t);

            var e = _this550[oO("0x2")];

            _this550[oO("0x0")](oO("0x9"), !0), _this550[oO("0x4")] = new ZI(_this550[oO("0x6")]), _this550[oO("0x8")] = new nO(t), _this550[oO("0x5")]({
              tag: "div",
              attributes: {
                "class": ["ck", oO("0x7"), oO("0x1"), "ck-rounded-corners", e["if"]("isCollapsed", oO("0x3"))]
              },
              children: [_this550[oO("0x4")], _this550[oO("0x8")]]
            });
            return _this550;
          }

          return rO;
        }(Pd);

        var sO = ["div", "setTemplate", "items"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(sO, 343);

        var aO = function aO(t, e) {
          return sO[t -= 0];
        };

        var cO = /*#__PURE__*/function (_Pd48) {
          _inherits(cO, _Pd48);

          var _super391 = _createSuper(cO);

          function cO(t) {
            var _this551;

            _classCallCheck(this, cO);

            _this551 = _super391.call(this, t), _this551.items = _this551.createCollection(), _this551[aO("0x0")]({
              tag: aO("0x2"),
              attributes: {
                "class": ["ck", "ck-presence-list__dropdown-list"]
              },
              children: [{
                tag: aO("0x2"),
                attributes: {
                  "class": ["ck", "ck-presence-list__dropdown-list-wrapper"]
                },
                children: _this551[aO("0x1")]
              }]
            });
            return _this551;
          }

          return cO;
        }(Pd);

        var lO = ["span", "button", "bindTemplate", "fire", "name", "ck-user__full-name", "tag", "ck-presence-list__dropdown-list-item", "setTemplate", "getBackgroundColorClass", "color", "true", "ck-presence-list__marker", "userView", "div"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(lO, 192);

        var dO = function dO(t, e) {
          return lO[t -= 0];
        };

        var uO = /*#__PURE__*/function (_Pd49) {
          _inherits(uO, _Pd49);

          var _super392 = _createSuper(uO);

          function uO(t, e, n) {
            var _this552;

            _classCallCheck(this, uO);

            _this552 = _super392.call(this, t);

            var i = _this552[dO("0x5")];

            _this552[dO("0x1")] = new lT(t, e);
            var o = {
              tag: dO("0x2"),
              attributes: {
                "class": ["ck", dO("0xa")]
              },
              children: [_this552[dO("0x1")], {
                tag: dO("0x3"),
                attributes: {
                  "class": ["ck", dO("0x8")]
                },
                children: [{
                  text: e[dO("0x7")]
                }]
              }, {
                tag: "span",
                attributes: {
                  "class": ["ck", dO("0x0"), e[dO("0xd")][dO("0xc")]()],
                  "aria-hidden": dO("0xe")
                }
              }]
            };
            n && (o[dO("0x9")] = dO("0x4"), o.on = {
              click: i.to(function () {
                return _this552[dO("0x6")]("execute");
              })
            }), _this552[dO("0xb")](o);
            return _this552;
          }

          return uO;
        }(Pd);

        var hO = ["position", "text", "setTemplate", "ck-tooltip__text__inner", "span", "ck-tooltip__text", "bindTemplate"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(hO, 135);

        var fO = function fO(t, e) {
          return hO[t -= 0];
        };

        var gO = /*#__PURE__*/function (_eu) {
          _inherits(gO, _eu);

          var _super393 = _createSuper(gO);

          function gO(t) {
            var _this553;

            _classCallCheck(this, gO);

            _this553 = _super393.call(this, t);

            var e = _this553[fO("0x4")];

            _this553[fO("0x0")]({
              tag: fO("0x2"),
              attributes: {
                "class": ["ck", "ck-tooltip", e.to(fO("0x5"), function (t) {
                  return "ck-tooltip_" + t;
                })]
              },
              children: [{
                tag: fO("0x2"),
                attributes: {
                  "class": [fO("0x3")]
                },
                children: [{
                  tag: fO("0x2"),
                  "class": [fO("0x1")],
                  children: [{
                    text: e.to(fO("0x6"))
                  }]
                }]
              }]
            });

            return _this553;
          }

          return gO;
        }(eu);

        var mO = ["text", "setTemplate", "tooltipView", "fire", "button", "name", "ck-presence-list__list-item", "tag", "bindTemplate", "markerView", "userView", "ck-presence-list__marker", "getBackgroundColorClass", "color", "true"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(mO, 140);

        var pO = function pO(t, e) {
          return mO[t -= 0];
        };

        var bO = /*#__PURE__*/function (_Pd50) {
          _inherits(bO, _Pd50);

          var _super394 = _createSuper(bO);

          function bO(t, e, n) {
            var _this554;

            _classCallCheck(this, bO);

            _this554 = _super394.call(this, t);

            var i = _this554[pO("0x3")];

            _this554.userView = new lT(t, e), _this554.markerView = new kO(t, e), _this554[pO("0xc")] = new gO(t), _this554.tooltipView[pO("0xa")] = _this554[pO("0x5")][pO("0x0")];
            var o = {
              tag: "div",
              attributes: {
                "class": ["ck", pO("0x1")]
              },
              children: [_this554[pO("0x5")], _this554[pO("0x4")], _this554[pO("0xc")]]
            };
            n && (o[pO("0x2")] = pO("0xe"), o.on = {
              click: i.to(function () {
                return _this554[pO("0xd")]("execute");
              })
            }), _this554[pO("0xb")](o);
            return _this554;
          }

          return bO;
        }(Pd);

        var kO = /*#__PURE__*/function (_Pd51) {
          _inherits(kO, _Pd51);

          var _super395 = _createSuper(kO);

          function kO(t, e) {
            var _this555;

            _classCallCheck(this, kO);

            _this555 = _super395.call(this, t), _this555[pO("0xb")]({
              tag: "span",
              attributes: {
                "class": ["ck", pO("0x6"), e[pO("0x8")][pO("0x7")]()],
                "aria-hidden": pO("0x9")
              }
            });
            return _this555;
          }

          return kO;
        }(Pd);

        var _O = ["locale", "execute", "appendChild", "view", "from", "render", "destroy", "_createView", "presenceList.container", "bind", "onClick", "usersCount", "length", "inlineListView", "hideDropdown", "allConnectedUsers", "presencelist-collapseat-invalid-format", "bindTo", "remove", "using", "listenTo", "balloonPanelView", "add", "content", "_allConnectedUsers", "lastConnectedUsers", "presenceDropdownView", "isHidden", "detachFromDom", "bodyCollection", "showDropdown", "attachToDom", "element", "context", "class", "define", "presenceList", "ck ck-presence-list__balloon", "items", "_handleUserAdd", "get", "presenceList.collapseAt", "_handleUserRemove", "config"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(_O, 198);

        var wO = function wO(t, e) {
          return _O[t -= 0];
        };

        var vO = /*#__PURE__*/function (_gn16, _wO, _wO2, _wO3, _wO4, _wO5) {
          _inherits(vO, _gn16);

          var _super396 = _createSuper(vO);

          function vO(t) {
            var _this556;

            _classCallCheck(this, vO);

            _this556 = _super396.call(this, t), t[wO("0x15")][wO("0xd")](wO("0xe"), {
              collapseAt: 6
            });
            var e = t[wO("0x15")][wO("0x12")]("presenceList.collapseAt");
            if ("number" != typeof e) throw new rn["default"](wO("0x26"), _assertThisInitialized(_this556));
            if (e < 1) throw new rn["default"](wO("0x26"), _assertThisInitialized(_this556));
            return _this556;
          }

          _createClass(vO, [{
            key: "init",
            value: function init() {
              var _this557 = this;

              var t = this[wO("0xb")];
              this[wO("0x2")] = t.plugins[wO("0x12")](cy)[wO("0x25")], this.set(wO("0x21"), 0), this[wO("0x3")] = new on["default"](), this[wO("0x2b")] = new Uu(), this[wO("0x2b")][wO("0xc")] = wO("0xf"), this[wO("0x19")] = this[wO("0x1d")](), this[wO("0x4")] = void 0;

              var _iterator727 = _createForOfIteratorHelper(this[wO("0x2")]),
                  _step727;

              try {
                for (_iterator727.s(); !(_step727 = _iterator727.n()).done;) {
                  var _t570 = _step727.value;
                  this[wO("0x11")](_t570);
                }
              } catch (err) {
                _iterator727.e(err);
              } finally {
                _iterator727.f();
              }

              this[wO("0x2a")](this[wO("0x2")], wO("0x0"), function (t, e) {
                _this557[wO("0x11")](e);
              }), this[wO("0x2a")](this[wO("0x2")], wO("0x28"), function (t, e) {
                _this557[wO("0x14")](e);
              });
            }
          }, {
            key: _wO,
            value: function value() {
              var _this558 = this;

              var t = this[wO("0xb")],
                  e = new rO(this.context[wO("0x16")]),
                  n = this[wO("0x2b")];
              if (!Ze(t[wO("0x15")].get(wO("0x1e")))) throw new rn["default"]("presencelist-missing-container", this);
              return e.counterView[wO("0x1f")](wO("0x21")).to(this), e.bind("isCollapsed").to(this, wO("0x21"), function (n) {
                var i = n >= t[wO("0x15")].get(wO("0x13"));
                return e.counterView[wO("0x5")] = !(1 == n || i), i || _this558[wO("0x24")](), i;
              }), e.inlineListView[wO("0x10")][wO("0x27")](this.lastConnectedUsers)[wO("0x29")](function (e) {
                var n = t[wO("0x15")][wO("0x12")](wO("0xe")),
                    i = new bO(t[wO("0x16")], e, n[wO("0x20")]);
                return n[wO("0x20")] && _this558[wO("0x2a")](i, wO("0x17"), function () {
                  _this558[wO("0x19")].isCollapsed || n.onClick(e, i[wO("0xa")]);
                }), i;
              }), this[wO("0x2a")](e[wO("0x23")], "execute", function () {
                _this558[wO("0x4")] ? _this558.hideDropdown() : _this558.view.isCollapsed && _this558[wO("0x8")]();
              }), e[wO("0x1b")](), n[wO("0x1b")](), Id({
                emitter: e,
                activator: function activator() {
                  return n.isVisible;
                },
                contextElements: [n.element, e[wO("0x23")].element],
                callback: function callback() {
                  return _this558[wO("0x24")]();
                }
              }), t[wO("0x15")][wO("0x12")](wO("0x1e"))[wO("0x18")](e[wO("0xa")]), this[wO("0x7")] = new Zd(this.context.locale), this[wO("0x7")][wO("0x9")](), this[wO("0x7")].add(n), e;
            }
          }, {
            key: "_handleUserAdd",
            value: function _handleUserAdd(t) {
              this[wO("0x21")]++, 5 == this.lastConnectedUsers[wO("0x22")] && this.lastConnectedUsers[wO("0x28")](0), this.lastConnectedUsers[wO("0x0")](t);
            }
          }, {
            key: _wO2,
            value: function value(t) {
              if (this[wO("0x21")]--, this[wO("0x3")][wO("0x12")](t.id) && (this[wO("0x3")][wO("0x28")](t.id), this[wO("0x3")][wO("0x22")] < this[wO("0x21")])) {
                var _iterator728 = _createForOfIteratorHelper(Array[wO("0x1a")](this[wO("0x2")]).reverse()),
                    _step728;

                try {
                  for (_iterator728.s(); !(_step728 = _iterator728.n()).done;) {
                    var _t571 = _step728.value;
                    if (!this.lastConnectedUsers.get(_t571.id)) return void this.lastConnectedUsers[wO("0x0")](_t571, 0);
                  }
                } catch (err) {
                  _iterator728.e(err);
                } finally {
                  _iterator728.f();
                }
              }
            }
          }, {
            key: _wO3,
            value: function value() {
              var _this559 = this;

              if (this[wO("0x4")]) return;
              this.presenceDropdownView = new cO();
              var t = this.context[wO("0x15")][wO("0x12")](wO("0xe"));
              this.presenceDropdownView[wO("0x10")][wO("0x27")](this[wO("0x2")])[wO("0x29")](function (e) {
                var n = new uO(_this559[wO("0xb")][wO("0x16")], e, !!t[wO("0x20")]);
                return t.onClick && _this559[wO("0x2a")](n, "execute", function () {
                  t.onClick(e, n[wO("0xa")]);
                }), n;
              }), this[wO("0x2b")][wO("0x1")][wO("0x0")](this[wO("0x4")]), this[wO("0x2b")].pin({
                target: this.view[wO("0x23")][wO("0xa")]
              });
            }
          }, {
            key: _wO4,
            value: function value() {
              this[wO("0x4")] && (this[wO("0x2b")].unpin(), this[wO("0x2b")].content[wO("0x28")](this[wO("0x4")]), this[wO("0x4")].destroy(), this[wO("0x4")] = void 0);
            }
          }, {
            key: _wO5,
            value: function value() {
              _get3(_getPrototypeOf(vO.prototype), "destroy", this).call(this), this[wO("0x19")] && this[wO("0x19")].isRendered && this[wO("0x19")][wO("0x1c")](), this[wO("0x7")] && this.bodyCollection[wO("0x6")]();
            }
          }], [{
            key: "requires",
            get: function get() {
              return [cy];
            }
          }]);

          return vO;
        }(gn, wO("0x1d"), wO("0x14"), wO("0x8"), wO("0x24"), wO("0x1c"));

        var yO = ["requires", "PresenceList"];
        !function (t, e) {
          !function (e) {
            for (; --e;) {
              t.push(t.shift());
            }
          }(++e);
        }(yO, 344);

        var xO = function xO(t, e) {
          return yO[t -= 0];
        };

        var CO = /*#__PURE__*/function (_Eh) {
          _inherits(CO, _Eh);

          var _super397 = _createSuper(CO);

          function CO() {
            _classCallCheck(this, CO);

            return _super397.apply(this, arguments);
          }

          return CO;
        }(Eh);

        CO.builtinPlugins = [/*#__PURE__*/function (_r250) {
          _inherits(_class11, _r250);

          var _super398 = _createSuper(_class11);

          function _class11() {
            _classCallCheck(this, _class11);

            return _super398.apply(this, arguments);
          }

          _createClass(_class11, null, [{
            key: "requires",
            get: function get() {
              return [Hw, Ww];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Alignment";
            }
          }]);

          return _class11;
        }(r), Og, /*#__PURE__*/function (_r251) {
          _inherits(_class12, _r251);

          var _super399 = _createSuper(_class12);

          function _class12() {
            _classCallCheck(this, _class12);

            return _super399.apply(this, arguments);
          }

          _createClass(_class12, null, [{
            key: "requires",
            get: function get() {
              return [Qg, Xg];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "BlockQuote";
            }
          }]);

          return _class12;
        }(r), zg, /*#__PURE__*/function (_r252) {
          _inherits(_class13, _r252);

          var _super400 = _createSuper(_class13);

          function _class13() {
            _classCallCheck(this, _class13);

            return _super400.apply(this, arguments);
          }

          _createClass(_class13, null, [{
            key: "pluginName",
            get: function get() {
              return "CKFinder";
            }
          }, {
            key: "requires",
            get: function get() {
              return ["Link", "CKFinderUploadAdapter", om, em];
            }
          }]);

          return _class13;
        }(r), /*#__PURE__*/function (_r253) {
          _inherits(_class14, _r253);

          var _super401 = _createSuper(_class14);

          function _class14() {
            _classCallCheck(this, _class14);

            return _super401.apply(this, arguments);
          }

          _createClass(_class14, [{
            key: "init",
            value: function init() {
              var t = this.editor;
              t.plugins.has("ImageBlockEditing") || t.plugins.has("ImageInlineEditing") || Object(rn.logWarning)("easy-image-image-feature-missing", t);
            }
          }], [{
            key: "requires",
            get: function get() {
              return [rm, "ImageUpload"];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "EasyImage";
            }
          }]);

          return _class14;
        }(r), pg, /*#__PURE__*/function (_r254) {
          _inherits(_class15, _r254);

          var _super402 = _createSuper(_class15);

          function _class15() {
            _classCallCheck(this, _class15);

            return _super402.apply(this, arguments);
          }

          _createClass(_class15, null, [{
            key: "requires",
            get: function get() {
              return [dv, fv];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "FontFamily";
            }
          }]);

          return _class15;
        }(r), /*#__PURE__*/function (_r255) {
          _inherits(_class16, _r255);

          var _super403 = _createSuper(_class16);

          function _class16() {
            _classCallCheck(this, _class16);

            return _super403.apply(this, arguments);
          }

          _createClass(_class16, null, [{
            key: "requires",
            get: function get() {
              return [nv, rv];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "FontSize";
            }
          }]);

          return _class16;
        }(r), /*#__PURE__*/function (_r256) {
          _inherits(_class17, _r256);

          var _super404 = _createSuper(_class17);

          function _class17() {
            _classCallCheck(this, _class17);

            return _super404.apply(this, arguments);
          }

          _createClass(_class17, null, [{
            key: "requires",
            get: function get() {
              return [gm, mm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Heading";
            }
          }]);

          return _class17;
        }(r), /*#__PURE__*/function (_r257) {
          _inherits(_class18, _r257);

          var _super405 = _createSuper(_class18);

          function _class18() {
            _classCallCheck(this, _class18);

            return _super405.apply(this, arguments);
          }

          _createClass(_class18, null, [{
            key: "requires",
            get: function get() {
              return [mv, wv];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Highlight";
            }
          }]);

          return _class18;
        }(r), /*#__PURE__*/function (_r258) {
          _inherits(_class19, _r258);

          var _super406 = _createSuper(_class19);

          function _class19() {
            _classCallCheck(this, _class19);

            return _super406.apply(this, arguments);
          }

          _createClass(_class19, null, [{
            key: "requires",
            get: function get() {
              return [Hm, Wm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Image";
            }
          }]);

          return _class19;
        }(r), /*#__PURE__*/function (_r259) {
          _inherits(_class20, _r259);

          var _super407 = _createSuper(_class20);

          function _class20() {
            _classCallCheck(this, _class20);

            return _super407.apply(this, arguments);
          }

          _createClass(_class20, null, [{
            key: "requires",
            get: function get() {
              return [Gm, Qm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageCaption";
            }
          }]);

          return _class20;
        }(r), /*#__PURE__*/function (_r260) {
          _inherits(_class21, _r260);

          var _super408 = _createSuper(_class21);

          function _class21() {
            _classCallCheck(this, _class21);

            return _super408.apply(this, arguments);
          }

          _createClass(_class21, null, [{
            key: "requires",
            get: function get() {
              return [Zm, sp, ep];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageResize";
            }
          }]);

          return _class21;
        }(r), /*#__PURE__*/function (_r261) {
          _inherits(_class22, _r261);

          var _super409 = _createSuper(_class22);

          function _class22() {
            _classCallCheck(this, _class22);

            return _super409.apply(this, arguments);
          }

          _createClass(_class22, null, [{
            key: "requires",
            get: function get() {
              return [vp, xp];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageStyle";
            }
          }]);

          return _class22;
        }(r), /*#__PURE__*/function (_r262) {
          _inherits(_class23, _r262);

          var _super410 = _createSuper(_class23);

          function _class23() {
            _classCallCheck(this, _class23);

            return _super410.apply(this, arguments);
          }

          _createClass(_class23, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor,
                  e = t.t,
                  n = t.plugins.get(pm),
                  i = t.plugins.get("ImageUtils");
              n.register("image", {
                ariaLabel: e("Image toolbar"),
                items: function (t) {
                  return t.map(function (t) {
                    return Object(Ae.a)(t) ? t.name : t;
                  });
                }(t.config.get("image.toolbar") || []),
                getRelatedElement: function getRelatedElement(t) {
                  return i.getClosestSelectedImageWidget(t);
                }
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [pm, Im];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "ImageToolbar";
            }
          }]);

          return _class23;
        }(r), /*#__PURE__*/function (_r263) {
          _inherits(_class24, _r263);

          var _super411 = _createSuper(_class24);

          function _class24() {
            _classCallCheck(this, _class24);

            return _super411.apply(this, arguments);
          }

          _createClass(_class24, null, [{
            key: "pluginName",
            get: function get() {
              return "ImageUpload";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Fp, Op, Pp];
            }
          }]);

          return _class24;
        }(r), $g, /*#__PURE__*/function (_r264) {
          _inherits(_class25, _r264);

          var _super412 = _createSuper(_class25);

          function _class25() {
            _classCallCheck(this, _class25);

            return _super412.apply(this, arguments);
          }

          _createClass(_class25, null, [{
            key: "requires",
            get: function get() {
              return [yb, Pb, Lb];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Link";
            }
          }]);

          return _class25;
        }(r), bk, /*#__PURE__*/function (_r265) {
          _inherits(_class26, _r265);

          var _super413 = _createSuper(_class26);

          function _class26() {
            _classCallCheck(this, _class26);

            return _super413.apply(this, arguments);
          }

          _createClass(_class26, null, [{
            key: "requires",
            get: function get() {
              return [Sk, Nk, Ok, pf];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "MediaEmbed";
            }
          }]);

          return _class26;
        }(r), dm, /*#__PURE__*/function (_r266) {
          _inherits(_class27, _r266);

          var _super414 = _createSuper(_class27);

          function _class27() {
            _classCallCheck(this, _class27);

            return _super414.apply(this, arguments);
          }

          _createClass(_class27, [{
            key: "init",
            value: function init() {
              var t = this.editor,
                  e = t.editing.view.document,
                  n = [];
              n.push(new qk(e)), n.push(new zk(e)), t.plugins.get("ClipboardPipeline").on("inputTransformation", function (t, i) {
                if (i._isTransformedWithPasteFromOffice) return;
                var o = i.dataTransfer.getData("text/html"),
                    r = n.find(function (t) {
                  return t.isActive(o);
                });
                r && (i._parsedData = $k(o, e.stylesProcessor), r.execute(i), i._isTransformedWithPasteFromOffice = !0);
              }, {
                priority: "high"
              });
            }
          }], [{
            key: "pluginName",
            get: function get() {
              return "PasteFromOffice";
            }
          }, {
            key: "requires",
            get: function get() {
              return [Rh];
            }
          }]);

          return _class27;
        }(r), /*#__PURE__*/function (_gn17, _xO) {
          _inherits(_class28, _gn17);

          var _super415 = _createSuper(_class28);

          function _class28() {
            _classCallCheck(this, _class28);

            return _super415.apply(this, arguments);
          }

          _createClass(_class28, null, [{
            key: _xO,
            get: function get() {
              return [cy, vO];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return xO("0x1");
            }
          }]);

          return _class28;
        }(gn, xO("0x0")), zx, bE, /*#__PURE__*/function (_r267, _XI, _XI2) {
          _inherits(_class29, _r267);

          var _super416 = _createSuper(_class29);

          function _class29() {
            _classCallCheck(this, _class29);

            return _super416.apply(this, arguments);
          }

          _createClass(_class29, null, [{
            key: _XI,
            get: function get() {
              return [bE, DI, KI];
            }
          }, {
            key: _XI2,
            get: function get() {
              return XI("0x0");
            }
          }]);

          return _class29;
        }(r, XI("0x2"), XI("0x1")), /*#__PURE__*/function (_r268) {
          _inherits(_class30, _r268);

          var _super417 = _createSuper(_class30);

          function _class30() {
            _classCallCheck(this, _class30);

            return _super417.apply(this, arguments);
          }

          _createClass(_class30, null, [{
            key: "requires",
            get: function get() {
              return [Ev, Tv];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "RemoveFormat";
            }
          }]);

          return _class30;
        }(r), /*#__PURE__*/function (_r269) {
          _inherits(_class31, _r269);

          var _super418 = _createSuper(_class31);

          function _class31() {
            _classCallCheck(this, _class31);

            return _super418.apply(this, arguments);
          }

          _createClass(_class31, null, [{
            key: "requires",
            get: function get() {
              return [Iv, Pv];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Strikethrough";
            }
          }]);

          return _class31;
        }(r), /*#__PURE__*/function (_r270) {
          _inherits(_class32, _r270);

          var _super419 = _createSuper(_class32);

          function _class32() {
            _classCallCheck(this, _class32);

            return _super419.apply(this, arguments);
          }

          _createClass(_class32, null, [{
            key: "requires",
            get: function get() {
              return [dw, yw, Cw, Mw, Ow, Tw, pf];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Table";
            }
          }]);

          return _class32;
        }(r), /*#__PURE__*/function (_r271) {
          _inherits(_class33, _r271);

          var _super420 = _createSuper(_class33);

          function _class33() {
            _classCallCheck(this, _class33);

            return _super420.apply(this, arguments);
          }

          _createClass(_class33, [{
            key: "afterInit",
            value: function afterInit() {
              var t = this.editor,
                  e = t.t,
                  n = t.plugins.get(pm),
                  i = t.config.get("table.contentToolbar"),
                  o = t.config.get("table.tableToolbar");
              i && n.register("tableContent", {
                ariaLabel: e("Table toolbar"),
                items: i,
                getRelatedElement: Dw
              }), o && n.register("table", {
                ariaLabel: e("Table toolbar"),
                items: o,
                getRelatedElement: Nw
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [pm];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "TableToolbar";
            }
          }]);

          return _class33;
        }(r), /*#__PURE__*/function (_r272) {
          _inherits(_class34, _r272);

          var _super421 = _createSuper(_class34);

          function _class34() {
            _classCallCheck(this, _class34);

            return _super421.apply(this, arguments);
          }

          _createClass(_class34, null, [{
            key: "requires",
            get: function get() {
              return [Dv, zv];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "Underline";
            }
          }]);

          return _class34;
        }(r), /*#__PURE__*/function (_r273) {
          _inherits(_class35, _r273);

          var _super422 = _createSuper(_class35);

          function _class35() {
            _classCallCheck(this, _class35);

            return _super422.apply(this, arguments);
          }

          _createClass(_class35, [{
            key: "init",
            value: function init() {
              var _this560 = this;

              var t = this.editor.config.get("ckfinder.uploadUrl");
              t && (this.editor.plugins.get(kg).createUploadAdapter = function (e) {
                return new Ag(e, t, _this560.editor.t);
              });
            }
          }], [{
            key: "requires",
            get: function get() {
              return [kg];
            }
          }, {
            key: "pluginName",
            get: function get() {
              return "CKFinderUploadAdapter";
            }
          }]);

          return _class35;
        }(r)], CO.defaultConfig = {
          toolbar: ["heading", "|", "fontsize", "fontfamily", "|", "bold", "italic", "underline", "strikethrough", "removeFormat", "highlight", "|", "alignment", "|", "numberedList", "bulletedList", "|", "link", "blockquote", "imageUpload", "insertTable", "mediaEmbed", "|", "undo", "redo", "|", "comment", "|", "trackChanges"],
          image: {
            toolbar: ["imageStyle:inline", "imageStyle:block", "imageStyle:side", "|", "toggleImageCaption", "imageTextAlternative", "|", "comment"]
          },
          table: {
            contentToolbar: ["tableColumn", "tableRow", "mergeTableCells"],
            tableToolbar: ["comment"]
          },
          mediaEmbed: {
            toolbar: ["comment"]
          }
        };
      }, function (t, e, n) {
        "use strict";

        var i;
        n.r(e), n.d(e, "v1", function () {
          return m;
        }), n.d(e, "v3", function () {
          return T;
        }), n.d(e, "v4", function () {
          return A;
        }), n.d(e, "v5", function () {
          return I;
        }), n.d(e, "NIL", function () {
          return O;
        }), n.d(e, "version", function () {
          return R;
        }), n.d(e, "validate", function () {
          return a;
        }), n.d(e, "stringify", function () {
          return h;
        }), n.d(e, "parse", function () {
          return p;
        });
        var o = new Uint8Array(16);

        function r() {
          if (!i && !(i = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto))) throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
          return i(o);
        }

        var s = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

        for (var a = function a(t) {
          return "string" == typeof t && s.test(t);
        }, c = [], l = 0; l < 256; ++l) {
          c.push((l + 256).toString(16).substr(1));
        }

        var d,
            u,
            h = function h(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
              n = (c[t[e + 0]] + c[t[e + 1]] + c[t[e + 2]] + c[t[e + 3]] + "-" + c[t[e + 4]] + c[t[e + 5]] + "-" + c[t[e + 6]] + c[t[e + 7]] + "-" + c[t[e + 8]] + c[t[e + 9]] + "-" + c[t[e + 10]] + c[t[e + 11]] + c[t[e + 12]] + c[t[e + 13]] + c[t[e + 14]] + c[t[e + 15]]).toLowerCase();
          if (!a(n)) throw TypeError("Stringified UUID is invalid");
          return n;
        },
            f = 0,
            g = 0;

        var m = function m(t, e, n) {
          var i = e && n || 0,
              o = e || new Array(16),
              s = (t = t || {}).node || d,
              a = void 0 !== t.clockseq ? t.clockseq : u;

          if (null == s || null == a) {
            var c = t.random || (t.rng || r)();
            null == s && (s = d = [1 | c[0], c[1], c[2], c[3], c[4], c[5]]), null == a && (a = u = 16383 & (c[6] << 8 | c[7]));
          }

          var l = void 0 !== t.msecs ? t.msecs : Date.now(),
              m = void 0 !== t.nsecs ? t.nsecs : g + 1,
              p = l - f + (m - g) / 1e4;
          if (p < 0 && void 0 === t.clockseq && (a = a + 1 & 16383), (p < 0 || l > f) && void 0 === t.nsecs && (m = 0), m >= 1e4) throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
          f = l, g = m, u = a;
          var b = (1e4 * (268435455 & (l += 122192928e5)) + m) % 4294967296;
          o[i++] = b >>> 24 & 255, o[i++] = b >>> 16 & 255, o[i++] = b >>> 8 & 255, o[i++] = 255 & b;
          var k = l / 4294967296 * 1e4 & 268435455;
          o[i++] = k >>> 8 & 255, o[i++] = 255 & k, o[i++] = k >>> 24 & 15 | 16, o[i++] = k >>> 16 & 255, o[i++] = a >>> 8 | 128, o[i++] = 255 & a;

          for (var _ = 0; _ < 6; ++_) {
            o[i + _] = s[_];
          }

          return e || h(o);
        };

        var p = function p(t) {
          if (!a(t)) throw TypeError("Invalid UUID");
          var e,
              n = new Uint8Array(16);
          return n[0] = (e = parseInt(t.slice(0, 8), 16)) >>> 24, n[1] = e >>> 16 & 255, n[2] = e >>> 8 & 255, n[3] = 255 & e, n[4] = (e = parseInt(t.slice(9, 13), 16)) >>> 8, n[5] = 255 & e, n[6] = (e = parseInt(t.slice(14, 18), 16)) >>> 8, n[7] = 255 & e, n[8] = (e = parseInt(t.slice(19, 23), 16)) >>> 8, n[9] = 255 & e, n[10] = (e = parseInt(t.slice(24, 36), 16)) / 1099511627776 & 255, n[11] = e / 4294967296 & 255, n[12] = e >>> 24 & 255, n[13] = e >>> 16 & 255, n[14] = e >>> 8 & 255, n[15] = 255 & e, n;
        };

        var b = function b(t, e, n) {
          function i(t, i, o, r) {
            if ("string" == typeof t && (t = function (t) {
              t = unescape(encodeURIComponent(t));

              for (var e = [], n = 0; n < t.length; ++n) {
                e.push(t.charCodeAt(n));
              }

              return e;
            }(t)), "string" == typeof i && (i = p(i)), 16 !== i.length) throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");
            var s = new Uint8Array(16 + t.length);

            if (s.set(i), s.set(t, i.length), (s = n(s))[6] = 15 & s[6] | e, s[8] = 63 & s[8] | 128, o) {
              r = r || 0;

              for (var a = 0; a < 16; ++a) {
                o[r + a] = s[a];
              }

              return o;
            }

            return h(s);
          }

          try {
            i.name = t;
          } catch (t) {}

          return i.DNS = "6ba7b810-9dad-11d1-80b4-00c04fd430c8", i.URL = "6ba7b811-9dad-11d1-80b4-00c04fd430c8", i;
        };

        function k(t) {
          return 14 + (t + 64 >>> 9 << 4) + 1;
        }

        function _(t, e) {
          var n = (65535 & t) + (65535 & e);
          return (t >> 16) + (e >> 16) + (n >> 16) << 16 | 65535 & n;
        }

        function w(t, e, n, i, o, r) {
          return _(function (t, e) {
            return t << e | t >>> 32 - e;
          }(_(_(e, t), _(i, r)), o), n);
        }

        function v(t, e, n, i, o, r, s) {
          return w(e & n | ~e & i, t, e, o, r, s);
        }

        function y(t, e, n, i, o, r, s) {
          return w(e & i | n & ~i, t, e, o, r, s);
        }

        function x(t, e, n, i, o, r, s) {
          return w(e ^ n ^ i, t, e, o, r, s);
        }

        function C(t, e, n, i, o, r, s) {
          return w(n ^ (e | ~i), t, e, o, r, s);
        }

        var T = b("v3", 48, function (t) {
          if ("string" == typeof t) {
            var e = unescape(encodeURIComponent(t));
            t = new Uint8Array(e.length);

            for (var n = 0; n < e.length; ++n) {
              t[n] = e.charCodeAt(n);
            }
          }

          return function (t) {
            for (var e = [], n = 32 * t.length, i = 0; i < n; i += 8) {
              var o = t[i >> 5] >>> i % 32 & 255,
                  r = parseInt("0123456789abcdef".charAt(o >>> 4 & 15) + "0123456789abcdef".charAt(15 & o), 16);
              e.push(r);
            }

            return e;
          }(function (t, e) {
            t[e >> 5] |= 128 << e % 32, t[k(e) - 1] = e;

            for (var n = 1732584193, i = -271733879, o = -1732584194, r = 271733878, s = 0; s < t.length; s += 16) {
              var a = n,
                  c = i,
                  l = o,
                  d = r;
              n = v(n, i, o, r, t[s], 7, -680876936), r = v(r, n, i, o, t[s + 1], 12, -389564586), o = v(o, r, n, i, t[s + 2], 17, 606105819), i = v(i, o, r, n, t[s + 3], 22, -1044525330), n = v(n, i, o, r, t[s + 4], 7, -176418897), r = v(r, n, i, o, t[s + 5], 12, 1200080426), o = v(o, r, n, i, t[s + 6], 17, -1473231341), i = v(i, o, r, n, t[s + 7], 22, -45705983), n = v(n, i, o, r, t[s + 8], 7, 1770035416), r = v(r, n, i, o, t[s + 9], 12, -1958414417), o = v(o, r, n, i, t[s + 10], 17, -42063), i = v(i, o, r, n, t[s + 11], 22, -1990404162), n = v(n, i, o, r, t[s + 12], 7, 1804603682), r = v(r, n, i, o, t[s + 13], 12, -40341101), o = v(o, r, n, i, t[s + 14], 17, -1502002290), i = v(i, o, r, n, t[s + 15], 22, 1236535329), n = y(n, i, o, r, t[s + 1], 5, -165796510), r = y(r, n, i, o, t[s + 6], 9, -1069501632), o = y(o, r, n, i, t[s + 11], 14, 643717713), i = y(i, o, r, n, t[s], 20, -373897302), n = y(n, i, o, r, t[s + 5], 5, -701558691), r = y(r, n, i, o, t[s + 10], 9, 38016083), o = y(o, r, n, i, t[s + 15], 14, -660478335), i = y(i, o, r, n, t[s + 4], 20, -405537848), n = y(n, i, o, r, t[s + 9], 5, 568446438), r = y(r, n, i, o, t[s + 14], 9, -1019803690), o = y(o, r, n, i, t[s + 3], 14, -187363961), i = y(i, o, r, n, t[s + 8], 20, 1163531501), n = y(n, i, o, r, t[s + 13], 5, -1444681467), r = y(r, n, i, o, t[s + 2], 9, -51403784), o = y(o, r, n, i, t[s + 7], 14, 1735328473), i = y(i, o, r, n, t[s + 12], 20, -1926607734), n = x(n, i, o, r, t[s + 5], 4, -378558), r = x(r, n, i, o, t[s + 8], 11, -2022574463), o = x(o, r, n, i, t[s + 11], 16, 1839030562), i = x(i, o, r, n, t[s + 14], 23, -35309556), n = x(n, i, o, r, t[s + 1], 4, -1530992060), r = x(r, n, i, o, t[s + 4], 11, 1272893353), o = x(o, r, n, i, t[s + 7], 16, -155497632), i = x(i, o, r, n, t[s + 10], 23, -1094730640), n = x(n, i, o, r, t[s + 13], 4, 681279174), r = x(r, n, i, o, t[s], 11, -358537222), o = x(o, r, n, i, t[s + 3], 16, -722521979), i = x(i, o, r, n, t[s + 6], 23, 76029189), n = x(n, i, o, r, t[s + 9], 4, -640364487), r = x(r, n, i, o, t[s + 12], 11, -421815835), o = x(o, r, n, i, t[s + 15], 16, 530742520), i = x(i, o, r, n, t[s + 2], 23, -995338651), n = C(n, i, o, r, t[s], 6, -198630844), r = C(r, n, i, o, t[s + 7], 10, 1126891415), o = C(o, r, n, i, t[s + 14], 15, -1416354905), i = C(i, o, r, n, t[s + 5], 21, -57434055), n = C(n, i, o, r, t[s + 12], 6, 1700485571), r = C(r, n, i, o, t[s + 3], 10, -1894986606), o = C(o, r, n, i, t[s + 10], 15, -1051523), i = C(i, o, r, n, t[s + 1], 21, -2054922799), n = C(n, i, o, r, t[s + 8], 6, 1873313359), r = C(r, n, i, o, t[s + 15], 10, -30611744), o = C(o, r, n, i, t[s + 6], 15, -1560198380), i = C(i, o, r, n, t[s + 13], 21, 1309151649), n = C(n, i, o, r, t[s + 4], 6, -145523070), r = C(r, n, i, o, t[s + 11], 10, -1120210379), o = C(o, r, n, i, t[s + 2], 15, 718787259), i = C(i, o, r, n, t[s + 9], 21, -343485551), n = _(n, a), i = _(i, c), o = _(o, l), r = _(r, d);
            }

            return [n, i, o, r];
          }(function (t) {
            if (0 === t.length) return [];

            for (var e = 8 * t.length, n = new Uint32Array(k(e)), i = 0; i < e; i += 8) {
              n[i >> 5] |= (255 & t[i / 8]) << i % 32;
            }

            return n;
          }(t), 8 * t.length));
        });

        var A = function A(t, e, n) {
          var i = (t = t || {}).random || (t.rng || r)();

          if (i[6] = 15 & i[6] | 64, i[8] = 63 & i[8] | 128, e) {
            n = n || 0;

            for (var o = 0; o < 16; ++o) {
              e[n + o] = i[o];
            }

            return e;
          }

          return h(i);
        };

        function E(t, e, n, i) {
          switch (t) {
            case 0:
              return e & n ^ ~e & i;

            case 1:
              return e ^ n ^ i;

            case 2:
              return e & n ^ e & i ^ n & i;

            case 3:
              return e ^ n ^ i;
          }
        }

        function S(t, e) {
          return t << e | t >>> 32 - e;
        }

        var I = b("v5", 80, function (t) {
          var e = [1518500249, 1859775393, 2400959708, 3395469782],
              n = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];

          if ("string" == typeof t) {
            var i = unescape(encodeURIComponent(t));
            t = [];

            for (var o = 0; o < i.length; ++o) {
              t.push(i.charCodeAt(o));
            }
          } else Array.isArray(t) || (t = Array.prototype.slice.call(t));

          t.push(128);

          for (var r = t.length / 4 + 2, s = Math.ceil(r / 16), a = new Array(s), c = 0; c < s; ++c) {
            for (var l = new Uint32Array(16), d = 0; d < 16; ++d) {
              l[d] = t[64 * c + 4 * d] << 24 | t[64 * c + 4 * d + 1] << 16 | t[64 * c + 4 * d + 2] << 8 | t[64 * c + 4 * d + 3];
            }

            a[c] = l;
          }

          a[s - 1][14] = 8 * (t.length - 1) / Math.pow(2, 32), a[s - 1][14] = Math.floor(a[s - 1][14]), a[s - 1][15] = 8 * (t.length - 1) & 4294967295;

          for (var u = 0; u < s; ++u) {
            for (var h = new Uint32Array(80), f = 0; f < 16; ++f) {
              h[f] = a[u][f];
            }

            for (var g = 16; g < 80; ++g) {
              h[g] = S(h[g - 3] ^ h[g - 8] ^ h[g - 14] ^ h[g - 16], 1);
            }

            for (var m = n[0], p = n[1], b = n[2], k = n[3], _ = n[4], w = 0; w < 80; ++w) {
              var v = Math.floor(w / 20),
                  y = S(m, 5) + E(v, p, b, k) + _ + e[v] + h[w] >>> 0;
              _ = k, k = b, b = S(p, 30) >>> 0, p = m, m = y;
            }

            n[0] = n[0] + m >>> 0, n[1] = n[1] + p >>> 0, n[2] = n[2] + b >>> 0, n[3] = n[3] + k >>> 0, n[4] = n[4] + _ >>> 0;
          }

          return [n[0] >> 24 & 255, n[0] >> 16 & 255, n[0] >> 8 & 255, 255 & n[0], n[1] >> 24 & 255, n[1] >> 16 & 255, n[1] >> 8 & 255, 255 & n[1], n[2] >> 24 & 255, n[2] >> 16 & 255, n[2] >> 8 & 255, 255 & n[2], n[3] >> 24 & 255, n[3] >> 16 & 255, n[3] >> 8 & 255, 255 & n[3], n[4] >> 24 & 255, n[4] >> 16 & 255, n[4] >> 8 & 255, 255 & n[4]];
        }),
            O = "00000000-0000-0000-0000-000000000000";

        var R = function R(t) {
          if (!a(t)) throw TypeError("Invalid UUID");
          return parseInt(t.substr(14, 1), 16);
        };
      }, function (t, e, n) {
        "use strict";

        var i = n(20),
            o = n(67),
            r = n(21),
            s = Object(o.a)(function (t, e) {
          Object(i.a)(e, Object(r.a)(e), t);
        });
        e.a = s;
      }])["default"];
    });
    /***/
  },

  /***/
  0: function _(module, exports, __webpack_require__) {
    module.exports = __webpack_require__(
    /*! /private/tmp/release-collaboration-samples/real-time-collaboration-for-angular/src/main.ts */
    "./src/main.ts");
    /***/
  }
}, [[0, "runtime", "vendor"]]]);